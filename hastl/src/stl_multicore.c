// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_131091_total_runtime;
    int *futhark_mc_segmap_parloop_131091_runs;
    int64_t *futhark_mc_segmap_parloop_131091_iter;
    int64_t futhark_mc_segmap_parloop_131091_total_total_runtime;
    int futhark_mc_segmap_parloop_131091_total_runs;
    int64_t futhark_mc_segmap_parloop_131091_total_iter;
    int64_t *futhark_mc_segmap_task_131089_total_runtime;
    int *futhark_mc_segmap_task_131089_runs;
    int64_t *futhark_mc_segmap_task_131089_iter;
    int64_t futhark_mc_segmap_task_131089_total_time;
    int64_t futhark_mc_segmap_task_131089_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131103_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131103_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131103_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131103_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131103_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131103_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131105_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131105_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131105_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131105_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131105_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131105_total_iter;
    int64_t *futhark_mc_segscan_task_131100_total_runtime;
    int *futhark_mc_segscan_task_131100_runs;
    int64_t *futhark_mc_segscan_task_131100_iter;
    int64_t futhark_mc_segscan_task_131100_total_time;
    int64_t futhark_mc_segscan_task_131100_total_iter;
    int64_t *futhark_mc_segmap_parloop_131109_total_runtime;
    int *futhark_mc_segmap_parloop_131109_runs;
    int64_t *futhark_mc_segmap_parloop_131109_iter;
    int64_t futhark_mc_segmap_parloop_131109_total_total_runtime;
    int futhark_mc_segmap_parloop_131109_total_runs;
    int64_t futhark_mc_segmap_parloop_131109_total_iter;
    int64_t *futhark_mc_segmap_task_131107_total_runtime;
    int *futhark_mc_segmap_task_131107_runs;
    int64_t *futhark_mc_segmap_task_131107_iter;
    int64_t futhark_mc_segmap_task_131107_total_time;
    int64_t futhark_mc_segmap_task_131107_total_iter;
    int64_t *futhark_mc_segmap_parloop_131096_total_runtime;
    int *futhark_mc_segmap_parloop_131096_runs;
    int64_t *futhark_mc_segmap_parloop_131096_iter;
    int64_t futhark_mc_segmap_parloop_131096_total_total_runtime;
    int futhark_mc_segmap_parloop_131096_total_runs;
    int64_t futhark_mc_segmap_parloop_131096_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131094_total_runtime;
    int *futhark_mc_segmap_nested_task_131094_runs;
    int64_t *futhark_mc_segmap_nested_task_131094_iter;
    int64_t *futhark_mc_segmap_parloop_131113_total_runtime;
    int *futhark_mc_segmap_parloop_131113_runs;
    int64_t *futhark_mc_segmap_parloop_131113_iter;
    int64_t futhark_mc_segmap_parloop_131113_total_total_runtime;
    int futhark_mc_segmap_parloop_131113_total_runs;
    int64_t futhark_mc_segmap_parloop_131113_total_iter;
    int64_t *futhark_mc_segmap_task_131111_total_runtime;
    int *futhark_mc_segmap_task_131111_runs;
    int64_t *futhark_mc_segmap_task_131111_iter;
    int64_t futhark_mc_segmap_task_131111_total_time;
    int64_t futhark_mc_segmap_task_131111_total_iter;
    int64_t *futhark_mc_segmap_parloop_131122_total_runtime;
    int *futhark_mc_segmap_parloop_131122_runs;
    int64_t *futhark_mc_segmap_parloop_131122_iter;
    int64_t futhark_mc_segmap_parloop_131122_total_total_runtime;
    int futhark_mc_segmap_parloop_131122_total_runs;
    int64_t futhark_mc_segmap_parloop_131122_total_iter;
    int64_t *futhark_mc_segmap_task_131120_total_runtime;
    int *futhark_mc_segmap_task_131120_runs;
    int64_t *futhark_mc_segmap_task_131120_iter;
    int64_t futhark_mc_segmap_task_131120_total_time;
    int64_t futhark_mc_segmap_task_131120_total_iter;
    int64_t *futhark_mc_segmap_parloop_131117_total_runtime;
    int *futhark_mc_segmap_parloop_131117_runs;
    int64_t *futhark_mc_segmap_parloop_131117_iter;
    int64_t futhark_mc_segmap_parloop_131117_total_total_runtime;
    int futhark_mc_segmap_parloop_131117_total_runs;
    int64_t futhark_mc_segmap_parloop_131117_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131115_total_runtime;
    int *futhark_mc_segmap_nested_task_131115_runs;
    int64_t *futhark_mc_segmap_nested_task_131115_iter;
    int64_t *futhark_mc_segmap_parloop_131126_total_runtime;
    int *futhark_mc_segmap_parloop_131126_runs;
    int64_t *futhark_mc_segmap_parloop_131126_iter;
    int64_t futhark_mc_segmap_parloop_131126_total_total_runtime;
    int futhark_mc_segmap_parloop_131126_total_runs;
    int64_t futhark_mc_segmap_parloop_131126_total_iter;
    int64_t *futhark_mc_segmap_task_131124_total_runtime;
    int *futhark_mc_segmap_task_131124_runs;
    int64_t *futhark_mc_segmap_task_131124_iter;
    int64_t futhark_mc_segmap_task_131124_total_time;
    int64_t futhark_mc_segmap_task_131124_total_iter;
    int64_t *futhark_mc_segmap_parloop_131135_total_runtime;
    int *futhark_mc_segmap_parloop_131135_runs;
    int64_t *futhark_mc_segmap_parloop_131135_iter;
    int64_t futhark_mc_segmap_parloop_131135_total_total_runtime;
    int futhark_mc_segmap_parloop_131135_total_runs;
    int64_t futhark_mc_segmap_parloop_131135_total_iter;
    int64_t *futhark_mc_segmap_task_131133_total_runtime;
    int *futhark_mc_segmap_task_131133_runs;
    int64_t *futhark_mc_segmap_task_131133_iter;
    int64_t futhark_mc_segmap_task_131133_total_time;
    int64_t futhark_mc_segmap_task_131133_total_iter;
    int64_t *futhark_mc_segmap_parloop_131130_total_runtime;
    int *futhark_mc_segmap_parloop_131130_runs;
    int64_t *futhark_mc_segmap_parloop_131130_iter;
    int64_t futhark_mc_segmap_parloop_131130_total_total_runtime;
    int futhark_mc_segmap_parloop_131130_total_runs;
    int64_t futhark_mc_segmap_parloop_131130_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131128_total_runtime;
    int *futhark_mc_segmap_nested_task_131128_runs;
    int64_t *futhark_mc_segmap_nested_task_131128_iter;
    int64_t *futhark_mc_segmap_parloop_131139_total_runtime;
    int *futhark_mc_segmap_parloop_131139_runs;
    int64_t *futhark_mc_segmap_parloop_131139_iter;
    int64_t futhark_mc_segmap_parloop_131139_total_total_runtime;
    int futhark_mc_segmap_parloop_131139_total_runs;
    int64_t futhark_mc_segmap_parloop_131139_total_iter;
    int64_t *futhark_mc_segmap_task_131137_total_runtime;
    int *futhark_mc_segmap_task_131137_runs;
    int64_t *futhark_mc_segmap_task_131137_iter;
    int64_t futhark_mc_segmap_task_131137_total_time;
    int64_t futhark_mc_segmap_task_131137_total_iter;
    int64_t *futhark_mc_segmap_parloop_131148_total_runtime;
    int *futhark_mc_segmap_parloop_131148_runs;
    int64_t *futhark_mc_segmap_parloop_131148_iter;
    int64_t futhark_mc_segmap_parloop_131148_total_total_runtime;
    int futhark_mc_segmap_parloop_131148_total_runs;
    int64_t futhark_mc_segmap_parloop_131148_total_iter;
    int64_t *futhark_mc_segmap_task_131146_total_runtime;
    int *futhark_mc_segmap_task_131146_runs;
    int64_t *futhark_mc_segmap_task_131146_iter;
    int64_t futhark_mc_segmap_task_131146_total_time;
    int64_t futhark_mc_segmap_task_131146_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131156_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131156_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131156_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131156_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131156_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131156_total_iter;
    int64_t *futhark_mc_segred_task_131153_total_runtime;
    int *futhark_mc_segred_task_131153_runs;
    int64_t *futhark_mc_segred_task_131153_iter;
    int64_t futhark_mc_segred_task_131153_total_time;
    int64_t futhark_mc_segred_task_131153_total_iter;
    int64_t *futhark_mc_segmap_parloop_131151_total_runtime;
    int *futhark_mc_segmap_parloop_131151_runs;
    int64_t *futhark_mc_segmap_parloop_131151_iter;
    int64_t futhark_mc_segmap_parloop_131151_total_total_runtime;
    int futhark_mc_segmap_parloop_131151_total_runs;
    int64_t futhark_mc_segmap_parloop_131151_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131149_total_runtime;
    int *futhark_mc_segmap_nested_task_131149_runs;
    int64_t *futhark_mc_segmap_nested_task_131149_iter;
    int64_t *futhark_mc_segmap_parloop_131143_total_runtime;
    int *futhark_mc_segmap_parloop_131143_runs;
    int64_t *futhark_mc_segmap_parloop_131143_iter;
    int64_t futhark_mc_segmap_parloop_131143_total_total_runtime;
    int futhark_mc_segmap_parloop_131143_total_runs;
    int64_t futhark_mc_segmap_parloop_131143_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131141_total_runtime;
    int *futhark_mc_segmap_nested_task_131141_runs;
    int64_t *futhark_mc_segmap_nested_task_131141_iter;
    int64_t *futhark_mc_segmap_parloop_131160_total_runtime;
    int *futhark_mc_segmap_parloop_131160_runs;
    int64_t *futhark_mc_segmap_parloop_131160_iter;
    int64_t futhark_mc_segmap_parloop_131160_total_total_runtime;
    int futhark_mc_segmap_parloop_131160_total_runs;
    int64_t futhark_mc_segmap_parloop_131160_total_iter;
    int64_t *futhark_mc_segmap_task_131158_total_runtime;
    int *futhark_mc_segmap_task_131158_runs;
    int64_t *futhark_mc_segmap_task_131158_iter;
    int64_t futhark_mc_segmap_task_131158_total_time;
    int64_t futhark_mc_segmap_task_131158_total_iter;
    int64_t *futhark_mc_segmap_parloop_131175_total_runtime;
    int *futhark_mc_segmap_parloop_131175_runs;
    int64_t *futhark_mc_segmap_parloop_131175_iter;
    int64_t futhark_mc_segmap_parloop_131175_total_total_runtime;
    int futhark_mc_segmap_parloop_131175_total_runs;
    int64_t futhark_mc_segmap_parloop_131175_total_iter;
    int64_t *futhark_mc_segmap_task_131173_total_runtime;
    int *futhark_mc_segmap_task_131173_runs;
    int64_t *futhark_mc_segmap_task_131173_iter;
    int64_t futhark_mc_segmap_task_131173_total_time;
    int64_t futhark_mc_segmap_task_131173_total_iter;
    int64_t *futhark_mc_segmap_parloop_131179_total_runtime;
    int *futhark_mc_segmap_parloop_131179_runs;
    int64_t *futhark_mc_segmap_parloop_131179_iter;
    int64_t futhark_mc_segmap_parloop_131179_total_total_runtime;
    int futhark_mc_segmap_parloop_131179_total_runs;
    int64_t futhark_mc_segmap_parloop_131179_total_iter;
    int64_t *futhark_mc_segmap_task_131177_total_runtime;
    int *futhark_mc_segmap_task_131177_runs;
    int64_t *futhark_mc_segmap_task_131177_iter;
    int64_t futhark_mc_segmap_task_131177_total_time;
    int64_t futhark_mc_segmap_task_131177_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131187_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131187_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131187_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131187_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131187_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131187_total_iter;
    int64_t *futhark_mc_segred_task_131184_total_runtime;
    int *futhark_mc_segred_task_131184_runs;
    int64_t *futhark_mc_segred_task_131184_iter;
    int64_t futhark_mc_segred_task_131184_total_time;
    int64_t futhark_mc_segred_task_131184_total_iter;
    int64_t *futhark_mc_segmap_parloop_131182_total_runtime;
    int *futhark_mc_segmap_parloop_131182_runs;
    int64_t *futhark_mc_segmap_parloop_131182_iter;
    int64_t futhark_mc_segmap_parloop_131182_total_total_runtime;
    int futhark_mc_segmap_parloop_131182_total_runs;
    int64_t futhark_mc_segmap_parloop_131182_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131180_total_runtime;
    int *futhark_mc_segmap_nested_task_131180_runs;
    int64_t *futhark_mc_segmap_nested_task_131180_iter;
    int64_t *futhark_mc_segmap_parloop_131167_total_runtime;
    int *futhark_mc_segmap_parloop_131167_runs;
    int64_t *futhark_mc_segmap_parloop_131167_iter;
    int64_t futhark_mc_segmap_parloop_131167_total_total_runtime;
    int futhark_mc_segmap_parloop_131167_total_runs;
    int64_t futhark_mc_segmap_parloop_131167_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131165_total_runtime;
    int *futhark_mc_segmap_nested_task_131165_runs;
    int64_t *futhark_mc_segmap_nested_task_131165_iter;
    int64_t *futhark_mc_segmap_parloop_131191_total_runtime;
    int *futhark_mc_segmap_parloop_131191_runs;
    int64_t *futhark_mc_segmap_parloop_131191_iter;
    int64_t futhark_mc_segmap_parloop_131191_total_total_runtime;
    int futhark_mc_segmap_parloop_131191_total_runs;
    int64_t futhark_mc_segmap_parloop_131191_total_iter;
    int64_t *futhark_mc_segmap_task_131189_total_runtime;
    int *futhark_mc_segmap_task_131189_runs;
    int64_t *futhark_mc_segmap_task_131189_iter;
    int64_t futhark_mc_segmap_task_131189_total_time;
    int64_t futhark_mc_segmap_task_131189_total_iter;
    int64_t *futhark_mc_segmap_parloop_131206_total_runtime;
    int *futhark_mc_segmap_parloop_131206_runs;
    int64_t *futhark_mc_segmap_parloop_131206_iter;
    int64_t futhark_mc_segmap_parloop_131206_total_total_runtime;
    int futhark_mc_segmap_parloop_131206_total_runs;
    int64_t futhark_mc_segmap_parloop_131206_total_iter;
    int64_t *futhark_mc_segmap_task_131204_total_runtime;
    int *futhark_mc_segmap_task_131204_runs;
    int64_t *futhark_mc_segmap_task_131204_iter;
    int64_t futhark_mc_segmap_task_131204_total_time;
    int64_t futhark_mc_segmap_task_131204_total_iter;
    int64_t *futhark_mc_segmap_parloop_131210_total_runtime;
    int *futhark_mc_segmap_parloop_131210_runs;
    int64_t *futhark_mc_segmap_parloop_131210_iter;
    int64_t futhark_mc_segmap_parloop_131210_total_total_runtime;
    int futhark_mc_segmap_parloop_131210_total_runs;
    int64_t futhark_mc_segmap_parloop_131210_total_iter;
    int64_t *futhark_mc_segmap_task_131208_total_runtime;
    int *futhark_mc_segmap_task_131208_runs;
    int64_t *futhark_mc_segmap_task_131208_iter;
    int64_t futhark_mc_segmap_task_131208_total_time;
    int64_t futhark_mc_segmap_task_131208_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131218_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131218_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131218_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131218_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131218_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131218_total_iter;
    int64_t *futhark_mc_segred_task_131215_total_runtime;
    int *futhark_mc_segred_task_131215_runs;
    int64_t *futhark_mc_segred_task_131215_iter;
    int64_t futhark_mc_segred_task_131215_total_time;
    int64_t futhark_mc_segred_task_131215_total_iter;
    int64_t *futhark_mc_segmap_parloop_131213_total_runtime;
    int *futhark_mc_segmap_parloop_131213_runs;
    int64_t *futhark_mc_segmap_parloop_131213_iter;
    int64_t futhark_mc_segmap_parloop_131213_total_total_runtime;
    int futhark_mc_segmap_parloop_131213_total_runs;
    int64_t futhark_mc_segmap_parloop_131213_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131211_total_runtime;
    int *futhark_mc_segmap_nested_task_131211_runs;
    int64_t *futhark_mc_segmap_nested_task_131211_iter;
    int64_t *futhark_mc_segmap_parloop_131198_total_runtime;
    int *futhark_mc_segmap_parloop_131198_runs;
    int64_t *futhark_mc_segmap_parloop_131198_iter;
    int64_t futhark_mc_segmap_parloop_131198_total_total_runtime;
    int futhark_mc_segmap_parloop_131198_total_runs;
    int64_t futhark_mc_segmap_parloop_131198_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131196_total_runtime;
    int *futhark_mc_segmap_nested_task_131196_runs;
    int64_t *futhark_mc_segmap_nested_task_131196_iter;
    int64_t *futhark_mc_segmap_parloop_131222_total_runtime;
    int *futhark_mc_segmap_parloop_131222_runs;
    int64_t *futhark_mc_segmap_parloop_131222_iter;
    int64_t futhark_mc_segmap_parloop_131222_total_total_runtime;
    int futhark_mc_segmap_parloop_131222_total_runs;
    int64_t futhark_mc_segmap_parloop_131222_total_iter;
    int64_t *futhark_mc_segmap_task_131220_total_runtime;
    int *futhark_mc_segmap_task_131220_runs;
    int64_t *futhark_mc_segmap_task_131220_iter;
    int64_t futhark_mc_segmap_task_131220_total_time;
    int64_t futhark_mc_segmap_task_131220_total_iter;
    int64_t *futhark_mc_segmap_parloop_131231_total_runtime;
    int *futhark_mc_segmap_parloop_131231_runs;
    int64_t *futhark_mc_segmap_parloop_131231_iter;
    int64_t futhark_mc_segmap_parloop_131231_total_total_runtime;
    int futhark_mc_segmap_parloop_131231_total_runs;
    int64_t futhark_mc_segmap_parloop_131231_total_iter;
    int64_t *futhark_mc_segmap_task_131229_total_runtime;
    int *futhark_mc_segmap_task_131229_runs;
    int64_t *futhark_mc_segmap_task_131229_iter;
    int64_t futhark_mc_segmap_task_131229_total_time;
    int64_t futhark_mc_segmap_task_131229_total_iter;
    int64_t *futhark_mc_segmap_parloop_131226_total_runtime;
    int *futhark_mc_segmap_parloop_131226_runs;
    int64_t *futhark_mc_segmap_parloop_131226_iter;
    int64_t futhark_mc_segmap_parloop_131226_total_total_runtime;
    int futhark_mc_segmap_parloop_131226_total_runs;
    int64_t futhark_mc_segmap_parloop_131226_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131224_total_runtime;
    int *futhark_mc_segmap_nested_task_131224_runs;
    int64_t *futhark_mc_segmap_nested_task_131224_iter;
    int64_t *futhark_mc_segmap_parloop_131235_total_runtime;
    int *futhark_mc_segmap_parloop_131235_runs;
    int64_t *futhark_mc_segmap_parloop_131235_iter;
    int64_t futhark_mc_segmap_parloop_131235_total_total_runtime;
    int futhark_mc_segmap_parloop_131235_total_runs;
    int64_t futhark_mc_segmap_parloop_131235_total_iter;
    int64_t *futhark_mc_segmap_task_131233_total_runtime;
    int *futhark_mc_segmap_task_131233_runs;
    int64_t *futhark_mc_segmap_task_131233_iter;
    int64_t futhark_mc_segmap_task_131233_total_time;
    int64_t futhark_mc_segmap_task_131233_total_iter;
    int64_t *futhark_mc_segmap_parloop_131244_total_runtime;
    int *futhark_mc_segmap_parloop_131244_runs;
    int64_t *futhark_mc_segmap_parloop_131244_iter;
    int64_t futhark_mc_segmap_parloop_131244_total_total_runtime;
    int futhark_mc_segmap_parloop_131244_total_runs;
    int64_t futhark_mc_segmap_parloop_131244_total_iter;
    int64_t *futhark_mc_segmap_task_131242_total_runtime;
    int *futhark_mc_segmap_task_131242_runs;
    int64_t *futhark_mc_segmap_task_131242_iter;
    int64_t futhark_mc_segmap_task_131242_total_time;
    int64_t futhark_mc_segmap_task_131242_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131252_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131252_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131252_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131252_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131252_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131252_total_iter;
    int64_t *futhark_mc_segred_task_131249_total_runtime;
    int *futhark_mc_segred_task_131249_runs;
    int64_t *futhark_mc_segred_task_131249_iter;
    int64_t futhark_mc_segred_task_131249_total_time;
    int64_t futhark_mc_segred_task_131249_total_iter;
    int64_t *futhark_mc_segmap_parloop_131247_total_runtime;
    int *futhark_mc_segmap_parloop_131247_runs;
    int64_t *futhark_mc_segmap_parloop_131247_iter;
    int64_t futhark_mc_segmap_parloop_131247_total_total_runtime;
    int futhark_mc_segmap_parloop_131247_total_runs;
    int64_t futhark_mc_segmap_parloop_131247_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131245_total_runtime;
    int *futhark_mc_segmap_nested_task_131245_runs;
    int64_t *futhark_mc_segmap_nested_task_131245_iter;
    int64_t *futhark_mc_segmap_parloop_131239_total_runtime;
    int *futhark_mc_segmap_parloop_131239_runs;
    int64_t *futhark_mc_segmap_parloop_131239_iter;
    int64_t futhark_mc_segmap_parloop_131239_total_total_runtime;
    int futhark_mc_segmap_parloop_131239_total_runs;
    int64_t futhark_mc_segmap_parloop_131239_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131237_total_runtime;
    int *futhark_mc_segmap_nested_task_131237_runs;
    int64_t *futhark_mc_segmap_nested_task_131237_iter;
    int64_t *futhark_mc_segmap_parloop_131256_total_runtime;
    int *futhark_mc_segmap_parloop_131256_runs;
    int64_t *futhark_mc_segmap_parloop_131256_iter;
    int64_t futhark_mc_segmap_parloop_131256_total_total_runtime;
    int futhark_mc_segmap_parloop_131256_total_runs;
    int64_t futhark_mc_segmap_parloop_131256_total_iter;
    int64_t *futhark_mc_segmap_task_131254_total_runtime;
    int *futhark_mc_segmap_task_131254_runs;
    int64_t *futhark_mc_segmap_task_131254_iter;
    int64_t futhark_mc_segmap_task_131254_total_time;
    int64_t futhark_mc_segmap_task_131254_total_iter;
    int64_t *futhark_mc_segmap_parloop_131265_total_runtime;
    int *futhark_mc_segmap_parloop_131265_runs;
    int64_t *futhark_mc_segmap_parloop_131265_iter;
    int64_t futhark_mc_segmap_parloop_131265_total_total_runtime;
    int futhark_mc_segmap_parloop_131265_total_runs;
    int64_t futhark_mc_segmap_parloop_131265_total_iter;
    int64_t *futhark_mc_segmap_task_131263_total_runtime;
    int *futhark_mc_segmap_task_131263_runs;
    int64_t *futhark_mc_segmap_task_131263_iter;
    int64_t futhark_mc_segmap_task_131263_total_time;
    int64_t futhark_mc_segmap_task_131263_total_iter;
    int64_t *futhark_mc_segmap_parloop_131260_total_runtime;
    int *futhark_mc_segmap_parloop_131260_runs;
    int64_t *futhark_mc_segmap_parloop_131260_iter;
    int64_t futhark_mc_segmap_parloop_131260_total_total_runtime;
    int futhark_mc_segmap_parloop_131260_total_runs;
    int64_t futhark_mc_segmap_parloop_131260_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131258_total_runtime;
    int *futhark_mc_segmap_nested_task_131258_runs;
    int64_t *futhark_mc_segmap_nested_task_131258_iter;
    int64_t *futhark_mc_segmap_parloop_131269_total_runtime;
    int *futhark_mc_segmap_parloop_131269_runs;
    int64_t *futhark_mc_segmap_parloop_131269_iter;
    int64_t futhark_mc_segmap_parloop_131269_total_total_runtime;
    int futhark_mc_segmap_parloop_131269_total_runs;
    int64_t futhark_mc_segmap_parloop_131269_total_iter;
    int64_t *futhark_mc_segmap_task_131267_total_runtime;
    int *futhark_mc_segmap_task_131267_runs;
    int64_t *futhark_mc_segmap_task_131267_iter;
    int64_t futhark_mc_segmap_task_131267_total_time;
    int64_t futhark_mc_segmap_task_131267_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131283_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131283_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131283_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131283_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131283_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131283_total_iter;
    int64_t *futhark_mc_segred_task_131280_total_runtime;
    int *futhark_mc_segred_task_131280_runs;
    int64_t *futhark_mc_segred_task_131280_iter;
    int64_t futhark_mc_segred_task_131280_total_time;
    int64_t futhark_mc_segred_task_131280_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131288_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131288_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131288_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131288_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131288_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131288_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131290_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131290_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131290_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131290_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131290_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131290_total_iter;
    int64_t *futhark_mc_segscan_task_131285_total_runtime;
    int *futhark_mc_segscan_task_131285_runs;
    int64_t *futhark_mc_segscan_task_131285_iter;
    int64_t futhark_mc_segscan_task_131285_total_time;
    int64_t futhark_mc_segscan_task_131285_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131295_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131295_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131295_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131295_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131295_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131295_total_iter;
    int64_t *futhark_mc_segred_task_131292_total_runtime;
    int *futhark_mc_segred_task_131292_runs;
    int64_t *futhark_mc_segred_task_131292_iter;
    int64_t futhark_mc_segred_task_131292_total_time;
    int64_t futhark_mc_segred_task_131292_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131300_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131300_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131300_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131300_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131300_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131300_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131302_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131302_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131302_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131302_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131302_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131302_total_iter;
    int64_t *futhark_mc_segscan_task_131297_total_runtime;
    int *futhark_mc_segscan_task_131297_runs;
    int64_t *futhark_mc_segscan_task_131297_iter;
    int64_t futhark_mc_segscan_task_131297_total_time;
    int64_t futhark_mc_segscan_task_131297_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131307_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131307_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131307_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131307_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131307_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131307_total_iter;
    int64_t *futhark_mc_segred_task_131304_total_runtime;
    int *futhark_mc_segred_task_131304_runs;
    int64_t *futhark_mc_segred_task_131304_iter;
    int64_t futhark_mc_segred_task_131304_total_time;
    int64_t futhark_mc_segred_task_131304_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131312_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131312_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131312_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131312_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131312_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131312_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131314_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131314_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131314_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131314_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131314_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131314_total_iter;
    int64_t *futhark_mc_segscan_task_131309_total_runtime;
    int *futhark_mc_segscan_task_131309_runs;
    int64_t *futhark_mc_segscan_task_131309_iter;
    int64_t futhark_mc_segscan_task_131309_total_time;
    int64_t futhark_mc_segscan_task_131309_total_iter;
    int64_t *futhark_mc_segmap_parloop_131275_total_runtime;
    int *futhark_mc_segmap_parloop_131275_runs;
    int64_t *futhark_mc_segmap_parloop_131275_iter;
    int64_t futhark_mc_segmap_parloop_131275_total_total_runtime;
    int futhark_mc_segmap_parloop_131275_total_runs;
    int64_t futhark_mc_segmap_parloop_131275_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131273_total_runtime;
    int *futhark_mc_segmap_nested_task_131273_runs;
    int64_t *futhark_mc_segmap_nested_task_131273_iter;
    int64_t *futhark_mc_segmap_parloop_131318_total_runtime;
    int *futhark_mc_segmap_parloop_131318_runs;
    int64_t *futhark_mc_segmap_parloop_131318_iter;
    int64_t futhark_mc_segmap_parloop_131318_total_total_runtime;
    int futhark_mc_segmap_parloop_131318_total_runs;
    int64_t futhark_mc_segmap_parloop_131318_total_iter;
    int64_t *futhark_mc_segmap_task_131316_total_runtime;
    int *futhark_mc_segmap_task_131316_runs;
    int64_t *futhark_mc_segmap_task_131316_iter;
    int64_t futhark_mc_segmap_task_131316_total_time;
    int64_t futhark_mc_segmap_task_131316_total_iter;
    int64_t *futhark_mc_segmap_parloop_131329_total_runtime;
    int *futhark_mc_segmap_parloop_131329_runs;
    int64_t *futhark_mc_segmap_parloop_131329_iter;
    int64_t futhark_mc_segmap_parloop_131329_total_total_runtime;
    int futhark_mc_segmap_parloop_131329_total_runs;
    int64_t futhark_mc_segmap_parloop_131329_total_iter;
    int64_t *futhark_mc_segmap_task_131327_total_runtime;
    int *futhark_mc_segmap_task_131327_runs;
    int64_t *futhark_mc_segmap_task_131327_iter;
    int64_t futhark_mc_segmap_task_131327_total_time;
    int64_t futhark_mc_segmap_task_131327_total_iter;
    int64_t *futhark_mc_segmap_parloop_131323_total_runtime;
    int *futhark_mc_segmap_parloop_131323_runs;
    int64_t *futhark_mc_segmap_parloop_131323_iter;
    int64_t futhark_mc_segmap_parloop_131323_total_total_runtime;
    int futhark_mc_segmap_parloop_131323_total_runs;
    int64_t futhark_mc_segmap_parloop_131323_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131321_total_runtime;
    int *futhark_mc_segmap_nested_task_131321_runs;
    int64_t *futhark_mc_segmap_nested_task_131321_iter;
    int64_t *futhark_mc_segmap_parloop_131333_total_runtime;
    int *futhark_mc_segmap_parloop_131333_runs;
    int64_t *futhark_mc_segmap_parloop_131333_iter;
    int64_t futhark_mc_segmap_parloop_131333_total_total_runtime;
    int futhark_mc_segmap_parloop_131333_total_runs;
    int64_t futhark_mc_segmap_parloop_131333_total_iter;
    int64_t *futhark_mc_segmap_task_131331_total_runtime;
    int *futhark_mc_segmap_task_131331_runs;
    int64_t *futhark_mc_segmap_task_131331_iter;
    int64_t futhark_mc_segmap_task_131331_total_time;
    int64_t futhark_mc_segmap_task_131331_total_iter;
    int64_t *futhark_mc_segmap_parloop_131342_total_runtime;
    int *futhark_mc_segmap_parloop_131342_runs;
    int64_t *futhark_mc_segmap_parloop_131342_iter;
    int64_t futhark_mc_segmap_parloop_131342_total_total_runtime;
    int futhark_mc_segmap_parloop_131342_total_runs;
    int64_t futhark_mc_segmap_parloop_131342_total_iter;
    int64_t *futhark_mc_segmap_task_131340_total_runtime;
    int *futhark_mc_segmap_task_131340_runs;
    int64_t *futhark_mc_segmap_task_131340_iter;
    int64_t futhark_mc_segmap_task_131340_total_time;
    int64_t futhark_mc_segmap_task_131340_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131350_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131350_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131350_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131350_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131350_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131350_total_iter;
    int64_t *futhark_mc_segred_task_131347_total_runtime;
    int *futhark_mc_segred_task_131347_runs;
    int64_t *futhark_mc_segred_task_131347_iter;
    int64_t futhark_mc_segred_task_131347_total_time;
    int64_t futhark_mc_segred_task_131347_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131355_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131355_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131355_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131355_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131355_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131355_total_iter;
    int64_t *futhark_mc_segred_task_131352_total_runtime;
    int *futhark_mc_segred_task_131352_runs;
    int64_t *futhark_mc_segred_task_131352_iter;
    int64_t futhark_mc_segred_task_131352_total_time;
    int64_t futhark_mc_segred_task_131352_total_iter;
    int64_t *futhark_mc_segmap_parloop_131345_total_runtime;
    int *futhark_mc_segmap_parloop_131345_runs;
    int64_t *futhark_mc_segmap_parloop_131345_iter;
    int64_t futhark_mc_segmap_parloop_131345_total_total_runtime;
    int futhark_mc_segmap_parloop_131345_total_runs;
    int64_t futhark_mc_segmap_parloop_131345_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131343_total_runtime;
    int *futhark_mc_segmap_nested_task_131343_runs;
    int64_t *futhark_mc_segmap_nested_task_131343_iter;
    int64_t *futhark_mc_segmap_parloop_131337_total_runtime;
    int *futhark_mc_segmap_parloop_131337_runs;
    int64_t *futhark_mc_segmap_parloop_131337_iter;
    int64_t futhark_mc_segmap_parloop_131337_total_total_runtime;
    int futhark_mc_segmap_parloop_131337_total_runs;
    int64_t futhark_mc_segmap_parloop_131337_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131335_total_runtime;
    int *futhark_mc_segmap_nested_task_131335_runs;
    int64_t *futhark_mc_segmap_nested_task_131335_iter;
    int64_t *futhark_mc_segmap_parloop_131359_total_runtime;
    int *futhark_mc_segmap_parloop_131359_runs;
    int64_t *futhark_mc_segmap_parloop_131359_iter;
    int64_t futhark_mc_segmap_parloop_131359_total_total_runtime;
    int futhark_mc_segmap_parloop_131359_total_runs;
    int64_t futhark_mc_segmap_parloop_131359_total_iter;
    int64_t *futhark_mc_segmap_task_131357_total_runtime;
    int *futhark_mc_segmap_task_131357_runs;
    int64_t *futhark_mc_segmap_task_131357_iter;
    int64_t futhark_mc_segmap_task_131357_total_time;
    int64_t futhark_mc_segmap_task_131357_total_iter;
    int64_t *futhark_mc_segmap_parloop_131370_total_runtime;
    int *futhark_mc_segmap_parloop_131370_runs;
    int64_t *futhark_mc_segmap_parloop_131370_iter;
    int64_t futhark_mc_segmap_parloop_131370_total_total_runtime;
    int futhark_mc_segmap_parloop_131370_total_runs;
    int64_t futhark_mc_segmap_parloop_131370_total_iter;
    int64_t *futhark_mc_segmap_task_131368_total_runtime;
    int *futhark_mc_segmap_task_131368_runs;
    int64_t *futhark_mc_segmap_task_131368_iter;
    int64_t futhark_mc_segmap_task_131368_total_time;
    int64_t futhark_mc_segmap_task_131368_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131380_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131380_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131380_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131380_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131380_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131380_total_iter;
    int64_t *futhark_mc_segred_task_131375_total_runtime;
    int *futhark_mc_segred_task_131375_runs;
    int64_t *futhark_mc_segred_task_131375_iter;
    int64_t futhark_mc_segred_task_131375_total_time;
    int64_t futhark_mc_segred_task_131375_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131386_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131386_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131386_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131386_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131386_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131386_total_iter;
    int64_t *futhark_mc_segred_task_131382_total_runtime;
    int *futhark_mc_segred_task_131382_runs;
    int64_t *futhark_mc_segred_task_131382_iter;
    int64_t futhark_mc_segred_task_131382_total_time;
    int64_t futhark_mc_segred_task_131382_total_iter;
    int64_t *futhark_mc_segmap_parloop_131373_total_runtime;
    int *futhark_mc_segmap_parloop_131373_runs;
    int64_t *futhark_mc_segmap_parloop_131373_iter;
    int64_t futhark_mc_segmap_parloop_131373_total_total_runtime;
    int futhark_mc_segmap_parloop_131373_total_runs;
    int64_t futhark_mc_segmap_parloop_131373_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131371_total_runtime;
    int *futhark_mc_segmap_nested_task_131371_runs;
    int64_t *futhark_mc_segmap_nested_task_131371_iter;
    int64_t *futhark_mc_segmap_parloop_131364_total_runtime;
    int *futhark_mc_segmap_parloop_131364_runs;
    int64_t *futhark_mc_segmap_parloop_131364_iter;
    int64_t futhark_mc_segmap_parloop_131364_total_total_runtime;
    int futhark_mc_segmap_parloop_131364_total_runs;
    int64_t futhark_mc_segmap_parloop_131364_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131362_total_runtime;
    int *futhark_mc_segmap_nested_task_131362_runs;
    int64_t *futhark_mc_segmap_nested_task_131362_iter;
    int64_t *futhark_mc_segmap_parloop_131390_total_runtime;
    int *futhark_mc_segmap_parloop_131390_runs;
    int64_t *futhark_mc_segmap_parloop_131390_iter;
    int64_t futhark_mc_segmap_parloop_131390_total_total_runtime;
    int futhark_mc_segmap_parloop_131390_total_runs;
    int64_t futhark_mc_segmap_parloop_131390_total_iter;
    int64_t *futhark_mc_segmap_task_131388_total_runtime;
    int *futhark_mc_segmap_task_131388_runs;
    int64_t *futhark_mc_segmap_task_131388_iter;
    int64_t futhark_mc_segmap_task_131388_total_time;
    int64_t futhark_mc_segmap_task_131388_total_iter;
    int64_t *futhark_mc_segmap_parloop_131401_total_runtime;
    int *futhark_mc_segmap_parloop_131401_runs;
    int64_t *futhark_mc_segmap_parloop_131401_iter;
    int64_t futhark_mc_segmap_parloop_131401_total_total_runtime;
    int futhark_mc_segmap_parloop_131401_total_runs;
    int64_t futhark_mc_segmap_parloop_131401_total_iter;
    int64_t *futhark_mc_segmap_task_131399_total_runtime;
    int *futhark_mc_segmap_task_131399_runs;
    int64_t *futhark_mc_segmap_task_131399_iter;
    int64_t futhark_mc_segmap_task_131399_total_time;
    int64_t futhark_mc_segmap_task_131399_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131413_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131413_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131413_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131413_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131413_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131413_total_iter;
    int64_t *futhark_mc_segred_task_131406_total_runtime;
    int *futhark_mc_segred_task_131406_runs;
    int64_t *futhark_mc_segred_task_131406_iter;
    int64_t futhark_mc_segred_task_131406_total_time;
    int64_t futhark_mc_segred_task_131406_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131419_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131419_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131419_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131419_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131419_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131419_total_iter;
    int64_t *futhark_mc_segred_task_131415_total_runtime;
    int *futhark_mc_segred_task_131415_runs;
    int64_t *futhark_mc_segred_task_131415_iter;
    int64_t futhark_mc_segred_task_131415_total_time;
    int64_t futhark_mc_segred_task_131415_total_iter;
    int64_t *futhark_mc_segmap_parloop_131404_total_runtime;
    int *futhark_mc_segmap_parloop_131404_runs;
    int64_t *futhark_mc_segmap_parloop_131404_iter;
    int64_t futhark_mc_segmap_parloop_131404_total_total_runtime;
    int futhark_mc_segmap_parloop_131404_total_runs;
    int64_t futhark_mc_segmap_parloop_131404_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131402_total_runtime;
    int *futhark_mc_segmap_nested_task_131402_runs;
    int64_t *futhark_mc_segmap_nested_task_131402_iter;
    int64_t *futhark_mc_segmap_parloop_131395_total_runtime;
    int *futhark_mc_segmap_parloop_131395_runs;
    int64_t *futhark_mc_segmap_parloop_131395_iter;
    int64_t futhark_mc_segmap_parloop_131395_total_total_runtime;
    int futhark_mc_segmap_parloop_131395_total_runs;
    int64_t futhark_mc_segmap_parloop_131395_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131393_total_runtime;
    int *futhark_mc_segmap_nested_task_131393_runs;
    int64_t *futhark_mc_segmap_nested_task_131393_iter;
    int64_t *futhark_mc_segmap_parloop_131423_total_runtime;
    int *futhark_mc_segmap_parloop_131423_runs;
    int64_t *futhark_mc_segmap_parloop_131423_iter;
    int64_t futhark_mc_segmap_parloop_131423_total_total_runtime;
    int futhark_mc_segmap_parloop_131423_total_runs;
    int64_t futhark_mc_segmap_parloop_131423_total_iter;
    int64_t *futhark_mc_segmap_task_131421_total_runtime;
    int *futhark_mc_segmap_task_131421_runs;
    int64_t *futhark_mc_segmap_task_131421_iter;
    int64_t futhark_mc_segmap_task_131421_total_time;
    int64_t futhark_mc_segmap_task_131421_total_iter;
    int64_t *futhark_mc_segmap_parloop_131433_total_runtime;
    int *futhark_mc_segmap_parloop_131433_runs;
    int64_t *futhark_mc_segmap_parloop_131433_iter;
    int64_t futhark_mc_segmap_parloop_131433_total_total_runtime;
    int futhark_mc_segmap_parloop_131433_total_runs;
    int64_t futhark_mc_segmap_parloop_131433_total_iter;
    int64_t *futhark_mc_segmap_task_131431_total_runtime;
    int *futhark_mc_segmap_task_131431_runs;
    int64_t *futhark_mc_segmap_task_131431_iter;
    int64_t futhark_mc_segmap_task_131431_total_time;
    int64_t futhark_mc_segmap_task_131431_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131443_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131443_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131443_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131443_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131443_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131443_total_iter;
    int64_t *futhark_mc_segred_task_131440_total_runtime;
    int *futhark_mc_segred_task_131440_runs;
    int64_t *futhark_mc_segred_task_131440_iter;
    int64_t futhark_mc_segred_task_131440_total_time;
    int64_t futhark_mc_segred_task_131440_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131448_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131448_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131448_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131448_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131448_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131448_total_iter;
    int64_t *futhark_mc_segred_task_131445_total_runtime;
    int *futhark_mc_segred_task_131445_runs;
    int64_t *futhark_mc_segred_task_131445_iter;
    int64_t futhark_mc_segred_task_131445_total_time;
    int64_t futhark_mc_segred_task_131445_total_iter;
    int64_t *futhark_mc_segmap_parloop_131437_total_runtime;
    int *futhark_mc_segmap_parloop_131437_runs;
    int64_t *futhark_mc_segmap_parloop_131437_iter;
    int64_t futhark_mc_segmap_parloop_131437_total_total_runtime;
    int futhark_mc_segmap_parloop_131437_total_runs;
    int64_t futhark_mc_segmap_parloop_131437_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131435_total_runtime;
    int *futhark_mc_segmap_nested_task_131435_runs;
    int64_t *futhark_mc_segmap_nested_task_131435_iter;
    int64_t *futhark_mc_segmap_parloop_131428_total_runtime;
    int *futhark_mc_segmap_parloop_131428_runs;
    int64_t *futhark_mc_segmap_parloop_131428_iter;
    int64_t futhark_mc_segmap_parloop_131428_total_total_runtime;
    int futhark_mc_segmap_parloop_131428_total_runs;
    int64_t futhark_mc_segmap_parloop_131428_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131426_total_runtime;
    int *futhark_mc_segmap_nested_task_131426_runs;
    int64_t *futhark_mc_segmap_nested_task_131426_iter;
    int64_t *futhark_mc_segmap_parloop_131452_total_runtime;
    int *futhark_mc_segmap_parloop_131452_runs;
    int64_t *futhark_mc_segmap_parloop_131452_iter;
    int64_t futhark_mc_segmap_parloop_131452_total_total_runtime;
    int futhark_mc_segmap_parloop_131452_total_runs;
    int64_t futhark_mc_segmap_parloop_131452_total_iter;
    int64_t *futhark_mc_segmap_task_131450_total_runtime;
    int *futhark_mc_segmap_task_131450_runs;
    int64_t *futhark_mc_segmap_task_131450_iter;
    int64_t futhark_mc_segmap_task_131450_total_time;
    int64_t futhark_mc_segmap_task_131450_total_iter;
    int64_t *futhark_mc_segmap_parloop_131465_total_runtime;
    int *futhark_mc_segmap_parloop_131465_runs;
    int64_t *futhark_mc_segmap_parloop_131465_iter;
    int64_t futhark_mc_segmap_parloop_131465_total_total_runtime;
    int futhark_mc_segmap_parloop_131465_total_runs;
    int64_t futhark_mc_segmap_parloop_131465_total_iter;
    int64_t *futhark_mc_segmap_task_131463_total_runtime;
    int *futhark_mc_segmap_task_131463_runs;
    int64_t *futhark_mc_segmap_task_131463_iter;
    int64_t futhark_mc_segmap_task_131463_total_time;
    int64_t futhark_mc_segmap_task_131463_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131479_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131479_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131479_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131479_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131479_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131479_total_iter;
    int64_t *futhark_mc_segred_task_131474_total_runtime;
    int *futhark_mc_segred_task_131474_runs;
    int64_t *futhark_mc_segred_task_131474_iter;
    int64_t futhark_mc_segred_task_131474_total_time;
    int64_t futhark_mc_segred_task_131474_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131485_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131485_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131485_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131485_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131485_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131485_total_iter;
    int64_t *futhark_mc_segred_task_131481_total_runtime;
    int *futhark_mc_segred_task_131481_runs;
    int64_t *futhark_mc_segred_task_131481_iter;
    int64_t futhark_mc_segred_task_131481_total_time;
    int64_t futhark_mc_segred_task_131481_total_iter;
    int64_t *futhark_mc_segmap_parloop_131470_total_runtime;
    int *futhark_mc_segmap_parloop_131470_runs;
    int64_t *futhark_mc_segmap_parloop_131470_iter;
    int64_t futhark_mc_segmap_parloop_131470_total_total_runtime;
    int futhark_mc_segmap_parloop_131470_total_runs;
    int64_t futhark_mc_segmap_parloop_131470_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131468_total_runtime;
    int *futhark_mc_segmap_nested_task_131468_runs;
    int64_t *futhark_mc_segmap_nested_task_131468_iter;
    int64_t *futhark_mc_segmap_parloop_131459_total_runtime;
    int *futhark_mc_segmap_parloop_131459_runs;
    int64_t *futhark_mc_segmap_parloop_131459_iter;
    int64_t futhark_mc_segmap_parloop_131459_total_total_runtime;
    int futhark_mc_segmap_parloop_131459_total_runs;
    int64_t futhark_mc_segmap_parloop_131459_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131457_total_runtime;
    int *futhark_mc_segmap_nested_task_131457_runs;
    int64_t *futhark_mc_segmap_nested_task_131457_iter;
    int64_t *futhark_mc_segmap_parloop_131489_total_runtime;
    int *futhark_mc_segmap_parloop_131489_runs;
    int64_t *futhark_mc_segmap_parloop_131489_iter;
    int64_t futhark_mc_segmap_parloop_131489_total_total_runtime;
    int futhark_mc_segmap_parloop_131489_total_runs;
    int64_t futhark_mc_segmap_parloop_131489_total_iter;
    int64_t *futhark_mc_segmap_task_131487_total_runtime;
    int *futhark_mc_segmap_task_131487_runs;
    int64_t *futhark_mc_segmap_task_131487_iter;
    int64_t futhark_mc_segmap_task_131487_total_time;
    int64_t futhark_mc_segmap_task_131487_total_iter;
    int64_t *futhark_mc_segmap_parloop_131504_total_runtime;
    int *futhark_mc_segmap_parloop_131504_runs;
    int64_t *futhark_mc_segmap_parloop_131504_iter;
    int64_t futhark_mc_segmap_parloop_131504_total_total_runtime;
    int futhark_mc_segmap_parloop_131504_total_runs;
    int64_t futhark_mc_segmap_parloop_131504_total_iter;
    int64_t *futhark_mc_segmap_task_131502_total_runtime;
    int *futhark_mc_segmap_task_131502_runs;
    int64_t *futhark_mc_segmap_task_131502_iter;
    int64_t futhark_mc_segmap_task_131502_total_time;
    int64_t futhark_mc_segmap_task_131502_total_iter;
    int64_t *futhark_mc_segmap_parloop_131519_total_runtime;
    int *futhark_mc_segmap_parloop_131519_runs;
    int64_t *futhark_mc_segmap_parloop_131519_iter;
    int64_t futhark_mc_segmap_parloop_131519_total_total_runtime;
    int futhark_mc_segmap_parloop_131519_total_runs;
    int64_t futhark_mc_segmap_parloop_131519_total_iter;
    int64_t *futhark_mc_segmap_task_131517_total_runtime;
    int *futhark_mc_segmap_task_131517_runs;
    int64_t *futhark_mc_segmap_task_131517_iter;
    int64_t futhark_mc_segmap_task_131517_total_time;
    int64_t futhark_mc_segmap_task_131517_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131528_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131528_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131528_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131528_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131528_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131528_total_iter;
    int64_t *futhark_mc_segred_task_131521_total_runtime;
    int *futhark_mc_segred_task_131521_runs;
    int64_t *futhark_mc_segred_task_131521_iter;
    int64_t futhark_mc_segred_task_131521_total_time;
    int64_t futhark_mc_segred_task_131521_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131534_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131534_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131534_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131534_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131534_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131534_total_iter;
    int64_t *futhark_mc_segred_task_131530_total_runtime;
    int *futhark_mc_segred_task_131530_runs;
    int64_t *futhark_mc_segred_task_131530_iter;
    int64_t futhark_mc_segred_task_131530_total_time;
    int64_t futhark_mc_segred_task_131530_total_iter;
    int64_t *futhark_mc_segmap_parloop_131511_total_runtime;
    int *futhark_mc_segmap_parloop_131511_runs;
    int64_t *futhark_mc_segmap_parloop_131511_iter;
    int64_t futhark_mc_segmap_parloop_131511_total_total_runtime;
    int futhark_mc_segmap_parloop_131511_total_runs;
    int64_t futhark_mc_segmap_parloop_131511_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131509_total_runtime;
    int *futhark_mc_segmap_nested_task_131509_runs;
    int64_t *futhark_mc_segmap_nested_task_131509_iter;
    int64_t *futhark_mc_segmap_parloop_131498_total_runtime;
    int *futhark_mc_segmap_parloop_131498_runs;
    int64_t *futhark_mc_segmap_parloop_131498_iter;
    int64_t futhark_mc_segmap_parloop_131498_total_total_runtime;
    int futhark_mc_segmap_parloop_131498_total_runs;
    int64_t futhark_mc_segmap_parloop_131498_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131496_total_runtime;
    int *futhark_mc_segmap_nested_task_131496_runs;
    int64_t *futhark_mc_segmap_nested_task_131496_iter;
    int64_t *futhark_mc_segmap_parloop_131538_total_runtime;
    int *futhark_mc_segmap_parloop_131538_runs;
    int64_t *futhark_mc_segmap_parloop_131538_iter;
    int64_t futhark_mc_segmap_parloop_131538_total_total_runtime;
    int futhark_mc_segmap_parloop_131538_total_runs;
    int64_t futhark_mc_segmap_parloop_131538_total_iter;
    int64_t *futhark_mc_segmap_task_131536_total_runtime;
    int *futhark_mc_segmap_task_131536_runs;
    int64_t *futhark_mc_segmap_task_131536_iter;
    int64_t futhark_mc_segmap_task_131536_total_time;
    int64_t futhark_mc_segmap_task_131536_total_iter;
    int64_t *futhark_mc_segmap_parloop_131547_total_runtime;
    int *futhark_mc_segmap_parloop_131547_runs;
    int64_t *futhark_mc_segmap_parloop_131547_iter;
    int64_t futhark_mc_segmap_parloop_131547_total_total_runtime;
    int futhark_mc_segmap_parloop_131547_total_runs;
    int64_t futhark_mc_segmap_parloop_131547_total_iter;
    int64_t *futhark_mc_segmap_task_131545_total_runtime;
    int *futhark_mc_segmap_task_131545_runs;
    int64_t *futhark_mc_segmap_task_131545_iter;
    int64_t futhark_mc_segmap_task_131545_total_time;
    int64_t futhark_mc_segmap_task_131545_total_iter;
    int64_t *futhark_mc_segmap_parloop_131542_total_runtime;
    int *futhark_mc_segmap_parloop_131542_runs;
    int64_t *futhark_mc_segmap_parloop_131542_iter;
    int64_t futhark_mc_segmap_parloop_131542_total_total_runtime;
    int futhark_mc_segmap_parloop_131542_total_runs;
    int64_t futhark_mc_segmap_parloop_131542_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131540_total_runtime;
    int *futhark_mc_segmap_nested_task_131540_runs;
    int64_t *futhark_mc_segmap_nested_task_131540_iter;
    int64_t *futhark_mc_segmap_parloop_131551_total_runtime;
    int *futhark_mc_segmap_parloop_131551_runs;
    int64_t *futhark_mc_segmap_parloop_131551_iter;
    int64_t futhark_mc_segmap_parloop_131551_total_total_runtime;
    int futhark_mc_segmap_parloop_131551_total_runs;
    int64_t futhark_mc_segmap_parloop_131551_total_iter;
    int64_t *futhark_mc_segmap_task_131549_total_runtime;
    int *futhark_mc_segmap_task_131549_runs;
    int64_t *futhark_mc_segmap_task_131549_iter;
    int64_t futhark_mc_segmap_task_131549_total_time;
    int64_t futhark_mc_segmap_task_131549_total_iter;
    int64_t *futhark_mc_segmap_parloop_131564_total_runtime;
    int *futhark_mc_segmap_parloop_131564_runs;
    int64_t *futhark_mc_segmap_parloop_131564_iter;
    int64_t futhark_mc_segmap_parloop_131564_total_total_runtime;
    int futhark_mc_segmap_parloop_131564_total_runs;
    int64_t futhark_mc_segmap_parloop_131564_total_iter;
    int64_t *futhark_mc_segmap_task_131562_total_runtime;
    int *futhark_mc_segmap_task_131562_runs;
    int64_t *futhark_mc_segmap_task_131562_iter;
    int64_t futhark_mc_segmap_task_131562_total_time;
    int64_t futhark_mc_segmap_task_131562_total_iter;
    int64_t *futhark_mc_segmap_parloop_131568_total_runtime;
    int *futhark_mc_segmap_parloop_131568_runs;
    int64_t *futhark_mc_segmap_parloop_131568_iter;
    int64_t futhark_mc_segmap_parloop_131568_total_total_runtime;
    int futhark_mc_segmap_parloop_131568_total_runs;
    int64_t futhark_mc_segmap_parloop_131568_total_iter;
    int64_t *futhark_mc_segmap_task_131566_total_runtime;
    int *futhark_mc_segmap_task_131566_runs;
    int64_t *futhark_mc_segmap_task_131566_iter;
    int64_t futhark_mc_segmap_task_131566_total_time;
    int64_t futhark_mc_segmap_task_131566_total_iter;
    int64_t *futhark_mc_segmap_parloop_131557_total_runtime;
    int *futhark_mc_segmap_parloop_131557_runs;
    int64_t *futhark_mc_segmap_parloop_131557_iter;
    int64_t futhark_mc_segmap_parloop_131557_total_total_runtime;
    int futhark_mc_segmap_parloop_131557_total_runs;
    int64_t futhark_mc_segmap_parloop_131557_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131555_total_runtime;
    int *futhark_mc_segmap_nested_task_131555_runs;
    int64_t *futhark_mc_segmap_nested_task_131555_iter;
    int64_t *futhark_mc_segmap_parloop_131572_total_runtime;
    int *futhark_mc_segmap_parloop_131572_runs;
    int64_t *futhark_mc_segmap_parloop_131572_iter;
    int64_t futhark_mc_segmap_parloop_131572_total_total_runtime;
    int futhark_mc_segmap_parloop_131572_total_runs;
    int64_t futhark_mc_segmap_parloop_131572_total_iter;
    int64_t *futhark_mc_segmap_task_131570_total_runtime;
    int *futhark_mc_segmap_task_131570_runs;
    int64_t *futhark_mc_segmap_task_131570_iter;
    int64_t futhark_mc_segmap_task_131570_total_time;
    int64_t futhark_mc_segmap_task_131570_total_iter;
    int64_t *futhark_mc_segmap_parloop_131581_total_runtime;
    int *futhark_mc_segmap_parloop_131581_runs;
    int64_t *futhark_mc_segmap_parloop_131581_iter;
    int64_t futhark_mc_segmap_parloop_131581_total_total_runtime;
    int futhark_mc_segmap_parloop_131581_total_runs;
    int64_t futhark_mc_segmap_parloop_131581_total_iter;
    int64_t *futhark_mc_segmap_task_131579_total_runtime;
    int *futhark_mc_segmap_task_131579_runs;
    int64_t *futhark_mc_segmap_task_131579_iter;
    int64_t futhark_mc_segmap_task_131579_total_time;
    int64_t futhark_mc_segmap_task_131579_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131589_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131589_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131589_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131589_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131589_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131589_total_iter;
    int64_t *futhark_mc_segred_task_131586_total_runtime;
    int *futhark_mc_segred_task_131586_runs;
    int64_t *futhark_mc_segred_task_131586_iter;
    int64_t futhark_mc_segred_task_131586_total_time;
    int64_t futhark_mc_segred_task_131586_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131594_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131594_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131594_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131594_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131594_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131594_total_iter;
    int64_t *futhark_mc_segred_task_131591_total_runtime;
    int *futhark_mc_segred_task_131591_runs;
    int64_t *futhark_mc_segred_task_131591_iter;
    int64_t futhark_mc_segred_task_131591_total_time;
    int64_t futhark_mc_segred_task_131591_total_iter;
    int64_t *futhark_mc_segmap_parloop_131584_total_runtime;
    int *futhark_mc_segmap_parloop_131584_runs;
    int64_t *futhark_mc_segmap_parloop_131584_iter;
    int64_t futhark_mc_segmap_parloop_131584_total_total_runtime;
    int futhark_mc_segmap_parloop_131584_total_runs;
    int64_t futhark_mc_segmap_parloop_131584_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131582_total_runtime;
    int *futhark_mc_segmap_nested_task_131582_runs;
    int64_t *futhark_mc_segmap_nested_task_131582_iter;
    int64_t *futhark_mc_segmap_parloop_131576_total_runtime;
    int *futhark_mc_segmap_parloop_131576_runs;
    int64_t *futhark_mc_segmap_parloop_131576_iter;
    int64_t futhark_mc_segmap_parloop_131576_total_total_runtime;
    int futhark_mc_segmap_parloop_131576_total_runs;
    int64_t futhark_mc_segmap_parloop_131576_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131574_total_runtime;
    int *futhark_mc_segmap_nested_task_131574_runs;
    int64_t *futhark_mc_segmap_nested_task_131574_iter;
    int64_t *futhark_mc_segmap_parloop_131598_total_runtime;
    int *futhark_mc_segmap_parloop_131598_runs;
    int64_t *futhark_mc_segmap_parloop_131598_iter;
    int64_t futhark_mc_segmap_parloop_131598_total_total_runtime;
    int futhark_mc_segmap_parloop_131598_total_runs;
    int64_t futhark_mc_segmap_parloop_131598_total_iter;
    int64_t *futhark_mc_segmap_task_131596_total_runtime;
    int *futhark_mc_segmap_task_131596_runs;
    int64_t *futhark_mc_segmap_task_131596_iter;
    int64_t futhark_mc_segmap_task_131596_total_time;
    int64_t futhark_mc_segmap_task_131596_total_iter;
    int64_t *futhark_mc_segmap_parloop_131609_total_runtime;
    int *futhark_mc_segmap_parloop_131609_runs;
    int64_t *futhark_mc_segmap_parloop_131609_iter;
    int64_t futhark_mc_segmap_parloop_131609_total_total_runtime;
    int futhark_mc_segmap_parloop_131609_total_runs;
    int64_t futhark_mc_segmap_parloop_131609_total_iter;
    int64_t *futhark_mc_segmap_task_131607_total_runtime;
    int *futhark_mc_segmap_task_131607_runs;
    int64_t *futhark_mc_segmap_task_131607_iter;
    int64_t futhark_mc_segmap_task_131607_total_time;
    int64_t futhark_mc_segmap_task_131607_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131619_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131619_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131619_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131619_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131619_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131619_total_iter;
    int64_t *futhark_mc_segred_task_131614_total_runtime;
    int *futhark_mc_segred_task_131614_runs;
    int64_t *futhark_mc_segred_task_131614_iter;
    int64_t futhark_mc_segred_task_131614_total_time;
    int64_t futhark_mc_segred_task_131614_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131625_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131625_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131625_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131625_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131625_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131625_total_iter;
    int64_t *futhark_mc_segred_task_131621_total_runtime;
    int *futhark_mc_segred_task_131621_runs;
    int64_t *futhark_mc_segred_task_131621_iter;
    int64_t futhark_mc_segred_task_131621_total_time;
    int64_t futhark_mc_segred_task_131621_total_iter;
    int64_t *futhark_mc_segmap_parloop_131612_total_runtime;
    int *futhark_mc_segmap_parloop_131612_runs;
    int64_t *futhark_mc_segmap_parloop_131612_iter;
    int64_t futhark_mc_segmap_parloop_131612_total_total_runtime;
    int futhark_mc_segmap_parloop_131612_total_runs;
    int64_t futhark_mc_segmap_parloop_131612_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131610_total_runtime;
    int *futhark_mc_segmap_nested_task_131610_runs;
    int64_t *futhark_mc_segmap_nested_task_131610_iter;
    int64_t *futhark_mc_segmap_parloop_131603_total_runtime;
    int *futhark_mc_segmap_parloop_131603_runs;
    int64_t *futhark_mc_segmap_parloop_131603_iter;
    int64_t futhark_mc_segmap_parloop_131603_total_total_runtime;
    int futhark_mc_segmap_parloop_131603_total_runs;
    int64_t futhark_mc_segmap_parloop_131603_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131601_total_runtime;
    int *futhark_mc_segmap_nested_task_131601_runs;
    int64_t *futhark_mc_segmap_nested_task_131601_iter;
    int64_t *futhark_mc_segmap_parloop_131629_total_runtime;
    int *futhark_mc_segmap_parloop_131629_runs;
    int64_t *futhark_mc_segmap_parloop_131629_iter;
    int64_t futhark_mc_segmap_parloop_131629_total_total_runtime;
    int futhark_mc_segmap_parloop_131629_total_runs;
    int64_t futhark_mc_segmap_parloop_131629_total_iter;
    int64_t *futhark_mc_segmap_task_131627_total_runtime;
    int *futhark_mc_segmap_task_131627_runs;
    int64_t *futhark_mc_segmap_task_131627_iter;
    int64_t futhark_mc_segmap_task_131627_total_time;
    int64_t futhark_mc_segmap_task_131627_total_iter;
    int64_t *futhark_mc_segmap_parloop_131640_total_runtime;
    int *futhark_mc_segmap_parloop_131640_runs;
    int64_t *futhark_mc_segmap_parloop_131640_iter;
    int64_t futhark_mc_segmap_parloop_131640_total_total_runtime;
    int futhark_mc_segmap_parloop_131640_total_runs;
    int64_t futhark_mc_segmap_parloop_131640_total_iter;
    int64_t *futhark_mc_segmap_task_131638_total_runtime;
    int *futhark_mc_segmap_task_131638_runs;
    int64_t *futhark_mc_segmap_task_131638_iter;
    int64_t futhark_mc_segmap_task_131638_total_time;
    int64_t futhark_mc_segmap_task_131638_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131652_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131652_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131652_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131652_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131652_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131652_total_iter;
    int64_t *futhark_mc_segred_task_131645_total_runtime;
    int *futhark_mc_segred_task_131645_runs;
    int64_t *futhark_mc_segred_task_131645_iter;
    int64_t futhark_mc_segred_task_131645_total_time;
    int64_t futhark_mc_segred_task_131645_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131658_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131658_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131658_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131658_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131658_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131658_total_iter;
    int64_t *futhark_mc_segred_task_131654_total_runtime;
    int *futhark_mc_segred_task_131654_runs;
    int64_t *futhark_mc_segred_task_131654_iter;
    int64_t futhark_mc_segred_task_131654_total_time;
    int64_t futhark_mc_segred_task_131654_total_iter;
    int64_t *futhark_mc_segmap_parloop_131643_total_runtime;
    int *futhark_mc_segmap_parloop_131643_runs;
    int64_t *futhark_mc_segmap_parloop_131643_iter;
    int64_t futhark_mc_segmap_parloop_131643_total_total_runtime;
    int futhark_mc_segmap_parloop_131643_total_runs;
    int64_t futhark_mc_segmap_parloop_131643_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131641_total_runtime;
    int *futhark_mc_segmap_nested_task_131641_runs;
    int64_t *futhark_mc_segmap_nested_task_131641_iter;
    int64_t *futhark_mc_segmap_parloop_131634_total_runtime;
    int *futhark_mc_segmap_parloop_131634_runs;
    int64_t *futhark_mc_segmap_parloop_131634_iter;
    int64_t futhark_mc_segmap_parloop_131634_total_total_runtime;
    int futhark_mc_segmap_parloop_131634_total_runs;
    int64_t futhark_mc_segmap_parloop_131634_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131632_total_runtime;
    int *futhark_mc_segmap_nested_task_131632_runs;
    int64_t *futhark_mc_segmap_nested_task_131632_iter;
    int64_t *futhark_mc_segmap_parloop_131662_total_runtime;
    int *futhark_mc_segmap_parloop_131662_runs;
    int64_t *futhark_mc_segmap_parloop_131662_iter;
    int64_t futhark_mc_segmap_parloop_131662_total_total_runtime;
    int futhark_mc_segmap_parloop_131662_total_runs;
    int64_t futhark_mc_segmap_parloop_131662_total_iter;
    int64_t *futhark_mc_segmap_task_131660_total_runtime;
    int *futhark_mc_segmap_task_131660_runs;
    int64_t *futhark_mc_segmap_task_131660_iter;
    int64_t futhark_mc_segmap_task_131660_total_time;
    int64_t futhark_mc_segmap_task_131660_total_iter;
    int64_t *futhark_mc_segmap_parloop_131672_total_runtime;
    int *futhark_mc_segmap_parloop_131672_runs;
    int64_t *futhark_mc_segmap_parloop_131672_iter;
    int64_t futhark_mc_segmap_parloop_131672_total_total_runtime;
    int futhark_mc_segmap_parloop_131672_total_runs;
    int64_t futhark_mc_segmap_parloop_131672_total_iter;
    int64_t *futhark_mc_segmap_task_131670_total_runtime;
    int *futhark_mc_segmap_task_131670_runs;
    int64_t *futhark_mc_segmap_task_131670_iter;
    int64_t futhark_mc_segmap_task_131670_total_time;
    int64_t futhark_mc_segmap_task_131670_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131682_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131682_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131682_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131682_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131682_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131682_total_iter;
    int64_t *futhark_mc_segred_task_131679_total_runtime;
    int *futhark_mc_segred_task_131679_runs;
    int64_t *futhark_mc_segred_task_131679_iter;
    int64_t futhark_mc_segred_task_131679_total_time;
    int64_t futhark_mc_segred_task_131679_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131687_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131687_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131687_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131687_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131687_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131687_total_iter;
    int64_t *futhark_mc_segred_task_131684_total_runtime;
    int *futhark_mc_segred_task_131684_runs;
    int64_t *futhark_mc_segred_task_131684_iter;
    int64_t futhark_mc_segred_task_131684_total_time;
    int64_t futhark_mc_segred_task_131684_total_iter;
    int64_t *futhark_mc_segmap_parloop_131676_total_runtime;
    int *futhark_mc_segmap_parloop_131676_runs;
    int64_t *futhark_mc_segmap_parloop_131676_iter;
    int64_t futhark_mc_segmap_parloop_131676_total_total_runtime;
    int futhark_mc_segmap_parloop_131676_total_runs;
    int64_t futhark_mc_segmap_parloop_131676_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131674_total_runtime;
    int *futhark_mc_segmap_nested_task_131674_runs;
    int64_t *futhark_mc_segmap_nested_task_131674_iter;
    int64_t *futhark_mc_segmap_parloop_131667_total_runtime;
    int *futhark_mc_segmap_parloop_131667_runs;
    int64_t *futhark_mc_segmap_parloop_131667_iter;
    int64_t futhark_mc_segmap_parloop_131667_total_total_runtime;
    int futhark_mc_segmap_parloop_131667_total_runs;
    int64_t futhark_mc_segmap_parloop_131667_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131665_total_runtime;
    int *futhark_mc_segmap_nested_task_131665_runs;
    int64_t *futhark_mc_segmap_nested_task_131665_iter;
    int64_t *futhark_mc_segmap_parloop_131691_total_runtime;
    int *futhark_mc_segmap_parloop_131691_runs;
    int64_t *futhark_mc_segmap_parloop_131691_iter;
    int64_t futhark_mc_segmap_parloop_131691_total_total_runtime;
    int futhark_mc_segmap_parloop_131691_total_runs;
    int64_t futhark_mc_segmap_parloop_131691_total_iter;
    int64_t *futhark_mc_segmap_task_131689_total_runtime;
    int *futhark_mc_segmap_task_131689_runs;
    int64_t *futhark_mc_segmap_task_131689_iter;
    int64_t futhark_mc_segmap_task_131689_total_time;
    int64_t futhark_mc_segmap_task_131689_total_iter;
    int64_t *futhark_mc_segmap_parloop_131704_total_runtime;
    int *futhark_mc_segmap_parloop_131704_runs;
    int64_t *futhark_mc_segmap_parloop_131704_iter;
    int64_t futhark_mc_segmap_parloop_131704_total_total_runtime;
    int futhark_mc_segmap_parloop_131704_total_runs;
    int64_t futhark_mc_segmap_parloop_131704_total_iter;
    int64_t *futhark_mc_segmap_task_131702_total_runtime;
    int *futhark_mc_segmap_task_131702_runs;
    int64_t *futhark_mc_segmap_task_131702_iter;
    int64_t futhark_mc_segmap_task_131702_total_time;
    int64_t futhark_mc_segmap_task_131702_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131718_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131718_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131718_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131718_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131718_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131718_total_iter;
    int64_t *futhark_mc_segred_task_131713_total_runtime;
    int *futhark_mc_segred_task_131713_runs;
    int64_t *futhark_mc_segred_task_131713_iter;
    int64_t futhark_mc_segred_task_131713_total_time;
    int64_t futhark_mc_segred_task_131713_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131724_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131724_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131724_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131724_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131724_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131724_total_iter;
    int64_t *futhark_mc_segred_task_131720_total_runtime;
    int *futhark_mc_segred_task_131720_runs;
    int64_t *futhark_mc_segred_task_131720_iter;
    int64_t futhark_mc_segred_task_131720_total_time;
    int64_t futhark_mc_segred_task_131720_total_iter;
    int64_t *futhark_mc_segmap_parloop_131709_total_runtime;
    int *futhark_mc_segmap_parloop_131709_runs;
    int64_t *futhark_mc_segmap_parloop_131709_iter;
    int64_t futhark_mc_segmap_parloop_131709_total_total_runtime;
    int futhark_mc_segmap_parloop_131709_total_runs;
    int64_t futhark_mc_segmap_parloop_131709_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131707_total_runtime;
    int *futhark_mc_segmap_nested_task_131707_runs;
    int64_t *futhark_mc_segmap_nested_task_131707_iter;
    int64_t *futhark_mc_segmap_parloop_131698_total_runtime;
    int *futhark_mc_segmap_parloop_131698_runs;
    int64_t *futhark_mc_segmap_parloop_131698_iter;
    int64_t futhark_mc_segmap_parloop_131698_total_total_runtime;
    int futhark_mc_segmap_parloop_131698_total_runs;
    int64_t futhark_mc_segmap_parloop_131698_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131696_total_runtime;
    int *futhark_mc_segmap_nested_task_131696_runs;
    int64_t *futhark_mc_segmap_nested_task_131696_iter;
    int64_t *futhark_mc_segmap_parloop_131728_total_runtime;
    int *futhark_mc_segmap_parloop_131728_runs;
    int64_t *futhark_mc_segmap_parloop_131728_iter;
    int64_t futhark_mc_segmap_parloop_131728_total_total_runtime;
    int futhark_mc_segmap_parloop_131728_total_runs;
    int64_t futhark_mc_segmap_parloop_131728_total_iter;
    int64_t *futhark_mc_segmap_task_131726_total_runtime;
    int *futhark_mc_segmap_task_131726_runs;
    int64_t *futhark_mc_segmap_task_131726_iter;
    int64_t futhark_mc_segmap_task_131726_total_time;
    int64_t futhark_mc_segmap_task_131726_total_iter;
    int64_t *futhark_mc_segmap_parloop_131743_total_runtime;
    int *futhark_mc_segmap_parloop_131743_runs;
    int64_t *futhark_mc_segmap_parloop_131743_iter;
    int64_t futhark_mc_segmap_parloop_131743_total_total_runtime;
    int futhark_mc_segmap_parloop_131743_total_runs;
    int64_t futhark_mc_segmap_parloop_131743_total_iter;
    int64_t *futhark_mc_segmap_task_131741_total_runtime;
    int *futhark_mc_segmap_task_131741_runs;
    int64_t *futhark_mc_segmap_task_131741_iter;
    int64_t futhark_mc_segmap_task_131741_total_time;
    int64_t futhark_mc_segmap_task_131741_total_iter;
    int64_t *futhark_mc_segmap_parloop_131758_total_runtime;
    int *futhark_mc_segmap_parloop_131758_runs;
    int64_t *futhark_mc_segmap_parloop_131758_iter;
    int64_t futhark_mc_segmap_parloop_131758_total_total_runtime;
    int futhark_mc_segmap_parloop_131758_total_runs;
    int64_t futhark_mc_segmap_parloop_131758_total_iter;
    int64_t *futhark_mc_segmap_task_131756_total_runtime;
    int *futhark_mc_segmap_task_131756_runs;
    int64_t *futhark_mc_segmap_task_131756_iter;
    int64_t futhark_mc_segmap_task_131756_total_time;
    int64_t futhark_mc_segmap_task_131756_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131767_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131767_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131767_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131767_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131767_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131767_total_iter;
    int64_t *futhark_mc_segred_task_131760_total_runtime;
    int *futhark_mc_segred_task_131760_runs;
    int64_t *futhark_mc_segred_task_131760_iter;
    int64_t futhark_mc_segred_task_131760_total_time;
    int64_t futhark_mc_segred_task_131760_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131773_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131773_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131773_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131773_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131773_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131773_total_iter;
    int64_t *futhark_mc_segred_task_131769_total_runtime;
    int *futhark_mc_segred_task_131769_runs;
    int64_t *futhark_mc_segred_task_131769_iter;
    int64_t futhark_mc_segred_task_131769_total_time;
    int64_t futhark_mc_segred_task_131769_total_iter;
    int64_t *futhark_mc_segmap_parloop_131750_total_runtime;
    int *futhark_mc_segmap_parloop_131750_runs;
    int64_t *futhark_mc_segmap_parloop_131750_iter;
    int64_t futhark_mc_segmap_parloop_131750_total_total_runtime;
    int futhark_mc_segmap_parloop_131750_total_runs;
    int64_t futhark_mc_segmap_parloop_131750_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131748_total_runtime;
    int *futhark_mc_segmap_nested_task_131748_runs;
    int64_t *futhark_mc_segmap_nested_task_131748_iter;
    int64_t *futhark_mc_segmap_parloop_131737_total_runtime;
    int *futhark_mc_segmap_parloop_131737_runs;
    int64_t *futhark_mc_segmap_parloop_131737_iter;
    int64_t futhark_mc_segmap_parloop_131737_total_total_runtime;
    int futhark_mc_segmap_parloop_131737_total_runs;
    int64_t futhark_mc_segmap_parloop_131737_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131735_total_runtime;
    int *futhark_mc_segmap_nested_task_131735_runs;
    int64_t *futhark_mc_segmap_nested_task_131735_iter;
    int64_t *futhark_mc_segmap_parloop_131777_total_runtime;
    int *futhark_mc_segmap_parloop_131777_runs;
    int64_t *futhark_mc_segmap_parloop_131777_iter;
    int64_t futhark_mc_segmap_parloop_131777_total_total_runtime;
    int futhark_mc_segmap_parloop_131777_total_runs;
    int64_t futhark_mc_segmap_parloop_131777_total_iter;
    int64_t *futhark_mc_segmap_task_131775_total_runtime;
    int *futhark_mc_segmap_task_131775_runs;
    int64_t *futhark_mc_segmap_task_131775_iter;
    int64_t futhark_mc_segmap_task_131775_total_time;
    int64_t futhark_mc_segmap_task_131775_total_iter;
    int64_t *futhark_mc_segmap_parloop_131786_total_runtime;
    int *futhark_mc_segmap_parloop_131786_runs;
    int64_t *futhark_mc_segmap_parloop_131786_iter;
    int64_t futhark_mc_segmap_parloop_131786_total_total_runtime;
    int futhark_mc_segmap_parloop_131786_total_runs;
    int64_t futhark_mc_segmap_parloop_131786_total_iter;
    int64_t *futhark_mc_segmap_task_131784_total_runtime;
    int *futhark_mc_segmap_task_131784_runs;
    int64_t *futhark_mc_segmap_task_131784_iter;
    int64_t futhark_mc_segmap_task_131784_total_time;
    int64_t futhark_mc_segmap_task_131784_total_iter;
    int64_t *futhark_mc_segmap_parloop_131781_total_runtime;
    int *futhark_mc_segmap_parloop_131781_runs;
    int64_t *futhark_mc_segmap_parloop_131781_iter;
    int64_t futhark_mc_segmap_parloop_131781_total_total_runtime;
    int futhark_mc_segmap_parloop_131781_total_runs;
    int64_t futhark_mc_segmap_parloop_131781_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131779_total_runtime;
    int *futhark_mc_segmap_nested_task_131779_runs;
    int64_t *futhark_mc_segmap_nested_task_131779_iter;
    int64_t *futhark_mc_segmap_parloop_131790_total_runtime;
    int *futhark_mc_segmap_parloop_131790_runs;
    int64_t *futhark_mc_segmap_parloop_131790_iter;
    int64_t futhark_mc_segmap_parloop_131790_total_total_runtime;
    int futhark_mc_segmap_parloop_131790_total_runs;
    int64_t futhark_mc_segmap_parloop_131790_total_iter;
    int64_t *futhark_mc_segmap_task_131788_total_runtime;
    int *futhark_mc_segmap_task_131788_runs;
    int64_t *futhark_mc_segmap_task_131788_iter;
    int64_t futhark_mc_segmap_task_131788_total_time;
    int64_t futhark_mc_segmap_task_131788_total_iter;
    int64_t *futhark_mc_segmap_parloop_131799_total_runtime;
    int *futhark_mc_segmap_parloop_131799_runs;
    int64_t *futhark_mc_segmap_parloop_131799_iter;
    int64_t futhark_mc_segmap_parloop_131799_total_total_runtime;
    int futhark_mc_segmap_parloop_131799_total_runs;
    int64_t futhark_mc_segmap_parloop_131799_total_iter;
    int64_t *futhark_mc_segmap_task_131797_total_runtime;
    int *futhark_mc_segmap_task_131797_runs;
    int64_t *futhark_mc_segmap_task_131797_iter;
    int64_t futhark_mc_segmap_task_131797_total_time;
    int64_t futhark_mc_segmap_task_131797_total_iter;
    int64_t *futhark_mc_segmap_parloop_131794_total_runtime;
    int *futhark_mc_segmap_parloop_131794_runs;
    int64_t *futhark_mc_segmap_parloop_131794_iter;
    int64_t futhark_mc_segmap_parloop_131794_total_total_runtime;
    int futhark_mc_segmap_parloop_131794_total_runs;
    int64_t futhark_mc_segmap_parloop_131794_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131792_total_runtime;
    int *futhark_mc_segmap_nested_task_131792_runs;
    int64_t *futhark_mc_segmap_nested_task_131792_iter;
    int64_t *futhark_mc_segmap_parloop_131803_total_runtime;
    int *futhark_mc_segmap_parloop_131803_runs;
    int64_t *futhark_mc_segmap_parloop_131803_iter;
    int64_t futhark_mc_segmap_parloop_131803_total_total_runtime;
    int futhark_mc_segmap_parloop_131803_total_runs;
    int64_t futhark_mc_segmap_parloop_131803_total_iter;
    int64_t *futhark_mc_segmap_task_131801_total_runtime;
    int *futhark_mc_segmap_task_131801_runs;
    int64_t *futhark_mc_segmap_task_131801_iter;
    int64_t futhark_mc_segmap_task_131801_total_time;
    int64_t futhark_mc_segmap_task_131801_total_iter;
    int64_t *futhark_mc_segmap_parloop_131812_total_runtime;
    int *futhark_mc_segmap_parloop_131812_runs;
    int64_t *futhark_mc_segmap_parloop_131812_iter;
    int64_t futhark_mc_segmap_parloop_131812_total_total_runtime;
    int futhark_mc_segmap_parloop_131812_total_runs;
    int64_t futhark_mc_segmap_parloop_131812_total_iter;
    int64_t *futhark_mc_segmap_task_131810_total_runtime;
    int *futhark_mc_segmap_task_131810_runs;
    int64_t *futhark_mc_segmap_task_131810_iter;
    int64_t futhark_mc_segmap_task_131810_total_time;
    int64_t futhark_mc_segmap_task_131810_total_iter;
    int64_t *futhark_mc_segmap_parloop_131807_total_runtime;
    int *futhark_mc_segmap_parloop_131807_runs;
    int64_t *futhark_mc_segmap_parloop_131807_iter;
    int64_t futhark_mc_segmap_parloop_131807_total_total_runtime;
    int futhark_mc_segmap_parloop_131807_total_runs;
    int64_t futhark_mc_segmap_parloop_131807_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131805_total_runtime;
    int *futhark_mc_segmap_nested_task_131805_runs;
    int64_t *futhark_mc_segmap_nested_task_131805_iter;
    int64_t *futhark_mc_segmap_parloop_131816_total_runtime;
    int *futhark_mc_segmap_parloop_131816_runs;
    int64_t *futhark_mc_segmap_parloop_131816_iter;
    int64_t futhark_mc_segmap_parloop_131816_total_total_runtime;
    int futhark_mc_segmap_parloop_131816_total_runs;
    int64_t futhark_mc_segmap_parloop_131816_total_iter;
    int64_t *futhark_mc_segmap_task_131814_total_runtime;
    int *futhark_mc_segmap_task_131814_runs;
    int64_t *futhark_mc_segmap_task_131814_iter;
    int64_t futhark_mc_segmap_task_131814_total_time;
    int64_t futhark_mc_segmap_task_131814_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131841_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131841_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131841_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131841_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131841_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131841_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131843_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131843_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131843_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131843_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131843_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131843_total_iter;
    int64_t *futhark_mc_segscan_task_131835_total_runtime;
    int *futhark_mc_segscan_task_131835_runs;
    int64_t *futhark_mc_segscan_task_131835_iter;
    int64_t futhark_mc_segscan_task_131835_total_time;
    int64_t futhark_mc_segscan_task_131835_total_iter;
    int64_t *futhark_mc_segmap_parloop_131847_total_runtime;
    int *futhark_mc_segmap_parloop_131847_runs;
    int64_t *futhark_mc_segmap_parloop_131847_iter;
    int64_t futhark_mc_segmap_parloop_131847_total_total_runtime;
    int futhark_mc_segmap_parloop_131847_total_runs;
    int64_t futhark_mc_segmap_parloop_131847_total_iter;
    int64_t *futhark_mc_segmap_task_131845_total_runtime;
    int *futhark_mc_segmap_task_131845_runs;
    int64_t *futhark_mc_segmap_task_131845_iter;
    int64_t futhark_mc_segmap_task_131845_total_time;
    int64_t futhark_mc_segmap_task_131845_total_iter;
    int64_t *futhark_mc_segmap_parloop_131826_total_runtime;
    int *futhark_mc_segmap_parloop_131826_runs;
    int64_t *futhark_mc_segmap_parloop_131826_iter;
    int64_t futhark_mc_segmap_parloop_131826_total_total_runtime;
    int futhark_mc_segmap_parloop_131826_total_runs;
    int64_t futhark_mc_segmap_parloop_131826_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131824_total_runtime;
    int *futhark_mc_segmap_nested_task_131824_runs;
    int64_t *futhark_mc_segmap_nested_task_131824_iter;
    int64_t *futhark_mc_segmap_parloop_131851_total_runtime;
    int *futhark_mc_segmap_parloop_131851_runs;
    int64_t *futhark_mc_segmap_parloop_131851_iter;
    int64_t futhark_mc_segmap_parloop_131851_total_total_runtime;
    int futhark_mc_segmap_parloop_131851_total_runs;
    int64_t futhark_mc_segmap_parloop_131851_total_iter;
    int64_t *futhark_mc_segmap_task_131849_total_runtime;
    int *futhark_mc_segmap_task_131849_runs;
    int64_t *futhark_mc_segmap_task_131849_iter;
    int64_t futhark_mc_segmap_task_131849_total_time;
    int64_t futhark_mc_segmap_task_131849_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131859_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131859_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131859_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131859_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131859_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131859_total_iter;
    int64_t *futhark_mc_segred_task_131856_total_runtime;
    int *futhark_mc_segred_task_131856_runs;
    int64_t *futhark_mc_segred_task_131856_iter;
    int64_t futhark_mc_segred_task_131856_total_time;
    int64_t futhark_mc_segred_task_131856_total_iter;
    int64_t *futhark_mc_segmap_parloop_131854_total_runtime;
    int *futhark_mc_segmap_parloop_131854_runs;
    int64_t *futhark_mc_segmap_parloop_131854_iter;
    int64_t futhark_mc_segmap_parloop_131854_total_total_runtime;
    int futhark_mc_segmap_parloop_131854_total_runs;
    int64_t futhark_mc_segmap_parloop_131854_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131852_total_runtime;
    int *futhark_mc_segmap_nested_task_131852_runs;
    int64_t *futhark_mc_segmap_nested_task_131852_iter;
    int64_t *futhark_mc_segmap_parloop_131863_total_runtime;
    int *futhark_mc_segmap_parloop_131863_runs;
    int64_t *futhark_mc_segmap_parloop_131863_iter;
    int64_t futhark_mc_segmap_parloop_131863_total_total_runtime;
    int futhark_mc_segmap_parloop_131863_total_runs;
    int64_t futhark_mc_segmap_parloop_131863_total_iter;
    int64_t *futhark_mc_segmap_task_131861_total_runtime;
    int *futhark_mc_segmap_task_131861_runs;
    int64_t *futhark_mc_segmap_task_131861_iter;
    int64_t futhark_mc_segmap_task_131861_total_time;
    int64_t futhark_mc_segmap_task_131861_total_iter;
    int64_t *futhark_mc_segmap_parloop_131872_total_runtime;
    int *futhark_mc_segmap_parloop_131872_runs;
    int64_t *futhark_mc_segmap_parloop_131872_iter;
    int64_t futhark_mc_segmap_parloop_131872_total_total_runtime;
    int futhark_mc_segmap_parloop_131872_total_runs;
    int64_t futhark_mc_segmap_parloop_131872_total_iter;
    int64_t *futhark_mc_segmap_task_131870_total_runtime;
    int *futhark_mc_segmap_task_131870_runs;
    int64_t *futhark_mc_segmap_task_131870_iter;
    int64_t futhark_mc_segmap_task_131870_total_time;
    int64_t futhark_mc_segmap_task_131870_total_iter;
    int64_t *futhark_mc_segmap_parloop_131867_total_runtime;
    int *futhark_mc_segmap_parloop_131867_runs;
    int64_t *futhark_mc_segmap_parloop_131867_iter;
    int64_t futhark_mc_segmap_parloop_131867_total_total_runtime;
    int futhark_mc_segmap_parloop_131867_total_runs;
    int64_t futhark_mc_segmap_parloop_131867_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131865_total_runtime;
    int *futhark_mc_segmap_nested_task_131865_runs;
    int64_t *futhark_mc_segmap_nested_task_131865_iter;
    int64_t *futhark_mc_segmap_parloop_131876_total_runtime;
    int *futhark_mc_segmap_parloop_131876_runs;
    int64_t *futhark_mc_segmap_parloop_131876_iter;
    int64_t futhark_mc_segmap_parloop_131876_total_total_runtime;
    int futhark_mc_segmap_parloop_131876_total_runs;
    int64_t futhark_mc_segmap_parloop_131876_total_iter;
    int64_t *futhark_mc_segmap_task_131874_total_runtime;
    int *futhark_mc_segmap_task_131874_runs;
    int64_t *futhark_mc_segmap_task_131874_iter;
    int64_t futhark_mc_segmap_task_131874_total_time;
    int64_t futhark_mc_segmap_task_131874_total_iter;
    int64_t *futhark_mc_segmap_parloop_131885_total_runtime;
    int *futhark_mc_segmap_parloop_131885_runs;
    int64_t *futhark_mc_segmap_parloop_131885_iter;
    int64_t futhark_mc_segmap_parloop_131885_total_total_runtime;
    int futhark_mc_segmap_parloop_131885_total_runs;
    int64_t futhark_mc_segmap_parloop_131885_total_iter;
    int64_t *futhark_mc_segmap_task_131883_total_runtime;
    int *futhark_mc_segmap_task_131883_runs;
    int64_t *futhark_mc_segmap_task_131883_iter;
    int64_t futhark_mc_segmap_task_131883_total_time;
    int64_t futhark_mc_segmap_task_131883_total_iter;
    int64_t *futhark_mc_segmap_parloop_131880_total_runtime;
    int *futhark_mc_segmap_parloop_131880_runs;
    int64_t *futhark_mc_segmap_parloop_131880_iter;
    int64_t futhark_mc_segmap_parloop_131880_total_total_runtime;
    int futhark_mc_segmap_parloop_131880_total_runs;
    int64_t futhark_mc_segmap_parloop_131880_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131878_total_runtime;
    int *futhark_mc_segmap_nested_task_131878_runs;
    int64_t *futhark_mc_segmap_nested_task_131878_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_131091_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131091_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131091_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131091_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131091_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131091_total_iter = 0;
    ctx->futhark_mc_segmap_task_131089_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131089_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131089_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131089_total_time = 0;
    ctx->futhark_mc_segmap_task_131089_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131103_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131103_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131103_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131103_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131103_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131105_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131105_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131105_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131105_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131105_total_iter = 0;
    ctx->futhark_mc_segscan_task_131100_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131100_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131100_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131100_total_time = 0;
    ctx->futhark_mc_segscan_task_131100_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131109_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131109_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131109_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131109_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131109_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131109_total_iter = 0;
    ctx->futhark_mc_segmap_task_131107_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131107_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131107_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131107_total_time = 0;
    ctx->futhark_mc_segmap_task_131107_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131096_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131096_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131096_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131096_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131096_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131096_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131094_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131094_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131094_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131113_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131113_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131113_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131113_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131113_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131113_total_iter = 0;
    ctx->futhark_mc_segmap_task_131111_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131111_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131111_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131111_total_time = 0;
    ctx->futhark_mc_segmap_task_131111_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131122_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131122_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131122_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131122_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131122_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131122_total_iter = 0;
    ctx->futhark_mc_segmap_task_131120_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131120_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131120_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131120_total_time = 0;
    ctx->futhark_mc_segmap_task_131120_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131117_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131117_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131117_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131117_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131117_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131117_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131115_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131115_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131115_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131126_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131126_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131126_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131126_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131126_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131126_total_iter = 0;
    ctx->futhark_mc_segmap_task_131124_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131124_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131124_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131124_total_time = 0;
    ctx->futhark_mc_segmap_task_131124_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131135_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131135_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131135_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131135_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131135_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131135_total_iter = 0;
    ctx->futhark_mc_segmap_task_131133_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131133_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131133_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131133_total_time = 0;
    ctx->futhark_mc_segmap_task_131133_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131130_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131130_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131130_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131130_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131130_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131130_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131128_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131128_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131128_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131139_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131139_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131139_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131139_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131139_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131139_total_iter = 0;
    ctx->futhark_mc_segmap_task_131137_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131137_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131137_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131137_total_time = 0;
    ctx->futhark_mc_segmap_task_131137_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131148_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131148_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131148_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131148_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131148_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131148_total_iter = 0;
    ctx->futhark_mc_segmap_task_131146_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131146_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131146_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131146_total_time = 0;
    ctx->futhark_mc_segmap_task_131146_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131156_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131156_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131156_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131156_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131156_total_iter = 0;
    ctx->futhark_mc_segred_task_131153_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131153_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131153_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131153_total_time = 0;
    ctx->futhark_mc_segred_task_131153_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131151_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131151_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131151_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131149_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131149_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131149_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131143_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131143_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131143_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131143_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131143_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131143_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131141_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131141_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131141_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131160_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131160_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131160_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131160_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131160_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131160_total_iter = 0;
    ctx->futhark_mc_segmap_task_131158_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131158_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131158_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131158_total_time = 0;
    ctx->futhark_mc_segmap_task_131158_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131175_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131175_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131175_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131175_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131175_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131175_total_iter = 0;
    ctx->futhark_mc_segmap_task_131173_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131173_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131173_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131173_total_time = 0;
    ctx->futhark_mc_segmap_task_131173_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131179_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131179_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131179_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131179_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131179_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131179_total_iter = 0;
    ctx->futhark_mc_segmap_task_131177_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131177_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131177_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131177_total_time = 0;
    ctx->futhark_mc_segmap_task_131177_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131187_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131187_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131187_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131187_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131187_total_iter = 0;
    ctx->futhark_mc_segred_task_131184_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131184_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131184_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131184_total_time = 0;
    ctx->futhark_mc_segred_task_131184_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131182_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131182_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131182_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131182_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131182_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131182_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131180_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131180_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131180_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131167_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131167_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131167_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131167_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131167_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131167_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131165_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131165_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131165_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131191_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131191_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131191_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131191_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131191_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131191_total_iter = 0;
    ctx->futhark_mc_segmap_task_131189_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131189_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131189_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131189_total_time = 0;
    ctx->futhark_mc_segmap_task_131189_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131206_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131206_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131206_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131206_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131206_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131206_total_iter = 0;
    ctx->futhark_mc_segmap_task_131204_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131204_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131204_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131204_total_time = 0;
    ctx->futhark_mc_segmap_task_131204_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131210_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131210_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131210_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131210_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131210_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131210_total_iter = 0;
    ctx->futhark_mc_segmap_task_131208_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131208_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131208_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131208_total_time = 0;
    ctx->futhark_mc_segmap_task_131208_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131218_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131218_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131218_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131218_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131218_total_iter = 0;
    ctx->futhark_mc_segred_task_131215_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131215_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131215_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131215_total_time = 0;
    ctx->futhark_mc_segred_task_131215_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131213_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131213_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131213_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131213_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131213_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131213_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131211_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131211_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131211_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131198_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131198_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131198_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131198_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131198_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131198_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131196_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131196_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131196_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131222_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131222_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131222_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131222_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131222_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131222_total_iter = 0;
    ctx->futhark_mc_segmap_task_131220_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131220_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131220_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131220_total_time = 0;
    ctx->futhark_mc_segmap_task_131220_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131231_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131231_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131231_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131231_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131231_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131231_total_iter = 0;
    ctx->futhark_mc_segmap_task_131229_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131229_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131229_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131229_total_time = 0;
    ctx->futhark_mc_segmap_task_131229_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131226_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131226_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131226_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131226_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131226_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131226_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131224_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131224_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131224_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131235_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131235_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131235_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131235_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131235_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131235_total_iter = 0;
    ctx->futhark_mc_segmap_task_131233_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131233_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131233_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131233_total_time = 0;
    ctx->futhark_mc_segmap_task_131233_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131244_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131244_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131244_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131244_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131244_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131244_total_iter = 0;
    ctx->futhark_mc_segmap_task_131242_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131242_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131242_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131242_total_time = 0;
    ctx->futhark_mc_segmap_task_131242_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131252_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131252_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131252_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131252_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131252_total_iter = 0;
    ctx->futhark_mc_segred_task_131249_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131249_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131249_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131249_total_time = 0;
    ctx->futhark_mc_segred_task_131249_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131247_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131247_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131247_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131247_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131247_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131247_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131245_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131245_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131245_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131239_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131239_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131239_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131239_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131239_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131239_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131237_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131237_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131237_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131256_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131256_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131256_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131256_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131256_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131256_total_iter = 0;
    ctx->futhark_mc_segmap_task_131254_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131254_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131254_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131254_total_time = 0;
    ctx->futhark_mc_segmap_task_131254_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131265_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131265_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131265_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131265_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131265_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131265_total_iter = 0;
    ctx->futhark_mc_segmap_task_131263_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131263_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131263_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131263_total_time = 0;
    ctx->futhark_mc_segmap_task_131263_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131260_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131260_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131260_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131260_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131260_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131260_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131258_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131258_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131258_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131269_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131269_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131269_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131269_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131269_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131269_total_iter = 0;
    ctx->futhark_mc_segmap_task_131267_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131267_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131267_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131267_total_time = 0;
    ctx->futhark_mc_segmap_task_131267_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131283_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131283_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131283_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131283_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131283_total_iter = 0;
    ctx->futhark_mc_segred_task_131280_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131280_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131280_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131280_total_time = 0;
    ctx->futhark_mc_segred_task_131280_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131288_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131288_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131288_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131288_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131288_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131290_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131290_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131290_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131290_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131290_total_iter = 0;
    ctx->futhark_mc_segscan_task_131285_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131285_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131285_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131285_total_time = 0;
    ctx->futhark_mc_segscan_task_131285_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131295_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131295_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131295_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131295_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131295_total_iter = 0;
    ctx->futhark_mc_segred_task_131292_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131292_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131292_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131292_total_time = 0;
    ctx->futhark_mc_segred_task_131292_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131300_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131300_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131300_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131300_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131300_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131302_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131302_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131302_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131302_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131302_total_iter = 0;
    ctx->futhark_mc_segscan_task_131297_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131297_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131297_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131297_total_time = 0;
    ctx->futhark_mc_segscan_task_131297_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131307_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131307_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131307_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131307_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131307_total_iter = 0;
    ctx->futhark_mc_segred_task_131304_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131304_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131304_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131304_total_time = 0;
    ctx->futhark_mc_segred_task_131304_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131312_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131312_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131312_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131312_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131312_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131314_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131314_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131314_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131314_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131314_total_iter = 0;
    ctx->futhark_mc_segscan_task_131309_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131309_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131309_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131309_total_time = 0;
    ctx->futhark_mc_segscan_task_131309_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131275_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131275_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131275_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131275_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131275_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131275_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131273_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131273_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131273_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131318_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131318_total_iter = 0;
    ctx->futhark_mc_segmap_task_131316_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131316_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131316_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131316_total_time = 0;
    ctx->futhark_mc_segmap_task_131316_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131329_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131329_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131329_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131329_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131329_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131329_total_iter = 0;
    ctx->futhark_mc_segmap_task_131327_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131327_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131327_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131327_total_time = 0;
    ctx->futhark_mc_segmap_task_131327_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131323_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131323_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131323_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131323_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131323_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131323_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131321_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131321_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131321_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131333_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131333_total_iter = 0;
    ctx->futhark_mc_segmap_task_131331_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131331_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131331_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131331_total_time = 0;
    ctx->futhark_mc_segmap_task_131331_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131342_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131342_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131342_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131342_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131342_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131342_total_iter = 0;
    ctx->futhark_mc_segmap_task_131340_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131340_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131340_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131340_total_time = 0;
    ctx->futhark_mc_segmap_task_131340_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131350_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131350_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131350_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131350_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131350_total_iter = 0;
    ctx->futhark_mc_segred_task_131347_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131347_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131347_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131347_total_time = 0;
    ctx->futhark_mc_segred_task_131347_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131355_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131355_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131355_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131355_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131355_total_iter = 0;
    ctx->futhark_mc_segred_task_131352_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131352_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131352_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131352_total_time = 0;
    ctx->futhark_mc_segred_task_131352_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131345_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131345_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131345_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131345_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131345_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131345_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131343_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131343_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131343_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131337_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131337_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131337_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131337_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131337_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131337_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131335_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131335_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131335_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131359_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131359_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131359_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131359_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131359_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131359_total_iter = 0;
    ctx->futhark_mc_segmap_task_131357_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131357_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131357_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131357_total_time = 0;
    ctx->futhark_mc_segmap_task_131357_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131370_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131370_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131370_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131370_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131370_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131370_total_iter = 0;
    ctx->futhark_mc_segmap_task_131368_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131368_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131368_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131368_total_time = 0;
    ctx->futhark_mc_segmap_task_131368_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131380_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131380_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131380_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131380_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131380_total_iter = 0;
    ctx->futhark_mc_segred_task_131375_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131375_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131375_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131375_total_time = 0;
    ctx->futhark_mc_segred_task_131375_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131386_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131386_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131386_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131386_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131386_total_iter = 0;
    ctx->futhark_mc_segred_task_131382_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131382_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131382_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131382_total_time = 0;
    ctx->futhark_mc_segred_task_131382_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131373_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131373_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131373_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131373_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131373_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131373_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131371_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131371_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131371_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131364_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131364_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131364_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131364_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131364_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131364_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131362_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131362_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131362_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131390_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131390_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131390_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131390_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131390_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131390_total_iter = 0;
    ctx->futhark_mc_segmap_task_131388_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131388_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131388_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131388_total_time = 0;
    ctx->futhark_mc_segmap_task_131388_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131401_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131401_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131401_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131401_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131401_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131401_total_iter = 0;
    ctx->futhark_mc_segmap_task_131399_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131399_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131399_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131399_total_time = 0;
    ctx->futhark_mc_segmap_task_131399_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131413_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131413_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131413_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131413_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131413_total_iter = 0;
    ctx->futhark_mc_segred_task_131406_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131406_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131406_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131406_total_time = 0;
    ctx->futhark_mc_segred_task_131406_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131419_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131419_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131419_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131419_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131419_total_iter = 0;
    ctx->futhark_mc_segred_task_131415_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131415_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131415_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131415_total_time = 0;
    ctx->futhark_mc_segred_task_131415_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131404_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131404_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131404_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131404_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131404_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131404_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131402_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131402_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131402_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131395_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131395_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131395_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131395_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131395_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131395_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131393_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131393_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131393_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131423_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131423_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131423_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131423_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131423_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131423_total_iter = 0;
    ctx->futhark_mc_segmap_task_131421_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131421_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131421_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131421_total_time = 0;
    ctx->futhark_mc_segmap_task_131421_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131433_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131433_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131433_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131433_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131433_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131433_total_iter = 0;
    ctx->futhark_mc_segmap_task_131431_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131431_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131431_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131431_total_time = 0;
    ctx->futhark_mc_segmap_task_131431_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131443_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131443_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131443_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131443_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131443_total_iter = 0;
    ctx->futhark_mc_segred_task_131440_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131440_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131440_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131440_total_time = 0;
    ctx->futhark_mc_segred_task_131440_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131448_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131448_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131448_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131448_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131448_total_iter = 0;
    ctx->futhark_mc_segred_task_131445_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131445_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131445_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131445_total_time = 0;
    ctx->futhark_mc_segred_task_131445_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131437_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131437_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131437_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131437_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131437_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131437_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131435_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131435_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131435_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131428_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131428_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131426_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131426_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131426_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131452_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131452_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131452_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131452_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131452_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131452_total_iter = 0;
    ctx->futhark_mc_segmap_task_131450_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131450_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131450_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131450_total_time = 0;
    ctx->futhark_mc_segmap_task_131450_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131465_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131465_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131465_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131465_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131465_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131465_total_iter = 0;
    ctx->futhark_mc_segmap_task_131463_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131463_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131463_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131463_total_time = 0;
    ctx->futhark_mc_segmap_task_131463_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131479_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131479_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131479_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131479_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131479_total_iter = 0;
    ctx->futhark_mc_segred_task_131474_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131474_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131474_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131474_total_time = 0;
    ctx->futhark_mc_segred_task_131474_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131485_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131485_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131485_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131485_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131485_total_iter = 0;
    ctx->futhark_mc_segred_task_131481_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131481_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131481_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131481_total_time = 0;
    ctx->futhark_mc_segred_task_131481_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131470_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131470_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131470_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131470_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131470_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131470_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131468_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131468_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131468_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131459_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131459_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131457_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131457_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131457_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131489_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131489_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131489_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131489_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131489_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131489_total_iter = 0;
    ctx->futhark_mc_segmap_task_131487_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131487_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131487_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131487_total_time = 0;
    ctx->futhark_mc_segmap_task_131487_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131504_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131504_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131504_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131504_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131504_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131504_total_iter = 0;
    ctx->futhark_mc_segmap_task_131502_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131502_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131502_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131502_total_time = 0;
    ctx->futhark_mc_segmap_task_131502_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131519_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131519_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131519_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131519_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131519_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131519_total_iter = 0;
    ctx->futhark_mc_segmap_task_131517_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131517_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131517_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131517_total_time = 0;
    ctx->futhark_mc_segmap_task_131517_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131528_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131528_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131528_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131528_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131528_total_iter = 0;
    ctx->futhark_mc_segred_task_131521_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131521_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131521_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131521_total_time = 0;
    ctx->futhark_mc_segred_task_131521_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131534_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131534_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter = 0;
    ctx->futhark_mc_segred_task_131530_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131530_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131530_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131530_total_time = 0;
    ctx->futhark_mc_segred_task_131530_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131511_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131511_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131511_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131511_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131511_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131511_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131509_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131509_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131509_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131498_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131498_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131498_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131498_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131498_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131498_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131496_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131496_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131496_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131538_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131538_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131538_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131538_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131538_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131538_total_iter = 0;
    ctx->futhark_mc_segmap_task_131536_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131536_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131536_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131536_total_time = 0;
    ctx->futhark_mc_segmap_task_131536_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131547_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131547_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131547_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131547_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131547_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131547_total_iter = 0;
    ctx->futhark_mc_segmap_task_131545_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131545_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131545_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131545_total_time = 0;
    ctx->futhark_mc_segmap_task_131545_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131542_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131542_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131542_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131542_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131542_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131542_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131540_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131540_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131540_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131551_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131551_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131551_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131551_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131551_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131551_total_iter = 0;
    ctx->futhark_mc_segmap_task_131549_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131549_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131549_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131549_total_time = 0;
    ctx->futhark_mc_segmap_task_131549_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131564_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131564_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131564_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131564_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131564_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131564_total_iter = 0;
    ctx->futhark_mc_segmap_task_131562_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131562_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131562_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131562_total_time = 0;
    ctx->futhark_mc_segmap_task_131562_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131568_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131568_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131568_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131568_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131568_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131568_total_iter = 0;
    ctx->futhark_mc_segmap_task_131566_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131566_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131566_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131566_total_time = 0;
    ctx->futhark_mc_segmap_task_131566_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131557_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131557_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131557_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131557_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131557_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131557_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131555_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131555_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131555_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131572_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131572_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131572_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131572_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131572_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131572_total_iter = 0;
    ctx->futhark_mc_segmap_task_131570_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131570_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131570_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131570_total_time = 0;
    ctx->futhark_mc_segmap_task_131570_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131581_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131581_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131581_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131581_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131581_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131581_total_iter = 0;
    ctx->futhark_mc_segmap_task_131579_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131579_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131579_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131579_total_time = 0;
    ctx->futhark_mc_segmap_task_131579_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131589_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131589_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter = 0;
    ctx->futhark_mc_segred_task_131586_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131586_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131586_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131586_total_time = 0;
    ctx->futhark_mc_segred_task_131586_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131594_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131594_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131594_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131594_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131594_total_iter = 0;
    ctx->futhark_mc_segred_task_131591_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131591_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131591_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131591_total_time = 0;
    ctx->futhark_mc_segred_task_131591_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131584_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131584_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131584_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131584_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131584_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131584_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131582_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131582_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131582_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131576_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131576_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131576_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131576_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131576_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131576_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131574_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131574_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131574_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131598_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131598_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131598_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131598_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131598_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131598_total_iter = 0;
    ctx->futhark_mc_segmap_task_131596_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131596_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131596_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131596_total_time = 0;
    ctx->futhark_mc_segmap_task_131596_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131609_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131609_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131609_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131609_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131609_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131609_total_iter = 0;
    ctx->futhark_mc_segmap_task_131607_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131607_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131607_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131607_total_time = 0;
    ctx->futhark_mc_segmap_task_131607_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131619_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131619_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131619_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131619_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131619_total_iter = 0;
    ctx->futhark_mc_segred_task_131614_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131614_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131614_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131614_total_time = 0;
    ctx->futhark_mc_segred_task_131614_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131625_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131625_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131625_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131625_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131625_total_iter = 0;
    ctx->futhark_mc_segred_task_131621_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131621_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131621_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131621_total_time = 0;
    ctx->futhark_mc_segred_task_131621_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131612_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131612_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131612_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131612_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131612_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131612_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131610_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131610_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131610_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131603_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131603_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131603_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131603_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131603_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131603_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131601_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131601_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131601_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131629_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131629_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131629_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131629_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131629_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131629_total_iter = 0;
    ctx->futhark_mc_segmap_task_131627_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131627_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131627_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131627_total_time = 0;
    ctx->futhark_mc_segmap_task_131627_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131640_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131640_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131640_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131640_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131640_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131640_total_iter = 0;
    ctx->futhark_mc_segmap_task_131638_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131638_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131638_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131638_total_time = 0;
    ctx->futhark_mc_segmap_task_131638_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131652_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131652_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131652_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131652_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131652_total_iter = 0;
    ctx->futhark_mc_segred_task_131645_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131645_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131645_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131645_total_time = 0;
    ctx->futhark_mc_segred_task_131645_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131658_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131658_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131658_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131658_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131658_total_iter = 0;
    ctx->futhark_mc_segred_task_131654_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131654_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131654_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131654_total_time = 0;
    ctx->futhark_mc_segred_task_131654_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131643_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131643_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131643_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131643_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131643_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131643_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131641_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131641_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131641_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131634_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131634_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131634_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131634_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131634_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131634_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131632_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131632_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131632_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131662_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131662_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131662_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131662_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131662_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131662_total_iter = 0;
    ctx->futhark_mc_segmap_task_131660_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131660_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131660_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131660_total_time = 0;
    ctx->futhark_mc_segmap_task_131660_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131672_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131672_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131672_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131672_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131672_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131672_total_iter = 0;
    ctx->futhark_mc_segmap_task_131670_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131670_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131670_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131670_total_time = 0;
    ctx->futhark_mc_segmap_task_131670_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131682_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131682_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131682_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131682_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131682_total_iter = 0;
    ctx->futhark_mc_segred_task_131679_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131679_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131679_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131679_total_time = 0;
    ctx->futhark_mc_segred_task_131679_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131687_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131687_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131687_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131687_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131687_total_iter = 0;
    ctx->futhark_mc_segred_task_131684_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131684_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131684_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131684_total_time = 0;
    ctx->futhark_mc_segred_task_131684_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131676_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131676_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131676_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131676_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131676_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131676_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131674_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131674_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131674_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131667_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131667_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131665_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131665_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131665_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131691_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131691_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131691_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131691_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131691_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131691_total_iter = 0;
    ctx->futhark_mc_segmap_task_131689_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131689_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131689_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131689_total_time = 0;
    ctx->futhark_mc_segmap_task_131689_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131704_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131704_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131704_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131704_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131704_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131704_total_iter = 0;
    ctx->futhark_mc_segmap_task_131702_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131702_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131702_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131702_total_time = 0;
    ctx->futhark_mc_segmap_task_131702_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131718_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131718_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131718_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131718_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131718_total_iter = 0;
    ctx->futhark_mc_segred_task_131713_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131713_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131713_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131713_total_time = 0;
    ctx->futhark_mc_segred_task_131713_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131724_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131724_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131724_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131724_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131724_total_iter = 0;
    ctx->futhark_mc_segred_task_131720_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131720_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131720_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131720_total_time = 0;
    ctx->futhark_mc_segred_task_131720_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131709_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131709_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131709_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131709_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131709_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131709_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131707_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131707_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131707_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131698_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131698_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131698_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131698_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131698_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131698_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131696_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131696_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131696_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131728_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131728_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131728_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131728_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131728_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131728_total_iter = 0;
    ctx->futhark_mc_segmap_task_131726_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131726_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131726_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131726_total_time = 0;
    ctx->futhark_mc_segmap_task_131726_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131743_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131743_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131743_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131743_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131743_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131743_total_iter = 0;
    ctx->futhark_mc_segmap_task_131741_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131741_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131741_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131741_total_time = 0;
    ctx->futhark_mc_segmap_task_131741_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131758_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131758_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131758_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131758_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131758_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131758_total_iter = 0;
    ctx->futhark_mc_segmap_task_131756_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131756_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131756_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131756_total_time = 0;
    ctx->futhark_mc_segmap_task_131756_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131767_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131767_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131767_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131767_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131767_total_iter = 0;
    ctx->futhark_mc_segred_task_131760_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131760_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131760_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131760_total_time = 0;
    ctx->futhark_mc_segred_task_131760_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131773_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131773_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131773_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131773_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131773_total_iter = 0;
    ctx->futhark_mc_segred_task_131769_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131769_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131769_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131769_total_time = 0;
    ctx->futhark_mc_segred_task_131769_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131750_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131750_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131750_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131750_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131750_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131750_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131748_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131748_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131748_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131737_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131737_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131737_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131737_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131737_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131737_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131735_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131735_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131735_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131777_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131777_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131777_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131777_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131777_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131777_total_iter = 0;
    ctx->futhark_mc_segmap_task_131775_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131775_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131775_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131775_total_time = 0;
    ctx->futhark_mc_segmap_task_131775_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131786_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131786_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131786_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131786_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131786_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131786_total_iter = 0;
    ctx->futhark_mc_segmap_task_131784_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131784_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131784_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131784_total_time = 0;
    ctx->futhark_mc_segmap_task_131784_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131781_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131781_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131781_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131781_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131781_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131781_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131779_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131779_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131779_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131790_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131790_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131790_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131790_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131790_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131790_total_iter = 0;
    ctx->futhark_mc_segmap_task_131788_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131788_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131788_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131788_total_time = 0;
    ctx->futhark_mc_segmap_task_131788_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131799_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131799_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131799_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131799_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131799_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131799_total_iter = 0;
    ctx->futhark_mc_segmap_task_131797_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131797_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131797_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131797_total_time = 0;
    ctx->futhark_mc_segmap_task_131797_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131794_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131794_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131794_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131794_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131794_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131794_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131792_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131792_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131792_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131803_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131803_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131803_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131803_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131803_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131803_total_iter = 0;
    ctx->futhark_mc_segmap_task_131801_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131801_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131801_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131801_total_time = 0;
    ctx->futhark_mc_segmap_task_131801_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131812_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131812_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131812_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131812_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131812_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131812_total_iter = 0;
    ctx->futhark_mc_segmap_task_131810_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131810_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131810_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131810_total_time = 0;
    ctx->futhark_mc_segmap_task_131810_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131807_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131807_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131807_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131807_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131807_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131807_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131805_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131805_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131805_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131816_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131816_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131816_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131816_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131816_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131816_total_iter = 0;
    ctx->futhark_mc_segmap_task_131814_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131814_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131814_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131814_total_time = 0;
    ctx->futhark_mc_segmap_task_131814_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131841_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131841_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131841_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131841_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131841_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131843_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131843_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131843_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131843_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131843_total_iter = 0;
    ctx->futhark_mc_segscan_task_131835_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131835_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131835_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131835_total_time = 0;
    ctx->futhark_mc_segscan_task_131835_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131847_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131847_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131847_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131847_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131847_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131847_total_iter = 0;
    ctx->futhark_mc_segmap_task_131845_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131845_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131845_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131845_total_time = 0;
    ctx->futhark_mc_segmap_task_131845_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131826_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131826_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131826_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131826_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131826_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131826_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131824_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131824_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131824_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131851_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131851_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131851_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131851_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131851_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131851_total_iter = 0;
    ctx->futhark_mc_segmap_task_131849_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131849_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131849_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131849_total_time = 0;
    ctx->futhark_mc_segmap_task_131849_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131859_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131859_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131859_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131859_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131859_total_iter = 0;
    ctx->futhark_mc_segred_task_131856_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131856_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131856_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131856_total_time = 0;
    ctx->futhark_mc_segred_task_131856_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131854_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131854_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131854_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131854_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131854_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131854_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131852_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131852_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131852_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131863_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131863_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131863_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131863_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131863_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131863_total_iter = 0;
    ctx->futhark_mc_segmap_task_131861_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131861_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131861_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131861_total_time = 0;
    ctx->futhark_mc_segmap_task_131861_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131872_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131872_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131872_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131872_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131872_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131872_total_iter = 0;
    ctx->futhark_mc_segmap_task_131870_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131870_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131870_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131870_total_time = 0;
    ctx->futhark_mc_segmap_task_131870_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131867_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131867_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131867_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131867_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131867_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131867_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131865_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131865_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131865_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131876_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131876_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131876_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131876_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131876_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131876_total_iter = 0;
    ctx->futhark_mc_segmap_task_131874_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131874_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131874_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131874_total_time = 0;
    ctx->futhark_mc_segmap_task_131874_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131885_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131885_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131885_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131885_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131885_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131885_total_iter = 0;
    ctx->futhark_mc_segmap_task_131883_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131883_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131883_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131883_total_time = 0;
    ctx->futhark_mc_segmap_task_131883_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131880_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131880_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131880_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131880_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131880_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131880_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131878_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131878_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131878_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131091         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131091_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131091_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131091_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131091_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131091_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131091_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131091_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131091_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131091_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131091_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131091_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131091_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131091_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131091_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131091_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131091_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131091_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131091_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131091_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131091_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131091_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131091_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131091_total_iter /
                (ctx->futhark_mc_segmap_parloop_131091_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131091_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131091_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131091_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131103   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131103_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131103_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131103_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131103_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131103_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131103_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131103_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131103_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131103_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131103_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131103_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131103_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131103_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131103_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131103_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131103_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131103_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131103_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131103_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131103_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131103_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131105   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131105_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131105_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131105_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131105_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131105_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131105_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131105_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131105_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131105_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131105_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131105_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131105_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131105_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131105_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131105_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131105_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131105_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131105_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131105_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131105_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131105_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131100           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131100_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131100_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131100_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131100_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131100_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131100_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131100_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131100_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131100_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131100_iter[i] /
                    (ctx->futhark_mc_segscan_task_131100_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131100_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131109         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131109_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131109_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131109_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131109_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131109_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131109_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131109_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131109_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131109_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131109_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131109_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131109_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131109_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131109_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131109_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131109_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131109_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131109_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131109_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131109_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131109_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131109_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131109_total_iter /
                (ctx->futhark_mc_segmap_parloop_131109_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131109_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131109_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131109_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131107            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131107_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131107_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131107_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131107_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131107_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131107_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131107_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131107_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131107_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131107_iter[i] /
                    (ctx->futhark_mc_segmap_task_131107_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131107_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131096         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131096_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131096_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131096_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131096_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131096_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131096_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131096_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131096_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131096_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131096_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131096_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131096_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131096_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131096_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131096_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131096_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131096_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131096_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131096_total_iter /
                (ctx->futhark_mc_segmap_parloop_131096_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131096_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131096_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131096_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131089            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131089_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131089_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131089_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131089_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131089_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131089_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131089_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131089_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131089_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131089_iter[i] /
                    (ctx->futhark_mc_segmap_task_131089_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131089_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131094     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131094_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131094_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131094_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131094_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131094_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131094_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131094_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131094_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131113         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131113_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131113_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131113_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131113_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131113_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131113_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131113_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131113_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131113_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131113_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131113_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131113_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131113_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131113_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131113_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131113_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131113_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131113_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131113_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131113_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131113_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131113_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131113_total_iter /
                (ctx->futhark_mc_segmap_parloop_131113_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131113_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131113_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131113_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131122         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131122_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131122_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131122_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131122_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131122_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131122_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131122_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131122_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131122_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131122_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131122_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131122_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131122_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131122_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131122_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131122_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131122_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131122_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131122_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131122_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131122_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131122_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131122_total_iter /
                (ctx->futhark_mc_segmap_parloop_131122_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131122_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131122_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131122_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131120            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131120_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131120_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131120_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131120_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131120_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131120_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131120_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131120_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131120_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131120_iter[i] /
                    (ctx->futhark_mc_segmap_task_131120_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131120_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131117         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131117_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131117_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131117_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131117_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131117_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131117_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131117_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131117_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131117_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131117_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131117_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131117_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131117_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131117_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131117_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131117_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131117_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131117_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131117_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131117_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131117_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131117_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131117_total_iter /
                (ctx->futhark_mc_segmap_parloop_131117_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131117_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131117_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131117_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131111            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131111_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131111_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131111_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131111_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131111_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131111_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131111_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131111_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131111_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131111_iter[i] /
                    (ctx->futhark_mc_segmap_task_131111_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131111_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131115     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131115_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131115_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131115_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131115_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131115_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131115_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131115_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131115_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131115_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131115_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131115_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131115_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131126         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131126_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131126_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131126_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131126_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131126_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131126_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131126_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131126_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131126_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131126_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131126_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131126_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131126_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131126_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131126_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131126_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131126_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131126_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131126_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131126_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131126_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131126_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131126_total_iter /
                (ctx->futhark_mc_segmap_parloop_131126_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131126_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131126_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131126_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131135         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131135_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131135_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131135_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131135_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131135_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131135_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131135_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131135_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131135_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131135_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131135_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131135_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131135_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131135_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131135_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131135_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131135_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131135_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131135_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131135_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131135_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131135_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131135_total_iter /
                (ctx->futhark_mc_segmap_parloop_131135_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131135_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131135_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131135_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131133            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131133_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131133_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131133_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131133_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131133_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131133_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131133_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131133_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131133_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131133_iter[i] /
                    (ctx->futhark_mc_segmap_task_131133_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131133_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131130         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131130_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131130_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131130_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131130_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131130_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131130_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131130_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131130_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131130_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131130_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131130_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131130_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131130_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131130_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131130_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131130_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131130_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131130_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131130_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131130_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131130_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131130_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131130_total_iter /
                (ctx->futhark_mc_segmap_parloop_131130_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131130_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131130_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131130_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131124            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131124_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131124_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131124_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131124_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131124_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131124_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131124_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131124_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131124_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131124_iter[i] /
                    (ctx->futhark_mc_segmap_task_131124_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131124_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131128     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131128_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131128_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131128_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131128_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131128_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131128_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131128_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131128_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131128_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131128_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131128_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131128_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131139         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131139_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131139_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131139_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131139_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131139_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131139_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131139_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131139_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131139_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131139_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131139_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131139_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131139_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131139_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131139_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131139_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131139_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131139_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131139_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131139_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131139_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131139_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131139_total_iter /
                (ctx->futhark_mc_segmap_parloop_131139_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131139_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131139_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131139_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131148         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131148_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131148_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131148_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131148_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131148_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131148_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131148_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131148_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131148_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131148_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131148_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131148_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131148_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131148_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131148_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131148_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131148_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131148_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131148_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131148_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131148_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131148_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131148_total_iter /
                (ctx->futhark_mc_segmap_parloop_131148_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131148_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131148_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131148_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131156 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131156_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131156_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131156_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131156_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131156_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131156_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131156_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131156_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131156_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131156_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131156_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131156_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131156_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131156_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131156_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131156_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131156_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131156_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131156_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131156_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131156_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131153            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131153_runs[i],
                    (long) ctx->futhark_mc_segred_task_131153_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131153_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131153_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131153_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131153_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131153_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131153_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131153_iter[i],
                    (long) ctx->futhark_mc_segred_task_131153_iter[i] /
                    (ctx->futhark_mc_segred_task_131153_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131153_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131151         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131151_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131151_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131151_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131151_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131151_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131151_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131151_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131151_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131151_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131151_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131151_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131151_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131151_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131151_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131151_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131151_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131151_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131151_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131151_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131151_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131151_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131151_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131151_total_iter /
                (ctx->futhark_mc_segmap_parloop_131151_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131151_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131151_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131151_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131146            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131146_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131146_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131146_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131146_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131146_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131146_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131146_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131146_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131146_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131146_iter[i] /
                    (ctx->futhark_mc_segmap_task_131146_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131146_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131149     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131149_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131149_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131149_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131149_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131149_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131149_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131149_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131149_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131149_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131149_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131149_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131149_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131143         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131143_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131143_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131143_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131143_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131143_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131143_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131143_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131143_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131143_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131143_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131143_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131143_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131143_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131143_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131143_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131143_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131143_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131143_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131143_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131143_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131143_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131143_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131143_total_iter /
                (ctx->futhark_mc_segmap_parloop_131143_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131143_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131143_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131143_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131137            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131137_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131137_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131137_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131137_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131137_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131137_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131137_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131137_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131137_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131137_iter[i] /
                    (ctx->futhark_mc_segmap_task_131137_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131137_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131141     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131141_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131141_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131141_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131141_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131141_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131141_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131141_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131141_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131141_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131141_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131141_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131141_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131160         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131160_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131160_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131160_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131160_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131160_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131160_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131160_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131160_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131160_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131160_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131160_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131160_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131160_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131160_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131160_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131160_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131160_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131160_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131160_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131160_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131160_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131160_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131160_total_iter /
                (ctx->futhark_mc_segmap_parloop_131160_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131160_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131160_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131160_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131175         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131175_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131175_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131175_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131175_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131175_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131175_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131175_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131175_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131175_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131175_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131175_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131175_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131175_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131175_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131175_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131175_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131175_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131175_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131175_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131175_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131175_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131175_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131175_total_iter /
                (ctx->futhark_mc_segmap_parloop_131175_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131175_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131175_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131175_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131173            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131173_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131173_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131173_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131173_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131173_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131173_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131173_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131173_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131173_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131173_iter[i] /
                    (ctx->futhark_mc_segmap_task_131173_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131173_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131179         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131179_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131179_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131179_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131179_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131179_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131179_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131179_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131179_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131179_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131179_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131179_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131179_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131179_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131179_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131179_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131179_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131179_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131179_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131179_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131179_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131179_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131179_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131179_total_iter /
                (ctx->futhark_mc_segmap_parloop_131179_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131179_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131179_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131179_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131187 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131187_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131187_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131187_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131187_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131187_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131187_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131187_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131187_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131187_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131187_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131187_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131187_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131187_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131187_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131187_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131187_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131187_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131187_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131187_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131187_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131187_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131184            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131184_runs[i],
                    (long) ctx->futhark_mc_segred_task_131184_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131184_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131184_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131184_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131184_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131184_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131184_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131184_iter[i],
                    (long) ctx->futhark_mc_segred_task_131184_iter[i] /
                    (ctx->futhark_mc_segred_task_131184_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131184_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131182         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131182_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131182_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131182_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131182_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131182_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131182_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131182_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131182_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131182_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131182_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131182_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131182_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131182_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131182_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131182_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131182_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131182_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131182_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131182_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131182_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131182_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131182_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131182_total_iter /
                (ctx->futhark_mc_segmap_parloop_131182_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131182_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131182_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131182_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131177            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131177_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131177_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131177_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131177_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131177_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131177_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131177_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131177_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131177_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131177_iter[i] /
                    (ctx->futhark_mc_segmap_task_131177_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131177_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131180     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131180_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131180_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131180_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131180_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131180_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131180_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131180_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131180_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131180_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131180_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131180_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131180_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131167         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131167_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131167_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131167_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131167_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131167_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131167_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131167_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131167_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131167_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131167_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131167_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131167_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131167_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131167_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131167_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131167_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131167_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131167_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131167_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131167_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131167_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131167_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131167_total_iter /
                (ctx->futhark_mc_segmap_parloop_131167_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131167_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131167_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131167_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131158            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131158_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131158_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131158_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131158_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131158_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131158_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131158_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131158_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131158_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131158_iter[i] /
                    (ctx->futhark_mc_segmap_task_131158_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131158_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131165     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131165_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131165_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131165_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131165_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131165_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131165_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131165_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131165_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131165_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131165_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131165_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131165_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131191         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131191_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131191_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131191_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131191_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131191_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131191_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131191_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131191_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131191_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131191_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131191_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131191_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131191_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131191_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131191_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131191_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131191_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131191_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131191_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131191_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131191_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131191_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131191_total_iter /
                (ctx->futhark_mc_segmap_parloop_131191_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131191_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131191_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131191_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131206         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131206_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131206_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131206_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131206_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131206_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131206_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131206_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131206_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131206_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131206_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131206_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131206_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131206_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131206_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131206_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131206_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131206_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131206_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131206_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131206_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131206_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131206_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131206_total_iter /
                (ctx->futhark_mc_segmap_parloop_131206_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131206_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131206_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131206_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131204            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131204_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131204_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131204_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131204_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131204_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131204_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131204_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131204_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131204_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131204_iter[i] /
                    (ctx->futhark_mc_segmap_task_131204_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131204_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131210         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131210_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131210_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131210_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131210_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131210_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131210_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131210_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131210_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131210_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131210_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131210_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131210_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131210_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131210_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131210_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131210_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131210_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131210_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131210_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131210_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131210_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131210_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131210_total_iter /
                (ctx->futhark_mc_segmap_parloop_131210_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131210_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131210_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131210_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131218 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131218_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131218_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131218_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131218_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131218_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131218_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131218_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131218_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131218_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131218_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131218_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131218_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131218_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131218_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131218_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131218_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131218_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131218_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131218_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131218_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131218_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131215            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131215_runs[i],
                    (long) ctx->futhark_mc_segred_task_131215_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131215_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131215_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131215_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131215_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131215_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131215_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131215_iter[i],
                    (long) ctx->futhark_mc_segred_task_131215_iter[i] /
                    (ctx->futhark_mc_segred_task_131215_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131215_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131213         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131213_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131213_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131213_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131213_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131213_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131213_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131213_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131213_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131213_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131213_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131213_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131213_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131213_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131213_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131213_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131213_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131213_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131213_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131213_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131213_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131213_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131213_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131213_total_iter /
                (ctx->futhark_mc_segmap_parloop_131213_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131213_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131213_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131213_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131208            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131208_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131208_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131208_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131208_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131208_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131208_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131208_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131208_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131208_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131208_iter[i] /
                    (ctx->futhark_mc_segmap_task_131208_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131208_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131211     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131211_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131211_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131211_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131211_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131211_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131211_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131211_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131211_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131211_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131211_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131211_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131211_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131198         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131198_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131198_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131198_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131198_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131198_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131198_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131198_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131198_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131198_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131198_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131198_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131198_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131198_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131198_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131198_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131198_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131198_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131198_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131198_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131198_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131198_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131198_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131198_total_iter /
                (ctx->futhark_mc_segmap_parloop_131198_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131198_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131198_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131198_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131189            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131189_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131189_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131189_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131189_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131189_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131189_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131189_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131189_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131189_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131189_iter[i] /
                    (ctx->futhark_mc_segmap_task_131189_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131189_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131196     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131196_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131196_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131196_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131196_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131196_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131196_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131196_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131196_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131196_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131196_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131196_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131196_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131222         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131222_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131222_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131222_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131222_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131222_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131222_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131222_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131222_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131222_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131222_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131222_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131222_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131222_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131222_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131222_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131222_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131222_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131222_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131222_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131222_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131222_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131222_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131222_total_iter /
                (ctx->futhark_mc_segmap_parloop_131222_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131222_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131222_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131222_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131231         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131231_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131231_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131231_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131231_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131231_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131231_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131231_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131231_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131231_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131231_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131231_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131231_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131231_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131231_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131231_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131231_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131231_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131231_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131231_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131231_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131231_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131231_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131231_total_iter /
                (ctx->futhark_mc_segmap_parloop_131231_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131231_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131231_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131231_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131229            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131229_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131229_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131229_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131229_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131229_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131229_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131229_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131229_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131229_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131229_iter[i] /
                    (ctx->futhark_mc_segmap_task_131229_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131229_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131226         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131226_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131226_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131226_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131226_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131226_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131226_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131226_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131226_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131226_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131226_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131226_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131226_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131226_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131226_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131226_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131226_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131226_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131226_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131226_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131226_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131226_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131226_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131226_total_iter /
                (ctx->futhark_mc_segmap_parloop_131226_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131226_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131226_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131226_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131220            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131220_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131220_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131220_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131220_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131220_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131220_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131220_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131220_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131220_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131220_iter[i] /
                    (ctx->futhark_mc_segmap_task_131220_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131220_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131224     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131224_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131224_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131224_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131224_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131224_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131224_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131224_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131224_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131224_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131224_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131224_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131224_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131235         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131235_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131235_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131235_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131235_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131235_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131235_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131235_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131235_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131235_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131235_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131235_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131235_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131235_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131235_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131235_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131235_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131235_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131235_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131235_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131235_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131235_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131235_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131235_total_iter /
                (ctx->futhark_mc_segmap_parloop_131235_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131235_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131235_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131235_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131244         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131244_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131244_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131244_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131244_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131244_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131244_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131244_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131244_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131244_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131244_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131244_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131244_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131244_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131244_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131244_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131244_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131244_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131244_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131244_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131244_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131244_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131244_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131244_total_iter /
                (ctx->futhark_mc_segmap_parloop_131244_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131244_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131244_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131244_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131252 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131252_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131252_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131252_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131252_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131252_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131252_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131252_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131252_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131252_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131252_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131252_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131252_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131252_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131252_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131252_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131252_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131252_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131252_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131252_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131252_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131252_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131249            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131249_runs[i],
                    (long) ctx->futhark_mc_segred_task_131249_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131249_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131249_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131249_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131249_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131249_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131249_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131249_iter[i],
                    (long) ctx->futhark_mc_segred_task_131249_iter[i] /
                    (ctx->futhark_mc_segred_task_131249_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131249_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131247         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131247_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131247_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131247_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131247_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131247_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131247_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131247_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131247_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131247_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131247_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131247_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131247_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131247_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131247_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131247_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131247_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131247_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131247_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131247_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131247_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131247_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131247_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131247_total_iter /
                (ctx->futhark_mc_segmap_parloop_131247_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131247_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131247_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131247_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131242            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131242_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131242_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131242_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131242_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131242_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131242_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131242_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131242_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131242_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131242_iter[i] /
                    (ctx->futhark_mc_segmap_task_131242_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131242_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131245     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131245_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131245_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131245_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131245_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131245_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131245_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131245_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131245_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131245_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131245_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131245_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131245_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131239         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131239_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131239_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131239_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131239_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131239_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131239_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131239_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131239_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131239_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131239_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131239_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131239_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131239_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131239_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131239_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131239_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131239_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131239_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131239_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131239_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131239_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131239_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131239_total_iter /
                (ctx->futhark_mc_segmap_parloop_131239_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131239_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131239_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131239_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131233            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131233_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131233_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131233_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131233_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131233_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131233_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131233_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131233_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131233_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131233_iter[i] /
                    (ctx->futhark_mc_segmap_task_131233_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131233_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131237     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131237_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131237_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131237_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131237_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131237_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131237_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131237_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131237_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131237_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131237_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131237_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131237_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131256         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131256_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131256_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131256_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131256_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131256_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131256_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131256_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131256_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131256_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131256_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131256_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131256_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131256_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131256_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131256_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131256_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131256_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131256_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131256_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131256_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131256_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131256_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131256_total_iter /
                (ctx->futhark_mc_segmap_parloop_131256_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131256_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131256_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131256_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131265         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131265_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131265_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131265_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131265_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131265_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131265_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131265_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131265_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131265_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131265_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131265_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131265_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131265_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131265_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131265_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131265_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131265_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131265_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131265_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131265_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131265_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131265_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131265_total_iter /
                (ctx->futhark_mc_segmap_parloop_131265_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131265_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131265_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131265_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131263            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131263_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131263_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131263_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131263_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131263_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131263_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131263_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131263_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131263_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131263_iter[i] /
                    (ctx->futhark_mc_segmap_task_131263_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131263_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131260         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131260_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131260_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131260_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131260_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131260_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131260_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131260_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131260_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131260_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131260_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131260_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131260_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131260_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131260_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131260_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131260_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131260_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131260_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131260_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131260_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131260_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131260_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131260_total_iter /
                (ctx->futhark_mc_segmap_parloop_131260_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131260_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131260_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131260_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131254            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131254_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131254_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131254_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131254_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131254_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131254_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131254_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131254_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131254_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131254_iter[i] /
                    (ctx->futhark_mc_segmap_task_131254_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131254_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131258     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131258_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131258_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131258_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131258_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131258_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131258_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131258_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131258_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131258_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131258_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131258_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131258_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131269         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131269_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131269_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131269_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131269_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131269_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131269_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131269_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131269_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131269_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131269_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131269_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131269_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131269_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131269_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131269_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131269_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131269_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131269_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131269_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131269_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131269_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131269_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131269_total_iter /
                (ctx->futhark_mc_segmap_parloop_131269_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131269_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131269_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131269_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131283 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131283_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131283_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131283_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131283_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131283_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131283_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131283_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131283_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131283_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131283_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131283_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131283_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131283_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131283_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131283_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131283_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131283_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131283_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131283_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131283_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131283_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131280            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131280_runs[i],
                    (long) ctx->futhark_mc_segred_task_131280_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131280_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131280_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131280_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131280_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131280_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131280_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131280_iter[i],
                    (long) ctx->futhark_mc_segred_task_131280_iter[i] /
                    (ctx->futhark_mc_segred_task_131280_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131280_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131288   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131288_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131288_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131288_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131288_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131288_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131288_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131288_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131288_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131288_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131288_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131288_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131288_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131288_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131288_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131288_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131288_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131288_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131288_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131288_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131288_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131288_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131290   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131290_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131290_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131290_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131290_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131290_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131290_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131290_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131290_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131290_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131290_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131290_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131290_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131290_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131290_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131290_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131290_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131290_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131290_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131290_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131290_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131290_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131285           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131285_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131285_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131285_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131285_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131285_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131285_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131285_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131285_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131285_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131285_iter[i] /
                    (ctx->futhark_mc_segscan_task_131285_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131285_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131295 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131295_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131295_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131295_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131295_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131295_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131295_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131295_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131295_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131295_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131295_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131295_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131295_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131295_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131295_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131295_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131295_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131295_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131295_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131295_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131295_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131295_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131292            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131292_runs[i],
                    (long) ctx->futhark_mc_segred_task_131292_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131292_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131292_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131292_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131292_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131292_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131292_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131292_iter[i],
                    (long) ctx->futhark_mc_segred_task_131292_iter[i] /
                    (ctx->futhark_mc_segred_task_131292_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131292_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131300   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131300_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131300_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131300_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131300_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131300_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131300_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131300_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131300_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131300_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131300_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131300_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131300_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131300_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131300_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131300_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131300_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131300_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131300_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131300_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131300_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131300_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131302   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131302_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131302_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131302_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131302_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131302_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131302_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131302_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131302_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131302_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131302_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131302_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131302_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131302_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131302_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131302_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131302_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131302_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131302_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131302_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131302_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131302_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131297           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131297_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131297_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131297_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131297_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131297_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131297_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131297_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131297_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131297_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131297_iter[i] /
                    (ctx->futhark_mc_segscan_task_131297_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131297_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131307 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131307_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131307_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131307_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131307_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131307_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131307_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131307_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131307_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131307_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131307_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131307_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131307_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131307_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131307_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131307_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131307_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131307_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131307_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131307_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131307_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131307_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131304            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131304_runs[i],
                    (long) ctx->futhark_mc_segred_task_131304_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131304_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131304_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131304_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131304_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131304_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131304_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131304_iter[i],
                    (long) ctx->futhark_mc_segred_task_131304_iter[i] /
                    (ctx->futhark_mc_segred_task_131304_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131304_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131312   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131312_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131312_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131312_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131312_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131312_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131312_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131312_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131312_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131312_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131312_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131312_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131312_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131312_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131312_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131312_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131312_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131312_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131312_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131312_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131312_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131312_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131314   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131314_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131314_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131314_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131314_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131314_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131314_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131314_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131314_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131314_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131314_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131314_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131314_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131314_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131314_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131314_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131314_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131314_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131314_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131314_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131314_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131314_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131309           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131309_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131309_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131309_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131309_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131309_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131309_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131309_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131309_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131309_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131309_iter[i] /
                    (ctx->futhark_mc_segscan_task_131309_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131309_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131275         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131275_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131275_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131275_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131275_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131275_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131275_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131275_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131275_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131275_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131275_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131275_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131275_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131275_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131275_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131275_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131275_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131275_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131275_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131275_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131275_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131275_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131275_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131275_total_iter /
                (ctx->futhark_mc_segmap_parloop_131275_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131275_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131275_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131275_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131267            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131267_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131267_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131267_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131267_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131267_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131267_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131267_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131267_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131267_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131267_iter[i] /
                    (ctx->futhark_mc_segmap_task_131267_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131267_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131273     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131273_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131273_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131273_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131273_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131273_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131273_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131273_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131273_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131318         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131318_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131318_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131318_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131318_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131318_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131318_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131318_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131318_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131318_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131318_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131318_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131318_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131318_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131318_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131318_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131318_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131318_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131318_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131318_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131318_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131318_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131318_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131318_total_iter /
                (ctx->futhark_mc_segmap_parloop_131318_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131318_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131318_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131318_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131329         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131329_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131329_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131329_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131329_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131329_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131329_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131329_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131329_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131329_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131329_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131329_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131329_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131329_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131329_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131329_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131329_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131329_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131329_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131329_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131329_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131329_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131329_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131329_total_iter /
                (ctx->futhark_mc_segmap_parloop_131329_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131329_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131329_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131329_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131327            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131327_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131327_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131327_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131327_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131327_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131327_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131327_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131327_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131327_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131327_iter[i] /
                    (ctx->futhark_mc_segmap_task_131327_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131327_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131323         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131323_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131323_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131323_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131323_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131323_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131323_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131323_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131323_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131323_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131323_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131323_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131323_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131323_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131323_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131323_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131323_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131323_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131323_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131323_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131323_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131323_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131323_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131323_total_iter /
                (ctx->futhark_mc_segmap_parloop_131323_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131323_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131323_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131323_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131316            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131316_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131316_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131316_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131316_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131316_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131316_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131316_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131316_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131316_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131316_iter[i] /
                    (ctx->futhark_mc_segmap_task_131316_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131316_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131321     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131321_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131321_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131321_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131321_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131321_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131321_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131321_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131321_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131321_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131321_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131321_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131321_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131333         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131333_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131333_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131333_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131333_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131333_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131333_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131333_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131333_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131333_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131333_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131333_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131333_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131333_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131333_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131333_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131333_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131333_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131333_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131333_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131333_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131333_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131333_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131333_total_iter /
                (ctx->futhark_mc_segmap_parloop_131333_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131333_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131333_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131333_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131342         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131342_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131342_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131342_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131342_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131342_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131342_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131342_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131342_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131342_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131342_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131342_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131342_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131342_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131342_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131342_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131342_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131342_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131342_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131342_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131342_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131342_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131342_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131342_total_iter /
                (ctx->futhark_mc_segmap_parloop_131342_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131342_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131342_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131342_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131350 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131350_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131350_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131350_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131350_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131350_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131350_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131350_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131350_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131350_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131350_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131350_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131350_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131350_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131350_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131350_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131350_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131350_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131350_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131350_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131350_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131350_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131347            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131347_runs[i],
                    (long) ctx->futhark_mc_segred_task_131347_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131347_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131347_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131347_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131347_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131347_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131347_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131347_iter[i],
                    (long) ctx->futhark_mc_segred_task_131347_iter[i] /
                    (ctx->futhark_mc_segred_task_131347_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131347_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131355 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131355_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131355_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131355_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131355_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131355_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131355_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131355_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131355_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131355_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131355_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131355_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131355_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131355_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131355_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131355_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131355_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131355_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131355_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131355_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131355_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131355_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131352            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131352_runs[i],
                    (long) ctx->futhark_mc_segred_task_131352_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131352_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131352_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131352_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131352_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131352_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131352_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131352_iter[i],
                    (long) ctx->futhark_mc_segred_task_131352_iter[i] /
                    (ctx->futhark_mc_segred_task_131352_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131352_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131345         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131345_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131345_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131345_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131345_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131345_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131345_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131345_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131345_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131345_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131345_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131345_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131345_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131345_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131345_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131345_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131345_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131345_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131345_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131345_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131345_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131345_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131345_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131345_total_iter /
                (ctx->futhark_mc_segmap_parloop_131345_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131345_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131345_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131345_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131340            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131340_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131340_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131340_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131340_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131340_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131340_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131340_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131340_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131340_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131340_iter[i] /
                    (ctx->futhark_mc_segmap_task_131340_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131340_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131343     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131343_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131343_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131343_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131343_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131343_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131343_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131343_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131343_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131343_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131343_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131343_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131343_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131337         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131337_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131337_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131337_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131337_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131337_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131337_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131337_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131337_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131337_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131337_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131337_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131337_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131337_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131337_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131337_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131337_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131337_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131337_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131337_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131337_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131337_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131337_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131337_total_iter /
                (ctx->futhark_mc_segmap_parloop_131337_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131337_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131337_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131337_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131331            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131331_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131331_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131331_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131331_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131331_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131331_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131331_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131331_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131331_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131331_iter[i] /
                    (ctx->futhark_mc_segmap_task_131331_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131331_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131335     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131335_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131335_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131335_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131335_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131335_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131335_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131335_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131335_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131335_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131335_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131335_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131335_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131359         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131359_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131359_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131359_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131359_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131359_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131359_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131359_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131359_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131359_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131359_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131359_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131359_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131359_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131359_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131359_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131359_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131359_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131359_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131359_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131359_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131359_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131359_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131359_total_iter /
                (ctx->futhark_mc_segmap_parloop_131359_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131359_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131359_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131359_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131370         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131370_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131370_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131370_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131370_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131370_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131370_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131370_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131370_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131370_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131370_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131370_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131370_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131370_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131370_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131370_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131370_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131370_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131370_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131370_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131370_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131370_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131370_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131370_total_iter /
                (ctx->futhark_mc_segmap_parloop_131370_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131370_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131370_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131370_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131380 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131380_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131380_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131380_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131380_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131380_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131380_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131380_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131380_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131380_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131380_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131380_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131380_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131380_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131380_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131380_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131380_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131380_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131380_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131380_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131380_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131380_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131375            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131375_runs[i],
                    (long) ctx->futhark_mc_segred_task_131375_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131375_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131375_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131375_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131375_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131375_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131375_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131375_iter[i],
                    (long) ctx->futhark_mc_segred_task_131375_iter[i] /
                    (ctx->futhark_mc_segred_task_131375_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131375_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131386 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131386_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131386_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131386_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131386_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131386_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131386_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131386_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131386_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131386_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131386_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131386_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131386_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131386_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131386_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131386_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131386_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131386_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131386_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131386_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131386_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131386_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131382            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131382_runs[i],
                    (long) ctx->futhark_mc_segred_task_131382_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131382_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131382_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131382_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131382_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131382_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131382_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131382_iter[i],
                    (long) ctx->futhark_mc_segred_task_131382_iter[i] /
                    (ctx->futhark_mc_segred_task_131382_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131382_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131373         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131373_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131373_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131373_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131373_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131373_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131373_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131373_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131373_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131373_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131373_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131373_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131373_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131373_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131373_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131373_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131373_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131373_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131373_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131373_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131373_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131373_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131373_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131373_total_iter /
                (ctx->futhark_mc_segmap_parloop_131373_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131373_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131373_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131373_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131368            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131368_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131368_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131368_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131368_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131368_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131368_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131368_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131368_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131368_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131368_iter[i] /
                    (ctx->futhark_mc_segmap_task_131368_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131368_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131371     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131371_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131371_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131371_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131371_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131371_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131371_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131371_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131371_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131371_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131371_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131371_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131371_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131364         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131364_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131364_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131364_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131364_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131364_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131364_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131364_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131364_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131364_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131364_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131364_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131364_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131364_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131364_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131364_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131364_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131364_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131364_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131364_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131364_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131364_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131364_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131364_total_iter /
                (ctx->futhark_mc_segmap_parloop_131364_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131364_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131364_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131364_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131357            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131357_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131357_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131357_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131357_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131357_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131357_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131357_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131357_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131357_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131357_iter[i] /
                    (ctx->futhark_mc_segmap_task_131357_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131357_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131362     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131362_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131362_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131362_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131362_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131362_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131362_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131362_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131362_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131362_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131362_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131362_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131362_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131390         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131390_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131390_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131390_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131390_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131390_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131390_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131390_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131390_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131390_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131390_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131390_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131390_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131390_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131390_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131390_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131390_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131390_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131390_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131390_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131390_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131390_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131390_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131390_total_iter /
                (ctx->futhark_mc_segmap_parloop_131390_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131390_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131390_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131390_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131401         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131401_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131401_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131401_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131401_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131401_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131401_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131401_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131401_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131401_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131401_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131401_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131401_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131401_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131401_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131401_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131401_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131401_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131401_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131401_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131401_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131401_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131401_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131401_total_iter /
                (ctx->futhark_mc_segmap_parloop_131401_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131401_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131401_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131401_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131413 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131413_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131413_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131413_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131413_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131413_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131413_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131413_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131413_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131413_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131413_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131413_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131413_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131413_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131413_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131413_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131413_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131413_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131413_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131413_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131413_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131413_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131406            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131406_runs[i],
                    (long) ctx->futhark_mc_segred_task_131406_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131406_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131406_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131406_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131406_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131406_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131406_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131406_iter[i],
                    (long) ctx->futhark_mc_segred_task_131406_iter[i] /
                    (ctx->futhark_mc_segred_task_131406_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131406_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131419 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131419_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131419_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131419_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131419_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131419_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131419_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131419_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131419_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131419_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131419_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131419_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131419_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131419_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131419_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131419_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131419_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131419_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131419_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131419_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131419_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131419_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131415            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131415_runs[i],
                    (long) ctx->futhark_mc_segred_task_131415_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131415_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131415_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131415_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131415_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131415_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131415_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131415_iter[i],
                    (long) ctx->futhark_mc_segred_task_131415_iter[i] /
                    (ctx->futhark_mc_segred_task_131415_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131415_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131404         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131404_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131404_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131404_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131404_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131404_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131404_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131404_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131404_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131404_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131404_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131404_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131404_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131404_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131404_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131404_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131404_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131404_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131404_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131404_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131404_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131404_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131404_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131404_total_iter /
                (ctx->futhark_mc_segmap_parloop_131404_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131404_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131404_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131404_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131399            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131399_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131399_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131399_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131399_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131399_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131399_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131399_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131399_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131399_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131399_iter[i] /
                    (ctx->futhark_mc_segmap_task_131399_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131399_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131402     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131402_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131402_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131402_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131402_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131402_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131402_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131402_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131402_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131402_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131402_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131402_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131402_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131395         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131395_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131395_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131395_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131395_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131395_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131395_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131395_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131395_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131395_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131395_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131395_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131395_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131395_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131395_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131395_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131395_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131395_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131395_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131395_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131395_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131395_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131395_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131395_total_iter /
                (ctx->futhark_mc_segmap_parloop_131395_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131395_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131395_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131395_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131388            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131388_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131388_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131388_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131388_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131388_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131388_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131388_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131388_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131388_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131388_iter[i] /
                    (ctx->futhark_mc_segmap_task_131388_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131388_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131393     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131393_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131393_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131393_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131393_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131393_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131393_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131393_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131393_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131393_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131393_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131393_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131393_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131423         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131423_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131423_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131423_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131423_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131423_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131423_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131423_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131423_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131423_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131423_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131423_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131423_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131423_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131423_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131423_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131423_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131423_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131423_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131423_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131423_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131423_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131423_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131423_total_iter /
                (ctx->futhark_mc_segmap_parloop_131423_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131423_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131423_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131423_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131433         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131433_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131433_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131433_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131433_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131433_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131433_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131433_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131433_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131433_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131433_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131433_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131433_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131433_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131433_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131433_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131433_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131433_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131433_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131433_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131433_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131433_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131433_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131433_total_iter /
                (ctx->futhark_mc_segmap_parloop_131433_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131433_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131433_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131433_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131443 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131443_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131443_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131443_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131443_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131443_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131443_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131443_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131443_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131443_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131443_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131443_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131443_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131443_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131443_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131443_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131443_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131443_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131443_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131443_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131443_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131443_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131440            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131440_runs[i],
                    (long) ctx->futhark_mc_segred_task_131440_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131440_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131440_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131440_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131440_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131440_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131440_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131440_iter[i],
                    (long) ctx->futhark_mc_segred_task_131440_iter[i] /
                    (ctx->futhark_mc_segred_task_131440_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131440_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131448 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131448_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131448_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131448_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131448_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131448_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131448_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131448_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131448_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131448_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131448_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131448_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131448_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131448_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131448_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131448_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131448_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131448_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131448_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131448_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131448_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131448_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131445            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131445_runs[i],
                    (long) ctx->futhark_mc_segred_task_131445_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131445_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131445_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131445_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131445_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131445_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131445_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131445_iter[i],
                    (long) ctx->futhark_mc_segred_task_131445_iter[i] /
                    (ctx->futhark_mc_segred_task_131445_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131445_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131437         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131437_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131437_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131437_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131437_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131437_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131437_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131437_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131437_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131437_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131437_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131437_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131437_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131437_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131437_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131437_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131437_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131437_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131437_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131437_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131437_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131437_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131437_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131437_total_iter /
                (ctx->futhark_mc_segmap_parloop_131437_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131437_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131437_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131437_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131431            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131431_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131431_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131431_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131431_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131431_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131431_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131431_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131431_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131431_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131431_iter[i] /
                    (ctx->futhark_mc_segmap_task_131431_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131431_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131435     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131435_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131435_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131435_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131435_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131435_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131435_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131435_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131435_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131435_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131435_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131435_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131435_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131428         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131428_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131428_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131428_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131428_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131428_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131428_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131428_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131428_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131428_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131428_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131428_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131428_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131428_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131428_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131428_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131428_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131428_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131428_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131428_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131428_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131428_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131428_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131428_total_iter /
                (ctx->futhark_mc_segmap_parloop_131428_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131428_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131428_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131428_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131421            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131421_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131421_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131421_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131421_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131421_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131421_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131421_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131421_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131421_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131421_iter[i] /
                    (ctx->futhark_mc_segmap_task_131421_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131421_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131426     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131426_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131426_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131426_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131426_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131426_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131426_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131426_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131426_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131426_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131426_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131426_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131426_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131452         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131452_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131452_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131452_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131452_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131452_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131452_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131452_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131452_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131452_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131452_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131452_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131452_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131452_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131452_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131452_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131452_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131452_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131452_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131452_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131452_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131452_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131452_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131452_total_iter /
                (ctx->futhark_mc_segmap_parloop_131452_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131452_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131452_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131452_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131465         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131465_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131465_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131465_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131465_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131465_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131465_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131465_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131465_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131465_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131465_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131465_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131465_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131465_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131465_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131465_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131465_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131465_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131465_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131465_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131465_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131465_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131465_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131465_total_iter /
                (ctx->futhark_mc_segmap_parloop_131465_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131465_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131465_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131465_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131479 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131479_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131479_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131479_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131479_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131479_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131479_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131479_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131479_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131479_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131479_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131479_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131479_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131479_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131479_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131479_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131479_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131479_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131479_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131479_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131479_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131479_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131474            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131474_runs[i],
                    (long) ctx->futhark_mc_segred_task_131474_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131474_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131474_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131474_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131474_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131474_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131474_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131474_iter[i],
                    (long) ctx->futhark_mc_segred_task_131474_iter[i] /
                    (ctx->futhark_mc_segred_task_131474_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131474_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131485 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131485_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131485_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131485_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131485_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131485_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131485_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131485_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131485_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131485_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131485_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131485_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131485_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131485_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131485_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131485_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131485_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131485_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131485_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131485_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131485_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131485_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131481            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131481_runs[i],
                    (long) ctx->futhark_mc_segred_task_131481_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131481_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131481_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131481_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131481_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131481_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131481_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131481_iter[i],
                    (long) ctx->futhark_mc_segred_task_131481_iter[i] /
                    (ctx->futhark_mc_segred_task_131481_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131481_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131470         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131470_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131470_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131470_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131470_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131470_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131470_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131470_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131470_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131470_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131470_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131470_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131470_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131470_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131470_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131470_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131470_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131470_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131470_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131470_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131470_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131470_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131470_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131470_total_iter /
                (ctx->futhark_mc_segmap_parloop_131470_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131470_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131470_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131470_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131463            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131463_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131463_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131463_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131463_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131463_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131463_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131463_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131463_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131463_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131463_iter[i] /
                    (ctx->futhark_mc_segmap_task_131463_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131463_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131468     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131468_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131468_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131468_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131468_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131468_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131468_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131468_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131468_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131468_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131468_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131468_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131468_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131459         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131459_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131459_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131459_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131459_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131459_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131459_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131459_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131459_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131459_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131459_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131459_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131459_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131459_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131459_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131459_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131459_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131459_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131459_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131459_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131459_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131459_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131459_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131459_total_iter /
                (ctx->futhark_mc_segmap_parloop_131459_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131459_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131459_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131459_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131450            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131450_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131450_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131450_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131450_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131450_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131450_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131450_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131450_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131450_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131450_iter[i] /
                    (ctx->futhark_mc_segmap_task_131450_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131450_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131457     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131457_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131457_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131457_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131457_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131457_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131457_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131457_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131457_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131457_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131457_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131457_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131457_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131489         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131489_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131489_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131489_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131489_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131489_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131489_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131489_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131489_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131489_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131489_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131489_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131489_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131489_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131489_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131489_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131489_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131489_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131489_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131489_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131489_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131489_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131489_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131489_total_iter /
                (ctx->futhark_mc_segmap_parloop_131489_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131489_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131489_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131489_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131504         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131504_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131504_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131504_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131504_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131504_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131504_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131504_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131504_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131504_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131504_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131504_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131504_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131504_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131504_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131504_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131504_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131504_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131504_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131504_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131504_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131504_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131504_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131504_total_iter /
                (ctx->futhark_mc_segmap_parloop_131504_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131504_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131504_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131504_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131519         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131519_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131519_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131519_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131519_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131519_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131519_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131519_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131519_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131519_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131519_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131519_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131519_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131519_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131519_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131519_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131519_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131519_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131519_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131519_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131519_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131519_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131519_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131519_total_iter /
                (ctx->futhark_mc_segmap_parloop_131519_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131519_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131519_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131519_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131517            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131517_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131517_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131517_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131517_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131517_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131517_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131517_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131517_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131517_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131517_iter[i] /
                    (ctx->futhark_mc_segmap_task_131517_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131517_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131528 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131528_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131528_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131528_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131528_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131528_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131528_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131528_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131528_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131528_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131528_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131528_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131528_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131528_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131528_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131528_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131528_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131528_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131528_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131528_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131528_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131528_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131521            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131521_runs[i],
                    (long) ctx->futhark_mc_segred_task_131521_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131521_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131521_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131521_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131521_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131521_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131521_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131521_iter[i],
                    (long) ctx->futhark_mc_segred_task_131521_iter[i] /
                    (ctx->futhark_mc_segred_task_131521_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131521_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131534 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131534_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131530            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131530_runs[i],
                    (long) ctx->futhark_mc_segred_task_131530_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131530_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131530_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131530_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131530_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131530_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131530_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131530_iter[i],
                    (long) ctx->futhark_mc_segred_task_131530_iter[i] /
                    (ctx->futhark_mc_segred_task_131530_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131530_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131511         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131511_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131511_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131511_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131511_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131511_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131511_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131511_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131511_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131511_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131511_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131511_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131511_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131511_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131511_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131511_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131511_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131511_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131511_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131511_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131511_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131511_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131511_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131511_total_iter /
                (ctx->futhark_mc_segmap_parloop_131511_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131511_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131511_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131511_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131502            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131502_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131502_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131502_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131502_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131502_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131502_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131502_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131502_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131502_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131502_iter[i] /
                    (ctx->futhark_mc_segmap_task_131502_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131502_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131509     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131509_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131509_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131509_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131509_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131509_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131509_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131509_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131509_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131509_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131509_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131509_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131509_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131498         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131498_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131498_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131498_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131498_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131498_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131498_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131498_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131498_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131498_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131498_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131498_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131498_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131498_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131498_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131498_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131498_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131498_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131498_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131498_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131498_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131498_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131498_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131498_total_iter /
                (ctx->futhark_mc_segmap_parloop_131498_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131498_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131498_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131498_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131487            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131487_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131487_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131487_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131487_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131487_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131487_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131487_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131487_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131487_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131487_iter[i] /
                    (ctx->futhark_mc_segmap_task_131487_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131487_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131496     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131496_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131496_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131496_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131496_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131496_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131496_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131496_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131496_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131496_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131496_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131496_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131496_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131538         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131538_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131538_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131538_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131538_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131538_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131538_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131538_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131538_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131538_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131538_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131538_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131538_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131538_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131538_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131538_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131538_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131538_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131538_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131538_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131538_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131538_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131538_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131538_total_iter /
                (ctx->futhark_mc_segmap_parloop_131538_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131538_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131538_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131538_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131547         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131547_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131547_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131547_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131547_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131547_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131547_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131547_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131547_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131547_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131547_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131547_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131547_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131547_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131547_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131547_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131547_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131547_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131547_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131547_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131547_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131547_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131547_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131547_total_iter /
                (ctx->futhark_mc_segmap_parloop_131547_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131547_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131547_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131547_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131545            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131545_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131545_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131545_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131545_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131545_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131545_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131545_iter[i] /
                    (ctx->futhark_mc_segmap_task_131545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131545_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131542         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131542_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131542_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131542_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131542_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131542_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131542_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131542_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131542_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131542_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131542_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131542_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131542_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131542_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131542_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131542_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131542_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131542_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131542_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131542_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131542_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131542_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131542_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131542_total_iter /
                (ctx->futhark_mc_segmap_parloop_131542_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131542_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131542_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131542_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131536            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131536_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131536_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131536_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131536_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131536_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131536_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131536_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131536_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131536_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131536_iter[i] /
                    (ctx->futhark_mc_segmap_task_131536_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131536_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131540     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131540_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131540_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131540_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131540_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131540_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131540_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131540_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131540_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131540_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131540_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131540_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131540_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131551         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131551_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131551_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131551_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131551_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131551_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131551_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131551_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131551_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131551_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131551_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131551_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131551_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131551_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131551_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131551_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131551_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131551_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131551_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131551_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131551_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131551_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131551_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131551_total_iter /
                (ctx->futhark_mc_segmap_parloop_131551_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131551_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131551_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131551_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131564         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131564_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131564_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131564_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131564_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131564_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131564_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131564_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131564_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131564_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131564_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131564_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131564_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131564_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131564_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131564_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131564_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131564_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131564_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131564_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131564_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131564_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131564_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131564_total_iter /
                (ctx->futhark_mc_segmap_parloop_131564_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131564_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131564_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131564_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131562            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131562_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131562_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131562_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131562_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131562_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131562_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131562_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131562_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131562_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131562_iter[i] /
                    (ctx->futhark_mc_segmap_task_131562_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131562_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131568         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131568_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131568_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131568_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131568_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131568_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131568_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131568_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131568_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131568_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131568_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131568_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131568_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131568_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131568_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131568_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131568_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131568_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131568_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131568_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131568_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131568_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131568_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131568_total_iter /
                (ctx->futhark_mc_segmap_parloop_131568_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131568_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131568_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131568_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131566            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131566_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131566_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131566_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131566_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131566_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131566_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131566_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131566_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131566_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131566_iter[i] /
                    (ctx->futhark_mc_segmap_task_131566_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131566_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131557         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131557_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131557_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131557_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131557_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131557_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131557_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131557_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131557_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131557_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131557_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131557_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131557_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131557_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131557_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131557_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131557_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131557_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131557_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131557_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131557_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131557_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131557_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131557_total_iter /
                (ctx->futhark_mc_segmap_parloop_131557_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131557_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131557_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131557_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131549            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131549_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131549_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131549_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131549_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131549_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131549_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131549_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131549_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131549_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131549_iter[i] /
                    (ctx->futhark_mc_segmap_task_131549_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131549_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131555     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131555_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131555_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131555_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131555_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131555_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131555_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131555_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131555_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131555_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131555_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131555_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131555_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131572         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131572_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131572_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131572_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131572_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131572_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131572_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131572_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131572_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131572_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131572_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131572_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131572_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131572_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131572_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131572_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131572_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131572_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131572_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131572_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131572_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131572_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131572_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131572_total_iter /
                (ctx->futhark_mc_segmap_parloop_131572_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131572_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131572_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131572_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131581         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131581_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131581_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131581_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131581_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131581_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131581_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131581_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131581_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131581_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131581_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131581_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131581_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131581_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131581_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131581_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131581_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131581_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131581_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131581_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131581_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131581_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131581_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131581_total_iter /
                (ctx->futhark_mc_segmap_parloop_131581_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131581_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131581_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131581_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131589 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131589_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131586            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131586_runs[i],
                    (long) ctx->futhark_mc_segred_task_131586_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131586_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131586_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131586_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131586_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131586_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131586_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131586_iter[i],
                    (long) ctx->futhark_mc_segred_task_131586_iter[i] /
                    (ctx->futhark_mc_segred_task_131586_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131586_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131594 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131594_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131594_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131594_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131594_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131594_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131594_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131594_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131594_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131594_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131594_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131594_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131594_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131594_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131594_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131594_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131594_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131594_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131594_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131594_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131594_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131594_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131591            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131591_runs[i],
                    (long) ctx->futhark_mc_segred_task_131591_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131591_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131591_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131591_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131591_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131591_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131591_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131591_iter[i],
                    (long) ctx->futhark_mc_segred_task_131591_iter[i] /
                    (ctx->futhark_mc_segred_task_131591_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131591_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131584         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131584_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131584_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131584_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131584_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131584_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131584_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131584_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131584_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131584_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131584_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131584_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131584_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131584_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131584_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131584_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131584_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131584_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131584_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131584_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131584_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131584_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131584_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131584_total_iter /
                (ctx->futhark_mc_segmap_parloop_131584_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131584_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131584_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131584_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131579            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131579_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131579_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131579_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131579_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131579_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131579_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131579_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131579_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131579_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131579_iter[i] /
                    (ctx->futhark_mc_segmap_task_131579_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131579_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131582     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131582_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131582_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131582_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131582_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131582_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131582_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131582_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131582_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131582_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131582_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131582_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131582_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131576         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131576_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131576_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131576_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131576_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131576_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131576_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131576_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131576_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131576_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131576_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131576_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131576_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131576_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131576_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131576_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131576_total_iter /
                (ctx->futhark_mc_segmap_parloop_131576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131576_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131576_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131576_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131570            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131570_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131570_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131570_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131570_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131570_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131570_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131570_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131570_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131570_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131570_iter[i] /
                    (ctx->futhark_mc_segmap_task_131570_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131570_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131574     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131574_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131574_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131574_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131574_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131574_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131574_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131574_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131574_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131598         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131598_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131598_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131598_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131598_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131598_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131598_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131598_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131598_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131598_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131598_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131598_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131598_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131598_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131598_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131598_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131598_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131598_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131598_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131598_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131598_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131598_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131598_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131598_total_iter /
                (ctx->futhark_mc_segmap_parloop_131598_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131598_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131598_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131598_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131609         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131609_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131609_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131609_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131609_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131609_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131609_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131609_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131609_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131609_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131609_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131609_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131609_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131609_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131609_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131609_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131609_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131609_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131609_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131609_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131609_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131609_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131609_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131609_total_iter /
                (ctx->futhark_mc_segmap_parloop_131609_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131609_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131609_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131609_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131619 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131619_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131619_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131619_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131619_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131619_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131619_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131619_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131619_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131619_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131619_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131619_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131619_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131619_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131619_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131619_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131619_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131619_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131619_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131619_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131619_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131619_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131614            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131614_runs[i],
                    (long) ctx->futhark_mc_segred_task_131614_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131614_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131614_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131614_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131614_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131614_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131614_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131614_iter[i],
                    (long) ctx->futhark_mc_segred_task_131614_iter[i] /
                    (ctx->futhark_mc_segred_task_131614_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131614_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131625 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131625_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131625_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131625_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131625_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131625_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131625_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131625_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131625_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131625_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131625_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131625_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131625_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131625_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131625_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131625_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131625_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131625_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131625_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131625_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131625_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131625_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131621            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131621_runs[i],
                    (long) ctx->futhark_mc_segred_task_131621_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131621_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131621_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131621_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131621_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131621_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131621_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131621_iter[i],
                    (long) ctx->futhark_mc_segred_task_131621_iter[i] /
                    (ctx->futhark_mc_segred_task_131621_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131621_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131612         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131612_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131612_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131612_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131612_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131612_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131612_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131612_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131612_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131612_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131612_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131612_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131612_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131612_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131612_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131612_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131612_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131612_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131612_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131612_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131612_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131612_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131612_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131612_total_iter /
                (ctx->futhark_mc_segmap_parloop_131612_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131612_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131612_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131612_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131607            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131607_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131607_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131607_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131607_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131607_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131607_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131607_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131607_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131607_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131607_iter[i] /
                    (ctx->futhark_mc_segmap_task_131607_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131607_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131610     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131610_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131610_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131610_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131610_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131610_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131610_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131610_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131610_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131610_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131610_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131610_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131610_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131603         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131603_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131603_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131603_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131603_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131603_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131603_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131603_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131603_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131603_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131603_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131603_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131603_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131603_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131603_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131603_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131603_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131603_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131603_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131603_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131603_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131603_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131603_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131603_total_iter /
                (ctx->futhark_mc_segmap_parloop_131603_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131603_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131603_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131603_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131596            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131596_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131596_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131596_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131596_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131596_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131596_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131596_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131596_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131596_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131596_iter[i] /
                    (ctx->futhark_mc_segmap_task_131596_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131596_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131601     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131601_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131601_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131601_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131601_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131601_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131601_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131601_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131601_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131601_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131601_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131601_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131601_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131629         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131629_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131629_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131629_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131629_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131629_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131629_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131629_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131629_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131629_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131629_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131629_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131629_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131629_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131629_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131629_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131629_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131629_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131629_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131629_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131629_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131629_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131629_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131629_total_iter /
                (ctx->futhark_mc_segmap_parloop_131629_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131629_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131629_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131629_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131640         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131640_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131640_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131640_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131640_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131640_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131640_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131640_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131640_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131640_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131640_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131640_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131640_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131640_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131640_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131640_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131640_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131640_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131640_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131640_total_iter /
                (ctx->futhark_mc_segmap_parloop_131640_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131640_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131640_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131640_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131652 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131652_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131652_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131652_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131652_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131652_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131652_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131652_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131652_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131652_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131652_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131652_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131652_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131652_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131652_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131652_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131652_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131652_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131652_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131652_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131652_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131652_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131645            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131645_runs[i],
                    (long) ctx->futhark_mc_segred_task_131645_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131645_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131645_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131645_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131645_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131645_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131645_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131645_iter[i],
                    (long) ctx->futhark_mc_segred_task_131645_iter[i] /
                    (ctx->futhark_mc_segred_task_131645_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131645_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131658 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131658_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131658_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131658_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131658_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131658_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131658_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131658_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131658_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131658_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131658_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131658_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131658_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131658_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131658_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131658_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131658_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131658_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131658_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131658_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131658_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131658_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131654            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131654_runs[i],
                    (long) ctx->futhark_mc_segred_task_131654_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131654_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131654_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131654_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131654_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131654_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131654_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131654_iter[i],
                    (long) ctx->futhark_mc_segred_task_131654_iter[i] /
                    (ctx->futhark_mc_segred_task_131654_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131654_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131643         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131643_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131643_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131643_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131643_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131643_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131643_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131643_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131643_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131643_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131643_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131643_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131643_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131643_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131643_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131643_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131643_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131643_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131643_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131643_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131643_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131643_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131643_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131643_total_iter /
                (ctx->futhark_mc_segmap_parloop_131643_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131643_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131643_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131643_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131638            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131638_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131638_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131638_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131638_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131638_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131638_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131638_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131638_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131638_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131638_iter[i] /
                    (ctx->futhark_mc_segmap_task_131638_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131638_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131641     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131641_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131641_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131641_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131641_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131641_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131641_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131641_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131641_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131641_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131641_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131641_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131641_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131634         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131634_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131634_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131634_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131634_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131634_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131634_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131634_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131634_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131634_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131634_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131634_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131634_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131634_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131634_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131634_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131634_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131634_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131634_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131634_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131634_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131634_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131634_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131634_total_iter /
                (ctx->futhark_mc_segmap_parloop_131634_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131634_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131634_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131634_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131627            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131627_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131627_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131627_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131627_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131627_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131627_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131627_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131627_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131627_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131627_iter[i] /
                    (ctx->futhark_mc_segmap_task_131627_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131627_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131632     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131632_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131632_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131632_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131632_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131632_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131632_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131632_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131632_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131632_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131632_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131632_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131632_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131662         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131662_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131662_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131662_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131662_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131662_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131662_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131662_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131662_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131662_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131662_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131662_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131662_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131662_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131662_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131662_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131662_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131662_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131662_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131662_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131662_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131662_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131662_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131662_total_iter /
                (ctx->futhark_mc_segmap_parloop_131662_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131662_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131662_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131662_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131672         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131672_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131672_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131672_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131672_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131672_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131672_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131672_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131672_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131672_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131672_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131672_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131672_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131672_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131672_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131672_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131672_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131672_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131672_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131672_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131672_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131672_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131672_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131672_total_iter /
                (ctx->futhark_mc_segmap_parloop_131672_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131672_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131672_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131672_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131682 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131682_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131682_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131682_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131682_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131682_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131682_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131682_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131682_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131682_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131682_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131682_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131682_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131682_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131682_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131682_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131682_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131682_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131682_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131682_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131682_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131682_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131679            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131679_runs[i],
                    (long) ctx->futhark_mc_segred_task_131679_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131679_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131679_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131679_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131679_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131679_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131679_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131679_iter[i],
                    (long) ctx->futhark_mc_segred_task_131679_iter[i] /
                    (ctx->futhark_mc_segred_task_131679_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131679_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131687 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131687_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131687_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131687_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131687_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131687_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131687_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131687_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131687_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131687_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131687_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131687_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131687_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131687_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131687_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131687_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131687_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131687_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131687_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131687_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131687_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131687_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131684            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131684_runs[i],
                    (long) ctx->futhark_mc_segred_task_131684_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131684_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131684_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131684_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131684_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131684_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131684_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131684_iter[i],
                    (long) ctx->futhark_mc_segred_task_131684_iter[i] /
                    (ctx->futhark_mc_segred_task_131684_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131684_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131676         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131676_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131676_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131676_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131676_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131676_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131676_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131676_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131676_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131676_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131676_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131676_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131676_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131676_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131676_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131676_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131676_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131676_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131676_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131676_total_iter /
                (ctx->futhark_mc_segmap_parloop_131676_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131676_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131676_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131676_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131670            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131670_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131670_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131670_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131670_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131670_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131670_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131670_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131670_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131670_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131670_iter[i] /
                    (ctx->futhark_mc_segmap_task_131670_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131670_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131674     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131674_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131674_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131674_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131674_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131674_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131674_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131674_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131674_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131674_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131674_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131674_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131674_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131667         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131667_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131667_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131667_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131667_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131667_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131667_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131667_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131667_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131667_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131667_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131667_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131667_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131667_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131667_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131667_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131667_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131667_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131667_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131667_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131667_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131667_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131667_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131667_total_iter /
                (ctx->futhark_mc_segmap_parloop_131667_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131667_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131667_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131667_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131660            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131660_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131660_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131660_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131660_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131660_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131660_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131660_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131660_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131660_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131660_iter[i] /
                    (ctx->futhark_mc_segmap_task_131660_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131660_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131665     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131665_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131665_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131665_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131665_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131665_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131665_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131665_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131665_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131665_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131665_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131665_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131665_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131691         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131691_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131691_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131691_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131691_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131691_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131691_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131691_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131691_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131691_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131691_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131691_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131691_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131691_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131691_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131691_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131691_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131691_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131691_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131691_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131691_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131691_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131691_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131691_total_iter /
                (ctx->futhark_mc_segmap_parloop_131691_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131691_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131691_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131691_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131704         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131704_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131704_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131704_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131704_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131704_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131704_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131704_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131704_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131704_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131704_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131704_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131704_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131704_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131704_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131704_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131704_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131704_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131704_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131704_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131704_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131704_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131704_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131704_total_iter /
                (ctx->futhark_mc_segmap_parloop_131704_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131704_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131704_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131704_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131718 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131718_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131718_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131718_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131718_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131718_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131718_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131718_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131718_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131718_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131718_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131718_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131718_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131718_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131718_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131718_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131718_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131718_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131718_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131718_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131718_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131718_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131713            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131713_runs[i],
                    (long) ctx->futhark_mc_segred_task_131713_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131713_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131713_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131713_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131713_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131713_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131713_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131713_iter[i],
                    (long) ctx->futhark_mc_segred_task_131713_iter[i] /
                    (ctx->futhark_mc_segred_task_131713_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131713_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131724 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131724_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131724_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131724_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131724_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131724_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131724_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131724_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131724_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131724_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131724_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131724_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131724_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131724_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131724_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131724_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131724_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131724_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131724_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131724_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131724_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131724_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131720            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131720_runs[i],
                    (long) ctx->futhark_mc_segred_task_131720_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131720_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131720_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131720_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131720_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131720_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131720_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131720_iter[i],
                    (long) ctx->futhark_mc_segred_task_131720_iter[i] /
                    (ctx->futhark_mc_segred_task_131720_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131720_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131709         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131709_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131709_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131709_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131709_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131709_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131709_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131709_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131709_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131709_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131709_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131709_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131709_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131709_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131709_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131709_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131709_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131709_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131709_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131709_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131709_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131709_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131709_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131709_total_iter /
                (ctx->futhark_mc_segmap_parloop_131709_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131709_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131709_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131709_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131702            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131702_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131702_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131702_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131702_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131702_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131702_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131702_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131702_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131702_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131702_iter[i] /
                    (ctx->futhark_mc_segmap_task_131702_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131702_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131707     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131707_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131707_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131707_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131707_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131707_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131707_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131707_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131707_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131707_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131707_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131707_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131707_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131698         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131698_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131698_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131698_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131698_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131698_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131698_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131698_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131698_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131698_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131698_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131698_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131698_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131698_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131698_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131698_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131698_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131698_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131698_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131698_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131698_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131698_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131698_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131698_total_iter /
                (ctx->futhark_mc_segmap_parloop_131698_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131698_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131698_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131698_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131689            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131689_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131689_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131689_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131689_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131689_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131689_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131689_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131689_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131689_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131689_iter[i] /
                    (ctx->futhark_mc_segmap_task_131689_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131689_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131696     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131696_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131696_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131696_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131696_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131696_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131696_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131696_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131696_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131696_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131696_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131696_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131696_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131728         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131728_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131728_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131728_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131728_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131728_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131728_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131728_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131728_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131728_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131728_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131728_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131728_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131728_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131728_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131728_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131728_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131728_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131728_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131728_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131728_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131728_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131728_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131728_total_iter /
                (ctx->futhark_mc_segmap_parloop_131728_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131728_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131728_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131728_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131743         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131743_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131743_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131743_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131743_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131743_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131743_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131743_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131743_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131743_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131743_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131743_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131743_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131743_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131743_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131743_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131743_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131743_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131743_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131743_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131743_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131743_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131743_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131743_total_iter /
                (ctx->futhark_mc_segmap_parloop_131743_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131743_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131743_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131743_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131758         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131758_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131758_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131758_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131758_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131758_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131758_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131758_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131758_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131758_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131758_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131758_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131758_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131758_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131758_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131758_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131758_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131758_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131758_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131758_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131758_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131758_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131758_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131758_total_iter /
                (ctx->futhark_mc_segmap_parloop_131758_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131758_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131758_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131758_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131756            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131756_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131756_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131756_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131756_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131756_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131756_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131756_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131756_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131756_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131756_iter[i] /
                    (ctx->futhark_mc_segmap_task_131756_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131756_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131767 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131767_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131767_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131767_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131767_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131767_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131767_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131767_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131767_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131767_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131767_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131767_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131767_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131767_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131767_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131767_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131767_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131767_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131767_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131767_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131767_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131767_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131760            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131760_runs[i],
                    (long) ctx->futhark_mc_segred_task_131760_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131760_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131760_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131760_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131760_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131760_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131760_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131760_iter[i],
                    (long) ctx->futhark_mc_segred_task_131760_iter[i] /
                    (ctx->futhark_mc_segred_task_131760_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131760_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131773 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131773_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131773_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131773_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131773_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131773_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131773_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131773_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131773_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131773_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131773_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131773_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131773_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131773_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131773_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131773_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131773_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131773_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131773_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131773_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131773_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131773_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131769            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131769_runs[i],
                    (long) ctx->futhark_mc_segred_task_131769_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131769_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131769_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131769_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131769_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131769_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131769_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131769_iter[i],
                    (long) ctx->futhark_mc_segred_task_131769_iter[i] /
                    (ctx->futhark_mc_segred_task_131769_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131769_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131750         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131750_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131750_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131750_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131750_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131750_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131750_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131750_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131750_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131750_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131750_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131750_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131750_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131750_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131750_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131750_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131750_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131750_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131750_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131750_total_iter /
                (ctx->futhark_mc_segmap_parloop_131750_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131750_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131750_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131750_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131741            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131741_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131741_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131741_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131741_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131741_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131741_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131741_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131741_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131741_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131741_iter[i] /
                    (ctx->futhark_mc_segmap_task_131741_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131741_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131748     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131748_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131748_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131748_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131748_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131748_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131748_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131748_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131748_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131737         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131737_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131737_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131737_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131737_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131737_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131737_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131737_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131737_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131737_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131737_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131737_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131737_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131737_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131737_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131737_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131737_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131737_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131737_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131737_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131737_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131737_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131737_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131737_total_iter /
                (ctx->futhark_mc_segmap_parloop_131737_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131737_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131737_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131737_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131726            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131726_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131726_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131726_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131726_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131726_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131726_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131726_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131726_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131726_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131726_iter[i] /
                    (ctx->futhark_mc_segmap_task_131726_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131726_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131735     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131735_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131735_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131735_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131735_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131735_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131735_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131735_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131735_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131735_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131735_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131735_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131735_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131777         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131777_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131777_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131777_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131777_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131777_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131777_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131777_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131777_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131777_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131777_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131777_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131777_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131777_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131777_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131777_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131777_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131777_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131777_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131777_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131777_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131777_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131777_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131777_total_iter /
                (ctx->futhark_mc_segmap_parloop_131777_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131777_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131777_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131777_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131786         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131786_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131786_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131786_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131786_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131786_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131786_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131786_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131786_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131786_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131786_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131786_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131786_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131786_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131786_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131786_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131786_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131786_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131786_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131786_total_iter /
                (ctx->futhark_mc_segmap_parloop_131786_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131786_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131786_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131786_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131784            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131784_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131784_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131784_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131784_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131784_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131784_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131784_iter[i] /
                    (ctx->futhark_mc_segmap_task_131784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131784_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131781         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131781_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131781_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131781_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131781_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131781_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131781_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131781_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131781_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131781_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131781_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131781_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131781_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131781_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131781_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131781_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131781_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131781_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131781_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131781_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131781_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131781_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131781_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131781_total_iter /
                (ctx->futhark_mc_segmap_parloop_131781_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131781_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131781_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131781_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131775            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131775_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131775_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131775_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131775_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131775_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131775_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131775_iter[i] /
                    (ctx->futhark_mc_segmap_task_131775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131775_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131779     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131779_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131779_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131779_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131779_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131779_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131779_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131779_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131779_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131779_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131779_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131779_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131779_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131790         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131790_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131790_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131790_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131790_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131790_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131790_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131790_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131790_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131790_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131790_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131790_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131790_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131790_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131790_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131790_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131790_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131790_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131790_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131790_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131790_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131790_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131790_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131790_total_iter /
                (ctx->futhark_mc_segmap_parloop_131790_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131790_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131790_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131790_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131799         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131799_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131799_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131799_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131799_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131799_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131799_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131799_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131799_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131799_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131799_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131799_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131799_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131799_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131799_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131799_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131799_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131799_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131799_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131799_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131799_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131799_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131799_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131799_total_iter /
                (ctx->futhark_mc_segmap_parloop_131799_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131799_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131799_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131799_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131797            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131797_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131797_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131797_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131797_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131797_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131797_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131797_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131797_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131797_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131797_iter[i] /
                    (ctx->futhark_mc_segmap_task_131797_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131797_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131794         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131794_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131794_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131794_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131794_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131794_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131794_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131794_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131794_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131794_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131794_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131794_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131794_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131794_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131794_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131794_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131794_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131794_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131794_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131794_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131794_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131794_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131794_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131794_total_iter /
                (ctx->futhark_mc_segmap_parloop_131794_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131794_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131794_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131794_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131788            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131788_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131788_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131788_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131788_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131788_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131788_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131788_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131788_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131788_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131788_iter[i] /
                    (ctx->futhark_mc_segmap_task_131788_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131788_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131792     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131792_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131792_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131792_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131792_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131792_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131792_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131792_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131792_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131792_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131792_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131792_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131792_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131803         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131803_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131803_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131803_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131803_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131803_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131803_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131803_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131803_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131803_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131803_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131803_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131803_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131803_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131803_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131803_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131803_total_iter /
                (ctx->futhark_mc_segmap_parloop_131803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131803_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131803_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131803_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131812         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131812_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131812_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131812_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131812_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131812_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131812_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131812_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131812_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131812_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131812_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131812_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131812_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131812_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131812_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131812_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131812_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131812_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131812_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131812_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131812_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131812_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131812_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131812_total_iter /
                (ctx->futhark_mc_segmap_parloop_131812_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131812_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131812_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131812_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131810            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131810_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131810_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131810_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131810_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131810_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131810_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131810_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131810_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131810_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131810_iter[i] /
                    (ctx->futhark_mc_segmap_task_131810_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131810_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131807         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131807_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131807_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131807_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131807_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131807_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131807_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131807_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131807_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131807_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131807_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131807_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131807_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131807_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131807_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131807_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131807_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131807_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131807_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131807_total_iter /
                (ctx->futhark_mc_segmap_parloop_131807_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131807_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131807_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131807_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131801            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131801_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131801_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131801_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131801_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131801_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131801_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131801_iter[i] /
                    (ctx->futhark_mc_segmap_task_131801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131801_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131805     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131805_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131805_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131805_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131805_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131805_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131805_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131805_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131805_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131816         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131816_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131816_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131816_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131816_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131816_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131816_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131816_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131816_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131816_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131816_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131816_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131816_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131816_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131816_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131816_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131816_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131816_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131816_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131816_total_iter /
                (ctx->futhark_mc_segmap_parloop_131816_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131816_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131816_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131816_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131841   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131841_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131841_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131841_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131841_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131841_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131841_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131841_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131841_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131841_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131841_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131841_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131841_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131841_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131841_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131841_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131841_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131841_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131841_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131841_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131841_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131841_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131843   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131843_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131843_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131843_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131843_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131843_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131843_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131843_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131843_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131843_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131843_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131843_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131843_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131843_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131843_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131843_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131843_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131843_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131843_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131843_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131843_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131843_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131835           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131835_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131835_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131835_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131835_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131835_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131835_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131835_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131835_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131835_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131835_iter[i] /
                    (ctx->futhark_mc_segscan_task_131835_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131835_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131847         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131847_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131847_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131847_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131847_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131847_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131847_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131847_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131847_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131847_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131847_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131847_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131847_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131847_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131847_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131847_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131847_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131847_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131847_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131847_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131847_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131847_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131847_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131847_total_iter /
                (ctx->futhark_mc_segmap_parloop_131847_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131847_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131847_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131847_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131845            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131845_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131845_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131845_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131845_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131845_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131845_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131845_iter[i] /
                    (ctx->futhark_mc_segmap_task_131845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131845_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131826         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131826_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131826_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131826_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131826_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131826_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131826_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131826_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131826_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131826_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131826_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131826_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131826_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131826_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131826_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131826_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131826_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131826_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131826_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131826_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131826_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131826_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131826_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131826_total_iter /
                (ctx->futhark_mc_segmap_parloop_131826_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131826_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131826_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131826_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131814            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131814_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131814_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131814_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131814_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131814_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131814_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131814_iter[i] /
                    (ctx->futhark_mc_segmap_task_131814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131814_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131824     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131824_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131824_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131824_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131824_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131824_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131824_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131824_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131824_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131824_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131824_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131824_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131824_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131851         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131851_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131851_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131851_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131851_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131851_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131851_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131851_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131851_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131851_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131851_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131851_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131851_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131851_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131851_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131851_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131851_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131851_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131851_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131851_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131851_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131851_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131851_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131851_total_iter /
                (ctx->futhark_mc_segmap_parloop_131851_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131851_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131851_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131851_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131859 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131859_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131859_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131859_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131859_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131859_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131859_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131859_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131859_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131859_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131859_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131859_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131859_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131859_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131859_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131859_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131859_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131859_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131859_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131859_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131859_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131859_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131856            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131856_runs[i],
                    (long) ctx->futhark_mc_segred_task_131856_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131856_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131856_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131856_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131856_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131856_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131856_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131856_iter[i],
                    (long) ctx->futhark_mc_segred_task_131856_iter[i] /
                    (ctx->futhark_mc_segred_task_131856_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131856_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131854         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131854_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131854_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131854_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131854_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131854_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131854_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131854_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131854_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131854_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131854_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131854_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131854_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131854_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131854_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131854_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131854_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131854_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131854_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131854_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131854_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131854_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131854_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131854_total_iter /
                (ctx->futhark_mc_segmap_parloop_131854_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131854_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131854_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131854_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131849            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131849_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131849_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131849_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131849_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131849_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131849_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131849_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131849_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131849_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131849_iter[i] /
                    (ctx->futhark_mc_segmap_task_131849_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131849_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131852     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131852_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131852_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131852_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131852_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131852_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131852_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131852_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131852_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131852_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131852_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131852_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131852_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131863         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131863_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131863_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131863_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131863_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131863_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131863_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131863_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131863_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131863_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131863_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131863_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131863_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131863_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131863_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131863_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131863_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131863_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131863_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131863_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131863_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131863_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131863_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131863_total_iter /
                (ctx->futhark_mc_segmap_parloop_131863_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131863_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131863_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131863_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131872         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131872_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131872_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131872_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131872_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131872_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131872_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131872_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131872_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131872_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131872_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131872_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131872_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131872_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131872_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131872_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131872_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131872_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131872_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131872_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131872_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131872_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131872_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131872_total_iter /
                (ctx->futhark_mc_segmap_parloop_131872_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131872_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131872_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131872_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131870            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131870_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131870_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131870_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131870_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131870_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131870_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131870_iter[i] /
                    (ctx->futhark_mc_segmap_task_131870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131870_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131867         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131867_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131867_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131867_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131867_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131867_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131867_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131867_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131867_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131867_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131867_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131867_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131867_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131867_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131867_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131867_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131867_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131867_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131867_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131867_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131867_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131867_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131867_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131867_total_iter /
                (ctx->futhark_mc_segmap_parloop_131867_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131867_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131867_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131867_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131861            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131861_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131861_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131861_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131861_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131861_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131861_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131861_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131861_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131861_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131861_iter[i] /
                    (ctx->futhark_mc_segmap_task_131861_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131861_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131865     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131865_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131865_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131865_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131865_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131865_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131865_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131865_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131865_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131865_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131865_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131865_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131865_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131876         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131876_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131876_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131876_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131876_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131876_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131876_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131876_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131876_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131876_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131876_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131876_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131876_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131876_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131876_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131876_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131876_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131876_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131876_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131876_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131876_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131876_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131876_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131876_total_iter /
                (ctx->futhark_mc_segmap_parloop_131876_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131876_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131876_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131876_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131885         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131885_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131885_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131885_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131885_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131885_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131885_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131885_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131885_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131885_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131885_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131885_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131885_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131885_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131885_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131885_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131885_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131885_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131885_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131885_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131885_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131885_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131885_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131885_total_iter /
                (ctx->futhark_mc_segmap_parloop_131885_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131885_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131885_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131885_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131883            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131883_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131883_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131883_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131883_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131883_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131883_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131883_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131883_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131883_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131883_iter[i] /
                    (ctx->futhark_mc_segmap_task_131883_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131883_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131880         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131880_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131880_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131880_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131880_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131880_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131880_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131880_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131880_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131880_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131880_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131880_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131880_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131880_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131880_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131880_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131880_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131880_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131880_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131880_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131880_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131880_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131880_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131880_total_iter /
                (ctx->futhark_mc_segmap_parloop_131880_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131880_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131880_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131880_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131874            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131874_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131874_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131874_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131874_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131874_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131874_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131874_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131874_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131874_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131874_iter[i] /
                    (ctx->futhark_mc_segmap_task_131874_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131874_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131878     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131878_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131878_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131878_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131878_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131878_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131878_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131878_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131878_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131878_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131878_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131878_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131878_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_131063,
                             struct memblock *mem_out_p_131064,
                             struct memblock *mem_out_p_131065,
                             struct memblock Y_mem_121917, int64_t m_114517,
                             int64_t n_114518, int64_t n_p_114520,
                             int64_t t_window_114521, int64_t l_window_114522,
                             int64_t t_degree_114523, int64_t l_degree_114524,
                             int64_t t_jump_114525, int64_t l_jump_114526,
                             int64_t inner_114527, int64_t outer_114528,
                             int64_t jump_threshold_114529,
                             int64_t max_group_sizze_114530);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_131088 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_i_114594;
    char *free_Y_mem_121917;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
};
struct futhark_mc_segmap_parloop_struct_131090 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_i_114594;
    char *free_Y_mem_121917;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
};
static int futhark_mc_segmap_parloop_131091(void *args, int64_t start,
                                            int64_t end, int flat_tid_116745,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131090
    *futhark_mc_segmap_parloop_struct_131090 =
    (struct futhark_mc_segmap_parloop_struct_131090 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131090->ctx;
    uint64_t futhark_mc_segmap_parloop_131091_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131091_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131090->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131090->free_n_114518;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131090->free_i_114594;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131090->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131090->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131090->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131090->free_mem_121960,
                                  .size =0, .references =NULL};
    size_t mem_121926_cached_sizze_131092 = 0;
    char *mem_121926 = NULL;
    size_t mem_121941_cached_sizze_131093 = 0;
    char *mem_121941 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123832 = start;
    
    if (mem_121926_cached_sizze_131092 < (size_t) bytes_121918) {
        mem_121926 = realloc(mem_121926, bytes_121918);
        mem_121926_cached_sizze_131092 = bytes_121918;
    }
    if (mem_121941_cached_sizze_131093 < (size_t) bytes_121918) {
        mem_121941 = realloc(mem_121941, bytes_121918);
        mem_121941_cached_sizze_131093 = bytes_121918;
    }
    for (; iter_123832 < end; iter_123832++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123851 = m_114517;
        int64_t gtid_116746 = iter_123832;
        int64_t remnant_123852 = iter_123832 - gtid_116746;
        int64_t discard_121271;
        int64_t scanacc_123834 = (int64_t) 0;
        
        for (int64_t i_123833 = 0; i_123833 < n_114518; i_123833++) {
            float x_123836 = ((float *) Y_mem_121917.mem)[gtid_116746 *
                                                          n_114518 + i_123833];
            bool isnan_res_123837;
            
            isnan_res_123837 = futrts_isnan32(x_123836);
            
            bool defunc_0_p_res_123838 = !isnan_res_123837;
            int64_t defunc_0_f_res_123839 =
                    btoi_bool_i64(defunc_0_p_res_123838);
            int64_t defunc_1_op_res_123840 = add64(defunc_0_f_res_123839,
                                                   scanacc_123834);
            
            ((int64_t *) mem_121926)[i_123833] = defunc_1_op_res_123840;
            
            int64_t scanacc_tmp_123853 = defunc_1_op_res_123840;
            
            scanacc_123834 = scanacc_tmp_123853;
        }
        discard_121271 = scanacc_123834;
        
        int64_t last_res_114611 = ((int64_t *) mem_121926)[i_114594];
        
        for (int64_t i_123855 = 0; i_123855 < n_114518; i_123855++) {
            ((int64_t *) mem_121941)[i_123855] = (int64_t) -1;
        }
        for (int64_t write_iter_123842 = 0; write_iter_123842 < n_114518;
             write_iter_123842++) {
            float write_iv_123844 = ((float *) Y_mem_121917.mem)[gtid_116746 *
                                                                 n_114518 +
                                                                 write_iter_123842];
            bool isnan_res_123845;
            
            isnan_res_123845 = futrts_isnan32(write_iv_123844);
            
            bool defunc_0_p_res_123846 = !isnan_res_123845;
            int64_t defunc_1_f_res_123847;
            
            if (defunc_0_p_res_123846) {
                int64_t write_iv_123848 =
                        ((int64_t *) mem_121926)[write_iter_123842];
                int64_t defunc_1_f_res_t_res_123849 = sub64(write_iv_123848,
                                                            (int64_t) 1);
                
                defunc_1_f_res_123847 = defunc_1_f_res_t_res_123849;
            } else {
                defunc_1_f_res_123847 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_123847) &&
                slt64(defunc_1_f_res_123847, n_114518)) {
                ((int64_t *) mem_121941)[defunc_1_f_res_123847] =
                    write_iter_123842;
            }
        }
        memmove(mem_121957.mem + gtid_116746 * n_114518 * (int64_t) 8,
                mem_121941 + (int64_t) 0, n_114518 * (int64_t) 8);
        ((int64_t *) mem_121960.mem)[gtid_116746] = last_res_114611;
    }
    
  cleanup:
    { }
    free(mem_121926);
    free(mem_121941);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131091_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131091_end -
                 futhark_mc_segmap_parloop_131091_start;
        
        ctx->futhark_mc_segmap_parloop_131091_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131091_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131091_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131089(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116745 = tid;
    int num_tasks_123831 = info.nsubtasks;
    struct futhark_mc_task_131088 *futhark_mc_task_131088 =
                                  (struct futhark_mc_task_131088 *) args;
    struct futhark_context *ctx = futhark_mc_task_131088->ctx;
    uint64_t futhark_mc_segmap_task_131089_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131089_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131088->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131088->free_n_114518;
    int64_t i_114594 = futhark_mc_task_131088->free_i_114594;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131088->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121918 = futhark_mc_task_131088->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131088->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131088->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t iter_123832;
    struct futhark_mc_segmap_parloop_struct_131090
    futhark_mc_segmap_parloop_struct_131090;
    
    futhark_mc_segmap_parloop_struct_131090.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131090.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131090.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131090.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131090.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131090.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131090.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131090.free_mem_121960 = mem_121960.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131091_task;
    
    futhark_mc_segmap_parloop_131091_task.name =
        "futhark_mc_segmap_parloop_131091";
    futhark_mc_segmap_parloop_131091_task.fn = futhark_mc_segmap_parloop_131091;
    futhark_mc_segmap_parloop_131091_task.args =
        &futhark_mc_segmap_parloop_struct_131090;
    futhark_mc_segmap_parloop_131091_task.iterations = iterations;
    futhark_mc_segmap_parloop_131091_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131091_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131091_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131091_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131091_task);
    
    if (futhark_mc_segmap_parloop_131091_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131091_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131091_total_end -
                 futhark_mc_segmap_parloop_131091_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131091_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131091_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131091_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131089_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131089_end -
                 futhark_mc_segmap_task_131089_start;
        
        ctx->futhark_mc_segmap_task_131089_runs[tid]++;
        ctx->futhark_mc_segmap_task_131089_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131089_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131095 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_i_114594;
    char *free_Y_mem_121917;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
};
struct futhark_mc_task_131099 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116748;
    char *free_Y_mem_121917;
    char *free_mem_121920;
};
struct futhark_mc_scan_stage_1_parloop_struct_131102 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116748;
    char *free_Y_mem_121917;
    char *free_mem_121920;
};
static int futhark_mc_scan_stage_1_parloop_131103(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_116749, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131102
    *futhark_mc_scan_stage_1_parloop_struct_131102 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131102 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131102->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131103_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131103_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_scan_stage_1_parloop_struct_131102->free_n_114518;
    int64_t gtid_116748 =
            futhark_mc_scan_stage_1_parloop_struct_131102->free_gtid_116748;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_131102->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131102->free_mem_121920,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123874 = start;
    int64_t x_123858;
    int64_t x_123859;
    
    x_123858 = (int64_t) 0;
    for (; iter_123874 < end; iter_123874++) {
        int64_t gtid_116750 = iter_123874;
        
        // stage 1 scan body
        {
            float x_123861 = ((float *) Y_mem_121917.mem)[gtid_116748 *
                                                          n_114518 +
                                                          gtid_116750];
            bool isnan_res_123862;
            
            isnan_res_123862 = futrts_isnan32(x_123861);
            
            bool defunc_0_p_res_123863 = !isnan_res_123862;
            int64_t defunc_0_f_res_123864 =
                    btoi_bool_i64(defunc_0_p_res_123863);
            
            // write mapped values results to memory
            { }
            x_123858 = x_123858;
            // Read next values
            {
                x_123859 = defunc_0_f_res_123864;
            }
            
            int64_t defunc_1_op_res_123860 = add64(x_123858, x_123859);
            
            ((int64_t *) mem_121920.mem)[gtid_116750] = defunc_1_op_res_123860;
            x_123858 = defunc_1_op_res_123860;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131103_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131103_end -
                 futhark_mc_scan_stage_1_parloop_131103_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131103_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131103_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131103_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131104 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116748;
    char *free_Y_mem_121917;
    char *free_mem_121920;
};
static int futhark_mc_scan_stage_3_parloop_131105(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_116749, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131104
    *futhark_mc_scan_stage_3_parloop_struct_131104 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131104 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131104->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131105_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131105_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_scan_stage_3_parloop_struct_131104->free_n_114518;
    int64_t gtid_116748 =
            futhark_mc_scan_stage_3_parloop_struct_131104->free_gtid_116748;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_131104->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131104->free_mem_121920,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123886 = start;
    int64_t x_123883;
    int64_t x_123884;
    
    if (iter_123886 == (int64_t) 0) {
        x_123883 = (int64_t) 0;
    } else {
        x_123883 = ((int64_t *) mem_121920.mem)[iter_123886 - (int64_t) 1];
    }
    for (; iter_123886 < end; iter_123886++) {
        int64_t gtid_116750 = iter_123886;
        
        // stage 3 scan body
        {
            float x_123861 = ((float *) Y_mem_121917.mem)[gtid_116748 *
                                                          n_114518 +
                                                          gtid_116750];
            bool isnan_res_123862;
            
            isnan_res_123862 = futrts_isnan32(x_123861);
            
            bool defunc_0_p_res_123863 = !isnan_res_123862;
            int64_t defunc_0_f_res_123864 =
                    btoi_bool_i64(defunc_0_p_res_123863);
            
            x_123883 = x_123883;
            x_123884 = defunc_0_f_res_123864;
            
            int64_t defunc_1_op_res_123885 = add64(x_123883, x_123884);
            
            ((int64_t *) mem_121920.mem)[gtid_116750] = defunc_1_op_res_123885;
            x_123883 = defunc_1_op_res_123885;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131105_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131105_end -
                 futhark_mc_scan_stage_3_parloop_131105_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131105_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131105_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131105_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131100(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116749 = tid;
    int num_tasks_123873 = info.nsubtasks;
    struct futhark_mc_task_131099 *futhark_mc_task_131099 =
                                  (struct futhark_mc_task_131099 *) args;
    struct futhark_context *ctx = futhark_mc_task_131099->ctx;
    uint64_t futhark_mc_segscan_task_131100_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131100_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131099->free_n_114518;
    int64_t gtid_116748 = futhark_mc_task_131099->free_gtid_116748;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131099->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_task_131099->free_mem_121920,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_123880_cached_sizze_131101 = 0;
    char *scan_stage_2_accum_mem_123880 = NULL;
    int64_t iter_123874;
    struct futhark_mc_scan_stage_1_parloop_struct_131102
    futhark_mc_scan_stage_1_parloop_struct_131102;
    
    futhark_mc_scan_stage_1_parloop_struct_131102.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131102.free_n_114518 = n_114518;
    futhark_mc_scan_stage_1_parloop_struct_131102.free_gtid_116748 =
        gtid_116748;
    futhark_mc_scan_stage_1_parloop_struct_131102.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_scan_stage_1_parloop_struct_131102.free_mem_121920 =
        mem_121920.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131103_task;
    
    futhark_mc_scan_stage_1_parloop_131103_task.name =
        "futhark_mc_scan_stage_1_parloop_131103";
    futhark_mc_scan_stage_1_parloop_131103_task.fn =
        futhark_mc_scan_stage_1_parloop_131103;
    futhark_mc_scan_stage_1_parloop_131103_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131102;
    futhark_mc_scan_stage_1_parloop_131103_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131103_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131103_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131103_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131103_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131103_task);
    
    if (futhark_mc_scan_stage_1_parloop_131103_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131103_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131103_total_end -
                 futhark_mc_scan_stage_1_parloop_131103_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131103_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131103_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131103_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_123873)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_123875;
        int64_t x_123876;
        int64_t offset_123878 = (int64_t) 0;
        int64_t offset_index_123879 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_123880_cached_sizze_131101 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_123880 =
                realloc(scan_stage_2_accum_mem_123880, (int64_t) 8);
            scan_stage_2_accum_mem_123880_cached_sizze_131101 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_123880)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_123882 = 0; i_123882 < num_tasks_123873 - 1;
             i_123882++) {
            offset_123878 = squot64(n_114518, sext_i32_i64(num_tasks_123873));
            if (slt64(sext_i32_i64(i_123882), srem64(n_114518,
                                                     sext_i32_i64(num_tasks_123873)))) {
                offset_123878 += (int64_t) 1;
            }
            offset_index_123879 += offset_123878;
            
            int64_t gtid_116750 = offset_index_123879;
            float x_123861 = ((float *) Y_mem_121917.mem)[gtid_116748 *
                                                          n_114518 +
                                                          gtid_116750];
            bool isnan_res_123862;
            
            isnan_res_123862 = futrts_isnan32(x_123861);
            
            bool defunc_0_p_res_123863 = !isnan_res_123862;
            int64_t defunc_0_f_res_123864 =
                    btoi_bool_i64(defunc_0_p_res_123863);
            
            // Read carry in
            {
                x_123875 =
                    ((int64_t *) scan_stage_2_accum_mem_123880)[(int64_t) 0];
            }
            // Read next values
            {
                x_123876 = ((int64_t *) mem_121920.mem)[offset_index_123879 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_123877 = add64(x_123875, x_123876);
            
            ((int64_t *) mem_121920.mem)[offset_index_123879 - (int64_t) 1] =
                defunc_1_op_res_123877;
            ((int64_t *) scan_stage_2_accum_mem_123880)[(int64_t) 0] =
                defunc_1_op_res_123877;
        }
        
        int64_t iter_123886 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131104
        futhark_mc_scan_stage_3_parloop_struct_131104;
        
        futhark_mc_scan_stage_3_parloop_struct_131104.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131104.free_n_114518 = n_114518;
        futhark_mc_scan_stage_3_parloop_struct_131104.free_gtid_116748 =
            gtid_116748;
        futhark_mc_scan_stage_3_parloop_struct_131104.free_Y_mem_121917 =
            Y_mem_121917.mem;
        futhark_mc_scan_stage_3_parloop_struct_131104.free_mem_121920 =
            mem_121920.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131105_task;
        
        futhark_mc_scan_stage_3_parloop_131105_task.name =
            "futhark_mc_scan_stage_3_parloop_131105";
        futhark_mc_scan_stage_3_parloop_131105_task.fn =
            futhark_mc_scan_stage_3_parloop_131105;
        futhark_mc_scan_stage_3_parloop_131105_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131104;
        futhark_mc_scan_stage_3_parloop_131105_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131105_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131105_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131105_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131105_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131105_task);
        
        if (futhark_mc_scan_stage_3_parloop_131105_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131105_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131105_total_end -
                     futhark_mc_scan_stage_3_parloop_131105_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131105_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131105_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131105_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_123880);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131100_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131100_end -
                 futhark_mc_segscan_task_131100_start;
        
        ctx->futhark_mc_segscan_task_131100_runs[tid]++;
        ctx->futhark_mc_segscan_task_131100_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131100_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131106 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116748;
    char *free_Y_mem_121917;
    char *free_mem_121920;
    char *free_mem_121923;
};
struct futhark_mc_segmap_parloop_struct_131108 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116748;
    char *free_Y_mem_121917;
    char *free_mem_121920;
    char *free_mem_121923;
};
static int futhark_mc_segmap_parloop_131109(void *args, int64_t start,
                                            int64_t end, int flat_tid_116751,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131108
    *futhark_mc_segmap_parloop_struct_131108 =
    (struct futhark_mc_segmap_parloop_struct_131108 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131108->ctx;
    uint64_t futhark_mc_segmap_parloop_131109_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131109_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131108->free_n_114518;
    int64_t gtid_116748 =
            futhark_mc_segmap_parloop_struct_131108->free_gtid_116748;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131108->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_segmap_parloop_struct_131108->free_mem_121920,
                                  .size =0, .references =NULL};
    struct memblock mem_121923 = {.desc ="mem_121923", .mem =
                                  futhark_mc_segmap_parloop_struct_131108->free_mem_121923,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123889 = start;
    
    for (; iter_123889 < end; iter_123889++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123892 = n_114518;
        int64_t gtid_116752 = iter_123889;
        int64_t remnant_123893 = iter_123889 - gtid_116752;
        float x_123865 = ((float *) Y_mem_121917.mem)[gtid_116748 * n_114518 +
                                                      gtid_116752];
        bool isnan_res_123866;
        
        isnan_res_123866 = futrts_isnan32(x_123865);
        
        bool defunc_0_p_res_123867 = !isnan_res_123866;
        int64_t defunc_1_f_res_123868;
        
        if (defunc_0_p_res_123867) {
            int64_t x_123890 = ((int64_t *) mem_121920.mem)[gtid_116752];
            int64_t defunc_1_f_res_t_res_123891 = sub64(x_123890, (int64_t) 1);
            
            defunc_1_f_res_123868 = defunc_1_f_res_t_res_123891;
        } else {
            defunc_1_f_res_123868 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_123868) &&
            slt64(defunc_1_f_res_123868, n_114518)) {
            ((int64_t *) mem_121923.mem)[defunc_1_f_res_123868] = gtid_116752;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131109_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131109_end -
                 futhark_mc_segmap_parloop_131109_start;
        
        ctx->futhark_mc_segmap_parloop_131109_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131109_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131109_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131107(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116751 = tid;
    int num_tasks_123888 = info.nsubtasks;
    struct futhark_mc_task_131106 *futhark_mc_task_131106 =
                                  (struct futhark_mc_task_131106 *) args;
    struct futhark_context *ctx = futhark_mc_task_131106->ctx;
    uint64_t futhark_mc_segmap_task_131107_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131107_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131106->free_n_114518;
    int64_t gtid_116748 = futhark_mc_task_131106->free_gtid_116748;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131106->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_task_131106->free_mem_121920,
                                  .size =0, .references =NULL};
    struct memblock mem_121923 = {.desc ="mem_121923", .mem =
                                  futhark_mc_task_131106->free_mem_121923,
                                  .size =0, .references =NULL};
    int64_t iter_123889;
    struct futhark_mc_segmap_parloop_struct_131108
    futhark_mc_segmap_parloop_struct_131108;
    
    futhark_mc_segmap_parloop_struct_131108.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131108.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131108.free_gtid_116748 = gtid_116748;
    futhark_mc_segmap_parloop_struct_131108.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131108.free_mem_121920 = mem_121920.mem;
    futhark_mc_segmap_parloop_struct_131108.free_mem_121923 = mem_121923.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131109_task;
    
    futhark_mc_segmap_parloop_131109_task.name =
        "futhark_mc_segmap_parloop_131109";
    futhark_mc_segmap_parloop_131109_task.fn = futhark_mc_segmap_parloop_131109;
    futhark_mc_segmap_parloop_131109_task.args =
        &futhark_mc_segmap_parloop_struct_131108;
    futhark_mc_segmap_parloop_131109_task.iterations = iterations;
    futhark_mc_segmap_parloop_131109_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131109_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131109_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131109_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131109_task);
    
    if (futhark_mc_segmap_parloop_131109_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131109_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131109_total_end -
                 futhark_mc_segmap_parloop_131109_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131109_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131109_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131109_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131107_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131107_end -
                 futhark_mc_segmap_task_131107_start;
        
        ctx->futhark_mc_segmap_task_131107_runs[tid]++;
        ctx->futhark_mc_segmap_task_131107_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131107_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131096(void *args, int64_t start,
                                            int64_t end, int flat_tid_116747,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131095
    *futhark_mc_segmap_parloop_struct_131095 =
    (struct futhark_mc_segmap_parloop_struct_131095 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131095->ctx;
    uint64_t futhark_mc_segmap_parloop_131096_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131096_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131095->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131095->free_n_114518;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131095->free_i_114594;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131095->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131095->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131095->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131095->free_mem_121960,
                                  .size =0, .references =NULL};
    size_t mem_121920_cached_sizze_131097 = 0;
    char *mem_121920 = NULL;
    size_t mem_121923_cached_sizze_131098 = 0;
    char *mem_121923 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123857 = start;
    
    if (mem_121920_cached_sizze_131097 < (size_t) bytes_121918) {
        mem_121920 = realloc(mem_121920, bytes_121918);
        mem_121920_cached_sizze_131097 = bytes_121918;
    }
    if (mem_121923_cached_sizze_131098 < (size_t) bytes_121918) {
        mem_121923 = realloc(mem_121923, bytes_121918);
        mem_121923_cached_sizze_131098 = bytes_121918;
    }
    for (; iter_123857 < end; iter_123857++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123871 = m_114517;
        int64_t gtid_116748 = iter_123857;
        int64_t remnant_123872 = iter_123857 - gtid_116748;
        int64_t flat_tid_116749 = (int64_t) 0;
        int32_t num_tasks_123873;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131099 futhark_mc_task_131099;
        
        futhark_mc_task_131099.ctx = ctx;
        futhark_mc_task_131099.free_n_114518 = n_114518;
        futhark_mc_task_131099.free_gtid_116748 = gtid_116748;
        futhark_mc_task_131099.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131099.free_mem_121920 = mem_121920;
        
        struct scheduler_segop futhark_mc_task_131099_task;
        
        futhark_mc_task_131099_task.args = &futhark_mc_task_131099;
        futhark_mc_task_131099_task.top_level_fn =
            futhark_mc_segscan_task_131100;
        futhark_mc_task_131099_task.name = "futhark_mc_segscan_task_131100";
        futhark_mc_task_131099_task.iterations = n_114518;
        futhark_mc_task_131099_task.task_time =
            &ctx->futhark_mc_segscan_task_131100_total_time;
        futhark_mc_task_131099_task.task_iter =
            &ctx->futhark_mc_segscan_task_131100_total_iter;
        futhark_mc_task_131099_task.sched = STATIC;
        futhark_mc_task_131099_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131100_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131099_task);
        
        if (futhark_mc_segscan_task_131100_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_116762 = ((int64_t *) mem_121920)[i_114594];
        
        for (int64_t i_123887 = 0; i_123887 < n_114518; i_123887++) {
            ((int64_t *) mem_121923)[i_123887] = (int64_t) -1;
        }
        
        int64_t flat_tid_116751 = (int64_t) 0;
        int32_t num_tasks_123888;
        struct futhark_mc_task_131106 futhark_mc_task_131106;
        
        futhark_mc_task_131106.ctx = ctx;
        futhark_mc_task_131106.free_n_114518 = n_114518;
        futhark_mc_task_131106.free_gtid_116748 = gtid_116748;
        futhark_mc_task_131106.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131106.free_mem_121920 = mem_121920;
        futhark_mc_task_131106.free_mem_121923 = mem_121923;
        
        struct scheduler_segop futhark_mc_task_131106_task;
        
        futhark_mc_task_131106_task.args = &futhark_mc_task_131106;
        futhark_mc_task_131106_task.top_level_fn =
            futhark_mc_segmap_task_131107;
        futhark_mc_task_131106_task.name = "futhark_mc_segmap_task_131107";
        futhark_mc_task_131106_task.iterations = n_114518;
        futhark_mc_task_131106_task.task_time =
            &ctx->futhark_mc_segmap_task_131107_total_time;
        futhark_mc_task_131106_task.task_iter =
            &ctx->futhark_mc_segmap_task_131107_total_iter;
        futhark_mc_task_131106_task.sched = STATIC;
        futhark_mc_task_131106_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131107_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131106_task);
        
        if (futhark_mc_segmap_task_131107_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121957.mem + gtid_116748 * n_114518 * (int64_t) 8,
                mem_121923 + (int64_t) 0, n_114518 * (int64_t) 8);
        ((int64_t *) mem_121960.mem)[gtid_116748] = last_res_116762;
    }
    
  cleanup:
    { }
    free(mem_121920);
    free(mem_121923);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131096_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131096_end -
                 futhark_mc_segmap_parloop_131096_start;
        
        ctx->futhark_mc_segmap_parloop_131096_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131096_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131096_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131094(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116747 = tid;
    int num_tasks_123831 = info.nsubtasks;
    struct futhark_mc_task_131088 *futhark_mc_task_131088 =
                                  (struct futhark_mc_task_131088 *) args;
    struct futhark_context *ctx = futhark_mc_task_131088->ctx;
    uint64_t futhark_mc_segmap_nested_task_131094_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131094_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131088->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131088->free_n_114518;
    int64_t i_114594 = futhark_mc_task_131088->free_i_114594;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131088->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121918 = futhark_mc_task_131088->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131088->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131088->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t iter_123857;
    struct futhark_mc_segmap_parloop_struct_131095
    futhark_mc_segmap_parloop_struct_131095;
    
    futhark_mc_segmap_parloop_struct_131095.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131095.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131095.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131095.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131095.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131095.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131095.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131095.free_mem_121960 = mem_121960.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131096_task;
    
    futhark_mc_segmap_parloop_131096_task.name =
        "futhark_mc_segmap_parloop_131096";
    futhark_mc_segmap_parloop_131096_task.fn = futhark_mc_segmap_parloop_131096;
    futhark_mc_segmap_parloop_131096_task.args =
        &futhark_mc_segmap_parloop_struct_131095;
    futhark_mc_segmap_parloop_131096_task.iterations = iterations;
    futhark_mc_segmap_parloop_131096_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131096_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131096_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131096_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131096_task);
    
    if (futhark_mc_segmap_parloop_131096_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131096_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131096_total_end -
                 futhark_mc_segmap_parloop_131096_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131096_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131096_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131096_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131094_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131094_end -
                 futhark_mc_segmap_nested_task_131094_start;
        
        ctx->futhark_mc_segmap_nested_task_131094_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131094_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131094_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131110 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_121982;
};
struct futhark_mc_segmap_parloop_struct_131112 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_121982;
};
static int futhark_mc_segmap_parloop_131113(void *args, int64_t start,
                                            int64_t end, int flat_tid_116772,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131112
    *futhark_mc_segmap_parloop_struct_131112 =
    (struct futhark_mc_segmap_parloop_struct_131112 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131112->ctx;
    uint64_t futhark_mc_segmap_parloop_131113_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131113_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131112->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131112->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131112->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131112->free_bytes_121961;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131112->free_mem_121982,
                                  .size =0, .references =NULL};
    size_t mem_121966_cached_sizze_131114 = 0;
    char *mem_121966 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123895 = start;
    
    if (mem_121966_cached_sizze_131114 < (size_t) bytes_121961) {
        mem_121966 = realloc(mem_121966, bytes_121961);
        mem_121966_cached_sizze_131114 = bytes_121961;
    }
    for (; iter_123895 < end; iter_123895++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123901 = m_114517;
        int64_t gtid_116773 = iter_123895;
        int64_t remnant_123902 = iter_123895 - gtid_116773;
        
        for (int64_t i_123896 = 0; i_123896 < n_114518; i_123896++) {
            int64_t x_123898 = ((int64_t *) mem_121957.mem)[gtid_116773 *
                                                            n_114518 +
                                                            i_123896];
            float i64_res_123899 = sitofp_i64_f32(x_123898);
            
            ((float *) mem_121966)[i_123896] = i64_res_123899;
        }
        memmove(mem_121982.mem + gtid_116773 * n_114518 * (int64_t) 4,
                mem_121966 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121966);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131113_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131113_end -
                 futhark_mc_segmap_parloop_131113_start;
        
        ctx->futhark_mc_segmap_parloop_131113_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131113_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131113_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131111(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116772 = tid;
    int num_tasks_123894 = info.nsubtasks;
    struct futhark_mc_task_131110 *futhark_mc_task_131110 =
                                  (struct futhark_mc_task_131110 *) args;
    struct futhark_context *ctx = futhark_mc_task_131110->ctx;
    uint64_t futhark_mc_segmap_task_131111_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131111_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131110->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131110->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131110->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131110->free_bytes_121961;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131110->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t iter_123895;
    struct futhark_mc_segmap_parloop_struct_131112
    futhark_mc_segmap_parloop_struct_131112;
    
    futhark_mc_segmap_parloop_struct_131112.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131112.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131112.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131112.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131112.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131112.free_mem_121982 = mem_121982.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131113_task;
    
    futhark_mc_segmap_parloop_131113_task.name =
        "futhark_mc_segmap_parloop_131113";
    futhark_mc_segmap_parloop_131113_task.fn = futhark_mc_segmap_parloop_131113;
    futhark_mc_segmap_parloop_131113_task.args =
        &futhark_mc_segmap_parloop_struct_131112;
    futhark_mc_segmap_parloop_131113_task.iterations = iterations;
    futhark_mc_segmap_parloop_131113_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131113_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131113_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131113_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131113_task);
    
    if (futhark_mc_segmap_parloop_131113_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131113_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131113_total_end -
                 futhark_mc_segmap_parloop_131113_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131113_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131113_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131113_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131111_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131111_end -
                 futhark_mc_segmap_task_131111_start;
        
        ctx->futhark_mc_segmap_task_131111_runs[tid]++;
        ctx->futhark_mc_segmap_task_131111_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131111_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131116 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_121982;
};
struct futhark_mc_task_131119 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116775;
    char *free_mem_121957;
    char *free_mem_121963;
};
struct futhark_mc_segmap_parloop_struct_131121 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116775;
    char *free_mem_121957;
    char *free_mem_121963;
};
static int futhark_mc_segmap_parloop_131122(void *args, int64_t start,
                                            int64_t end, int flat_tid_116776,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131121
    *futhark_mc_segmap_parloop_struct_131121 =
    (struct futhark_mc_segmap_parloop_struct_131121 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131121->ctx;
    uint64_t futhark_mc_segmap_parloop_131122_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131122_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131121->free_n_114518;
    int64_t gtid_116775 =
            futhark_mc_segmap_parloop_struct_131121->free_gtid_116775;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131121->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121963 = {.desc ="mem_121963", .mem =
                                  futhark_mc_segmap_parloop_struct_131121->free_mem_121963,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123910 = start;
    
    for (; iter_123910 < end; iter_123910++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123911 = n_114518;
        int64_t gtid_116777 = iter_123910;
        int64_t remnant_123912 = iter_123910 - gtid_116777;
        int64_t x_123905 = ((int64_t *) mem_121957.mem)[gtid_116775 * n_114518 +
                                                        gtid_116777];
        float i64_res_123906 = sitofp_i64_f32(x_123905);
        
        ((float *) mem_121963.mem)[gtid_116777] = i64_res_123906;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131122_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131122_end -
                 futhark_mc_segmap_parloop_131122_start;
        
        ctx->futhark_mc_segmap_parloop_131122_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131122_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131122_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131120(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116776 = tid;
    int num_tasks_123909 = info.nsubtasks;
    struct futhark_mc_task_131119 *futhark_mc_task_131119 =
                                  (struct futhark_mc_task_131119 *) args;
    struct futhark_context *ctx = futhark_mc_task_131119->ctx;
    uint64_t futhark_mc_segmap_task_131120_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131120_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131119->free_n_114518;
    int64_t gtid_116775 = futhark_mc_task_131119->free_gtid_116775;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131119->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121963 = {.desc ="mem_121963", .mem =
                                  futhark_mc_task_131119->free_mem_121963,
                                  .size =0, .references =NULL};
    int64_t iter_123910;
    struct futhark_mc_segmap_parloop_struct_131121
    futhark_mc_segmap_parloop_struct_131121;
    
    futhark_mc_segmap_parloop_struct_131121.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131121.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131121.free_gtid_116775 = gtid_116775;
    futhark_mc_segmap_parloop_struct_131121.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131121.free_mem_121963 = mem_121963.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131122_task;
    
    futhark_mc_segmap_parloop_131122_task.name =
        "futhark_mc_segmap_parloop_131122";
    futhark_mc_segmap_parloop_131122_task.fn = futhark_mc_segmap_parloop_131122;
    futhark_mc_segmap_parloop_131122_task.args =
        &futhark_mc_segmap_parloop_struct_131121;
    futhark_mc_segmap_parloop_131122_task.iterations = iterations;
    futhark_mc_segmap_parloop_131122_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131122_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131122_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131122_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131122_task);
    
    if (futhark_mc_segmap_parloop_131122_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131122_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131122_total_end -
                 futhark_mc_segmap_parloop_131122_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131122_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131122_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131122_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131120_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131120_end -
                 futhark_mc_segmap_task_131120_start;
        
        ctx->futhark_mc_segmap_task_131120_runs[tid]++;
        ctx->futhark_mc_segmap_task_131120_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131120_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131117(void *args, int64_t start,
                                            int64_t end, int flat_tid_116774,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131116
    *futhark_mc_segmap_parloop_struct_131116 =
    (struct futhark_mc_segmap_parloop_struct_131116 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131116->ctx;
    uint64_t futhark_mc_segmap_parloop_131117_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131117_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131116->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131116->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131116->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131116->free_bytes_121961;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131116->free_mem_121982,
                                  .size =0, .references =NULL};
    size_t mem_121963_cached_sizze_131118 = 0;
    char *mem_121963 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123904 = start;
    
    if (mem_121963_cached_sizze_131118 < (size_t) bytes_121961) {
        mem_121963 = realloc(mem_121963, bytes_121961);
        mem_121963_cached_sizze_131118 = bytes_121961;
    }
    for (; iter_123904 < end; iter_123904++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123907 = m_114517;
        int64_t gtid_116775 = iter_123904;
        int64_t remnant_123908 = iter_123904 - gtid_116775;
        int64_t flat_tid_116776 = (int64_t) 0;
        int32_t num_tasks_123909;
        struct futhark_mc_task_131119 futhark_mc_task_131119;
        
        futhark_mc_task_131119.ctx = ctx;
        futhark_mc_task_131119.free_n_114518 = n_114518;
        futhark_mc_task_131119.free_gtid_116775 = gtid_116775;
        futhark_mc_task_131119.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131119.free_mem_121963 = mem_121963;
        
        struct scheduler_segop futhark_mc_task_131119_task;
        
        futhark_mc_task_131119_task.args = &futhark_mc_task_131119;
        futhark_mc_task_131119_task.top_level_fn =
            futhark_mc_segmap_task_131120;
        futhark_mc_task_131119_task.name = "futhark_mc_segmap_task_131120";
        futhark_mc_task_131119_task.iterations = n_114518;
        futhark_mc_task_131119_task.task_time =
            &ctx->futhark_mc_segmap_task_131120_total_time;
        futhark_mc_task_131119_task.task_iter =
            &ctx->futhark_mc_segmap_task_131120_total_iter;
        futhark_mc_task_131119_task.sched = STATIC;
        futhark_mc_task_131119_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131120_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131119_task);
        
        if (futhark_mc_segmap_task_131120_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121982.mem + gtid_116775 * n_114518 * (int64_t) 4,
                mem_121963 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121963);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131117_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131117_end -
                 futhark_mc_segmap_parloop_131117_start;
        
        ctx->futhark_mc_segmap_parloop_131117_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131117_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131117_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131115(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116774 = tid;
    int num_tasks_123894 = info.nsubtasks;
    struct futhark_mc_task_131110 *futhark_mc_task_131110 =
                                  (struct futhark_mc_task_131110 *) args;
    struct futhark_context *ctx = futhark_mc_task_131110->ctx;
    uint64_t futhark_mc_segmap_nested_task_131115_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131115_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131110->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131110->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131110->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131110->free_bytes_121961;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131110->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t iter_123904;
    struct futhark_mc_segmap_parloop_struct_131116
    futhark_mc_segmap_parloop_struct_131116;
    
    futhark_mc_segmap_parloop_struct_131116.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131116.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131116.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131116.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131116.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131116.free_mem_121982 = mem_121982.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131117_task;
    
    futhark_mc_segmap_parloop_131117_task.name =
        "futhark_mc_segmap_parloop_131117";
    futhark_mc_segmap_parloop_131117_task.fn = futhark_mc_segmap_parloop_131117;
    futhark_mc_segmap_parloop_131117_task.args =
        &futhark_mc_segmap_parloop_struct_131116;
    futhark_mc_segmap_parloop_131117_task.iterations = iterations;
    futhark_mc_segmap_parloop_131117_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131117_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131117_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131117_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131117_task);
    
    if (futhark_mc_segmap_parloop_131117_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131117_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131117_total_end -
                 futhark_mc_segmap_parloop_131117_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131117_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131117_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131117_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131115_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131115_end -
                 futhark_mc_segmap_nested_task_131115_start;
        
        ctx->futhark_mc_segmap_nested_task_131115_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131115_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131115_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131123 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_i_114594;
    int64_t free_bytes_121983;
    char *free_mem_122004;
};
struct futhark_mc_segmap_parloop_struct_131125 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_i_114594;
    int64_t free_bytes_121983;
    char *free_mem_122004;
};
static int futhark_mc_segmap_parloop_131126(void *args, int64_t start,
                                            int64_t end, int flat_tid_116782,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131125
    *futhark_mc_segmap_parloop_struct_131125 =
    (struct futhark_mc_segmap_parloop_struct_131125 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131125->ctx;
    uint64_t futhark_mc_segmap_parloop_131126_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131126_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131125->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131125->free_css_chunk_len_114564;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131125->free_i_114594;
    int64_t bytes_121983 =
            futhark_mc_segmap_parloop_struct_131125->free_bytes_121983;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131125->free_mem_122004,
                                  .size =0, .references =NULL};
    size_t mem_121988_cached_sizze_131127 = 0;
    char *mem_121988 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123914 = start;
    
    if (mem_121988_cached_sizze_131127 < (size_t) bytes_121983) {
        mem_121988 = realloc(mem_121988, bytes_121983);
        mem_121988_cached_sizze_131127 = bytes_121983;
    }
    for (; iter_123914 < end; iter_123914++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123922 = n_p_114520;
        int64_t gtid_116783 = iter_123914;
        int64_t remnant_123923 = iter_123914 - gtid_116783;
        
        for (int64_t i_123915 = 0; i_123915 < css_chunk_len_114564;
             i_123915++) {
            int64_t y_123917 = mul64(n_p_114520, i_123915);
            int64_t res_idx_123918 = add64(y_123917, gtid_116783);
            bool cond_123919 = slt64(i_114594, res_idx_123918);
            int64_t defunc_0_f_res_123920;
            
            if (cond_123919) {
                defunc_0_f_res_123920 = (int64_t) -1;
            } else {
                defunc_0_f_res_123920 = res_idx_123918;
            }
            ((int64_t *) mem_121988)[i_123915] = defunc_0_f_res_123920;
        }
        memmove(mem_122004.mem + gtid_116783 * css_chunk_len_114564 *
                (int64_t) 8, mem_121988 + (int64_t) 0, css_chunk_len_114564 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_121988);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131126_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131126_end -
                 futhark_mc_segmap_parloop_131126_start;
        
        ctx->futhark_mc_segmap_parloop_131126_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131126_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131126_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131124(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116782 = tid;
    int num_tasks_123913 = info.nsubtasks;
    struct futhark_mc_task_131123 *futhark_mc_task_131123 =
                                  (struct futhark_mc_task_131123 *) args;
    struct futhark_context *ctx = futhark_mc_task_131123->ctx;
    uint64_t futhark_mc_segmap_task_131124_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131124_start = get_wall_time();
    
    int64_t n_p_114520 = futhark_mc_task_131123->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131123->free_css_chunk_len_114564;
    int64_t i_114594 = futhark_mc_task_131123->free_i_114594;
    int64_t bytes_121983 = futhark_mc_task_131123->free_bytes_121983;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131123->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t iter_123914;
    struct futhark_mc_segmap_parloop_struct_131125
    futhark_mc_segmap_parloop_struct_131125;
    
    futhark_mc_segmap_parloop_struct_131125.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131125.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131125.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131125.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131125.free_bytes_121983 = bytes_121983;
    futhark_mc_segmap_parloop_struct_131125.free_mem_122004 = mem_122004.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131126_task;
    
    futhark_mc_segmap_parloop_131126_task.name =
        "futhark_mc_segmap_parloop_131126";
    futhark_mc_segmap_parloop_131126_task.fn = futhark_mc_segmap_parloop_131126;
    futhark_mc_segmap_parloop_131126_task.args =
        &futhark_mc_segmap_parloop_struct_131125;
    futhark_mc_segmap_parloop_131126_task.iterations = iterations;
    futhark_mc_segmap_parloop_131126_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131126_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131126_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131126_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131126_task);
    
    if (futhark_mc_segmap_parloop_131126_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131126_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131126_total_end -
                 futhark_mc_segmap_parloop_131126_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131126_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131126_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131126_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131124_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131124_end -
                 futhark_mc_segmap_task_131124_start;
        
        ctx->futhark_mc_segmap_task_131124_runs[tid]++;
        ctx->futhark_mc_segmap_task_131124_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131124_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131129 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_i_114594;
    int64_t free_bytes_121983;
    char *free_mem_122004;
};
struct futhark_mc_task_131132 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_i_114594;
    int64_t free_gtid_116785;
    char *free_mem_121985;
};
struct futhark_mc_segmap_parloop_struct_131134 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_i_114594;
    int64_t free_gtid_116785;
    char *free_mem_121985;
};
static int futhark_mc_segmap_parloop_131135(void *args, int64_t start,
                                            int64_t end, int flat_tid_116786,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131134
    *futhark_mc_segmap_parloop_struct_131134 =
    (struct futhark_mc_segmap_parloop_struct_131134 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131134->ctx;
    uint64_t futhark_mc_segmap_parloop_131135_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131135_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131134->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131134->free_css_chunk_len_114564;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131134->free_i_114594;
    int64_t gtid_116785 =
            futhark_mc_segmap_parloop_struct_131134->free_gtid_116785;
    struct memblock mem_121985 = {.desc ="mem_121985", .mem =
                                  futhark_mc_segmap_parloop_struct_131134->free_mem_121985,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123933 = start;
    
    for (; iter_123933 < end; iter_123933++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123934 = css_chunk_len_114564;
        int64_t gtid_116787 = iter_123933;
        int64_t remnant_123935 = iter_123933 - gtid_116787;
        int64_t y_123926 = mul64(n_p_114520, gtid_116787);
        int64_t res_idx_123927 = add64(gtid_116785, y_123926);
        bool cond_123928 = slt64(i_114594, res_idx_123927);
        int64_t defunc_0_f_res_123929;
        
        if (cond_123928) {
            defunc_0_f_res_123929 = (int64_t) -1;
        } else {
            defunc_0_f_res_123929 = res_idx_123927;
        }
        ((int64_t *) mem_121985.mem)[gtid_116787] = defunc_0_f_res_123929;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131135_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131135_end -
                 futhark_mc_segmap_parloop_131135_start;
        
        ctx->futhark_mc_segmap_parloop_131135_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131135_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131135_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131133(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116786 = tid;
    int num_tasks_123932 = info.nsubtasks;
    struct futhark_mc_task_131132 *futhark_mc_task_131132 =
                                  (struct futhark_mc_task_131132 *) args;
    struct futhark_context *ctx = futhark_mc_task_131132->ctx;
    uint64_t futhark_mc_segmap_task_131133_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131133_start = get_wall_time();
    
    int64_t n_p_114520 = futhark_mc_task_131132->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131132->free_css_chunk_len_114564;
    int64_t i_114594 = futhark_mc_task_131132->free_i_114594;
    int64_t gtid_116785 = futhark_mc_task_131132->free_gtid_116785;
    struct memblock mem_121985 = {.desc ="mem_121985", .mem =
                                  futhark_mc_task_131132->free_mem_121985,
                                  .size =0, .references =NULL};
    int64_t iter_123933;
    struct futhark_mc_segmap_parloop_struct_131134
    futhark_mc_segmap_parloop_struct_131134;
    
    futhark_mc_segmap_parloop_struct_131134.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131134.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131134.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131134.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131134.free_gtid_116785 = gtid_116785;
    futhark_mc_segmap_parloop_struct_131134.free_mem_121985 = mem_121985.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131135_task;
    
    futhark_mc_segmap_parloop_131135_task.name =
        "futhark_mc_segmap_parloop_131135";
    futhark_mc_segmap_parloop_131135_task.fn = futhark_mc_segmap_parloop_131135;
    futhark_mc_segmap_parloop_131135_task.args =
        &futhark_mc_segmap_parloop_struct_131134;
    futhark_mc_segmap_parloop_131135_task.iterations = iterations;
    futhark_mc_segmap_parloop_131135_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131135_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131135_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131135_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131135_task);
    
    if (futhark_mc_segmap_parloop_131135_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131135_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131135_total_end -
                 futhark_mc_segmap_parloop_131135_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131135_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131135_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131135_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131133_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131133_end -
                 futhark_mc_segmap_task_131133_start;
        
        ctx->futhark_mc_segmap_task_131133_runs[tid]++;
        ctx->futhark_mc_segmap_task_131133_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131133_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131130(void *args, int64_t start,
                                            int64_t end, int flat_tid_116784,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131129
    *futhark_mc_segmap_parloop_struct_131129 =
    (struct futhark_mc_segmap_parloop_struct_131129 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131129->ctx;
    uint64_t futhark_mc_segmap_parloop_131130_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131130_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131129->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131129->free_css_chunk_len_114564;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131129->free_i_114594;
    int64_t bytes_121983 =
            futhark_mc_segmap_parloop_struct_131129->free_bytes_121983;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131129->free_mem_122004,
                                  .size =0, .references =NULL};
    size_t mem_121985_cached_sizze_131131 = 0;
    char *mem_121985 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123925 = start;
    
    if (mem_121985_cached_sizze_131131 < (size_t) bytes_121983) {
        mem_121985 = realloc(mem_121985, bytes_121983);
        mem_121985_cached_sizze_131131 = bytes_121983;
    }
    for (; iter_123925 < end; iter_123925++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123930 = n_p_114520;
        int64_t gtid_116785 = iter_123925;
        int64_t remnant_123931 = iter_123925 - gtid_116785;
        int64_t flat_tid_116786 = (int64_t) 0;
        int32_t num_tasks_123932;
        struct futhark_mc_task_131132 futhark_mc_task_131132;
        
        futhark_mc_task_131132.ctx = ctx;
        futhark_mc_task_131132.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131132.free_css_chunk_len_114564 = css_chunk_len_114564;
        futhark_mc_task_131132.free_i_114594 = i_114594;
        futhark_mc_task_131132.free_gtid_116785 = gtid_116785;
        futhark_mc_task_131132.free_mem_121985 = mem_121985;
        
        struct scheduler_segop futhark_mc_task_131132_task;
        
        futhark_mc_task_131132_task.args = &futhark_mc_task_131132;
        futhark_mc_task_131132_task.top_level_fn =
            futhark_mc_segmap_task_131133;
        futhark_mc_task_131132_task.name = "futhark_mc_segmap_task_131133";
        futhark_mc_task_131132_task.iterations = css_chunk_len_114564;
        futhark_mc_task_131132_task.task_time =
            &ctx->futhark_mc_segmap_task_131133_total_time;
        futhark_mc_task_131132_task.task_iter =
            &ctx->futhark_mc_segmap_task_131133_total_iter;
        futhark_mc_task_131132_task.sched = STATIC;
        futhark_mc_task_131132_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131133_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131132_task);
        
        if (futhark_mc_segmap_task_131133_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122004.mem + gtid_116785 * css_chunk_len_114564 *
                (int64_t) 8, mem_121985 + (int64_t) 0, css_chunk_len_114564 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_121985);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131130_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131130_end -
                 futhark_mc_segmap_parloop_131130_start;
        
        ctx->futhark_mc_segmap_parloop_131130_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131130_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131130_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131128(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116784 = tid;
    int num_tasks_123913 = info.nsubtasks;
    struct futhark_mc_task_131123 *futhark_mc_task_131123 =
                                  (struct futhark_mc_task_131123 *) args;
    struct futhark_context *ctx = futhark_mc_task_131123->ctx;
    uint64_t futhark_mc_segmap_nested_task_131128_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131128_start = get_wall_time();
    
    int64_t n_p_114520 = futhark_mc_task_131123->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131123->free_css_chunk_len_114564;
    int64_t i_114594 = futhark_mc_task_131123->free_i_114594;
    int64_t bytes_121983 = futhark_mc_task_131123->free_bytes_121983;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131123->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t iter_123925;
    struct futhark_mc_segmap_parloop_struct_131129
    futhark_mc_segmap_parloop_struct_131129;
    
    futhark_mc_segmap_parloop_struct_131129.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131129.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131129.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131129.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131129.free_bytes_121983 = bytes_121983;
    futhark_mc_segmap_parloop_struct_131129.free_mem_122004 = mem_122004.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131130_task;
    
    futhark_mc_segmap_parloop_131130_task.name =
        "futhark_mc_segmap_parloop_131130";
    futhark_mc_segmap_parloop_131130_task.fn = futhark_mc_segmap_parloop_131130;
    futhark_mc_segmap_parloop_131130_task.args =
        &futhark_mc_segmap_parloop_struct_131129;
    futhark_mc_segmap_parloop_131130_task.iterations = iterations;
    futhark_mc_segmap_parloop_131130_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131130_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131130_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131130_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131130_task);
    
    if (futhark_mc_segmap_parloop_131130_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131130_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131130_total_end -
                 futhark_mc_segmap_parloop_131130_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131130_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131130_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131130_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131128_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131128_end -
                 futhark_mc_segmap_nested_task_131128_start;
        
        ctx->futhark_mc_segmap_nested_task_131128_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131128_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131128_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131136 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    int64_t free_bytes_122005;
    char *free_mem_122026;
};
struct futhark_mc_segmap_parloop_struct_131138 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    int64_t free_bytes_122005;
    char *free_mem_122026;
};
static int futhark_mc_segmap_parloop_131139(void *args, int64_t start,
                                            int64_t end, int flat_tid_116795,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131138
    *futhark_mc_segmap_parloop_struct_131138 =
    (struct futhark_mc_segmap_parloop_struct_131138 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131138->ctx;
    uint64_t futhark_mc_segmap_parloop_131139_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131139_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131138->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131138->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131138->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131138->free_css_chunk_len_114564;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131138->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131138->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 =
            futhark_mc_segmap_parloop_struct_131138->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_segmap_parloop_struct_131138->free_mem_122026,
                                  .size =0, .references =NULL};
    size_t mem_122010_cached_sizze_131140 = 0;
    char *mem_122010 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123937 = start;
    
    if (mem_122010_cached_sizze_131140 < (size_t) bytes_122005) {
        mem_122010 = realloc(mem_122010, bytes_122005);
        mem_122010_cached_sizze_131140 = bytes_122005;
    }
    for (; iter_123937 < end; iter_123937++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123956 = m_114517;
        int64_t gtid_116796 = iter_123937;
        int64_t remnant_123957 = iter_123937 - gtid_116796;
        
        for (int64_t i_123938 = 0; i_123938 < n_p_114520; i_123938++) {
            float defunc_2_reduce_res_123940;
            float redout_123942 = 0.0F;
            
            for (int64_t i_123941 = 0; i_123941 < css_chunk_len_114564;
                 i_123941++) {
                int64_t x_123943 = ((int64_t *) mem_122004.mem)[i_123938 *
                                                                css_chunk_len_114564 +
                                                                i_123941];
                bool cond_123944 = sle64((int64_t) 0, x_123943);
                float defunc_0_f_res_123945;
                
                if (cond_123944) {
                    bool y_123946 = slt64(x_123943, n_114518);
                    bool bounds_check_123947 = cond_123944 && y_123946;
                    bool index_certs_123948;
                    
                    if (!bounds_check_123947) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_123943,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114518, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:152:30-55\n   #3  stl.fut:150:13-159:26\n   #4  stl.fut:148:5-160:11\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_123949 =
                          ((float *) Y_mem_121917.mem)[gtid_116796 * n_114518 +
                                                       x_123943];
                    
                    defunc_0_f_res_123945 = defunc_0_f_res_t_res_123949;
                } else {
                    defunc_0_f_res_123945 = NAN;
                }
                
                bool isnan_res_123950;
                
                isnan_res_123950 = futrts_isnan32(defunc_0_f_res_123945);
                
                float defunc_0_f_res_123951;
                
                if (isnan_res_123950) {
                    defunc_0_f_res_123951 = 0.0F;
                } else {
                    defunc_0_f_res_123951 = 1.0F;
                }
                
                float defunc_1_op_res_123952 = defunc_0_f_res_123951 +
                      redout_123942;
                float redout_tmp_123959 = defunc_1_op_res_123952;
                
                redout_123942 = redout_tmp_123959;
            }
            defunc_2_reduce_res_123940 = redout_123942;
            
            bool sub_series_is_not_all_nan_123953 = 0.0F <
                 defunc_2_reduce_res_123940;
            bool assert_c_123954;
            
            if (!sub_series_is_not_all_nan_123953) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "Assertion is false: sub_series_is_not_all_nan",
                                       "-> #0  stl.fut:157:34-75\n   #1  stl.fut:150:13-159:26\n   #2  stl.fut:148:5-160:11\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
                return 1;
            }
            ((float *) mem_122010)[i_123938] = defunc_2_reduce_res_123940;
        }
        memmove(mem_122026.mem + gtid_116796 * n_p_114520 * (int64_t) 4,
                mem_122010 + (int64_t) 0, n_p_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122010);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131139_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131139_end -
                 futhark_mc_segmap_parloop_131139_start;
        
        ctx->futhark_mc_segmap_parloop_131139_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131139_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131139_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131137(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116795 = tid;
    int num_tasks_123936 = info.nsubtasks;
    struct futhark_mc_task_131136 *futhark_mc_task_131136 =
                                  (struct futhark_mc_task_131136 *) args;
    struct futhark_context *ctx = futhark_mc_task_131136->ctx;
    uint64_t futhark_mc_segmap_task_131137_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131137_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131136->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131136->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131136->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131136->free_css_chunk_len_114564;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131136->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131136->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 = futhark_mc_task_131136->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_task_131136->free_mem_122026,
                                  .size =0, .references =NULL};
    int64_t iter_123937;
    struct futhark_mc_segmap_parloop_struct_131138
    futhark_mc_segmap_parloop_struct_131138;
    
    futhark_mc_segmap_parloop_struct_131138.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131138.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131138.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131138.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131138.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131138.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131138.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131138.free_bytes_122005 = bytes_122005;
    futhark_mc_segmap_parloop_struct_131138.free_mem_122026 = mem_122026.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131139_task;
    
    futhark_mc_segmap_parloop_131139_task.name =
        "futhark_mc_segmap_parloop_131139";
    futhark_mc_segmap_parloop_131139_task.fn = futhark_mc_segmap_parloop_131139;
    futhark_mc_segmap_parloop_131139_task.args =
        &futhark_mc_segmap_parloop_struct_131138;
    futhark_mc_segmap_parloop_131139_task.iterations = iterations;
    futhark_mc_segmap_parloop_131139_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131139_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131139_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131139_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131139_task);
    
    if (futhark_mc_segmap_parloop_131139_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131139_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131139_total_end -
                 futhark_mc_segmap_parloop_131139_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131139_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131139_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131139_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131137_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131137_end -
                 futhark_mc_segmap_task_131137_start;
        
        ctx->futhark_mc_segmap_task_131137_runs[tid]++;
        ctx->futhark_mc_segmap_task_131137_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131137_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131142 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    int64_t free_bytes_122005;
    char *free_mem_122026;
};
struct futhark_mc_task_131145 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_116798;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    char *free_mem_122007;
};
struct futhark_mc_segmap_parloop_struct_131147 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_116798;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    char *free_mem_122007;
};
static int futhark_mc_segmap_parloop_131148(void *args, int64_t start,
                                            int64_t end, int flat_tid_116799,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131147
    *futhark_mc_segmap_parloop_struct_131147 =
    (struct futhark_mc_segmap_parloop_struct_131147 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131147->ctx;
    uint64_t futhark_mc_segmap_parloop_131148_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131148_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131147->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131147->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131147->free_css_chunk_len_114564;
    int64_t gtid_116798 =
            futhark_mc_segmap_parloop_struct_131147->free_gtid_116798;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131147->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131147->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122007 = {.desc ="mem_122007", .mem =
                                  futhark_mc_segmap_parloop_struct_131147->free_mem_122007,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123994 = start;
    
    for (; iter_123994 < end; iter_123994++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124007 = n_p_114520;
        int64_t gtid_116800 = iter_123994;
        int64_t remnant_124008 = iter_123994 - gtid_116800;
        float defunc_2_reduce_res_123976;
        float redout_123996 = 0.0F;
        
        for (int64_t i_123995 = 0; i_123995 < css_chunk_len_114564;
             i_123995++) {
            int64_t x_123997 = ((int64_t *) mem_122004.mem)[gtid_116800 *
                                                            css_chunk_len_114564 +
                                                            i_123995];
            bool cond_123998 = sle64((int64_t) 0, x_123997);
            float defunc_0_f_res_123999;
            
            if (cond_123998) {
                bool y_124000 = slt64(x_123997, n_114518);
                bool bounds_check_124001 = cond_123998 && y_124000;
                bool index_certs_124002;
                
                if (!bounds_check_124001) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_123997,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:152:30-55\n   #3  stl.fut:150:13-159:26\n   #4  stl.fut:148:5-160:11\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_124003 =
                      ((float *) Y_mem_121917.mem)[gtid_116798 * n_114518 +
                                                   x_123997];
                
                defunc_0_f_res_123999 = defunc_0_f_res_t_res_124003;
            } else {
                defunc_0_f_res_123999 = NAN;
            }
            
            bool isnan_res_124004;
            
            isnan_res_124004 = futrts_isnan32(defunc_0_f_res_123999);
            
            float defunc_0_f_res_124005;
            
            if (isnan_res_124004) {
                defunc_0_f_res_124005 = 0.0F;
            } else {
                defunc_0_f_res_124005 = 1.0F;
            }
            
            float defunc_1_op_res_124006 = defunc_0_f_res_124005 +
                  redout_123996;
            float redout_tmp_124009 = defunc_1_op_res_124006;
            
            redout_123996 = redout_tmp_124009;
        }
        defunc_2_reduce_res_123976 = redout_123996;
        
        bool sub_series_is_not_all_nan_123989 = 0.0F <
             defunc_2_reduce_res_123976;
        bool assert_c_123990;
        
        if (!sub_series_is_not_all_nan_123989) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:157:34-75\n   #1  stl.fut:150:13-159:26\n   #2  stl.fut:148:5-160:11\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
            return 1;
        }
        ((float *) mem_122007.mem)[gtid_116800] = defunc_2_reduce_res_123976;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131148_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131148_end -
                 futhark_mc_segmap_parloop_131148_start;
        
        ctx->futhark_mc_segmap_parloop_131148_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131148_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131148_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131146(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116799 = tid;
    int num_tasks_123993 = info.nsubtasks;
    struct futhark_mc_task_131145 *futhark_mc_task_131145 =
                                  (struct futhark_mc_task_131145 *) args;
    struct futhark_context *ctx = futhark_mc_task_131145->ctx;
    uint64_t futhark_mc_segmap_task_131146_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131146_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131145->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131145->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131145->free_css_chunk_len_114564;
    int64_t gtid_116798 = futhark_mc_task_131145->free_gtid_116798;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131145->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131145->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122007 = {.desc ="mem_122007", .mem =
                                  futhark_mc_task_131145->free_mem_122007,
                                  .size =0, .references =NULL};
    int64_t iter_123994;
    struct futhark_mc_segmap_parloop_struct_131147
    futhark_mc_segmap_parloop_struct_131147;
    
    futhark_mc_segmap_parloop_struct_131147.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131147.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131147.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131147.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131147.free_gtid_116798 = gtid_116798;
    futhark_mc_segmap_parloop_struct_131147.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131147.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131147.free_mem_122007 = mem_122007.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131148_task;
    
    futhark_mc_segmap_parloop_131148_task.name =
        "futhark_mc_segmap_parloop_131148";
    futhark_mc_segmap_parloop_131148_task.fn = futhark_mc_segmap_parloop_131148;
    futhark_mc_segmap_parloop_131148_task.args =
        &futhark_mc_segmap_parloop_struct_131147;
    futhark_mc_segmap_parloop_131148_task.iterations = iterations;
    futhark_mc_segmap_parloop_131148_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131148_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131148_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131148_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131148_task);
    
    if (futhark_mc_segmap_parloop_131148_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131148_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131148_total_end -
                 futhark_mc_segmap_parloop_131148_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131148_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131148_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131148_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131146_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131146_end -
                 futhark_mc_segmap_task_131146_start;
        
        ctx->futhark_mc_segmap_task_131146_runs[tid]++;
        ctx->futhark_mc_segmap_task_131146_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131146_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131150 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_116798;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    char *free_mem_122007;
};
struct futhark_mc_task_131152 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_116798;
    int64_t free_gtid_116802;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    float *retval_defunc_2_reduce_res_123961;
};
struct futhark_mc_segred_stage_1_parloop_struct_131155 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_116798;
    int64_t free_gtid_116802;
    char *free_Y_mem_121917;
    char *free_mem_122004;
    char *free_reduce_stage_1_tid_res_arr_mem_124026;
};
static int futhark_mc_segred_stage_1_parloop_131156(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116803,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131155
    *futhark_mc_segred_stage_1_parloop_struct_131155 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131155 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131155->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131156_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131156_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131155->free_n_114518;
    int64_t css_chunk_len_114564 =
            futhark_mc_segred_stage_1_parloop_struct_131155->free_css_chunk_len_114564;
    int64_t gtid_116798 =
            futhark_mc_segred_stage_1_parloop_struct_131155->free_gtid_116798;
    int64_t gtid_116802 =
            futhark_mc_segred_stage_1_parloop_struct_131155->free_gtid_116802;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segred_stage_1_parloop_struct_131155->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131155->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124026 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124026",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131155->free_reduce_stage_1_tid_res_arr_mem_124026,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124028 = start;
    float x_124011;
    float x_124012;
    float local_acc_124029 = 0.0F;
    
    for (; iter_124028 < end; iter_124028++) {
        int64_t gtid_116804 = iter_124028;
        int64_t x_124014 = ((int64_t *) mem_122004.mem)[gtid_116802 *
                                                        css_chunk_len_114564 +
                                                        gtid_116804];
        bool cond_124015 = sle64((int64_t) 0, x_124014);
        float defunc_0_f_res_124016;
        
        if (cond_124015) {
            bool y_124017 = slt64(x_124014, n_114518);
            bool bounds_check_124018 = cond_124015 && y_124017;
            bool index_certs_124019;
            
            if (!bounds_check_124018) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_124014,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:152:30-55\n   #3  stl.fut:150:13-159:26\n   #4  stl.fut:148:5-160:11\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_124020 =
                  ((float *) Y_mem_121917.mem)[gtid_116798 * n_114518 +
                                               x_124014];
            
            defunc_0_f_res_124016 = defunc_0_f_res_t_res_124020;
        } else {
            defunc_0_f_res_124016 = NAN;
        }
        
        bool isnan_res_124021;
        
        isnan_res_124021 = futrts_isnan32(defunc_0_f_res_124016);
        
        float defunc_0_f_res_124022;
        
        if (isnan_res_124021) {
            defunc_0_f_res_124022 = 0.0F;
        } else {
            defunc_0_f_res_124022 = 1.0F;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_124011 = local_acc_124029;
        }
        // Load next params
        {
            x_124012 = defunc_0_f_res_124022;
        }
        // Red body
        {
            float defunc_1_op_res_124013 = x_124011 + x_124012;
            
            local_acc_124029 = defunc_1_op_res_124013;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124026.mem)[flat_tid_116803] =
        local_acc_124029;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131156_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131156_end -
                 futhark_mc_segred_stage_1_parloop_131156_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131156_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131156_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131156_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131153(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116803 = tid;
    int num_tasks_124025 = info.nsubtasks;
    struct futhark_mc_task_131152 *futhark_mc_task_131152 =
                                  (struct futhark_mc_task_131152 *) args;
    struct futhark_context *ctx = futhark_mc_task_131152->ctx;
    uint64_t futhark_mc_segred_task_131153_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131153_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131152->free_n_114518;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131152->free_css_chunk_len_114564;
    int64_t gtid_116798 = futhark_mc_task_131152->free_gtid_116798;
    int64_t gtid_116802 = futhark_mc_task_131152->free_gtid_116802;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131152->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131152->free_mem_122004,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_123961 =
          *futhark_mc_task_131152->retval_defunc_2_reduce_res_123961;
    size_t reduce_stage_1_tid_res_arr_mem_124026_cached_sizze_131154 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124026 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124026_cached_sizze_131154 <
        (size_t) ((int64_t) 4 * num_tasks_124025)) {
        reduce_stage_1_tid_res_arr_mem_124026 =
            realloc(reduce_stage_1_tid_res_arr_mem_124026, (int64_t) 4 *
                    num_tasks_124025);
        reduce_stage_1_tid_res_arr_mem_124026_cached_sizze_131154 =
            (int64_t) 4 * num_tasks_124025;
    }
    
    int64_t iter_124028;
    struct futhark_mc_segred_stage_1_parloop_struct_131155
    futhark_mc_segred_stage_1_parloop_struct_131155;
    
    futhark_mc_segred_stage_1_parloop_struct_131155.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_gtid_116798 =
        gtid_116798;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_gtid_116802 =
        gtid_116802;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_mem_122004 =
        mem_122004.mem;
    futhark_mc_segred_stage_1_parloop_struct_131155.free_reduce_stage_1_tid_res_arr_mem_124026 =
        reduce_stage_1_tid_res_arr_mem_124026;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131156_task;
    
    futhark_mc_segred_stage_1_parloop_131156_task.name =
        "futhark_mc_segred_stage_1_parloop_131156";
    futhark_mc_segred_stage_1_parloop_131156_task.fn =
        futhark_mc_segred_stage_1_parloop_131156;
    futhark_mc_segred_stage_1_parloop_131156_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131155;
    futhark_mc_segred_stage_1_parloop_131156_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131156_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131156_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131156_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131156_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131156_task);
    
    if (futhark_mc_segred_stage_1_parloop_131156_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131156_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131156_total_end -
                 futhark_mc_segred_stage_1_parloop_131156_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131156_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131156_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131156_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123961 = 0.0F;
    }
    
    float x_124030;
    float x_124031;
    
    for (int32_t i_124033 = 0; i_124033 < num_tasks_124025; i_124033++) {
        flat_tid_116803 = i_124033;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124030 = defunc_2_reduce_res_123961;
            }
            // load next params
            {
                x_124031 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124026)[flat_tid_116803];
            }
            // red body
            {
                float defunc_1_op_res_124032 = x_124030 + x_124031;
                
                defunc_2_reduce_res_123961 = defunc_1_op_res_124032;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124026);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131153_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131153_end -
                 futhark_mc_segred_task_131153_start;
        
        ctx->futhark_mc_segred_task_131153_runs[tid]++;
        ctx->futhark_mc_segred_task_131153_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131153_iter[tid] += iterations;
    }
    *futhark_mc_task_131152->retval_defunc_2_reduce_res_123961 =
        defunc_2_reduce_res_123961;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131151(void *args, int64_t start,
                                            int64_t end, int flat_tid_116801,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131150
    *futhark_mc_segmap_parloop_struct_131150 =
    (struct futhark_mc_segmap_parloop_struct_131150 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131150->ctx;
    uint64_t futhark_mc_segmap_parloop_131151_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131151_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131150->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131150->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131150->free_css_chunk_len_114564;
    int64_t gtid_116798 =
            futhark_mc_segmap_parloop_struct_131150->free_gtid_116798;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131150->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131150->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122007 = {.desc ="mem_122007", .mem =
                                  futhark_mc_segmap_parloop_struct_131150->free_mem_122007,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124010 = start;
    
    for (; iter_124010 < end; iter_124010++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124023 = n_p_114520;
        int64_t gtid_116802 = iter_124010;
        int64_t remnant_124024 = iter_124010 - gtid_116802;
        float defunc_2_reduce_res_123961;
        int64_t flat_tid_116803 = (int64_t) 0;
        int32_t num_tasks_124025;
        struct futhark_mc_task_131152 futhark_mc_task_131152;
        
        futhark_mc_task_131152.ctx = ctx;
        futhark_mc_task_131152.free_n_114518 = n_114518;
        futhark_mc_task_131152.free_css_chunk_len_114564 = css_chunk_len_114564;
        futhark_mc_task_131152.free_gtid_116798 = gtid_116798;
        futhark_mc_task_131152.free_gtid_116802 = gtid_116802;
        futhark_mc_task_131152.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131152.free_mem_122004 = mem_122004.mem;
        futhark_mc_task_131152.retval_defunc_2_reduce_res_123961 =
            &defunc_2_reduce_res_123961;
        
        struct scheduler_segop futhark_mc_task_131152_task;
        
        futhark_mc_task_131152_task.args = &futhark_mc_task_131152;
        futhark_mc_task_131152_task.top_level_fn =
            futhark_mc_segred_task_131153;
        futhark_mc_task_131152_task.name = "futhark_mc_segred_task_131153";
        futhark_mc_task_131152_task.iterations = css_chunk_len_114564;
        futhark_mc_task_131152_task.task_time =
            &ctx->futhark_mc_segred_task_131153_total_time;
        futhark_mc_task_131152_task.task_iter =
            &ctx->futhark_mc_segred_task_131153_total_iter;
        futhark_mc_task_131152_task.sched = STATIC;
        futhark_mc_task_131152_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131153_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131152_task);
        
        if (futhark_mc_segred_task_131153_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        bool sub_series_is_not_all_nan_123974 = 0.0F <
             defunc_2_reduce_res_123961;
        bool assert_c_123975;
        
        if (!sub_series_is_not_all_nan_123974) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:157:34-75\n   #1  stl.fut:150:13-159:26\n   #2  stl.fut:148:5-160:11\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
            return 1;
        }
        ((float *) mem_122007.mem)[gtid_116802] = defunc_2_reduce_res_123961;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131151_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131151_end -
                 futhark_mc_segmap_parloop_131151_start;
        
        ctx->futhark_mc_segmap_parloop_131151_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131151_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131151_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131149(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116801 = tid;
    int num_tasks_123993 = info.nsubtasks;
    struct futhark_mc_task_131145 *futhark_mc_task_131145 =
                                  (struct futhark_mc_task_131145 *) args;
    struct futhark_context *ctx = futhark_mc_task_131145->ctx;
    uint64_t futhark_mc_segmap_nested_task_131149_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131149_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131145->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131145->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131145->free_css_chunk_len_114564;
    int64_t gtid_116798 = futhark_mc_task_131145->free_gtid_116798;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131145->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131145->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122007 = {.desc ="mem_122007", .mem =
                                  futhark_mc_task_131145->free_mem_122007,
                                  .size =0, .references =NULL};
    int64_t iter_124010;
    struct futhark_mc_segmap_parloop_struct_131150
    futhark_mc_segmap_parloop_struct_131150;
    
    futhark_mc_segmap_parloop_struct_131150.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131150.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131150.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131150.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131150.free_gtid_116798 = gtid_116798;
    futhark_mc_segmap_parloop_struct_131150.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131150.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131150.free_mem_122007 = mem_122007.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131151_task;
    
    futhark_mc_segmap_parloop_131151_task.name =
        "futhark_mc_segmap_parloop_131151";
    futhark_mc_segmap_parloop_131151_task.fn = futhark_mc_segmap_parloop_131151;
    futhark_mc_segmap_parloop_131151_task.args =
        &futhark_mc_segmap_parloop_struct_131150;
    futhark_mc_segmap_parloop_131151_task.iterations = iterations;
    futhark_mc_segmap_parloop_131151_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131151_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131151_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131151_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131151_task);
    
    if (futhark_mc_segmap_parloop_131151_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131151_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131151_total_end -
                 futhark_mc_segmap_parloop_131151_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131151_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131151_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131151_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131149_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131149_end -
                 futhark_mc_segmap_nested_task_131149_start;
        
        ctx->futhark_mc_segmap_nested_task_131149_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131149_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131149_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131143(void *args, int64_t start,
                                            int64_t end, int flat_tid_116797,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131142
    *futhark_mc_segmap_parloop_struct_131142 =
    (struct futhark_mc_segmap_parloop_struct_131142 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131142->ctx;
    uint64_t futhark_mc_segmap_parloop_131143_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131143_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131142->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131142->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131142->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131142->free_css_chunk_len_114564;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131142->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131142->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 =
            futhark_mc_segmap_parloop_struct_131142->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_segmap_parloop_struct_131142->free_mem_122026,
                                  .size =0, .references =NULL};
    size_t mem_122007_cached_sizze_131144 = 0;
    char *mem_122007 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123960 = start;
    
    if (mem_122007_cached_sizze_131144 < (size_t) bytes_122005) {
        mem_122007 = realloc(mem_122007, bytes_122005);
        mem_122007_cached_sizze_131144 = bytes_122005;
    }
    for (; iter_123960 < end; iter_123960++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123991 = m_114517;
        int64_t gtid_116798 = iter_123960;
        int64_t remnant_123992 = iter_123960 - gtid_116798;
        int64_t flat_tid_116799 = (int64_t) 0;
        int32_t num_tasks_123993;
        int64_t flat_tid_116801 = (int64_t) 0;
        struct futhark_mc_task_131145 futhark_mc_task_131145;
        
        futhark_mc_task_131145.ctx = ctx;
        futhark_mc_task_131145.free_n_114518 = n_114518;
        futhark_mc_task_131145.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131145.free_css_chunk_len_114564 = css_chunk_len_114564;
        futhark_mc_task_131145.free_gtid_116798 = gtid_116798;
        futhark_mc_task_131145.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131145.free_mem_122004 = mem_122004.mem;
        futhark_mc_task_131145.free_mem_122007 = mem_122007;
        
        struct scheduler_segop futhark_mc_task_131145_task;
        
        futhark_mc_task_131145_task.args = &futhark_mc_task_131145;
        futhark_mc_task_131145_task.top_level_fn =
            futhark_mc_segmap_task_131146;
        futhark_mc_task_131145_task.name = "futhark_mc_segmap_task_131146";
        futhark_mc_task_131145_task.iterations = n_p_114520;
        futhark_mc_task_131145_task.task_time =
            &ctx->futhark_mc_segmap_task_131146_total_time;
        futhark_mc_task_131145_task.task_iter =
            &ctx->futhark_mc_segmap_task_131146_total_iter;
        futhark_mc_task_131145_task.sched = STATIC;
        futhark_mc_task_131145_task.nested_fn =
            futhark_mc_segmap_nested_task_131149;
        
        int futhark_mc_segmap_task_131146_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131145_task);
        
        if (futhark_mc_segmap_task_131146_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122026.mem + gtid_116798 * n_p_114520 * (int64_t) 4,
                mem_122007 + (int64_t) 0, n_p_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122007);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131143_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131143_end -
                 futhark_mc_segmap_parloop_131143_start;
        
        ctx->futhark_mc_segmap_parloop_131143_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131143_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131143_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131141(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116797 = tid;
    int num_tasks_123936 = info.nsubtasks;
    struct futhark_mc_task_131136 *futhark_mc_task_131136 =
                                  (struct futhark_mc_task_131136 *) args;
    struct futhark_context *ctx = futhark_mc_task_131136->ctx;
    uint64_t futhark_mc_segmap_nested_task_131141_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131141_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131136->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131136->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131136->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131136->free_css_chunk_len_114564;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131136->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131136->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 = futhark_mc_task_131136->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_task_131136->free_mem_122026,
                                  .size =0, .references =NULL};
    int64_t iter_123960;
    struct futhark_mc_segmap_parloop_struct_131142
    futhark_mc_segmap_parloop_struct_131142;
    
    futhark_mc_segmap_parloop_struct_131142.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131142.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131142.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131142.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131142.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131142.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131142.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131142.free_bytes_122005 = bytes_122005;
    futhark_mc_segmap_parloop_struct_131142.free_mem_122026 = mem_122026.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131143_task;
    
    futhark_mc_segmap_parloop_131143_task.name =
        "futhark_mc_segmap_parloop_131143";
    futhark_mc_segmap_parloop_131143_task.fn = futhark_mc_segmap_parloop_131143;
    futhark_mc_segmap_parloop_131143_task.args =
        &futhark_mc_segmap_parloop_struct_131142;
    futhark_mc_segmap_parloop_131143_task.iterations = iterations;
    futhark_mc_segmap_parloop_131143_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131143_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131143_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131143_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131143_task);
    
    if (futhark_mc_segmap_parloop_131143_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131143_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131143_total_end -
                 futhark_mc_segmap_parloop_131143_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131143_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131143_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131143_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131141_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131141_end -
                 futhark_mc_segmap_nested_task_131141_start;
        
        ctx->futhark_mc_segmap_nested_task_131141_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131141_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131141_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131157 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114666;
    bool free_empty_slice_114671;
    int64_t free_m_114672;
    float free_i64_res_114673;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
    int64_t free_bytes_122033;
    int64_t free_bytes_122036;
    char *free_mem_122102;
    char *free_mem_122106;
};
struct futhark_mc_segmap_parloop_struct_131159 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114666;
    bool free_empty_slice_114671;
    int64_t free_m_114672;
    float free_i64_res_114673;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
    int64_t free_bytes_122033;
    int64_t free_bytes_122036;
    char *free_mem_122102;
    char *free_mem_122106;
};
static int futhark_mc_segmap_parloop_131160(void *args, int64_t start,
                                            int64_t end, int flat_tid_116855,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131159
    *futhark_mc_segmap_parloop_struct_131159 =
    (struct futhark_mc_segmap_parloop_struct_131159 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131159->ctx;
    uint64_t futhark_mc_segmap_parloop_131160_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131160_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131159->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131159->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131159->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131159->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131159->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131159->free_x_114595;
    int64_t min_res_114666 =
            futhark_mc_segmap_parloop_struct_131159->free_min_res_114666;
    bool empty_slice_114671 =
         futhark_mc_segmap_parloop_struct_131159->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_segmap_parloop_struct_131159->free_m_114672;
    float i64_res_114673 =
          futhark_mc_segmap_parloop_struct_131159->free_i64_res_114673;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131159->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131159->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131159->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131159->free_bytes_122033;
    int64_t bytes_122036 =
            futhark_mc_segmap_parloop_struct_131159->free_bytes_122036;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131159->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131159->free_mem_122106,
                                  .size =0, .references =NULL};
    size_t mem_122041_cached_sizze_131161 = 0;
    char *mem_122041 = NULL;
    size_t mem_122044_cached_sizze_131162 = 0;
    char *mem_122044 = NULL;
    size_t mem_122071_cached_sizze_131163 = 0;
    char *mem_122071 = NULL;
    size_t mem_122074_cached_sizze_131164 = 0;
    char *mem_122074 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124035 = start;
    
    if (mem_122041_cached_sizze_131161 < (size_t) bytes_121918) {
        mem_122041 = realloc(mem_122041, bytes_121918);
        mem_122041_cached_sizze_131161 = bytes_121918;
    }
    if (mem_122044_cached_sizze_131162 < (size_t) bytes_121918) {
        mem_122044 = realloc(mem_122044, bytes_121918);
        mem_122044_cached_sizze_131162 = bytes_121918;
    }
    if (mem_122071_cached_sizze_131163 < (size_t) bytes_122033) {
        mem_122071 = realloc(mem_122071, bytes_122033);
        mem_122071_cached_sizze_131163 = bytes_122033;
    }
    if (mem_122074_cached_sizze_131164 < (size_t) bytes_122036) {
        mem_122074 = realloc(mem_122074, bytes_122036);
        mem_122074_cached_sizze_131164 = bytes_122036;
    }
    for (; iter_124035 < end; iter_124035++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124148 = m_114517;
        int64_t gtid_116856 = iter_124035;
        int64_t remnant_124149 = iter_124035 - gtid_116856;
        int64_t x_114677 = ((int64_t *) mem_121960.mem)[gtid_116856];
        
        for (int64_t i_124036 = 0; i_124036 < n_114518; i_124036++) {
            int64_t x_124039 = ((int64_t *) mem_121957.mem)[gtid_116856 *
                                                            n_114518 +
                                                            i_124036];
            int64_t defunc_0_f_res_124040 = add64((int64_t) 1, x_124039);
            bool cond_124041 = slt64(defunc_0_f_res_124040, (int64_t) 0);
            int64_t defunc_0_f_res_124042;
            
            if (cond_124041) {
                defunc_0_f_res_124042 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_124042 = defunc_0_f_res_124040;
            }
            ((int64_t *) mem_122041)[i_124036] = defunc_0_f_res_124042;
            ((int64_t *) mem_122044)[i_124036] = defunc_0_f_res_124040;
        }
        
        int64_t min_arg_114684 = sub64(x_114677, min_res_114666);
        float i64_res_114685 = sitofp_i64_f32(x_114677);
        float x_114686 = i64_res_114673 - i64_res_114685;
        float max_arg_114687 = x_114686 / 2.0F;
        float max_res_114688 = fmax32(0.0F, max_arg_114687);
        
        for (int64_t i_124045 = 0; i_124045 < l_n_m_114568; i_124045++) {
            int64_t min_arg_124048 = mul64(l_jump_114526, i_124045);
            int64_t min_res_124049 = smin64(i_114594, min_arg_124048);
            int64_t defunc_0_g_res_124050 = add64((int64_t) 1, min_res_124049);
            bool nearest_idx_124051;
            int64_t nearest_idx_124052;
            int64_t nearest_idx_124053;
            bool loop_while_124054;
            int64_t low_124055;
            int64_t high_124056;
            
            loop_while_124054 = x_114595;
            low_124055 = (int64_t) 0;
            high_124056 = i_114594;
            while (loop_while_124054) {
                int64_t x_124057 = add64(low_124055, high_124056);
                int64_t mid_124058 = sdiv64(x_124057, (int64_t) 2);
                bool x_124059 = sle64((int64_t) 0, mid_124058);
                bool y_124060 = slt64(mid_124058, n_114518);
                bool bounds_check_124061 = x_124059 && y_124060;
                bool index_certs_124062;
                
                if (!bounds_check_124061) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_124058,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t x_124063 = ((int64_t *) mem_122041)[mid_124058];
                bool cond_124064 = sle64(defunc_0_g_res_124050, x_124063);
                int64_t loopres_124065;
                int64_t loopres_124066;
                
                if (cond_124064) {
                    int64_t loopres_t_res_124067 = sub64(mid_124058,
                                                         (int64_t) 1);
                    
                    loopres_124065 = low_124055;
                    loopres_124066 = loopres_t_res_124067;
                } else {
                    int64_t loopres_f_res_124068 = add64((int64_t) 1,
                                                         mid_124058);
                    
                    loopres_124065 = loopres_f_res_124068;
                    loopres_124066 = high_124056;
                }
                
                bool loop_cond_124069 = sle64(loopres_124065, loopres_124066);
                bool loop_while_tmp_124154 = loop_cond_124069;
                int64_t low_tmp_124155 = loopres_124065;
                int64_t high_tmp_124156 = loopres_124066;
                
                loop_while_124054 = loop_while_tmp_124154;
                low_124055 = low_tmp_124155;
                high_124056 = high_tmp_124156;
            }
            nearest_idx_124051 = loop_while_124054;
            nearest_idx_124052 = low_124055;
            nearest_idx_124053 = high_124056;
            
            int64_t max_arg_124070 = sub64(nearest_idx_124052, min_res_114666);
            int64_t max_res_124071 = smax64((int64_t) 0, max_arg_124070);
            int64_t j_124072 = add64(min_res_114666, max_res_124071);
            int64_t i_p_m_t_s_124073 = add64(m_114672, max_res_124071);
            bool zzero_leq_i_p_m_t_s_124074 = sle64((int64_t) 0,
                                                    i_p_m_t_s_124073);
            bool i_p_m_t_s_leq_w_124075 = slt64(i_p_m_t_s_124073, n_114518);
            bool zzero_lte_i_124076 = sle64((int64_t) 0, max_res_124071);
            bool i_lte_j_124077 = sle64(max_res_124071, j_124072);
            bool y_124078 = i_p_m_t_s_leq_w_124075 && zzero_lte_i_124076;
            bool y_124079 = zzero_leq_i_p_m_t_s_124074 && y_124078;
            bool y_124080 = i_lte_j_124077 && y_124079;
            bool forwards_ok_124081 = zzero_lte_i_124076 && y_124080;
            bool ok_or_empty_124082 = empty_slice_114671 || forwards_ok_124081;
            bool index_certs_124083;
            
            if (!ok_or_empty_124082) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_124071, ":",
                              (long long) j_124072,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_124084;
            int64_t redout_124086 = (int64_t) 0;
            
            for (int64_t i_124085 = 0; i_124085 < min_res_114666; i_124085++) {
                int64_t slice_124087 = max_res_124071 + i_124085;
                int64_t x_124088 = ((int64_t *) mem_122044)[slice_124087];
                int64_t abs_arg_124089 = sub64(x_124088, defunc_0_g_res_124050);
                int64_t abs_res_124090 = abs64(abs_arg_124089);
                int64_t defunc_1_op_res_124091 = add64(abs_res_124090,
                                                       redout_124086);
                int64_t redout_tmp_124157 = defunc_1_op_res_124091;
                
                redout_124086 = redout_tmp_124157;
            }
            defunc_2_reduce_res_124084 = redout_124086;
            
            int64_t idx_124092;
            int64_t idx_124093;
            int64_t idx_124094;
            int64_t idx_124095;
            int64_t best_idx_124097;
            int64_t last_idx_124098;
            int64_t best_sum_124099;
            int64_t curr_sum_124100;
            
            best_idx_124097 = max_res_124071;
            last_idx_124098 = max_res_124071;
            best_sum_124099 = defunc_2_reduce_res_124084;
            curr_sum_124100 = defunc_2_reduce_res_124084;
            for (int64_t j_124096 = 0; j_124096 < min_res_114666; j_124096++) {
                int64_t new_idx_124101 = add64(max_res_124071, j_124096);
                int64_t x_124102 = add64(min_res_114666, new_idx_124101);
                bool cond_124103 = slt64(x_114677, x_124102);
                int64_t new_sum_124104;
                
                if (cond_124103) {
                    new_sum_124104 = (int64_t) 9223372036854775807;
                } else {
                    bool x_124105 = sle64((int64_t) 0, last_idx_124098);
                    bool y_124106 = slt64(last_idx_124098, n_114518);
                    bool bounds_check_124107 = x_124105 && y_124106;
                    bool index_certs_124108;
                    
                    if (!bounds_check_124107) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_124098,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114518, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                        return 1;
                    }
                    
                    int64_t y_124109 =
                            ((int64_t *) mem_122044)[last_idx_124098];
                    int64_t binop_p_124110 = sub64(defunc_0_g_res_124050,
                                                   y_124109);
                    int64_t defunc_0_f_res_124111 = abs64(binop_p_124110);
                    int64_t x_124112 = sub64(curr_sum_124100,
                                             defunc_0_f_res_124111);
                    int64_t min_arg_124113 = add64(min_res_114666,
                                                   last_idx_124098);
                    int64_t min_res_124114 = smin64(i_114594, min_arg_124113);
                    bool x_124115 = sle64((int64_t) 0, min_res_124114);
                    bool y_124116 = slt64(min_res_124114, n_114518);
                    bool bounds_check_124117 = x_124115 && y_124116;
                    bool index_certs_124118;
                    
                    if (!bounds_check_124117) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_124114,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114518, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                        return 1;
                    }
                    
                    int64_t y_124119 = ((int64_t *) mem_122044)[min_res_124114];
                    int64_t binop_p_124120 = sub64(defunc_0_g_res_124050,
                                                   y_124119);
                    int64_t defunc_0_f_res_124121 = abs64(binop_p_124120);
                    int64_t new_sum_f_res_124122 = add64(x_124112,
                                                         defunc_0_f_res_124121);
                    
                    new_sum_124104 = new_sum_f_res_124122;
                }
                
                bool cond_124123 = sle64(new_sum_124104, best_sum_124099);
                int64_t loopres_124124;
                
                if (cond_124123) {
                    loopres_124124 = new_idx_124101;
                } else {
                    loopres_124124 = best_idx_124097;
                }
                
                int64_t loopres_124125;
                
                if (cond_124123) {
                    loopres_124125 = new_sum_124104;
                } else {
                    loopres_124125 = best_sum_124099;
                }
                
                int64_t best_idx_tmp_124158 = loopres_124124;
                int64_t last_idx_tmp_124159 = new_idx_124101;
                int64_t best_sum_tmp_124160 = loopres_124125;
                int64_t curr_sum_tmp_124161 = new_sum_124104;
                
                best_idx_124097 = best_idx_tmp_124158;
                last_idx_124098 = last_idx_tmp_124159;
                best_sum_124099 = best_sum_tmp_124160;
                curr_sum_124100 = curr_sum_tmp_124161;
            }
            idx_124092 = best_idx_124097;
            idx_124093 = last_idx_124098;
            idx_124094 = best_sum_124099;
            idx_124095 = curr_sum_124100;
            
            int64_t min_res_124126 = smin64(min_arg_114684, idx_124092);
            int64_t x_124127 = add64(min_res_114666, min_res_124126);
            int64_t r_124128 = sub64(x_124127, (int64_t) 1);
            bool x_124129 = sle64((int64_t) 0, r_124128);
            bool y_124130 = slt64(r_124128, n_114518);
            bool bounds_check_124131 = x_124129 && y_124130;
            bool index_certs_124132;
            
            if (!bounds_check_124131) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_124128,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:386:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124133 = ((int64_t *) mem_121957.mem)[gtid_116856 *
                                                            n_114518 +
                                                            r_124128];
            int64_t abs_arg_124134 = sub64(x_124133, min_res_124049);
            int64_t abs_res_124135 = abs64(abs_arg_124134);
            bool x_124136 = sle64((int64_t) 0, min_res_124126);
            bool y_124137 = slt64(min_res_124126, n_114518);
            bool bounds_check_124138 = x_124136 && y_124137;
            bool index_certs_124139;
            
            if (!bounds_check_124138) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_124126,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:386:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124140 = ((int64_t *) mem_121957.mem)[gtid_116856 *
                                                            n_114518 +
                                                            min_res_124126];
            int64_t abs_arg_124141 = sub64(x_124140, min_res_124049);
            int64_t abs_res_124142 = abs64(abs_arg_124141);
            int64_t max_res_124143 = smax64(abs_res_124135, abs_res_124142);
            float defunc_0_f_res_124144 = sitofp_i64_f32(max_res_124143);
            float defunc_1_f_res_124145 = max_res_114688 +
                  defunc_0_f_res_124144;
            
            ((float *) mem_122071)[i_124045] = defunc_1_f_res_124145;
            ((int64_t *) mem_122074)[i_124045] = min_res_124126;
        }
        memmove(mem_122102.mem + gtid_116856 * l_n_m_114568 * (int64_t) 8,
                mem_122074 + (int64_t) 0, l_n_m_114568 * (int64_t) 8);
        memmove(mem_122106.mem + gtid_116856 * l_n_m_114568 * (int64_t) 4,
                mem_122071 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122041);
    free(mem_122044);
    free(mem_122071);
    free(mem_122074);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131160_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131160_end -
                 futhark_mc_segmap_parloop_131160_start;
        
        ctx->futhark_mc_segmap_parloop_131160_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131160_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131160_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131158(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116855 = tid;
    int num_tasks_124034 = info.nsubtasks;
    struct futhark_mc_task_131157 *futhark_mc_task_131157 =
                                  (struct futhark_mc_task_131157 *) args;
    struct futhark_context *ctx = futhark_mc_task_131157->ctx;
    uint64_t futhark_mc_segmap_task_131158_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131158_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131157->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131157->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131157->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131157->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131157->free_i_114594;
    bool x_114595 = futhark_mc_task_131157->free_x_114595;
    int64_t min_res_114666 = futhark_mc_task_131157->free_min_res_114666;
    bool empty_slice_114671 = futhark_mc_task_131157->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_task_131157->free_m_114672;
    float i64_res_114673 = futhark_mc_task_131157->free_i64_res_114673;
    int64_t bytes_121918 = futhark_mc_task_131157->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131157->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131157->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131157->free_bytes_122033;
    int64_t bytes_122036 = futhark_mc_task_131157->free_bytes_122036;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131157->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131157->free_mem_122106,
                                  .size =0, .references =NULL};
    int64_t iter_124035;
    struct futhark_mc_segmap_parloop_struct_131159
    futhark_mc_segmap_parloop_struct_131159;
    
    futhark_mc_segmap_parloop_struct_131159.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131159.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131159.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131159.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131159.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131159.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131159.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131159.free_min_res_114666 =
        min_res_114666;
    futhark_mc_segmap_parloop_struct_131159.free_empty_slice_114671 =
        empty_slice_114671;
    futhark_mc_segmap_parloop_struct_131159.free_m_114672 = m_114672;
    futhark_mc_segmap_parloop_struct_131159.free_i64_res_114673 =
        i64_res_114673;
    futhark_mc_segmap_parloop_struct_131159.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131159.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131159.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131159.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131159.free_bytes_122036 = bytes_122036;
    futhark_mc_segmap_parloop_struct_131159.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131159.free_mem_122106 = mem_122106.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131160_task;
    
    futhark_mc_segmap_parloop_131160_task.name =
        "futhark_mc_segmap_parloop_131160";
    futhark_mc_segmap_parloop_131160_task.fn = futhark_mc_segmap_parloop_131160;
    futhark_mc_segmap_parloop_131160_task.args =
        &futhark_mc_segmap_parloop_struct_131159;
    futhark_mc_segmap_parloop_131160_task.iterations = iterations;
    futhark_mc_segmap_parloop_131160_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131160_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131160_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131160_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131160_task);
    
    if (futhark_mc_segmap_parloop_131160_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131160_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131160_total_end -
                 futhark_mc_segmap_parloop_131160_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131160_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131160_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131160_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131158_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131158_end -
                 futhark_mc_segmap_task_131158_start;
        
        ctx->futhark_mc_segmap_task_131158_runs[tid]++;
        ctx->futhark_mc_segmap_task_131158_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131158_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131166 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114666;
    bool free_empty_slice_114671;
    int64_t free_m_114672;
    float free_i64_res_114673;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
    int64_t free_bytes_122033;
    int64_t free_bytes_122036;
    char *free_mem_122102;
    char *free_mem_122106;
};
struct futhark_mc_task_131172 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116858;
    char *free_mem_121957;
    char *free_mem_122029;
    char *free_mem_122032;
};
struct futhark_mc_segmap_parloop_struct_131174 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_116858;
    char *free_mem_121957;
    char *free_mem_122029;
    char *free_mem_122032;
};
static int futhark_mc_segmap_parloop_131175(void *args, int64_t start,
                                            int64_t end, int flat_tid_116859,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131174
    *futhark_mc_segmap_parloop_struct_131174 =
    (struct futhark_mc_segmap_parloop_struct_131174 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131174->ctx;
    uint64_t futhark_mc_segmap_parloop_131175_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131175_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131174->free_n_114518;
    int64_t gtid_116858 =
            futhark_mc_segmap_parloop_struct_131174->free_gtid_116858;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131174->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122029 = {.desc ="mem_122029", .mem =
                                  futhark_mc_segmap_parloop_struct_131174->free_mem_122029,
                                  .size =0, .references =NULL};
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_segmap_parloop_struct_131174->free_mem_122032,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124366 = start;
    
    for (; iter_124366 < end; iter_124366++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124367 = n_114518;
        int64_t gtid_116860 = iter_124366;
        int64_t remnant_124368 = iter_124366 - gtid_116860;
        int64_t x_124163 = ((int64_t *) mem_121957.mem)[gtid_116858 * n_114518 +
                                                        gtid_116860];
        int64_t defunc_0_f_res_124164 = add64((int64_t) 1, x_124163);
        bool cond_124165 = slt64(defunc_0_f_res_124164, (int64_t) 0);
        int64_t defunc_0_f_res_124166;
        
        if (cond_124165) {
            defunc_0_f_res_124166 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_124166 = defunc_0_f_res_124164;
        }
        ((int64_t *) mem_122029.mem)[gtid_116860] = defunc_0_f_res_124166;
        ((int64_t *) mem_122032.mem)[gtid_116860] = defunc_0_f_res_124164;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131175_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131175_end -
                 futhark_mc_segmap_parloop_131175_start;
        
        ctx->futhark_mc_segmap_parloop_131175_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131175_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131175_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131173(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116859 = tid;
    int num_tasks_124365 = info.nsubtasks;
    struct futhark_mc_task_131172 *futhark_mc_task_131172 =
                                  (struct futhark_mc_task_131172 *) args;
    struct futhark_context *ctx = futhark_mc_task_131172->ctx;
    uint64_t futhark_mc_segmap_task_131173_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131173_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131172->free_n_114518;
    int64_t gtid_116858 = futhark_mc_task_131172->free_gtid_116858;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131172->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122029 = {.desc ="mem_122029", .mem =
                                  futhark_mc_task_131172->free_mem_122029,
                                  .size =0, .references =NULL};
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_task_131172->free_mem_122032,
                                  .size =0, .references =NULL};
    int64_t iter_124366;
    struct futhark_mc_segmap_parloop_struct_131174
    futhark_mc_segmap_parloop_struct_131174;
    
    futhark_mc_segmap_parloop_struct_131174.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131174.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131174.free_gtid_116858 = gtid_116858;
    futhark_mc_segmap_parloop_struct_131174.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131174.free_mem_122029 = mem_122029.mem;
    futhark_mc_segmap_parloop_struct_131174.free_mem_122032 = mem_122032.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131175_task;
    
    futhark_mc_segmap_parloop_131175_task.name =
        "futhark_mc_segmap_parloop_131175";
    futhark_mc_segmap_parloop_131175_task.fn = futhark_mc_segmap_parloop_131175;
    futhark_mc_segmap_parloop_131175_task.args =
        &futhark_mc_segmap_parloop_struct_131174;
    futhark_mc_segmap_parloop_131175_task.iterations = iterations;
    futhark_mc_segmap_parloop_131175_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131175_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131175_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131175_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131175_task);
    
    if (futhark_mc_segmap_parloop_131175_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131175_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131175_total_end -
                 futhark_mc_segmap_parloop_131175_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131175_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131175_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131175_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131173_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131173_end -
                 futhark_mc_segmap_task_131173_start;
        
        ctx->futhark_mc_segmap_task_131173_runs[tid]++;
        ctx->futhark_mc_segmap_task_131173_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131173_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131176 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114666;
    bool free_empty_slice_114671;
    int64_t free_m_114672;
    int64_t free_gtid_116858;
    int64_t free_x_116967;
    int64_t free_min_arg_116974;
    float free_max_res_116978;
    char *free_mem_121957;
    char *free_mem_122029;
    char *free_mem_122032;
    char *free_mem_122035;
    char *free_mem_122038;
};
struct futhark_mc_segmap_parloop_struct_131178 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114666;
    bool free_empty_slice_114671;
    int64_t free_m_114672;
    int64_t free_gtid_116858;
    int64_t free_x_116967;
    int64_t free_min_arg_116974;
    float free_max_res_116978;
    char *free_mem_121957;
    char *free_mem_122029;
    char *free_mem_122032;
    char *free_mem_122035;
    char *free_mem_122038;
};
static int futhark_mc_segmap_parloop_131179(void *args, int64_t start,
                                            int64_t end, int flat_tid_116861,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131178
    *futhark_mc_segmap_parloop_struct_131178 =
    (struct futhark_mc_segmap_parloop_struct_131178 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131178->ctx;
    uint64_t futhark_mc_segmap_parloop_131179_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131179_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131178->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131178->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131178->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131178->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131178->free_x_114595;
    int64_t min_res_114666 =
            futhark_mc_segmap_parloop_struct_131178->free_min_res_114666;
    bool empty_slice_114671 =
         futhark_mc_segmap_parloop_struct_131178->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_segmap_parloop_struct_131178->free_m_114672;
    int64_t gtid_116858 =
            futhark_mc_segmap_parloop_struct_131178->free_gtid_116858;
    int64_t x_116967 = futhark_mc_segmap_parloop_struct_131178->free_x_116967;
    int64_t min_arg_116974 =
            futhark_mc_segmap_parloop_struct_131178->free_min_arg_116974;
    float max_res_116978 =
          futhark_mc_segmap_parloop_struct_131178->free_max_res_116978;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131178->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122029 = {.desc ="mem_122029", .mem =
                                  futhark_mc_segmap_parloop_struct_131178->free_mem_122029,
                                  .size =0, .references =NULL};
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_segmap_parloop_struct_131178->free_mem_122032,
                                  .size =0, .references =NULL};
    struct memblock mem_122035 = {.desc ="mem_122035", .mem =
                                  futhark_mc_segmap_parloop_struct_131178->free_mem_122035,
                                  .size =0, .references =NULL};
    struct memblock mem_122038 = {.desc ="mem_122038", .mem =
                                  futhark_mc_segmap_parloop_struct_131178->free_mem_122038,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124370 = start;
    
    for (; iter_124370 < end; iter_124370++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124424 = l_n_m_114568;
        int64_t gtid_116862 = iter_124370;
        int64_t remnant_124425 = iter_124370 - gtid_116862;
        int64_t min_arg_124265 = mul64(l_jump_114526, gtid_116862);
        int64_t min_res_124266 = smin64(i_114594, min_arg_124265);
        int64_t defunc_0_g_res_124267 = add64((int64_t) 1, min_res_124266);
        bool nearest_idx_124268;
        int64_t nearest_idx_124269;
        int64_t nearest_idx_124270;
        bool loop_while_124371;
        int64_t low_124372;
        int64_t high_124373;
        
        loop_while_124371 = x_114595;
        low_124372 = (int64_t) 0;
        high_124373 = i_114594;
        while (loop_while_124371) {
            int64_t x_124374 = add64(low_124372, high_124373);
            int64_t mid_124375 = sdiv64(x_124374, (int64_t) 2);
            bool x_124376 = sle64((int64_t) 0, mid_124375);
            bool y_124377 = slt64(mid_124375, n_114518);
            bool bounds_check_124378 = x_124376 && y_124377;
            bool index_certs_124379;
            
            if (!bounds_check_124378) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124375,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124380 = ((int64_t *) mem_122029.mem)[mid_124375];
            bool cond_124381 = sle64(defunc_0_g_res_124267, x_124380);
            int64_t loopres_124382;
            int64_t loopres_124383;
            
            if (cond_124381) {
                int64_t loopres_t_res_124384 = sub64(mid_124375, (int64_t) 1);
                
                loopres_124382 = low_124372;
                loopres_124383 = loopres_t_res_124384;
            } else {
                int64_t loopres_f_res_124385 = add64((int64_t) 1, mid_124375);
                
                loopres_124382 = loopres_f_res_124385;
                loopres_124383 = high_124373;
            }
            
            bool loop_cond_124386 = sle64(loopres_124382, loopres_124383);
            bool loop_while_tmp_124426 = loop_cond_124386;
            int64_t low_tmp_124427 = loopres_124382;
            int64_t high_tmp_124428 = loopres_124383;
            
            loop_while_124371 = loop_while_tmp_124426;
            low_124372 = low_tmp_124427;
            high_124373 = high_tmp_124428;
        }
        nearest_idx_124268 = loop_while_124371;
        nearest_idx_124269 = low_124372;
        nearest_idx_124270 = high_124373;
        
        int64_t max_arg_124287 = sub64(nearest_idx_124269, min_res_114666);
        int64_t max_res_124288 = smax64((int64_t) 0, max_arg_124287);
        int64_t j_124289 = add64(min_res_114666, max_res_124288);
        int64_t i_p_m_t_s_124290 = add64(m_114672, max_res_124288);
        bool zzero_leq_i_p_m_t_s_124291 = sle64((int64_t) 0, i_p_m_t_s_124290);
        bool i_p_m_t_s_leq_w_124292 = slt64(i_p_m_t_s_124290, n_114518);
        bool zzero_lte_i_124293 = sle64((int64_t) 0, max_res_124288);
        bool i_lte_j_124294 = sle64(max_res_124288, j_124289);
        bool y_124295 = i_p_m_t_s_leq_w_124292 && zzero_lte_i_124293;
        bool y_124296 = zzero_leq_i_p_m_t_s_124291 && y_124295;
        bool y_124297 = i_lte_j_124294 && y_124296;
        bool forwards_ok_124298 = zzero_lte_i_124293 && y_124297;
        bool ok_or_empty_124299 = empty_slice_114671 || forwards_ok_124298;
        bool index_certs_124300;
        
        if (!ok_or_empty_124299) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124288, ":",
                          (long long) j_124289,
                          "] out of bounds for array of shape [",
                          (long long) n_114518, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124301;
        int64_t redout_124388 = (int64_t) 0;
        
        for (int64_t i_124387 = 0; i_124387 < min_res_114666; i_124387++) {
            int64_t slice_124389 = max_res_124288 + i_124387;
            int64_t x_124390 = ((int64_t *) mem_122032.mem)[slice_124389];
            int64_t abs_arg_124391 = sub64(x_124390, defunc_0_g_res_124267);
            int64_t abs_res_124392 = abs64(abs_arg_124391);
            int64_t defunc_1_op_res_124393 = add64(abs_res_124392,
                                                   redout_124388);
            int64_t redout_tmp_124429 = defunc_1_op_res_124393;
            
            redout_124388 = redout_tmp_124429;
        }
        defunc_2_reduce_res_124301 = redout_124388;
        
        int64_t idx_124309;
        int64_t idx_124310;
        int64_t idx_124311;
        int64_t idx_124312;
        int64_t best_idx_124395;
        int64_t last_idx_124396;
        int64_t best_sum_124397;
        int64_t curr_sum_124398;
        
        best_idx_124395 = max_res_124288;
        last_idx_124396 = max_res_124288;
        best_sum_124397 = defunc_2_reduce_res_124301;
        curr_sum_124398 = defunc_2_reduce_res_124301;
        for (int64_t j_124394 = 0; j_124394 < min_res_114666; j_124394++) {
            int64_t new_idx_124399 = add64(max_res_124288, j_124394);
            int64_t x_124400 = add64(min_res_114666, new_idx_124399);
            bool cond_124401 = slt64(x_116967, x_124400);
            int64_t new_sum_124402;
            
            if (cond_124401) {
                new_sum_124402 = (int64_t) 9223372036854775807;
            } else {
                bool x_124403 = sle64((int64_t) 0, last_idx_124396);
                bool y_124404 = slt64(last_idx_124396, n_114518);
                bool bounds_check_124405 = x_124403 && y_124404;
                bool index_certs_124406;
                
                if (!bounds_check_124405) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124396,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124407 =
                        ((int64_t *) mem_122032.mem)[last_idx_124396];
                int64_t binop_p_124408 = sub64(defunc_0_g_res_124267, y_124407);
                int64_t defunc_0_f_res_124409 = abs64(binop_p_124408);
                int64_t x_124410 = sub64(curr_sum_124398,
                                         defunc_0_f_res_124409);
                int64_t min_arg_124411 = add64(min_res_114666, last_idx_124396);
                int64_t min_res_124412 = smin64(i_114594, min_arg_124411);
                bool x_124413 = sle64((int64_t) 0, min_res_124412);
                bool y_124414 = slt64(min_res_124412, n_114518);
                bool bounds_check_124415 = x_124413 && y_124414;
                bool index_certs_124416;
                
                if (!bounds_check_124415) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124412,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124417 = ((int64_t *) mem_122032.mem)[min_res_124412];
                int64_t binop_p_124418 = sub64(defunc_0_g_res_124267, y_124417);
                int64_t defunc_0_f_res_124419 = abs64(binop_p_124418);
                int64_t new_sum_f_res_124420 = add64(x_124410,
                                                     defunc_0_f_res_124419);
                
                new_sum_124402 = new_sum_f_res_124420;
            }
            
            bool cond_124421 = sle64(new_sum_124402, best_sum_124397);
            int64_t loopres_124422;
            
            if (cond_124421) {
                loopres_124422 = new_idx_124399;
            } else {
                loopres_124422 = best_idx_124395;
            }
            
            int64_t loopres_124423;
            
            if (cond_124421) {
                loopres_124423 = new_sum_124402;
            } else {
                loopres_124423 = best_sum_124397;
            }
            
            int64_t best_idx_tmp_124430 = loopres_124422;
            int64_t last_idx_tmp_124431 = new_idx_124399;
            int64_t best_sum_tmp_124432 = loopres_124423;
            int64_t curr_sum_tmp_124433 = new_sum_124402;
            
            best_idx_124395 = best_idx_tmp_124430;
            last_idx_124396 = last_idx_tmp_124431;
            best_sum_124397 = best_sum_tmp_124432;
            curr_sum_124398 = curr_sum_tmp_124433;
        }
        idx_124309 = best_idx_124395;
        idx_124310 = last_idx_124396;
        idx_124311 = best_sum_124397;
        idx_124312 = curr_sum_124398;
        
        int64_t min_res_124343 = smin64(min_arg_116974, idx_124309);
        int64_t x_124344 = add64(min_res_114666, min_res_124343);
        int64_t r_124345 = sub64(x_124344, (int64_t) 1);
        bool x_124346 = sle64((int64_t) 0, r_124345);
        bool y_124347 = slt64(r_124345, n_114518);
        bool bounds_check_124348 = x_124346 && y_124347;
        bool index_certs_124349;
        
        if (!bounds_check_124348) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124345,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124350 = ((int64_t *) mem_121957.mem)[gtid_116858 * n_114518 +
                                                        r_124345];
        int64_t abs_arg_124351 = sub64(x_124350, min_res_124266);
        int64_t abs_res_124352 = abs64(abs_arg_124351);
        bool x_124353 = sle64((int64_t) 0, min_res_124343);
        bool y_124354 = slt64(min_res_124343, n_114518);
        bool bounds_check_124355 = x_124353 && y_124354;
        bool index_certs_124356;
        
        if (!bounds_check_124355) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124343,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124357 = ((int64_t *) mem_121957.mem)[gtid_116858 * n_114518 +
                                                        min_res_124343];
        int64_t abs_arg_124358 = sub64(x_124357, min_res_124266);
        int64_t abs_res_124359 = abs64(abs_arg_124358);
        int64_t max_res_124360 = smax64(abs_res_124352, abs_res_124359);
        float defunc_0_f_res_124361 = sitofp_i64_f32(max_res_124360);
        float defunc_1_f_res_124362 = max_res_116978 + defunc_0_f_res_124361;
        
        ((float *) mem_122035.mem)[gtid_116862] = defunc_1_f_res_124362;
        ((int64_t *) mem_122038.mem)[gtid_116862] = min_res_124343;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131179_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131179_end -
                 futhark_mc_segmap_parloop_131179_start;
        
        ctx->futhark_mc_segmap_parloop_131179_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131179_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131179_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131177(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116861 = tid;
    int num_tasks_124369 = info.nsubtasks;
    struct futhark_mc_task_131176 *futhark_mc_task_131176 =
                                  (struct futhark_mc_task_131176 *) args;
    struct futhark_context *ctx = futhark_mc_task_131176->ctx;
    uint64_t futhark_mc_segmap_task_131177_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131177_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131176->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131176->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131176->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131176->free_i_114594;
    bool x_114595 = futhark_mc_task_131176->free_x_114595;
    int64_t min_res_114666 = futhark_mc_task_131176->free_min_res_114666;
    bool empty_slice_114671 = futhark_mc_task_131176->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_task_131176->free_m_114672;
    int64_t gtid_116858 = futhark_mc_task_131176->free_gtid_116858;
    int64_t x_116967 = futhark_mc_task_131176->free_x_116967;
    int64_t min_arg_116974 = futhark_mc_task_131176->free_min_arg_116974;
    float max_res_116978 = futhark_mc_task_131176->free_max_res_116978;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131176->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122029 = {.desc ="mem_122029", .mem =
                                  futhark_mc_task_131176->free_mem_122029,
                                  .size =0, .references =NULL};
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_task_131176->free_mem_122032,
                                  .size =0, .references =NULL};
    struct memblock mem_122035 = {.desc ="mem_122035", .mem =
                                  futhark_mc_task_131176->free_mem_122035,
                                  .size =0, .references =NULL};
    struct memblock mem_122038 = {.desc ="mem_122038", .mem =
                                  futhark_mc_task_131176->free_mem_122038,
                                  .size =0, .references =NULL};
    int64_t iter_124370;
    struct futhark_mc_segmap_parloop_struct_131178
    futhark_mc_segmap_parloop_struct_131178;
    
    futhark_mc_segmap_parloop_struct_131178.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131178.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131178.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131178.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131178.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131178.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131178.free_min_res_114666 =
        min_res_114666;
    futhark_mc_segmap_parloop_struct_131178.free_empty_slice_114671 =
        empty_slice_114671;
    futhark_mc_segmap_parloop_struct_131178.free_m_114672 = m_114672;
    futhark_mc_segmap_parloop_struct_131178.free_gtid_116858 = gtid_116858;
    futhark_mc_segmap_parloop_struct_131178.free_x_116967 = x_116967;
    futhark_mc_segmap_parloop_struct_131178.free_min_arg_116974 =
        min_arg_116974;
    futhark_mc_segmap_parloop_struct_131178.free_max_res_116978 =
        max_res_116978;
    futhark_mc_segmap_parloop_struct_131178.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131178.free_mem_122029 = mem_122029.mem;
    futhark_mc_segmap_parloop_struct_131178.free_mem_122032 = mem_122032.mem;
    futhark_mc_segmap_parloop_struct_131178.free_mem_122035 = mem_122035.mem;
    futhark_mc_segmap_parloop_struct_131178.free_mem_122038 = mem_122038.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131179_task;
    
    futhark_mc_segmap_parloop_131179_task.name =
        "futhark_mc_segmap_parloop_131179";
    futhark_mc_segmap_parloop_131179_task.fn = futhark_mc_segmap_parloop_131179;
    futhark_mc_segmap_parloop_131179_task.args =
        &futhark_mc_segmap_parloop_struct_131178;
    futhark_mc_segmap_parloop_131179_task.iterations = iterations;
    futhark_mc_segmap_parloop_131179_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131179_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131179_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131179_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131179_task);
    
    if (futhark_mc_segmap_parloop_131179_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131179_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131179_total_end -
                 futhark_mc_segmap_parloop_131179_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131179_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131179_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131179_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131177_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131177_end -
                 futhark_mc_segmap_task_131177_start;
        
        ctx->futhark_mc_segmap_task_131177_runs[tid]++;
        ctx->futhark_mc_segmap_task_131177_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131177_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131181 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114666;
    bool free_empty_slice_114671;
    int64_t free_m_114672;
    int64_t free_gtid_116858;
    int64_t free_x_116967;
    int64_t free_min_arg_116974;
    float free_max_res_116978;
    char *free_mem_121957;
    char *free_mem_122029;
    char *free_mem_122032;
    char *free_mem_122035;
    char *free_mem_122038;
};
struct futhark_mc_task_131183 {
    struct futhark_context *ctx;
    char *free_mem_122032;
    int64_t free_defunc_0_g_res_124169;
    int64_t free_max_res_124190;
    int64_t *retval_defunc_2_reduce_res_124203;
};
struct futhark_mc_segred_stage_1_parloop_struct_131186 {
    struct futhark_context *ctx;
    char *free_mem_122032;
    int64_t free_defunc_0_g_res_124169;
    int64_t free_max_res_124190;
    char *free_reduce_stage_1_tid_res_arr_mem_124494;
};
static int futhark_mc_segred_stage_1_parloop_131187(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116865,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131186
    *futhark_mc_segred_stage_1_parloop_struct_131186 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131186 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131186->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131187_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131187_start = get_wall_time();
    
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131186->free_mem_122032,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124169 =
            futhark_mc_segred_stage_1_parloop_struct_131186->free_defunc_0_g_res_124169;
    int64_t max_res_124190 =
            futhark_mc_segred_stage_1_parloop_struct_131186->free_max_res_124190;
    struct memblock reduce_stage_1_tid_res_arr_mem_124494 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124494",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131186->free_reduce_stage_1_tid_res_arr_mem_124494,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124496 = start;
    int64_t x_124451;
    int64_t x_124452;
    int64_t local_acc_124497 = (int64_t) 0;
    
    for (; iter_124496 < end; iter_124496++) {
        int64_t gtid_116866 = iter_124496;
        int64_t slice_124454 = gtid_116866 + max_res_124190;
        int64_t x_124455 = ((int64_t *) mem_122032.mem)[slice_124454];
        int64_t abs_arg_124456 = sub64(x_124455, defunc_0_g_res_124169);
        int64_t abs_res_124457 = abs64(abs_arg_124456);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124451 = local_acc_124497;
        }
        // Load next params
        {
            x_124452 = abs_res_124457;
        }
        // Red body
        {
            int64_t defunc_1_op_res_124453 = add64(x_124451, x_124452);
            
            local_acc_124497 = defunc_1_op_res_124453;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124494.mem)[flat_tid_116865] =
        local_acc_124497;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131187_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131187_end -
                 futhark_mc_segred_stage_1_parloop_131187_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131187_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131187_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131187_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131184(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116865 = tid;
    int num_tasks_124493 = info.nsubtasks;
    struct futhark_mc_task_131183 *futhark_mc_task_131183 =
                                  (struct futhark_mc_task_131183 *) args;
    struct futhark_context *ctx = futhark_mc_task_131183->ctx;
    uint64_t futhark_mc_segred_task_131184_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131184_start = get_wall_time();
    
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_task_131183->free_mem_122032,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124169 =
            futhark_mc_task_131183->free_defunc_0_g_res_124169;
    int64_t max_res_124190 = futhark_mc_task_131183->free_max_res_124190;
    int64_t defunc_2_reduce_res_124203 =
            *futhark_mc_task_131183->retval_defunc_2_reduce_res_124203;
    size_t reduce_stage_1_tid_res_arr_mem_124494_cached_sizze_131185 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124494 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124494_cached_sizze_131185 <
        (size_t) ((int64_t) 8 * num_tasks_124493)) {
        reduce_stage_1_tid_res_arr_mem_124494 =
            realloc(reduce_stage_1_tid_res_arr_mem_124494, (int64_t) 8 *
                    num_tasks_124493);
        reduce_stage_1_tid_res_arr_mem_124494_cached_sizze_131185 =
            (int64_t) 8 * num_tasks_124493;
    }
    
    int64_t iter_124496;
    struct futhark_mc_segred_stage_1_parloop_struct_131186
    futhark_mc_segred_stage_1_parloop_struct_131186;
    
    futhark_mc_segred_stage_1_parloop_struct_131186.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131186.free_mem_122032 =
        mem_122032.mem;
    futhark_mc_segred_stage_1_parloop_struct_131186.free_defunc_0_g_res_124169 =
        defunc_0_g_res_124169;
    futhark_mc_segred_stage_1_parloop_struct_131186.free_max_res_124190 =
        max_res_124190;
    futhark_mc_segred_stage_1_parloop_struct_131186.free_reduce_stage_1_tid_res_arr_mem_124494 =
        reduce_stage_1_tid_res_arr_mem_124494;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131187_task;
    
    futhark_mc_segred_stage_1_parloop_131187_task.name =
        "futhark_mc_segred_stage_1_parloop_131187";
    futhark_mc_segred_stage_1_parloop_131187_task.fn =
        futhark_mc_segred_stage_1_parloop_131187;
    futhark_mc_segred_stage_1_parloop_131187_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131186;
    futhark_mc_segred_stage_1_parloop_131187_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131187_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131187_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131187_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131187_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131187_task);
    
    if (futhark_mc_segred_stage_1_parloop_131187_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131187_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131187_total_end -
                 futhark_mc_segred_stage_1_parloop_131187_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131187_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131187_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131187_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124203 = (int64_t) 0;
    }
    
    int64_t x_124498;
    int64_t x_124499;
    
    for (int32_t i_124501 = 0; i_124501 < num_tasks_124493; i_124501++) {
        flat_tid_116865 = i_124501;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124498 = defunc_2_reduce_res_124203;
            }
            // load next params
            {
                x_124499 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124494)[flat_tid_116865];
            }
            // red body
            {
                int64_t defunc_1_op_res_124500 = add64(x_124498, x_124499);
                
                defunc_2_reduce_res_124203 = defunc_1_op_res_124500;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124494);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131184_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131184_end -
                 futhark_mc_segred_task_131184_start;
        
        ctx->futhark_mc_segred_task_131184_runs[tid]++;
        ctx->futhark_mc_segred_task_131184_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131184_iter[tid] += iterations;
    }
    *futhark_mc_task_131183->retval_defunc_2_reduce_res_124203 =
        defunc_2_reduce_res_124203;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131182(void *args, int64_t start,
                                            int64_t end, int flat_tid_116863,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131181
    *futhark_mc_segmap_parloop_struct_131181 =
    (struct futhark_mc_segmap_parloop_struct_131181 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131181->ctx;
    uint64_t futhark_mc_segmap_parloop_131182_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131182_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131181->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131181->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131181->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131181->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131181->free_x_114595;
    int64_t min_res_114666 =
            futhark_mc_segmap_parloop_struct_131181->free_min_res_114666;
    bool empty_slice_114671 =
         futhark_mc_segmap_parloop_struct_131181->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_segmap_parloop_struct_131181->free_m_114672;
    int64_t gtid_116858 =
            futhark_mc_segmap_parloop_struct_131181->free_gtid_116858;
    int64_t x_116967 = futhark_mc_segmap_parloop_struct_131181->free_x_116967;
    int64_t min_arg_116974 =
            futhark_mc_segmap_parloop_struct_131181->free_min_arg_116974;
    float max_res_116978 =
          futhark_mc_segmap_parloop_struct_131181->free_max_res_116978;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131181->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122029 = {.desc ="mem_122029", .mem =
                                  futhark_mc_segmap_parloop_struct_131181->free_mem_122029,
                                  .size =0, .references =NULL};
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_segmap_parloop_struct_131181->free_mem_122032,
                                  .size =0, .references =NULL};
    struct memblock mem_122035 = {.desc ="mem_122035", .mem =
                                  futhark_mc_segmap_parloop_struct_131181->free_mem_122035,
                                  .size =0, .references =NULL};
    struct memblock mem_122038 = {.desc ="mem_122038", .mem =
                                  futhark_mc_segmap_parloop_struct_131181->free_mem_122038,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124434 = start;
    
    for (; iter_124434 < end; iter_124434++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124488 = l_n_m_114568;
        int64_t gtid_116864 = iter_124434;
        int64_t remnant_124489 = iter_124434 - gtid_116864;
        int64_t min_arg_124167 = mul64(l_jump_114526, gtid_116864);
        int64_t min_res_124168 = smin64(i_114594, min_arg_124167);
        int64_t defunc_0_g_res_124169 = add64((int64_t) 1, min_res_124168);
        bool nearest_idx_124170;
        int64_t nearest_idx_124171;
        int64_t nearest_idx_124172;
        bool loop_while_124435;
        int64_t low_124436;
        int64_t high_124437;
        
        loop_while_124435 = x_114595;
        low_124436 = (int64_t) 0;
        high_124437 = i_114594;
        while (loop_while_124435) {
            int64_t x_124438 = add64(low_124436, high_124437);
            int64_t mid_124439 = sdiv64(x_124438, (int64_t) 2);
            bool x_124440 = sle64((int64_t) 0, mid_124439);
            bool y_124441 = slt64(mid_124439, n_114518);
            bool bounds_check_124442 = x_124440 && y_124441;
            bool index_certs_124443;
            
            if (!bounds_check_124442) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124439,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124444 = ((int64_t *) mem_122029.mem)[mid_124439];
            bool cond_124445 = sle64(defunc_0_g_res_124169, x_124444);
            int64_t loopres_124446;
            int64_t loopres_124447;
            
            if (cond_124445) {
                int64_t loopres_t_res_124448 = sub64(mid_124439, (int64_t) 1);
                
                loopres_124446 = low_124436;
                loopres_124447 = loopres_t_res_124448;
            } else {
                int64_t loopres_f_res_124449 = add64((int64_t) 1, mid_124439);
                
                loopres_124446 = loopres_f_res_124449;
                loopres_124447 = high_124437;
            }
            
            bool loop_cond_124450 = sle64(loopres_124446, loopres_124447);
            bool loop_while_tmp_124490 = loop_cond_124450;
            int64_t low_tmp_124491 = loopres_124446;
            int64_t high_tmp_124492 = loopres_124447;
            
            loop_while_124435 = loop_while_tmp_124490;
            low_124436 = low_tmp_124491;
            high_124437 = high_tmp_124492;
        }
        nearest_idx_124170 = loop_while_124435;
        nearest_idx_124171 = low_124436;
        nearest_idx_124172 = high_124437;
        
        int64_t max_arg_124189 = sub64(nearest_idx_124171, min_res_114666);
        int64_t max_res_124190 = smax64((int64_t) 0, max_arg_124189);
        int64_t j_124191 = add64(min_res_114666, max_res_124190);
        int64_t i_p_m_t_s_124192 = add64(m_114672, max_res_124190);
        bool zzero_leq_i_p_m_t_s_124193 = sle64((int64_t) 0, i_p_m_t_s_124192);
        bool i_p_m_t_s_leq_w_124194 = slt64(i_p_m_t_s_124192, n_114518);
        bool zzero_lte_i_124195 = sle64((int64_t) 0, max_res_124190);
        bool i_lte_j_124196 = sle64(max_res_124190, j_124191);
        bool y_124197 = i_p_m_t_s_leq_w_124194 && zzero_lte_i_124195;
        bool y_124198 = zzero_leq_i_p_m_t_s_124193 && y_124197;
        bool y_124199 = i_lte_j_124196 && y_124198;
        bool forwards_ok_124200 = zzero_lte_i_124195 && y_124199;
        bool ok_or_empty_124201 = empty_slice_114671 || forwards_ok_124200;
        bool index_certs_124202;
        
        if (!ok_or_empty_124201) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124190, ":",
                          (long long) j_124191,
                          "] out of bounds for array of shape [",
                          (long long) n_114518, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124203;
        int64_t flat_tid_116865 = (int64_t) 0;
        int32_t num_tasks_124493;
        struct futhark_mc_task_131183 futhark_mc_task_131183;
        
        futhark_mc_task_131183.ctx = ctx;
        futhark_mc_task_131183.free_mem_122032 = mem_122032.mem;
        futhark_mc_task_131183.free_defunc_0_g_res_124169 =
            defunc_0_g_res_124169;
        futhark_mc_task_131183.free_max_res_124190 = max_res_124190;
        futhark_mc_task_131183.retval_defunc_2_reduce_res_124203 =
            &defunc_2_reduce_res_124203;
        
        struct scheduler_segop futhark_mc_task_131183_task;
        
        futhark_mc_task_131183_task.args = &futhark_mc_task_131183;
        futhark_mc_task_131183_task.top_level_fn =
            futhark_mc_segred_task_131184;
        futhark_mc_task_131183_task.name = "futhark_mc_segred_task_131184";
        futhark_mc_task_131183_task.iterations = min_res_114666;
        futhark_mc_task_131183_task.task_time =
            &ctx->futhark_mc_segred_task_131184_total_time;
        futhark_mc_task_131183_task.task_iter =
            &ctx->futhark_mc_segred_task_131184_total_iter;
        futhark_mc_task_131183_task.sched = STATIC;
        futhark_mc_task_131183_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131184_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131183_task);
        
        if (futhark_mc_segred_task_131184_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_124211;
        int64_t idx_124212;
        int64_t idx_124213;
        int64_t idx_124214;
        int64_t best_idx_124459;
        int64_t last_idx_124460;
        int64_t best_sum_124461;
        int64_t curr_sum_124462;
        
        best_idx_124459 = max_res_124190;
        last_idx_124460 = max_res_124190;
        best_sum_124461 = defunc_2_reduce_res_124203;
        curr_sum_124462 = defunc_2_reduce_res_124203;
        for (int64_t j_124458 = 0; j_124458 < min_res_114666; j_124458++) {
            int64_t new_idx_124463 = add64(max_res_124190, j_124458);
            int64_t x_124464 = add64(min_res_114666, new_idx_124463);
            bool cond_124465 = slt64(x_116967, x_124464);
            int64_t new_sum_124466;
            
            if (cond_124465) {
                new_sum_124466 = (int64_t) 9223372036854775807;
            } else {
                bool x_124467 = sle64((int64_t) 0, last_idx_124460);
                bool y_124468 = slt64(last_idx_124460, n_114518);
                bool bounds_check_124469 = x_124467 && y_124468;
                bool index_certs_124470;
                
                if (!bounds_check_124469) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124460,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124471 =
                        ((int64_t *) mem_122032.mem)[last_idx_124460];
                int64_t binop_p_124472 = sub64(defunc_0_g_res_124169, y_124471);
                int64_t defunc_0_f_res_124473 = abs64(binop_p_124472);
                int64_t x_124474 = sub64(curr_sum_124462,
                                         defunc_0_f_res_124473);
                int64_t min_arg_124475 = add64(min_res_114666, last_idx_124460);
                int64_t min_res_124476 = smin64(i_114594, min_arg_124475);
                bool x_124477 = sle64((int64_t) 0, min_res_124476);
                bool y_124478 = slt64(min_res_124476, n_114518);
                bool bounds_check_124479 = x_124477 && y_124478;
                bool index_certs_124480;
                
                if (!bounds_check_124479) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124476,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124481 = ((int64_t *) mem_122032.mem)[min_res_124476];
                int64_t binop_p_124482 = sub64(defunc_0_g_res_124169, y_124481);
                int64_t defunc_0_f_res_124483 = abs64(binop_p_124482);
                int64_t new_sum_f_res_124484 = add64(x_124474,
                                                     defunc_0_f_res_124483);
                
                new_sum_124466 = new_sum_f_res_124484;
            }
            
            bool cond_124485 = sle64(new_sum_124466, best_sum_124461);
            int64_t loopres_124486;
            
            if (cond_124485) {
                loopres_124486 = new_idx_124463;
            } else {
                loopres_124486 = best_idx_124459;
            }
            
            int64_t loopres_124487;
            
            if (cond_124485) {
                loopres_124487 = new_sum_124466;
            } else {
                loopres_124487 = best_sum_124461;
            }
            
            int64_t best_idx_tmp_124502 = loopres_124486;
            int64_t last_idx_tmp_124503 = new_idx_124463;
            int64_t best_sum_tmp_124504 = loopres_124487;
            int64_t curr_sum_tmp_124505 = new_sum_124466;
            
            best_idx_124459 = best_idx_tmp_124502;
            last_idx_124460 = last_idx_tmp_124503;
            best_sum_124461 = best_sum_tmp_124504;
            curr_sum_124462 = curr_sum_tmp_124505;
        }
        idx_124211 = best_idx_124459;
        idx_124212 = last_idx_124460;
        idx_124213 = best_sum_124461;
        idx_124214 = curr_sum_124462;
        
        int64_t min_res_124245 = smin64(min_arg_116974, idx_124211);
        int64_t x_124246 = add64(min_res_114666, min_res_124245);
        int64_t r_124247 = sub64(x_124246, (int64_t) 1);
        bool x_124248 = sle64((int64_t) 0, r_124247);
        bool y_124249 = slt64(r_124247, n_114518);
        bool bounds_check_124250 = x_124248 && y_124249;
        bool index_certs_124251;
        
        if (!bounds_check_124250) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124247,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124252 = ((int64_t *) mem_121957.mem)[gtid_116858 * n_114518 +
                                                        r_124247];
        int64_t abs_arg_124253 = sub64(x_124252, min_res_124168);
        int64_t abs_res_124254 = abs64(abs_arg_124253);
        bool x_124255 = sle64((int64_t) 0, min_res_124245);
        bool y_124256 = slt64(min_res_124245, n_114518);
        bool bounds_check_124257 = x_124255 && y_124256;
        bool index_certs_124258;
        
        if (!bounds_check_124257) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124245,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:166:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:164:5-167:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124259 = ((int64_t *) mem_121957.mem)[gtid_116858 * n_114518 +
                                                        min_res_124245];
        int64_t abs_arg_124260 = sub64(x_124259, min_res_124168);
        int64_t abs_res_124261 = abs64(abs_arg_124260);
        int64_t max_res_124262 = smax64(abs_res_124254, abs_res_124261);
        float defunc_0_f_res_124263 = sitofp_i64_f32(max_res_124262);
        float defunc_1_f_res_124264 = max_res_116978 + defunc_0_f_res_124263;
        
        ((float *) mem_122035.mem)[gtid_116864] = defunc_1_f_res_124264;
        ((int64_t *) mem_122038.mem)[gtid_116864] = min_res_124245;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131182_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131182_end -
                 futhark_mc_segmap_parloop_131182_start;
        
        ctx->futhark_mc_segmap_parloop_131182_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131182_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131182_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131180(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116863 = tid;
    int num_tasks_124369 = info.nsubtasks;
    struct futhark_mc_task_131176 *futhark_mc_task_131176 =
                                  (struct futhark_mc_task_131176 *) args;
    struct futhark_context *ctx = futhark_mc_task_131176->ctx;
    uint64_t futhark_mc_segmap_nested_task_131180_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131180_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131176->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131176->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131176->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131176->free_i_114594;
    bool x_114595 = futhark_mc_task_131176->free_x_114595;
    int64_t min_res_114666 = futhark_mc_task_131176->free_min_res_114666;
    bool empty_slice_114671 = futhark_mc_task_131176->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_task_131176->free_m_114672;
    int64_t gtid_116858 = futhark_mc_task_131176->free_gtid_116858;
    int64_t x_116967 = futhark_mc_task_131176->free_x_116967;
    int64_t min_arg_116974 = futhark_mc_task_131176->free_min_arg_116974;
    float max_res_116978 = futhark_mc_task_131176->free_max_res_116978;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131176->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122029 = {.desc ="mem_122029", .mem =
                                  futhark_mc_task_131176->free_mem_122029,
                                  .size =0, .references =NULL};
    struct memblock mem_122032 = {.desc ="mem_122032", .mem =
                                  futhark_mc_task_131176->free_mem_122032,
                                  .size =0, .references =NULL};
    struct memblock mem_122035 = {.desc ="mem_122035", .mem =
                                  futhark_mc_task_131176->free_mem_122035,
                                  .size =0, .references =NULL};
    struct memblock mem_122038 = {.desc ="mem_122038", .mem =
                                  futhark_mc_task_131176->free_mem_122038,
                                  .size =0, .references =NULL};
    int64_t iter_124434;
    struct futhark_mc_segmap_parloop_struct_131181
    futhark_mc_segmap_parloop_struct_131181;
    
    futhark_mc_segmap_parloop_struct_131181.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131181.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131181.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131181.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131181.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131181.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131181.free_min_res_114666 =
        min_res_114666;
    futhark_mc_segmap_parloop_struct_131181.free_empty_slice_114671 =
        empty_slice_114671;
    futhark_mc_segmap_parloop_struct_131181.free_m_114672 = m_114672;
    futhark_mc_segmap_parloop_struct_131181.free_gtid_116858 = gtid_116858;
    futhark_mc_segmap_parloop_struct_131181.free_x_116967 = x_116967;
    futhark_mc_segmap_parloop_struct_131181.free_min_arg_116974 =
        min_arg_116974;
    futhark_mc_segmap_parloop_struct_131181.free_max_res_116978 =
        max_res_116978;
    futhark_mc_segmap_parloop_struct_131181.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131181.free_mem_122029 = mem_122029.mem;
    futhark_mc_segmap_parloop_struct_131181.free_mem_122032 = mem_122032.mem;
    futhark_mc_segmap_parloop_struct_131181.free_mem_122035 = mem_122035.mem;
    futhark_mc_segmap_parloop_struct_131181.free_mem_122038 = mem_122038.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131182_task;
    
    futhark_mc_segmap_parloop_131182_task.name =
        "futhark_mc_segmap_parloop_131182";
    futhark_mc_segmap_parloop_131182_task.fn = futhark_mc_segmap_parloop_131182;
    futhark_mc_segmap_parloop_131182_task.args =
        &futhark_mc_segmap_parloop_struct_131181;
    futhark_mc_segmap_parloop_131182_task.iterations = iterations;
    futhark_mc_segmap_parloop_131182_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131182_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131182_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131182_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131182_task);
    
    if (futhark_mc_segmap_parloop_131182_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131182_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131182_total_end -
                 futhark_mc_segmap_parloop_131182_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131182_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131182_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131182_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131180_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131180_end -
                 futhark_mc_segmap_nested_task_131180_start;
        
        ctx->futhark_mc_segmap_nested_task_131180_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131180_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131180_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131167(void *args, int64_t start,
                                            int64_t end, int flat_tid_116857,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131166
    *futhark_mc_segmap_parloop_struct_131166 =
    (struct futhark_mc_segmap_parloop_struct_131166 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131166->ctx;
    uint64_t futhark_mc_segmap_parloop_131167_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131167_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131166->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131166->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131166->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131166->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131166->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131166->free_x_114595;
    int64_t min_res_114666 =
            futhark_mc_segmap_parloop_struct_131166->free_min_res_114666;
    bool empty_slice_114671 =
         futhark_mc_segmap_parloop_struct_131166->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_segmap_parloop_struct_131166->free_m_114672;
    float i64_res_114673 =
          futhark_mc_segmap_parloop_struct_131166->free_i64_res_114673;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131166->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131166->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131166->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131166->free_bytes_122033;
    int64_t bytes_122036 =
            futhark_mc_segmap_parloop_struct_131166->free_bytes_122036;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131166->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131166->free_mem_122106,
                                  .size =0, .references =NULL};
    size_t mem_122029_cached_sizze_131168 = 0;
    char *mem_122029 = NULL;
    size_t mem_122032_cached_sizze_131169 = 0;
    char *mem_122032 = NULL;
    size_t mem_122035_cached_sizze_131170 = 0;
    char *mem_122035 = NULL;
    size_t mem_122038_cached_sizze_131171 = 0;
    char *mem_122038 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124162 = start;
    
    if (mem_122029_cached_sizze_131168 < (size_t) bytes_121918) {
        mem_122029 = realloc(mem_122029, bytes_121918);
        mem_122029_cached_sizze_131168 = bytes_121918;
    }
    if (mem_122032_cached_sizze_131169 < (size_t) bytes_121918) {
        mem_122032 = realloc(mem_122032, bytes_121918);
        mem_122032_cached_sizze_131169 = bytes_121918;
    }
    if (mem_122035_cached_sizze_131170 < (size_t) bytes_122033) {
        mem_122035 = realloc(mem_122035, bytes_122033);
        mem_122035_cached_sizze_131170 = bytes_122033;
    }
    if (mem_122038_cached_sizze_131171 < (size_t) bytes_122036) {
        mem_122038 = realloc(mem_122038, bytes_122036);
        mem_122038_cached_sizze_131171 = bytes_122036;
    }
    for (; iter_124162 < end; iter_124162++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124363 = m_114517;
        int64_t gtid_116858 = iter_124162;
        int64_t remnant_124364 = iter_124162 - gtid_116858;
        int64_t x_116967 = ((int64_t *) mem_121960.mem)[gtid_116858];
        int64_t flat_tid_116859 = (int64_t) 0;
        int32_t num_tasks_124365;
        struct futhark_mc_task_131172 futhark_mc_task_131172;
        
        futhark_mc_task_131172.ctx = ctx;
        futhark_mc_task_131172.free_n_114518 = n_114518;
        futhark_mc_task_131172.free_gtid_116858 = gtid_116858;
        futhark_mc_task_131172.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131172.free_mem_122029 = mem_122029;
        futhark_mc_task_131172.free_mem_122032 = mem_122032;
        
        struct scheduler_segop futhark_mc_task_131172_task;
        
        futhark_mc_task_131172_task.args = &futhark_mc_task_131172;
        futhark_mc_task_131172_task.top_level_fn =
            futhark_mc_segmap_task_131173;
        futhark_mc_task_131172_task.name = "futhark_mc_segmap_task_131173";
        futhark_mc_task_131172_task.iterations = n_114518;
        futhark_mc_task_131172_task.task_time =
            &ctx->futhark_mc_segmap_task_131173_total_time;
        futhark_mc_task_131172_task.task_iter =
            &ctx->futhark_mc_segmap_task_131173_total_iter;
        futhark_mc_task_131172_task.sched = STATIC;
        futhark_mc_task_131172_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131173_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131172_task);
        
        if (futhark_mc_segmap_task_131173_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_116974 = sub64(x_116967, min_res_114666);
        float i64_res_116975 = sitofp_i64_f32(x_116967);
        float x_116976 = i64_res_114673 - i64_res_116975;
        float max_arg_116977 = x_116976 / 2.0F;
        float max_res_116978 = fmax32(0.0F, max_arg_116977);
        int64_t flat_tid_116861 = (int64_t) 0;
        int32_t num_tasks_124369;
        int64_t flat_tid_116863 = (int64_t) 0;
        struct futhark_mc_task_131176 futhark_mc_task_131176;
        
        futhark_mc_task_131176.ctx = ctx;
        futhark_mc_task_131176.free_n_114518 = n_114518;
        futhark_mc_task_131176.free_l_jump_114526 = l_jump_114526;
        futhark_mc_task_131176.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131176.free_i_114594 = i_114594;
        futhark_mc_task_131176.free_x_114595 = x_114595;
        futhark_mc_task_131176.free_min_res_114666 = min_res_114666;
        futhark_mc_task_131176.free_empty_slice_114671 = empty_slice_114671;
        futhark_mc_task_131176.free_m_114672 = m_114672;
        futhark_mc_task_131176.free_gtid_116858 = gtid_116858;
        futhark_mc_task_131176.free_x_116967 = x_116967;
        futhark_mc_task_131176.free_min_arg_116974 = min_arg_116974;
        futhark_mc_task_131176.free_max_res_116978 = max_res_116978;
        futhark_mc_task_131176.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131176.free_mem_122029 = mem_122029;
        futhark_mc_task_131176.free_mem_122032 = mem_122032;
        futhark_mc_task_131176.free_mem_122035 = mem_122035;
        futhark_mc_task_131176.free_mem_122038 = mem_122038;
        
        struct scheduler_segop futhark_mc_task_131176_task;
        
        futhark_mc_task_131176_task.args = &futhark_mc_task_131176;
        futhark_mc_task_131176_task.top_level_fn =
            futhark_mc_segmap_task_131177;
        futhark_mc_task_131176_task.name = "futhark_mc_segmap_task_131177";
        futhark_mc_task_131176_task.iterations = l_n_m_114568;
        futhark_mc_task_131176_task.task_time =
            &ctx->futhark_mc_segmap_task_131177_total_time;
        futhark_mc_task_131176_task.task_iter =
            &ctx->futhark_mc_segmap_task_131177_total_iter;
        futhark_mc_task_131176_task.sched = DYNAMIC;
        futhark_mc_task_131176_task.nested_fn =
            futhark_mc_segmap_nested_task_131180;
        
        int futhark_mc_segmap_task_131177_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131176_task);
        
        if (futhark_mc_segmap_task_131177_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122102.mem + gtid_116858 * l_n_m_114568 * (int64_t) 8,
                mem_122038 + (int64_t) 0, l_n_m_114568 * (int64_t) 8);
        memmove(mem_122106.mem + gtid_116858 * l_n_m_114568 * (int64_t) 4,
                mem_122035 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122029);
    free(mem_122032);
    free(mem_122035);
    free(mem_122038);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131167_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131167_end -
                 futhark_mc_segmap_parloop_131167_start;
        
        ctx->futhark_mc_segmap_parloop_131167_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131167_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131167_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131165(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116857 = tid;
    int num_tasks_124034 = info.nsubtasks;
    struct futhark_mc_task_131157 *futhark_mc_task_131157 =
                                  (struct futhark_mc_task_131157 *) args;
    struct futhark_context *ctx = futhark_mc_task_131157->ctx;
    uint64_t futhark_mc_segmap_nested_task_131165_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131165_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131157->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131157->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131157->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131157->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131157->free_i_114594;
    bool x_114595 = futhark_mc_task_131157->free_x_114595;
    int64_t min_res_114666 = futhark_mc_task_131157->free_min_res_114666;
    bool empty_slice_114671 = futhark_mc_task_131157->free_empty_slice_114671;
    int64_t m_114672 = futhark_mc_task_131157->free_m_114672;
    float i64_res_114673 = futhark_mc_task_131157->free_i64_res_114673;
    int64_t bytes_121918 = futhark_mc_task_131157->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131157->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131157->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131157->free_bytes_122033;
    int64_t bytes_122036 = futhark_mc_task_131157->free_bytes_122036;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131157->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131157->free_mem_122106,
                                  .size =0, .references =NULL};
    int64_t iter_124162;
    struct futhark_mc_segmap_parloop_struct_131166
    futhark_mc_segmap_parloop_struct_131166;
    
    futhark_mc_segmap_parloop_struct_131166.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131166.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131166.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131166.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131166.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131166.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131166.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131166.free_min_res_114666 =
        min_res_114666;
    futhark_mc_segmap_parloop_struct_131166.free_empty_slice_114671 =
        empty_slice_114671;
    futhark_mc_segmap_parloop_struct_131166.free_m_114672 = m_114672;
    futhark_mc_segmap_parloop_struct_131166.free_i64_res_114673 =
        i64_res_114673;
    futhark_mc_segmap_parloop_struct_131166.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131166.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131166.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131166.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131166.free_bytes_122036 = bytes_122036;
    futhark_mc_segmap_parloop_struct_131166.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131166.free_mem_122106 = mem_122106.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131167_task;
    
    futhark_mc_segmap_parloop_131167_task.name =
        "futhark_mc_segmap_parloop_131167";
    futhark_mc_segmap_parloop_131167_task.fn = futhark_mc_segmap_parloop_131167;
    futhark_mc_segmap_parloop_131167_task.args =
        &futhark_mc_segmap_parloop_struct_131166;
    futhark_mc_segmap_parloop_131167_task.iterations = iterations;
    futhark_mc_segmap_parloop_131167_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131167_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131167_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131167_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131167_task);
    
    if (futhark_mc_segmap_parloop_131167_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131167_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131167_total_end -
                 futhark_mc_segmap_parloop_131167_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131167_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131167_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131167_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131165_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131165_end -
                 futhark_mc_segmap_nested_task_131165_start;
        
        ctx->futhark_mc_segmap_nested_task_131165_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131165_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131165_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131188 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114792;
    bool free_empty_slice_114797;
    int64_t free_m_114798;
    float free_i64_res_114799;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
    int64_t free_bytes_122113;
    int64_t free_bytes_122116;
    char *free_mem_122182;
    char *free_mem_122186;
};
struct futhark_mc_segmap_parloop_struct_131190 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114792;
    bool free_empty_slice_114797;
    int64_t free_m_114798;
    float free_i64_res_114799;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
    int64_t free_bytes_122113;
    int64_t free_bytes_122116;
    char *free_mem_122182;
    char *free_mem_122186;
};
static int futhark_mc_segmap_parloop_131191(void *args, int64_t start,
                                            int64_t end, int flat_tid_117179,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131190
    *futhark_mc_segmap_parloop_struct_131190 =
    (struct futhark_mc_segmap_parloop_struct_131190 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131190->ctx;
    uint64_t futhark_mc_segmap_parloop_131191_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131191_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131190->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131190->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131190->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131190->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131190->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131190->free_x_114595;
    int64_t min_res_114792 =
            futhark_mc_segmap_parloop_struct_131190->free_min_res_114792;
    bool empty_slice_114797 =
         futhark_mc_segmap_parloop_struct_131190->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_segmap_parloop_struct_131190->free_m_114798;
    float i64_res_114799 =
          futhark_mc_segmap_parloop_struct_131190->free_i64_res_114799;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131190->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131190->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131190->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131190->free_bytes_122113;
    int64_t bytes_122116 =
            futhark_mc_segmap_parloop_struct_131190->free_bytes_122116;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131190->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131190->free_mem_122186,
                                  .size =0, .references =NULL};
    size_t mem_122121_cached_sizze_131192 = 0;
    char *mem_122121 = NULL;
    size_t mem_122124_cached_sizze_131193 = 0;
    char *mem_122124 = NULL;
    size_t mem_122151_cached_sizze_131194 = 0;
    char *mem_122151 = NULL;
    size_t mem_122154_cached_sizze_131195 = 0;
    char *mem_122154 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124507 = start;
    
    if (mem_122121_cached_sizze_131192 < (size_t) bytes_121918) {
        mem_122121 = realloc(mem_122121, bytes_121918);
        mem_122121_cached_sizze_131192 = bytes_121918;
    }
    if (mem_122124_cached_sizze_131193 < (size_t) bytes_121918) {
        mem_122124 = realloc(mem_122124, bytes_121918);
        mem_122124_cached_sizze_131193 = bytes_121918;
    }
    if (mem_122151_cached_sizze_131194 < (size_t) bytes_122113) {
        mem_122151 = realloc(mem_122151, bytes_122113);
        mem_122151_cached_sizze_131194 = bytes_122113;
    }
    if (mem_122154_cached_sizze_131195 < (size_t) bytes_122116) {
        mem_122154 = realloc(mem_122154, bytes_122116);
        mem_122154_cached_sizze_131195 = bytes_122116;
    }
    for (; iter_124507 < end; iter_124507++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124620 = m_114517;
        int64_t gtid_117180 = iter_124507;
        int64_t remnant_124621 = iter_124507 - gtid_117180;
        int64_t x_114803 = ((int64_t *) mem_121960.mem)[gtid_117180];
        
        for (int64_t i_124508 = 0; i_124508 < n_114518; i_124508++) {
            int64_t x_124511 = ((int64_t *) mem_121957.mem)[gtid_117180 *
                                                            n_114518 +
                                                            i_124508];
            int64_t defunc_0_f_res_124512 = add64((int64_t) 1, x_124511);
            bool cond_124513 = slt64(defunc_0_f_res_124512, (int64_t) 0);
            int64_t defunc_0_f_res_124514;
            
            if (cond_124513) {
                defunc_0_f_res_124514 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_124514 = defunc_0_f_res_124512;
            }
            ((int64_t *) mem_122121)[i_124508] = defunc_0_f_res_124514;
            ((int64_t *) mem_122124)[i_124508] = defunc_0_f_res_124512;
        }
        
        int64_t min_arg_114810 = sub64(x_114803, min_res_114792);
        float i64_res_114811 = sitofp_i64_f32(x_114803);
        float x_114812 = i64_res_114799 - i64_res_114811;
        float max_arg_114813 = x_114812 / 2.0F;
        float max_res_114814 = fmax32(0.0F, max_arg_114813);
        
        for (int64_t i_124517 = 0; i_124517 < t_n_m_114575; i_124517++) {
            int64_t min_arg_124520 = mul64(t_jump_114525, i_124517);
            int64_t min_res_124521 = smin64(i_114594, min_arg_124520);
            int64_t defunc_0_g_res_124522 = add64((int64_t) 1, min_res_124521);
            bool nearest_idx_124523;
            int64_t nearest_idx_124524;
            int64_t nearest_idx_124525;
            bool loop_while_124526;
            int64_t low_124527;
            int64_t high_124528;
            
            loop_while_124526 = x_114595;
            low_124527 = (int64_t) 0;
            high_124528 = i_114594;
            while (loop_while_124526) {
                int64_t x_124529 = add64(low_124527, high_124528);
                int64_t mid_124530 = sdiv64(x_124529, (int64_t) 2);
                bool x_124531 = sle64((int64_t) 0, mid_124530);
                bool y_124532 = slt64(mid_124530, n_114518);
                bool bounds_check_124533 = x_124531 && y_124532;
                bool index_certs_124534;
                
                if (!bounds_check_124533) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_124530,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t x_124535 = ((int64_t *) mem_122121)[mid_124530];
                bool cond_124536 = sle64(defunc_0_g_res_124522, x_124535);
                int64_t loopres_124537;
                int64_t loopres_124538;
                
                if (cond_124536) {
                    int64_t loopres_t_res_124539 = sub64(mid_124530,
                                                         (int64_t) 1);
                    
                    loopres_124537 = low_124527;
                    loopres_124538 = loopres_t_res_124539;
                } else {
                    int64_t loopres_f_res_124540 = add64((int64_t) 1,
                                                         mid_124530);
                    
                    loopres_124537 = loopres_f_res_124540;
                    loopres_124538 = high_124528;
                }
                
                bool loop_cond_124541 = sle64(loopres_124537, loopres_124538);
                bool loop_while_tmp_124626 = loop_cond_124541;
                int64_t low_tmp_124627 = loopres_124537;
                int64_t high_tmp_124628 = loopres_124538;
                
                loop_while_124526 = loop_while_tmp_124626;
                low_124527 = low_tmp_124627;
                high_124528 = high_tmp_124628;
            }
            nearest_idx_124523 = loop_while_124526;
            nearest_idx_124524 = low_124527;
            nearest_idx_124525 = high_124528;
            
            int64_t max_arg_124542 = sub64(nearest_idx_124524, min_res_114792);
            int64_t max_res_124543 = smax64((int64_t) 0, max_arg_124542);
            int64_t j_124544 = add64(min_res_114792, max_res_124543);
            int64_t i_p_m_t_s_124545 = add64(m_114798, max_res_124543);
            bool zzero_leq_i_p_m_t_s_124546 = sle64((int64_t) 0,
                                                    i_p_m_t_s_124545);
            bool i_p_m_t_s_leq_w_124547 = slt64(i_p_m_t_s_124545, n_114518);
            bool zzero_lte_i_124548 = sle64((int64_t) 0, max_res_124543);
            bool i_lte_j_124549 = sle64(max_res_124543, j_124544);
            bool y_124550 = i_p_m_t_s_leq_w_124547 && zzero_lte_i_124548;
            bool y_124551 = zzero_leq_i_p_m_t_s_124546 && y_124550;
            bool y_124552 = i_lte_j_124549 && y_124551;
            bool forwards_ok_124553 = zzero_lte_i_124548 && y_124552;
            bool ok_or_empty_124554 = empty_slice_114797 || forwards_ok_124553;
            bool index_certs_124555;
            
            if (!ok_or_empty_124554) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_124543, ":",
                              (long long) j_124544,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_124556;
            int64_t redout_124558 = (int64_t) 0;
            
            for (int64_t i_124557 = 0; i_124557 < min_res_114792; i_124557++) {
                int64_t slice_124559 = max_res_124543 + i_124557;
                int64_t x_124560 = ((int64_t *) mem_122124)[slice_124559];
                int64_t abs_arg_124561 = sub64(x_124560, defunc_0_g_res_124522);
                int64_t abs_res_124562 = abs64(abs_arg_124561);
                int64_t defunc_1_op_res_124563 = add64(abs_res_124562,
                                                       redout_124558);
                int64_t redout_tmp_124629 = defunc_1_op_res_124563;
                
                redout_124558 = redout_tmp_124629;
            }
            defunc_2_reduce_res_124556 = redout_124558;
            
            int64_t idx_124564;
            int64_t idx_124565;
            int64_t idx_124566;
            int64_t idx_124567;
            int64_t best_idx_124569;
            int64_t last_idx_124570;
            int64_t best_sum_124571;
            int64_t curr_sum_124572;
            
            best_idx_124569 = max_res_124543;
            last_idx_124570 = max_res_124543;
            best_sum_124571 = defunc_2_reduce_res_124556;
            curr_sum_124572 = defunc_2_reduce_res_124556;
            for (int64_t j_124568 = 0; j_124568 < min_res_114792; j_124568++) {
                int64_t new_idx_124573 = add64(max_res_124543, j_124568);
                int64_t x_124574 = add64(min_res_114792, new_idx_124573);
                bool cond_124575 = slt64(x_114803, x_124574);
                int64_t new_sum_124576;
                
                if (cond_124575) {
                    new_sum_124576 = (int64_t) 9223372036854775807;
                } else {
                    bool x_124577 = sle64((int64_t) 0, last_idx_124570);
                    bool y_124578 = slt64(last_idx_124570, n_114518);
                    bool bounds_check_124579 = x_124577 && y_124578;
                    bool index_certs_124580;
                    
                    if (!bounds_check_124579) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_124570,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114518, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                        return 1;
                    }
                    
                    int64_t y_124581 =
                            ((int64_t *) mem_122124)[last_idx_124570];
                    int64_t binop_p_124582 = sub64(defunc_0_g_res_124522,
                                                   y_124581);
                    int64_t defunc_0_f_res_124583 = abs64(binop_p_124582);
                    int64_t x_124584 = sub64(curr_sum_124572,
                                             defunc_0_f_res_124583);
                    int64_t min_arg_124585 = add64(min_res_114792,
                                                   last_idx_124570);
                    int64_t min_res_124586 = smin64(i_114594, min_arg_124585);
                    bool x_124587 = sle64((int64_t) 0, min_res_124586);
                    bool y_124588 = slt64(min_res_124586, n_114518);
                    bool bounds_check_124589 = x_124587 && y_124588;
                    bool index_certs_124590;
                    
                    if (!bounds_check_124589) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_124586,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114518, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                        return 1;
                    }
                    
                    int64_t y_124591 = ((int64_t *) mem_122124)[min_res_124586];
                    int64_t binop_p_124592 = sub64(defunc_0_g_res_124522,
                                                   y_124591);
                    int64_t defunc_0_f_res_124593 = abs64(binop_p_124592);
                    int64_t new_sum_f_res_124594 = add64(x_124584,
                                                         defunc_0_f_res_124593);
                    
                    new_sum_124576 = new_sum_f_res_124594;
                }
                
                bool cond_124595 = sle64(new_sum_124576, best_sum_124571);
                int64_t loopres_124596;
                
                if (cond_124595) {
                    loopres_124596 = new_idx_124573;
                } else {
                    loopres_124596 = best_idx_124569;
                }
                
                int64_t loopres_124597;
                
                if (cond_124595) {
                    loopres_124597 = new_sum_124576;
                } else {
                    loopres_124597 = best_sum_124571;
                }
                
                int64_t best_idx_tmp_124630 = loopres_124596;
                int64_t last_idx_tmp_124631 = new_idx_124573;
                int64_t best_sum_tmp_124632 = loopres_124597;
                int64_t curr_sum_tmp_124633 = new_sum_124576;
                
                best_idx_124569 = best_idx_tmp_124630;
                last_idx_124570 = last_idx_tmp_124631;
                best_sum_124571 = best_sum_tmp_124632;
                curr_sum_124572 = curr_sum_tmp_124633;
            }
            idx_124564 = best_idx_124569;
            idx_124565 = last_idx_124570;
            idx_124566 = best_sum_124571;
            idx_124567 = curr_sum_124572;
            
            int64_t min_res_124598 = smin64(min_arg_114810, idx_124564);
            int64_t x_124599 = add64(min_res_114792, min_res_124598);
            int64_t r_124600 = sub64(x_124599, (int64_t) 1);
            bool x_124601 = sle64((int64_t) 0, r_124600);
            bool y_124602 = slt64(r_124600, n_114518);
            bool bounds_check_124603 = x_124601 && y_124602;
            bool index_certs_124604;
            
            if (!bounds_check_124603) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_124600,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:386:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124605 = ((int64_t *) mem_121957.mem)[gtid_117180 *
                                                            n_114518 +
                                                            r_124600];
            int64_t abs_arg_124606 = sub64(x_124605, min_res_124521);
            int64_t abs_res_124607 = abs64(abs_arg_124606);
            bool x_124608 = sle64((int64_t) 0, min_res_124598);
            bool y_124609 = slt64(min_res_124598, n_114518);
            bool bounds_check_124610 = x_124608 && y_124609;
            bool index_certs_124611;
            
            if (!bounds_check_124610) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_124598,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:386:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124612 = ((int64_t *) mem_121957.mem)[gtid_117180 *
                                                            n_114518 +
                                                            min_res_124598];
            int64_t abs_arg_124613 = sub64(x_124612, min_res_124521);
            int64_t abs_res_124614 = abs64(abs_arg_124613);
            int64_t max_res_124615 = smax64(abs_res_124607, abs_res_124614);
            float defunc_0_f_res_124616 = sitofp_i64_f32(max_res_124615);
            float defunc_1_f_res_124617 = max_res_114814 +
                  defunc_0_f_res_124616;
            
            ((float *) mem_122151)[i_124517] = defunc_1_f_res_124617;
            ((int64_t *) mem_122154)[i_124517] = min_res_124598;
        }
        memmove(mem_122182.mem + gtid_117180 * t_n_m_114575 * (int64_t) 8,
                mem_122154 + (int64_t) 0, t_n_m_114575 * (int64_t) 8);
        memmove(mem_122186.mem + gtid_117180 * t_n_m_114575 * (int64_t) 4,
                mem_122151 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122121);
    free(mem_122124);
    free(mem_122151);
    free(mem_122154);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131191_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131191_end -
                 futhark_mc_segmap_parloop_131191_start;
        
        ctx->futhark_mc_segmap_parloop_131191_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131191_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131191_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131189(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117179 = tid;
    int num_tasks_124506 = info.nsubtasks;
    struct futhark_mc_task_131188 *futhark_mc_task_131188 =
                                  (struct futhark_mc_task_131188 *) args;
    struct futhark_context *ctx = futhark_mc_task_131188->ctx;
    uint64_t futhark_mc_segmap_task_131189_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131189_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131188->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131188->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131188->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131188->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131188->free_i_114594;
    bool x_114595 = futhark_mc_task_131188->free_x_114595;
    int64_t min_res_114792 = futhark_mc_task_131188->free_min_res_114792;
    bool empty_slice_114797 = futhark_mc_task_131188->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_task_131188->free_m_114798;
    float i64_res_114799 = futhark_mc_task_131188->free_i64_res_114799;
    int64_t bytes_121918 = futhark_mc_task_131188->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131188->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131188->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131188->free_bytes_122113;
    int64_t bytes_122116 = futhark_mc_task_131188->free_bytes_122116;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131188->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131188->free_mem_122186,
                                  .size =0, .references =NULL};
    int64_t iter_124507;
    struct futhark_mc_segmap_parloop_struct_131190
    futhark_mc_segmap_parloop_struct_131190;
    
    futhark_mc_segmap_parloop_struct_131190.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131190.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131190.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131190.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131190.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131190.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131190.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131190.free_min_res_114792 =
        min_res_114792;
    futhark_mc_segmap_parloop_struct_131190.free_empty_slice_114797 =
        empty_slice_114797;
    futhark_mc_segmap_parloop_struct_131190.free_m_114798 = m_114798;
    futhark_mc_segmap_parloop_struct_131190.free_i64_res_114799 =
        i64_res_114799;
    futhark_mc_segmap_parloop_struct_131190.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131190.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131190.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131190.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131190.free_bytes_122116 = bytes_122116;
    futhark_mc_segmap_parloop_struct_131190.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131190.free_mem_122186 = mem_122186.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131191_task;
    
    futhark_mc_segmap_parloop_131191_task.name =
        "futhark_mc_segmap_parloop_131191";
    futhark_mc_segmap_parloop_131191_task.fn = futhark_mc_segmap_parloop_131191;
    futhark_mc_segmap_parloop_131191_task.args =
        &futhark_mc_segmap_parloop_struct_131190;
    futhark_mc_segmap_parloop_131191_task.iterations = iterations;
    futhark_mc_segmap_parloop_131191_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131191_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131191_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131191_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131191_task);
    
    if (futhark_mc_segmap_parloop_131191_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131191_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131191_total_end -
                 futhark_mc_segmap_parloop_131191_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131191_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131191_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131191_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131189_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131189_end -
                 futhark_mc_segmap_task_131189_start;
        
        ctx->futhark_mc_segmap_task_131189_runs[tid]++;
        ctx->futhark_mc_segmap_task_131189_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131189_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131197 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114792;
    bool free_empty_slice_114797;
    int64_t free_m_114798;
    float free_i64_res_114799;
    int64_t free_bytes_121918;
    char *free_mem_121957;
    char *free_mem_121960;
    int64_t free_bytes_122113;
    int64_t free_bytes_122116;
    char *free_mem_122182;
    char *free_mem_122186;
};
struct futhark_mc_task_131203 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117182;
    char *free_mem_121957;
    char *free_mem_122109;
    char *free_mem_122112;
};
struct futhark_mc_segmap_parloop_struct_131205 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117182;
    char *free_mem_121957;
    char *free_mem_122109;
    char *free_mem_122112;
};
static int futhark_mc_segmap_parloop_131206(void *args, int64_t start,
                                            int64_t end, int flat_tid_117183,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131205
    *futhark_mc_segmap_parloop_struct_131205 =
    (struct futhark_mc_segmap_parloop_struct_131205 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131205->ctx;
    uint64_t futhark_mc_segmap_parloop_131206_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131206_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131205->free_n_114518;
    int64_t gtid_117182 =
            futhark_mc_segmap_parloop_struct_131205->free_gtid_117182;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131205->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122109 = {.desc ="mem_122109", .mem =
                                  futhark_mc_segmap_parloop_struct_131205->free_mem_122109,
                                  .size =0, .references =NULL};
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_segmap_parloop_struct_131205->free_mem_122112,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124838 = start;
    
    for (; iter_124838 < end; iter_124838++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124839 = n_114518;
        int64_t gtid_117184 = iter_124838;
        int64_t remnant_124840 = iter_124838 - gtid_117184;
        int64_t x_124635 = ((int64_t *) mem_121957.mem)[gtid_117182 * n_114518 +
                                                        gtid_117184];
        int64_t defunc_0_f_res_124636 = add64((int64_t) 1, x_124635);
        bool cond_124637 = slt64(defunc_0_f_res_124636, (int64_t) 0);
        int64_t defunc_0_f_res_124638;
        
        if (cond_124637) {
            defunc_0_f_res_124638 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_124638 = defunc_0_f_res_124636;
        }
        ((int64_t *) mem_122109.mem)[gtid_117184] = defunc_0_f_res_124638;
        ((int64_t *) mem_122112.mem)[gtid_117184] = defunc_0_f_res_124636;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131206_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131206_end -
                 futhark_mc_segmap_parloop_131206_start;
        
        ctx->futhark_mc_segmap_parloop_131206_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131206_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131206_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131204(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117183 = tid;
    int num_tasks_124837 = info.nsubtasks;
    struct futhark_mc_task_131203 *futhark_mc_task_131203 =
                                  (struct futhark_mc_task_131203 *) args;
    struct futhark_context *ctx = futhark_mc_task_131203->ctx;
    uint64_t futhark_mc_segmap_task_131204_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131204_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131203->free_n_114518;
    int64_t gtid_117182 = futhark_mc_task_131203->free_gtid_117182;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131203->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122109 = {.desc ="mem_122109", .mem =
                                  futhark_mc_task_131203->free_mem_122109,
                                  .size =0, .references =NULL};
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_task_131203->free_mem_122112,
                                  .size =0, .references =NULL};
    int64_t iter_124838;
    struct futhark_mc_segmap_parloop_struct_131205
    futhark_mc_segmap_parloop_struct_131205;
    
    futhark_mc_segmap_parloop_struct_131205.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131205.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131205.free_gtid_117182 = gtid_117182;
    futhark_mc_segmap_parloop_struct_131205.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131205.free_mem_122109 = mem_122109.mem;
    futhark_mc_segmap_parloop_struct_131205.free_mem_122112 = mem_122112.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131206_task;
    
    futhark_mc_segmap_parloop_131206_task.name =
        "futhark_mc_segmap_parloop_131206";
    futhark_mc_segmap_parloop_131206_task.fn = futhark_mc_segmap_parloop_131206;
    futhark_mc_segmap_parloop_131206_task.args =
        &futhark_mc_segmap_parloop_struct_131205;
    futhark_mc_segmap_parloop_131206_task.iterations = iterations;
    futhark_mc_segmap_parloop_131206_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131206_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131206_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131206_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131206_task);
    
    if (futhark_mc_segmap_parloop_131206_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131206_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131206_total_end -
                 futhark_mc_segmap_parloop_131206_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131206_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131206_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131206_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131204_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131204_end -
                 futhark_mc_segmap_task_131204_start;
        
        ctx->futhark_mc_segmap_task_131204_runs[tid]++;
        ctx->futhark_mc_segmap_task_131204_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131204_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131207 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114792;
    bool free_empty_slice_114797;
    int64_t free_m_114798;
    int64_t free_gtid_117182;
    int64_t free_x_117291;
    int64_t free_min_arg_117298;
    float free_max_res_117302;
    char *free_mem_121957;
    char *free_mem_122109;
    char *free_mem_122112;
    char *free_mem_122115;
    char *free_mem_122118;
};
struct futhark_mc_segmap_parloop_struct_131209 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114792;
    bool free_empty_slice_114797;
    int64_t free_m_114798;
    int64_t free_gtid_117182;
    int64_t free_x_117291;
    int64_t free_min_arg_117298;
    float free_max_res_117302;
    char *free_mem_121957;
    char *free_mem_122109;
    char *free_mem_122112;
    char *free_mem_122115;
    char *free_mem_122118;
};
static int futhark_mc_segmap_parloop_131210(void *args, int64_t start,
                                            int64_t end, int flat_tid_117185,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131209
    *futhark_mc_segmap_parloop_struct_131209 =
    (struct futhark_mc_segmap_parloop_struct_131209 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131209->ctx;
    uint64_t futhark_mc_segmap_parloop_131210_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131210_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131209->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131209->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131209->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131209->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131209->free_x_114595;
    int64_t min_res_114792 =
            futhark_mc_segmap_parloop_struct_131209->free_min_res_114792;
    bool empty_slice_114797 =
         futhark_mc_segmap_parloop_struct_131209->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_segmap_parloop_struct_131209->free_m_114798;
    int64_t gtid_117182 =
            futhark_mc_segmap_parloop_struct_131209->free_gtid_117182;
    int64_t x_117291 = futhark_mc_segmap_parloop_struct_131209->free_x_117291;
    int64_t min_arg_117298 =
            futhark_mc_segmap_parloop_struct_131209->free_min_arg_117298;
    float max_res_117302 =
          futhark_mc_segmap_parloop_struct_131209->free_max_res_117302;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131209->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122109 = {.desc ="mem_122109", .mem =
                                  futhark_mc_segmap_parloop_struct_131209->free_mem_122109,
                                  .size =0, .references =NULL};
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_segmap_parloop_struct_131209->free_mem_122112,
                                  .size =0, .references =NULL};
    struct memblock mem_122115 = {.desc ="mem_122115", .mem =
                                  futhark_mc_segmap_parloop_struct_131209->free_mem_122115,
                                  .size =0, .references =NULL};
    struct memblock mem_122118 = {.desc ="mem_122118", .mem =
                                  futhark_mc_segmap_parloop_struct_131209->free_mem_122118,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124842 = start;
    
    for (; iter_124842 < end; iter_124842++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124896 = t_n_m_114575;
        int64_t gtid_117186 = iter_124842;
        int64_t remnant_124897 = iter_124842 - gtid_117186;
        int64_t min_arg_124737 = mul64(t_jump_114525, gtid_117186);
        int64_t min_res_124738 = smin64(i_114594, min_arg_124737);
        int64_t defunc_0_g_res_124739 = add64((int64_t) 1, min_res_124738);
        bool nearest_idx_124740;
        int64_t nearest_idx_124741;
        int64_t nearest_idx_124742;
        bool loop_while_124843;
        int64_t low_124844;
        int64_t high_124845;
        
        loop_while_124843 = x_114595;
        low_124844 = (int64_t) 0;
        high_124845 = i_114594;
        while (loop_while_124843) {
            int64_t x_124846 = add64(low_124844, high_124845);
            int64_t mid_124847 = sdiv64(x_124846, (int64_t) 2);
            bool x_124848 = sle64((int64_t) 0, mid_124847);
            bool y_124849 = slt64(mid_124847, n_114518);
            bool bounds_check_124850 = x_124848 && y_124849;
            bool index_certs_124851;
            
            if (!bounds_check_124850) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124847,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124852 = ((int64_t *) mem_122109.mem)[mid_124847];
            bool cond_124853 = sle64(defunc_0_g_res_124739, x_124852);
            int64_t loopres_124854;
            int64_t loopres_124855;
            
            if (cond_124853) {
                int64_t loopres_t_res_124856 = sub64(mid_124847, (int64_t) 1);
                
                loopres_124854 = low_124844;
                loopres_124855 = loopres_t_res_124856;
            } else {
                int64_t loopres_f_res_124857 = add64((int64_t) 1, mid_124847);
                
                loopres_124854 = loopres_f_res_124857;
                loopres_124855 = high_124845;
            }
            
            bool loop_cond_124858 = sle64(loopres_124854, loopres_124855);
            bool loop_while_tmp_124898 = loop_cond_124858;
            int64_t low_tmp_124899 = loopres_124854;
            int64_t high_tmp_124900 = loopres_124855;
            
            loop_while_124843 = loop_while_tmp_124898;
            low_124844 = low_tmp_124899;
            high_124845 = high_tmp_124900;
        }
        nearest_idx_124740 = loop_while_124843;
        nearest_idx_124741 = low_124844;
        nearest_idx_124742 = high_124845;
        
        int64_t max_arg_124759 = sub64(nearest_idx_124741, min_res_114792);
        int64_t max_res_124760 = smax64((int64_t) 0, max_arg_124759);
        int64_t j_124761 = add64(min_res_114792, max_res_124760);
        int64_t i_p_m_t_s_124762 = add64(m_114798, max_res_124760);
        bool zzero_leq_i_p_m_t_s_124763 = sle64((int64_t) 0, i_p_m_t_s_124762);
        bool i_p_m_t_s_leq_w_124764 = slt64(i_p_m_t_s_124762, n_114518);
        bool zzero_lte_i_124765 = sle64((int64_t) 0, max_res_124760);
        bool i_lte_j_124766 = sle64(max_res_124760, j_124761);
        bool y_124767 = i_p_m_t_s_leq_w_124764 && zzero_lte_i_124765;
        bool y_124768 = zzero_leq_i_p_m_t_s_124763 && y_124767;
        bool y_124769 = i_lte_j_124766 && y_124768;
        bool forwards_ok_124770 = zzero_lte_i_124765 && y_124769;
        bool ok_or_empty_124771 = empty_slice_114797 || forwards_ok_124770;
        bool index_certs_124772;
        
        if (!ok_or_empty_124771) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124760, ":",
                          (long long) j_124761,
                          "] out of bounds for array of shape [",
                          (long long) n_114518, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124773;
        int64_t redout_124860 = (int64_t) 0;
        
        for (int64_t i_124859 = 0; i_124859 < min_res_114792; i_124859++) {
            int64_t slice_124861 = max_res_124760 + i_124859;
            int64_t x_124862 = ((int64_t *) mem_122112.mem)[slice_124861];
            int64_t abs_arg_124863 = sub64(x_124862, defunc_0_g_res_124739);
            int64_t abs_res_124864 = abs64(abs_arg_124863);
            int64_t defunc_1_op_res_124865 = add64(abs_res_124864,
                                                   redout_124860);
            int64_t redout_tmp_124901 = defunc_1_op_res_124865;
            
            redout_124860 = redout_tmp_124901;
        }
        defunc_2_reduce_res_124773 = redout_124860;
        
        int64_t idx_124781;
        int64_t idx_124782;
        int64_t idx_124783;
        int64_t idx_124784;
        int64_t best_idx_124867;
        int64_t last_idx_124868;
        int64_t best_sum_124869;
        int64_t curr_sum_124870;
        
        best_idx_124867 = max_res_124760;
        last_idx_124868 = max_res_124760;
        best_sum_124869 = defunc_2_reduce_res_124773;
        curr_sum_124870 = defunc_2_reduce_res_124773;
        for (int64_t j_124866 = 0; j_124866 < min_res_114792; j_124866++) {
            int64_t new_idx_124871 = add64(max_res_124760, j_124866);
            int64_t x_124872 = add64(min_res_114792, new_idx_124871);
            bool cond_124873 = slt64(x_117291, x_124872);
            int64_t new_sum_124874;
            
            if (cond_124873) {
                new_sum_124874 = (int64_t) 9223372036854775807;
            } else {
                bool x_124875 = sle64((int64_t) 0, last_idx_124868);
                bool y_124876 = slt64(last_idx_124868, n_114518);
                bool bounds_check_124877 = x_124875 && y_124876;
                bool index_certs_124878;
                
                if (!bounds_check_124877) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124868,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124879 =
                        ((int64_t *) mem_122112.mem)[last_idx_124868];
                int64_t binop_p_124880 = sub64(defunc_0_g_res_124739, y_124879);
                int64_t defunc_0_f_res_124881 = abs64(binop_p_124880);
                int64_t x_124882 = sub64(curr_sum_124870,
                                         defunc_0_f_res_124881);
                int64_t min_arg_124883 = add64(min_res_114792, last_idx_124868);
                int64_t min_res_124884 = smin64(i_114594, min_arg_124883);
                bool x_124885 = sle64((int64_t) 0, min_res_124884);
                bool y_124886 = slt64(min_res_124884, n_114518);
                bool bounds_check_124887 = x_124885 && y_124886;
                bool index_certs_124888;
                
                if (!bounds_check_124887) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124884,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124889 = ((int64_t *) mem_122112.mem)[min_res_124884];
                int64_t binop_p_124890 = sub64(defunc_0_g_res_124739, y_124889);
                int64_t defunc_0_f_res_124891 = abs64(binop_p_124890);
                int64_t new_sum_f_res_124892 = add64(x_124882,
                                                     defunc_0_f_res_124891);
                
                new_sum_124874 = new_sum_f_res_124892;
            }
            
            bool cond_124893 = sle64(new_sum_124874, best_sum_124869);
            int64_t loopres_124894;
            
            if (cond_124893) {
                loopres_124894 = new_idx_124871;
            } else {
                loopres_124894 = best_idx_124867;
            }
            
            int64_t loopres_124895;
            
            if (cond_124893) {
                loopres_124895 = new_sum_124874;
            } else {
                loopres_124895 = best_sum_124869;
            }
            
            int64_t best_idx_tmp_124902 = loopres_124894;
            int64_t last_idx_tmp_124903 = new_idx_124871;
            int64_t best_sum_tmp_124904 = loopres_124895;
            int64_t curr_sum_tmp_124905 = new_sum_124874;
            
            best_idx_124867 = best_idx_tmp_124902;
            last_idx_124868 = last_idx_tmp_124903;
            best_sum_124869 = best_sum_tmp_124904;
            curr_sum_124870 = curr_sum_tmp_124905;
        }
        idx_124781 = best_idx_124867;
        idx_124782 = last_idx_124868;
        idx_124783 = best_sum_124869;
        idx_124784 = curr_sum_124870;
        
        int64_t min_res_124815 = smin64(min_arg_117298, idx_124781);
        int64_t x_124816 = add64(min_res_114792, min_res_124815);
        int64_t r_124817 = sub64(x_124816, (int64_t) 1);
        bool x_124818 = sle64((int64_t) 0, r_124817);
        bool y_124819 = slt64(r_124817, n_114518);
        bool bounds_check_124820 = x_124818 && y_124819;
        bool index_certs_124821;
        
        if (!bounds_check_124820) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124817,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124822 = ((int64_t *) mem_121957.mem)[gtid_117182 * n_114518 +
                                                        r_124817];
        int64_t abs_arg_124823 = sub64(x_124822, min_res_124738);
        int64_t abs_res_124824 = abs64(abs_arg_124823);
        bool x_124825 = sle64((int64_t) 0, min_res_124815);
        bool y_124826 = slt64(min_res_124815, n_114518);
        bool bounds_check_124827 = x_124825 && y_124826;
        bool index_certs_124828;
        
        if (!bounds_check_124827) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124815,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124829 = ((int64_t *) mem_121957.mem)[gtid_117182 * n_114518 +
                                                        min_res_124815];
        int64_t abs_arg_124830 = sub64(x_124829, min_res_124738);
        int64_t abs_res_124831 = abs64(abs_arg_124830);
        int64_t max_res_124832 = smax64(abs_res_124824, abs_res_124831);
        float defunc_0_f_res_124833 = sitofp_i64_f32(max_res_124832);
        float defunc_1_f_res_124834 = max_res_117302 + defunc_0_f_res_124833;
        
        ((float *) mem_122115.mem)[gtid_117186] = defunc_1_f_res_124834;
        ((int64_t *) mem_122118.mem)[gtid_117186] = min_res_124815;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131210_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131210_end -
                 futhark_mc_segmap_parloop_131210_start;
        
        ctx->futhark_mc_segmap_parloop_131210_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131210_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131210_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131208(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117185 = tid;
    int num_tasks_124841 = info.nsubtasks;
    struct futhark_mc_task_131207 *futhark_mc_task_131207 =
                                  (struct futhark_mc_task_131207 *) args;
    struct futhark_context *ctx = futhark_mc_task_131207->ctx;
    uint64_t futhark_mc_segmap_task_131208_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131208_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131207->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131207->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131207->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131207->free_i_114594;
    bool x_114595 = futhark_mc_task_131207->free_x_114595;
    int64_t min_res_114792 = futhark_mc_task_131207->free_min_res_114792;
    bool empty_slice_114797 = futhark_mc_task_131207->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_task_131207->free_m_114798;
    int64_t gtid_117182 = futhark_mc_task_131207->free_gtid_117182;
    int64_t x_117291 = futhark_mc_task_131207->free_x_117291;
    int64_t min_arg_117298 = futhark_mc_task_131207->free_min_arg_117298;
    float max_res_117302 = futhark_mc_task_131207->free_max_res_117302;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131207->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122109 = {.desc ="mem_122109", .mem =
                                  futhark_mc_task_131207->free_mem_122109,
                                  .size =0, .references =NULL};
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_task_131207->free_mem_122112,
                                  .size =0, .references =NULL};
    struct memblock mem_122115 = {.desc ="mem_122115", .mem =
                                  futhark_mc_task_131207->free_mem_122115,
                                  .size =0, .references =NULL};
    struct memblock mem_122118 = {.desc ="mem_122118", .mem =
                                  futhark_mc_task_131207->free_mem_122118,
                                  .size =0, .references =NULL};
    int64_t iter_124842;
    struct futhark_mc_segmap_parloop_struct_131209
    futhark_mc_segmap_parloop_struct_131209;
    
    futhark_mc_segmap_parloop_struct_131209.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131209.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131209.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131209.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131209.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131209.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131209.free_min_res_114792 =
        min_res_114792;
    futhark_mc_segmap_parloop_struct_131209.free_empty_slice_114797 =
        empty_slice_114797;
    futhark_mc_segmap_parloop_struct_131209.free_m_114798 = m_114798;
    futhark_mc_segmap_parloop_struct_131209.free_gtid_117182 = gtid_117182;
    futhark_mc_segmap_parloop_struct_131209.free_x_117291 = x_117291;
    futhark_mc_segmap_parloop_struct_131209.free_min_arg_117298 =
        min_arg_117298;
    futhark_mc_segmap_parloop_struct_131209.free_max_res_117302 =
        max_res_117302;
    futhark_mc_segmap_parloop_struct_131209.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131209.free_mem_122109 = mem_122109.mem;
    futhark_mc_segmap_parloop_struct_131209.free_mem_122112 = mem_122112.mem;
    futhark_mc_segmap_parloop_struct_131209.free_mem_122115 = mem_122115.mem;
    futhark_mc_segmap_parloop_struct_131209.free_mem_122118 = mem_122118.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131210_task;
    
    futhark_mc_segmap_parloop_131210_task.name =
        "futhark_mc_segmap_parloop_131210";
    futhark_mc_segmap_parloop_131210_task.fn = futhark_mc_segmap_parloop_131210;
    futhark_mc_segmap_parloop_131210_task.args =
        &futhark_mc_segmap_parloop_struct_131209;
    futhark_mc_segmap_parloop_131210_task.iterations = iterations;
    futhark_mc_segmap_parloop_131210_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131210_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131210_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131210_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131210_task);
    
    if (futhark_mc_segmap_parloop_131210_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131210_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131210_total_end -
                 futhark_mc_segmap_parloop_131210_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131210_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131210_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131210_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131208_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131208_end -
                 futhark_mc_segmap_task_131208_start;
        
        ctx->futhark_mc_segmap_task_131208_runs[tid]++;
        ctx->futhark_mc_segmap_task_131208_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131208_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131212 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    bool free_x_114595;
    int64_t free_min_res_114792;
    bool free_empty_slice_114797;
    int64_t free_m_114798;
    int64_t free_gtid_117182;
    int64_t free_x_117291;
    int64_t free_min_arg_117298;
    float free_max_res_117302;
    char *free_mem_121957;
    char *free_mem_122109;
    char *free_mem_122112;
    char *free_mem_122115;
    char *free_mem_122118;
};
struct futhark_mc_task_131214 {
    struct futhark_context *ctx;
    char *free_mem_122112;
    int64_t free_defunc_0_g_res_124641;
    int64_t free_max_res_124662;
    int64_t *retval_defunc_2_reduce_res_124675;
};
struct futhark_mc_segred_stage_1_parloop_struct_131217 {
    struct futhark_context *ctx;
    char *free_mem_122112;
    int64_t free_defunc_0_g_res_124641;
    int64_t free_max_res_124662;
    char *free_reduce_stage_1_tid_res_arr_mem_124966;
};
static int futhark_mc_segred_stage_1_parloop_131218(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117189,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131217
    *futhark_mc_segred_stage_1_parloop_struct_131217 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131217 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131217->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131218_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131218_start = get_wall_time();
    
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131217->free_mem_122112,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124641 =
            futhark_mc_segred_stage_1_parloop_struct_131217->free_defunc_0_g_res_124641;
    int64_t max_res_124662 =
            futhark_mc_segred_stage_1_parloop_struct_131217->free_max_res_124662;
    struct memblock reduce_stage_1_tid_res_arr_mem_124966 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124966",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131217->free_reduce_stage_1_tid_res_arr_mem_124966,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124968 = start;
    int64_t x_124923;
    int64_t x_124924;
    int64_t local_acc_124969 = (int64_t) 0;
    
    for (; iter_124968 < end; iter_124968++) {
        int64_t gtid_117190 = iter_124968;
        int64_t slice_124926 = gtid_117190 + max_res_124662;
        int64_t x_124927 = ((int64_t *) mem_122112.mem)[slice_124926];
        int64_t abs_arg_124928 = sub64(x_124927, defunc_0_g_res_124641);
        int64_t abs_res_124929 = abs64(abs_arg_124928);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124923 = local_acc_124969;
        }
        // Load next params
        {
            x_124924 = abs_res_124929;
        }
        // Red body
        {
            int64_t defunc_1_op_res_124925 = add64(x_124923, x_124924);
            
            local_acc_124969 = defunc_1_op_res_124925;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124966.mem)[flat_tid_117189] =
        local_acc_124969;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131218_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131218_end -
                 futhark_mc_segred_stage_1_parloop_131218_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131218_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131218_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131218_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131215(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117189 = tid;
    int num_tasks_124965 = info.nsubtasks;
    struct futhark_mc_task_131214 *futhark_mc_task_131214 =
                                  (struct futhark_mc_task_131214 *) args;
    struct futhark_context *ctx = futhark_mc_task_131214->ctx;
    uint64_t futhark_mc_segred_task_131215_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131215_start = get_wall_time();
    
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_task_131214->free_mem_122112,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124641 =
            futhark_mc_task_131214->free_defunc_0_g_res_124641;
    int64_t max_res_124662 = futhark_mc_task_131214->free_max_res_124662;
    int64_t defunc_2_reduce_res_124675 =
            *futhark_mc_task_131214->retval_defunc_2_reduce_res_124675;
    size_t reduce_stage_1_tid_res_arr_mem_124966_cached_sizze_131216 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124966 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124966_cached_sizze_131216 <
        (size_t) ((int64_t) 8 * num_tasks_124965)) {
        reduce_stage_1_tid_res_arr_mem_124966 =
            realloc(reduce_stage_1_tid_res_arr_mem_124966, (int64_t) 8 *
                    num_tasks_124965);
        reduce_stage_1_tid_res_arr_mem_124966_cached_sizze_131216 =
            (int64_t) 8 * num_tasks_124965;
    }
    
    int64_t iter_124968;
    struct futhark_mc_segred_stage_1_parloop_struct_131217
    futhark_mc_segred_stage_1_parloop_struct_131217;
    
    futhark_mc_segred_stage_1_parloop_struct_131217.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131217.free_mem_122112 =
        mem_122112.mem;
    futhark_mc_segred_stage_1_parloop_struct_131217.free_defunc_0_g_res_124641 =
        defunc_0_g_res_124641;
    futhark_mc_segred_stage_1_parloop_struct_131217.free_max_res_124662 =
        max_res_124662;
    futhark_mc_segred_stage_1_parloop_struct_131217.free_reduce_stage_1_tid_res_arr_mem_124966 =
        reduce_stage_1_tid_res_arr_mem_124966;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131218_task;
    
    futhark_mc_segred_stage_1_parloop_131218_task.name =
        "futhark_mc_segred_stage_1_parloop_131218";
    futhark_mc_segred_stage_1_parloop_131218_task.fn =
        futhark_mc_segred_stage_1_parloop_131218;
    futhark_mc_segred_stage_1_parloop_131218_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131217;
    futhark_mc_segred_stage_1_parloop_131218_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131218_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131218_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131218_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131218_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131218_task);
    
    if (futhark_mc_segred_stage_1_parloop_131218_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131218_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131218_total_end -
                 futhark_mc_segred_stage_1_parloop_131218_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131218_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131218_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131218_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124675 = (int64_t) 0;
    }
    
    int64_t x_124970;
    int64_t x_124971;
    
    for (int32_t i_124973 = 0; i_124973 < num_tasks_124965; i_124973++) {
        flat_tid_117189 = i_124973;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124970 = defunc_2_reduce_res_124675;
            }
            // load next params
            {
                x_124971 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124966)[flat_tid_117189];
            }
            // red body
            {
                int64_t defunc_1_op_res_124972 = add64(x_124970, x_124971);
                
                defunc_2_reduce_res_124675 = defunc_1_op_res_124972;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124966);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131215_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131215_end -
                 futhark_mc_segred_task_131215_start;
        
        ctx->futhark_mc_segred_task_131215_runs[tid]++;
        ctx->futhark_mc_segred_task_131215_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131215_iter[tid] += iterations;
    }
    *futhark_mc_task_131214->retval_defunc_2_reduce_res_124675 =
        defunc_2_reduce_res_124675;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131213(void *args, int64_t start,
                                            int64_t end, int flat_tid_117187,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131212
    *futhark_mc_segmap_parloop_struct_131212 =
    (struct futhark_mc_segmap_parloop_struct_131212 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131212->ctx;
    uint64_t futhark_mc_segmap_parloop_131213_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131213_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131212->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131212->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131212->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131212->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131212->free_x_114595;
    int64_t min_res_114792 =
            futhark_mc_segmap_parloop_struct_131212->free_min_res_114792;
    bool empty_slice_114797 =
         futhark_mc_segmap_parloop_struct_131212->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_segmap_parloop_struct_131212->free_m_114798;
    int64_t gtid_117182 =
            futhark_mc_segmap_parloop_struct_131212->free_gtid_117182;
    int64_t x_117291 = futhark_mc_segmap_parloop_struct_131212->free_x_117291;
    int64_t min_arg_117298 =
            futhark_mc_segmap_parloop_struct_131212->free_min_arg_117298;
    float max_res_117302 =
          futhark_mc_segmap_parloop_struct_131212->free_max_res_117302;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131212->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122109 = {.desc ="mem_122109", .mem =
                                  futhark_mc_segmap_parloop_struct_131212->free_mem_122109,
                                  .size =0, .references =NULL};
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_segmap_parloop_struct_131212->free_mem_122112,
                                  .size =0, .references =NULL};
    struct memblock mem_122115 = {.desc ="mem_122115", .mem =
                                  futhark_mc_segmap_parloop_struct_131212->free_mem_122115,
                                  .size =0, .references =NULL};
    struct memblock mem_122118 = {.desc ="mem_122118", .mem =
                                  futhark_mc_segmap_parloop_struct_131212->free_mem_122118,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124906 = start;
    
    for (; iter_124906 < end; iter_124906++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124960 = t_n_m_114575;
        int64_t gtid_117188 = iter_124906;
        int64_t remnant_124961 = iter_124906 - gtid_117188;
        int64_t min_arg_124639 = mul64(t_jump_114525, gtid_117188);
        int64_t min_res_124640 = smin64(i_114594, min_arg_124639);
        int64_t defunc_0_g_res_124641 = add64((int64_t) 1, min_res_124640);
        bool nearest_idx_124642;
        int64_t nearest_idx_124643;
        int64_t nearest_idx_124644;
        bool loop_while_124907;
        int64_t low_124908;
        int64_t high_124909;
        
        loop_while_124907 = x_114595;
        low_124908 = (int64_t) 0;
        high_124909 = i_114594;
        while (loop_while_124907) {
            int64_t x_124910 = add64(low_124908, high_124909);
            int64_t mid_124911 = sdiv64(x_124910, (int64_t) 2);
            bool x_124912 = sle64((int64_t) 0, mid_124911);
            bool y_124913 = slt64(mid_124911, n_114518);
            bool bounds_check_124914 = x_124912 && y_124913;
            bool index_certs_124915;
            
            if (!bounds_check_124914) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124911,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            int64_t x_124916 = ((int64_t *) mem_122109.mem)[mid_124911];
            bool cond_124917 = sle64(defunc_0_g_res_124641, x_124916);
            int64_t loopres_124918;
            int64_t loopres_124919;
            
            if (cond_124917) {
                int64_t loopres_t_res_124920 = sub64(mid_124911, (int64_t) 1);
                
                loopres_124918 = low_124908;
                loopres_124919 = loopres_t_res_124920;
            } else {
                int64_t loopres_f_res_124921 = add64((int64_t) 1, mid_124911);
                
                loopres_124918 = loopres_f_res_124921;
                loopres_124919 = high_124909;
            }
            
            bool loop_cond_124922 = sle64(loopres_124918, loopres_124919);
            bool loop_while_tmp_124962 = loop_cond_124922;
            int64_t low_tmp_124963 = loopres_124918;
            int64_t high_tmp_124964 = loopres_124919;
            
            loop_while_124907 = loop_while_tmp_124962;
            low_124908 = low_tmp_124963;
            high_124909 = high_tmp_124964;
        }
        nearest_idx_124642 = loop_while_124907;
        nearest_idx_124643 = low_124908;
        nearest_idx_124644 = high_124909;
        
        int64_t max_arg_124661 = sub64(nearest_idx_124643, min_res_114792);
        int64_t max_res_124662 = smax64((int64_t) 0, max_arg_124661);
        int64_t j_124663 = add64(min_res_114792, max_res_124662);
        int64_t i_p_m_t_s_124664 = add64(m_114798, max_res_124662);
        bool zzero_leq_i_p_m_t_s_124665 = sle64((int64_t) 0, i_p_m_t_s_124664);
        bool i_p_m_t_s_leq_w_124666 = slt64(i_p_m_t_s_124664, n_114518);
        bool zzero_lte_i_124667 = sle64((int64_t) 0, max_res_124662);
        bool i_lte_j_124668 = sle64(max_res_124662, j_124663);
        bool y_124669 = i_p_m_t_s_leq_w_124666 && zzero_lte_i_124667;
        bool y_124670 = zzero_leq_i_p_m_t_s_124665 && y_124669;
        bool y_124671 = i_lte_j_124668 && y_124670;
        bool forwards_ok_124672 = zzero_lte_i_124667 && y_124671;
        bool ok_or_empty_124673 = empty_slice_114797 || forwards_ok_124672;
        bool index_certs_124674;
        
        if (!ok_or_empty_124673) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124662, ":",
                          (long long) j_124663,
                          "] out of bounds for array of shape [",
                          (long long) n_114518, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124675;
        int64_t flat_tid_117189 = (int64_t) 0;
        int32_t num_tasks_124965;
        struct futhark_mc_task_131214 futhark_mc_task_131214;
        
        futhark_mc_task_131214.ctx = ctx;
        futhark_mc_task_131214.free_mem_122112 = mem_122112.mem;
        futhark_mc_task_131214.free_defunc_0_g_res_124641 =
            defunc_0_g_res_124641;
        futhark_mc_task_131214.free_max_res_124662 = max_res_124662;
        futhark_mc_task_131214.retval_defunc_2_reduce_res_124675 =
            &defunc_2_reduce_res_124675;
        
        struct scheduler_segop futhark_mc_task_131214_task;
        
        futhark_mc_task_131214_task.args = &futhark_mc_task_131214;
        futhark_mc_task_131214_task.top_level_fn =
            futhark_mc_segred_task_131215;
        futhark_mc_task_131214_task.name = "futhark_mc_segred_task_131215";
        futhark_mc_task_131214_task.iterations = min_res_114792;
        futhark_mc_task_131214_task.task_time =
            &ctx->futhark_mc_segred_task_131215_total_time;
        futhark_mc_task_131214_task.task_iter =
            &ctx->futhark_mc_segred_task_131215_total_iter;
        futhark_mc_task_131214_task.sched = STATIC;
        futhark_mc_task_131214_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131215_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131214_task);
        
        if (futhark_mc_segred_task_131215_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_124683;
        int64_t idx_124684;
        int64_t idx_124685;
        int64_t idx_124686;
        int64_t best_idx_124931;
        int64_t last_idx_124932;
        int64_t best_sum_124933;
        int64_t curr_sum_124934;
        
        best_idx_124931 = max_res_124662;
        last_idx_124932 = max_res_124662;
        best_sum_124933 = defunc_2_reduce_res_124675;
        curr_sum_124934 = defunc_2_reduce_res_124675;
        for (int64_t j_124930 = 0; j_124930 < min_res_114792; j_124930++) {
            int64_t new_idx_124935 = add64(max_res_124662, j_124930);
            int64_t x_124936 = add64(min_res_114792, new_idx_124935);
            bool cond_124937 = slt64(x_117291, x_124936);
            int64_t new_sum_124938;
            
            if (cond_124937) {
                new_sum_124938 = (int64_t) 9223372036854775807;
            } else {
                bool x_124939 = sle64((int64_t) 0, last_idx_124932);
                bool y_124940 = slt64(last_idx_124932, n_114518);
                bool bounds_check_124941 = x_124939 && y_124940;
                bool index_certs_124942;
                
                if (!bounds_check_124941) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124932,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124943 =
                        ((int64_t *) mem_122112.mem)[last_idx_124932];
                int64_t binop_p_124944 = sub64(defunc_0_g_res_124641, y_124943);
                int64_t defunc_0_f_res_124945 = abs64(binop_p_124944);
                int64_t x_124946 = sub64(curr_sum_124934,
                                         defunc_0_f_res_124945);
                int64_t min_arg_124947 = add64(min_res_114792, last_idx_124932);
                int64_t min_res_124948 = smin64(i_114594, min_arg_124947);
                bool x_124949 = sle64((int64_t) 0, min_res_124948);
                bool y_124950 = slt64(min_res_124948, n_114518);
                bool bounds_check_124951 = x_124949 && y_124950;
                bool index_certs_124952;
                
                if (!bounds_check_124951) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124948,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:400:15-58\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                int64_t y_124953 = ((int64_t *) mem_122112.mem)[min_res_124948];
                int64_t binop_p_124954 = sub64(defunc_0_g_res_124641, y_124953);
                int64_t defunc_0_f_res_124955 = abs64(binop_p_124954);
                int64_t new_sum_f_res_124956 = add64(x_124946,
                                                     defunc_0_f_res_124955);
                
                new_sum_124938 = new_sum_f_res_124956;
            }
            
            bool cond_124957 = sle64(new_sum_124938, best_sum_124933);
            int64_t loopres_124958;
            
            if (cond_124957) {
                loopres_124958 = new_idx_124935;
            } else {
                loopres_124958 = best_idx_124931;
            }
            
            int64_t loopres_124959;
            
            if (cond_124957) {
                loopres_124959 = new_sum_124938;
            } else {
                loopres_124959 = best_sum_124933;
            }
            
            int64_t best_idx_tmp_124974 = loopres_124958;
            int64_t last_idx_tmp_124975 = new_idx_124935;
            int64_t best_sum_tmp_124976 = loopres_124959;
            int64_t curr_sum_tmp_124977 = new_sum_124938;
            
            best_idx_124931 = best_idx_tmp_124974;
            last_idx_124932 = last_idx_tmp_124975;
            best_sum_124933 = best_sum_tmp_124976;
            curr_sum_124934 = curr_sum_tmp_124977;
        }
        idx_124683 = best_idx_124931;
        idx_124684 = last_idx_124932;
        idx_124685 = best_sum_124933;
        idx_124686 = curr_sum_124934;
        
        int64_t min_res_124717 = smin64(min_arg_117298, idx_124683);
        int64_t x_124718 = add64(min_res_114792, min_res_124717);
        int64_t r_124719 = sub64(x_124718, (int64_t) 1);
        bool x_124720 = sle64((int64_t) 0, r_124719);
        bool y_124721 = slt64(r_124719, n_114518);
        bool bounds_check_124722 = x_124720 && y_124721;
        bool index_certs_124723;
        
        if (!bounds_check_124722) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124719,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124724 = ((int64_t *) mem_121957.mem)[gtid_117182 * n_114518 +
                                                        r_124719];
        int64_t abs_arg_124725 = sub64(x_124724, min_res_124640);
        int64_t abs_res_124726 = abs64(abs_arg_124725);
        bool x_124727 = sle64((int64_t) 0, min_res_124717);
        bool y_124728 = slt64(min_res_124717, n_114518);
        bool bounds_check_124729 = x_124727 && y_124728;
        bool index_certs_124730;
        
        if (!bounds_check_124729) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124717,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114518, "].",
                                   "-> #0  loess.fut:386:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:383:3-389:25\n   #4  loess.fut:401:18-55\n   #5  stl.fut:173:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:171:5-174:26\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
            return 1;
        }
        
        int64_t x_124731 = ((int64_t *) mem_121957.mem)[gtid_117182 * n_114518 +
                                                        min_res_124717];
        int64_t abs_arg_124732 = sub64(x_124731, min_res_124640);
        int64_t abs_res_124733 = abs64(abs_arg_124732);
        int64_t max_res_124734 = smax64(abs_res_124726, abs_res_124733);
        float defunc_0_f_res_124735 = sitofp_i64_f32(max_res_124734);
        float defunc_1_f_res_124736 = max_res_117302 + defunc_0_f_res_124735;
        
        ((float *) mem_122115.mem)[gtid_117188] = defunc_1_f_res_124736;
        ((int64_t *) mem_122118.mem)[gtid_117188] = min_res_124717;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131213_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131213_end -
                 futhark_mc_segmap_parloop_131213_start;
        
        ctx->futhark_mc_segmap_parloop_131213_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131213_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131213_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131211(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117187 = tid;
    int num_tasks_124841 = info.nsubtasks;
    struct futhark_mc_task_131207 *futhark_mc_task_131207 =
                                  (struct futhark_mc_task_131207 *) args;
    struct futhark_context *ctx = futhark_mc_task_131207->ctx;
    uint64_t futhark_mc_segmap_nested_task_131211_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131211_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131207->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131207->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131207->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131207->free_i_114594;
    bool x_114595 = futhark_mc_task_131207->free_x_114595;
    int64_t min_res_114792 = futhark_mc_task_131207->free_min_res_114792;
    bool empty_slice_114797 = futhark_mc_task_131207->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_task_131207->free_m_114798;
    int64_t gtid_117182 = futhark_mc_task_131207->free_gtid_117182;
    int64_t x_117291 = futhark_mc_task_131207->free_x_117291;
    int64_t min_arg_117298 = futhark_mc_task_131207->free_min_arg_117298;
    float max_res_117302 = futhark_mc_task_131207->free_max_res_117302;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131207->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122109 = {.desc ="mem_122109", .mem =
                                  futhark_mc_task_131207->free_mem_122109,
                                  .size =0, .references =NULL};
    struct memblock mem_122112 = {.desc ="mem_122112", .mem =
                                  futhark_mc_task_131207->free_mem_122112,
                                  .size =0, .references =NULL};
    struct memblock mem_122115 = {.desc ="mem_122115", .mem =
                                  futhark_mc_task_131207->free_mem_122115,
                                  .size =0, .references =NULL};
    struct memblock mem_122118 = {.desc ="mem_122118", .mem =
                                  futhark_mc_task_131207->free_mem_122118,
                                  .size =0, .references =NULL};
    int64_t iter_124906;
    struct futhark_mc_segmap_parloop_struct_131212
    futhark_mc_segmap_parloop_struct_131212;
    
    futhark_mc_segmap_parloop_struct_131212.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131212.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131212.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131212.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131212.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131212.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131212.free_min_res_114792 =
        min_res_114792;
    futhark_mc_segmap_parloop_struct_131212.free_empty_slice_114797 =
        empty_slice_114797;
    futhark_mc_segmap_parloop_struct_131212.free_m_114798 = m_114798;
    futhark_mc_segmap_parloop_struct_131212.free_gtid_117182 = gtid_117182;
    futhark_mc_segmap_parloop_struct_131212.free_x_117291 = x_117291;
    futhark_mc_segmap_parloop_struct_131212.free_min_arg_117298 =
        min_arg_117298;
    futhark_mc_segmap_parloop_struct_131212.free_max_res_117302 =
        max_res_117302;
    futhark_mc_segmap_parloop_struct_131212.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131212.free_mem_122109 = mem_122109.mem;
    futhark_mc_segmap_parloop_struct_131212.free_mem_122112 = mem_122112.mem;
    futhark_mc_segmap_parloop_struct_131212.free_mem_122115 = mem_122115.mem;
    futhark_mc_segmap_parloop_struct_131212.free_mem_122118 = mem_122118.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131213_task;
    
    futhark_mc_segmap_parloop_131213_task.name =
        "futhark_mc_segmap_parloop_131213";
    futhark_mc_segmap_parloop_131213_task.fn = futhark_mc_segmap_parloop_131213;
    futhark_mc_segmap_parloop_131213_task.args =
        &futhark_mc_segmap_parloop_struct_131212;
    futhark_mc_segmap_parloop_131213_task.iterations = iterations;
    futhark_mc_segmap_parloop_131213_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131213_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131213_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131213_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131213_task);
    
    if (futhark_mc_segmap_parloop_131213_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131213_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131213_total_end -
                 futhark_mc_segmap_parloop_131213_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131213_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131213_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131213_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131211_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131211_end -
                 futhark_mc_segmap_nested_task_131211_start;
        
        ctx->futhark_mc_segmap_nested_task_131211_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131211_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131211_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131198(void *args, int64_t start,
                                            int64_t end, int flat_tid_117181,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131197
    *futhark_mc_segmap_parloop_struct_131197 =
    (struct futhark_mc_segmap_parloop_struct_131197 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131197->ctx;
    uint64_t futhark_mc_segmap_parloop_131198_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131198_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131197->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131197->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131197->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131197->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131197->free_i_114594;
    bool x_114595 = futhark_mc_segmap_parloop_struct_131197->free_x_114595;
    int64_t min_res_114792 =
            futhark_mc_segmap_parloop_struct_131197->free_min_res_114792;
    bool empty_slice_114797 =
         futhark_mc_segmap_parloop_struct_131197->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_segmap_parloop_struct_131197->free_m_114798;
    float i64_res_114799 =
          futhark_mc_segmap_parloop_struct_131197->free_i64_res_114799;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131197->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131197->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131197->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131197->free_bytes_122113;
    int64_t bytes_122116 =
            futhark_mc_segmap_parloop_struct_131197->free_bytes_122116;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131197->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131197->free_mem_122186,
                                  .size =0, .references =NULL};
    size_t mem_122109_cached_sizze_131199 = 0;
    char *mem_122109 = NULL;
    size_t mem_122112_cached_sizze_131200 = 0;
    char *mem_122112 = NULL;
    size_t mem_122115_cached_sizze_131201 = 0;
    char *mem_122115 = NULL;
    size_t mem_122118_cached_sizze_131202 = 0;
    char *mem_122118 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124634 = start;
    
    if (mem_122109_cached_sizze_131199 < (size_t) bytes_121918) {
        mem_122109 = realloc(mem_122109, bytes_121918);
        mem_122109_cached_sizze_131199 = bytes_121918;
    }
    if (mem_122112_cached_sizze_131200 < (size_t) bytes_121918) {
        mem_122112 = realloc(mem_122112, bytes_121918);
        mem_122112_cached_sizze_131200 = bytes_121918;
    }
    if (mem_122115_cached_sizze_131201 < (size_t) bytes_122113) {
        mem_122115 = realloc(mem_122115, bytes_122113);
        mem_122115_cached_sizze_131201 = bytes_122113;
    }
    if (mem_122118_cached_sizze_131202 < (size_t) bytes_122116) {
        mem_122118 = realloc(mem_122118, bytes_122116);
        mem_122118_cached_sizze_131202 = bytes_122116;
    }
    for (; iter_124634 < end; iter_124634++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124835 = m_114517;
        int64_t gtid_117182 = iter_124634;
        int64_t remnant_124836 = iter_124634 - gtid_117182;
        int64_t x_117291 = ((int64_t *) mem_121960.mem)[gtid_117182];
        int64_t flat_tid_117183 = (int64_t) 0;
        int32_t num_tasks_124837;
        struct futhark_mc_task_131203 futhark_mc_task_131203;
        
        futhark_mc_task_131203.ctx = ctx;
        futhark_mc_task_131203.free_n_114518 = n_114518;
        futhark_mc_task_131203.free_gtid_117182 = gtid_117182;
        futhark_mc_task_131203.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131203.free_mem_122109 = mem_122109;
        futhark_mc_task_131203.free_mem_122112 = mem_122112;
        
        struct scheduler_segop futhark_mc_task_131203_task;
        
        futhark_mc_task_131203_task.args = &futhark_mc_task_131203;
        futhark_mc_task_131203_task.top_level_fn =
            futhark_mc_segmap_task_131204;
        futhark_mc_task_131203_task.name = "futhark_mc_segmap_task_131204";
        futhark_mc_task_131203_task.iterations = n_114518;
        futhark_mc_task_131203_task.task_time =
            &ctx->futhark_mc_segmap_task_131204_total_time;
        futhark_mc_task_131203_task.task_iter =
            &ctx->futhark_mc_segmap_task_131204_total_iter;
        futhark_mc_task_131203_task.sched = STATIC;
        futhark_mc_task_131203_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131204_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131203_task);
        
        if (futhark_mc_segmap_task_131204_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_117298 = sub64(x_117291, min_res_114792);
        float i64_res_117299 = sitofp_i64_f32(x_117291);
        float x_117300 = i64_res_114799 - i64_res_117299;
        float max_arg_117301 = x_117300 / 2.0F;
        float max_res_117302 = fmax32(0.0F, max_arg_117301);
        int64_t flat_tid_117185 = (int64_t) 0;
        int32_t num_tasks_124841;
        int64_t flat_tid_117187 = (int64_t) 0;
        struct futhark_mc_task_131207 futhark_mc_task_131207;
        
        futhark_mc_task_131207.ctx = ctx;
        futhark_mc_task_131207.free_n_114518 = n_114518;
        futhark_mc_task_131207.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131207.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131207.free_i_114594 = i_114594;
        futhark_mc_task_131207.free_x_114595 = x_114595;
        futhark_mc_task_131207.free_min_res_114792 = min_res_114792;
        futhark_mc_task_131207.free_empty_slice_114797 = empty_slice_114797;
        futhark_mc_task_131207.free_m_114798 = m_114798;
        futhark_mc_task_131207.free_gtid_117182 = gtid_117182;
        futhark_mc_task_131207.free_x_117291 = x_117291;
        futhark_mc_task_131207.free_min_arg_117298 = min_arg_117298;
        futhark_mc_task_131207.free_max_res_117302 = max_res_117302;
        futhark_mc_task_131207.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131207.free_mem_122109 = mem_122109;
        futhark_mc_task_131207.free_mem_122112 = mem_122112;
        futhark_mc_task_131207.free_mem_122115 = mem_122115;
        futhark_mc_task_131207.free_mem_122118 = mem_122118;
        
        struct scheduler_segop futhark_mc_task_131207_task;
        
        futhark_mc_task_131207_task.args = &futhark_mc_task_131207;
        futhark_mc_task_131207_task.top_level_fn =
            futhark_mc_segmap_task_131208;
        futhark_mc_task_131207_task.name = "futhark_mc_segmap_task_131208";
        futhark_mc_task_131207_task.iterations = t_n_m_114575;
        futhark_mc_task_131207_task.task_time =
            &ctx->futhark_mc_segmap_task_131208_total_time;
        futhark_mc_task_131207_task.task_iter =
            &ctx->futhark_mc_segmap_task_131208_total_iter;
        futhark_mc_task_131207_task.sched = DYNAMIC;
        futhark_mc_task_131207_task.nested_fn =
            futhark_mc_segmap_nested_task_131211;
        
        int futhark_mc_segmap_task_131208_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131207_task);
        
        if (futhark_mc_segmap_task_131208_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122182.mem + gtid_117182 * t_n_m_114575 * (int64_t) 8,
                mem_122118 + (int64_t) 0, t_n_m_114575 * (int64_t) 8);
        memmove(mem_122186.mem + gtid_117182 * t_n_m_114575 * (int64_t) 4,
                mem_122115 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122109);
    free(mem_122112);
    free(mem_122115);
    free(mem_122118);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131198_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131198_end -
                 futhark_mc_segmap_parloop_131198_start;
        
        ctx->futhark_mc_segmap_parloop_131198_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131198_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131198_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131196(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117181 = tid;
    int num_tasks_124506 = info.nsubtasks;
    struct futhark_mc_task_131188 *futhark_mc_task_131188 =
                                  (struct futhark_mc_task_131188 *) args;
    struct futhark_context *ctx = futhark_mc_task_131188->ctx;
    uint64_t futhark_mc_segmap_nested_task_131196_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131196_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131188->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131188->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131188->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131188->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131188->free_i_114594;
    bool x_114595 = futhark_mc_task_131188->free_x_114595;
    int64_t min_res_114792 = futhark_mc_task_131188->free_min_res_114792;
    bool empty_slice_114797 = futhark_mc_task_131188->free_empty_slice_114797;
    int64_t m_114798 = futhark_mc_task_131188->free_m_114798;
    float i64_res_114799 = futhark_mc_task_131188->free_i64_res_114799;
    int64_t bytes_121918 = futhark_mc_task_131188->free_bytes_121918;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131188->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131188->free_mem_121960,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131188->free_bytes_122113;
    int64_t bytes_122116 = futhark_mc_task_131188->free_bytes_122116;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131188->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131188->free_mem_122186,
                                  .size =0, .references =NULL};
    int64_t iter_124634;
    struct futhark_mc_segmap_parloop_struct_131197
    futhark_mc_segmap_parloop_struct_131197;
    
    futhark_mc_segmap_parloop_struct_131197.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131197.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131197.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131197.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131197.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131197.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131197.free_x_114595 = x_114595;
    futhark_mc_segmap_parloop_struct_131197.free_min_res_114792 =
        min_res_114792;
    futhark_mc_segmap_parloop_struct_131197.free_empty_slice_114797 =
        empty_slice_114797;
    futhark_mc_segmap_parloop_struct_131197.free_m_114798 = m_114798;
    futhark_mc_segmap_parloop_struct_131197.free_i64_res_114799 =
        i64_res_114799;
    futhark_mc_segmap_parloop_struct_131197.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131197.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131197.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131197.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131197.free_bytes_122116 = bytes_122116;
    futhark_mc_segmap_parloop_struct_131197.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131197.free_mem_122186 = mem_122186.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131198_task;
    
    futhark_mc_segmap_parloop_131198_task.name =
        "futhark_mc_segmap_parloop_131198";
    futhark_mc_segmap_parloop_131198_task.fn = futhark_mc_segmap_parloop_131198;
    futhark_mc_segmap_parloop_131198_task.args =
        &futhark_mc_segmap_parloop_struct_131197;
    futhark_mc_segmap_parloop_131198_task.iterations = iterations;
    futhark_mc_segmap_parloop_131198_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131198_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131198_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131198_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131198_task);
    
    if (futhark_mc_segmap_parloop_131198_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131198_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131198_total_end -
                 futhark_mc_segmap_parloop_131198_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131198_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131198_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131198_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131196_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131196_end -
                 futhark_mc_segmap_nested_task_131196_start;
        
        ctx->futhark_mc_segmap_nested_task_131196_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131196_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131196_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131219 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    int64_t free_ctx_param_ext_122236;
    char *free_mem_param_122240;
    char *free_mem_122262;
};
struct futhark_mc_segmap_parloop_struct_131221 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    int64_t free_ctx_param_ext_122236;
    char *free_mem_param_122240;
    char *free_mem_122262;
};
static int futhark_mc_segmap_parloop_131222(void *args, int64_t start,
                                            int64_t end, int flat_tid_117503,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131221
    *futhark_mc_segmap_parloop_struct_131221 =
    (struct futhark_mc_segmap_parloop_struct_131221 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131221->ctx;
    uint64_t futhark_mc_segmap_parloop_131222_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131222_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131221->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131221->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131221->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131221->free_bytes_121961;
    int64_t ctx_param_ext_122236 =
            futhark_mc_segmap_parloop_struct_131221->free_ctx_param_ext_122236;
    struct memblock mem_param_122240 = {.desc ="mem_param_122240", .mem =
                                        futhark_mc_segmap_parloop_struct_131221->free_mem_param_122240,
                                        .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segmap_parloop_struct_131221->free_mem_122262,
                                  .size =0, .references =NULL};
    size_t mem_122246_cached_sizze_131223 = 0;
    char *mem_122246 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125004 = start;
    
    if (mem_122246_cached_sizze_131223 < (size_t) bytes_121961) {
        mem_122246 = realloc(mem_122246, bytes_121961);
        mem_122246_cached_sizze_131223 = bytes_121961;
    }
    for (; iter_125004 < end; iter_125004++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125011 = m_114517;
        int64_t gtid_117504 = iter_125004;
        int64_t remnant_125012 = iter_125004 - gtid_117504;
        
        for (int64_t i_125005 = 0; i_125005 < n_114518; i_125005++) {
            float x_125007 = ((float *) Y_mem_121917.mem)[gtid_117504 *
                                                          n_114518 + i_125005];
            float x_125008 = ((float *) mem_param_122240.mem)[gtid_117504 *
                                                              ctx_param_ext_122236 +
                                                              i_125005];
            float defunc_1_f_res_125009 = x_125007 - x_125008;
            
            ((float *) mem_122246)[i_125005] = defunc_1_f_res_125009;
        }
        memmove(mem_122262.mem + gtid_117504 * n_114518 * (int64_t) 4,
                mem_122246 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122246);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131222_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131222_end -
                 futhark_mc_segmap_parloop_131222_start;
        
        ctx->futhark_mc_segmap_parloop_131222_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131222_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131222_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131220(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117503 = tid;
    int num_tasks_125003 = info.nsubtasks;
    struct futhark_mc_task_131219 *futhark_mc_task_131219 =
                                  (struct futhark_mc_task_131219 *) args;
    struct futhark_context *ctx = futhark_mc_task_131219->ctx;
    uint64_t futhark_mc_segmap_task_131220_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131220_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131219->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131219->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131219->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131219->free_bytes_121961;
    int64_t ctx_param_ext_122236 =
            futhark_mc_task_131219->free_ctx_param_ext_122236;
    struct memblock mem_param_122240 = {.desc ="mem_param_122240", .mem =
                                        futhark_mc_task_131219->free_mem_param_122240,
                                        .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131219->free_mem_122262,
                                  .size =0, .references =NULL};
    int64_t iter_125004;
    struct futhark_mc_segmap_parloop_struct_131221
    futhark_mc_segmap_parloop_struct_131221;
    
    futhark_mc_segmap_parloop_struct_131221.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131221.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131221.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131221.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131221.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131221.free_ctx_param_ext_122236 =
        ctx_param_ext_122236;
    futhark_mc_segmap_parloop_struct_131221.free_mem_param_122240 =
        mem_param_122240.mem;
    futhark_mc_segmap_parloop_struct_131221.free_mem_122262 = mem_122262.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131222_task;
    
    futhark_mc_segmap_parloop_131222_task.name =
        "futhark_mc_segmap_parloop_131222";
    futhark_mc_segmap_parloop_131222_task.fn = futhark_mc_segmap_parloop_131222;
    futhark_mc_segmap_parloop_131222_task.args =
        &futhark_mc_segmap_parloop_struct_131221;
    futhark_mc_segmap_parloop_131222_task.iterations = iterations;
    futhark_mc_segmap_parloop_131222_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131222_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131222_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131222_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131222_task);
    
    if (futhark_mc_segmap_parloop_131222_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131222_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131222_total_end -
                 futhark_mc_segmap_parloop_131222_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131222_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131222_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131222_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131220_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131220_end -
                 futhark_mc_segmap_task_131220_start;
        
        ctx->futhark_mc_segmap_task_131220_runs[tid]++;
        ctx->futhark_mc_segmap_task_131220_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131220_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131225 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    int64_t free_ctx_param_ext_122236;
    char *free_mem_param_122240;
    char *free_mem_122262;
};
struct futhark_mc_task_131228 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117506;
    char *free_Y_mem_121917;
    int64_t free_ctx_param_ext_122236;
    char *free_mem_param_122240;
    char *free_mem_122243;
};
struct futhark_mc_segmap_parloop_struct_131230 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117506;
    char *free_Y_mem_121917;
    int64_t free_ctx_param_ext_122236;
    char *free_mem_param_122240;
    char *free_mem_122243;
};
static int futhark_mc_segmap_parloop_131231(void *args, int64_t start,
                                            int64_t end, int flat_tid_117507,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131230
    *futhark_mc_segmap_parloop_struct_131230 =
    (struct futhark_mc_segmap_parloop_struct_131230 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131230->ctx;
    uint64_t futhark_mc_segmap_parloop_131231_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131231_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131230->free_n_114518;
    int64_t gtid_117506 =
            futhark_mc_segmap_parloop_struct_131230->free_gtid_117506;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131230->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_122236 =
            futhark_mc_segmap_parloop_struct_131230->free_ctx_param_ext_122236;
    struct memblock mem_param_122240 = {.desc ="mem_param_122240", .mem =
                                        futhark_mc_segmap_parloop_struct_131230->free_mem_param_122240,
                                        .size =0, .references =NULL};
    struct memblock mem_122243 = {.desc ="mem_122243", .mem =
                                  futhark_mc_segmap_parloop_struct_131230->free_mem_122243,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125021 = start;
    
    for (; iter_125021 < end; iter_125021++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125022 = n_114518;
        int64_t gtid_117508 = iter_125021;
        int64_t remnant_125023 = iter_125021 - gtid_117508;
        float x_125015 = ((float *) Y_mem_121917.mem)[gtid_117506 * n_114518 +
                                                      gtid_117508];
        float x_125016 = ((float *) mem_param_122240.mem)[gtid_117506 *
                                                          ctx_param_ext_122236 +
                                                          gtid_117508];
        float defunc_1_f_res_125017 = x_125015 - x_125016;
        
        ((float *) mem_122243.mem)[gtid_117508] = defunc_1_f_res_125017;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131231_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131231_end -
                 futhark_mc_segmap_parloop_131231_start;
        
        ctx->futhark_mc_segmap_parloop_131231_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131231_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131231_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131229(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117507 = tid;
    int num_tasks_125020 = info.nsubtasks;
    struct futhark_mc_task_131228 *futhark_mc_task_131228 =
                                  (struct futhark_mc_task_131228 *) args;
    struct futhark_context *ctx = futhark_mc_task_131228->ctx;
    uint64_t futhark_mc_segmap_task_131229_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131229_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131228->free_n_114518;
    int64_t gtid_117506 = futhark_mc_task_131228->free_gtid_117506;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131228->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_122236 =
            futhark_mc_task_131228->free_ctx_param_ext_122236;
    struct memblock mem_param_122240 = {.desc ="mem_param_122240", .mem =
                                        futhark_mc_task_131228->free_mem_param_122240,
                                        .size =0, .references =NULL};
    struct memblock mem_122243 = {.desc ="mem_122243", .mem =
                                  futhark_mc_task_131228->free_mem_122243,
                                  .size =0, .references =NULL};
    int64_t iter_125021;
    struct futhark_mc_segmap_parloop_struct_131230
    futhark_mc_segmap_parloop_struct_131230;
    
    futhark_mc_segmap_parloop_struct_131230.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131230.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131230.free_gtid_117506 = gtid_117506;
    futhark_mc_segmap_parloop_struct_131230.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131230.free_ctx_param_ext_122236 =
        ctx_param_ext_122236;
    futhark_mc_segmap_parloop_struct_131230.free_mem_param_122240 =
        mem_param_122240.mem;
    futhark_mc_segmap_parloop_struct_131230.free_mem_122243 = mem_122243.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131231_task;
    
    futhark_mc_segmap_parloop_131231_task.name =
        "futhark_mc_segmap_parloop_131231";
    futhark_mc_segmap_parloop_131231_task.fn = futhark_mc_segmap_parloop_131231;
    futhark_mc_segmap_parloop_131231_task.args =
        &futhark_mc_segmap_parloop_struct_131230;
    futhark_mc_segmap_parloop_131231_task.iterations = iterations;
    futhark_mc_segmap_parloop_131231_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131231_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131231_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131231_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131231_task);
    
    if (futhark_mc_segmap_parloop_131231_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131231_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131231_total_end -
                 futhark_mc_segmap_parloop_131231_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131231_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131231_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131231_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131229_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131229_end -
                 futhark_mc_segmap_task_131229_start;
        
        ctx->futhark_mc_segmap_task_131229_runs[tid]++;
        ctx->futhark_mc_segmap_task_131229_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131229_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131226(void *args, int64_t start,
                                            int64_t end, int flat_tid_117505,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131225
    *futhark_mc_segmap_parloop_struct_131225 =
    (struct futhark_mc_segmap_parloop_struct_131225 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131225->ctx;
    uint64_t futhark_mc_segmap_parloop_131226_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131226_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131225->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131225->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131225->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131225->free_bytes_121961;
    int64_t ctx_param_ext_122236 =
            futhark_mc_segmap_parloop_struct_131225->free_ctx_param_ext_122236;
    struct memblock mem_param_122240 = {.desc ="mem_param_122240", .mem =
                                        futhark_mc_segmap_parloop_struct_131225->free_mem_param_122240,
                                        .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segmap_parloop_struct_131225->free_mem_122262,
                                  .size =0, .references =NULL};
    size_t mem_122243_cached_sizze_131227 = 0;
    char *mem_122243 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125014 = start;
    
    if (mem_122243_cached_sizze_131227 < (size_t) bytes_121961) {
        mem_122243 = realloc(mem_122243, bytes_121961);
        mem_122243_cached_sizze_131227 = bytes_121961;
    }
    for (; iter_125014 < end; iter_125014++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125018 = m_114517;
        int64_t gtid_117506 = iter_125014;
        int64_t remnant_125019 = iter_125014 - gtid_117506;
        int64_t flat_tid_117507 = (int64_t) 0;
        int32_t num_tasks_125020;
        struct futhark_mc_task_131228 futhark_mc_task_131228;
        
        futhark_mc_task_131228.ctx = ctx;
        futhark_mc_task_131228.free_n_114518 = n_114518;
        futhark_mc_task_131228.free_gtid_117506 = gtid_117506;
        futhark_mc_task_131228.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131228.free_ctx_param_ext_122236 = ctx_param_ext_122236;
        futhark_mc_task_131228.free_mem_param_122240 = mem_param_122240.mem;
        futhark_mc_task_131228.free_mem_122243 = mem_122243;
        
        struct scheduler_segop futhark_mc_task_131228_task;
        
        futhark_mc_task_131228_task.args = &futhark_mc_task_131228;
        futhark_mc_task_131228_task.top_level_fn =
            futhark_mc_segmap_task_131229;
        futhark_mc_task_131228_task.name = "futhark_mc_segmap_task_131229";
        futhark_mc_task_131228_task.iterations = n_114518;
        futhark_mc_task_131228_task.task_time =
            &ctx->futhark_mc_segmap_task_131229_total_time;
        futhark_mc_task_131228_task.task_iter =
            &ctx->futhark_mc_segmap_task_131229_total_iter;
        futhark_mc_task_131228_task.sched = STATIC;
        futhark_mc_task_131228_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131229_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131228_task);
        
        if (futhark_mc_segmap_task_131229_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122262.mem + gtid_117506 * n_114518 * (int64_t) 4,
                mem_122243 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122243);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131226_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131226_end -
                 futhark_mc_segmap_parloop_131226_start;
        
        ctx->futhark_mc_segmap_parloop_131226_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131226_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131226_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131224(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117505 = tid;
    int num_tasks_125003 = info.nsubtasks;
    struct futhark_mc_task_131219 *futhark_mc_task_131219 =
                                  (struct futhark_mc_task_131219 *) args;
    struct futhark_context *ctx = futhark_mc_task_131219->ctx;
    uint64_t futhark_mc_segmap_nested_task_131224_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131224_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131219->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131219->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131219->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131219->free_bytes_121961;
    int64_t ctx_param_ext_122236 =
            futhark_mc_task_131219->free_ctx_param_ext_122236;
    struct memblock mem_param_122240 = {.desc ="mem_param_122240", .mem =
                                        futhark_mc_task_131219->free_mem_param_122240,
                                        .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131219->free_mem_122262,
                                  .size =0, .references =NULL};
    int64_t iter_125014;
    struct futhark_mc_segmap_parloop_struct_131225
    futhark_mc_segmap_parloop_struct_131225;
    
    futhark_mc_segmap_parloop_struct_131225.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131225.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131225.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131225.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131225.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131225.free_ctx_param_ext_122236 =
        ctx_param_ext_122236;
    futhark_mc_segmap_parloop_struct_131225.free_mem_param_122240 =
        mem_param_122240.mem;
    futhark_mc_segmap_parloop_struct_131225.free_mem_122262 = mem_122262.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131226_task;
    
    futhark_mc_segmap_parloop_131226_task.name =
        "futhark_mc_segmap_parloop_131226";
    futhark_mc_segmap_parloop_131226_task.fn = futhark_mc_segmap_parloop_131226;
    futhark_mc_segmap_parloop_131226_task.args =
        &futhark_mc_segmap_parloop_struct_131225;
    futhark_mc_segmap_parloop_131226_task.iterations = iterations;
    futhark_mc_segmap_parloop_131226_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131226_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131226_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131226_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131226_task);
    
    if (futhark_mc_segmap_parloop_131226_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131226_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131226_total_end -
                 futhark_mc_segmap_parloop_131226_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131226_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131226_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131226_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131224_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131224_end -
                 futhark_mc_segmap_nested_task_131224_start;
        
        ctx->futhark_mc_segmap_nested_task_131224_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131224_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131224_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131232 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    char *free_mem_122004;
    int64_t free_bytes_122005;
    char *free_mem_122026;
    char *free_mem_122262;
    char *free_mem_122284;
};
struct futhark_mc_segmap_parloop_struct_131234 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    char *free_mem_122004;
    int64_t free_bytes_122005;
    char *free_mem_122026;
    char *free_mem_122262;
    char *free_mem_122284;
};
static int futhark_mc_segmap_parloop_131235(void *args, int64_t start,
                                            int64_t end, int flat_tid_117515,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131234
    *futhark_mc_segmap_parloop_struct_131234 =
    (struct futhark_mc_segmap_parloop_struct_131234 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131234->ctx;
    uint64_t futhark_mc_segmap_parloop_131235_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131235_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131234->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131234->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131234->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131234->free_css_chunk_len_114564;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131234->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 =
            futhark_mc_segmap_parloop_struct_131234->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_segmap_parloop_struct_131234->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segmap_parloop_struct_131234->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_segmap_parloop_struct_131234->free_mem_122284,
                                  .size =0, .references =NULL};
    size_t mem_122268_cached_sizze_131236 = 0;
    char *mem_122268 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125025 = start;
    
    if (mem_122268_cached_sizze_131236 < (size_t) bytes_122005) {
        mem_122268 = realloc(mem_122268, bytes_122005);
        mem_122268_cached_sizze_131236 = bytes_122005;
    }
    for (; iter_125025 < end; iter_125025++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125044 = m_114517;
        int64_t gtid_117516 = iter_125025;
        int64_t remnant_125045 = iter_125025 - gtid_117516;
        
        for (int64_t i_125026 = 0; i_125026 < n_p_114520; i_125026++) {
            float x_125028 = ((float *) mem_122026.mem)[gtid_117516 *
                                                        n_p_114520 + i_125026];
            float defunc_2_reduce_res_125029;
            float redout_125031 = 0.0F;
            
            for (int64_t i_125030 = 0; i_125030 < css_chunk_len_114564;
                 i_125030++) {
                int64_t x_125032 = ((int64_t *) mem_122004.mem)[i_125026 *
                                                                css_chunk_len_114564 +
                                                                i_125030];
                bool cond_125033 = sle64((int64_t) 0, x_125032);
                float defunc_0_f_res_125034;
                
                if (cond_125033) {
                    bool y_125035 = slt64(x_125032, n_114518);
                    bool bounds_check_125036 = cond_125033 && y_125035;
                    bool index_certs_125037;
                    
                    if (!bounds_check_125036) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_125032,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114518, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:207:38-73\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:205:21-210:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:203:13-211:43\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_125038 =
                          ((float *) mem_122262.mem)[gtid_117516 * n_114518 +
                                                     x_125032];
                    
                    defunc_0_f_res_125034 = defunc_0_f_res_t_res_125038;
                } else {
                    defunc_0_f_res_125034 = NAN;
                }
                
                bool isnan_res_125039;
                
                isnan_res_125039 = futrts_isnan32(defunc_0_f_res_125034);
                
                float defunc_0_f_res_125040;
                
                if (isnan_res_125039) {
                    defunc_0_f_res_125040 = 0.0F;
                } else {
                    defunc_0_f_res_125040 = defunc_0_f_res_125034;
                }
                
                float defunc_1_op_res_125041 = defunc_0_f_res_125040 +
                      redout_125031;
                float redout_tmp_125047 = defunc_1_op_res_125041;
                
                redout_125031 = redout_tmp_125047;
            }
            defunc_2_reduce_res_125029 = redout_125031;
            
            float defunc_1_f_res_125042 = defunc_2_reduce_res_125029 / x_125028;
            
            ((float *) mem_122268)[i_125026] = defunc_1_f_res_125042;
        }
        memmove(mem_122284.mem + gtid_117516 * n_p_114520 * (int64_t) 4,
                mem_122268 + (int64_t) 0, n_p_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122268);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131235_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131235_end -
                 futhark_mc_segmap_parloop_131235_start;
        
        ctx->futhark_mc_segmap_parloop_131235_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131235_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131235_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131233(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117515 = tid;
    int num_tasks_125024 = info.nsubtasks;
    struct futhark_mc_task_131232 *futhark_mc_task_131232 =
                                  (struct futhark_mc_task_131232 *) args;
    struct futhark_context *ctx = futhark_mc_task_131232->ctx;
    uint64_t futhark_mc_segmap_task_131233_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131233_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131232->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131232->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131232->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131232->free_css_chunk_len_114564;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131232->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 = futhark_mc_task_131232->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_task_131232->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131232->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_task_131232->free_mem_122284,
                                  .size =0, .references =NULL};
    int64_t iter_125025;
    struct futhark_mc_segmap_parloop_struct_131234
    futhark_mc_segmap_parloop_struct_131234;
    
    futhark_mc_segmap_parloop_struct_131234.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131234.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131234.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131234.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131234.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131234.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131234.free_bytes_122005 = bytes_122005;
    futhark_mc_segmap_parloop_struct_131234.free_mem_122026 = mem_122026.mem;
    futhark_mc_segmap_parloop_struct_131234.free_mem_122262 = mem_122262.mem;
    futhark_mc_segmap_parloop_struct_131234.free_mem_122284 = mem_122284.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131235_task;
    
    futhark_mc_segmap_parloop_131235_task.name =
        "futhark_mc_segmap_parloop_131235";
    futhark_mc_segmap_parloop_131235_task.fn = futhark_mc_segmap_parloop_131235;
    futhark_mc_segmap_parloop_131235_task.args =
        &futhark_mc_segmap_parloop_struct_131234;
    futhark_mc_segmap_parloop_131235_task.iterations = iterations;
    futhark_mc_segmap_parloop_131235_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131235_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131235_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131235_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131235_task);
    
    if (futhark_mc_segmap_parloop_131235_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131235_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131235_total_end -
                 futhark_mc_segmap_parloop_131235_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131235_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131235_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131235_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131233_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131233_end -
                 futhark_mc_segmap_task_131233_start;
        
        ctx->futhark_mc_segmap_task_131233_runs[tid]++;
        ctx->futhark_mc_segmap_task_131233_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131233_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131238 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    char *free_mem_122004;
    int64_t free_bytes_122005;
    char *free_mem_122026;
    char *free_mem_122262;
    char *free_mem_122284;
};
struct futhark_mc_task_131241 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_117518;
    char *free_mem_122004;
    char *free_mem_122026;
    char *free_mem_122262;
    char *free_mem_122265;
};
struct futhark_mc_segmap_parloop_struct_131243 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_117518;
    char *free_mem_122004;
    char *free_mem_122026;
    char *free_mem_122262;
    char *free_mem_122265;
};
static int futhark_mc_segmap_parloop_131244(void *args, int64_t start,
                                            int64_t end, int flat_tid_117519,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131243
    *futhark_mc_segmap_parloop_struct_131243 =
    (struct futhark_mc_segmap_parloop_struct_131243 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131243->ctx;
    uint64_t futhark_mc_segmap_parloop_131244_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131244_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131243->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131243->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131243->free_css_chunk_len_114564;
    int64_t gtid_117518 =
            futhark_mc_segmap_parloop_struct_131243->free_gtid_117518;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131243->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_segmap_parloop_struct_131243->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segmap_parloop_struct_131243->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122265 = {.desc ="mem_122265", .mem =
                                  futhark_mc_segmap_parloop_struct_131243->free_mem_122265,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125082 = start;
    
    for (; iter_125082 < end; iter_125082++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125095 = n_p_114520;
        int64_t gtid_117520 = iter_125082;
        int64_t remnant_125096 = iter_125082 - gtid_117520;
        float x_125064 = ((float *) mem_122026.mem)[gtid_117518 * n_p_114520 +
                                                    gtid_117520];
        float defunc_2_reduce_res_125065;
        float redout_125084 = 0.0F;
        
        for (int64_t i_125083 = 0; i_125083 < css_chunk_len_114564;
             i_125083++) {
            int64_t x_125085 = ((int64_t *) mem_122004.mem)[gtid_117520 *
                                                            css_chunk_len_114564 +
                                                            i_125083];
            bool cond_125086 = sle64((int64_t) 0, x_125085);
            float defunc_0_f_res_125087;
            
            if (cond_125086) {
                bool y_125088 = slt64(x_125085, n_114518);
                bool bounds_check_125089 = cond_125086 && y_125088;
                bool index_certs_125090;
                
                if (!bounds_check_125089) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_125085,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:207:38-73\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:205:21-210:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:203:13-211:43\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_125091 =
                      ((float *) mem_122262.mem)[gtid_117518 * n_114518 +
                                                 x_125085];
                
                defunc_0_f_res_125087 = defunc_0_f_res_t_res_125091;
            } else {
                defunc_0_f_res_125087 = NAN;
            }
            
            bool isnan_res_125092;
            
            isnan_res_125092 = futrts_isnan32(defunc_0_f_res_125087);
            
            float defunc_0_f_res_125093;
            
            if (isnan_res_125092) {
                defunc_0_f_res_125093 = 0.0F;
            } else {
                defunc_0_f_res_125093 = defunc_0_f_res_125087;
            }
            
            float defunc_1_op_res_125094 = defunc_0_f_res_125093 +
                  redout_125084;
            float redout_tmp_125097 = defunc_1_op_res_125094;
            
            redout_125084 = redout_tmp_125097;
        }
        defunc_2_reduce_res_125065 = redout_125084;
        
        float defunc_1_f_res_125078 = defunc_2_reduce_res_125065 / x_125064;
        
        ((float *) mem_122265.mem)[gtid_117520] = defunc_1_f_res_125078;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131244_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131244_end -
                 futhark_mc_segmap_parloop_131244_start;
        
        ctx->futhark_mc_segmap_parloop_131244_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131244_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131244_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131242(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117519 = tid;
    int num_tasks_125081 = info.nsubtasks;
    struct futhark_mc_task_131241 *futhark_mc_task_131241 =
                                  (struct futhark_mc_task_131241 *) args;
    struct futhark_context *ctx = futhark_mc_task_131241->ctx;
    uint64_t futhark_mc_segmap_task_131242_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131242_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131241->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131241->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131241->free_css_chunk_len_114564;
    int64_t gtid_117518 = futhark_mc_task_131241->free_gtid_117518;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131241->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_task_131241->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131241->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122265 = {.desc ="mem_122265", .mem =
                                  futhark_mc_task_131241->free_mem_122265,
                                  .size =0, .references =NULL};
    int64_t iter_125082;
    struct futhark_mc_segmap_parloop_struct_131243
    futhark_mc_segmap_parloop_struct_131243;
    
    futhark_mc_segmap_parloop_struct_131243.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131243.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131243.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131243.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131243.free_gtid_117518 = gtid_117518;
    futhark_mc_segmap_parloop_struct_131243.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131243.free_mem_122026 = mem_122026.mem;
    futhark_mc_segmap_parloop_struct_131243.free_mem_122262 = mem_122262.mem;
    futhark_mc_segmap_parloop_struct_131243.free_mem_122265 = mem_122265.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131244_task;
    
    futhark_mc_segmap_parloop_131244_task.name =
        "futhark_mc_segmap_parloop_131244";
    futhark_mc_segmap_parloop_131244_task.fn = futhark_mc_segmap_parloop_131244;
    futhark_mc_segmap_parloop_131244_task.args =
        &futhark_mc_segmap_parloop_struct_131243;
    futhark_mc_segmap_parloop_131244_task.iterations = iterations;
    futhark_mc_segmap_parloop_131244_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131244_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131244_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131244_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131244_task);
    
    if (futhark_mc_segmap_parloop_131244_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131244_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131244_total_end -
                 futhark_mc_segmap_parloop_131244_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131244_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131244_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131244_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131242_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131242_end -
                 futhark_mc_segmap_task_131242_start;
        
        ctx->futhark_mc_segmap_task_131242_runs[tid]++;
        ctx->futhark_mc_segmap_task_131242_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131242_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131246 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_117518;
    char *free_mem_122004;
    char *free_mem_122026;
    char *free_mem_122262;
    char *free_mem_122265;
};
struct futhark_mc_task_131248 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_117518;
    int64_t free_gtid_117522;
    char *free_mem_122004;
    char *free_mem_122262;
    float *retval_defunc_2_reduce_res_125050;
};
struct futhark_mc_segred_stage_1_parloop_struct_131251 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_css_chunk_len_114564;
    int64_t free_gtid_117518;
    int64_t free_gtid_117522;
    char *free_mem_122004;
    char *free_mem_122262;
    char *free_reduce_stage_1_tid_res_arr_mem_125114;
};
static int futhark_mc_segred_stage_1_parloop_131252(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117523,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131251
    *futhark_mc_segred_stage_1_parloop_struct_131251 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131251 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131251->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131252_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131252_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131251->free_n_114518;
    int64_t css_chunk_len_114564 =
            futhark_mc_segred_stage_1_parloop_struct_131251->free_css_chunk_len_114564;
    int64_t gtid_117518 =
            futhark_mc_segred_stage_1_parloop_struct_131251->free_gtid_117518;
    int64_t gtid_117522 =
            futhark_mc_segred_stage_1_parloop_struct_131251->free_gtid_117522;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131251->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131251->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125114 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125114",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131251->free_reduce_stage_1_tid_res_arr_mem_125114,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125116 = start;
    float x_125099;
    float x_125100;
    float local_acc_125117 = 0.0F;
    
    for (; iter_125116 < end; iter_125116++) {
        int64_t gtid_117524 = iter_125116;
        int64_t x_125102 = ((int64_t *) mem_122004.mem)[gtid_117522 *
                                                        css_chunk_len_114564 +
                                                        gtid_117524];
        bool cond_125103 = sle64((int64_t) 0, x_125102);
        float defunc_0_f_res_125104;
        
        if (cond_125103) {
            bool y_125105 = slt64(x_125102, n_114518);
            bool bounds_check_125106 = cond_125103 && y_125105;
            bool index_certs_125107;
            
            if (!bounds_check_125106) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_125102,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:207:38-73\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:205:21-210:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:203:13-211:43\n   #9  stl.fut:394:3-405:33\n   #10 stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125108 =
                  ((float *) mem_122262.mem)[gtid_117518 * n_114518 + x_125102];
            
            defunc_0_f_res_125104 = defunc_0_f_res_t_res_125108;
        } else {
            defunc_0_f_res_125104 = NAN;
        }
        
        bool isnan_res_125109;
        
        isnan_res_125109 = futrts_isnan32(defunc_0_f_res_125104);
        
        float defunc_0_f_res_125110;
        
        if (isnan_res_125109) {
            defunc_0_f_res_125110 = 0.0F;
        } else {
            defunc_0_f_res_125110 = defunc_0_f_res_125104;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_125099 = local_acc_125117;
        }
        // Load next params
        {
            x_125100 = defunc_0_f_res_125110;
        }
        // Red body
        {
            float defunc_1_op_res_125101 = x_125099 + x_125100;
            
            local_acc_125117 = defunc_1_op_res_125101;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125114.mem)[flat_tid_117523] =
        local_acc_125117;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131252_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131252_end -
                 futhark_mc_segred_stage_1_parloop_131252_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131252_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131252_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131252_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131249(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117523 = tid;
    int num_tasks_125113 = info.nsubtasks;
    struct futhark_mc_task_131248 *futhark_mc_task_131248 =
                                  (struct futhark_mc_task_131248 *) args;
    struct futhark_context *ctx = futhark_mc_task_131248->ctx;
    uint64_t futhark_mc_segred_task_131249_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131249_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131248->free_n_114518;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131248->free_css_chunk_len_114564;
    int64_t gtid_117518 = futhark_mc_task_131248->free_gtid_117518;
    int64_t gtid_117522 = futhark_mc_task_131248->free_gtid_117522;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131248->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131248->free_mem_122262,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_125050 =
          *futhark_mc_task_131248->retval_defunc_2_reduce_res_125050;
    size_t reduce_stage_1_tid_res_arr_mem_125114_cached_sizze_131250 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125114 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125114_cached_sizze_131250 <
        (size_t) ((int64_t) 4 * num_tasks_125113)) {
        reduce_stage_1_tid_res_arr_mem_125114 =
            realloc(reduce_stage_1_tid_res_arr_mem_125114, (int64_t) 4 *
                    num_tasks_125113);
        reduce_stage_1_tid_res_arr_mem_125114_cached_sizze_131250 =
            (int64_t) 4 * num_tasks_125113;
    }
    
    int64_t iter_125116;
    struct futhark_mc_segred_stage_1_parloop_struct_131251
    futhark_mc_segred_stage_1_parloop_struct_131251;
    
    futhark_mc_segred_stage_1_parloop_struct_131251.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_gtid_117518 =
        gtid_117518;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_gtid_117522 =
        gtid_117522;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_mem_122004 =
        mem_122004.mem;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_mem_122262 =
        mem_122262.mem;
    futhark_mc_segred_stage_1_parloop_struct_131251.free_reduce_stage_1_tid_res_arr_mem_125114 =
        reduce_stage_1_tid_res_arr_mem_125114;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131252_task;
    
    futhark_mc_segred_stage_1_parloop_131252_task.name =
        "futhark_mc_segred_stage_1_parloop_131252";
    futhark_mc_segred_stage_1_parloop_131252_task.fn =
        futhark_mc_segred_stage_1_parloop_131252;
    futhark_mc_segred_stage_1_parloop_131252_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131251;
    futhark_mc_segred_stage_1_parloop_131252_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131252_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131252_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131252_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131252_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131252_task);
    
    if (futhark_mc_segred_stage_1_parloop_131252_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131252_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131252_total_end -
                 futhark_mc_segred_stage_1_parloop_131252_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131252_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131252_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131252_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125050 = 0.0F;
    }
    
    float x_125118;
    float x_125119;
    
    for (int32_t i_125121 = 0; i_125121 < num_tasks_125113; i_125121++) {
        flat_tid_117523 = i_125121;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125118 = defunc_2_reduce_res_125050;
            }
            // load next params
            {
                x_125119 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125114)[flat_tid_117523];
            }
            // red body
            {
                float defunc_1_op_res_125120 = x_125118 + x_125119;
                
                defunc_2_reduce_res_125050 = defunc_1_op_res_125120;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125114);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131249_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131249_end -
                 futhark_mc_segred_task_131249_start;
        
        ctx->futhark_mc_segred_task_131249_runs[tid]++;
        ctx->futhark_mc_segred_task_131249_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131249_iter[tid] += iterations;
    }
    *futhark_mc_task_131248->retval_defunc_2_reduce_res_125050 =
        defunc_2_reduce_res_125050;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131247(void *args, int64_t start,
                                            int64_t end, int flat_tid_117521,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131246
    *futhark_mc_segmap_parloop_struct_131246 =
    (struct futhark_mc_segmap_parloop_struct_131246 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131246->ctx;
    uint64_t futhark_mc_segmap_parloop_131247_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131247_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131246->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131246->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131246->free_css_chunk_len_114564;
    int64_t gtid_117518 =
            futhark_mc_segmap_parloop_struct_131246->free_gtid_117518;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122265 = {.desc ="mem_122265", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_122265,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125098 = start;
    
    for (; iter_125098 < end; iter_125098++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125111 = n_p_114520;
        int64_t gtid_117522 = iter_125098;
        int64_t remnant_125112 = iter_125098 - gtid_117522;
        float x_125049 = ((float *) mem_122026.mem)[gtid_117518 * n_p_114520 +
                                                    gtid_117522];
        float defunc_2_reduce_res_125050;
        int64_t flat_tid_117523 = (int64_t) 0;
        int32_t num_tasks_125113;
        struct futhark_mc_task_131248 futhark_mc_task_131248;
        
        futhark_mc_task_131248.ctx = ctx;
        futhark_mc_task_131248.free_n_114518 = n_114518;
        futhark_mc_task_131248.free_css_chunk_len_114564 = css_chunk_len_114564;
        futhark_mc_task_131248.free_gtid_117518 = gtid_117518;
        futhark_mc_task_131248.free_gtid_117522 = gtid_117522;
        futhark_mc_task_131248.free_mem_122004 = mem_122004.mem;
        futhark_mc_task_131248.free_mem_122262 = mem_122262.mem;
        futhark_mc_task_131248.retval_defunc_2_reduce_res_125050 =
            &defunc_2_reduce_res_125050;
        
        struct scheduler_segop futhark_mc_task_131248_task;
        
        futhark_mc_task_131248_task.args = &futhark_mc_task_131248;
        futhark_mc_task_131248_task.top_level_fn =
            futhark_mc_segred_task_131249;
        futhark_mc_task_131248_task.name = "futhark_mc_segred_task_131249";
        futhark_mc_task_131248_task.iterations = css_chunk_len_114564;
        futhark_mc_task_131248_task.task_time =
            &ctx->futhark_mc_segred_task_131249_total_time;
        futhark_mc_task_131248_task.task_iter =
            &ctx->futhark_mc_segred_task_131249_total_iter;
        futhark_mc_task_131248_task.sched = STATIC;
        futhark_mc_task_131248_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131249_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131248_task);
        
        if (futhark_mc_segred_task_131249_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_1_f_res_125063 = defunc_2_reduce_res_125050 / x_125049;
        
        ((float *) mem_122265.mem)[gtid_117522] = defunc_1_f_res_125063;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131247_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131247_end -
                 futhark_mc_segmap_parloop_131247_start;
        
        ctx->futhark_mc_segmap_parloop_131247_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131247_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131247_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131245(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117521 = tid;
    int num_tasks_125081 = info.nsubtasks;
    struct futhark_mc_task_131241 *futhark_mc_task_131241 =
                                  (struct futhark_mc_task_131241 *) args;
    struct futhark_context *ctx = futhark_mc_task_131241->ctx;
    uint64_t futhark_mc_segmap_nested_task_131245_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131245_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131241->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131241->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131241->free_css_chunk_len_114564;
    int64_t gtid_117518 = futhark_mc_task_131241->free_gtid_117518;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131241->free_mem_122004,
                                  .size =0, .references =NULL};
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_task_131241->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131241->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122265 = {.desc ="mem_122265", .mem =
                                  futhark_mc_task_131241->free_mem_122265,
                                  .size =0, .references =NULL};
    int64_t iter_125098;
    struct futhark_mc_segmap_parloop_struct_131246
    futhark_mc_segmap_parloop_struct_131246;
    
    futhark_mc_segmap_parloop_struct_131246.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131246.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131246.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131246.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131246.free_gtid_117518 = gtid_117518;
    futhark_mc_segmap_parloop_struct_131246.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131246.free_mem_122026 = mem_122026.mem;
    futhark_mc_segmap_parloop_struct_131246.free_mem_122262 = mem_122262.mem;
    futhark_mc_segmap_parloop_struct_131246.free_mem_122265 = mem_122265.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131247_task;
    
    futhark_mc_segmap_parloop_131247_task.name =
        "futhark_mc_segmap_parloop_131247";
    futhark_mc_segmap_parloop_131247_task.fn = futhark_mc_segmap_parloop_131247;
    futhark_mc_segmap_parloop_131247_task.args =
        &futhark_mc_segmap_parloop_struct_131246;
    futhark_mc_segmap_parloop_131247_task.iterations = iterations;
    futhark_mc_segmap_parloop_131247_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131247_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131247_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131247_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131247_task);
    
    if (futhark_mc_segmap_parloop_131247_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131247_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131247_total_end -
                 futhark_mc_segmap_parloop_131247_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131247_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131247_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131247_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131245_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131245_end -
                 futhark_mc_segmap_nested_task_131245_start;
        
        ctx->futhark_mc_segmap_nested_task_131245_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131245_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131245_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131239(void *args, int64_t start,
                                            int64_t end, int flat_tid_117517,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131238
    *futhark_mc_segmap_parloop_struct_131238 =
    (struct futhark_mc_segmap_parloop_struct_131238 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131238->ctx;
    uint64_t futhark_mc_segmap_parloop_131239_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131239_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131238->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131238->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131238->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_segmap_parloop_struct_131238->free_css_chunk_len_114564;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_segmap_parloop_struct_131238->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 =
            futhark_mc_segmap_parloop_struct_131238->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_segmap_parloop_struct_131238->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_segmap_parloop_struct_131238->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_segmap_parloop_struct_131238->free_mem_122284,
                                  .size =0, .references =NULL};
    size_t mem_122265_cached_sizze_131240 = 0;
    char *mem_122265 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125048 = start;
    
    if (mem_122265_cached_sizze_131240 < (size_t) bytes_122005) {
        mem_122265 = realloc(mem_122265, bytes_122005);
        mem_122265_cached_sizze_131240 = bytes_122005;
    }
    for (; iter_125048 < end; iter_125048++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125079 = m_114517;
        int64_t gtid_117518 = iter_125048;
        int64_t remnant_125080 = iter_125048 - gtid_117518;
        int64_t flat_tid_117519 = (int64_t) 0;
        int32_t num_tasks_125081;
        int64_t flat_tid_117521 = (int64_t) 0;
        struct futhark_mc_task_131241 futhark_mc_task_131241;
        
        futhark_mc_task_131241.ctx = ctx;
        futhark_mc_task_131241.free_n_114518 = n_114518;
        futhark_mc_task_131241.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131241.free_css_chunk_len_114564 = css_chunk_len_114564;
        futhark_mc_task_131241.free_gtid_117518 = gtid_117518;
        futhark_mc_task_131241.free_mem_122004 = mem_122004.mem;
        futhark_mc_task_131241.free_mem_122026 = mem_122026.mem;
        futhark_mc_task_131241.free_mem_122262 = mem_122262.mem;
        futhark_mc_task_131241.free_mem_122265 = mem_122265;
        
        struct scheduler_segop futhark_mc_task_131241_task;
        
        futhark_mc_task_131241_task.args = &futhark_mc_task_131241;
        futhark_mc_task_131241_task.top_level_fn =
            futhark_mc_segmap_task_131242;
        futhark_mc_task_131241_task.name = "futhark_mc_segmap_task_131242";
        futhark_mc_task_131241_task.iterations = n_p_114520;
        futhark_mc_task_131241_task.task_time =
            &ctx->futhark_mc_segmap_task_131242_total_time;
        futhark_mc_task_131241_task.task_iter =
            &ctx->futhark_mc_segmap_task_131242_total_iter;
        futhark_mc_task_131241_task.sched = STATIC;
        futhark_mc_task_131241_task.nested_fn =
            futhark_mc_segmap_nested_task_131245;
        
        int futhark_mc_segmap_task_131242_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131241_task);
        
        if (futhark_mc_segmap_task_131242_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122284.mem + gtid_117518 * n_p_114520 * (int64_t) 4,
                mem_122265 + (int64_t) 0, n_p_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122265);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131239_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131239_end -
                 futhark_mc_segmap_parloop_131239_start;
        
        ctx->futhark_mc_segmap_parloop_131239_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131239_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131239_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131237(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117517 = tid;
    int num_tasks_125024 = info.nsubtasks;
    struct futhark_mc_task_131232 *futhark_mc_task_131232 =
                                  (struct futhark_mc_task_131232 *) args;
    struct futhark_context *ctx = futhark_mc_task_131232->ctx;
    uint64_t futhark_mc_segmap_nested_task_131237_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131237_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131232->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131232->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131232->free_n_p_114520;
    int64_t css_chunk_len_114564 =
            futhark_mc_task_131232->free_css_chunk_len_114564;
    struct memblock mem_122004 = {.desc ="mem_122004", .mem =
                                  futhark_mc_task_131232->free_mem_122004,
                                  .size =0, .references =NULL};
    int64_t bytes_122005 = futhark_mc_task_131232->free_bytes_122005;
    struct memblock mem_122026 = {.desc ="mem_122026", .mem =
                                  futhark_mc_task_131232->free_mem_122026,
                                  .size =0, .references =NULL};
    struct memblock mem_122262 = {.desc ="mem_122262", .mem =
                                  futhark_mc_task_131232->free_mem_122262,
                                  .size =0, .references =NULL};
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_task_131232->free_mem_122284,
                                  .size =0, .references =NULL};
    int64_t iter_125048;
    struct futhark_mc_segmap_parloop_struct_131238
    futhark_mc_segmap_parloop_struct_131238;
    
    futhark_mc_segmap_parloop_struct_131238.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131238.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131238.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131238.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131238.free_css_chunk_len_114564 =
        css_chunk_len_114564;
    futhark_mc_segmap_parloop_struct_131238.free_mem_122004 = mem_122004.mem;
    futhark_mc_segmap_parloop_struct_131238.free_bytes_122005 = bytes_122005;
    futhark_mc_segmap_parloop_struct_131238.free_mem_122026 = mem_122026.mem;
    futhark_mc_segmap_parloop_struct_131238.free_mem_122262 = mem_122262.mem;
    futhark_mc_segmap_parloop_struct_131238.free_mem_122284 = mem_122284.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131239_task;
    
    futhark_mc_segmap_parloop_131239_task.name =
        "futhark_mc_segmap_parloop_131239";
    futhark_mc_segmap_parloop_131239_task.fn = futhark_mc_segmap_parloop_131239;
    futhark_mc_segmap_parloop_131239_task.args =
        &futhark_mc_segmap_parloop_struct_131238;
    futhark_mc_segmap_parloop_131239_task.iterations = iterations;
    futhark_mc_segmap_parloop_131239_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131239_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131239_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131239_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131239_task);
    
    if (futhark_mc_segmap_parloop_131239_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131239_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131239_total_end -
                 futhark_mc_segmap_parloop_131239_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131239_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131239_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131239_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131237_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131237_end -
                 futhark_mc_segmap_nested_task_131237_start;
        
        ctx->futhark_mc_segmap_nested_task_131237_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131237_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131237_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131253 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    char *free_mem_122284;
    int64_t free_bytes_122285;
    char *free_mem_122306;
};
struct futhark_mc_segmap_parloop_struct_131255 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    char *free_mem_122284;
    int64_t free_bytes_122285;
    char *free_mem_122306;
};
static int futhark_mc_segmap_parloop_131256(void *args, int64_t start,
                                            int64_t end, int flat_tid_117576,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131255
    *futhark_mc_segmap_parloop_struct_131255 =
    (struct futhark_mc_segmap_parloop_struct_131255 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131255->ctx;
    uint64_t futhark_mc_segmap_parloop_131256_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131256_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131255->free_m_114517;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131255->free_n_p_114520;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131255->free_C_len_114566;
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_segmap_parloop_struct_131255->free_mem_122284,
                                  .size =0, .references =NULL};
    int64_t bytes_122285 =
            futhark_mc_segmap_parloop_struct_131255->free_bytes_122285;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131255->free_mem_122306,
                                  .size =0, .references =NULL};
    size_t mem_122290_cached_sizze_131257 = 0;
    char *mem_122290 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125123 = start;
    
    if (mem_122290_cached_sizze_131257 < (size_t) bytes_122285) {
        mem_122290 = realloc(mem_122290, bytes_122285);
        mem_122290_cached_sizze_131257 = bytes_122285;
    }
    for (; iter_125123 < end; iter_125123++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125133 = m_114517;
        int64_t gtid_117577 = iter_125123;
        int64_t remnant_125134 = iter_125123 - gtid_117577;
        
        for (int64_t i_125124 = 0; i_125124 < C_len_114566; i_125124++) {
            int64_t i_125126 = smod64(i_125124, n_p_114520);
            bool x_125127 = sle64((int64_t) 0, i_125126);
            bool y_125128 = slt64(i_125126, n_p_114520);
            bool bounds_check_125129 = x_125127 && y_125128;
            bool index_certs_125130;
            
            if (!bounds_check_125129) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_125126,
                              "] out of bounds for array of shape [",
                              (long long) n_p_114520, "].",
                              "-> #0  stl.fut:217:43-59\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:217:21-60\n   #4  stl.fut:215:13-218:24\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
                return 1;
            }
            memmove(mem_122290 + i_125124 * (int64_t) 4, mem_122284.mem +
                    (gtid_117577 * n_p_114520 + i_125126) * (int64_t) 4,
                    (int64_t) 4);
        }
        memmove(mem_122306.mem + gtid_117577 * C_len_114566 * (int64_t) 4,
                mem_122290 + (int64_t) 0, C_len_114566 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122290);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131256_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131256_end -
                 futhark_mc_segmap_parloop_131256_start;
        
        ctx->futhark_mc_segmap_parloop_131256_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131256_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131256_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131254(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117576 = tid;
    int num_tasks_125122 = info.nsubtasks;
    struct futhark_mc_task_131253 *futhark_mc_task_131253 =
                                  (struct futhark_mc_task_131253 *) args;
    struct futhark_context *ctx = futhark_mc_task_131253->ctx;
    uint64_t futhark_mc_segmap_task_131254_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131254_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131253->free_m_114517;
    int64_t n_p_114520 = futhark_mc_task_131253->free_n_p_114520;
    int64_t C_len_114566 = futhark_mc_task_131253->free_C_len_114566;
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_task_131253->free_mem_122284,
                                  .size =0, .references =NULL};
    int64_t bytes_122285 = futhark_mc_task_131253->free_bytes_122285;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131253->free_mem_122306,
                                  .size =0, .references =NULL};
    int64_t iter_125123;
    struct futhark_mc_segmap_parloop_struct_131255
    futhark_mc_segmap_parloop_struct_131255;
    
    futhark_mc_segmap_parloop_struct_131255.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131255.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131255.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131255.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131255.free_mem_122284 = mem_122284.mem;
    futhark_mc_segmap_parloop_struct_131255.free_bytes_122285 = bytes_122285;
    futhark_mc_segmap_parloop_struct_131255.free_mem_122306 = mem_122306.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131256_task;
    
    futhark_mc_segmap_parloop_131256_task.name =
        "futhark_mc_segmap_parloop_131256";
    futhark_mc_segmap_parloop_131256_task.fn = futhark_mc_segmap_parloop_131256;
    futhark_mc_segmap_parloop_131256_task.args =
        &futhark_mc_segmap_parloop_struct_131255;
    futhark_mc_segmap_parloop_131256_task.iterations = iterations;
    futhark_mc_segmap_parloop_131256_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131256_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131256_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131256_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131256_task);
    
    if (futhark_mc_segmap_parloop_131256_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131256_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131256_total_end -
                 futhark_mc_segmap_parloop_131256_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131256_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131256_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131256_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131254_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131254_end -
                 futhark_mc_segmap_task_131254_start;
        
        ctx->futhark_mc_segmap_task_131254_runs[tid]++;
        ctx->futhark_mc_segmap_task_131254_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131254_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131259 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    char *free_mem_122284;
    int64_t free_bytes_122285;
    char *free_mem_122306;
};
struct futhark_mc_task_131262 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    int64_t free_gtid_117579;
    char *free_mem_122284;
    char *free_mem_122287;
};
struct futhark_mc_segmap_parloop_struct_131264 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    int64_t free_gtid_117579;
    char *free_mem_122284;
    char *free_mem_122287;
};
static int futhark_mc_segmap_parloop_131265(void *args, int64_t start,
                                            int64_t end, int flat_tid_117580,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131264
    *futhark_mc_segmap_parloop_struct_131264 =
    (struct futhark_mc_segmap_parloop_struct_131264 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131264->ctx;
    uint64_t futhark_mc_segmap_parloop_131265_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131265_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131264->free_n_p_114520;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131264->free_C_len_114566;
    int64_t gtid_117579 =
            futhark_mc_segmap_parloop_struct_131264->free_gtid_117579;
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_segmap_parloop_struct_131264->free_mem_122284,
                                  .size =0, .references =NULL};
    struct memblock mem_122287 = {.desc ="mem_122287", .mem =
                                  futhark_mc_segmap_parloop_struct_131264->free_mem_122287,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125146 = start;
    
    for (; iter_125146 < end; iter_125146++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125147 = C_len_114566;
        int64_t gtid_117581 = iter_125146;
        int64_t remnant_125148 = iter_125146 - gtid_117581;
        int64_t i_125137 = smod64(gtid_117581, n_p_114520);
        bool x_125138 = sle64((int64_t) 0, i_125137);
        bool y_125139 = slt64(i_125137, n_p_114520);
        bool bounds_check_125140 = x_125138 && y_125139;
        bool index_certs_125141;
        
        if (!bounds_check_125140) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) i_125137,
                                   "] out of bounds for array of shape [",
                                   (long long) n_p_114520, "].",
                                   "-> #0  stl.fut:217:43-59\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:217:21-60\n   #4  stl.fut:215:13-218:24\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
            return 1;
        }
        
        float defunc_0_f_res_125142 = ((float *) mem_122284.mem)[gtid_117579 *
                                                                 n_p_114520 +
                                                                 i_125137];
        
        ((float *) mem_122287.mem)[gtid_117581] = defunc_0_f_res_125142;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131265_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131265_end -
                 futhark_mc_segmap_parloop_131265_start;
        
        ctx->futhark_mc_segmap_parloop_131265_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131265_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131265_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131263(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117580 = tid;
    int num_tasks_125145 = info.nsubtasks;
    struct futhark_mc_task_131262 *futhark_mc_task_131262 =
                                  (struct futhark_mc_task_131262 *) args;
    struct futhark_context *ctx = futhark_mc_task_131262->ctx;
    uint64_t futhark_mc_segmap_task_131263_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131263_start = get_wall_time();
    
    int64_t n_p_114520 = futhark_mc_task_131262->free_n_p_114520;
    int64_t C_len_114566 = futhark_mc_task_131262->free_C_len_114566;
    int64_t gtid_117579 = futhark_mc_task_131262->free_gtid_117579;
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_task_131262->free_mem_122284,
                                  .size =0, .references =NULL};
    struct memblock mem_122287 = {.desc ="mem_122287", .mem =
                                  futhark_mc_task_131262->free_mem_122287,
                                  .size =0, .references =NULL};
    int64_t iter_125146;
    struct futhark_mc_segmap_parloop_struct_131264
    futhark_mc_segmap_parloop_struct_131264;
    
    futhark_mc_segmap_parloop_struct_131264.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131264.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131264.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131264.free_gtid_117579 = gtid_117579;
    futhark_mc_segmap_parloop_struct_131264.free_mem_122284 = mem_122284.mem;
    futhark_mc_segmap_parloop_struct_131264.free_mem_122287 = mem_122287.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131265_task;
    
    futhark_mc_segmap_parloop_131265_task.name =
        "futhark_mc_segmap_parloop_131265";
    futhark_mc_segmap_parloop_131265_task.fn = futhark_mc_segmap_parloop_131265;
    futhark_mc_segmap_parloop_131265_task.args =
        &futhark_mc_segmap_parloop_struct_131264;
    futhark_mc_segmap_parloop_131265_task.iterations = iterations;
    futhark_mc_segmap_parloop_131265_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131265_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131265_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131265_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131265_task);
    
    if (futhark_mc_segmap_parloop_131265_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131265_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131265_total_end -
                 futhark_mc_segmap_parloop_131265_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131265_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131265_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131265_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131263_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131263_end -
                 futhark_mc_segmap_task_131263_start;
        
        ctx->futhark_mc_segmap_task_131263_runs[tid]++;
        ctx->futhark_mc_segmap_task_131263_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131263_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131260(void *args, int64_t start,
                                            int64_t end, int flat_tid_117578,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131259
    *futhark_mc_segmap_parloop_struct_131259 =
    (struct futhark_mc_segmap_parloop_struct_131259 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131259->ctx;
    uint64_t futhark_mc_segmap_parloop_131260_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131260_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131259->free_m_114517;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131259->free_n_p_114520;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131259->free_C_len_114566;
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_segmap_parloop_struct_131259->free_mem_122284,
                                  .size =0, .references =NULL};
    int64_t bytes_122285 =
            futhark_mc_segmap_parloop_struct_131259->free_bytes_122285;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131259->free_mem_122306,
                                  .size =0, .references =NULL};
    size_t mem_122287_cached_sizze_131261 = 0;
    char *mem_122287 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125136 = start;
    
    if (mem_122287_cached_sizze_131261 < (size_t) bytes_122285) {
        mem_122287 = realloc(mem_122287, bytes_122285);
        mem_122287_cached_sizze_131261 = bytes_122285;
    }
    for (; iter_125136 < end; iter_125136++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125143 = m_114517;
        int64_t gtid_117579 = iter_125136;
        int64_t remnant_125144 = iter_125136 - gtid_117579;
        int64_t flat_tid_117580 = (int64_t) 0;
        int32_t num_tasks_125145;
        struct futhark_mc_task_131262 futhark_mc_task_131262;
        
        futhark_mc_task_131262.ctx = ctx;
        futhark_mc_task_131262.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131262.free_C_len_114566 = C_len_114566;
        futhark_mc_task_131262.free_gtid_117579 = gtid_117579;
        futhark_mc_task_131262.free_mem_122284 = mem_122284.mem;
        futhark_mc_task_131262.free_mem_122287 = mem_122287;
        
        struct scheduler_segop futhark_mc_task_131262_task;
        
        futhark_mc_task_131262_task.args = &futhark_mc_task_131262;
        futhark_mc_task_131262_task.top_level_fn =
            futhark_mc_segmap_task_131263;
        futhark_mc_task_131262_task.name = "futhark_mc_segmap_task_131263";
        futhark_mc_task_131262_task.iterations = C_len_114566;
        futhark_mc_task_131262_task.task_time =
            &ctx->futhark_mc_segmap_task_131263_total_time;
        futhark_mc_task_131262_task.task_iter =
            &ctx->futhark_mc_segmap_task_131263_total_iter;
        futhark_mc_task_131262_task.sched = STATIC;
        futhark_mc_task_131262_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131263_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131262_task);
        
        if (futhark_mc_segmap_task_131263_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122306.mem + gtid_117579 * C_len_114566 * (int64_t) 4,
                mem_122287 + (int64_t) 0, C_len_114566 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122287);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131260_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131260_end -
                 futhark_mc_segmap_parloop_131260_start;
        
        ctx->futhark_mc_segmap_parloop_131260_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131260_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131260_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131258(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117578 = tid;
    int num_tasks_125122 = info.nsubtasks;
    struct futhark_mc_task_131253 *futhark_mc_task_131253 =
                                  (struct futhark_mc_task_131253 *) args;
    struct futhark_context *ctx = futhark_mc_task_131253->ctx;
    uint64_t futhark_mc_segmap_nested_task_131258_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131258_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131253->free_m_114517;
    int64_t n_p_114520 = futhark_mc_task_131253->free_n_p_114520;
    int64_t C_len_114566 = futhark_mc_task_131253->free_C_len_114566;
    struct memblock mem_122284 = {.desc ="mem_122284", .mem =
                                  futhark_mc_task_131253->free_mem_122284,
                                  .size =0, .references =NULL};
    int64_t bytes_122285 = futhark_mc_task_131253->free_bytes_122285;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131253->free_mem_122306,
                                  .size =0, .references =NULL};
    int64_t iter_125136;
    struct futhark_mc_segmap_parloop_struct_131259
    futhark_mc_segmap_parloop_struct_131259;
    
    futhark_mc_segmap_parloop_struct_131259.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131259.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131259.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131259.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131259.free_mem_122284 = mem_122284.mem;
    futhark_mc_segmap_parloop_struct_131259.free_bytes_122285 = bytes_122285;
    futhark_mc_segmap_parloop_struct_131259.free_mem_122306 = mem_122306.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131260_task;
    
    futhark_mc_segmap_parloop_131260_task.name =
        "futhark_mc_segmap_parloop_131260";
    futhark_mc_segmap_parloop_131260_task.fn = futhark_mc_segmap_parloop_131260;
    futhark_mc_segmap_parloop_131260_task.args =
        &futhark_mc_segmap_parloop_struct_131259;
    futhark_mc_segmap_parloop_131260_task.iterations = iterations;
    futhark_mc_segmap_parloop_131260_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131260_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131260_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131260_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131260_task);
    
    if (futhark_mc_segmap_parloop_131260_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131260_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131260_total_end -
                 futhark_mc_segmap_parloop_131260_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131260_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131260_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131260_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131258_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131258_end -
                 futhark_mc_segmap_nested_task_131258_start;
        
        ctx->futhark_mc_segmap_nested_task_131258_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131258_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131258_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131266 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_C_len_114566;
    int64_t free_lifted_single_ma_arg_114938;
    int64_t free_lifted_single_ma_arg_114955;
    int64_t free_bytes_121961;
    char *free_mem_122306;
    int64_t free_bytes_122307;
    int64_t free_bytes_122310;
    char *free_mem_122364;
};
struct futhark_mc_segmap_parloop_struct_131268 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_C_len_114566;
    int64_t free_lifted_single_ma_arg_114938;
    int64_t free_lifted_single_ma_arg_114955;
    int64_t free_bytes_121961;
    char *free_mem_122306;
    int64_t free_bytes_122307;
    int64_t free_bytes_122310;
    char *free_mem_122364;
};
static int futhark_mc_segmap_parloop_131269(void *args, int64_t start,
                                            int64_t end, int flat_tid_117591,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131268
    *futhark_mc_segmap_parloop_struct_131268 =
    (struct futhark_mc_segmap_parloop_struct_131268 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131268->ctx;
    uint64_t futhark_mc_segmap_parloop_131269_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131269_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131268->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131268->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131268->free_n_p_114520;
    float i64_res_114560 =
          futhark_mc_segmap_parloop_struct_131268->free_i64_res_114560;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131268->free_C_len_114566;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_segmap_parloop_struct_131268->free_lifted_single_ma_arg_114938;
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_segmap_parloop_struct_131268->free_lifted_single_ma_arg_114955;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131268->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131268->free_mem_122306,
                                  .size =0, .references =NULL};
    int64_t bytes_122307 =
            futhark_mc_segmap_parloop_struct_131268->free_bytes_122307;
    int64_t bytes_122310 =
            futhark_mc_segmap_parloop_struct_131268->free_bytes_122310;
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_segmap_parloop_struct_131268->free_mem_122364,
                                  .size =0, .references =NULL};
    size_t mem_122318_cached_sizze_131270 = 0;
    char *mem_122318 = NULL;
    size_t mem_122333_cached_sizze_131271 = 0;
    char *mem_122333 = NULL;
    size_t mem_122348_cached_sizze_131272 = 0;
    char *mem_122348 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125150 = start;
    
    if (mem_122318_cached_sizze_131270 < (size_t) bytes_122307) {
        mem_122318 = realloc(mem_122318, bytes_122307);
        mem_122318_cached_sizze_131270 = bytes_122307;
    }
    if (mem_122333_cached_sizze_131271 < (size_t) bytes_122310) {
        mem_122333 = realloc(mem_122333, bytes_122310);
        mem_122333_cached_sizze_131271 = bytes_122310;
    }
    if (mem_122348_cached_sizze_131272 < (size_t) bytes_121961) {
        mem_122348 = realloc(mem_122348, bytes_121961);
        mem_122348_cached_sizze_131272 = bytes_121961;
    }
    for (; iter_125150 < end; iter_125150++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125233 = m_114517;
        int64_t gtid_117592 = iter_125150;
        int64_t remnant_125234 = iter_125150 - gtid_117592;
        float defunc_2_reduce_res_115055;
        float redout_125152 = 0.0F;
        
        for (int64_t i_125151 = 0; i_125151 < n_p_114520; i_125151++) {
            float x_125153 = ((float *) mem_122306.mem)[gtid_117592 *
                                                        C_len_114566 +
                                                        i_125151];
            float defunc_1_op_res_125154 = x_125153 + redout_125152;
            float redout_tmp_125235 = defunc_1_op_res_125154;
            
            redout_125152 = redout_tmp_125235;
        }
        defunc_2_reduce_res_115055 = redout_125152;
        
        float discard_121353;
        float scanacc_125156 = 0.0F;
        
        for (int64_t i_125155 = 0; i_125155 < lifted_single_ma_arg_114938;
             i_125155++) {
            bool cond_125158 = i_125155 == (int64_t) 0;
            float defunc_0_f_res_125159;
            
            if (cond_125158) {
                float defunc_0_f_res_t_res_125160 = defunc_2_reduce_res_115055 /
                      i64_res_114560;
                
                defunc_0_f_res_125159 = defunc_0_f_res_t_res_125160;
            } else {
                int64_t x_125161 = add64(n_p_114520, i_125155);
                int64_t i_125162 = sub64(x_125161, (int64_t) 1);
                bool x_125163 = sle64((int64_t) 0, i_125162);
                bool y_125164 = slt64(i_125162, C_len_114566);
                bool bounds_check_125165 = x_125163 && y_125164;
                bool index_certs_125166;
                
                if (!bounds_check_125165) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125162,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125167 = ((float *) mem_122306.mem)[gtid_117592 *
                                                            C_len_114566 +
                                                            i_125162];
                int64_t i_125168 = sub64(i_125155, (int64_t) 1);
                bool x_125169 = sle64((int64_t) 0, i_125168);
                bool y_125170 = slt64(i_125168, C_len_114566);
                bool bounds_check_125171 = x_125169 && y_125170;
                bool index_certs_125172;
                
                if (!bounds_check_125171) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125168,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125173 = ((float *) mem_122306.mem)[gtid_117592 *
                                                            C_len_114566 +
                                                            i_125168];
                float x_125174 = x_125167 - y_125173;
                float defunc_0_f_res_f_res_125175 = x_125174 / i64_res_114560;
                
                defunc_0_f_res_125159 = defunc_0_f_res_f_res_125175;
            }
            
            float defunc_1_op_res_125176 = defunc_0_f_res_125159 +
                  scanacc_125156;
            
            ((float *) mem_122318)[i_125155] = defunc_1_op_res_125176;
            
            float scanacc_tmp_125236 = defunc_1_op_res_125176;
            
            scanacc_125156 = scanacc_tmp_125236;
        }
        discard_121353 = scanacc_125156;
        
        float defunc_2_reduce_res_115084;
        float redout_125179 = 0.0F;
        
        for (int64_t i_125178 = 0; i_125178 < n_p_114520; i_125178++) {
            float x_125180 = ((float *) mem_122318)[i_125178];
            float defunc_1_op_res_125181 = x_125180 + redout_125179;
            float redout_tmp_125238 = defunc_1_op_res_125181;
            
            redout_125179 = redout_tmp_125238;
        }
        defunc_2_reduce_res_115084 = redout_125179;
        
        float discard_121361;
        float scanacc_125183 = 0.0F;
        
        for (int64_t i_125182 = 0; i_125182 < lifted_single_ma_arg_114955;
             i_125182++) {
            bool cond_125185 = i_125182 == (int64_t) 0;
            float defunc_0_f_res_125186;
            
            if (cond_125185) {
                float defunc_0_f_res_t_res_125187 = defunc_2_reduce_res_115084 /
                      i64_res_114560;
                
                defunc_0_f_res_125186 = defunc_0_f_res_t_res_125187;
            } else {
                int64_t x_125188 = add64(n_p_114520, i_125182);
                int64_t i_125189 = sub64(x_125188, (int64_t) 1);
                bool x_125190 = sle64((int64_t) 0, i_125189);
                bool y_125191 = slt64(i_125189, lifted_single_ma_arg_114938);
                bool bounds_check_125192 = x_125190 && y_125191;
                bool index_certs_125193;
                
                if (!bounds_check_125192) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125189,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125194 = ((float *) mem_122318)[i_125189];
                int64_t i_125195 = sub64(i_125182, (int64_t) 1);
                bool x_125196 = sle64((int64_t) 0, i_125195);
                bool y_125197 = slt64(i_125195, lifted_single_ma_arg_114938);
                bool bounds_check_125198 = x_125196 && y_125197;
                bool index_certs_125199;
                
                if (!bounds_check_125198) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125195,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125200 = ((float *) mem_122318)[i_125195];
                float x_125201 = x_125194 - y_125200;
                float defunc_0_f_res_f_res_125202 = x_125201 / i64_res_114560;
                
                defunc_0_f_res_125186 = defunc_0_f_res_f_res_125202;
            }
            
            float defunc_1_op_res_125203 = defunc_0_f_res_125186 +
                  scanacc_125183;
            
            ((float *) mem_122333)[i_125182] = defunc_1_op_res_125203;
            
            float scanacc_tmp_125239 = defunc_1_op_res_125203;
            
            scanacc_125183 = scanacc_tmp_125239;
        }
        discard_121361 = scanacc_125183;
        
        float defunc_2_reduce_res_115113;
        float redout_125206 = 0.0F;
        
        for (int32_t i_125205 = 0; i_125205 < 3; i_125205++) {
            int64_t i_125207 = sext_i32_i64(i_125205);
            float x_125208 = ((float *) mem_122333)[i_125207];
            float defunc_1_op_res_125209 = x_125208 + redout_125206;
            float redout_tmp_125241 = defunc_1_op_res_125209;
            
            redout_125206 = redout_tmp_125241;
        }
        defunc_2_reduce_res_115113 = redout_125206;
        
        float discard_121369;
        float scanacc_125211 = 0.0F;
        
        for (int64_t i_125210 = 0; i_125210 < n_114518; i_125210++) {
            bool cond_125213 = i_125210 == (int64_t) 0;
            float defunc_0_f_res_125214;
            
            if (cond_125213) {
                float defunc_0_f_res_t_res_125215 = defunc_2_reduce_res_115113 /
                      3.0F;
                
                defunc_0_f_res_125214 = defunc_0_f_res_t_res_125215;
            } else {
                int64_t x_125216 = add64((int64_t) 3, i_125210);
                int64_t i_125217 = sub64(x_125216, (int64_t) 1);
                bool x_125218 = sle64((int64_t) 0, i_125217);
                bool y_125219 = slt64(i_125217, lifted_single_ma_arg_114955);
                bool bounds_check_125220 = x_125218 && y_125219;
                bool index_certs_125221;
                
                if (!bounds_check_125220) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125217,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125222 = ((float *) mem_122333)[i_125217];
                int64_t i_125223 = sub64(i_125210, (int64_t) 1);
                bool x_125224 = sle64((int64_t) 0, i_125223);
                bool y_125225 = slt64(i_125223, lifted_single_ma_arg_114955);
                bool bounds_check_125226 = x_125224 && y_125225;
                bool index_certs_125227;
                
                if (!bounds_check_125226) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125223,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125228 = ((float *) mem_122333)[i_125223];
                float x_125229 = x_125222 - y_125228;
                float defunc_0_f_res_f_res_125230 = x_125229 / 3.0F;
                
                defunc_0_f_res_125214 = defunc_0_f_res_f_res_125230;
            }
            
            float defunc_1_op_res_125231 = defunc_0_f_res_125214 +
                  scanacc_125211;
            
            ((float *) mem_122348)[i_125210] = defunc_1_op_res_125231;
            
            float scanacc_tmp_125242 = defunc_1_op_res_125231;
            
            scanacc_125211 = scanacc_tmp_125242;
        }
        discard_121369 = scanacc_125211;
        memmove(mem_122364.mem + gtid_117592 * n_114518 * (int64_t) 4,
                mem_122348 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122318);
    free(mem_122333);
    free(mem_122348);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131269_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131269_end -
                 futhark_mc_segmap_parloop_131269_start;
        
        ctx->futhark_mc_segmap_parloop_131269_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131269_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131269_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131267(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117591 = tid;
    int num_tasks_125149 = info.nsubtasks;
    struct futhark_mc_task_131266 *futhark_mc_task_131266 =
                                  (struct futhark_mc_task_131266 *) args;
    struct futhark_context *ctx = futhark_mc_task_131266->ctx;
    uint64_t futhark_mc_segmap_task_131267_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131267_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131266->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131266->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131266->free_n_p_114520;
    float i64_res_114560 = futhark_mc_task_131266->free_i64_res_114560;
    int64_t C_len_114566 = futhark_mc_task_131266->free_C_len_114566;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_task_131266->free_lifted_single_ma_arg_114938;
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_task_131266->free_lifted_single_ma_arg_114955;
    int64_t bytes_121961 = futhark_mc_task_131266->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131266->free_mem_122306,
                                  .size =0, .references =NULL};
    int64_t bytes_122307 = futhark_mc_task_131266->free_bytes_122307;
    int64_t bytes_122310 = futhark_mc_task_131266->free_bytes_122310;
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_task_131266->free_mem_122364,
                                  .size =0, .references =NULL};
    int64_t iter_125150;
    struct futhark_mc_segmap_parloop_struct_131268
    futhark_mc_segmap_parloop_struct_131268;
    
    futhark_mc_segmap_parloop_struct_131268.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131268.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131268.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131268.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131268.free_i64_res_114560 =
        i64_res_114560;
    futhark_mc_segmap_parloop_struct_131268.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131268.free_lifted_single_ma_arg_114938 =
        lifted_single_ma_arg_114938;
    futhark_mc_segmap_parloop_struct_131268.free_lifted_single_ma_arg_114955 =
        lifted_single_ma_arg_114955;
    futhark_mc_segmap_parloop_struct_131268.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131268.free_mem_122306 = mem_122306.mem;
    futhark_mc_segmap_parloop_struct_131268.free_bytes_122307 = bytes_122307;
    futhark_mc_segmap_parloop_struct_131268.free_bytes_122310 = bytes_122310;
    futhark_mc_segmap_parloop_struct_131268.free_mem_122364 = mem_122364.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131269_task;
    
    futhark_mc_segmap_parloop_131269_task.name =
        "futhark_mc_segmap_parloop_131269";
    futhark_mc_segmap_parloop_131269_task.fn = futhark_mc_segmap_parloop_131269;
    futhark_mc_segmap_parloop_131269_task.args =
        &futhark_mc_segmap_parloop_struct_131268;
    futhark_mc_segmap_parloop_131269_task.iterations = iterations;
    futhark_mc_segmap_parloop_131269_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131269_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131269_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131269_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131269_task);
    
    if (futhark_mc_segmap_parloop_131269_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131269_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131269_total_end -
                 futhark_mc_segmap_parloop_131269_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131269_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131269_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131269_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131267_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131267_end -
                 futhark_mc_segmap_task_131267_start;
        
        ctx->futhark_mc_segmap_task_131267_runs[tid]++;
        ctx->futhark_mc_segmap_task_131267_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131267_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131274 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_C_len_114566;
    int64_t free_lifted_single_ma_arg_114938;
    int64_t free_lifted_single_ma_arg_114955;
    int64_t free_bytes_121961;
    char *free_mem_122306;
    int64_t free_bytes_122307;
    int64_t free_bytes_122310;
    char *free_mem_122364;
};
struct futhark_mc_task_131279 {
    struct futhark_context *ctx;
    int64_t free_C_len_114566;
    int64_t free_gtid_117594;
    char *free_mem_122306;
    float *retval_defunc_2_reduce_res_117609;
};
struct futhark_mc_segred_stage_1_parloop_struct_131282 {
    struct futhark_context *ctx;
    int64_t free_C_len_114566;
    int64_t free_gtid_117594;
    char *free_mem_122306;
    char *free_reduce_stage_1_tid_res_arr_mem_125323;
};
static int futhark_mc_segred_stage_1_parloop_131283(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117595,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131282
    *futhark_mc_segred_stage_1_parloop_struct_131282 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131282 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131282->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131283_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131283_start = get_wall_time();
    
    int64_t C_len_114566 =
            futhark_mc_segred_stage_1_parloop_struct_131282->free_C_len_114566;
    int64_t gtid_117594 =
            futhark_mc_segred_stage_1_parloop_struct_131282->free_gtid_117594;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131282->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125323 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125323",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131282->free_reduce_stage_1_tid_res_arr_mem_125323,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125325 = start;
    float x_125245;
    float x_125246;
    float local_acc_125326 = 0.0F;
    
    for (; iter_125325 < end; iter_125325++) {
        int64_t gtid_117596 = iter_125325;
        float x_125248 = ((float *) mem_122306.mem)[gtid_117594 * C_len_114566 +
                                                    gtid_117596];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125245 = local_acc_125326;
        }
        // Load next params
        {
            x_125246 = x_125248;
        }
        // Red body
        {
            float defunc_1_op_res_125247 = x_125245 + x_125246;
            
            local_acc_125326 = defunc_1_op_res_125247;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125323.mem)[flat_tid_117595] =
        local_acc_125326;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131283_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131283_end -
                 futhark_mc_segred_stage_1_parloop_131283_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131283_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131283_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131283_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131280(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117595 = tid;
    int num_tasks_125322 = info.nsubtasks;
    struct futhark_mc_task_131279 *futhark_mc_task_131279 =
                                  (struct futhark_mc_task_131279 *) args;
    struct futhark_context *ctx = futhark_mc_task_131279->ctx;
    uint64_t futhark_mc_segred_task_131280_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131280_start = get_wall_time();
    
    int64_t C_len_114566 = futhark_mc_task_131279->free_C_len_114566;
    int64_t gtid_117594 = futhark_mc_task_131279->free_gtid_117594;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131279->free_mem_122306,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_117609 =
          *futhark_mc_task_131279->retval_defunc_2_reduce_res_117609;
    size_t reduce_stage_1_tid_res_arr_mem_125323_cached_sizze_131281 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125323 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125323_cached_sizze_131281 <
        (size_t) ((int64_t) 4 * num_tasks_125322)) {
        reduce_stage_1_tid_res_arr_mem_125323 =
            realloc(reduce_stage_1_tid_res_arr_mem_125323, (int64_t) 4 *
                    num_tasks_125322);
        reduce_stage_1_tid_res_arr_mem_125323_cached_sizze_131281 =
            (int64_t) 4 * num_tasks_125322;
    }
    
    int64_t iter_125325;
    struct futhark_mc_segred_stage_1_parloop_struct_131282
    futhark_mc_segred_stage_1_parloop_struct_131282;
    
    futhark_mc_segred_stage_1_parloop_struct_131282.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131282.free_C_len_114566 =
        C_len_114566;
    futhark_mc_segred_stage_1_parloop_struct_131282.free_gtid_117594 =
        gtid_117594;
    futhark_mc_segred_stage_1_parloop_struct_131282.free_mem_122306 =
        mem_122306.mem;
    futhark_mc_segred_stage_1_parloop_struct_131282.free_reduce_stage_1_tid_res_arr_mem_125323 =
        reduce_stage_1_tid_res_arr_mem_125323;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131283_task;
    
    futhark_mc_segred_stage_1_parloop_131283_task.name =
        "futhark_mc_segred_stage_1_parloop_131283";
    futhark_mc_segred_stage_1_parloop_131283_task.fn =
        futhark_mc_segred_stage_1_parloop_131283;
    futhark_mc_segred_stage_1_parloop_131283_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131282;
    futhark_mc_segred_stage_1_parloop_131283_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131283_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131283_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131283_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131283_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131283_task);
    
    if (futhark_mc_segred_stage_1_parloop_131283_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131283_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131283_total_end -
                 futhark_mc_segred_stage_1_parloop_131283_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131283_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131283_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131283_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_117609 = 0.0F;
    }
    
    float x_125327;
    float x_125328;
    
    for (int32_t i_125330 = 0; i_125330 < num_tasks_125322; i_125330++) {
        flat_tid_117595 = i_125330;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125327 = defunc_2_reduce_res_117609;
            }
            // load next params
            {
                x_125328 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125323)[flat_tid_117595];
            }
            // red body
            {
                float defunc_1_op_res_125329 = x_125327 + x_125328;
                
                defunc_2_reduce_res_117609 = defunc_1_op_res_125329;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125323);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131280_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131280_end -
                 futhark_mc_segred_task_131280_start;
        
        ctx->futhark_mc_segred_task_131280_runs[tid]++;
        ctx->futhark_mc_segred_task_131280_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131280_iter[tid] += iterations;
    }
    *futhark_mc_task_131279->retval_defunc_2_reduce_res_117609 =
        defunc_2_reduce_res_117609;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131284 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_C_len_114566;
    int64_t free_lifted_single_ma_arg_114938;
    int64_t free_gtid_117594;
    float free_defunc_2_reduce_res_117609;
    char *free_mem_122306;
    char *free_mem_122309;
};
struct futhark_mc_scan_stage_1_parloop_struct_131287 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_C_len_114566;
    int64_t free_gtid_117594;
    float free_defunc_2_reduce_res_117609;
    char *free_mem_122306;
    char *free_mem_122309;
};
static int futhark_mc_scan_stage_1_parloop_131288(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117597, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131287
    *futhark_mc_scan_stage_1_parloop_struct_131287 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131287 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131287->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131288_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131288_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_scan_stage_1_parloop_struct_131287->free_n_p_114520;
    float i64_res_114560 =
          futhark_mc_scan_stage_1_parloop_struct_131287->free_i64_res_114560;
    int64_t C_len_114566 =
            futhark_mc_scan_stage_1_parloop_struct_131287->free_C_len_114566;
    int64_t gtid_117594 =
            futhark_mc_scan_stage_1_parloop_struct_131287->free_gtid_117594;
    float defunc_2_reduce_res_117609 =
          futhark_mc_scan_stage_1_parloop_struct_131287->free_defunc_2_reduce_res_117609;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131287->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131287->free_mem_122309,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125332 = start;
    float x_125249;
    float x_125250;
    
    x_125249 = 0.0F;
    for (; iter_125332 < end; iter_125332++) {
        int64_t gtid_117598 = iter_125332;
        
        // stage 1 scan body
        {
            bool cond_125252 = gtid_117598 == (int64_t) 0;
            float defunc_0_f_res_125253;
            
            if (cond_125252) {
                float defunc_0_f_res_t_res_125254 = defunc_2_reduce_res_117609 /
                      i64_res_114560;
                
                defunc_0_f_res_125253 = defunc_0_f_res_t_res_125254;
            } else {
                int64_t x_125255 = add64(n_p_114520, gtid_117598);
                int64_t i_125256 = sub64(x_125255, (int64_t) 1);
                bool x_125257 = sle64((int64_t) 0, i_125256);
                bool y_125258 = slt64(i_125256, C_len_114566);
                bool bounds_check_125259 = x_125257 && y_125258;
                bool index_certs_125260;
                
                if (!bounds_check_125259) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125256,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125261 = ((float *) mem_122306.mem)[gtid_117594 *
                                                            C_len_114566 +
                                                            i_125256];
                int64_t i_125262 = sub64(gtid_117598, (int64_t) 1);
                bool x_125263 = sle64((int64_t) 0, i_125262);
                bool y_125264 = slt64(i_125262, C_len_114566);
                bool bounds_check_125265 = x_125263 && y_125264;
                bool index_certs_125266;
                
                if (!bounds_check_125265) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125262,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125267 = ((float *) mem_122306.mem)[gtid_117594 *
                                                            C_len_114566 +
                                                            i_125262];
                float x_125268 = x_125261 - y_125267;
                float defunc_0_f_res_f_res_125269 = x_125268 / i64_res_114560;
                
                defunc_0_f_res_125253 = defunc_0_f_res_f_res_125269;
            }
            // write mapped values results to memory
            { }
            x_125249 = x_125249;
            // Read next values
            {
                x_125250 = defunc_0_f_res_125253;
            }
            
            float defunc_1_op_res_125251 = x_125249 + x_125250;
            
            ((float *) mem_122309.mem)[gtid_117598] = defunc_1_op_res_125251;
            x_125249 = defunc_1_op_res_125251;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131288_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131288_end -
                 futhark_mc_scan_stage_1_parloop_131288_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131288_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131288_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131288_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131289 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_C_len_114566;
    int64_t free_gtid_117594;
    float free_defunc_2_reduce_res_117609;
    char *free_mem_122306;
    char *free_mem_122309;
};
static int futhark_mc_scan_stage_3_parloop_131290(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117597, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131289
    *futhark_mc_scan_stage_3_parloop_struct_131289 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131289 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131289->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131290_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131290_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_scan_stage_3_parloop_struct_131289->free_n_p_114520;
    float i64_res_114560 =
          futhark_mc_scan_stage_3_parloop_struct_131289->free_i64_res_114560;
    int64_t C_len_114566 =
            futhark_mc_scan_stage_3_parloop_struct_131289->free_C_len_114566;
    int64_t gtid_117594 =
            futhark_mc_scan_stage_3_parloop_struct_131289->free_gtid_117594;
    float defunc_2_reduce_res_117609 =
          futhark_mc_scan_stage_3_parloop_struct_131289->free_defunc_2_reduce_res_117609;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131289->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131289->free_mem_122309,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125344 = start;
    float x_125341;
    float x_125342;
    
    if (iter_125344 == (int64_t) 0) {
        x_125341 = 0.0F;
    } else {
        x_125341 = ((float *) mem_122309.mem)[iter_125344 - (int64_t) 1];
    }
    for (; iter_125344 < end; iter_125344++) {
        int64_t gtid_117598 = iter_125344;
        
        // stage 3 scan body
        {
            bool cond_125252 = gtid_117598 == (int64_t) 0;
            float defunc_0_f_res_125253;
            
            if (cond_125252) {
                float defunc_0_f_res_t_res_125254 = defunc_2_reduce_res_117609 /
                      i64_res_114560;
                
                defunc_0_f_res_125253 = defunc_0_f_res_t_res_125254;
            } else {
                int64_t x_125255 = add64(n_p_114520, gtid_117598);
                int64_t i_125256 = sub64(x_125255, (int64_t) 1);
                bool x_125257 = sle64((int64_t) 0, i_125256);
                bool y_125258 = slt64(i_125256, C_len_114566);
                bool bounds_check_125259 = x_125257 && y_125258;
                bool index_certs_125260;
                
                if (!bounds_check_125259) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125256,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125261 = ((float *) mem_122306.mem)[gtid_117594 *
                                                            C_len_114566 +
                                                            i_125256];
                int64_t i_125262 = sub64(gtid_117598, (int64_t) 1);
                bool x_125263 = sle64((int64_t) 0, i_125262);
                bool y_125264 = slt64(i_125262, C_len_114566);
                bool bounds_check_125265 = x_125263 && y_125264;
                bool index_certs_125266;
                
                if (!bounds_check_125265) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125262,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125267 = ((float *) mem_122306.mem)[gtid_117594 *
                                                            C_len_114566 +
                                                            i_125262];
                float x_125268 = x_125261 - y_125267;
                float defunc_0_f_res_f_res_125269 = x_125268 / i64_res_114560;
                
                defunc_0_f_res_125253 = defunc_0_f_res_f_res_125269;
            }
            x_125341 = x_125341;
            x_125342 = defunc_0_f_res_125253;
            
            float defunc_1_op_res_125343 = x_125341 + x_125342;
            
            ((float *) mem_122309.mem)[gtid_117598] = defunc_1_op_res_125343;
            x_125341 = defunc_1_op_res_125343;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131290_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131290_end -
                 futhark_mc_scan_stage_3_parloop_131290_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131290_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131290_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131290_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131285(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117597 = tid;
    int num_tasks_125331 = info.nsubtasks;
    struct futhark_mc_task_131284 *futhark_mc_task_131284 =
                                  (struct futhark_mc_task_131284 *) args;
    struct futhark_context *ctx = futhark_mc_task_131284->ctx;
    uint64_t futhark_mc_segscan_task_131285_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131285_start = get_wall_time();
    
    int64_t n_p_114520 = futhark_mc_task_131284->free_n_p_114520;
    float i64_res_114560 = futhark_mc_task_131284->free_i64_res_114560;
    int64_t C_len_114566 = futhark_mc_task_131284->free_C_len_114566;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_task_131284->free_lifted_single_ma_arg_114938;
    int64_t gtid_117594 = futhark_mc_task_131284->free_gtid_117594;
    float defunc_2_reduce_res_117609 =
          futhark_mc_task_131284->free_defunc_2_reduce_res_117609;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131284->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_task_131284->free_mem_122309,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_125338_cached_sizze_131286 = 0;
    char *scan_stage_2_accum_mem_125338 = NULL;
    int64_t iter_125332;
    struct futhark_mc_scan_stage_1_parloop_struct_131287
    futhark_mc_scan_stage_1_parloop_struct_131287;
    
    futhark_mc_scan_stage_1_parloop_struct_131287.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_n_p_114520 = n_p_114520;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_i64_res_114560 =
        i64_res_114560;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_C_len_114566 =
        C_len_114566;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_gtid_117594 =
        gtid_117594;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_defunc_2_reduce_res_117609 =
        defunc_2_reduce_res_117609;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_mem_122306 =
        mem_122306.mem;
    futhark_mc_scan_stage_1_parloop_struct_131287.free_mem_122309 =
        mem_122309.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131288_task;
    
    futhark_mc_scan_stage_1_parloop_131288_task.name =
        "futhark_mc_scan_stage_1_parloop_131288";
    futhark_mc_scan_stage_1_parloop_131288_task.fn =
        futhark_mc_scan_stage_1_parloop_131288;
    futhark_mc_scan_stage_1_parloop_131288_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131287;
    futhark_mc_scan_stage_1_parloop_131288_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131288_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131288_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131288_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131288_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131288_task);
    
    if (futhark_mc_scan_stage_1_parloop_131288_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131288_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131288_total_end -
                 futhark_mc_scan_stage_1_parloop_131288_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131288_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131288_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131288_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_125331)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_125333;
        float x_125334;
        int64_t offset_125336 = (int64_t) 0;
        int64_t offset_index_125337 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_125338_cached_sizze_131286 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_125338 =
                realloc(scan_stage_2_accum_mem_125338, (int64_t) 4);
            scan_stage_2_accum_mem_125338_cached_sizze_131286 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_125338)[(int64_t) 0] = 0.0F;
        for (int32_t i_125340 = 0; i_125340 < num_tasks_125331 - 1;
             i_125340++) {
            offset_125336 = squot64(lifted_single_ma_arg_114938,
                                    sext_i32_i64(num_tasks_125331));
            if (slt64(sext_i32_i64(i_125340),
                      srem64(lifted_single_ma_arg_114938,
                             sext_i32_i64(num_tasks_125331)))) {
                offset_125336 += (int64_t) 1;
            }
            offset_index_125337 += offset_125336;
            
            int64_t gtid_117598 = offset_index_125337;
            bool cond_125252 = gtid_117598 == (int64_t) 0;
            float defunc_0_f_res_125253;
            
            if (cond_125252) {
                float defunc_0_f_res_t_res_125254 = defunc_2_reduce_res_117609 /
                      i64_res_114560;
                
                defunc_0_f_res_125253 = defunc_0_f_res_t_res_125254;
            } else {
                int64_t x_125255 = add64(n_p_114520, gtid_117598);
                int64_t i_125256 = sub64(x_125255, (int64_t) 1);
                bool x_125257 = sle64((int64_t) 0, i_125256);
                bool y_125258 = slt64(i_125256, C_len_114566);
                bool bounds_check_125259 = x_125257 && y_125258;
                bool index_certs_125260;
                
                if (!bounds_check_125259) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125256,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125261 = ((float *) mem_122306.mem)[gtid_117594 *
                                                            C_len_114566 +
                                                            i_125256];
                int64_t i_125262 = sub64(gtid_117598, (int64_t) 1);
                bool x_125263 = sle64((int64_t) 0, i_125262);
                bool y_125264 = slt64(i_125262, C_len_114566);
                bool bounds_check_125265 = x_125263 && y_125264;
                bool index_certs_125266;
                
                if (!bounds_check_125265) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125262,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114566, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125267 = ((float *) mem_122306.mem)[gtid_117594 *
                                                            C_len_114566 +
                                                            i_125262];
                float x_125268 = x_125261 - y_125267;
                float defunc_0_f_res_f_res_125269 = x_125268 / i64_res_114560;
                
                defunc_0_f_res_125253 = defunc_0_f_res_f_res_125269;
            }
            // Read carry in
            {
                x_125333 =
                    ((float *) scan_stage_2_accum_mem_125338)[(int64_t) 0];
            }
            // Read next values
            {
                x_125334 = ((float *) mem_122309.mem)[offset_index_125337 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_125335 = x_125333 + x_125334;
            
            ((float *) mem_122309.mem)[offset_index_125337 - (int64_t) 1] =
                defunc_1_op_res_125335;
            ((float *) scan_stage_2_accum_mem_125338)[(int64_t) 0] =
                defunc_1_op_res_125335;
        }
        
        int64_t iter_125344 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131289
        futhark_mc_scan_stage_3_parloop_struct_131289;
        
        futhark_mc_scan_stage_3_parloop_struct_131289.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_n_p_114520 =
            n_p_114520;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_i64_res_114560 =
            i64_res_114560;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_C_len_114566 =
            C_len_114566;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_gtid_117594 =
            gtid_117594;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_defunc_2_reduce_res_117609 =
            defunc_2_reduce_res_117609;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_mem_122306 =
            mem_122306.mem;
        futhark_mc_scan_stage_3_parloop_struct_131289.free_mem_122309 =
            mem_122309.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131290_task;
        
        futhark_mc_scan_stage_3_parloop_131290_task.name =
            "futhark_mc_scan_stage_3_parloop_131290";
        futhark_mc_scan_stage_3_parloop_131290_task.fn =
            futhark_mc_scan_stage_3_parloop_131290;
        futhark_mc_scan_stage_3_parloop_131290_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131289;
        futhark_mc_scan_stage_3_parloop_131290_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131290_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131290_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131290_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131290_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131290_task);
        
        if (futhark_mc_scan_stage_3_parloop_131290_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131290_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131290_total_end -
                     futhark_mc_scan_stage_3_parloop_131290_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131290_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131290_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131290_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_125338);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131285_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131285_end -
                 futhark_mc_segscan_task_131285_start;
        
        ctx->futhark_mc_segscan_task_131285_runs[tid]++;
        ctx->futhark_mc_segscan_task_131285_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131285_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131291 {
    struct futhark_context *ctx;
    char *free_mem_122309;
    float *retval_defunc_2_reduce_res_117638;
};
struct futhark_mc_segred_stage_1_parloop_struct_131294 {
    struct futhark_context *ctx;
    char *free_mem_122309;
    char *free_reduce_stage_1_tid_res_arr_mem_125346;
};
static int futhark_mc_segred_stage_1_parloop_131295(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117599,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131294
    *futhark_mc_segred_stage_1_parloop_struct_131294 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131294 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131294->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131295_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131295_start = get_wall_time();
    
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131294->free_mem_122309,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125346 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125346",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131294->free_reduce_stage_1_tid_res_arr_mem_125346,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125348 = start;
    float x_125270;
    float x_125271;
    float local_acc_125349 = 0.0F;
    
    for (; iter_125348 < end; iter_125348++) {
        int64_t gtid_117600 = iter_125348;
        float x_125273 = ((float *) mem_122309.mem)[gtid_117600];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125270 = local_acc_125349;
        }
        // Load next params
        {
            x_125271 = x_125273;
        }
        // Red body
        {
            float defunc_1_op_res_125272 = x_125270 + x_125271;
            
            local_acc_125349 = defunc_1_op_res_125272;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125346.mem)[flat_tid_117599] =
        local_acc_125349;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131295_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131295_end -
                 futhark_mc_segred_stage_1_parloop_131295_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131295_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131295_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131295_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131292(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117599 = tid;
    int num_tasks_125345 = info.nsubtasks;
    struct futhark_mc_task_131291 *futhark_mc_task_131291 =
                                  (struct futhark_mc_task_131291 *) args;
    struct futhark_context *ctx = futhark_mc_task_131291->ctx;
    uint64_t futhark_mc_segred_task_131292_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131292_start = get_wall_time();
    
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_task_131291->free_mem_122309,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_117638 =
          *futhark_mc_task_131291->retval_defunc_2_reduce_res_117638;
    size_t reduce_stage_1_tid_res_arr_mem_125346_cached_sizze_131293 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125346 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125346_cached_sizze_131293 <
        (size_t) ((int64_t) 4 * num_tasks_125345)) {
        reduce_stage_1_tid_res_arr_mem_125346 =
            realloc(reduce_stage_1_tid_res_arr_mem_125346, (int64_t) 4 *
                    num_tasks_125345);
        reduce_stage_1_tid_res_arr_mem_125346_cached_sizze_131293 =
            (int64_t) 4 * num_tasks_125345;
    }
    
    int64_t iter_125348;
    struct futhark_mc_segred_stage_1_parloop_struct_131294
    futhark_mc_segred_stage_1_parloop_struct_131294;
    
    futhark_mc_segred_stage_1_parloop_struct_131294.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131294.free_mem_122309 =
        mem_122309.mem;
    futhark_mc_segred_stage_1_parloop_struct_131294.free_reduce_stage_1_tid_res_arr_mem_125346 =
        reduce_stage_1_tid_res_arr_mem_125346;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131295_task;
    
    futhark_mc_segred_stage_1_parloop_131295_task.name =
        "futhark_mc_segred_stage_1_parloop_131295";
    futhark_mc_segred_stage_1_parloop_131295_task.fn =
        futhark_mc_segred_stage_1_parloop_131295;
    futhark_mc_segred_stage_1_parloop_131295_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131294;
    futhark_mc_segred_stage_1_parloop_131295_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131295_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131295_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131295_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131295_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131295_task);
    
    if (futhark_mc_segred_stage_1_parloop_131295_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131295_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131295_total_end -
                 futhark_mc_segred_stage_1_parloop_131295_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131295_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131295_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131295_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_117638 = 0.0F;
    }
    
    float x_125350;
    float x_125351;
    
    for (int32_t i_125353 = 0; i_125353 < num_tasks_125345; i_125353++) {
        flat_tid_117599 = i_125353;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125350 = defunc_2_reduce_res_117638;
            }
            // load next params
            {
                x_125351 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125346)[flat_tid_117599];
            }
            // red body
            {
                float defunc_1_op_res_125352 = x_125350 + x_125351;
                
                defunc_2_reduce_res_117638 = defunc_1_op_res_125352;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125346);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131292_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131292_end -
                 futhark_mc_segred_task_131292_start;
        
        ctx->futhark_mc_segred_task_131292_runs[tid]++;
        ctx->futhark_mc_segred_task_131292_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131292_iter[tid] += iterations;
    }
    *futhark_mc_task_131291->retval_defunc_2_reduce_res_117638 =
        defunc_2_reduce_res_117638;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131296 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_lifted_single_ma_arg_114938;
    int64_t free_lifted_single_ma_arg_114955;
    float free_defunc_2_reduce_res_117638;
    char *free_mem_122309;
    char *free_mem_122312;
};
struct futhark_mc_scan_stage_1_parloop_struct_131299 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_lifted_single_ma_arg_114938;
    float free_defunc_2_reduce_res_117638;
    char *free_mem_122309;
    char *free_mem_122312;
};
static int futhark_mc_scan_stage_1_parloop_131300(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117601, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131299
    *futhark_mc_scan_stage_1_parloop_struct_131299 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131299 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131299->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131300_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131300_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_scan_stage_1_parloop_struct_131299->free_n_p_114520;
    float i64_res_114560 =
          futhark_mc_scan_stage_1_parloop_struct_131299->free_i64_res_114560;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_scan_stage_1_parloop_struct_131299->free_lifted_single_ma_arg_114938;
    float defunc_2_reduce_res_117638 =
          futhark_mc_scan_stage_1_parloop_struct_131299->free_defunc_2_reduce_res_117638;
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131299->free_mem_122309,
                                  .size =0, .references =NULL};
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131299->free_mem_122312,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125355 = start;
    float x_125274;
    float x_125275;
    
    x_125274 = 0.0F;
    for (; iter_125355 < end; iter_125355++) {
        int64_t gtid_117602 = iter_125355;
        
        // stage 1 scan body
        {
            bool cond_125277 = gtid_117602 == (int64_t) 0;
            float defunc_0_f_res_125278;
            
            if (cond_125277) {
                float defunc_0_f_res_t_res_125279 = defunc_2_reduce_res_117638 /
                      i64_res_114560;
                
                defunc_0_f_res_125278 = defunc_0_f_res_t_res_125279;
            } else {
                int64_t x_125280 = add64(n_p_114520, gtid_117602);
                int64_t i_125281 = sub64(x_125280, (int64_t) 1);
                bool x_125282 = sle64((int64_t) 0, i_125281);
                bool y_125283 = slt64(i_125281, lifted_single_ma_arg_114938);
                bool bounds_check_125284 = x_125282 && y_125283;
                bool index_certs_125285;
                
                if (!bounds_check_125284) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125281,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125286 = ((float *) mem_122309.mem)[i_125281];
                int64_t i_125287 = sub64(gtid_117602, (int64_t) 1);
                bool x_125288 = sle64((int64_t) 0, i_125287);
                bool y_125289 = slt64(i_125287, lifted_single_ma_arg_114938);
                bool bounds_check_125290 = x_125288 && y_125289;
                bool index_certs_125291;
                
                if (!bounds_check_125290) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125287,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125292 = ((float *) mem_122309.mem)[i_125287];
                float x_125293 = x_125286 - y_125292;
                float defunc_0_f_res_f_res_125294 = x_125293 / i64_res_114560;
                
                defunc_0_f_res_125278 = defunc_0_f_res_f_res_125294;
            }
            // write mapped values results to memory
            { }
            x_125274 = x_125274;
            // Read next values
            {
                x_125275 = defunc_0_f_res_125278;
            }
            
            float defunc_1_op_res_125276 = x_125274 + x_125275;
            
            ((float *) mem_122312.mem)[gtid_117602] = defunc_1_op_res_125276;
            x_125274 = defunc_1_op_res_125276;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131300_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131300_end -
                 futhark_mc_scan_stage_1_parloop_131300_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131300_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131300_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131300_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131301 {
    struct futhark_context *ctx;
    int64_t free_n_p_114520;
    float free_i64_res_114560;
    int64_t free_lifted_single_ma_arg_114938;
    float free_defunc_2_reduce_res_117638;
    char *free_mem_122309;
    char *free_mem_122312;
};
static int futhark_mc_scan_stage_3_parloop_131302(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117601, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131301
    *futhark_mc_scan_stage_3_parloop_struct_131301 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131301 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131301->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131302_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131302_start = get_wall_time();
    
    int64_t n_p_114520 =
            futhark_mc_scan_stage_3_parloop_struct_131301->free_n_p_114520;
    float i64_res_114560 =
          futhark_mc_scan_stage_3_parloop_struct_131301->free_i64_res_114560;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_scan_stage_3_parloop_struct_131301->free_lifted_single_ma_arg_114938;
    float defunc_2_reduce_res_117638 =
          futhark_mc_scan_stage_3_parloop_struct_131301->free_defunc_2_reduce_res_117638;
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131301->free_mem_122309,
                                  .size =0, .references =NULL};
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131301->free_mem_122312,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125367 = start;
    float x_125364;
    float x_125365;
    
    if (iter_125367 == (int64_t) 0) {
        x_125364 = 0.0F;
    } else {
        x_125364 = ((float *) mem_122312.mem)[iter_125367 - (int64_t) 1];
    }
    for (; iter_125367 < end; iter_125367++) {
        int64_t gtid_117602 = iter_125367;
        
        // stage 3 scan body
        {
            bool cond_125277 = gtid_117602 == (int64_t) 0;
            float defunc_0_f_res_125278;
            
            if (cond_125277) {
                float defunc_0_f_res_t_res_125279 = defunc_2_reduce_res_117638 /
                      i64_res_114560;
                
                defunc_0_f_res_125278 = defunc_0_f_res_t_res_125279;
            } else {
                int64_t x_125280 = add64(n_p_114520, gtid_117602);
                int64_t i_125281 = sub64(x_125280, (int64_t) 1);
                bool x_125282 = sle64((int64_t) 0, i_125281);
                bool y_125283 = slt64(i_125281, lifted_single_ma_arg_114938);
                bool bounds_check_125284 = x_125282 && y_125283;
                bool index_certs_125285;
                
                if (!bounds_check_125284) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125281,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125286 = ((float *) mem_122309.mem)[i_125281];
                int64_t i_125287 = sub64(gtid_117602, (int64_t) 1);
                bool x_125288 = sle64((int64_t) 0, i_125287);
                bool y_125289 = slt64(i_125287, lifted_single_ma_arg_114938);
                bool bounds_check_125290 = x_125288 && y_125289;
                bool index_certs_125291;
                
                if (!bounds_check_125290) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125287,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125292 = ((float *) mem_122309.mem)[i_125287];
                float x_125293 = x_125286 - y_125292;
                float defunc_0_f_res_f_res_125294 = x_125293 / i64_res_114560;
                
                defunc_0_f_res_125278 = defunc_0_f_res_f_res_125294;
            }
            x_125364 = x_125364;
            x_125365 = defunc_0_f_res_125278;
            
            float defunc_1_op_res_125366 = x_125364 + x_125365;
            
            ((float *) mem_122312.mem)[gtid_117602] = defunc_1_op_res_125366;
            x_125364 = defunc_1_op_res_125366;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131302_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131302_end -
                 futhark_mc_scan_stage_3_parloop_131302_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131302_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131302_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131302_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131297(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117601 = tid;
    int num_tasks_125354 = info.nsubtasks;
    struct futhark_mc_task_131296 *futhark_mc_task_131296 =
                                  (struct futhark_mc_task_131296 *) args;
    struct futhark_context *ctx = futhark_mc_task_131296->ctx;
    uint64_t futhark_mc_segscan_task_131297_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131297_start = get_wall_time();
    
    int64_t n_p_114520 = futhark_mc_task_131296->free_n_p_114520;
    float i64_res_114560 = futhark_mc_task_131296->free_i64_res_114560;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_task_131296->free_lifted_single_ma_arg_114938;
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_task_131296->free_lifted_single_ma_arg_114955;
    float defunc_2_reduce_res_117638 =
          futhark_mc_task_131296->free_defunc_2_reduce_res_117638;
    struct memblock mem_122309 = {.desc ="mem_122309", .mem =
                                  futhark_mc_task_131296->free_mem_122309,
                                  .size =0, .references =NULL};
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_task_131296->free_mem_122312,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_125361_cached_sizze_131298 = 0;
    char *scan_stage_2_accum_mem_125361 = NULL;
    int64_t iter_125355;
    struct futhark_mc_scan_stage_1_parloop_struct_131299
    futhark_mc_scan_stage_1_parloop_struct_131299;
    
    futhark_mc_scan_stage_1_parloop_struct_131299.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131299.free_n_p_114520 = n_p_114520;
    futhark_mc_scan_stage_1_parloop_struct_131299.free_i64_res_114560 =
        i64_res_114560;
    futhark_mc_scan_stage_1_parloop_struct_131299.free_lifted_single_ma_arg_114938 =
        lifted_single_ma_arg_114938;
    futhark_mc_scan_stage_1_parloop_struct_131299.free_defunc_2_reduce_res_117638 =
        defunc_2_reduce_res_117638;
    futhark_mc_scan_stage_1_parloop_struct_131299.free_mem_122309 =
        mem_122309.mem;
    futhark_mc_scan_stage_1_parloop_struct_131299.free_mem_122312 =
        mem_122312.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131300_task;
    
    futhark_mc_scan_stage_1_parloop_131300_task.name =
        "futhark_mc_scan_stage_1_parloop_131300";
    futhark_mc_scan_stage_1_parloop_131300_task.fn =
        futhark_mc_scan_stage_1_parloop_131300;
    futhark_mc_scan_stage_1_parloop_131300_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131299;
    futhark_mc_scan_stage_1_parloop_131300_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131300_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131300_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131300_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131300_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131300_task);
    
    if (futhark_mc_scan_stage_1_parloop_131300_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131300_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131300_total_end -
                 futhark_mc_scan_stage_1_parloop_131300_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131300_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131300_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131300_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_125354)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_125356;
        float x_125357;
        int64_t offset_125359 = (int64_t) 0;
        int64_t offset_index_125360 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_125361_cached_sizze_131298 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_125361 =
                realloc(scan_stage_2_accum_mem_125361, (int64_t) 4);
            scan_stage_2_accum_mem_125361_cached_sizze_131298 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_125361)[(int64_t) 0] = 0.0F;
        for (int32_t i_125363 = 0; i_125363 < num_tasks_125354 - 1;
             i_125363++) {
            offset_125359 = squot64(lifted_single_ma_arg_114955,
                                    sext_i32_i64(num_tasks_125354));
            if (slt64(sext_i32_i64(i_125363),
                      srem64(lifted_single_ma_arg_114955,
                             sext_i32_i64(num_tasks_125354)))) {
                offset_125359 += (int64_t) 1;
            }
            offset_index_125360 += offset_125359;
            
            int64_t gtid_117602 = offset_index_125360;
            bool cond_125277 = gtid_117602 == (int64_t) 0;
            float defunc_0_f_res_125278;
            
            if (cond_125277) {
                float defunc_0_f_res_t_res_125279 = defunc_2_reduce_res_117638 /
                      i64_res_114560;
                
                defunc_0_f_res_125278 = defunc_0_f_res_t_res_125279;
            } else {
                int64_t x_125280 = add64(n_p_114520, gtid_117602);
                int64_t i_125281 = sub64(x_125280, (int64_t) 1);
                bool x_125282 = sle64((int64_t) 0, i_125281);
                bool y_125283 = slt64(i_125281, lifted_single_ma_arg_114938);
                bool bounds_check_125284 = x_125282 && y_125283;
                bool index_certs_125285;
                
                if (!bounds_check_125284) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125281,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125286 = ((float *) mem_122309.mem)[i_125281];
                int64_t i_125287 = sub64(gtid_117602, (int64_t) 1);
                bool x_125288 = sle64((int64_t) 0, i_125287);
                bool y_125289 = slt64(i_125287, lifted_single_ma_arg_114938);
                bool bounds_check_125290 = x_125288 && y_125289;
                bool index_certs_125291;
                
                if (!bounds_check_125290) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125287,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114938, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125292 = ((float *) mem_122309.mem)[i_125287];
                float x_125293 = x_125286 - y_125292;
                float defunc_0_f_res_f_res_125294 = x_125293 / i64_res_114560;
                
                defunc_0_f_res_125278 = defunc_0_f_res_f_res_125294;
            }
            // Read carry in
            {
                x_125356 =
                    ((float *) scan_stage_2_accum_mem_125361)[(int64_t) 0];
            }
            // Read next values
            {
                x_125357 = ((float *) mem_122312.mem)[offset_index_125360 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_125358 = x_125356 + x_125357;
            
            ((float *) mem_122312.mem)[offset_index_125360 - (int64_t) 1] =
                defunc_1_op_res_125358;
            ((float *) scan_stage_2_accum_mem_125361)[(int64_t) 0] =
                defunc_1_op_res_125358;
        }
        
        int64_t iter_125367 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131301
        futhark_mc_scan_stage_3_parloop_struct_131301;
        
        futhark_mc_scan_stage_3_parloop_struct_131301.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131301.free_n_p_114520 =
            n_p_114520;
        futhark_mc_scan_stage_3_parloop_struct_131301.free_i64_res_114560 =
            i64_res_114560;
        futhark_mc_scan_stage_3_parloop_struct_131301.free_lifted_single_ma_arg_114938 =
            lifted_single_ma_arg_114938;
        futhark_mc_scan_stage_3_parloop_struct_131301.free_defunc_2_reduce_res_117638 =
            defunc_2_reduce_res_117638;
        futhark_mc_scan_stage_3_parloop_struct_131301.free_mem_122309 =
            mem_122309.mem;
        futhark_mc_scan_stage_3_parloop_struct_131301.free_mem_122312 =
            mem_122312.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131302_task;
        
        futhark_mc_scan_stage_3_parloop_131302_task.name =
            "futhark_mc_scan_stage_3_parloop_131302";
        futhark_mc_scan_stage_3_parloop_131302_task.fn =
            futhark_mc_scan_stage_3_parloop_131302;
        futhark_mc_scan_stage_3_parloop_131302_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131301;
        futhark_mc_scan_stage_3_parloop_131302_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131302_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131302_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131302_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131302_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131302_task);
        
        if (futhark_mc_scan_stage_3_parloop_131302_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131302_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131302_total_end -
                     futhark_mc_scan_stage_3_parloop_131302_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131302_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131302_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131302_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_125361);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131297_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131297_end -
                 futhark_mc_segscan_task_131297_start;
        
        ctx->futhark_mc_segscan_task_131297_runs[tid]++;
        ctx->futhark_mc_segscan_task_131297_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131297_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131303 {
    struct futhark_context *ctx;
    char *free_mem_122312;
    float *retval_defunc_2_reduce_res_117667;
};
struct futhark_mc_segred_stage_1_parloop_struct_131306 {
    struct futhark_context *ctx;
    char *free_mem_122312;
    char *free_reduce_stage_1_tid_res_arr_mem_125369;
};
static int futhark_mc_segred_stage_1_parloop_131307(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117603,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131306
    *futhark_mc_segred_stage_1_parloop_struct_131306 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131306 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131306->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131307_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131307_start = get_wall_time();
    
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131306->free_mem_122312,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125369 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125369",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131306->free_reduce_stage_1_tid_res_arr_mem_125369,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125371 = start;
    float x_125295;
    float x_125296;
    float local_acc_125372 = 0.0F;
    
    for (; iter_125371 < end; iter_125371++) {
        int64_t gtid_117604 = iter_125371;
        float x_125298 = ((float *) mem_122312.mem)[gtid_117604];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125295 = local_acc_125372;
        }
        // Load next params
        {
            x_125296 = x_125298;
        }
        // Red body
        {
            float defunc_1_op_res_125297 = x_125295 + x_125296;
            
            local_acc_125372 = defunc_1_op_res_125297;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125369.mem)[flat_tid_117603] =
        local_acc_125372;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131307_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131307_end -
                 futhark_mc_segred_stage_1_parloop_131307_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131307_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131307_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131307_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131304(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117603 = tid;
    int num_tasks_125368 = info.nsubtasks;
    struct futhark_mc_task_131303 *futhark_mc_task_131303 =
                                  (struct futhark_mc_task_131303 *) args;
    struct futhark_context *ctx = futhark_mc_task_131303->ctx;
    uint64_t futhark_mc_segred_task_131304_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131304_start = get_wall_time();
    
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_task_131303->free_mem_122312,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_117667 =
          *futhark_mc_task_131303->retval_defunc_2_reduce_res_117667;
    size_t reduce_stage_1_tid_res_arr_mem_125369_cached_sizze_131305 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125369 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125369_cached_sizze_131305 <
        (size_t) ((int64_t) 4 * num_tasks_125368)) {
        reduce_stage_1_tid_res_arr_mem_125369 =
            realloc(reduce_stage_1_tid_res_arr_mem_125369, (int64_t) 4 *
                    num_tasks_125368);
        reduce_stage_1_tid_res_arr_mem_125369_cached_sizze_131305 =
            (int64_t) 4 * num_tasks_125368;
    }
    
    int64_t iter_125371;
    struct futhark_mc_segred_stage_1_parloop_struct_131306
    futhark_mc_segred_stage_1_parloop_struct_131306;
    
    futhark_mc_segred_stage_1_parloop_struct_131306.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131306.free_mem_122312 =
        mem_122312.mem;
    futhark_mc_segred_stage_1_parloop_struct_131306.free_reduce_stage_1_tid_res_arr_mem_125369 =
        reduce_stage_1_tid_res_arr_mem_125369;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131307_task;
    
    futhark_mc_segred_stage_1_parloop_131307_task.name =
        "futhark_mc_segred_stage_1_parloop_131307";
    futhark_mc_segred_stage_1_parloop_131307_task.fn =
        futhark_mc_segred_stage_1_parloop_131307;
    futhark_mc_segred_stage_1_parloop_131307_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131306;
    futhark_mc_segred_stage_1_parloop_131307_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131307_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131307_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131307_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131307_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131307_task);
    
    if (futhark_mc_segred_stage_1_parloop_131307_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131307_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131307_total_end -
                 futhark_mc_segred_stage_1_parloop_131307_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131307_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131307_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131307_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_117667 = 0.0F;
    }
    
    float x_125373;
    float x_125374;
    
    for (int32_t i_125376 = 0; i_125376 < num_tasks_125368; i_125376++) {
        flat_tid_117603 = i_125376;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125373 = defunc_2_reduce_res_117667;
            }
            // load next params
            {
                x_125374 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125369)[flat_tid_117603];
            }
            // red body
            {
                float defunc_1_op_res_125375 = x_125373 + x_125374;
                
                defunc_2_reduce_res_117667 = defunc_1_op_res_125375;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125369);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131304_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131304_end -
                 futhark_mc_segred_task_131304_start;
        
        ctx->futhark_mc_segred_task_131304_runs[tid]++;
        ctx->futhark_mc_segred_task_131304_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131304_iter[tid] += iterations;
    }
    *futhark_mc_task_131303->retval_defunc_2_reduce_res_117667 =
        defunc_2_reduce_res_117667;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131308 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_lifted_single_ma_arg_114955;
    float free_defunc_2_reduce_res_117667;
    char *free_mem_122312;
    char *free_mem_122315;
};
struct futhark_mc_scan_stage_1_parloop_struct_131311 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_114955;
    float free_defunc_2_reduce_res_117667;
    char *free_mem_122312;
    char *free_mem_122315;
};
static int futhark_mc_scan_stage_1_parloop_131312(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117605, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131311
    *futhark_mc_scan_stage_1_parloop_struct_131311 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131311 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131311->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131312_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131312_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_scan_stage_1_parloop_struct_131311->free_lifted_single_ma_arg_114955;
    float defunc_2_reduce_res_117667 =
          futhark_mc_scan_stage_1_parloop_struct_131311->free_defunc_2_reduce_res_117667;
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131311->free_mem_122312,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131311->free_mem_122315,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125378 = start;
    float x_125299;
    float x_125300;
    
    x_125299 = 0.0F;
    for (; iter_125378 < end; iter_125378++) {
        int64_t gtid_117606 = iter_125378;
        
        // stage 1 scan body
        {
            bool cond_125302 = gtid_117606 == (int64_t) 0;
            float defunc_0_f_res_125303;
            
            if (cond_125302) {
                float defunc_0_f_res_t_res_125304 = defunc_2_reduce_res_117667 /
                      3.0F;
                
                defunc_0_f_res_125303 = defunc_0_f_res_t_res_125304;
            } else {
                int64_t x_125305 = add64((int64_t) 3, gtid_117606);
                int64_t i_125306 = sub64(x_125305, (int64_t) 1);
                bool x_125307 = sle64((int64_t) 0, i_125306);
                bool y_125308 = slt64(i_125306, lifted_single_ma_arg_114955);
                bool bounds_check_125309 = x_125307 && y_125308;
                bool index_certs_125310;
                
                if (!bounds_check_125309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125306,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125311 = ((float *) mem_122312.mem)[i_125306];
                int64_t i_125312 = sub64(gtid_117606, (int64_t) 1);
                bool x_125313 = sle64((int64_t) 0, i_125312);
                bool y_125314 = slt64(i_125312, lifted_single_ma_arg_114955);
                bool bounds_check_125315 = x_125313 && y_125314;
                bool index_certs_125316;
                
                if (!bounds_check_125315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125312,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125317 = ((float *) mem_122312.mem)[i_125312];
                float x_125318 = x_125311 - y_125317;
                float defunc_0_f_res_f_res_125319 = x_125318 / 3.0F;
                
                defunc_0_f_res_125303 = defunc_0_f_res_f_res_125319;
            }
            // write mapped values results to memory
            { }
            x_125299 = x_125299;
            // Read next values
            {
                x_125300 = defunc_0_f_res_125303;
            }
            
            float defunc_1_op_res_125301 = x_125299 + x_125300;
            
            ((float *) mem_122315.mem)[gtid_117606] = defunc_1_op_res_125301;
            x_125299 = defunc_1_op_res_125301;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131312_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131312_end -
                 futhark_mc_scan_stage_1_parloop_131312_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131312_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131312_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131312_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131313 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_114955;
    float free_defunc_2_reduce_res_117667;
    char *free_mem_122312;
    char *free_mem_122315;
};
static int futhark_mc_scan_stage_3_parloop_131314(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117605, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131313
    *futhark_mc_scan_stage_3_parloop_struct_131313 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131313 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131313->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131314_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131314_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_scan_stage_3_parloop_struct_131313->free_lifted_single_ma_arg_114955;
    float defunc_2_reduce_res_117667 =
          futhark_mc_scan_stage_3_parloop_struct_131313->free_defunc_2_reduce_res_117667;
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131313->free_mem_122312,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131313->free_mem_122315,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125390 = start;
    float x_125387;
    float x_125388;
    
    if (iter_125390 == (int64_t) 0) {
        x_125387 = 0.0F;
    } else {
        x_125387 = ((float *) mem_122315.mem)[iter_125390 - (int64_t) 1];
    }
    for (; iter_125390 < end; iter_125390++) {
        int64_t gtid_117606 = iter_125390;
        
        // stage 3 scan body
        {
            bool cond_125302 = gtid_117606 == (int64_t) 0;
            float defunc_0_f_res_125303;
            
            if (cond_125302) {
                float defunc_0_f_res_t_res_125304 = defunc_2_reduce_res_117667 /
                      3.0F;
                
                defunc_0_f_res_125303 = defunc_0_f_res_t_res_125304;
            } else {
                int64_t x_125305 = add64((int64_t) 3, gtid_117606);
                int64_t i_125306 = sub64(x_125305, (int64_t) 1);
                bool x_125307 = sle64((int64_t) 0, i_125306);
                bool y_125308 = slt64(i_125306, lifted_single_ma_arg_114955);
                bool bounds_check_125309 = x_125307 && y_125308;
                bool index_certs_125310;
                
                if (!bounds_check_125309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125306,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125311 = ((float *) mem_122312.mem)[i_125306];
                int64_t i_125312 = sub64(gtid_117606, (int64_t) 1);
                bool x_125313 = sle64((int64_t) 0, i_125312);
                bool y_125314 = slt64(i_125312, lifted_single_ma_arg_114955);
                bool bounds_check_125315 = x_125313 && y_125314;
                bool index_certs_125316;
                
                if (!bounds_check_125315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125312,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125317 = ((float *) mem_122312.mem)[i_125312];
                float x_125318 = x_125311 - y_125317;
                float defunc_0_f_res_f_res_125319 = x_125318 / 3.0F;
                
                defunc_0_f_res_125303 = defunc_0_f_res_f_res_125319;
            }
            x_125387 = x_125387;
            x_125388 = defunc_0_f_res_125303;
            
            float defunc_1_op_res_125389 = x_125387 + x_125388;
            
            ((float *) mem_122315.mem)[gtid_117606] = defunc_1_op_res_125389;
            x_125387 = defunc_1_op_res_125389;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131314_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131314_end -
                 futhark_mc_scan_stage_3_parloop_131314_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131314_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131314_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131314_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131309(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117605 = tid;
    int num_tasks_125377 = info.nsubtasks;
    struct futhark_mc_task_131308 *futhark_mc_task_131308 =
                                  (struct futhark_mc_task_131308 *) args;
    struct futhark_context *ctx = futhark_mc_task_131308->ctx;
    uint64_t futhark_mc_segscan_task_131309_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131309_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131308->free_n_114518;
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_task_131308->free_lifted_single_ma_arg_114955;
    float defunc_2_reduce_res_117667 =
          futhark_mc_task_131308->free_defunc_2_reduce_res_117667;
    struct memblock mem_122312 = {.desc ="mem_122312", .mem =
                                  futhark_mc_task_131308->free_mem_122312,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_task_131308->free_mem_122315,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_125384_cached_sizze_131310 = 0;
    char *scan_stage_2_accum_mem_125384 = NULL;
    int64_t iter_125378;
    struct futhark_mc_scan_stage_1_parloop_struct_131311
    futhark_mc_scan_stage_1_parloop_struct_131311;
    
    futhark_mc_scan_stage_1_parloop_struct_131311.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131311.free_lifted_single_ma_arg_114955 =
        lifted_single_ma_arg_114955;
    futhark_mc_scan_stage_1_parloop_struct_131311.free_defunc_2_reduce_res_117667 =
        defunc_2_reduce_res_117667;
    futhark_mc_scan_stage_1_parloop_struct_131311.free_mem_122312 =
        mem_122312.mem;
    futhark_mc_scan_stage_1_parloop_struct_131311.free_mem_122315 =
        mem_122315.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131312_task;
    
    futhark_mc_scan_stage_1_parloop_131312_task.name =
        "futhark_mc_scan_stage_1_parloop_131312";
    futhark_mc_scan_stage_1_parloop_131312_task.fn =
        futhark_mc_scan_stage_1_parloop_131312;
    futhark_mc_scan_stage_1_parloop_131312_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131311;
    futhark_mc_scan_stage_1_parloop_131312_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131312_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131312_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131312_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131312_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131312_task);
    
    if (futhark_mc_scan_stage_1_parloop_131312_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131312_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131312_total_end -
                 futhark_mc_scan_stage_1_parloop_131312_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131312_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131312_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131312_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_125377)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_125379;
        float x_125380;
        int64_t offset_125382 = (int64_t) 0;
        int64_t offset_index_125383 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_125384_cached_sizze_131310 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_125384 =
                realloc(scan_stage_2_accum_mem_125384, (int64_t) 4);
            scan_stage_2_accum_mem_125384_cached_sizze_131310 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_125384)[(int64_t) 0] = 0.0F;
        for (int32_t i_125386 = 0; i_125386 < num_tasks_125377 - 1;
             i_125386++) {
            offset_125382 = squot64(n_114518, sext_i32_i64(num_tasks_125377));
            if (slt64(sext_i32_i64(i_125386), srem64(n_114518,
                                                     sext_i32_i64(num_tasks_125377)))) {
                offset_125382 += (int64_t) 1;
            }
            offset_index_125383 += offset_125382;
            
            int64_t gtid_117606 = offset_index_125383;
            bool cond_125302 = gtid_117606 == (int64_t) 0;
            float defunc_0_f_res_125303;
            
            if (cond_125302) {
                float defunc_0_f_res_t_res_125304 = defunc_2_reduce_res_117667 /
                      3.0F;
                
                defunc_0_f_res_125303 = defunc_0_f_res_t_res_125304;
            } else {
                int64_t x_125305 = add64((int64_t) 3, gtid_117606);
                int64_t i_125306 = sub64(x_125305, (int64_t) 1);
                bool x_125307 = sle64((int64_t) 0, i_125306);
                bool y_125308 = slt64(i_125306, lifted_single_ma_arg_114955);
                bool bounds_check_125309 = x_125307 && y_125308;
                bool index_certs_125310;
                
                if (!bounds_check_125309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125306,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float x_125311 = ((float *) mem_122312.mem)[i_125306];
                int64_t i_125312 = sub64(gtid_117606, (int64_t) 1);
                bool x_125313 = sle64((int64_t) 0, i_125312);
                bool y_125314 = slt64(i_125312, lifted_single_ma_arg_114955);
                bool bounds_check_125315 = x_125313 && y_125314;
                bool index_certs_125316;
                
                if (!bounds_check_125315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125312,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114955, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:223:30-50\n   #7  stl.fut:222:23-224:31\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float y_125317 = ((float *) mem_122312.mem)[i_125312];
                float x_125318 = x_125311 - y_125317;
                float defunc_0_f_res_f_res_125319 = x_125318 / 3.0F;
                
                defunc_0_f_res_125303 = defunc_0_f_res_f_res_125319;
            }
            // Read carry in
            {
                x_125379 =
                    ((float *) scan_stage_2_accum_mem_125384)[(int64_t) 0];
            }
            // Read next values
            {
                x_125380 = ((float *) mem_122315.mem)[offset_index_125383 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_125381 = x_125379 + x_125380;
            
            ((float *) mem_122315.mem)[offset_index_125383 - (int64_t) 1] =
                defunc_1_op_res_125381;
            ((float *) scan_stage_2_accum_mem_125384)[(int64_t) 0] =
                defunc_1_op_res_125381;
        }
        
        int64_t iter_125390 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131313
        futhark_mc_scan_stage_3_parloop_struct_131313;
        
        futhark_mc_scan_stage_3_parloop_struct_131313.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131313.free_lifted_single_ma_arg_114955 =
            lifted_single_ma_arg_114955;
        futhark_mc_scan_stage_3_parloop_struct_131313.free_defunc_2_reduce_res_117667 =
            defunc_2_reduce_res_117667;
        futhark_mc_scan_stage_3_parloop_struct_131313.free_mem_122312 =
            mem_122312.mem;
        futhark_mc_scan_stage_3_parloop_struct_131313.free_mem_122315 =
            mem_122315.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131314_task;
        
        futhark_mc_scan_stage_3_parloop_131314_task.name =
            "futhark_mc_scan_stage_3_parloop_131314";
        futhark_mc_scan_stage_3_parloop_131314_task.fn =
            futhark_mc_scan_stage_3_parloop_131314;
        futhark_mc_scan_stage_3_parloop_131314_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131313;
        futhark_mc_scan_stage_3_parloop_131314_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131314_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131314_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131314_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131314_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131314_task);
        
        if (futhark_mc_scan_stage_3_parloop_131314_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131314_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131314_total_end -
                     futhark_mc_scan_stage_3_parloop_131314_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131314_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131314_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131314_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_125384);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131309_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131309_end -
                 futhark_mc_segscan_task_131309_start;
        
        ctx->futhark_mc_segscan_task_131309_runs[tid]++;
        ctx->futhark_mc_segscan_task_131309_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131309_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131275(void *args, int64_t start,
                                            int64_t end, int flat_tid_117593,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131274
    *futhark_mc_segmap_parloop_struct_131274 =
    (struct futhark_mc_segmap_parloop_struct_131274 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131274->ctx;
    uint64_t futhark_mc_segmap_parloop_131275_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131275_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131274->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131274->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131274->free_n_p_114520;
    float i64_res_114560 =
          futhark_mc_segmap_parloop_struct_131274->free_i64_res_114560;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131274->free_C_len_114566;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_segmap_parloop_struct_131274->free_lifted_single_ma_arg_114938;
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_segmap_parloop_struct_131274->free_lifted_single_ma_arg_114955;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131274->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131274->free_mem_122306,
                                  .size =0, .references =NULL};
    int64_t bytes_122307 =
            futhark_mc_segmap_parloop_struct_131274->free_bytes_122307;
    int64_t bytes_122310 =
            futhark_mc_segmap_parloop_struct_131274->free_bytes_122310;
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_segmap_parloop_struct_131274->free_mem_122364,
                                  .size =0, .references =NULL};
    size_t mem_122309_cached_sizze_131276 = 0;
    char *mem_122309 = NULL;
    size_t mem_122312_cached_sizze_131277 = 0;
    char *mem_122312 = NULL;
    size_t mem_122315_cached_sizze_131278 = 0;
    char *mem_122315 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125244 = start;
    
    if (mem_122309_cached_sizze_131276 < (size_t) bytes_122307) {
        mem_122309 = realloc(mem_122309, bytes_122307);
        mem_122309_cached_sizze_131276 = bytes_122307;
    }
    if (mem_122312_cached_sizze_131277 < (size_t) bytes_122310) {
        mem_122312 = realloc(mem_122312, bytes_122310);
        mem_122312_cached_sizze_131277 = bytes_122310;
    }
    if (mem_122315_cached_sizze_131278 < (size_t) bytes_121961) {
        mem_122315 = realloc(mem_122315, bytes_121961);
        mem_122315_cached_sizze_131278 = bytes_121961;
    }
    for (; iter_125244 < end; iter_125244++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125320 = m_114517;
        int64_t gtid_117594 = iter_125244;
        int64_t remnant_125321 = iter_125244 - gtid_117594;
        float defunc_2_reduce_res_117609;
        int64_t flat_tid_117595 = (int64_t) 0;
        int32_t num_tasks_125322;
        struct futhark_mc_task_131279 futhark_mc_task_131279;
        
        futhark_mc_task_131279.ctx = ctx;
        futhark_mc_task_131279.free_C_len_114566 = C_len_114566;
        futhark_mc_task_131279.free_gtid_117594 = gtid_117594;
        futhark_mc_task_131279.free_mem_122306 = mem_122306.mem;
        futhark_mc_task_131279.retval_defunc_2_reduce_res_117609 =
            &defunc_2_reduce_res_117609;
        
        struct scheduler_segop futhark_mc_task_131279_task;
        
        futhark_mc_task_131279_task.args = &futhark_mc_task_131279;
        futhark_mc_task_131279_task.top_level_fn =
            futhark_mc_segred_task_131280;
        futhark_mc_task_131279_task.name = "futhark_mc_segred_task_131280";
        futhark_mc_task_131279_task.iterations = n_p_114520;
        futhark_mc_task_131279_task.task_time =
            &ctx->futhark_mc_segred_task_131280_total_time;
        futhark_mc_task_131279_task.task_iter =
            &ctx->futhark_mc_segred_task_131280_total_iter;
        futhark_mc_task_131279_task.sched = STATIC;
        futhark_mc_task_131279_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131280_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131279_task);
        
        if (futhark_mc_segred_task_131280_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117597 = (int64_t) 0;
        int32_t num_tasks_125331;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131284 futhark_mc_task_131284;
        
        futhark_mc_task_131284.ctx = ctx;
        futhark_mc_task_131284.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131284.free_i64_res_114560 = i64_res_114560;
        futhark_mc_task_131284.free_C_len_114566 = C_len_114566;
        futhark_mc_task_131284.free_lifted_single_ma_arg_114938 =
            lifted_single_ma_arg_114938;
        futhark_mc_task_131284.free_gtid_117594 = gtid_117594;
        futhark_mc_task_131284.free_defunc_2_reduce_res_117609 =
            defunc_2_reduce_res_117609;
        futhark_mc_task_131284.free_mem_122306 = mem_122306.mem;
        futhark_mc_task_131284.free_mem_122309 = mem_122309;
        
        struct scheduler_segop futhark_mc_task_131284_task;
        
        futhark_mc_task_131284_task.args = &futhark_mc_task_131284;
        futhark_mc_task_131284_task.top_level_fn =
            futhark_mc_segscan_task_131285;
        futhark_mc_task_131284_task.name = "futhark_mc_segscan_task_131285";
        futhark_mc_task_131284_task.iterations = lifted_single_ma_arg_114938;
        futhark_mc_task_131284_task.task_time =
            &ctx->futhark_mc_segscan_task_131285_total_time;
        futhark_mc_task_131284_task.task_iter =
            &ctx->futhark_mc_segscan_task_131285_total_iter;
        futhark_mc_task_131284_task.sched = STATIC;
        futhark_mc_task_131284_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131285_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131284_task);
        
        if (futhark_mc_segscan_task_131285_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_117638;
        int64_t flat_tid_117599 = (int64_t) 0;
        int32_t num_tasks_125345;
        struct futhark_mc_task_131291 futhark_mc_task_131291;
        
        futhark_mc_task_131291.ctx = ctx;
        futhark_mc_task_131291.free_mem_122309 = mem_122309;
        futhark_mc_task_131291.retval_defunc_2_reduce_res_117638 =
            &defunc_2_reduce_res_117638;
        
        struct scheduler_segop futhark_mc_task_131291_task;
        
        futhark_mc_task_131291_task.args = &futhark_mc_task_131291;
        futhark_mc_task_131291_task.top_level_fn =
            futhark_mc_segred_task_131292;
        futhark_mc_task_131291_task.name = "futhark_mc_segred_task_131292";
        futhark_mc_task_131291_task.iterations = n_p_114520;
        futhark_mc_task_131291_task.task_time =
            &ctx->futhark_mc_segred_task_131292_total_time;
        futhark_mc_task_131291_task.task_iter =
            &ctx->futhark_mc_segred_task_131292_total_iter;
        futhark_mc_task_131291_task.sched = STATIC;
        futhark_mc_task_131291_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131292_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131291_task);
        
        if (futhark_mc_segred_task_131292_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117601 = (int64_t) 0;
        int32_t num_tasks_125354;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131296 futhark_mc_task_131296;
        
        futhark_mc_task_131296.ctx = ctx;
        futhark_mc_task_131296.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131296.free_i64_res_114560 = i64_res_114560;
        futhark_mc_task_131296.free_lifted_single_ma_arg_114938 =
            lifted_single_ma_arg_114938;
        futhark_mc_task_131296.free_lifted_single_ma_arg_114955 =
            lifted_single_ma_arg_114955;
        futhark_mc_task_131296.free_defunc_2_reduce_res_117638 =
            defunc_2_reduce_res_117638;
        futhark_mc_task_131296.free_mem_122309 = mem_122309;
        futhark_mc_task_131296.free_mem_122312 = mem_122312;
        
        struct scheduler_segop futhark_mc_task_131296_task;
        
        futhark_mc_task_131296_task.args = &futhark_mc_task_131296;
        futhark_mc_task_131296_task.top_level_fn =
            futhark_mc_segscan_task_131297;
        futhark_mc_task_131296_task.name = "futhark_mc_segscan_task_131297";
        futhark_mc_task_131296_task.iterations = lifted_single_ma_arg_114955;
        futhark_mc_task_131296_task.task_time =
            &ctx->futhark_mc_segscan_task_131297_total_time;
        futhark_mc_task_131296_task.task_iter =
            &ctx->futhark_mc_segscan_task_131297_total_iter;
        futhark_mc_task_131296_task.sched = STATIC;
        futhark_mc_task_131296_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131297_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131296_task);
        
        if (futhark_mc_segscan_task_131297_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_117667;
        int64_t flat_tid_117603 = (int64_t) 0;
        int32_t num_tasks_125368;
        struct futhark_mc_task_131303 futhark_mc_task_131303;
        
        futhark_mc_task_131303.ctx = ctx;
        futhark_mc_task_131303.free_mem_122312 = mem_122312;
        futhark_mc_task_131303.retval_defunc_2_reduce_res_117667 =
            &defunc_2_reduce_res_117667;
        
        struct scheduler_segop futhark_mc_task_131303_task;
        
        futhark_mc_task_131303_task.args = &futhark_mc_task_131303;
        futhark_mc_task_131303_task.top_level_fn =
            futhark_mc_segred_task_131304;
        futhark_mc_task_131303_task.name = "futhark_mc_segred_task_131304";
        futhark_mc_task_131303_task.iterations = (int64_t) 3;
        futhark_mc_task_131303_task.task_time =
            &ctx->futhark_mc_segred_task_131304_total_time;
        futhark_mc_task_131303_task.task_iter =
            &ctx->futhark_mc_segred_task_131304_total_iter;
        futhark_mc_task_131303_task.sched = STATIC;
        futhark_mc_task_131303_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131304_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131303_task);
        
        if (futhark_mc_segred_task_131304_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117605 = (int64_t) 0;
        int32_t num_tasks_125377;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131308 futhark_mc_task_131308;
        
        futhark_mc_task_131308.ctx = ctx;
        futhark_mc_task_131308.free_n_114518 = n_114518;
        futhark_mc_task_131308.free_lifted_single_ma_arg_114955 =
            lifted_single_ma_arg_114955;
        futhark_mc_task_131308.free_defunc_2_reduce_res_117667 =
            defunc_2_reduce_res_117667;
        futhark_mc_task_131308.free_mem_122312 = mem_122312;
        futhark_mc_task_131308.free_mem_122315 = mem_122315;
        
        struct scheduler_segop futhark_mc_task_131308_task;
        
        futhark_mc_task_131308_task.args = &futhark_mc_task_131308;
        futhark_mc_task_131308_task.top_level_fn =
            futhark_mc_segscan_task_131309;
        futhark_mc_task_131308_task.name = "futhark_mc_segscan_task_131309";
        futhark_mc_task_131308_task.iterations = n_114518;
        futhark_mc_task_131308_task.task_time =
            &ctx->futhark_mc_segscan_task_131309_total_time;
        futhark_mc_task_131308_task.task_iter =
            &ctx->futhark_mc_segscan_task_131309_total_iter;
        futhark_mc_task_131308_task.sched = STATIC;
        futhark_mc_task_131308_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131309_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131308_task);
        
        if (futhark_mc_segscan_task_131309_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122364.mem + gtid_117594 * n_114518 * (int64_t) 4,
                mem_122315 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122309);
    free(mem_122312);
    free(mem_122315);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131275_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131275_end -
                 futhark_mc_segmap_parloop_131275_start;
        
        ctx->futhark_mc_segmap_parloop_131275_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131275_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131275_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131273(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117593 = tid;
    int num_tasks_125149 = info.nsubtasks;
    struct futhark_mc_task_131266 *futhark_mc_task_131266 =
                                  (struct futhark_mc_task_131266 *) args;
    struct futhark_context *ctx = futhark_mc_task_131266->ctx;
    uint64_t futhark_mc_segmap_nested_task_131273_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131273_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131266->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131266->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131266->free_n_p_114520;
    float i64_res_114560 = futhark_mc_task_131266->free_i64_res_114560;
    int64_t C_len_114566 = futhark_mc_task_131266->free_C_len_114566;
    int64_t lifted_single_ma_arg_114938 =
            futhark_mc_task_131266->free_lifted_single_ma_arg_114938;
    int64_t lifted_single_ma_arg_114955 =
            futhark_mc_task_131266->free_lifted_single_ma_arg_114955;
    int64_t bytes_121961 = futhark_mc_task_131266->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131266->free_mem_122306,
                                  .size =0, .references =NULL};
    int64_t bytes_122307 = futhark_mc_task_131266->free_bytes_122307;
    int64_t bytes_122310 = futhark_mc_task_131266->free_bytes_122310;
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_task_131266->free_mem_122364,
                                  .size =0, .references =NULL};
    int64_t iter_125244;
    struct futhark_mc_segmap_parloop_struct_131274
    futhark_mc_segmap_parloop_struct_131274;
    
    futhark_mc_segmap_parloop_struct_131274.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131274.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131274.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131274.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131274.free_i64_res_114560 =
        i64_res_114560;
    futhark_mc_segmap_parloop_struct_131274.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131274.free_lifted_single_ma_arg_114938 =
        lifted_single_ma_arg_114938;
    futhark_mc_segmap_parloop_struct_131274.free_lifted_single_ma_arg_114955 =
        lifted_single_ma_arg_114955;
    futhark_mc_segmap_parloop_struct_131274.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131274.free_mem_122306 = mem_122306.mem;
    futhark_mc_segmap_parloop_struct_131274.free_bytes_122307 = bytes_122307;
    futhark_mc_segmap_parloop_struct_131274.free_bytes_122310 = bytes_122310;
    futhark_mc_segmap_parloop_struct_131274.free_mem_122364 = mem_122364.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131275_task;
    
    futhark_mc_segmap_parloop_131275_task.name =
        "futhark_mc_segmap_parloop_131275";
    futhark_mc_segmap_parloop_131275_task.fn = futhark_mc_segmap_parloop_131275;
    futhark_mc_segmap_parloop_131275_task.args =
        &futhark_mc_segmap_parloop_struct_131274;
    futhark_mc_segmap_parloop_131275_task.iterations = iterations;
    futhark_mc_segmap_parloop_131275_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131275_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131275_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131275_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131275_task);
    
    if (futhark_mc_segmap_parloop_131275_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131275_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131275_total_end -
                 futhark_mc_segmap_parloop_131275_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131275_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131275_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131275_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131273_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131273_end -
                 futhark_mc_segmap_nested_task_131273_start;
        
        ctx->futhark_mc_segmap_nested_task_131273_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131273_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131273_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131315 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_loopz2081Uz2085Uz2089U_115002;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    int64_t free_ctx_param_ext_122213;
    int64_t free_ctx_param_ext_122214;
    int64_t free_ctx_param_ext_122216;
    char *free_mem_param_122218;
    char *free_mem_122364;
    char *free_mem_122404;
    char *free_mem_122408;
};
struct futhark_mc_segmap_parloop_struct_131317 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_loopz2081Uz2085Uz2089U_115002;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    int64_t free_ctx_param_ext_122213;
    int64_t free_ctx_param_ext_122214;
    int64_t free_ctx_param_ext_122216;
    char *free_mem_param_122218;
    char *free_mem_122364;
    char *free_mem_122404;
    char *free_mem_122408;
};
static int futhark_mc_segmap_parloop_131318(void *args, int64_t start,
                                            int64_t end, int flat_tid_117695,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131317
    *futhark_mc_segmap_parloop_struct_131317 =
    (struct futhark_mc_segmap_parloop_struct_131317 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131317->ctx;
    uint64_t futhark_mc_segmap_parloop_131318_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131318_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131317->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131317->free_n_114518;
    int64_t loopz2081Uz2085Uz2089U_115002 =
            futhark_mc_segmap_parloop_struct_131317->free_loopz2081Uz2085Uz2089U_115002;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131317->free_bytes_121961;
    int64_t ctx_param_ext_122213 =
            futhark_mc_segmap_parloop_struct_131317->free_ctx_param_ext_122213;
    int64_t ctx_param_ext_122214 =
            futhark_mc_segmap_parloop_struct_131317->free_ctx_param_ext_122214;
    int64_t ctx_param_ext_122216 =
            futhark_mc_segmap_parloop_struct_131317->free_ctx_param_ext_122216;
    struct memblock mem_param_122218 = {.desc ="mem_param_122218", .mem =
                                        futhark_mc_segmap_parloop_struct_131317->free_mem_param_122218,
                                        .size =0, .references =NULL};
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_122364,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_122408,
                                  .size =0, .references =NULL};
    size_t mem_122373_cached_sizze_131319 = 0;
    char *mem_122373 = NULL;
    size_t mem_122376_cached_sizze_131320 = 0;
    char *mem_122376 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125392 = start;
    
    if (mem_122373_cached_sizze_131319 < (size_t) bytes_121961) {
        mem_122373 = realloc(mem_122373, bytes_121961);
        mem_122373_cached_sizze_131319 = bytes_121961;
    }
    if (mem_122376_cached_sizze_131320 < (size_t) bytes_121961) {
        mem_122376 = realloc(mem_122376, bytes_121961);
        mem_122376_cached_sizze_131320 = bytes_121961;
    }
    for (; iter_125392 < end; iter_125392++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125410 = m_114517;
        int64_t gtid_117696 = iter_125392;
        int64_t remnant_125411 = iter_125392 - gtid_117696;
        
        for (int64_t i_125393 = 0; i_125393 < n_114518; i_125393++) {
            int64_t x_125396 = ((int64_t *) mem_121957.mem)[gtid_117696 *
                                                            n_114518 +
                                                            i_125393];
            bool cond_125397 = sle64((int64_t) 0, x_125396);
            float defunc_0_f_res_125398;
            
            if (cond_125397) {
                bool y_125399 = slt64(x_125396, n_114518);
                bool bounds_check_125400 = cond_125397 && y_125399;
                bool index_certs_125401;
                
                if (!bounds_check_125400) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_125396,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:231:36-58\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:229:13-234:43\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_125402 =
                      ((float *) mem_122364.mem)[gtid_117696 * n_114518 +
                                                 x_125396];
                
                defunc_0_f_res_125398 = defunc_0_f_res_t_res_125402;
            } else {
                defunc_0_f_res_125398 = 0.0F;
            }
            
            float defunc_0_f_res_125403;
            
            if (cond_125397) {
                bool y_125404 = slt64(x_125396, loopz2081Uz2085Uz2089U_115002);
                bool bounds_check_125405 = cond_125397 && y_125404;
                bool index_certs_125406;
                
                if (!bounds_check_125405) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_125396,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2081Uz2085Uz2089U_115002,
                                  "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:232:34-60\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:229:13-234:43\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_125407 =
                      ((float *) mem_param_122218.mem)[ctx_param_ext_122213 +
                                                       (gtid_117696 *
                                                        ctx_param_ext_122214 +
                                                        x_125396 *
                                                        ctx_param_ext_122216)];
                
                defunc_0_f_res_125403 = defunc_0_f_res_t_res_125407;
            } else {
                defunc_0_f_res_125403 = 0.0F;
            }
            ((float *) mem_122373)[i_125393] = defunc_0_f_res_125403;
            ((float *) mem_122376)[i_125393] = defunc_0_f_res_125398;
        }
        memmove(mem_122404.mem + gtid_117696 * n_114518 * (int64_t) 4,
                mem_122376 + (int64_t) 0, n_114518 * (int64_t) 4);
        memmove(mem_122408.mem + gtid_117696 * n_114518 * (int64_t) 4,
                mem_122373 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122373);
    free(mem_122376);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131318_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131318_end -
                 futhark_mc_segmap_parloop_131318_start;
        
        ctx->futhark_mc_segmap_parloop_131318_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131318_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131318_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131316(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117695 = tid;
    int num_tasks_125391 = info.nsubtasks;
    struct futhark_mc_task_131315 *futhark_mc_task_131315 =
                                  (struct futhark_mc_task_131315 *) args;
    struct futhark_context *ctx = futhark_mc_task_131315->ctx;
    uint64_t futhark_mc_segmap_task_131316_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131316_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131315->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131315->free_n_114518;
    int64_t loopz2081Uz2085Uz2089U_115002 =
            futhark_mc_task_131315->free_loopz2081Uz2085Uz2089U_115002;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131315->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131315->free_bytes_121961;
    int64_t ctx_param_ext_122213 =
            futhark_mc_task_131315->free_ctx_param_ext_122213;
    int64_t ctx_param_ext_122214 =
            futhark_mc_task_131315->free_ctx_param_ext_122214;
    int64_t ctx_param_ext_122216 =
            futhark_mc_task_131315->free_ctx_param_ext_122216;
    struct memblock mem_param_122218 = {.desc ="mem_param_122218", .mem =
                                        futhark_mc_task_131315->free_mem_param_122218,
                                        .size =0, .references =NULL};
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_task_131315->free_mem_122364,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131315->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131315->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t iter_125392;
    struct futhark_mc_segmap_parloop_struct_131317
    futhark_mc_segmap_parloop_struct_131317;
    
    futhark_mc_segmap_parloop_struct_131317.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131317.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131317.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131317.free_loopz2081Uz2085Uz2089U_115002 =
        loopz2081Uz2085Uz2089U_115002;
    futhark_mc_segmap_parloop_struct_131317.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131317.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131317.free_ctx_param_ext_122213 =
        ctx_param_ext_122213;
    futhark_mc_segmap_parloop_struct_131317.free_ctx_param_ext_122214 =
        ctx_param_ext_122214;
    futhark_mc_segmap_parloop_struct_131317.free_ctx_param_ext_122216 =
        ctx_param_ext_122216;
    futhark_mc_segmap_parloop_struct_131317.free_mem_param_122218 =
        mem_param_122218.mem;
    futhark_mc_segmap_parloop_struct_131317.free_mem_122364 = mem_122364.mem;
    futhark_mc_segmap_parloop_struct_131317.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131317.free_mem_122408 = mem_122408.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131318_task;
    
    futhark_mc_segmap_parloop_131318_task.name =
        "futhark_mc_segmap_parloop_131318";
    futhark_mc_segmap_parloop_131318_task.fn = futhark_mc_segmap_parloop_131318;
    futhark_mc_segmap_parloop_131318_task.args =
        &futhark_mc_segmap_parloop_struct_131317;
    futhark_mc_segmap_parloop_131318_task.iterations = iterations;
    futhark_mc_segmap_parloop_131318_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131318_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131318_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131318_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131318_task);
    
    if (futhark_mc_segmap_parloop_131318_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131318_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131318_total_end -
                 futhark_mc_segmap_parloop_131318_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131318_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131318_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131318_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131316_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131316_end -
                 futhark_mc_segmap_task_131316_start;
        
        ctx->futhark_mc_segmap_task_131316_runs[tid]++;
        ctx->futhark_mc_segmap_task_131316_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131316_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131322 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_loopz2081Uz2085Uz2089U_115002;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    int64_t free_ctx_param_ext_122213;
    int64_t free_ctx_param_ext_122214;
    int64_t free_ctx_param_ext_122216;
    char *free_mem_param_122218;
    char *free_mem_122364;
    char *free_mem_122404;
    char *free_mem_122408;
};
struct futhark_mc_task_131326 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_loopz2081Uz2085Uz2089U_115002;
    int64_t free_gtid_117698;
    char *free_mem_121957;
    int64_t free_ctx_param_ext_122213;
    int64_t free_ctx_param_ext_122214;
    int64_t free_ctx_param_ext_122216;
    char *free_mem_param_122218;
    char *free_mem_122364;
    char *free_mem_122367;
    char *free_mem_122370;
};
struct futhark_mc_segmap_parloop_struct_131328 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_loopz2081Uz2085Uz2089U_115002;
    int64_t free_gtid_117698;
    char *free_mem_121957;
    int64_t free_ctx_param_ext_122213;
    int64_t free_ctx_param_ext_122214;
    int64_t free_ctx_param_ext_122216;
    char *free_mem_param_122218;
    char *free_mem_122364;
    char *free_mem_122367;
    char *free_mem_122370;
};
static int futhark_mc_segmap_parloop_131329(void *args, int64_t start,
                                            int64_t end, int flat_tid_117699,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131328
    *futhark_mc_segmap_parloop_struct_131328 =
    (struct futhark_mc_segmap_parloop_struct_131328 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131328->ctx;
    uint64_t futhark_mc_segmap_parloop_131329_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131329_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131328->free_n_114518;
    int64_t loopz2081Uz2085Uz2089U_115002 =
            futhark_mc_segmap_parloop_struct_131328->free_loopz2081Uz2085Uz2089U_115002;
    int64_t gtid_117698 =
            futhark_mc_segmap_parloop_struct_131328->free_gtid_117698;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131328->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122213 =
            futhark_mc_segmap_parloop_struct_131328->free_ctx_param_ext_122213;
    int64_t ctx_param_ext_122214 =
            futhark_mc_segmap_parloop_struct_131328->free_ctx_param_ext_122214;
    int64_t ctx_param_ext_122216 =
            futhark_mc_segmap_parloop_struct_131328->free_ctx_param_ext_122216;
    struct memblock mem_param_122218 = {.desc ="mem_param_122218", .mem =
                                        futhark_mc_segmap_parloop_struct_131328->free_mem_param_122218,
                                        .size =0, .references =NULL};
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_segmap_parloop_struct_131328->free_mem_122364,
                                  .size =0, .references =NULL};
    struct memblock mem_122367 = {.desc ="mem_122367", .mem =
                                  futhark_mc_segmap_parloop_struct_131328->free_mem_122367,
                                  .size =0, .references =NULL};
    struct memblock mem_122370 = {.desc ="mem_122370", .mem =
                                  futhark_mc_segmap_parloop_struct_131328->free_mem_122370,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125430 = start;
    
    for (; iter_125430 < end; iter_125430++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125439 = n_114518;
        int64_t gtid_117700 = iter_125430;
        int64_t remnant_125440 = iter_125430 - gtid_117700;
        int64_t x_125415 = ((int64_t *) mem_121957.mem)[gtid_117698 * n_114518 +
                                                        gtid_117700];
        bool cond_125416 = sle64((int64_t) 0, x_125415);
        float defunc_0_f_res_125417;
        
        if (cond_125416) {
            bool y_125431 = slt64(x_125415, n_114518);
            bool bounds_check_125432 = cond_125416 && y_125431;
            bool index_certs_125433;
            
            if (!bounds_check_125432) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_125415,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:231:36-58\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:229:13-234:43\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125434 =
                  ((float *) mem_122364.mem)[gtid_117698 * n_114518 + x_125415];
            
            defunc_0_f_res_125417 = defunc_0_f_res_t_res_125434;
        } else {
            defunc_0_f_res_125417 = 0.0F;
        }
        
        float defunc_0_f_res_125422;
        
        if (cond_125416) {
            bool y_125435 = slt64(x_125415, loopz2081Uz2085Uz2089U_115002);
            bool bounds_check_125436 = cond_125416 && y_125435;
            bool index_certs_125437;
            
            if (!bounds_check_125436) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_125415,
                              "] out of bounds for array of shape [",
                              (long long) loopz2081Uz2085Uz2089U_115002, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:232:34-60\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:229:13-234:43\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125438 =
                  ((float *) mem_param_122218.mem)[ctx_param_ext_122213 +
                                                   (gtid_117698 *
                                                    ctx_param_ext_122214 +
                                                    x_125415 *
                                                    ctx_param_ext_122216)];
            
            defunc_0_f_res_125422 = defunc_0_f_res_t_res_125438;
        } else {
            defunc_0_f_res_125422 = 0.0F;
        }
        ((float *) mem_122367.mem)[gtid_117700] = defunc_0_f_res_125422;
        ((float *) mem_122370.mem)[gtid_117700] = defunc_0_f_res_125417;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131329_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131329_end -
                 futhark_mc_segmap_parloop_131329_start;
        
        ctx->futhark_mc_segmap_parloop_131329_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131329_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131329_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131327(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117699 = tid;
    int num_tasks_125429 = info.nsubtasks;
    struct futhark_mc_task_131326 *futhark_mc_task_131326 =
                                  (struct futhark_mc_task_131326 *) args;
    struct futhark_context *ctx = futhark_mc_task_131326->ctx;
    uint64_t futhark_mc_segmap_task_131327_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131327_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131326->free_n_114518;
    int64_t loopz2081Uz2085Uz2089U_115002 =
            futhark_mc_task_131326->free_loopz2081Uz2085Uz2089U_115002;
    int64_t gtid_117698 = futhark_mc_task_131326->free_gtid_117698;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131326->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122213 =
            futhark_mc_task_131326->free_ctx_param_ext_122213;
    int64_t ctx_param_ext_122214 =
            futhark_mc_task_131326->free_ctx_param_ext_122214;
    int64_t ctx_param_ext_122216 =
            futhark_mc_task_131326->free_ctx_param_ext_122216;
    struct memblock mem_param_122218 = {.desc ="mem_param_122218", .mem =
                                        futhark_mc_task_131326->free_mem_param_122218,
                                        .size =0, .references =NULL};
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_task_131326->free_mem_122364,
                                  .size =0, .references =NULL};
    struct memblock mem_122367 = {.desc ="mem_122367", .mem =
                                  futhark_mc_task_131326->free_mem_122367,
                                  .size =0, .references =NULL};
    struct memblock mem_122370 = {.desc ="mem_122370", .mem =
                                  futhark_mc_task_131326->free_mem_122370,
                                  .size =0, .references =NULL};
    int64_t iter_125430;
    struct futhark_mc_segmap_parloop_struct_131328
    futhark_mc_segmap_parloop_struct_131328;
    
    futhark_mc_segmap_parloop_struct_131328.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131328.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131328.free_loopz2081Uz2085Uz2089U_115002 =
        loopz2081Uz2085Uz2089U_115002;
    futhark_mc_segmap_parloop_struct_131328.free_gtid_117698 = gtid_117698;
    futhark_mc_segmap_parloop_struct_131328.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131328.free_ctx_param_ext_122213 =
        ctx_param_ext_122213;
    futhark_mc_segmap_parloop_struct_131328.free_ctx_param_ext_122214 =
        ctx_param_ext_122214;
    futhark_mc_segmap_parloop_struct_131328.free_ctx_param_ext_122216 =
        ctx_param_ext_122216;
    futhark_mc_segmap_parloop_struct_131328.free_mem_param_122218 =
        mem_param_122218.mem;
    futhark_mc_segmap_parloop_struct_131328.free_mem_122364 = mem_122364.mem;
    futhark_mc_segmap_parloop_struct_131328.free_mem_122367 = mem_122367.mem;
    futhark_mc_segmap_parloop_struct_131328.free_mem_122370 = mem_122370.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131329_task;
    
    futhark_mc_segmap_parloop_131329_task.name =
        "futhark_mc_segmap_parloop_131329";
    futhark_mc_segmap_parloop_131329_task.fn = futhark_mc_segmap_parloop_131329;
    futhark_mc_segmap_parloop_131329_task.args =
        &futhark_mc_segmap_parloop_struct_131328;
    futhark_mc_segmap_parloop_131329_task.iterations = iterations;
    futhark_mc_segmap_parloop_131329_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131329_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131329_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131329_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131329_task);
    
    if (futhark_mc_segmap_parloop_131329_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131329_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131329_total_end -
                 futhark_mc_segmap_parloop_131329_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131329_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131329_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131329_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131327_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131327_end -
                 futhark_mc_segmap_task_131327_start;
        
        ctx->futhark_mc_segmap_task_131327_runs[tid]++;
        ctx->futhark_mc_segmap_task_131327_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131327_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131323(void *args, int64_t start,
                                            int64_t end, int flat_tid_117697,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131322
    *futhark_mc_segmap_parloop_struct_131322 =
    (struct futhark_mc_segmap_parloop_struct_131322 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131322->ctx;
    uint64_t futhark_mc_segmap_parloop_131323_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131323_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131322->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131322->free_n_114518;
    int64_t loopz2081Uz2085Uz2089U_115002 =
            futhark_mc_segmap_parloop_struct_131322->free_loopz2081Uz2085Uz2089U_115002;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131322->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131322->free_bytes_121961;
    int64_t ctx_param_ext_122213 =
            futhark_mc_segmap_parloop_struct_131322->free_ctx_param_ext_122213;
    int64_t ctx_param_ext_122214 =
            futhark_mc_segmap_parloop_struct_131322->free_ctx_param_ext_122214;
    int64_t ctx_param_ext_122216 =
            futhark_mc_segmap_parloop_struct_131322->free_ctx_param_ext_122216;
    struct memblock mem_param_122218 = {.desc ="mem_param_122218", .mem =
                                        futhark_mc_segmap_parloop_struct_131322->free_mem_param_122218,
                                        .size =0, .references =NULL};
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_segmap_parloop_struct_131322->free_mem_122364,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131322->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131322->free_mem_122408,
                                  .size =0, .references =NULL};
    size_t mem_122367_cached_sizze_131324 = 0;
    char *mem_122367 = NULL;
    size_t mem_122370_cached_sizze_131325 = 0;
    char *mem_122370 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125414 = start;
    
    if (mem_122367_cached_sizze_131324 < (size_t) bytes_121961) {
        mem_122367 = realloc(mem_122367, bytes_121961);
        mem_122367_cached_sizze_131324 = bytes_121961;
    }
    if (mem_122370_cached_sizze_131325 < (size_t) bytes_121961) {
        mem_122370 = realloc(mem_122370, bytes_121961);
        mem_122370_cached_sizze_131325 = bytes_121961;
    }
    for (; iter_125414 < end; iter_125414++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125427 = m_114517;
        int64_t gtid_117698 = iter_125414;
        int64_t remnant_125428 = iter_125414 - gtid_117698;
        int64_t flat_tid_117699 = (int64_t) 0;
        int32_t num_tasks_125429;
        struct futhark_mc_task_131326 futhark_mc_task_131326;
        
        futhark_mc_task_131326.ctx = ctx;
        futhark_mc_task_131326.free_n_114518 = n_114518;
        futhark_mc_task_131326.free_loopz2081Uz2085Uz2089U_115002 =
            loopz2081Uz2085Uz2089U_115002;
        futhark_mc_task_131326.free_gtid_117698 = gtid_117698;
        futhark_mc_task_131326.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131326.free_ctx_param_ext_122213 = ctx_param_ext_122213;
        futhark_mc_task_131326.free_ctx_param_ext_122214 = ctx_param_ext_122214;
        futhark_mc_task_131326.free_ctx_param_ext_122216 = ctx_param_ext_122216;
        futhark_mc_task_131326.free_mem_param_122218 = mem_param_122218.mem;
        futhark_mc_task_131326.free_mem_122364 = mem_122364.mem;
        futhark_mc_task_131326.free_mem_122367 = mem_122367;
        futhark_mc_task_131326.free_mem_122370 = mem_122370;
        
        struct scheduler_segop futhark_mc_task_131326_task;
        
        futhark_mc_task_131326_task.args = &futhark_mc_task_131326;
        futhark_mc_task_131326_task.top_level_fn =
            futhark_mc_segmap_task_131327;
        futhark_mc_task_131326_task.name = "futhark_mc_segmap_task_131327";
        futhark_mc_task_131326_task.iterations = n_114518;
        futhark_mc_task_131326_task.task_time =
            &ctx->futhark_mc_segmap_task_131327_total_time;
        futhark_mc_task_131326_task.task_iter =
            &ctx->futhark_mc_segmap_task_131327_total_iter;
        futhark_mc_task_131326_task.sched = STATIC;
        futhark_mc_task_131326_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131327_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131326_task);
        
        if (futhark_mc_segmap_task_131327_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122404.mem + gtid_117698 * n_114518 * (int64_t) 4,
                mem_122370 + (int64_t) 0, n_114518 * (int64_t) 4);
        memmove(mem_122408.mem + gtid_117698 * n_114518 * (int64_t) 4,
                mem_122367 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122367);
    free(mem_122370);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131323_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131323_end -
                 futhark_mc_segmap_parloop_131323_start;
        
        ctx->futhark_mc_segmap_parloop_131323_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131323_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131323_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131321(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117697 = tid;
    int num_tasks_125391 = info.nsubtasks;
    struct futhark_mc_task_131315 *futhark_mc_task_131315 =
                                  (struct futhark_mc_task_131315 *) args;
    struct futhark_context *ctx = futhark_mc_task_131315->ctx;
    uint64_t futhark_mc_segmap_nested_task_131321_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131321_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131315->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131315->free_n_114518;
    int64_t loopz2081Uz2085Uz2089U_115002 =
            futhark_mc_task_131315->free_loopz2081Uz2085Uz2089U_115002;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131315->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131315->free_bytes_121961;
    int64_t ctx_param_ext_122213 =
            futhark_mc_task_131315->free_ctx_param_ext_122213;
    int64_t ctx_param_ext_122214 =
            futhark_mc_task_131315->free_ctx_param_ext_122214;
    int64_t ctx_param_ext_122216 =
            futhark_mc_task_131315->free_ctx_param_ext_122216;
    struct memblock mem_param_122218 = {.desc ="mem_param_122218", .mem =
                                        futhark_mc_task_131315->free_mem_param_122218,
                                        .size =0, .references =NULL};
    struct memblock mem_122364 = {.desc ="mem_122364", .mem =
                                  futhark_mc_task_131315->free_mem_122364,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131315->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131315->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t iter_125414;
    struct futhark_mc_segmap_parloop_struct_131322
    futhark_mc_segmap_parloop_struct_131322;
    
    futhark_mc_segmap_parloop_struct_131322.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131322.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131322.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131322.free_loopz2081Uz2085Uz2089U_115002 =
        loopz2081Uz2085Uz2089U_115002;
    futhark_mc_segmap_parloop_struct_131322.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131322.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131322.free_ctx_param_ext_122213 =
        ctx_param_ext_122213;
    futhark_mc_segmap_parloop_struct_131322.free_ctx_param_ext_122214 =
        ctx_param_ext_122214;
    futhark_mc_segmap_parloop_struct_131322.free_ctx_param_ext_122216 =
        ctx_param_ext_122216;
    futhark_mc_segmap_parloop_struct_131322.free_mem_param_122218 =
        mem_param_122218.mem;
    futhark_mc_segmap_parloop_struct_131322.free_mem_122364 = mem_122364.mem;
    futhark_mc_segmap_parloop_struct_131322.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131322.free_mem_122408 = mem_122408.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131323_task;
    
    futhark_mc_segmap_parloop_131323_task.name =
        "futhark_mc_segmap_parloop_131323";
    futhark_mc_segmap_parloop_131323_task.fn = futhark_mc_segmap_parloop_131323;
    futhark_mc_segmap_parloop_131323_task.args =
        &futhark_mc_segmap_parloop_struct_131322;
    futhark_mc_segmap_parloop_131323_task.iterations = iterations;
    futhark_mc_segmap_parloop_131323_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131323_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131323_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131323_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131323_task);
    
    if (futhark_mc_segmap_parloop_131323_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131323_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131323_total_end -
                 futhark_mc_segmap_parloop_131323_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131323_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131323_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131323_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131321_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131321_end -
                 futhark_mc_segmap_nested_task_131321_start;
        
        ctx->futhark_mc_segmap_nested_task_131321_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131321_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131321_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131330 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122434;
};
struct futhark_mc_segmap_parloop_struct_131332 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122434;
};
static int futhark_mc_segmap_parloop_131333(void *args, int64_t start,
                                            int64_t end, int flat_tid_117718,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131332
    *futhark_mc_segmap_parloop_struct_131332 =
    (struct futhark_mc_segmap_parloop_struct_131332 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131332->ctx;
    uint64_t futhark_mc_segmap_parloop_131333_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131333_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131332->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131332->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131332->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131332->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131332->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131332->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131332->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122434 = {.desc ="mem_122434", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_122434,
                                  .size =0, .references =NULL};
    size_t mem_122418_cached_sizze_131334 = 0;
    char *mem_122418 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125444 = start;
    
    if (mem_122418_cached_sizze_131334 < (size_t) bytes_122033) {
        mem_122418 = realloc(mem_122418, bytes_122033);
        mem_122418_cached_sizze_131334 = bytes_122033;
    }
    for (; iter_125444 < end; iter_125444++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125501 = m_114517;
        int64_t gtid_117719 = iter_125444;
        int64_t remnant_125502 = iter_125444 - gtid_117719;
        int64_t x_115176 = ((int64_t *) mem_121960.mem)[gtid_117719];
        
        for (int64_t i_125445 = 0; i_125445 < l_n_m_114568; i_125445++) {
            int64_t x_125447 = ((int64_t *) mem_122102.mem)[gtid_117719 *
                                                            l_n_m_114568 +
                                                            i_125445];
            float x_125448 = ((float *) mem_122106.mem)[gtid_117719 *
                                                        l_n_m_114568 +
                                                        i_125445];
            int64_t min_arg_125449 = mul64(t_jump_114525, i_125445);
            int64_t min_res_125450 = smin64(i_114594, min_arg_125449);
            float defunc_0_f_res_125451 = sitofp_i64_f32(min_res_125450);
            float defunc_2_reduce_res_125452;
            float redout_125454 = 0.0F;
            
            for (int64_t i_125453 = 0; i_125453 < l_window_114522; i_125453++) {
                bool cond_125455 = sle64(x_115176, i_125453);
                float defunc_0_f_res_125456;
                
                if (cond_125455) {
                    defunc_0_f_res_125456 = 0.0F;
                } else {
                    int64_t i_125457 = add64(x_125447, i_125453);
                    float x_125458 = ((float *) mem_121982.mem)[gtid_117719 *
                                                                n_114518 +
                                                                i_125457];
                    float defunc_0_f_res_f_res_125459 = 1.0F + x_125458;
                    
                    defunc_0_f_res_125456 = defunc_0_f_res_f_res_125459;
                }
                
                float defunc_0_f_res_125460;
                
                if (cond_125455) {
                    defunc_0_f_res_125460 = 0.0F;
                } else {
                    int64_t i_125461 = add64(x_125447, i_125453);
                    float x_125462 = ((float *) mem_122408.mem)[gtid_117719 *
                                                                n_114518 +
                                                                i_125461];
                    
                    defunc_0_f_res_125460 = x_125462;
                }
                
                float x_j_125463 = defunc_0_f_res_125456 -
                      defunc_0_f_res_125451;
                float abs_res_125464 = (float) fabs(x_j_125463);
                float tmp1_125465 = abs_res_125464 / x_125448;
                float x_125466 = tmp1_125465 * tmp1_125465;
                float y_125467 = tmp1_125465 * x_125466;
                float tmp2_125468 = 1.0F - y_125467;
                float x_125469 = tmp2_125468 * tmp2_125468;
                float tmp3_125470 = tmp2_125468 * x_125469;
                float w_j_125471 = defunc_0_f_res_125460 * tmp3_125470;
                float defunc_1_op_res_125472 = w_j_125471 + redout_125454;
                float redout_tmp_125504 = defunc_1_op_res_125472;
                
                redout_125454 = redout_tmp_125504;
            }
            defunc_2_reduce_res_125452 = redout_125454;
            
            float a0_125473 = 1.0F / defunc_2_reduce_res_125452;
            float defunc_2_reduce_res_125474;
            float redout_125476 = 0.0F;
            
            for (int64_t i_125475 = 0; i_125475 < l_window_114522; i_125475++) {
                bool cond_125477 = sle64(x_115176, i_125475);
                float defunc_0_f_res_125478;
                
                if (cond_125477) {
                    defunc_0_f_res_125478 = 0.0F;
                } else {
                    int64_t i_125479 = add64(x_125447, i_125475);
                    float x_125480 = ((float *) mem_121982.mem)[gtid_117719 *
                                                                n_114518 +
                                                                i_125479];
                    float defunc_0_f_res_f_res_125481 = 1.0F + x_125480;
                    
                    defunc_0_f_res_125478 = defunc_0_f_res_f_res_125481;
                }
                
                float defunc_0_f_res_125482;
                
                if (cond_125477) {
                    defunc_0_f_res_125482 = 0.0F;
                } else {
                    int64_t i_125483 = add64(x_125447, i_125475);
                    float x_125484 = ((float *) mem_122408.mem)[gtid_117719 *
                                                                n_114518 +
                                                                i_125483];
                    
                    defunc_0_f_res_125482 = x_125484;
                }
                
                float x_j_125485 = defunc_0_f_res_125478 -
                      defunc_0_f_res_125451;
                float abs_res_125486 = (float) fabs(x_j_125485);
                float tmp1_125487 = abs_res_125486 / x_125448;
                float x_125488 = tmp1_125487 * tmp1_125487;
                float y_125489 = tmp1_125487 * x_125488;
                float tmp2_125490 = 1.0F - y_125489;
                float x_125491 = tmp2_125490 * tmp2_125490;
                float tmp3_125492 = tmp2_125490 * x_125491;
                float tmp4_125493 = defunc_0_f_res_125482 * tmp3_125492;
                float defunc_0_f_res_125494;
                
                if (cond_125477) {
                    defunc_0_f_res_125494 = 0.0F;
                } else {
                    int64_t i_125495 = add64(x_125447, i_125475);
                    float x_125496 = ((float *) mem_122404.mem)[gtid_117719 *
                                                                n_114518 +
                                                                i_125495];
                    
                    defunc_0_f_res_125494 = x_125496;
                }
                
                float x_125497 = a0_125473 * tmp4_125493;
                float defunc_9_fit_fun_res_125498 = defunc_0_f_res_125494 *
                      x_125497;
                float defunc_1_op_res_125499 = defunc_9_fit_fun_res_125498 +
                      redout_125476;
                float redout_tmp_125505 = defunc_1_op_res_125499;
                
                redout_125476 = redout_tmp_125505;
            }
            defunc_2_reduce_res_125474 = redout_125476;
            ((float *) mem_122418)[i_125445] = defunc_2_reduce_res_125474;
        }
        memmove(mem_122434.mem + gtid_117719 * l_n_m_114568 * (int64_t) 4,
                mem_122418 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122418);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131333_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131333_end -
                 futhark_mc_segmap_parloop_131333_start;
        
        ctx->futhark_mc_segmap_parloop_131333_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131333_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131333_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131331(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117718 = tid;
    int num_tasks_125443 = info.nsubtasks;
    struct futhark_mc_task_131330 *futhark_mc_task_131330 =
                                  (struct futhark_mc_task_131330 *) args;
    struct futhark_context *ctx = futhark_mc_task_131330->ctx;
    uint64_t futhark_mc_segmap_task_131331_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131331_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131330->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131330->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131330->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131330->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131330->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131330->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131330->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131330->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131330->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131330->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131330->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131330->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131330->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122434 = {.desc ="mem_122434", .mem =
                                  futhark_mc_task_131330->free_mem_122434,
                                  .size =0, .references =NULL};
    int64_t iter_125444;
    struct futhark_mc_segmap_parloop_struct_131332
    futhark_mc_segmap_parloop_struct_131332;
    
    futhark_mc_segmap_parloop_struct_131332.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131332.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131332.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131332.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131332.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131332.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131332.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131332.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131332.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131332.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131332.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131332.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131332.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131332.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131332.free_mem_122434 = mem_122434.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131333_task;
    
    futhark_mc_segmap_parloop_131333_task.name =
        "futhark_mc_segmap_parloop_131333";
    futhark_mc_segmap_parloop_131333_task.fn = futhark_mc_segmap_parloop_131333;
    futhark_mc_segmap_parloop_131333_task.args =
        &futhark_mc_segmap_parloop_struct_131332;
    futhark_mc_segmap_parloop_131333_task.iterations = iterations;
    futhark_mc_segmap_parloop_131333_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131333_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131333_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131333_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131333_task);
    
    if (futhark_mc_segmap_parloop_131333_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131333_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131333_total_end -
                 futhark_mc_segmap_parloop_131333_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131333_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131333_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131333_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131331_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131331_end -
                 futhark_mc_segmap_task_131331_start;
        
        ctx->futhark_mc_segmap_task_131331_runs[tid]++;
        ctx->futhark_mc_segmap_task_131331_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131331_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131336 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122434;
};
struct futhark_mc_task_131339 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122415;
};
struct futhark_mc_segmap_parloop_struct_131341 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122415;
};
static int futhark_mc_segmap_parloop_131342(void *args, int64_t start,
                                            int64_t end, int flat_tid_117722,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131341
    *futhark_mc_segmap_parloop_struct_131341 =
    (struct futhark_mc_segmap_parloop_struct_131341 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131341->ctx;
    uint64_t futhark_mc_segmap_parloop_131342_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131342_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131341->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131341->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131341->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131341->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131341->free_i_114594;
    int64_t gtid_117721 =
            futhark_mc_segmap_parloop_struct_131341->free_gtid_117721;
    int64_t x_117791 = futhark_mc_segmap_parloop_struct_131341->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131341->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131341->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131341->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131341->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131341->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122415 = {.desc ="mem_122415", .mem =
                                  futhark_mc_segmap_parloop_struct_131341->free_mem_122415,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125616 = start;
    
    for (; iter_125616 < end; iter_125616++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125662 = l_n_m_114568;
        int64_t gtid_117723 = iter_125616;
        int64_t remnant_125663 = iter_125616 - gtid_117723;
        int64_t x_125560 = ((int64_t *) mem_122102.mem)[gtid_117721 *
                                                        l_n_m_114568 +
                                                        gtid_117723];
        float x_125561 = ((float *) mem_122106.mem)[gtid_117721 * l_n_m_114568 +
                                                    gtid_117723];
        int64_t min_arg_125562 = mul64(t_jump_114525, gtid_117723);
        int64_t min_res_125563 = smin64(i_114594, min_arg_125562);
        float defunc_0_f_res_125564 = sitofp_i64_f32(min_res_125563);
        float defunc_2_reduce_res_125565;
        float redout_125618 = 0.0F;
        
        for (int64_t i_125617 = 0; i_125617 < l_window_114522; i_125617++) {
            bool cond_125619 = sle64(x_117791, i_125617);
            float defunc_0_f_res_125620;
            
            if (cond_125619) {
                defunc_0_f_res_125620 = 0.0F;
            } else {
                int64_t i_125621 = add64(x_125560, i_125617);
                float x_125622 = ((float *) mem_121982.mem)[gtid_117721 *
                                                            n_114518 +
                                                            i_125621];
                float defunc_0_f_res_f_res_125623 = 1.0F + x_125622;
                
                defunc_0_f_res_125620 = defunc_0_f_res_f_res_125623;
            }
            
            float defunc_0_f_res_125624;
            
            if (cond_125619) {
                defunc_0_f_res_125624 = 0.0F;
            } else {
                int64_t i_125625 = add64(x_125560, i_125617);
                float x_125626 = ((float *) mem_122408.mem)[gtid_117721 *
                                                            n_114518 +
                                                            i_125625];
                
                defunc_0_f_res_125624 = x_125626;
            }
            
            float x_j_125627 = defunc_0_f_res_125620 - defunc_0_f_res_125564;
            float abs_res_125628 = (float) fabs(x_j_125627);
            float tmp1_125629 = abs_res_125628 / x_125561;
            float x_125630 = tmp1_125629 * tmp1_125629;
            float y_125631 = tmp1_125629 * x_125630;
            float tmp2_125632 = 1.0F - y_125631;
            float x_125633 = tmp2_125632 * tmp2_125632;
            float tmp3_125634 = tmp2_125632 * x_125633;
            float w_j_125635 = defunc_0_f_res_125624 * tmp3_125634;
            float defunc_1_op_res_125636 = w_j_125635 + redout_125618;
            float redout_tmp_125664 = defunc_1_op_res_125636;
            
            redout_125618 = redout_tmp_125664;
        }
        defunc_2_reduce_res_125565 = redout_125618;
        
        float a0_125586 = 1.0F / defunc_2_reduce_res_125565;
        float defunc_2_reduce_res_125587;
        float redout_125638 = 0.0F;
        
        for (int64_t i_125637 = 0; i_125637 < l_window_114522; i_125637++) {
            bool cond_125639 = sle64(x_117791, i_125637);
            float defunc_0_f_res_125640;
            
            if (cond_125639) {
                defunc_0_f_res_125640 = 0.0F;
            } else {
                int64_t i_125641 = add64(x_125560, i_125637);
                float x_125642 = ((float *) mem_121982.mem)[gtid_117721 *
                                                            n_114518 +
                                                            i_125641];
                float defunc_0_f_res_f_res_125643 = 1.0F + x_125642;
                
                defunc_0_f_res_125640 = defunc_0_f_res_f_res_125643;
            }
            
            float defunc_0_f_res_125644;
            
            if (cond_125639) {
                defunc_0_f_res_125644 = 0.0F;
            } else {
                int64_t i_125645 = add64(x_125560, i_125637);
                float x_125646 = ((float *) mem_122408.mem)[gtid_117721 *
                                                            n_114518 +
                                                            i_125645];
                
                defunc_0_f_res_125644 = x_125646;
            }
            
            float x_j_125647 = defunc_0_f_res_125640 - defunc_0_f_res_125564;
            float abs_res_125648 = (float) fabs(x_j_125647);
            float tmp1_125649 = abs_res_125648 / x_125561;
            float x_125650 = tmp1_125649 * tmp1_125649;
            float y_125651 = tmp1_125649 * x_125650;
            float tmp2_125652 = 1.0F - y_125651;
            float x_125653 = tmp2_125652 * tmp2_125652;
            float tmp3_125654 = tmp2_125652 * x_125653;
            float tmp4_125655 = defunc_0_f_res_125644 * tmp3_125654;
            float defunc_0_f_res_125656;
            
            if (cond_125639) {
                defunc_0_f_res_125656 = 0.0F;
            } else {
                int64_t i_125657 = add64(x_125560, i_125637);
                float x_125658 = ((float *) mem_122404.mem)[gtid_117721 *
                                                            n_114518 +
                                                            i_125657];
                
                defunc_0_f_res_125656 = x_125658;
            }
            
            float x_125659 = a0_125586 * tmp4_125655;
            float defunc_9_fit_fun_res_125660 = defunc_0_f_res_125656 *
                  x_125659;
            float defunc_1_op_res_125661 = defunc_9_fit_fun_res_125660 +
                  redout_125638;
            float redout_tmp_125665 = defunc_1_op_res_125661;
            
            redout_125638 = redout_tmp_125665;
        }
        defunc_2_reduce_res_125587 = redout_125638;
        ((float *) mem_122415.mem)[gtid_117723] = defunc_2_reduce_res_125587;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131342_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131342_end -
                 futhark_mc_segmap_parloop_131342_start;
        
        ctx->futhark_mc_segmap_parloop_131342_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131342_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131342_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131340(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117722 = tid;
    int num_tasks_125615 = info.nsubtasks;
    struct futhark_mc_task_131339 *futhark_mc_task_131339 =
                                  (struct futhark_mc_task_131339 *) args;
    struct futhark_context *ctx = futhark_mc_task_131339->ctx;
    uint64_t futhark_mc_segmap_task_131340_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131340_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131339->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131339->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131339->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131339->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131339->free_i_114594;
    int64_t gtid_117721 = futhark_mc_task_131339->free_gtid_117721;
    int64_t x_117791 = futhark_mc_task_131339->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131339->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131339->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131339->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131339->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131339->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122415 = {.desc ="mem_122415", .mem =
                                  futhark_mc_task_131339->free_mem_122415,
                                  .size =0, .references =NULL};
    int64_t iter_125616;
    struct futhark_mc_segmap_parloop_struct_131341
    futhark_mc_segmap_parloop_struct_131341;
    
    futhark_mc_segmap_parloop_struct_131341.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131341.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131341.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131341.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131341.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131341.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131341.free_gtid_117721 = gtid_117721;
    futhark_mc_segmap_parloop_struct_131341.free_x_117791 = x_117791;
    futhark_mc_segmap_parloop_struct_131341.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131341.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131341.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131341.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131341.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131341.free_mem_122415 = mem_122415.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131342_task;
    
    futhark_mc_segmap_parloop_131342_task.name =
        "futhark_mc_segmap_parloop_131342";
    futhark_mc_segmap_parloop_131342_task.fn = futhark_mc_segmap_parloop_131342;
    futhark_mc_segmap_parloop_131342_task.args =
        &futhark_mc_segmap_parloop_struct_131341;
    futhark_mc_segmap_parloop_131342_task.iterations = iterations;
    futhark_mc_segmap_parloop_131342_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131342_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131342_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131342_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131342_task);
    
    if (futhark_mc_segmap_parloop_131342_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131342_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131342_total_end -
                 futhark_mc_segmap_parloop_131342_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131342_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131342_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131342_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131340_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131340_end -
                 futhark_mc_segmap_task_131340_start;
        
        ctx->futhark_mc_segmap_task_131340_runs[tid]++;
        ctx->futhark_mc_segmap_task_131340_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131340_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131344 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122415;
};
struct futhark_mc_task_131346 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_125507;
    float free_x_125508;
    float free_defunc_0_f_res_125511;
    float *retval_defunc_2_reduce_res_125512;
};
struct futhark_mc_segred_stage_1_parloop_struct_131349 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_125507;
    float free_x_125508;
    float free_defunc_0_f_res_125511;
    char *free_reduce_stage_1_tid_res_arr_mem_125715;
};
static int futhark_mc_segred_stage_1_parloop_131350(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117726,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131349
    *futhark_mc_segred_stage_1_parloop_struct_131349 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131349 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131349->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131350_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131350_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131349->free_n_114518;
    int64_t gtid_117721 =
            futhark_mc_segred_stage_1_parloop_struct_131349->free_gtid_117721;
    int64_t x_117791 =
            futhark_mc_segred_stage_1_parloop_struct_131349->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131349->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131349->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125507 =
            futhark_mc_segred_stage_1_parloop_struct_131349->free_x_125507;
    float x_125508 =
          futhark_mc_segred_stage_1_parloop_struct_131349->free_x_125508;
    float defunc_0_f_res_125511 =
          futhark_mc_segred_stage_1_parloop_struct_131349->free_defunc_0_f_res_125511;
    struct memblock reduce_stage_1_tid_res_arr_mem_125715 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125715",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131349->free_reduce_stage_1_tid_res_arr_mem_125715,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125717 = start;
    float x_125667;
    float x_125668;
    float local_acc_125718 = 0.0F;
    
    for (; iter_125717 < end; iter_125717++) {
        int64_t gtid_117727 = iter_125717;
        bool cond_125670 = sle64(x_117791, gtid_117727);
        float defunc_0_f_res_125671;
        
        if (cond_125670) {
            defunc_0_f_res_125671 = 0.0F;
        } else {
            int64_t i_125672 = add64(gtid_117727, x_125507);
            float x_125673 = ((float *) mem_121982.mem)[gtid_117721 * n_114518 +
                                                        i_125672];
            float defunc_0_f_res_f_res_125674 = 1.0F + x_125673;
            
            defunc_0_f_res_125671 = defunc_0_f_res_f_res_125674;
        }
        
        float defunc_0_f_res_125675;
        
        if (cond_125670) {
            defunc_0_f_res_125675 = 0.0F;
        } else {
            int64_t i_125676 = add64(gtid_117727, x_125507);
            float x_125677 = ((float *) mem_122408.mem)[gtid_117721 * n_114518 +
                                                        i_125676];
            
            defunc_0_f_res_125675 = x_125677;
        }
        
        float x_j_125678 = defunc_0_f_res_125671 - defunc_0_f_res_125511;
        float abs_res_125679 = (float) fabs(x_j_125678);
        float tmp1_125680 = abs_res_125679 / x_125508;
        float x_125681 = tmp1_125680 * tmp1_125680;
        float y_125682 = tmp1_125680 * x_125681;
        float tmp2_125683 = 1.0F - y_125682;
        float x_125684 = tmp2_125683 * tmp2_125683;
        float tmp3_125685 = tmp2_125683 * x_125684;
        float w_j_125686 = defunc_0_f_res_125675 * tmp3_125685;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125667 = local_acc_125718;
        }
        // Load next params
        {
            x_125668 = w_j_125686;
        }
        // Red body
        {
            float defunc_1_op_res_125669 = x_125667 + x_125668;
            
            local_acc_125718 = defunc_1_op_res_125669;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125715.mem)[flat_tid_117726] =
        local_acc_125718;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131350_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131350_end -
                 futhark_mc_segred_stage_1_parloop_131350_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131350_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131350_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131350_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131347(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117726 = tid;
    int num_tasks_125714 = info.nsubtasks;
    struct futhark_mc_task_131346 *futhark_mc_task_131346 =
                                  (struct futhark_mc_task_131346 *) args;
    struct futhark_context *ctx = futhark_mc_task_131346->ctx;
    uint64_t futhark_mc_segred_task_131347_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131347_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131346->free_n_114518;
    int64_t gtid_117721 = futhark_mc_task_131346->free_gtid_117721;
    int64_t x_117791 = futhark_mc_task_131346->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131346->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131346->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125507 = futhark_mc_task_131346->free_x_125507;
    float x_125508 = futhark_mc_task_131346->free_x_125508;
    float defunc_0_f_res_125511 =
          futhark_mc_task_131346->free_defunc_0_f_res_125511;
    float defunc_2_reduce_res_125512 =
          *futhark_mc_task_131346->retval_defunc_2_reduce_res_125512;
    size_t reduce_stage_1_tid_res_arr_mem_125715_cached_sizze_131348 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125715 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125715_cached_sizze_131348 <
        (size_t) ((int64_t) 4 * num_tasks_125714)) {
        reduce_stage_1_tid_res_arr_mem_125715 =
            realloc(reduce_stage_1_tid_res_arr_mem_125715, (int64_t) 4 *
                    num_tasks_125714);
        reduce_stage_1_tid_res_arr_mem_125715_cached_sizze_131348 =
            (int64_t) 4 * num_tasks_125714;
    }
    
    int64_t iter_125717;
    struct futhark_mc_segred_stage_1_parloop_struct_131349
    futhark_mc_segred_stage_1_parloop_struct_131349;
    
    futhark_mc_segred_stage_1_parloop_struct_131349.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_gtid_117721 =
        gtid_117721;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_x_117791 = x_117791;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_x_125507 = x_125507;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_x_125508 = x_125508;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_defunc_0_f_res_125511 =
        defunc_0_f_res_125511;
    futhark_mc_segred_stage_1_parloop_struct_131349.free_reduce_stage_1_tid_res_arr_mem_125715 =
        reduce_stage_1_tid_res_arr_mem_125715;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131350_task;
    
    futhark_mc_segred_stage_1_parloop_131350_task.name =
        "futhark_mc_segred_stage_1_parloop_131350";
    futhark_mc_segred_stage_1_parloop_131350_task.fn =
        futhark_mc_segred_stage_1_parloop_131350;
    futhark_mc_segred_stage_1_parloop_131350_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131349;
    futhark_mc_segred_stage_1_parloop_131350_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131350_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131350_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131350_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131350_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131350_task);
    
    if (futhark_mc_segred_stage_1_parloop_131350_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131350_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131350_total_end -
                 futhark_mc_segred_stage_1_parloop_131350_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131350_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131350_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131350_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125512 = 0.0F;
    }
    
    float x_125719;
    float x_125720;
    
    for (int32_t i_125722 = 0; i_125722 < num_tasks_125714; i_125722++) {
        flat_tid_117726 = i_125722;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125719 = defunc_2_reduce_res_125512;
            }
            // load next params
            {
                x_125720 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125715)[flat_tid_117726];
            }
            // red body
            {
                float defunc_1_op_res_125721 = x_125719 + x_125720;
                
                defunc_2_reduce_res_125512 = defunc_1_op_res_125721;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125715);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131347_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131347_end -
                 futhark_mc_segred_task_131347_start;
        
        ctx->futhark_mc_segred_task_131347_runs[tid]++;
        ctx->futhark_mc_segred_task_131347_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131347_iter[tid] += iterations;
    }
    *futhark_mc_task_131346->retval_defunc_2_reduce_res_125512 =
        defunc_2_reduce_res_125512;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131351 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_x_125507;
    float free_x_125508;
    float free_defunc_0_f_res_125511;
    float free_a0_125533;
    float *retval_defunc_2_reduce_res_125534;
};
struct futhark_mc_segred_stage_1_parloop_struct_131354 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117721;
    int64_t free_x_117791;
    char *free_mem_121982;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_x_125507;
    float free_x_125508;
    float free_defunc_0_f_res_125511;
    float free_a0_125533;
    char *free_reduce_stage_1_tid_res_arr_mem_125724;
};
static int futhark_mc_segred_stage_1_parloop_131355(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117728,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131354
    *futhark_mc_segred_stage_1_parloop_struct_131354 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131354 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131354->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131355_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131355_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131354->free_n_114518;
    int64_t gtid_117721 =
            futhark_mc_segred_stage_1_parloop_struct_131354->free_gtid_117721;
    int64_t x_117791 =
            futhark_mc_segred_stage_1_parloop_struct_131354->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131354->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131354->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131354->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125507 =
            futhark_mc_segred_stage_1_parloop_struct_131354->free_x_125507;
    float x_125508 =
          futhark_mc_segred_stage_1_parloop_struct_131354->free_x_125508;
    float defunc_0_f_res_125511 =
          futhark_mc_segred_stage_1_parloop_struct_131354->free_defunc_0_f_res_125511;
    float a0_125533 =
          futhark_mc_segred_stage_1_parloop_struct_131354->free_a0_125533;
    struct memblock reduce_stage_1_tid_res_arr_mem_125724 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125724",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131354->free_reduce_stage_1_tid_res_arr_mem_125724,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125726 = start;
    float x_125687;
    float x_125688;
    float local_acc_125727 = 0.0F;
    
    for (; iter_125726 < end; iter_125726++) {
        int64_t gtid_117729 = iter_125726;
        bool cond_125690 = sle64(x_117791, gtid_117729);
        float defunc_0_f_res_125691;
        
        if (cond_125690) {
            defunc_0_f_res_125691 = 0.0F;
        } else {
            int64_t i_125692 = add64(gtid_117729, x_125507);
            float x_125693 = ((float *) mem_121982.mem)[gtid_117721 * n_114518 +
                                                        i_125692];
            float defunc_0_f_res_f_res_125694 = 1.0F + x_125693;
            
            defunc_0_f_res_125691 = defunc_0_f_res_f_res_125694;
        }
        
        float defunc_0_f_res_125695;
        
        if (cond_125690) {
            defunc_0_f_res_125695 = 0.0F;
        } else {
            int64_t i_125696 = add64(gtid_117729, x_125507);
            float x_125697 = ((float *) mem_122408.mem)[gtid_117721 * n_114518 +
                                                        i_125696];
            
            defunc_0_f_res_125695 = x_125697;
        }
        
        float x_j_125698 = defunc_0_f_res_125691 - defunc_0_f_res_125511;
        float abs_res_125699 = (float) fabs(x_j_125698);
        float tmp1_125700 = abs_res_125699 / x_125508;
        float x_125701 = tmp1_125700 * tmp1_125700;
        float y_125702 = tmp1_125700 * x_125701;
        float tmp2_125703 = 1.0F - y_125702;
        float x_125704 = tmp2_125703 * tmp2_125703;
        float tmp3_125705 = tmp2_125703 * x_125704;
        float tmp4_125706 = defunc_0_f_res_125695 * tmp3_125705;
        float defunc_0_f_res_125707;
        
        if (cond_125690) {
            defunc_0_f_res_125707 = 0.0F;
        } else {
            int64_t i_125708 = add64(gtid_117729, x_125507);
            float x_125709 = ((float *) mem_122404.mem)[gtid_117721 * n_114518 +
                                                        i_125708];
            
            defunc_0_f_res_125707 = x_125709;
        }
        
        float x_125710 = a0_125533 * tmp4_125706;
        float defunc_9_fit_fun_res_125711 = defunc_0_f_res_125707 * x_125710;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125687 = local_acc_125727;
        }
        // Load next params
        {
            x_125688 = defunc_9_fit_fun_res_125711;
        }
        // Red body
        {
            float defunc_1_op_res_125689 = x_125687 + x_125688;
            
            local_acc_125727 = defunc_1_op_res_125689;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125724.mem)[flat_tid_117728] =
        local_acc_125727;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131355_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131355_end -
                 futhark_mc_segred_stage_1_parloop_131355_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131355_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131355_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131355_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131352(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117728 = tid;
    int num_tasks_125723 = info.nsubtasks;
    struct futhark_mc_task_131351 *futhark_mc_task_131351 =
                                  (struct futhark_mc_task_131351 *) args;
    struct futhark_context *ctx = futhark_mc_task_131351->ctx;
    uint64_t futhark_mc_segred_task_131352_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131352_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131351->free_n_114518;
    int64_t gtid_117721 = futhark_mc_task_131351->free_gtid_117721;
    int64_t x_117791 = futhark_mc_task_131351->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131351->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131351->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131351->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125507 = futhark_mc_task_131351->free_x_125507;
    float x_125508 = futhark_mc_task_131351->free_x_125508;
    float defunc_0_f_res_125511 =
          futhark_mc_task_131351->free_defunc_0_f_res_125511;
    float a0_125533 = futhark_mc_task_131351->free_a0_125533;
    float defunc_2_reduce_res_125534 =
          *futhark_mc_task_131351->retval_defunc_2_reduce_res_125534;
    size_t reduce_stage_1_tid_res_arr_mem_125724_cached_sizze_131353 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125724 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125724_cached_sizze_131353 <
        (size_t) ((int64_t) 4 * num_tasks_125723)) {
        reduce_stage_1_tid_res_arr_mem_125724 =
            realloc(reduce_stage_1_tid_res_arr_mem_125724, (int64_t) 4 *
                    num_tasks_125723);
        reduce_stage_1_tid_res_arr_mem_125724_cached_sizze_131353 =
            (int64_t) 4 * num_tasks_125723;
    }
    
    int64_t iter_125726;
    struct futhark_mc_segred_stage_1_parloop_struct_131354
    futhark_mc_segred_stage_1_parloop_struct_131354;
    
    futhark_mc_segred_stage_1_parloop_struct_131354.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_gtid_117721 =
        gtid_117721;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_x_117791 = x_117791;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_mem_122404 =
        mem_122404.mem;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_x_125507 = x_125507;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_x_125508 = x_125508;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_defunc_0_f_res_125511 =
        defunc_0_f_res_125511;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_a0_125533 = a0_125533;
    futhark_mc_segred_stage_1_parloop_struct_131354.free_reduce_stage_1_tid_res_arr_mem_125724 =
        reduce_stage_1_tid_res_arr_mem_125724;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131355_task;
    
    futhark_mc_segred_stage_1_parloop_131355_task.name =
        "futhark_mc_segred_stage_1_parloop_131355";
    futhark_mc_segred_stage_1_parloop_131355_task.fn =
        futhark_mc_segred_stage_1_parloop_131355;
    futhark_mc_segred_stage_1_parloop_131355_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131354;
    futhark_mc_segred_stage_1_parloop_131355_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131355_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131355_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131355_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131355_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131355_task);
    
    if (futhark_mc_segred_stage_1_parloop_131355_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131355_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131355_total_end -
                 futhark_mc_segred_stage_1_parloop_131355_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131355_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131355_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131355_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125534 = 0.0F;
    }
    
    float x_125728;
    float x_125729;
    
    for (int32_t i_125731 = 0; i_125731 < num_tasks_125723; i_125731++) {
        flat_tid_117728 = i_125731;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125728 = defunc_2_reduce_res_125534;
            }
            // load next params
            {
                x_125729 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125724)[flat_tid_117728];
            }
            // red body
            {
                float defunc_1_op_res_125730 = x_125728 + x_125729;
                
                defunc_2_reduce_res_125534 = defunc_1_op_res_125730;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125724);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131352_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131352_end -
                 futhark_mc_segred_task_131352_start;
        
        ctx->futhark_mc_segred_task_131352_runs[tid]++;
        ctx->futhark_mc_segred_task_131352_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131352_iter[tid] += iterations;
    }
    *futhark_mc_task_131351->retval_defunc_2_reduce_res_125534 =
        defunc_2_reduce_res_125534;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131345(void *args, int64_t start,
                                            int64_t end, int flat_tid_117724,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131344
    *futhark_mc_segmap_parloop_struct_131344 =
    (struct futhark_mc_segmap_parloop_struct_131344 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131344->ctx;
    uint64_t futhark_mc_segmap_parloop_131345_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131345_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131344->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131344->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131344->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131344->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131344->free_i_114594;
    int64_t gtid_117721 =
            futhark_mc_segmap_parloop_struct_131344->free_gtid_117721;
    int64_t x_117791 = futhark_mc_segmap_parloop_struct_131344->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131344->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131344->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131344->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131344->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131344->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122415 = {.desc ="mem_122415", .mem =
                                  futhark_mc_segmap_parloop_struct_131344->free_mem_122415,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125666 = start;
    
    for (; iter_125666 < end; iter_125666++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125712 = l_n_m_114568;
        int64_t gtid_117725 = iter_125666;
        int64_t remnant_125713 = iter_125666 - gtid_117725;
        int64_t x_125507 = ((int64_t *) mem_122102.mem)[gtid_117721 *
                                                        l_n_m_114568 +
                                                        gtid_117725];
        float x_125508 = ((float *) mem_122106.mem)[gtid_117721 * l_n_m_114568 +
                                                    gtid_117725];
        int64_t min_arg_125509 = mul64(t_jump_114525, gtid_117725);
        int64_t min_res_125510 = smin64(i_114594, min_arg_125509);
        float defunc_0_f_res_125511 = sitofp_i64_f32(min_res_125510);
        float defunc_2_reduce_res_125512;
        int64_t flat_tid_117726 = (int64_t) 0;
        int32_t num_tasks_125714;
        struct futhark_mc_task_131346 futhark_mc_task_131346;
        
        futhark_mc_task_131346.ctx = ctx;
        futhark_mc_task_131346.free_n_114518 = n_114518;
        futhark_mc_task_131346.free_gtid_117721 = gtid_117721;
        futhark_mc_task_131346.free_x_117791 = x_117791;
        futhark_mc_task_131346.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131346.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131346.free_x_125507 = x_125507;
        futhark_mc_task_131346.free_x_125508 = x_125508;
        futhark_mc_task_131346.free_defunc_0_f_res_125511 =
            defunc_0_f_res_125511;
        futhark_mc_task_131346.retval_defunc_2_reduce_res_125512 =
            &defunc_2_reduce_res_125512;
        
        struct scheduler_segop futhark_mc_task_131346_task;
        
        futhark_mc_task_131346_task.args = &futhark_mc_task_131346;
        futhark_mc_task_131346_task.top_level_fn =
            futhark_mc_segred_task_131347;
        futhark_mc_task_131346_task.name = "futhark_mc_segred_task_131347";
        futhark_mc_task_131346_task.iterations = l_window_114522;
        futhark_mc_task_131346_task.task_time =
            &ctx->futhark_mc_segred_task_131347_total_time;
        futhark_mc_task_131346_task.task_iter =
            &ctx->futhark_mc_segred_task_131347_total_iter;
        futhark_mc_task_131346_task.sched = STATIC;
        futhark_mc_task_131346_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131347_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131346_task);
        
        if (futhark_mc_segred_task_131347_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_125533 = 1.0F / defunc_2_reduce_res_125512;
        float defunc_2_reduce_res_125534;
        int64_t flat_tid_117728 = (int64_t) 0;
        int32_t num_tasks_125723;
        struct futhark_mc_task_131351 futhark_mc_task_131351;
        
        futhark_mc_task_131351.ctx = ctx;
        futhark_mc_task_131351.free_n_114518 = n_114518;
        futhark_mc_task_131351.free_gtid_117721 = gtid_117721;
        futhark_mc_task_131351.free_x_117791 = x_117791;
        futhark_mc_task_131351.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131351.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131351.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131351.free_x_125507 = x_125507;
        futhark_mc_task_131351.free_x_125508 = x_125508;
        futhark_mc_task_131351.free_defunc_0_f_res_125511 =
            defunc_0_f_res_125511;
        futhark_mc_task_131351.free_a0_125533 = a0_125533;
        futhark_mc_task_131351.retval_defunc_2_reduce_res_125534 =
            &defunc_2_reduce_res_125534;
        
        struct scheduler_segop futhark_mc_task_131351_task;
        
        futhark_mc_task_131351_task.args = &futhark_mc_task_131351;
        futhark_mc_task_131351_task.top_level_fn =
            futhark_mc_segred_task_131352;
        futhark_mc_task_131351_task.name = "futhark_mc_segred_task_131352";
        futhark_mc_task_131351_task.iterations = l_window_114522;
        futhark_mc_task_131351_task.task_time =
            &ctx->futhark_mc_segred_task_131352_total_time;
        futhark_mc_task_131351_task.task_iter =
            &ctx->futhark_mc_segred_task_131352_total_iter;
        futhark_mc_task_131351_task.sched = STATIC;
        futhark_mc_task_131351_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131352_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131351_task);
        
        if (futhark_mc_segred_task_131352_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122415.mem)[gtid_117725] = defunc_2_reduce_res_125534;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131345_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131345_end -
                 futhark_mc_segmap_parloop_131345_start;
        
        ctx->futhark_mc_segmap_parloop_131345_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131345_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131345_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131343(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117724 = tid;
    int num_tasks_125615 = info.nsubtasks;
    struct futhark_mc_task_131339 *futhark_mc_task_131339 =
                                  (struct futhark_mc_task_131339 *) args;
    struct futhark_context *ctx = futhark_mc_task_131339->ctx;
    uint64_t futhark_mc_segmap_nested_task_131343_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131343_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131339->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131339->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131339->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131339->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131339->free_i_114594;
    int64_t gtid_117721 = futhark_mc_task_131339->free_gtid_117721;
    int64_t x_117791 = futhark_mc_task_131339->free_x_117791;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131339->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131339->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131339->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131339->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131339->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122415 = {.desc ="mem_122415", .mem =
                                  futhark_mc_task_131339->free_mem_122415,
                                  .size =0, .references =NULL};
    int64_t iter_125666;
    struct futhark_mc_segmap_parloop_struct_131344
    futhark_mc_segmap_parloop_struct_131344;
    
    futhark_mc_segmap_parloop_struct_131344.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131344.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131344.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131344.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131344.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131344.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131344.free_gtid_117721 = gtid_117721;
    futhark_mc_segmap_parloop_struct_131344.free_x_117791 = x_117791;
    futhark_mc_segmap_parloop_struct_131344.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131344.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131344.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131344.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131344.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131344.free_mem_122415 = mem_122415.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131345_task;
    
    futhark_mc_segmap_parloop_131345_task.name =
        "futhark_mc_segmap_parloop_131345";
    futhark_mc_segmap_parloop_131345_task.fn = futhark_mc_segmap_parloop_131345;
    futhark_mc_segmap_parloop_131345_task.args =
        &futhark_mc_segmap_parloop_struct_131344;
    futhark_mc_segmap_parloop_131345_task.iterations = iterations;
    futhark_mc_segmap_parloop_131345_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131345_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131345_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131345_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131345_task);
    
    if (futhark_mc_segmap_parloop_131345_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131345_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131345_total_end -
                 futhark_mc_segmap_parloop_131345_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131345_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131345_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131345_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131343_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131343_end -
                 futhark_mc_segmap_nested_task_131343_start;
        
        ctx->futhark_mc_segmap_nested_task_131343_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131343_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131343_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131337(void *args, int64_t start,
                                            int64_t end, int flat_tid_117720,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131336
    *futhark_mc_segmap_parloop_struct_131336 =
    (struct futhark_mc_segmap_parloop_struct_131336 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131336->ctx;
    uint64_t futhark_mc_segmap_parloop_131337_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131337_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131336->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131336->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131336->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131336->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131336->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131336->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131336->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122434 = {.desc ="mem_122434", .mem =
                                  futhark_mc_segmap_parloop_struct_131336->free_mem_122434,
                                  .size =0, .references =NULL};
    size_t mem_122415_cached_sizze_131338 = 0;
    char *mem_122415 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125506 = start;
    
    if (mem_122415_cached_sizze_131338 < (size_t) bytes_122033) {
        mem_122415 = realloc(mem_122415, bytes_122033);
        mem_122415_cached_sizze_131338 = bytes_122033;
    }
    for (; iter_125506 < end; iter_125506++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125613 = m_114517;
        int64_t gtid_117721 = iter_125506;
        int64_t remnant_125614 = iter_125506 - gtid_117721;
        int64_t x_117791 = ((int64_t *) mem_121960.mem)[gtid_117721];
        int64_t flat_tid_117722 = (int64_t) 0;
        int32_t num_tasks_125615;
        int64_t flat_tid_117724 = (int64_t) 0;
        struct futhark_mc_task_131339 futhark_mc_task_131339;
        
        futhark_mc_task_131339.ctx = ctx;
        futhark_mc_task_131339.free_n_114518 = n_114518;
        futhark_mc_task_131339.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131339.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131339.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131339.free_i_114594 = i_114594;
        futhark_mc_task_131339.free_gtid_117721 = gtid_117721;
        futhark_mc_task_131339.free_x_117791 = x_117791;
        futhark_mc_task_131339.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131339.free_mem_122102 = mem_122102.mem;
        futhark_mc_task_131339.free_mem_122106 = mem_122106.mem;
        futhark_mc_task_131339.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131339.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131339.free_mem_122415 = mem_122415;
        
        struct scheduler_segop futhark_mc_task_131339_task;
        
        futhark_mc_task_131339_task.args = &futhark_mc_task_131339;
        futhark_mc_task_131339_task.top_level_fn =
            futhark_mc_segmap_task_131340;
        futhark_mc_task_131339_task.name = "futhark_mc_segmap_task_131340";
        futhark_mc_task_131339_task.iterations = l_n_m_114568;
        futhark_mc_task_131339_task.task_time =
            &ctx->futhark_mc_segmap_task_131340_total_time;
        futhark_mc_task_131339_task.task_iter =
            &ctx->futhark_mc_segmap_task_131340_total_iter;
        futhark_mc_task_131339_task.sched = STATIC;
        futhark_mc_task_131339_task.nested_fn =
            futhark_mc_segmap_nested_task_131343;
        
        int futhark_mc_segmap_task_131340_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131339_task);
        
        if (futhark_mc_segmap_task_131340_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122434.mem + gtid_117721 * l_n_m_114568 * (int64_t) 4,
                mem_122415 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122415);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131337_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131337_end -
                 futhark_mc_segmap_parloop_131337_start;
        
        ctx->futhark_mc_segmap_parloop_131337_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131337_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131337_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131335(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117720 = tid;
    int num_tasks_125443 = info.nsubtasks;
    struct futhark_mc_task_131330 *futhark_mc_task_131330 =
                                  (struct futhark_mc_task_131330 *) args;
    struct futhark_context *ctx = futhark_mc_task_131330->ctx;
    uint64_t futhark_mc_segmap_nested_task_131335_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131335_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131330->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131330->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131330->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131330->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131330->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131330->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131330->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131330->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131330->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131330->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131330->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131330->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131330->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122434 = {.desc ="mem_122434", .mem =
                                  futhark_mc_task_131330->free_mem_122434,
                                  .size =0, .references =NULL};
    int64_t iter_125506;
    struct futhark_mc_segmap_parloop_struct_131336
    futhark_mc_segmap_parloop_struct_131336;
    
    futhark_mc_segmap_parloop_struct_131336.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131336.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131336.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131336.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131336.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131336.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131336.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131336.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131336.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131336.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131336.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131336.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131336.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131336.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131336.free_mem_122434 = mem_122434.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131337_task;
    
    futhark_mc_segmap_parloop_131337_task.name =
        "futhark_mc_segmap_parloop_131337";
    futhark_mc_segmap_parloop_131337_task.fn = futhark_mc_segmap_parloop_131337;
    futhark_mc_segmap_parloop_131337_task.args =
        &futhark_mc_segmap_parloop_struct_131336;
    futhark_mc_segmap_parloop_131337_task.iterations = iterations;
    futhark_mc_segmap_parloop_131337_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131337_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131337_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131337_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131337_task);
    
    if (futhark_mc_segmap_parloop_131337_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131337_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131337_total_end -
                 futhark_mc_segmap_parloop_131337_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131337_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131337_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131337_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131335_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131335_end -
                 futhark_mc_segmap_nested_task_131335_start;
        
        ctx->futhark_mc_segmap_nested_task_131335_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131335_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131335_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131356 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122474;
    char *free_mem_122478;
};
struct futhark_mc_segmap_parloop_struct_131358 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122474;
    char *free_mem_122478;
};
static int futhark_mc_segmap_parloop_131359(void *args, int64_t start,
                                            int64_t end, int flat_tid_117905,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131358
    *futhark_mc_segmap_parloop_struct_131358 =
    (struct futhark_mc_segmap_parloop_struct_131358 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131358->ctx;
    uint64_t futhark_mc_segmap_parloop_131359_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131359_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131358->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131358->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131358->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131358->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131358->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131358->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131358->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122474 = {.desc ="mem_122474", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_122474,
                                  .size =0, .references =NULL};
    struct memblock mem_122478 = {.desc ="mem_122478", .mem =
                                  futhark_mc_segmap_parloop_struct_131358->free_mem_122478,
                                  .size =0, .references =NULL};
    size_t mem_122443_cached_sizze_131360 = 0;
    char *mem_122443 = NULL;
    size_t mem_122446_cached_sizze_131361 = 0;
    char *mem_122446 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125733 = start;
    
    if (mem_122443_cached_sizze_131360 < (size_t) bytes_122033) {
        mem_122443 = realloc(mem_122443, bytes_122033);
        mem_122443_cached_sizze_131360 = bytes_122033;
    }
    if (mem_122446_cached_sizze_131361 < (size_t) bytes_122033) {
        mem_122446 = realloc(mem_122446, bytes_122033);
        mem_122446_cached_sizze_131361 = bytes_122033;
    }
    for (; iter_125733 < end; iter_125733++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125817 = m_114517;
        int64_t gtid_117906 = iter_125733;
        int64_t remnant_125818 = iter_125733 - gtid_117906;
        int64_t x_115247 = ((int64_t *) mem_121960.mem)[gtid_117906];
        
        for (int64_t i_125734 = 0; i_125734 < l_n_m_114568; i_125734++) {
            int64_t x_125737 = ((int64_t *) mem_122102.mem)[gtid_117906 *
                                                            l_n_m_114568 +
                                                            i_125734];
            float x_125738 = ((float *) mem_122106.mem)[gtid_117906 *
                                                        l_n_m_114568 +
                                                        i_125734];
            int64_t min_arg_125739 = mul64(t_jump_114525, i_125734);
            int64_t min_res_125740 = smin64(i_114594, min_arg_125739);
            float defunc_0_f_res_125741 = sitofp_i64_f32(min_res_125740);
            float defunc_2_reduce_res_125742;
            float defunc_2_reduce_res_125743;
            float defunc_2_reduce_res_125744;
            float redout_125746;
            float redout_125747;
            float redout_125748;
            
            redout_125746 = 0.0F;
            redout_125747 = 0.0F;
            redout_125748 = 0.0F;
            for (int64_t i_125745 = 0; i_125745 < l_window_114522; i_125745++) {
                bool cond_125749 = sle64(x_115247, i_125745);
                float defunc_0_f_res_125750;
                
                if (cond_125749) {
                    defunc_0_f_res_125750 = 0.0F;
                } else {
                    int64_t i_125751 = add64(x_125737, i_125745);
                    float x_125752 = ((float *) mem_121982.mem)[gtid_117906 *
                                                                n_114518 +
                                                                i_125751];
                    float defunc_0_f_res_f_res_125753 = 1.0F + x_125752;
                    
                    defunc_0_f_res_125750 = defunc_0_f_res_f_res_125753;
                }
                
                float defunc_0_f_res_125754;
                
                if (cond_125749) {
                    defunc_0_f_res_125754 = 0.0F;
                } else {
                    int64_t i_125755 = add64(x_125737, i_125745);
                    float x_125756 = ((float *) mem_122408.mem)[gtid_117906 *
                                                                n_114518 +
                                                                i_125755];
                    
                    defunc_0_f_res_125754 = x_125756;
                }
                
                float x_j_125757 = defunc_0_f_res_125750 -
                      defunc_0_f_res_125741;
                float abs_res_125758 = (float) fabs(x_j_125757);
                float tmp1_125759 = abs_res_125758 / x_125738;
                float x_125760 = tmp1_125759 * tmp1_125759;
                float y_125761 = tmp1_125759 * x_125760;
                float tmp2_125762 = 1.0F - y_125761;
                float x_125763 = tmp2_125762 * tmp2_125762;
                float tmp3_125764 = tmp2_125762 * x_125763;
                float w_j_125765 = defunc_0_f_res_125754 * tmp3_125764;
                float xw_j_125766 = x_j_125757 * w_j_125765;
                float x2w_j_125767 = x_j_125757 * xw_j_125766;
                float defunc_1_op_res_125768 = w_j_125765 + redout_125746;
                float defunc_1_op_res_125769 = xw_j_125766 + redout_125747;
                float defunc_1_op_res_125770 = x2w_j_125767 + redout_125748;
                float redout_tmp_125821 = defunc_1_op_res_125768;
                float redout_tmp_125822 = defunc_1_op_res_125769;
                float redout_tmp_125823 = defunc_1_op_res_125770;
                
                redout_125746 = redout_tmp_125821;
                redout_125747 = redout_tmp_125822;
                redout_125748 = redout_tmp_125823;
            }
            defunc_2_reduce_res_125742 = redout_125746;
            defunc_2_reduce_res_125743 = redout_125747;
            defunc_2_reduce_res_125744 = redout_125748;
            
            float x_125771 = defunc_2_reduce_res_125742 *
                  defunc_2_reduce_res_125744;
            float y_125772 = defunc_2_reduce_res_125743 *
                  defunc_2_reduce_res_125743;
            float y_125773 = x_125771 - y_125772;
            float det1_125774 = 1.0F / y_125773;
            float a11_125775 = defunc_2_reduce_res_125744 * det1_125774;
            float negate_arg_125776 = defunc_2_reduce_res_125743 * det1_125774;
            float b11_125777 = 0.0F - negate_arg_125776;
            float c11_125778 = defunc_2_reduce_res_125742 * det1_125774;
            float defunc_2_reduce_res_125779;
            float defunc_2_reduce_res_125780;
            float redout_125782;
            float redout_125783;
            
            redout_125782 = 0.0F;
            redout_125783 = 0.0F;
            for (int64_t i_125781 = 0; i_125781 < l_window_114522; i_125781++) {
                bool cond_125784 = sle64(x_115247, i_125781);
                float defunc_0_f_res_125785;
                
                if (cond_125784) {
                    defunc_0_f_res_125785 = 0.0F;
                } else {
                    int64_t i_125786 = add64(x_125737, i_125781);
                    float x_125787 = ((float *) mem_121982.mem)[gtid_117906 *
                                                                n_114518 +
                                                                i_125786];
                    float defunc_0_f_res_f_res_125788 = 1.0F + x_125787;
                    
                    defunc_0_f_res_125785 = defunc_0_f_res_f_res_125788;
                }
                
                float defunc_0_f_res_125789;
                
                if (cond_125784) {
                    defunc_0_f_res_125789 = 0.0F;
                } else {
                    int64_t i_125790 = add64(x_125737, i_125781);
                    float x_125791 = ((float *) mem_122408.mem)[gtid_117906 *
                                                                n_114518 +
                                                                i_125790];
                    
                    defunc_0_f_res_125789 = x_125791;
                }
                
                float x_j_125792 = defunc_0_f_res_125785 -
                      defunc_0_f_res_125741;
                float abs_res_125793 = (float) fabs(x_j_125792);
                float tmp1_125794 = abs_res_125793 / x_125738;
                float x_125795 = tmp1_125794 * tmp1_125794;
                float y_125796 = tmp1_125794 * x_125795;
                float tmp2_125797 = 1.0F - y_125796;
                float x_125798 = tmp2_125797 * tmp2_125797;
                float tmp3_125799 = tmp2_125797 * x_125798;
                float tmp4_125800 = defunc_0_f_res_125789 * tmp3_125799;
                float defunc_1_f_res_125801 = x_j_125792 * tmp4_125800;
                float defunc_0_f_res_125802;
                
                if (cond_125784) {
                    defunc_0_f_res_125802 = 0.0F;
                } else {
                    int64_t i_125803 = add64(x_125737, i_125781);
                    float x_125804 = ((float *) mem_122404.mem)[gtid_117906 *
                                                                n_114518 +
                                                                i_125803];
                    
                    defunc_0_f_res_125802 = x_125804;
                }
                
                float x_125805 = a11_125775 * tmp4_125800;
                float y_125806 = b11_125777 * defunc_1_f_res_125801;
                float x_125807 = x_125805 + y_125806;
                float defunc_9_fit_fun_res_125808 = defunc_0_f_res_125802 *
                      x_125807;
                float x_125809 = b11_125777 * tmp4_125800;
                float y_125810 = c11_125778 * defunc_1_f_res_125801;
                float x_125811 = x_125809 + y_125810;
                float defunc_9_slope_fun_res_125812 = defunc_0_f_res_125802 *
                      x_125811;
                float defunc_1_op_res_125813 = defunc_9_fit_fun_res_125808 +
                      redout_125782;
                float defunc_1_op_res_125814 = defunc_9_slope_fun_res_125812 +
                      redout_125783;
                float redout_tmp_125824 = defunc_1_op_res_125813;
                float redout_tmp_125825 = defunc_1_op_res_125814;
                
                redout_125782 = redout_tmp_125824;
                redout_125783 = redout_tmp_125825;
            }
            defunc_2_reduce_res_125779 = redout_125782;
            defunc_2_reduce_res_125780 = redout_125783;
            ((float *) mem_122443)[i_125734] = defunc_2_reduce_res_125779;
            ((float *) mem_122446)[i_125734] = defunc_2_reduce_res_125780;
        }
        memmove(mem_122474.mem + gtid_117906 * l_n_m_114568 * (int64_t) 4,
                mem_122443 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122478.mem + gtid_117906 * l_n_m_114568 * (int64_t) 4,
                mem_122446 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122443);
    free(mem_122446);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131359_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131359_end -
                 futhark_mc_segmap_parloop_131359_start;
        
        ctx->futhark_mc_segmap_parloop_131359_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131359_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131359_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131357(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117905 = tid;
    int num_tasks_125732 = info.nsubtasks;
    struct futhark_mc_task_131356 *futhark_mc_task_131356 =
                                  (struct futhark_mc_task_131356 *) args;
    struct futhark_context *ctx = futhark_mc_task_131356->ctx;
    uint64_t futhark_mc_segmap_task_131357_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131357_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131356->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131356->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131356->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131356->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131356->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131356->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131356->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131356->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131356->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131356->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131356->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131356->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131356->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122474 = {.desc ="mem_122474", .mem =
                                  futhark_mc_task_131356->free_mem_122474,
                                  .size =0, .references =NULL};
    struct memblock mem_122478 = {.desc ="mem_122478", .mem =
                                  futhark_mc_task_131356->free_mem_122478,
                                  .size =0, .references =NULL};
    int64_t iter_125733;
    struct futhark_mc_segmap_parloop_struct_131358
    futhark_mc_segmap_parloop_struct_131358;
    
    futhark_mc_segmap_parloop_struct_131358.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131358.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131358.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131358.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131358.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131358.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131358.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131358.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131358.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131358.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131358.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131358.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131358.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131358.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131358.free_mem_122474 = mem_122474.mem;
    futhark_mc_segmap_parloop_struct_131358.free_mem_122478 = mem_122478.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131359_task;
    
    futhark_mc_segmap_parloop_131359_task.name =
        "futhark_mc_segmap_parloop_131359";
    futhark_mc_segmap_parloop_131359_task.fn = futhark_mc_segmap_parloop_131359;
    futhark_mc_segmap_parloop_131359_task.args =
        &futhark_mc_segmap_parloop_struct_131358;
    futhark_mc_segmap_parloop_131359_task.iterations = iterations;
    futhark_mc_segmap_parloop_131359_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131359_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131359_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131359_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131359_task);
    
    if (futhark_mc_segmap_parloop_131359_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131359_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131359_total_end -
                 futhark_mc_segmap_parloop_131359_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131359_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131359_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131359_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131357_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131357_end -
                 futhark_mc_segmap_task_131357_start;
        
        ctx->futhark_mc_segmap_task_131357_runs[tid]++;
        ctx->futhark_mc_segmap_task_131357_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131357_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131363 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122474;
    char *free_mem_122478;
};
struct futhark_mc_task_131367 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122437;
    char *free_mem_122440;
};
struct futhark_mc_segmap_parloop_struct_131369 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122437;
    char *free_mem_122440;
};
static int futhark_mc_segmap_parloop_131370(void *args, int64_t start,
                                            int64_t end, int flat_tid_117909,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131369
    *futhark_mc_segmap_parloop_struct_131369 =
    (struct futhark_mc_segmap_parloop_struct_131369 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131369->ctx;
    uint64_t futhark_mc_segmap_parloop_131370_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131370_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131369->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131369->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131369->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131369->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131369->free_i_114594;
    int64_t gtid_117908 =
            futhark_mc_segmap_parloop_struct_131369->free_gtid_117908;
    int64_t x_118006 = futhark_mc_segmap_parloop_struct_131369->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122437 = {.desc ="mem_122437", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_122437,
                                  .size =0, .references =NULL};
    struct memblock mem_122440 = {.desc ="mem_122440", .mem =
                                  futhark_mc_segmap_parloop_struct_131369->free_mem_122440,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125989 = start;
    
    for (; iter_125989 < end; iter_125989++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126050 = l_n_m_114568;
        int64_t gtid_117910 = iter_125989;
        int64_t remnant_126051 = iter_125989 - gtid_117910;
        int64_t x_125908 = ((int64_t *) mem_122102.mem)[gtid_117908 *
                                                        l_n_m_114568 +
                                                        gtid_117910];
        float x_125909 = ((float *) mem_122106.mem)[gtid_117908 * l_n_m_114568 +
                                                    gtid_117910];
        int64_t min_arg_125910 = mul64(t_jump_114525, gtid_117910);
        int64_t min_res_125911 = smin64(i_114594, min_arg_125910);
        float defunc_0_f_res_125912 = sitofp_i64_f32(min_res_125911);
        float defunc_2_reduce_res_125913;
        float defunc_2_reduce_res_125914;
        float defunc_2_reduce_res_125915;
        float redout_125991;
        float redout_125992;
        float redout_125993;
        
        redout_125991 = 0.0F;
        redout_125992 = 0.0F;
        redout_125993 = 0.0F;
        for (int64_t i_125990 = 0; i_125990 < l_window_114522; i_125990++) {
            bool cond_125994 = sle64(x_118006, i_125990);
            float defunc_0_f_res_125995;
            
            if (cond_125994) {
                defunc_0_f_res_125995 = 0.0F;
            } else {
                int64_t i_125996 = add64(x_125908, i_125990);
                float x_125997 = ((float *) mem_121982.mem)[gtid_117908 *
                                                            n_114518 +
                                                            i_125996];
                float defunc_0_f_res_f_res_125998 = 1.0F + x_125997;
                
                defunc_0_f_res_125995 = defunc_0_f_res_f_res_125998;
            }
            
            float defunc_0_f_res_125999;
            
            if (cond_125994) {
                defunc_0_f_res_125999 = 0.0F;
            } else {
                int64_t i_126000 = add64(x_125908, i_125990);
                float x_126001 = ((float *) mem_122408.mem)[gtid_117908 *
                                                            n_114518 +
                                                            i_126000];
                
                defunc_0_f_res_125999 = x_126001;
            }
            
            float x_j_126002 = defunc_0_f_res_125995 - defunc_0_f_res_125912;
            float abs_res_126003 = (float) fabs(x_j_126002);
            float tmp1_126004 = abs_res_126003 / x_125909;
            float x_126005 = tmp1_126004 * tmp1_126004;
            float y_126006 = tmp1_126004 * x_126005;
            float tmp2_126007 = 1.0F - y_126006;
            float x_126008 = tmp2_126007 * tmp2_126007;
            float tmp3_126009 = tmp2_126007 * x_126008;
            float w_j_126010 = defunc_0_f_res_125999 * tmp3_126009;
            float xw_j_126011 = x_j_126002 * w_j_126010;
            float x2w_j_126012 = x_j_126002 * xw_j_126011;
            float defunc_1_op_res_126013 = w_j_126010 + redout_125991;
            float defunc_1_op_res_126014 = xw_j_126011 + redout_125992;
            float defunc_1_op_res_126015 = x2w_j_126012 + redout_125993;
            float redout_tmp_126052 = defunc_1_op_res_126013;
            float redout_tmp_126053 = defunc_1_op_res_126014;
            float redout_tmp_126054 = defunc_1_op_res_126015;
            
            redout_125991 = redout_tmp_126052;
            redout_125992 = redout_tmp_126053;
            redout_125993 = redout_tmp_126054;
        }
        defunc_2_reduce_res_125913 = redout_125991;
        defunc_2_reduce_res_125914 = redout_125992;
        defunc_2_reduce_res_125915 = redout_125993;
        
        float x_125942 = defunc_2_reduce_res_125913 *
              defunc_2_reduce_res_125915;
        float y_125943 = defunc_2_reduce_res_125914 *
              defunc_2_reduce_res_125914;
        float y_125944 = x_125942 - y_125943;
        float det1_125945 = 1.0F / y_125944;
        float a11_125946 = defunc_2_reduce_res_125915 * det1_125945;
        float negate_arg_125947 = defunc_2_reduce_res_125914 * det1_125945;
        float b11_125948 = 0.0F - negate_arg_125947;
        float c11_125949 = defunc_2_reduce_res_125913 * det1_125945;
        float defunc_2_reduce_res_125950;
        float defunc_2_reduce_res_125951;
        float redout_126017;
        float redout_126018;
        
        redout_126017 = 0.0F;
        redout_126018 = 0.0F;
        for (int64_t i_126016 = 0; i_126016 < l_window_114522; i_126016++) {
            bool cond_126019 = sle64(x_118006, i_126016);
            float defunc_0_f_res_126020;
            
            if (cond_126019) {
                defunc_0_f_res_126020 = 0.0F;
            } else {
                int64_t i_126021 = add64(x_125908, i_126016);
                float x_126022 = ((float *) mem_121982.mem)[gtid_117908 *
                                                            n_114518 +
                                                            i_126021];
                float defunc_0_f_res_f_res_126023 = 1.0F + x_126022;
                
                defunc_0_f_res_126020 = defunc_0_f_res_f_res_126023;
            }
            
            float defunc_0_f_res_126024;
            
            if (cond_126019) {
                defunc_0_f_res_126024 = 0.0F;
            } else {
                int64_t i_126025 = add64(x_125908, i_126016);
                float x_126026 = ((float *) mem_122408.mem)[gtid_117908 *
                                                            n_114518 +
                                                            i_126025];
                
                defunc_0_f_res_126024 = x_126026;
            }
            
            float x_j_126027 = defunc_0_f_res_126020 - defunc_0_f_res_125912;
            float abs_res_126028 = (float) fabs(x_j_126027);
            float tmp1_126029 = abs_res_126028 / x_125909;
            float x_126030 = tmp1_126029 * tmp1_126029;
            float y_126031 = tmp1_126029 * x_126030;
            float tmp2_126032 = 1.0F - y_126031;
            float x_126033 = tmp2_126032 * tmp2_126032;
            float tmp3_126034 = tmp2_126032 * x_126033;
            float tmp4_126035 = defunc_0_f_res_126024 * tmp3_126034;
            float defunc_1_f_res_126036 = x_j_126027 * tmp4_126035;
            float defunc_0_f_res_126037;
            
            if (cond_126019) {
                defunc_0_f_res_126037 = 0.0F;
            } else {
                int64_t i_126038 = add64(x_125908, i_126016);
                float x_126039 = ((float *) mem_122404.mem)[gtid_117908 *
                                                            n_114518 +
                                                            i_126038];
                
                defunc_0_f_res_126037 = x_126039;
            }
            
            float x_126040 = a11_125946 * tmp4_126035;
            float y_126041 = b11_125948 * defunc_1_f_res_126036;
            float x_126042 = x_126040 + y_126041;
            float defunc_9_fit_fun_res_126043 = defunc_0_f_res_126037 *
                  x_126042;
            float x_126044 = b11_125948 * tmp4_126035;
            float y_126045 = c11_125949 * defunc_1_f_res_126036;
            float x_126046 = x_126044 + y_126045;
            float defunc_9_slope_fun_res_126047 = defunc_0_f_res_126037 *
                  x_126046;
            float defunc_1_op_res_126048 = defunc_9_fit_fun_res_126043 +
                  redout_126017;
            float defunc_1_op_res_126049 = defunc_9_slope_fun_res_126047 +
                  redout_126018;
            float redout_tmp_126055 = defunc_1_op_res_126048;
            float redout_tmp_126056 = defunc_1_op_res_126049;
            
            redout_126017 = redout_tmp_126055;
            redout_126018 = redout_tmp_126056;
        }
        defunc_2_reduce_res_125950 = redout_126017;
        defunc_2_reduce_res_125951 = redout_126018;
        ((float *) mem_122437.mem)[gtid_117910] = defunc_2_reduce_res_125950;
        ((float *) mem_122440.mem)[gtid_117910] = defunc_2_reduce_res_125951;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131370_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131370_end -
                 futhark_mc_segmap_parloop_131370_start;
        
        ctx->futhark_mc_segmap_parloop_131370_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131370_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131370_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131368(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117909 = tid;
    int num_tasks_125988 = info.nsubtasks;
    struct futhark_mc_task_131367 *futhark_mc_task_131367 =
                                  (struct futhark_mc_task_131367 *) args;
    struct futhark_context *ctx = futhark_mc_task_131367->ctx;
    uint64_t futhark_mc_segmap_task_131368_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131368_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131367->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131367->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131367->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131367->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131367->free_i_114594;
    int64_t gtid_117908 = futhark_mc_task_131367->free_gtid_117908;
    int64_t x_118006 = futhark_mc_task_131367->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131367->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131367->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131367->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131367->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131367->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122437 = {.desc ="mem_122437", .mem =
                                  futhark_mc_task_131367->free_mem_122437,
                                  .size =0, .references =NULL};
    struct memblock mem_122440 = {.desc ="mem_122440", .mem =
                                  futhark_mc_task_131367->free_mem_122440,
                                  .size =0, .references =NULL};
    int64_t iter_125989;
    struct futhark_mc_segmap_parloop_struct_131369
    futhark_mc_segmap_parloop_struct_131369;
    
    futhark_mc_segmap_parloop_struct_131369.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131369.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131369.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131369.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131369.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131369.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131369.free_gtid_117908 = gtid_117908;
    futhark_mc_segmap_parloop_struct_131369.free_x_118006 = x_118006;
    futhark_mc_segmap_parloop_struct_131369.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131369.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131369.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131369.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131369.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131369.free_mem_122437 = mem_122437.mem;
    futhark_mc_segmap_parloop_struct_131369.free_mem_122440 = mem_122440.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131370_task;
    
    futhark_mc_segmap_parloop_131370_task.name =
        "futhark_mc_segmap_parloop_131370";
    futhark_mc_segmap_parloop_131370_task.fn = futhark_mc_segmap_parloop_131370;
    futhark_mc_segmap_parloop_131370_task.args =
        &futhark_mc_segmap_parloop_struct_131369;
    futhark_mc_segmap_parloop_131370_task.iterations = iterations;
    futhark_mc_segmap_parloop_131370_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131370_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131370_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131370_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131370_task);
    
    if (futhark_mc_segmap_parloop_131370_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131370_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131370_total_end -
                 futhark_mc_segmap_parloop_131370_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131370_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131370_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131370_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131368_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131368_end -
                 futhark_mc_segmap_task_131368_start;
        
        ctx->futhark_mc_segmap_task_131368_runs[tid]++;
        ctx->futhark_mc_segmap_task_131368_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131368_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131372 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122437;
    char *free_mem_122440;
};
struct futhark_mc_task_131374 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_125827;
    float free_x_125828;
    float free_defunc_0_f_res_125831;
    float *retval_defunc_2_reduce_res_125832;
    float *retval_defunc_2_reduce_res_125833;
    float *retval_defunc_2_reduce_res_125834;
};
struct futhark_mc_segred_stage_1_parloop_struct_131379 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_125827;
    float free_x_125828;
    float free_defunc_0_f_res_125831;
    char *free_reduce_stage_1_tid_res_arr_mem_126124;
    char *free_reduce_stage_1_tid_res_arr_mem_126126;
    char *free_reduce_stage_1_tid_res_arr_mem_126128;
};
static int futhark_mc_segred_stage_1_parloop_131380(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117913,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131379
    *futhark_mc_segred_stage_1_parloop_struct_131379 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131379 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131379->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131380_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131380_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131379->free_n_114518;
    int64_t gtid_117908 =
            futhark_mc_segred_stage_1_parloop_struct_131379->free_gtid_117908;
    int64_t x_118006 =
            futhark_mc_segred_stage_1_parloop_struct_131379->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131379->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131379->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125827 =
            futhark_mc_segred_stage_1_parloop_struct_131379->free_x_125827;
    float x_125828 =
          futhark_mc_segred_stage_1_parloop_struct_131379->free_x_125828;
    float defunc_0_f_res_125831 =
          futhark_mc_segred_stage_1_parloop_struct_131379->free_defunc_0_f_res_125831;
    struct memblock reduce_stage_1_tid_res_arr_mem_126124 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126124",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131379->free_reduce_stage_1_tid_res_arr_mem_126124,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126126 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126126",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131379->free_reduce_stage_1_tid_res_arr_mem_126126,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126128 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126128",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131379->free_reduce_stage_1_tid_res_arr_mem_126128,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126130 = start;
    float x_126058;
    float x_126059;
    float x_126061;
    float x_126062;
    float x_126064;
    float x_126065;
    float local_acc_126131 = 0.0F;
    float local_acc_126132 = 0.0F;
    float local_acc_126133 = 0.0F;
    
    for (; iter_126130 < end; iter_126130++) {
        int64_t gtid_117914 = iter_126130;
        bool cond_126067 = sle64(x_118006, gtid_117914);
        float defunc_0_f_res_126068;
        
        if (cond_126067) {
            defunc_0_f_res_126068 = 0.0F;
        } else {
            int64_t i_126069 = add64(gtid_117914, x_125827);
            float x_126070 = ((float *) mem_121982.mem)[gtid_117908 * n_114518 +
                                                        i_126069];
            float defunc_0_f_res_f_res_126071 = 1.0F + x_126070;
            
            defunc_0_f_res_126068 = defunc_0_f_res_f_res_126071;
        }
        
        float defunc_0_f_res_126072;
        
        if (cond_126067) {
            defunc_0_f_res_126072 = 0.0F;
        } else {
            int64_t i_126073 = add64(gtid_117914, x_125827);
            float x_126074 = ((float *) mem_122408.mem)[gtid_117908 * n_114518 +
                                                        i_126073];
            
            defunc_0_f_res_126072 = x_126074;
        }
        
        float x_j_126075 = defunc_0_f_res_126068 - defunc_0_f_res_125831;
        float abs_res_126076 = (float) fabs(x_j_126075);
        float tmp1_126077 = abs_res_126076 / x_125828;
        float x_126078 = tmp1_126077 * tmp1_126077;
        float y_126079 = tmp1_126077 * x_126078;
        float tmp2_126080 = 1.0F - y_126079;
        float x_126081 = tmp2_126080 * tmp2_126080;
        float tmp3_126082 = tmp2_126080 * x_126081;
        float w_j_126083 = defunc_0_f_res_126072 * tmp3_126082;
        float xw_j_126084 = x_j_126075 * w_j_126083;
        float x2w_j_126085 = x_j_126075 * xw_j_126084;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126058 = local_acc_126131;
        }
        // Load next params
        {
            x_126059 = w_j_126083;
        }
        // Red body
        {
            float defunc_1_op_res_126060 = x_126058 + x_126059;
            
            local_acc_126131 = defunc_1_op_res_126060;
        }
        // Load accum params
        {
            x_126061 = local_acc_126132;
        }
        // Load next params
        {
            x_126062 = xw_j_126084;
        }
        // Red body
        {
            float defunc_1_op_res_126063 = x_126061 + x_126062;
            
            local_acc_126132 = defunc_1_op_res_126063;
        }
        // Load accum params
        {
            x_126064 = local_acc_126133;
        }
        // Load next params
        {
            x_126065 = x2w_j_126085;
        }
        // Red body
        {
            float defunc_1_op_res_126066 = x_126064 + x_126065;
            
            local_acc_126133 = defunc_1_op_res_126066;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126124.mem)[flat_tid_117913] =
        local_acc_126131;
    ((float *) reduce_stage_1_tid_res_arr_mem_126126.mem)[flat_tid_117913] =
        local_acc_126132;
    ((float *) reduce_stage_1_tid_res_arr_mem_126128.mem)[flat_tid_117913] =
        local_acc_126133;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131380_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131380_end -
                 futhark_mc_segred_stage_1_parloop_131380_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131380_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131380_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131380_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131375(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117913 = tid;
    int num_tasks_126123 = info.nsubtasks;
    struct futhark_mc_task_131374 *futhark_mc_task_131374 =
                                  (struct futhark_mc_task_131374 *) args;
    struct futhark_context *ctx = futhark_mc_task_131374->ctx;
    uint64_t futhark_mc_segred_task_131375_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131375_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131374->free_n_114518;
    int64_t gtid_117908 = futhark_mc_task_131374->free_gtid_117908;
    int64_t x_118006 = futhark_mc_task_131374->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131374->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131374->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125827 = futhark_mc_task_131374->free_x_125827;
    float x_125828 = futhark_mc_task_131374->free_x_125828;
    float defunc_0_f_res_125831 =
          futhark_mc_task_131374->free_defunc_0_f_res_125831;
    float defunc_2_reduce_res_125832 =
          *futhark_mc_task_131374->retval_defunc_2_reduce_res_125832;
    float defunc_2_reduce_res_125833 =
          *futhark_mc_task_131374->retval_defunc_2_reduce_res_125833;
    float defunc_2_reduce_res_125834 =
          *futhark_mc_task_131374->retval_defunc_2_reduce_res_125834;
    size_t reduce_stage_1_tid_res_arr_mem_126124_cached_sizze_131376 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126124 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126126_cached_sizze_131377 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126126 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126128_cached_sizze_131378 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126128 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126124_cached_sizze_131376 <
        (size_t) ((int64_t) 4 * num_tasks_126123)) {
        reduce_stage_1_tid_res_arr_mem_126124 =
            realloc(reduce_stage_1_tid_res_arr_mem_126124, (int64_t) 4 *
                    num_tasks_126123);
        reduce_stage_1_tid_res_arr_mem_126124_cached_sizze_131376 =
            (int64_t) 4 * num_tasks_126123;
    }
    if (reduce_stage_1_tid_res_arr_mem_126126_cached_sizze_131377 <
        (size_t) ((int64_t) 4 * num_tasks_126123)) {
        reduce_stage_1_tid_res_arr_mem_126126 =
            realloc(reduce_stage_1_tid_res_arr_mem_126126, (int64_t) 4 *
                    num_tasks_126123);
        reduce_stage_1_tid_res_arr_mem_126126_cached_sizze_131377 =
            (int64_t) 4 * num_tasks_126123;
    }
    if (reduce_stage_1_tid_res_arr_mem_126128_cached_sizze_131378 <
        (size_t) ((int64_t) 4 * num_tasks_126123)) {
        reduce_stage_1_tid_res_arr_mem_126128 =
            realloc(reduce_stage_1_tid_res_arr_mem_126128, (int64_t) 4 *
                    num_tasks_126123);
        reduce_stage_1_tid_res_arr_mem_126128_cached_sizze_131378 =
            (int64_t) 4 * num_tasks_126123;
    }
    
    int64_t iter_126130;
    struct futhark_mc_segred_stage_1_parloop_struct_131379
    futhark_mc_segred_stage_1_parloop_struct_131379;
    
    futhark_mc_segred_stage_1_parloop_struct_131379.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_gtid_117908 =
        gtid_117908;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_x_118006 = x_118006;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_x_125827 = x_125827;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_x_125828 = x_125828;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_defunc_0_f_res_125831 =
        defunc_0_f_res_125831;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_reduce_stage_1_tid_res_arr_mem_126124 =
        reduce_stage_1_tid_res_arr_mem_126124;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_reduce_stage_1_tid_res_arr_mem_126126 =
        reduce_stage_1_tid_res_arr_mem_126126;
    futhark_mc_segred_stage_1_parloop_struct_131379.free_reduce_stage_1_tid_res_arr_mem_126128 =
        reduce_stage_1_tid_res_arr_mem_126128;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131380_task;
    
    futhark_mc_segred_stage_1_parloop_131380_task.name =
        "futhark_mc_segred_stage_1_parloop_131380";
    futhark_mc_segred_stage_1_parloop_131380_task.fn =
        futhark_mc_segred_stage_1_parloop_131380;
    futhark_mc_segred_stage_1_parloop_131380_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131379;
    futhark_mc_segred_stage_1_parloop_131380_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131380_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131380_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131380_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131380_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131380_task);
    
    if (futhark_mc_segred_stage_1_parloop_131380_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131380_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131380_total_end -
                 futhark_mc_segred_stage_1_parloop_131380_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131380_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131380_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131380_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125832 = 0.0F;
        defunc_2_reduce_res_125833 = 0.0F;
        defunc_2_reduce_res_125834 = 0.0F;
    }
    
    float x_126134;
    float x_126135;
    float x_126137;
    float x_126138;
    float x_126140;
    float x_126141;
    
    for (int32_t i_126143 = 0; i_126143 < num_tasks_126123; i_126143++) {
        flat_tid_117913 = i_126143;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126134 = defunc_2_reduce_res_125832;
            }
            // load next params
            {
                x_126135 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126124)[flat_tid_117913];
            }
            // red body
            {
                float defunc_1_op_res_126136 = x_126134 + x_126135;
                
                defunc_2_reduce_res_125832 = defunc_1_op_res_126136;
            }
            // load acc params
            {
                x_126137 = defunc_2_reduce_res_125833;
            }
            // load next params
            {
                x_126138 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126126)[flat_tid_117913];
            }
            // red body
            {
                float defunc_1_op_res_126139 = x_126137 + x_126138;
                
                defunc_2_reduce_res_125833 = defunc_1_op_res_126139;
            }
            // load acc params
            {
                x_126140 = defunc_2_reduce_res_125834;
            }
            // load next params
            {
                x_126141 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126128)[flat_tid_117913];
            }
            // red body
            {
                float defunc_1_op_res_126142 = x_126140 + x_126141;
                
                defunc_2_reduce_res_125834 = defunc_1_op_res_126142;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126124);
    free(reduce_stage_1_tid_res_arr_mem_126126);
    free(reduce_stage_1_tid_res_arr_mem_126128);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131375_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131375_end -
                 futhark_mc_segred_task_131375_start;
        
        ctx->futhark_mc_segred_task_131375_runs[tid]++;
        ctx->futhark_mc_segred_task_131375_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131375_iter[tid] += iterations;
    }
    *futhark_mc_task_131374->retval_defunc_2_reduce_res_125832 =
        defunc_2_reduce_res_125832;
    *futhark_mc_task_131374->retval_defunc_2_reduce_res_125833 =
        defunc_2_reduce_res_125833;
    *futhark_mc_task_131374->retval_defunc_2_reduce_res_125834 =
        defunc_2_reduce_res_125834;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131381 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_x_125827;
    float free_x_125828;
    float free_defunc_0_f_res_125831;
    float free_a11_125867;
    float free_b11_125869;
    float free_c11_125870;
    float *retval_defunc_2_reduce_res_125871;
    float *retval_defunc_2_reduce_res_125872;
};
struct futhark_mc_segred_stage_1_parloop_struct_131385 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_117908;
    int64_t free_x_118006;
    char *free_mem_121982;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_x_125827;
    float free_x_125828;
    float free_defunc_0_f_res_125831;
    float free_a11_125867;
    float free_b11_125869;
    float free_c11_125870;
    char *free_reduce_stage_1_tid_res_arr_mem_126145;
    char *free_reduce_stage_1_tid_res_arr_mem_126147;
};
static int futhark_mc_segred_stage_1_parloop_131386(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117915,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131385
    *futhark_mc_segred_stage_1_parloop_struct_131385 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131385 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131385->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131386_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131386_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131385->free_n_114518;
    int64_t gtid_117908 =
            futhark_mc_segred_stage_1_parloop_struct_131385->free_gtid_117908;
    int64_t x_118006 =
            futhark_mc_segred_stage_1_parloop_struct_131385->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131385->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131385->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131385->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125827 =
            futhark_mc_segred_stage_1_parloop_struct_131385->free_x_125827;
    float x_125828 =
          futhark_mc_segred_stage_1_parloop_struct_131385->free_x_125828;
    float defunc_0_f_res_125831 =
          futhark_mc_segred_stage_1_parloop_struct_131385->free_defunc_0_f_res_125831;
    float a11_125867 =
          futhark_mc_segred_stage_1_parloop_struct_131385->free_a11_125867;
    float b11_125869 =
          futhark_mc_segred_stage_1_parloop_struct_131385->free_b11_125869;
    float c11_125870 =
          futhark_mc_segred_stage_1_parloop_struct_131385->free_c11_125870;
    struct memblock reduce_stage_1_tid_res_arr_mem_126145 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126145",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131385->free_reduce_stage_1_tid_res_arr_mem_126145,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126147 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126147",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131385->free_reduce_stage_1_tid_res_arr_mem_126147,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126149 = start;
    float x_126086;
    float x_126087;
    float x_126089;
    float x_126090;
    float local_acc_126150 = 0.0F;
    float local_acc_126151 = 0.0F;
    
    for (; iter_126149 < end; iter_126149++) {
        int64_t gtid_117916 = iter_126149;
        bool cond_126092 = sle64(x_118006, gtid_117916);
        float defunc_0_f_res_126093;
        
        if (cond_126092) {
            defunc_0_f_res_126093 = 0.0F;
        } else {
            int64_t i_126094 = add64(gtid_117916, x_125827);
            float x_126095 = ((float *) mem_121982.mem)[gtid_117908 * n_114518 +
                                                        i_126094];
            float defunc_0_f_res_f_res_126096 = 1.0F + x_126095;
            
            defunc_0_f_res_126093 = defunc_0_f_res_f_res_126096;
        }
        
        float defunc_0_f_res_126097;
        
        if (cond_126092) {
            defunc_0_f_res_126097 = 0.0F;
        } else {
            int64_t i_126098 = add64(gtid_117916, x_125827);
            float x_126099 = ((float *) mem_122408.mem)[gtid_117908 * n_114518 +
                                                        i_126098];
            
            defunc_0_f_res_126097 = x_126099;
        }
        
        float x_j_126100 = defunc_0_f_res_126093 - defunc_0_f_res_125831;
        float abs_res_126101 = (float) fabs(x_j_126100);
        float tmp1_126102 = abs_res_126101 / x_125828;
        float x_126103 = tmp1_126102 * tmp1_126102;
        float y_126104 = tmp1_126102 * x_126103;
        float tmp2_126105 = 1.0F - y_126104;
        float x_126106 = tmp2_126105 * tmp2_126105;
        float tmp3_126107 = tmp2_126105 * x_126106;
        float tmp4_126108 = defunc_0_f_res_126097 * tmp3_126107;
        float defunc_1_f_res_126109 = x_j_126100 * tmp4_126108;
        float defunc_0_f_res_126110;
        
        if (cond_126092) {
            defunc_0_f_res_126110 = 0.0F;
        } else {
            int64_t i_126111 = add64(gtid_117916, x_125827);
            float x_126112 = ((float *) mem_122404.mem)[gtid_117908 * n_114518 +
                                                        i_126111];
            
            defunc_0_f_res_126110 = x_126112;
        }
        
        float x_126113 = a11_125867 * tmp4_126108;
        float y_126114 = b11_125869 * defunc_1_f_res_126109;
        float x_126115 = x_126113 + y_126114;
        float defunc_9_fit_fun_res_126116 = defunc_0_f_res_126110 * x_126115;
        float x_126117 = b11_125869 * tmp4_126108;
        float y_126118 = c11_125870 * defunc_1_f_res_126109;
        float x_126119 = x_126117 + y_126118;
        float defunc_9_slope_fun_res_126120 = defunc_0_f_res_126110 * x_126119;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126086 = local_acc_126150;
        }
        // Load next params
        {
            x_126087 = defunc_9_fit_fun_res_126116;
        }
        // Red body
        {
            float defunc_1_op_res_126088 = x_126086 + x_126087;
            
            local_acc_126150 = defunc_1_op_res_126088;
        }
        // Load accum params
        {
            x_126089 = local_acc_126151;
        }
        // Load next params
        {
            x_126090 = defunc_9_slope_fun_res_126120;
        }
        // Red body
        {
            float defunc_1_op_res_126091 = x_126089 + x_126090;
            
            local_acc_126151 = defunc_1_op_res_126091;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126145.mem)[flat_tid_117915] =
        local_acc_126150;
    ((float *) reduce_stage_1_tid_res_arr_mem_126147.mem)[flat_tid_117915] =
        local_acc_126151;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131386_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131386_end -
                 futhark_mc_segred_stage_1_parloop_131386_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131386_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131386_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131386_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131382(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117915 = tid;
    int num_tasks_126144 = info.nsubtasks;
    struct futhark_mc_task_131381 *futhark_mc_task_131381 =
                                  (struct futhark_mc_task_131381 *) args;
    struct futhark_context *ctx = futhark_mc_task_131381->ctx;
    uint64_t futhark_mc_segred_task_131382_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131382_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131381->free_n_114518;
    int64_t gtid_117908 = futhark_mc_task_131381->free_gtid_117908;
    int64_t x_118006 = futhark_mc_task_131381->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131381->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131381->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131381->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_125827 = futhark_mc_task_131381->free_x_125827;
    float x_125828 = futhark_mc_task_131381->free_x_125828;
    float defunc_0_f_res_125831 =
          futhark_mc_task_131381->free_defunc_0_f_res_125831;
    float a11_125867 = futhark_mc_task_131381->free_a11_125867;
    float b11_125869 = futhark_mc_task_131381->free_b11_125869;
    float c11_125870 = futhark_mc_task_131381->free_c11_125870;
    float defunc_2_reduce_res_125871 =
          *futhark_mc_task_131381->retval_defunc_2_reduce_res_125871;
    float defunc_2_reduce_res_125872 =
          *futhark_mc_task_131381->retval_defunc_2_reduce_res_125872;
    size_t reduce_stage_1_tid_res_arr_mem_126145_cached_sizze_131383 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126145 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126147_cached_sizze_131384 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126147 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126145_cached_sizze_131383 <
        (size_t) ((int64_t) 4 * num_tasks_126144)) {
        reduce_stage_1_tid_res_arr_mem_126145 =
            realloc(reduce_stage_1_tid_res_arr_mem_126145, (int64_t) 4 *
                    num_tasks_126144);
        reduce_stage_1_tid_res_arr_mem_126145_cached_sizze_131383 =
            (int64_t) 4 * num_tasks_126144;
    }
    if (reduce_stage_1_tid_res_arr_mem_126147_cached_sizze_131384 <
        (size_t) ((int64_t) 4 * num_tasks_126144)) {
        reduce_stage_1_tid_res_arr_mem_126147 =
            realloc(reduce_stage_1_tid_res_arr_mem_126147, (int64_t) 4 *
                    num_tasks_126144);
        reduce_stage_1_tid_res_arr_mem_126147_cached_sizze_131384 =
            (int64_t) 4 * num_tasks_126144;
    }
    
    int64_t iter_126149;
    struct futhark_mc_segred_stage_1_parloop_struct_131385
    futhark_mc_segred_stage_1_parloop_struct_131385;
    
    futhark_mc_segred_stage_1_parloop_struct_131385.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_gtid_117908 =
        gtid_117908;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_x_118006 = x_118006;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_mem_122404 =
        mem_122404.mem;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_x_125827 = x_125827;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_x_125828 = x_125828;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_defunc_0_f_res_125831 =
        defunc_0_f_res_125831;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_a11_125867 =
        a11_125867;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_b11_125869 =
        b11_125869;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_c11_125870 =
        c11_125870;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_reduce_stage_1_tid_res_arr_mem_126145 =
        reduce_stage_1_tid_res_arr_mem_126145;
    futhark_mc_segred_stage_1_parloop_struct_131385.free_reduce_stage_1_tid_res_arr_mem_126147 =
        reduce_stage_1_tid_res_arr_mem_126147;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131386_task;
    
    futhark_mc_segred_stage_1_parloop_131386_task.name =
        "futhark_mc_segred_stage_1_parloop_131386";
    futhark_mc_segred_stage_1_parloop_131386_task.fn =
        futhark_mc_segred_stage_1_parloop_131386;
    futhark_mc_segred_stage_1_parloop_131386_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131385;
    futhark_mc_segred_stage_1_parloop_131386_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131386_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131386_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131386_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131386_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131386_task);
    
    if (futhark_mc_segred_stage_1_parloop_131386_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131386_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131386_total_end -
                 futhark_mc_segred_stage_1_parloop_131386_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131386_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131386_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131386_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125871 = 0.0F;
        defunc_2_reduce_res_125872 = 0.0F;
    }
    
    float x_126152;
    float x_126153;
    float x_126155;
    float x_126156;
    
    for (int32_t i_126158 = 0; i_126158 < num_tasks_126144; i_126158++) {
        flat_tid_117915 = i_126158;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126152 = defunc_2_reduce_res_125871;
            }
            // load next params
            {
                x_126153 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126145)[flat_tid_117915];
            }
            // red body
            {
                float defunc_1_op_res_126154 = x_126152 + x_126153;
                
                defunc_2_reduce_res_125871 = defunc_1_op_res_126154;
            }
            // load acc params
            {
                x_126155 = defunc_2_reduce_res_125872;
            }
            // load next params
            {
                x_126156 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126147)[flat_tid_117915];
            }
            // red body
            {
                float defunc_1_op_res_126157 = x_126155 + x_126156;
                
                defunc_2_reduce_res_125872 = defunc_1_op_res_126157;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126145);
    free(reduce_stage_1_tid_res_arr_mem_126147);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131382_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131382_end -
                 futhark_mc_segred_task_131382_start;
        
        ctx->futhark_mc_segred_task_131382_runs[tid]++;
        ctx->futhark_mc_segred_task_131382_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131382_iter[tid] += iterations;
    }
    *futhark_mc_task_131381->retval_defunc_2_reduce_res_125871 =
        defunc_2_reduce_res_125871;
    *futhark_mc_task_131381->retval_defunc_2_reduce_res_125872 =
        defunc_2_reduce_res_125872;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131373(void *args, int64_t start,
                                            int64_t end, int flat_tid_117911,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131372
    *futhark_mc_segmap_parloop_struct_131372 =
    (struct futhark_mc_segmap_parloop_struct_131372 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131372->ctx;
    uint64_t futhark_mc_segmap_parloop_131373_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131373_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131372->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131372->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131372->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131372->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131372->free_i_114594;
    int64_t gtid_117908 =
            futhark_mc_segmap_parloop_struct_131372->free_gtid_117908;
    int64_t x_118006 = futhark_mc_segmap_parloop_struct_131372->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122437 = {.desc ="mem_122437", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_122437,
                                  .size =0, .references =NULL};
    struct memblock mem_122440 = {.desc ="mem_122440", .mem =
                                  futhark_mc_segmap_parloop_struct_131372->free_mem_122440,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126057 = start;
    
    for (; iter_126057 < end; iter_126057++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126121 = l_n_m_114568;
        int64_t gtid_117912 = iter_126057;
        int64_t remnant_126122 = iter_126057 - gtid_117912;
        int64_t x_125827 = ((int64_t *) mem_122102.mem)[gtid_117908 *
                                                        l_n_m_114568 +
                                                        gtid_117912];
        float x_125828 = ((float *) mem_122106.mem)[gtid_117908 * l_n_m_114568 +
                                                    gtid_117912];
        int64_t min_arg_125829 = mul64(t_jump_114525, gtid_117912);
        int64_t min_res_125830 = smin64(i_114594, min_arg_125829);
        float defunc_0_f_res_125831 = sitofp_i64_f32(min_res_125830);
        float defunc_2_reduce_res_125832;
        float defunc_2_reduce_res_125833;
        float defunc_2_reduce_res_125834;
        int64_t flat_tid_117913 = (int64_t) 0;
        int32_t num_tasks_126123;
        struct futhark_mc_task_131374 futhark_mc_task_131374;
        
        futhark_mc_task_131374.ctx = ctx;
        futhark_mc_task_131374.free_n_114518 = n_114518;
        futhark_mc_task_131374.free_gtid_117908 = gtid_117908;
        futhark_mc_task_131374.free_x_118006 = x_118006;
        futhark_mc_task_131374.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131374.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131374.free_x_125827 = x_125827;
        futhark_mc_task_131374.free_x_125828 = x_125828;
        futhark_mc_task_131374.free_defunc_0_f_res_125831 =
            defunc_0_f_res_125831;
        futhark_mc_task_131374.retval_defunc_2_reduce_res_125832 =
            &defunc_2_reduce_res_125832;
        futhark_mc_task_131374.retval_defunc_2_reduce_res_125833 =
            &defunc_2_reduce_res_125833;
        futhark_mc_task_131374.retval_defunc_2_reduce_res_125834 =
            &defunc_2_reduce_res_125834;
        
        struct scheduler_segop futhark_mc_task_131374_task;
        
        futhark_mc_task_131374_task.args = &futhark_mc_task_131374;
        futhark_mc_task_131374_task.top_level_fn =
            futhark_mc_segred_task_131375;
        futhark_mc_task_131374_task.name = "futhark_mc_segred_task_131375";
        futhark_mc_task_131374_task.iterations = l_window_114522;
        futhark_mc_task_131374_task.task_time =
            &ctx->futhark_mc_segred_task_131375_total_time;
        futhark_mc_task_131374_task.task_iter =
            &ctx->futhark_mc_segred_task_131375_total_iter;
        futhark_mc_task_131374_task.sched = STATIC;
        futhark_mc_task_131374_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131375_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131374_task);
        
        if (futhark_mc_segred_task_131375_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_125863 = defunc_2_reduce_res_125832 *
              defunc_2_reduce_res_125834;
        float y_125864 = defunc_2_reduce_res_125833 *
              defunc_2_reduce_res_125833;
        float y_125865 = x_125863 - y_125864;
        float det1_125866 = 1.0F / y_125865;
        float a11_125867 = defunc_2_reduce_res_125834 * det1_125866;
        float negate_arg_125868 = defunc_2_reduce_res_125833 * det1_125866;
        float b11_125869 = 0.0F - negate_arg_125868;
        float c11_125870 = defunc_2_reduce_res_125832 * det1_125866;
        float defunc_2_reduce_res_125871;
        float defunc_2_reduce_res_125872;
        int64_t flat_tid_117915 = (int64_t) 0;
        int32_t num_tasks_126144;
        struct futhark_mc_task_131381 futhark_mc_task_131381;
        
        futhark_mc_task_131381.ctx = ctx;
        futhark_mc_task_131381.free_n_114518 = n_114518;
        futhark_mc_task_131381.free_gtid_117908 = gtid_117908;
        futhark_mc_task_131381.free_x_118006 = x_118006;
        futhark_mc_task_131381.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131381.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131381.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131381.free_x_125827 = x_125827;
        futhark_mc_task_131381.free_x_125828 = x_125828;
        futhark_mc_task_131381.free_defunc_0_f_res_125831 =
            defunc_0_f_res_125831;
        futhark_mc_task_131381.free_a11_125867 = a11_125867;
        futhark_mc_task_131381.free_b11_125869 = b11_125869;
        futhark_mc_task_131381.free_c11_125870 = c11_125870;
        futhark_mc_task_131381.retval_defunc_2_reduce_res_125871 =
            &defunc_2_reduce_res_125871;
        futhark_mc_task_131381.retval_defunc_2_reduce_res_125872 =
            &defunc_2_reduce_res_125872;
        
        struct scheduler_segop futhark_mc_task_131381_task;
        
        futhark_mc_task_131381_task.args = &futhark_mc_task_131381;
        futhark_mc_task_131381_task.top_level_fn =
            futhark_mc_segred_task_131382;
        futhark_mc_task_131381_task.name = "futhark_mc_segred_task_131382";
        futhark_mc_task_131381_task.iterations = l_window_114522;
        futhark_mc_task_131381_task.task_time =
            &ctx->futhark_mc_segred_task_131382_total_time;
        futhark_mc_task_131381_task.task_iter =
            &ctx->futhark_mc_segred_task_131382_total_iter;
        futhark_mc_task_131381_task.sched = STATIC;
        futhark_mc_task_131381_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131382_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131381_task);
        
        if (futhark_mc_segred_task_131382_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122437.mem)[gtid_117912] = defunc_2_reduce_res_125871;
        ((float *) mem_122440.mem)[gtid_117912] = defunc_2_reduce_res_125872;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131373_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131373_end -
                 futhark_mc_segmap_parloop_131373_start;
        
        ctx->futhark_mc_segmap_parloop_131373_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131373_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131373_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131371(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117911 = tid;
    int num_tasks_125988 = info.nsubtasks;
    struct futhark_mc_task_131367 *futhark_mc_task_131367 =
                                  (struct futhark_mc_task_131367 *) args;
    struct futhark_context *ctx = futhark_mc_task_131367->ctx;
    uint64_t futhark_mc_segmap_nested_task_131371_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131371_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131367->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131367->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131367->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131367->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131367->free_i_114594;
    int64_t gtid_117908 = futhark_mc_task_131367->free_gtid_117908;
    int64_t x_118006 = futhark_mc_task_131367->free_x_118006;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131367->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131367->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131367->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131367->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131367->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122437 = {.desc ="mem_122437", .mem =
                                  futhark_mc_task_131367->free_mem_122437,
                                  .size =0, .references =NULL};
    struct memblock mem_122440 = {.desc ="mem_122440", .mem =
                                  futhark_mc_task_131367->free_mem_122440,
                                  .size =0, .references =NULL};
    int64_t iter_126057;
    struct futhark_mc_segmap_parloop_struct_131372
    futhark_mc_segmap_parloop_struct_131372;
    
    futhark_mc_segmap_parloop_struct_131372.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131372.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131372.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131372.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131372.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131372.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131372.free_gtid_117908 = gtid_117908;
    futhark_mc_segmap_parloop_struct_131372.free_x_118006 = x_118006;
    futhark_mc_segmap_parloop_struct_131372.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131372.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131372.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131372.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131372.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131372.free_mem_122437 = mem_122437.mem;
    futhark_mc_segmap_parloop_struct_131372.free_mem_122440 = mem_122440.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131373_task;
    
    futhark_mc_segmap_parloop_131373_task.name =
        "futhark_mc_segmap_parloop_131373";
    futhark_mc_segmap_parloop_131373_task.fn = futhark_mc_segmap_parloop_131373;
    futhark_mc_segmap_parloop_131373_task.args =
        &futhark_mc_segmap_parloop_struct_131372;
    futhark_mc_segmap_parloop_131373_task.iterations = iterations;
    futhark_mc_segmap_parloop_131373_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131373_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131373_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131373_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131373_task);
    
    if (futhark_mc_segmap_parloop_131373_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131373_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131373_total_end -
                 futhark_mc_segmap_parloop_131373_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131373_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131373_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131373_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131371_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131371_end -
                 futhark_mc_segmap_nested_task_131371_start;
        
        ctx->futhark_mc_segmap_nested_task_131371_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131371_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131371_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131364(void *args, int64_t start,
                                            int64_t end, int flat_tid_117907,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131363
    *futhark_mc_segmap_parloop_struct_131363 =
    (struct futhark_mc_segmap_parloop_struct_131363 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131363->ctx;
    uint64_t futhark_mc_segmap_parloop_131364_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131364_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131363->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131363->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131363->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131363->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131363->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131363->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131363->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122474 = {.desc ="mem_122474", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_122474,
                                  .size =0, .references =NULL};
    struct memblock mem_122478 = {.desc ="mem_122478", .mem =
                                  futhark_mc_segmap_parloop_struct_131363->free_mem_122478,
                                  .size =0, .references =NULL};
    size_t mem_122437_cached_sizze_131365 = 0;
    char *mem_122437 = NULL;
    size_t mem_122440_cached_sizze_131366 = 0;
    char *mem_122440 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125826 = start;
    
    if (mem_122437_cached_sizze_131365 < (size_t) bytes_122033) {
        mem_122437 = realloc(mem_122437, bytes_122033);
        mem_122437_cached_sizze_131365 = bytes_122033;
    }
    if (mem_122440_cached_sizze_131366 < (size_t) bytes_122033) {
        mem_122440 = realloc(mem_122440, bytes_122033);
        mem_122440_cached_sizze_131366 = bytes_122033;
    }
    for (; iter_125826 < end; iter_125826++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125986 = m_114517;
        int64_t gtid_117908 = iter_125826;
        int64_t remnant_125987 = iter_125826 - gtid_117908;
        int64_t x_118006 = ((int64_t *) mem_121960.mem)[gtid_117908];
        int64_t flat_tid_117909 = (int64_t) 0;
        int32_t num_tasks_125988;
        int64_t flat_tid_117911 = (int64_t) 0;
        struct futhark_mc_task_131367 futhark_mc_task_131367;
        
        futhark_mc_task_131367.ctx = ctx;
        futhark_mc_task_131367.free_n_114518 = n_114518;
        futhark_mc_task_131367.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131367.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131367.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131367.free_i_114594 = i_114594;
        futhark_mc_task_131367.free_gtid_117908 = gtid_117908;
        futhark_mc_task_131367.free_x_118006 = x_118006;
        futhark_mc_task_131367.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131367.free_mem_122102 = mem_122102.mem;
        futhark_mc_task_131367.free_mem_122106 = mem_122106.mem;
        futhark_mc_task_131367.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131367.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131367.free_mem_122437 = mem_122437;
        futhark_mc_task_131367.free_mem_122440 = mem_122440;
        
        struct scheduler_segop futhark_mc_task_131367_task;
        
        futhark_mc_task_131367_task.args = &futhark_mc_task_131367;
        futhark_mc_task_131367_task.top_level_fn =
            futhark_mc_segmap_task_131368;
        futhark_mc_task_131367_task.name = "futhark_mc_segmap_task_131368";
        futhark_mc_task_131367_task.iterations = l_n_m_114568;
        futhark_mc_task_131367_task.task_time =
            &ctx->futhark_mc_segmap_task_131368_total_time;
        futhark_mc_task_131367_task.task_iter =
            &ctx->futhark_mc_segmap_task_131368_total_iter;
        futhark_mc_task_131367_task.sched = STATIC;
        futhark_mc_task_131367_task.nested_fn =
            futhark_mc_segmap_nested_task_131371;
        
        int futhark_mc_segmap_task_131368_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131367_task);
        
        if (futhark_mc_segmap_task_131368_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122474.mem + gtid_117908 * l_n_m_114568 * (int64_t) 4,
                mem_122437 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122478.mem + gtid_117908 * l_n_m_114568 * (int64_t) 4,
                mem_122440 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122437);
    free(mem_122440);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131364_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131364_end -
                 futhark_mc_segmap_parloop_131364_start;
        
        ctx->futhark_mc_segmap_parloop_131364_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131364_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131364_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131362(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117907 = tid;
    int num_tasks_125732 = info.nsubtasks;
    struct futhark_mc_task_131356 *futhark_mc_task_131356 =
                                  (struct futhark_mc_task_131356 *) args;
    struct futhark_context *ctx = futhark_mc_task_131356->ctx;
    uint64_t futhark_mc_segmap_nested_task_131362_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131362_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131356->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131356->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131356->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131356->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131356->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131356->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131356->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131356->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131356->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131356->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131356->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131356->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131356->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122474 = {.desc ="mem_122474", .mem =
                                  futhark_mc_task_131356->free_mem_122474,
                                  .size =0, .references =NULL};
    struct memblock mem_122478 = {.desc ="mem_122478", .mem =
                                  futhark_mc_task_131356->free_mem_122478,
                                  .size =0, .references =NULL};
    int64_t iter_125826;
    struct futhark_mc_segmap_parloop_struct_131363
    futhark_mc_segmap_parloop_struct_131363;
    
    futhark_mc_segmap_parloop_struct_131363.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131363.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131363.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131363.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131363.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131363.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131363.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131363.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131363.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131363.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131363.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131363.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131363.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131363.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131363.free_mem_122474 = mem_122474.mem;
    futhark_mc_segmap_parloop_struct_131363.free_mem_122478 = mem_122478.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131364_task;
    
    futhark_mc_segmap_parloop_131364_task.name =
        "futhark_mc_segmap_parloop_131364";
    futhark_mc_segmap_parloop_131364_task.fn = futhark_mc_segmap_parloop_131364;
    futhark_mc_segmap_parloop_131364_task.args =
        &futhark_mc_segmap_parloop_struct_131363;
    futhark_mc_segmap_parloop_131364_task.iterations = iterations;
    futhark_mc_segmap_parloop_131364_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131364_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131364_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131364_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131364_task);
    
    if (futhark_mc_segmap_parloop_131364_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131364_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131364_total_end -
                 futhark_mc_segmap_parloop_131364_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131364_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131364_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131364_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131362_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131362_end -
                 futhark_mc_segmap_nested_task_131362_start;
        
        ctx->futhark_mc_segmap_nested_task_131362_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131362_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131362_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131387 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122518;
    char *free_mem_122522;
};
struct futhark_mc_segmap_parloop_struct_131389 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122518;
    char *free_mem_122522;
};
static int futhark_mc_segmap_parloop_131390(void *args, int64_t start,
                                            int64_t end, int flat_tid_118177,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131389
    *futhark_mc_segmap_parloop_struct_131389 =
    (struct futhark_mc_segmap_parloop_struct_131389 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131389->ctx;
    uint64_t futhark_mc_segmap_parloop_131390_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131390_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131389->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131389->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131389->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131389->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131389->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131389->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131389->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122518 = {.desc ="mem_122518", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_122518,
                                  .size =0, .references =NULL};
    struct memblock mem_122522 = {.desc ="mem_122522", .mem =
                                  futhark_mc_segmap_parloop_struct_131389->free_mem_122522,
                                  .size =0, .references =NULL};
    size_t mem_122487_cached_sizze_131391 = 0;
    char *mem_122487 = NULL;
    size_t mem_122490_cached_sizze_131392 = 0;
    char *mem_122490 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126160 = start;
    
    if (mem_122487_cached_sizze_131391 < (size_t) bytes_122033) {
        mem_122487 = realloc(mem_122487, bytes_122033);
        mem_122487_cached_sizze_131391 = bytes_122033;
    }
    if (mem_122490_cached_sizze_131392 < (size_t) bytes_122033) {
        mem_122490 = realloc(mem_122490, bytes_122033);
        mem_122490_cached_sizze_131392 = bytes_122033;
    }
    for (; iter_126160 < end; iter_126160++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126274 = m_114517;
        int64_t gtid_118178 = iter_126160;
        int64_t remnant_126275 = iter_126160 - gtid_118178;
        int64_t x_115344 = ((int64_t *) mem_121960.mem)[gtid_118178];
        
        for (int64_t i_126161 = 0; i_126161 < l_n_m_114568; i_126161++) {
            int64_t x_126164 = ((int64_t *) mem_122102.mem)[gtid_118178 *
                                                            l_n_m_114568 +
                                                            i_126161];
            float x_126165 = ((float *) mem_122106.mem)[gtid_118178 *
                                                        l_n_m_114568 +
                                                        i_126161];
            int64_t min_arg_126166 = mul64(t_jump_114525, i_126161);
            int64_t min_res_126167 = smin64(i_114594, min_arg_126166);
            float defunc_0_f_res_126168 = sitofp_i64_f32(min_res_126167);
            float defunc_2_reduce_res_126169;
            float defunc_2_reduce_res_126170;
            float defunc_2_reduce_res_126171;
            float defunc_2_reduce_res_126172;
            float defunc_2_reduce_res_126173;
            float redout_126175;
            float redout_126176;
            float redout_126177;
            float redout_126178;
            float redout_126179;
            
            redout_126175 = 0.0F;
            redout_126176 = 0.0F;
            redout_126177 = 0.0F;
            redout_126178 = 0.0F;
            redout_126179 = 0.0F;
            for (int64_t i_126174 = 0; i_126174 < l_window_114522; i_126174++) {
                bool cond_126180 = sle64(x_115344, i_126174);
                float defunc_0_f_res_126181;
                
                if (cond_126180) {
                    defunc_0_f_res_126181 = 0.0F;
                } else {
                    int64_t i_126182 = add64(x_126164, i_126174);
                    float x_126183 = ((float *) mem_121982.mem)[gtid_118178 *
                                                                n_114518 +
                                                                i_126182];
                    float defunc_0_f_res_f_res_126184 = 1.0F + x_126183;
                    
                    defunc_0_f_res_126181 = defunc_0_f_res_f_res_126184;
                }
                
                float defunc_0_f_res_126185;
                
                if (cond_126180) {
                    defunc_0_f_res_126185 = 0.0F;
                } else {
                    int64_t i_126186 = add64(x_126164, i_126174);
                    float x_126187 = ((float *) mem_122408.mem)[gtid_118178 *
                                                                n_114518 +
                                                                i_126186];
                    
                    defunc_0_f_res_126185 = x_126187;
                }
                
                float x_j_126188 = defunc_0_f_res_126181 -
                      defunc_0_f_res_126168;
                float abs_res_126189 = (float) fabs(x_j_126188);
                float tmp1_126190 = abs_res_126189 / x_126165;
                float x_126191 = tmp1_126190 * tmp1_126190;
                float y_126192 = tmp1_126190 * x_126191;
                float tmp2_126193 = 1.0F - y_126192;
                float x_126194 = tmp2_126193 * tmp2_126193;
                float tmp3_126195 = tmp2_126193 * x_126194;
                float w_j_126196 = defunc_0_f_res_126185 * tmp3_126195;
                float xw_j_126197 = x_j_126188 * w_j_126196;
                float x2w_j_126198 = x_j_126188 * xw_j_126197;
                float x3w_j_126199 = x_j_126188 * x2w_j_126198;
                float x4w_j_126200 = x_j_126188 * x3w_j_126199;
                float defunc_1_op_res_126201 = w_j_126196 + redout_126175;
                float defunc_1_op_res_126202 = xw_j_126197 + redout_126176;
                float defunc_1_op_res_126203 = x2w_j_126198 + redout_126177;
                float defunc_1_op_res_126204 = x3w_j_126199 + redout_126178;
                float defunc_1_op_res_126205 = x4w_j_126200 + redout_126179;
                float redout_tmp_126278 = defunc_1_op_res_126201;
                float redout_tmp_126279 = defunc_1_op_res_126202;
                float redout_tmp_126280 = defunc_1_op_res_126203;
                float redout_tmp_126281 = defunc_1_op_res_126204;
                float redout_tmp_126282 = defunc_1_op_res_126205;
                
                redout_126175 = redout_tmp_126278;
                redout_126176 = redout_tmp_126279;
                redout_126177 = redout_tmp_126280;
                redout_126178 = redout_tmp_126281;
                redout_126179 = redout_tmp_126282;
            }
            defunc_2_reduce_res_126169 = redout_126175;
            defunc_2_reduce_res_126170 = redout_126176;
            defunc_2_reduce_res_126171 = redout_126177;
            defunc_2_reduce_res_126172 = redout_126178;
            defunc_2_reduce_res_126173 = redout_126179;
            
            float x_126206 = defunc_2_reduce_res_126171 *
                  defunc_2_reduce_res_126173;
            float y_126207 = defunc_2_reduce_res_126172 *
                  defunc_2_reduce_res_126172;
            float a12_126208 = x_126206 - y_126207;
            float x_126209 = defunc_2_reduce_res_126171 *
                  defunc_2_reduce_res_126172;
            float y_126210 = defunc_2_reduce_res_126170 *
                  defunc_2_reduce_res_126173;
            float b12_126211 = x_126209 - y_126210;
            float x_126212 = defunc_2_reduce_res_126170 *
                  defunc_2_reduce_res_126172;
            float y_126213 = defunc_2_reduce_res_126171 *
                  defunc_2_reduce_res_126171;
            float c12_126214 = x_126212 - y_126213;
            float x_126215 = defunc_2_reduce_res_126169 *
                  defunc_2_reduce_res_126173;
            float b2_126216 = x_126215 - y_126213;
            float x_126217 = defunc_2_reduce_res_126170 *
                  defunc_2_reduce_res_126171;
            float y_126218 = defunc_2_reduce_res_126169 *
                  defunc_2_reduce_res_126172;
            float c2_126219 = x_126217 - y_126218;
            float x_126220 = defunc_2_reduce_res_126169 * a12_126208;
            float y_126221 = defunc_2_reduce_res_126170 * b12_126211;
            float x_126222 = x_126220 + y_126221;
            float y_126223 = defunc_2_reduce_res_126171 * c12_126214;
            float y_126224 = x_126222 + y_126223;
            float det_126225 = 1.0F / y_126224;
            float a12_126226 = a12_126208 * det_126225;
            float b12_126227 = b12_126211 * det_126225;
            float c12_126228 = c12_126214 * det_126225;
            float b2_126229 = b2_126216 * det_126225;
            float c2_126230 = c2_126219 * det_126225;
            float defunc_2_reduce_res_126231;
            float defunc_2_reduce_res_126232;
            float redout_126234;
            float redout_126235;
            
            redout_126234 = 0.0F;
            redout_126235 = 0.0F;
            for (int64_t i_126233 = 0; i_126233 < l_window_114522; i_126233++) {
                bool cond_126236 = sle64(x_115344, i_126233);
                float defunc_0_f_res_126237;
                
                if (cond_126236) {
                    defunc_0_f_res_126237 = 0.0F;
                } else {
                    int64_t i_126238 = add64(x_126164, i_126233);
                    float x_126239 = ((float *) mem_121982.mem)[gtid_118178 *
                                                                n_114518 +
                                                                i_126238];
                    float defunc_0_f_res_f_res_126240 = 1.0F + x_126239;
                    
                    defunc_0_f_res_126237 = defunc_0_f_res_f_res_126240;
                }
                
                float defunc_0_f_res_126241;
                
                if (cond_126236) {
                    defunc_0_f_res_126241 = 0.0F;
                } else {
                    int64_t i_126242 = add64(x_126164, i_126233);
                    float x_126243 = ((float *) mem_122408.mem)[gtid_118178 *
                                                                n_114518 +
                                                                i_126242];
                    
                    defunc_0_f_res_126241 = x_126243;
                }
                
                float x_j_126244 = defunc_0_f_res_126237 -
                      defunc_0_f_res_126168;
                float abs_res_126245 = (float) fabs(x_j_126244);
                float tmp1_126246 = abs_res_126245 / x_126165;
                float x_126247 = tmp1_126246 * tmp1_126246;
                float y_126248 = tmp1_126246 * x_126247;
                float tmp2_126249 = 1.0F - y_126248;
                float x_126250 = tmp2_126249 * tmp2_126249;
                float tmp3_126251 = tmp2_126249 * x_126250;
                float tmp4_126252 = defunc_0_f_res_126241 * tmp3_126251;
                float defunc_1_f_res_126253 = x_j_126244 * tmp4_126252;
                float defunc_1_f_res_126254 = x_j_126244 *
                      defunc_1_f_res_126253;
                float defunc_0_f_res_126255;
                
                if (cond_126236) {
                    defunc_0_f_res_126255 = 0.0F;
                } else {
                    int64_t i_126256 = add64(x_126164, i_126233);
                    float x_126257 = ((float *) mem_122404.mem)[gtid_118178 *
                                                                n_114518 +
                                                                i_126256];
                    
                    defunc_0_f_res_126255 = x_126257;
                }
                
                float x_126258 = a12_126226 * tmp4_126252;
                float y_126259 = b12_126227 * defunc_1_f_res_126253;
                float x_126260 = x_126258 + y_126259;
                float y_126261 = c12_126228 * defunc_1_f_res_126254;
                float x_126262 = x_126260 + y_126261;
                float defunc_9_fit_fun_res_126263 = defunc_0_f_res_126255 *
                      x_126262;
                float x_126264 = b12_126227 * tmp4_126252;
                float y_126265 = b2_126229 * defunc_1_f_res_126253;
                float x_126266 = x_126264 + y_126265;
                float y_126267 = c2_126230 * defunc_1_f_res_126254;
                float x_126268 = x_126266 + y_126267;
                float defunc_9_slope_fun_res_126269 = defunc_0_f_res_126255 *
                      x_126268;
                float defunc_1_op_res_126270 = defunc_9_fit_fun_res_126263 +
                      redout_126234;
                float defunc_1_op_res_126271 = defunc_9_slope_fun_res_126269 +
                      redout_126235;
                float redout_tmp_126283 = defunc_1_op_res_126270;
                float redout_tmp_126284 = defunc_1_op_res_126271;
                
                redout_126234 = redout_tmp_126283;
                redout_126235 = redout_tmp_126284;
            }
            defunc_2_reduce_res_126231 = redout_126234;
            defunc_2_reduce_res_126232 = redout_126235;
            ((float *) mem_122487)[i_126161] = defunc_2_reduce_res_126231;
            ((float *) mem_122490)[i_126161] = defunc_2_reduce_res_126232;
        }
        memmove(mem_122518.mem + gtid_118178 * l_n_m_114568 * (int64_t) 4,
                mem_122487 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122522.mem + gtid_118178 * l_n_m_114568 * (int64_t) 4,
                mem_122490 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122487);
    free(mem_122490);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131390_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131390_end -
                 futhark_mc_segmap_parloop_131390_start;
        
        ctx->futhark_mc_segmap_parloop_131390_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131390_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131390_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131388(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118177 = tid;
    int num_tasks_126159 = info.nsubtasks;
    struct futhark_mc_task_131387 *futhark_mc_task_131387 =
                                  (struct futhark_mc_task_131387 *) args;
    struct futhark_context *ctx = futhark_mc_task_131387->ctx;
    uint64_t futhark_mc_segmap_task_131388_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131388_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131387->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131387->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131387->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131387->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131387->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131387->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131387->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131387->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131387->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131387->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131387->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131387->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131387->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122518 = {.desc ="mem_122518", .mem =
                                  futhark_mc_task_131387->free_mem_122518,
                                  .size =0, .references =NULL};
    struct memblock mem_122522 = {.desc ="mem_122522", .mem =
                                  futhark_mc_task_131387->free_mem_122522,
                                  .size =0, .references =NULL};
    int64_t iter_126160;
    struct futhark_mc_segmap_parloop_struct_131389
    futhark_mc_segmap_parloop_struct_131389;
    
    futhark_mc_segmap_parloop_struct_131389.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131389.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131389.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131389.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131389.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131389.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131389.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131389.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131389.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131389.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131389.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131389.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131389.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131389.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131389.free_mem_122518 = mem_122518.mem;
    futhark_mc_segmap_parloop_struct_131389.free_mem_122522 = mem_122522.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131390_task;
    
    futhark_mc_segmap_parloop_131390_task.name =
        "futhark_mc_segmap_parloop_131390";
    futhark_mc_segmap_parloop_131390_task.fn = futhark_mc_segmap_parloop_131390;
    futhark_mc_segmap_parloop_131390_task.args =
        &futhark_mc_segmap_parloop_struct_131389;
    futhark_mc_segmap_parloop_131390_task.iterations = iterations;
    futhark_mc_segmap_parloop_131390_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131390_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131390_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131390_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131390_task);
    
    if (futhark_mc_segmap_parloop_131390_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131390_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131390_total_end -
                 futhark_mc_segmap_parloop_131390_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131390_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131390_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131390_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131388_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131388_end -
                 futhark_mc_segmap_task_131388_start;
        
        ctx->futhark_mc_segmap_task_131388_runs[tid]++;
        ctx->futhark_mc_segmap_task_131388_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131388_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131394 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122518;
    char *free_mem_122522;
};
struct futhark_mc_task_131398 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122481;
    char *free_mem_122484;
};
struct futhark_mc_segmap_parloop_struct_131400 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122481;
    char *free_mem_122484;
};
static int futhark_mc_segmap_parloop_131401(void *args, int64_t start,
                                            int64_t end, int flat_tid_118181,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131400
    *futhark_mc_segmap_parloop_struct_131400 =
    (struct futhark_mc_segmap_parloop_struct_131400 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131400->ctx;
    uint64_t futhark_mc_segmap_parloop_131401_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131401_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131400->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131400->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131400->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131400->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131400->free_i_114594;
    int64_t gtid_118180 =
            futhark_mc_segmap_parloop_struct_131400->free_gtid_118180;
    int64_t x_118310 = futhark_mc_segmap_parloop_struct_131400->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122481 = {.desc ="mem_122481", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_122481,
                                  .size =0, .references =NULL};
    struct memblock mem_122484 = {.desc ="mem_122484", .mem =
                                  futhark_mc_segmap_parloop_struct_131400->free_mem_122484,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126510 = start;
    
    for (; iter_126510 < end; iter_126510++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126582 = l_n_m_114568;
        int64_t gtid_118182 = iter_126510;
        int64_t remnant_126583 = iter_126510 - gtid_118182;
        int64_t x_126399 = ((int64_t *) mem_122102.mem)[gtid_118180 *
                                                        l_n_m_114568 +
                                                        gtid_118182];
        float x_126400 = ((float *) mem_122106.mem)[gtid_118180 * l_n_m_114568 +
                                                    gtid_118182];
        int64_t min_arg_126401 = mul64(t_jump_114525, gtid_118182);
        int64_t min_res_126402 = smin64(i_114594, min_arg_126401);
        float defunc_0_f_res_126403 = sitofp_i64_f32(min_res_126402);
        float defunc_2_reduce_res_126404;
        float defunc_2_reduce_res_126405;
        float defunc_2_reduce_res_126406;
        float defunc_2_reduce_res_126407;
        float defunc_2_reduce_res_126408;
        float redout_126512;
        float redout_126513;
        float redout_126514;
        float redout_126515;
        float redout_126516;
        
        redout_126512 = 0.0F;
        redout_126513 = 0.0F;
        redout_126514 = 0.0F;
        redout_126515 = 0.0F;
        redout_126516 = 0.0F;
        for (int64_t i_126511 = 0; i_126511 < l_window_114522; i_126511++) {
            bool cond_126517 = sle64(x_118310, i_126511);
            float defunc_0_f_res_126518;
            
            if (cond_126517) {
                defunc_0_f_res_126518 = 0.0F;
            } else {
                int64_t i_126519 = add64(x_126399, i_126511);
                float x_126520 = ((float *) mem_121982.mem)[gtid_118180 *
                                                            n_114518 +
                                                            i_126519];
                float defunc_0_f_res_f_res_126521 = 1.0F + x_126520;
                
                defunc_0_f_res_126518 = defunc_0_f_res_f_res_126521;
            }
            
            float defunc_0_f_res_126522;
            
            if (cond_126517) {
                defunc_0_f_res_126522 = 0.0F;
            } else {
                int64_t i_126523 = add64(x_126399, i_126511);
                float x_126524 = ((float *) mem_122408.mem)[gtid_118180 *
                                                            n_114518 +
                                                            i_126523];
                
                defunc_0_f_res_126522 = x_126524;
            }
            
            float x_j_126525 = defunc_0_f_res_126518 - defunc_0_f_res_126403;
            float abs_res_126526 = (float) fabs(x_j_126525);
            float tmp1_126527 = abs_res_126526 / x_126400;
            float x_126528 = tmp1_126527 * tmp1_126527;
            float y_126529 = tmp1_126527 * x_126528;
            float tmp2_126530 = 1.0F - y_126529;
            float x_126531 = tmp2_126530 * tmp2_126530;
            float tmp3_126532 = tmp2_126530 * x_126531;
            float w_j_126533 = defunc_0_f_res_126522 * tmp3_126532;
            float xw_j_126534 = x_j_126525 * w_j_126533;
            float x2w_j_126535 = x_j_126525 * xw_j_126534;
            float x3w_j_126536 = x_j_126525 * x2w_j_126535;
            float x4w_j_126537 = x_j_126525 * x3w_j_126536;
            float defunc_1_op_res_126538 = w_j_126533 + redout_126512;
            float defunc_1_op_res_126539 = xw_j_126534 + redout_126513;
            float defunc_1_op_res_126540 = x2w_j_126535 + redout_126514;
            float defunc_1_op_res_126541 = x3w_j_126536 + redout_126515;
            float defunc_1_op_res_126542 = x4w_j_126537 + redout_126516;
            float redout_tmp_126584 = defunc_1_op_res_126538;
            float redout_tmp_126585 = defunc_1_op_res_126539;
            float redout_tmp_126586 = defunc_1_op_res_126540;
            float redout_tmp_126587 = defunc_1_op_res_126541;
            float redout_tmp_126588 = defunc_1_op_res_126542;
            
            redout_126512 = redout_tmp_126584;
            redout_126513 = redout_tmp_126585;
            redout_126514 = redout_tmp_126586;
            redout_126515 = redout_tmp_126587;
            redout_126516 = redout_tmp_126588;
        }
        defunc_2_reduce_res_126404 = redout_126512;
        defunc_2_reduce_res_126405 = redout_126513;
        defunc_2_reduce_res_126406 = redout_126514;
        defunc_2_reduce_res_126407 = redout_126515;
        defunc_2_reduce_res_126408 = redout_126516;
        
        float x_126441 = defunc_2_reduce_res_126406 *
              defunc_2_reduce_res_126408;
        float y_126442 = defunc_2_reduce_res_126407 *
              defunc_2_reduce_res_126407;
        float a12_126443 = x_126441 - y_126442;
        float x_126444 = defunc_2_reduce_res_126406 *
              defunc_2_reduce_res_126407;
        float y_126445 = defunc_2_reduce_res_126405 *
              defunc_2_reduce_res_126408;
        float b12_126446 = x_126444 - y_126445;
        float x_126447 = defunc_2_reduce_res_126405 *
              defunc_2_reduce_res_126407;
        float y_126448 = defunc_2_reduce_res_126406 *
              defunc_2_reduce_res_126406;
        float c12_126449 = x_126447 - y_126448;
        float x_126450 = defunc_2_reduce_res_126404 *
              defunc_2_reduce_res_126408;
        float b2_126451 = x_126450 - y_126448;
        float x_126452 = defunc_2_reduce_res_126405 *
              defunc_2_reduce_res_126406;
        float y_126453 = defunc_2_reduce_res_126404 *
              defunc_2_reduce_res_126407;
        float c2_126454 = x_126452 - y_126453;
        float x_126455 = defunc_2_reduce_res_126404 * a12_126443;
        float y_126456 = defunc_2_reduce_res_126405 * b12_126446;
        float x_126457 = x_126455 + y_126456;
        float y_126458 = defunc_2_reduce_res_126406 * c12_126449;
        float y_126459 = x_126457 + y_126458;
        float det_126460 = 1.0F / y_126459;
        float a12_126461 = a12_126443 * det_126460;
        float b12_126462 = b12_126446 * det_126460;
        float c12_126463 = c12_126449 * det_126460;
        float b2_126464 = b2_126451 * det_126460;
        float c2_126465 = c2_126454 * det_126460;
        float defunc_2_reduce_res_126466;
        float defunc_2_reduce_res_126467;
        float redout_126544;
        float redout_126545;
        
        redout_126544 = 0.0F;
        redout_126545 = 0.0F;
        for (int64_t i_126543 = 0; i_126543 < l_window_114522; i_126543++) {
            bool cond_126546 = sle64(x_118310, i_126543);
            float defunc_0_f_res_126547;
            
            if (cond_126546) {
                defunc_0_f_res_126547 = 0.0F;
            } else {
                int64_t i_126548 = add64(x_126399, i_126543);
                float x_126549 = ((float *) mem_121982.mem)[gtid_118180 *
                                                            n_114518 +
                                                            i_126548];
                float defunc_0_f_res_f_res_126550 = 1.0F + x_126549;
                
                defunc_0_f_res_126547 = defunc_0_f_res_f_res_126550;
            }
            
            float defunc_0_f_res_126551;
            
            if (cond_126546) {
                defunc_0_f_res_126551 = 0.0F;
            } else {
                int64_t i_126552 = add64(x_126399, i_126543);
                float x_126553 = ((float *) mem_122408.mem)[gtid_118180 *
                                                            n_114518 +
                                                            i_126552];
                
                defunc_0_f_res_126551 = x_126553;
            }
            
            float x_j_126554 = defunc_0_f_res_126547 - defunc_0_f_res_126403;
            float abs_res_126555 = (float) fabs(x_j_126554);
            float tmp1_126556 = abs_res_126555 / x_126400;
            float x_126557 = tmp1_126556 * tmp1_126556;
            float y_126558 = tmp1_126556 * x_126557;
            float tmp2_126559 = 1.0F - y_126558;
            float x_126560 = tmp2_126559 * tmp2_126559;
            float tmp3_126561 = tmp2_126559 * x_126560;
            float tmp4_126562 = defunc_0_f_res_126551 * tmp3_126561;
            float defunc_1_f_res_126563 = x_j_126554 * tmp4_126562;
            float defunc_1_f_res_126564 = x_j_126554 * defunc_1_f_res_126563;
            float defunc_0_f_res_126565;
            
            if (cond_126546) {
                defunc_0_f_res_126565 = 0.0F;
            } else {
                int64_t i_126566 = add64(x_126399, i_126543);
                float x_126567 = ((float *) mem_122404.mem)[gtid_118180 *
                                                            n_114518 +
                                                            i_126566];
                
                defunc_0_f_res_126565 = x_126567;
            }
            
            float x_126568 = a12_126461 * tmp4_126562;
            float y_126569 = b12_126462 * defunc_1_f_res_126563;
            float x_126570 = x_126568 + y_126569;
            float y_126571 = c12_126463 * defunc_1_f_res_126564;
            float x_126572 = x_126570 + y_126571;
            float defunc_9_fit_fun_res_126573 = defunc_0_f_res_126565 *
                  x_126572;
            float x_126574 = b12_126462 * tmp4_126562;
            float y_126575 = b2_126464 * defunc_1_f_res_126563;
            float x_126576 = x_126574 + y_126575;
            float y_126577 = c2_126465 * defunc_1_f_res_126564;
            float x_126578 = x_126576 + y_126577;
            float defunc_9_slope_fun_res_126579 = defunc_0_f_res_126565 *
                  x_126578;
            float defunc_1_op_res_126580 = defunc_9_fit_fun_res_126573 +
                  redout_126544;
            float defunc_1_op_res_126581 = defunc_9_slope_fun_res_126579 +
                  redout_126545;
            float redout_tmp_126589 = defunc_1_op_res_126580;
            float redout_tmp_126590 = defunc_1_op_res_126581;
            
            redout_126544 = redout_tmp_126589;
            redout_126545 = redout_tmp_126590;
        }
        defunc_2_reduce_res_126466 = redout_126544;
        defunc_2_reduce_res_126467 = redout_126545;
        ((float *) mem_122481.mem)[gtid_118182] = defunc_2_reduce_res_126466;
        ((float *) mem_122484.mem)[gtid_118182] = defunc_2_reduce_res_126467;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131401_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131401_end -
                 futhark_mc_segmap_parloop_131401_start;
        
        ctx->futhark_mc_segmap_parloop_131401_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131401_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131401_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131399(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118181 = tid;
    int num_tasks_126509 = info.nsubtasks;
    struct futhark_mc_task_131398 *futhark_mc_task_131398 =
                                  (struct futhark_mc_task_131398 *) args;
    struct futhark_context *ctx = futhark_mc_task_131398->ctx;
    uint64_t futhark_mc_segmap_task_131399_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131399_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131398->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131398->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131398->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131398->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131398->free_i_114594;
    int64_t gtid_118180 = futhark_mc_task_131398->free_gtid_118180;
    int64_t x_118310 = futhark_mc_task_131398->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131398->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131398->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131398->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131398->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131398->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122481 = {.desc ="mem_122481", .mem =
                                  futhark_mc_task_131398->free_mem_122481,
                                  .size =0, .references =NULL};
    struct memblock mem_122484 = {.desc ="mem_122484", .mem =
                                  futhark_mc_task_131398->free_mem_122484,
                                  .size =0, .references =NULL};
    int64_t iter_126510;
    struct futhark_mc_segmap_parloop_struct_131400
    futhark_mc_segmap_parloop_struct_131400;
    
    futhark_mc_segmap_parloop_struct_131400.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131400.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131400.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131400.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131400.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131400.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131400.free_gtid_118180 = gtid_118180;
    futhark_mc_segmap_parloop_struct_131400.free_x_118310 = x_118310;
    futhark_mc_segmap_parloop_struct_131400.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131400.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131400.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131400.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131400.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131400.free_mem_122481 = mem_122481.mem;
    futhark_mc_segmap_parloop_struct_131400.free_mem_122484 = mem_122484.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131401_task;
    
    futhark_mc_segmap_parloop_131401_task.name =
        "futhark_mc_segmap_parloop_131401";
    futhark_mc_segmap_parloop_131401_task.fn = futhark_mc_segmap_parloop_131401;
    futhark_mc_segmap_parloop_131401_task.args =
        &futhark_mc_segmap_parloop_struct_131400;
    futhark_mc_segmap_parloop_131401_task.iterations = iterations;
    futhark_mc_segmap_parloop_131401_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131401_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131401_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131401_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131401_task);
    
    if (futhark_mc_segmap_parloop_131401_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131401_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131401_total_end -
                 futhark_mc_segmap_parloop_131401_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131401_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131401_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131401_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131399_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131399_end -
                 futhark_mc_segmap_task_131399_start;
        
        ctx->futhark_mc_segmap_task_131399_runs[tid]++;
        ctx->futhark_mc_segmap_task_131399_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131399_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131403 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    char *free_mem_122481;
    char *free_mem_122484;
};
struct futhark_mc_task_131405 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_126286;
    float free_x_126287;
    float free_defunc_0_f_res_126290;
    float *retval_defunc_2_reduce_res_126291;
    float *retval_defunc_2_reduce_res_126292;
    float *retval_defunc_2_reduce_res_126293;
    float *retval_defunc_2_reduce_res_126294;
    float *retval_defunc_2_reduce_res_126295;
};
struct futhark_mc_segred_stage_1_parloop_struct_131412 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_126286;
    float free_x_126287;
    float free_defunc_0_f_res_126290;
    char *free_reduce_stage_1_tid_res_arr_mem_126671;
    char *free_reduce_stage_1_tid_res_arr_mem_126673;
    char *free_reduce_stage_1_tid_res_arr_mem_126675;
    char *free_reduce_stage_1_tid_res_arr_mem_126677;
    char *free_reduce_stage_1_tid_res_arr_mem_126679;
};
static int futhark_mc_segred_stage_1_parloop_131413(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118185,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131412
    *futhark_mc_segred_stage_1_parloop_struct_131412 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131412 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131412->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131413_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131413_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131412->free_n_114518;
    int64_t gtid_118180 =
            futhark_mc_segred_stage_1_parloop_struct_131412->free_gtid_118180;
    int64_t x_118310 =
            futhark_mc_segred_stage_1_parloop_struct_131412->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131412->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131412->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_126286 =
            futhark_mc_segred_stage_1_parloop_struct_131412->free_x_126286;
    float x_126287 =
          futhark_mc_segred_stage_1_parloop_struct_131412->free_x_126287;
    float defunc_0_f_res_126290 =
          futhark_mc_segred_stage_1_parloop_struct_131412->free_defunc_0_f_res_126290;
    struct memblock reduce_stage_1_tid_res_arr_mem_126671 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126671",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131412->free_reduce_stage_1_tid_res_arr_mem_126671,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126673 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126673",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131412->free_reduce_stage_1_tid_res_arr_mem_126673,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126675 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126675",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131412->free_reduce_stage_1_tid_res_arr_mem_126675,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126677 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126677",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131412->free_reduce_stage_1_tid_res_arr_mem_126677,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126679 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126679",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131412->free_reduce_stage_1_tid_res_arr_mem_126679,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126681 = start;
    float x_126592;
    float x_126593;
    float x_126595;
    float x_126596;
    float x_126598;
    float x_126599;
    float x_126601;
    float x_126602;
    float x_126604;
    float x_126605;
    float local_acc_126682 = 0.0F;
    float local_acc_126683 = 0.0F;
    float local_acc_126684 = 0.0F;
    float local_acc_126685 = 0.0F;
    float local_acc_126686 = 0.0F;
    
    for (; iter_126681 < end; iter_126681++) {
        int64_t gtid_118186 = iter_126681;
        bool cond_126607 = sle64(x_118310, gtid_118186);
        float defunc_0_f_res_126608;
        
        if (cond_126607) {
            defunc_0_f_res_126608 = 0.0F;
        } else {
            int64_t i_126609 = add64(gtid_118186, x_126286);
            float x_126610 = ((float *) mem_121982.mem)[gtid_118180 * n_114518 +
                                                        i_126609];
            float defunc_0_f_res_f_res_126611 = 1.0F + x_126610;
            
            defunc_0_f_res_126608 = defunc_0_f_res_f_res_126611;
        }
        
        float defunc_0_f_res_126612;
        
        if (cond_126607) {
            defunc_0_f_res_126612 = 0.0F;
        } else {
            int64_t i_126613 = add64(gtid_118186, x_126286);
            float x_126614 = ((float *) mem_122408.mem)[gtid_118180 * n_114518 +
                                                        i_126613];
            
            defunc_0_f_res_126612 = x_126614;
        }
        
        float x_j_126615 = defunc_0_f_res_126608 - defunc_0_f_res_126290;
        float abs_res_126616 = (float) fabs(x_j_126615);
        float tmp1_126617 = abs_res_126616 / x_126287;
        float x_126618 = tmp1_126617 * tmp1_126617;
        float y_126619 = tmp1_126617 * x_126618;
        float tmp2_126620 = 1.0F - y_126619;
        float x_126621 = tmp2_126620 * tmp2_126620;
        float tmp3_126622 = tmp2_126620 * x_126621;
        float w_j_126623 = defunc_0_f_res_126612 * tmp3_126622;
        float xw_j_126624 = x_j_126615 * w_j_126623;
        float x2w_j_126625 = x_j_126615 * xw_j_126624;
        float x3w_j_126626 = x_j_126615 * x2w_j_126625;
        float x4w_j_126627 = x_j_126615 * x3w_j_126626;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126592 = local_acc_126682;
        }
        // Load next params
        {
            x_126593 = w_j_126623;
        }
        // Red body
        {
            float defunc_1_op_res_126594 = x_126592 + x_126593;
            
            local_acc_126682 = defunc_1_op_res_126594;
        }
        // Load accum params
        {
            x_126595 = local_acc_126683;
        }
        // Load next params
        {
            x_126596 = xw_j_126624;
        }
        // Red body
        {
            float defunc_1_op_res_126597 = x_126595 + x_126596;
            
            local_acc_126683 = defunc_1_op_res_126597;
        }
        // Load accum params
        {
            x_126598 = local_acc_126684;
        }
        // Load next params
        {
            x_126599 = x2w_j_126625;
        }
        // Red body
        {
            float defunc_1_op_res_126600 = x_126598 + x_126599;
            
            local_acc_126684 = defunc_1_op_res_126600;
        }
        // Load accum params
        {
            x_126601 = local_acc_126685;
        }
        // Load next params
        {
            x_126602 = x3w_j_126626;
        }
        // Red body
        {
            float defunc_1_op_res_126603 = x_126601 + x_126602;
            
            local_acc_126685 = defunc_1_op_res_126603;
        }
        // Load accum params
        {
            x_126604 = local_acc_126686;
        }
        // Load next params
        {
            x_126605 = x4w_j_126627;
        }
        // Red body
        {
            float defunc_1_op_res_126606 = x_126604 + x_126605;
            
            local_acc_126686 = defunc_1_op_res_126606;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126671.mem)[flat_tid_118185] =
        local_acc_126682;
    ((float *) reduce_stage_1_tid_res_arr_mem_126673.mem)[flat_tid_118185] =
        local_acc_126683;
    ((float *) reduce_stage_1_tid_res_arr_mem_126675.mem)[flat_tid_118185] =
        local_acc_126684;
    ((float *) reduce_stage_1_tid_res_arr_mem_126677.mem)[flat_tid_118185] =
        local_acc_126685;
    ((float *) reduce_stage_1_tid_res_arr_mem_126679.mem)[flat_tid_118185] =
        local_acc_126686;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131413_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131413_end -
                 futhark_mc_segred_stage_1_parloop_131413_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131413_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131413_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131413_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131406(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118185 = tid;
    int num_tasks_126670 = info.nsubtasks;
    struct futhark_mc_task_131405 *futhark_mc_task_131405 =
                                  (struct futhark_mc_task_131405 *) args;
    struct futhark_context *ctx = futhark_mc_task_131405->ctx;
    uint64_t futhark_mc_segred_task_131406_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131406_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131405->free_n_114518;
    int64_t gtid_118180 = futhark_mc_task_131405->free_gtid_118180;
    int64_t x_118310 = futhark_mc_task_131405->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131405->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131405->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_126286 = futhark_mc_task_131405->free_x_126286;
    float x_126287 = futhark_mc_task_131405->free_x_126287;
    float defunc_0_f_res_126290 =
          futhark_mc_task_131405->free_defunc_0_f_res_126290;
    float defunc_2_reduce_res_126291 =
          *futhark_mc_task_131405->retval_defunc_2_reduce_res_126291;
    float defunc_2_reduce_res_126292 =
          *futhark_mc_task_131405->retval_defunc_2_reduce_res_126292;
    float defunc_2_reduce_res_126293 =
          *futhark_mc_task_131405->retval_defunc_2_reduce_res_126293;
    float defunc_2_reduce_res_126294 =
          *futhark_mc_task_131405->retval_defunc_2_reduce_res_126294;
    float defunc_2_reduce_res_126295 =
          *futhark_mc_task_131405->retval_defunc_2_reduce_res_126295;
    size_t reduce_stage_1_tid_res_arr_mem_126671_cached_sizze_131407 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126671 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126673_cached_sizze_131408 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126673 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126675_cached_sizze_131409 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126675 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126677_cached_sizze_131410 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126677 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126679_cached_sizze_131411 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126679 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126671_cached_sizze_131407 <
        (size_t) ((int64_t) 4 * num_tasks_126670)) {
        reduce_stage_1_tid_res_arr_mem_126671 =
            realloc(reduce_stage_1_tid_res_arr_mem_126671, (int64_t) 4 *
                    num_tasks_126670);
        reduce_stage_1_tid_res_arr_mem_126671_cached_sizze_131407 =
            (int64_t) 4 * num_tasks_126670;
    }
    if (reduce_stage_1_tid_res_arr_mem_126673_cached_sizze_131408 <
        (size_t) ((int64_t) 4 * num_tasks_126670)) {
        reduce_stage_1_tid_res_arr_mem_126673 =
            realloc(reduce_stage_1_tid_res_arr_mem_126673, (int64_t) 4 *
                    num_tasks_126670);
        reduce_stage_1_tid_res_arr_mem_126673_cached_sizze_131408 =
            (int64_t) 4 * num_tasks_126670;
    }
    if (reduce_stage_1_tid_res_arr_mem_126675_cached_sizze_131409 <
        (size_t) ((int64_t) 4 * num_tasks_126670)) {
        reduce_stage_1_tid_res_arr_mem_126675 =
            realloc(reduce_stage_1_tid_res_arr_mem_126675, (int64_t) 4 *
                    num_tasks_126670);
        reduce_stage_1_tid_res_arr_mem_126675_cached_sizze_131409 =
            (int64_t) 4 * num_tasks_126670;
    }
    if (reduce_stage_1_tid_res_arr_mem_126677_cached_sizze_131410 <
        (size_t) ((int64_t) 4 * num_tasks_126670)) {
        reduce_stage_1_tid_res_arr_mem_126677 =
            realloc(reduce_stage_1_tid_res_arr_mem_126677, (int64_t) 4 *
                    num_tasks_126670);
        reduce_stage_1_tid_res_arr_mem_126677_cached_sizze_131410 =
            (int64_t) 4 * num_tasks_126670;
    }
    if (reduce_stage_1_tid_res_arr_mem_126679_cached_sizze_131411 <
        (size_t) ((int64_t) 4 * num_tasks_126670)) {
        reduce_stage_1_tid_res_arr_mem_126679 =
            realloc(reduce_stage_1_tid_res_arr_mem_126679, (int64_t) 4 *
                    num_tasks_126670);
        reduce_stage_1_tid_res_arr_mem_126679_cached_sizze_131411 =
            (int64_t) 4 * num_tasks_126670;
    }
    
    int64_t iter_126681;
    struct futhark_mc_segred_stage_1_parloop_struct_131412
    futhark_mc_segred_stage_1_parloop_struct_131412;
    
    futhark_mc_segred_stage_1_parloop_struct_131412.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_gtid_118180 =
        gtid_118180;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_x_118310 = x_118310;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_x_126286 = x_126286;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_x_126287 = x_126287;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_defunc_0_f_res_126290 =
        defunc_0_f_res_126290;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_reduce_stage_1_tid_res_arr_mem_126671 =
        reduce_stage_1_tid_res_arr_mem_126671;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_reduce_stage_1_tid_res_arr_mem_126673 =
        reduce_stage_1_tid_res_arr_mem_126673;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_reduce_stage_1_tid_res_arr_mem_126675 =
        reduce_stage_1_tid_res_arr_mem_126675;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_reduce_stage_1_tid_res_arr_mem_126677 =
        reduce_stage_1_tid_res_arr_mem_126677;
    futhark_mc_segred_stage_1_parloop_struct_131412.free_reduce_stage_1_tid_res_arr_mem_126679 =
        reduce_stage_1_tid_res_arr_mem_126679;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131413_task;
    
    futhark_mc_segred_stage_1_parloop_131413_task.name =
        "futhark_mc_segred_stage_1_parloop_131413";
    futhark_mc_segred_stage_1_parloop_131413_task.fn =
        futhark_mc_segred_stage_1_parloop_131413;
    futhark_mc_segred_stage_1_parloop_131413_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131412;
    futhark_mc_segred_stage_1_parloop_131413_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131413_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131413_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131413_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131413_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131413_task);
    
    if (futhark_mc_segred_stage_1_parloop_131413_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131413_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131413_total_end -
                 futhark_mc_segred_stage_1_parloop_131413_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131413_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131413_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131413_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126291 = 0.0F;
        defunc_2_reduce_res_126292 = 0.0F;
        defunc_2_reduce_res_126293 = 0.0F;
        defunc_2_reduce_res_126294 = 0.0F;
        defunc_2_reduce_res_126295 = 0.0F;
    }
    
    float x_126687;
    float x_126688;
    float x_126690;
    float x_126691;
    float x_126693;
    float x_126694;
    float x_126696;
    float x_126697;
    float x_126699;
    float x_126700;
    
    for (int32_t i_126702 = 0; i_126702 < num_tasks_126670; i_126702++) {
        flat_tid_118185 = i_126702;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126687 = defunc_2_reduce_res_126291;
            }
            // load next params
            {
                x_126688 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126671)[flat_tid_118185];
            }
            // red body
            {
                float defunc_1_op_res_126689 = x_126687 + x_126688;
                
                defunc_2_reduce_res_126291 = defunc_1_op_res_126689;
            }
            // load acc params
            {
                x_126690 = defunc_2_reduce_res_126292;
            }
            // load next params
            {
                x_126691 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126673)[flat_tid_118185];
            }
            // red body
            {
                float defunc_1_op_res_126692 = x_126690 + x_126691;
                
                defunc_2_reduce_res_126292 = defunc_1_op_res_126692;
            }
            // load acc params
            {
                x_126693 = defunc_2_reduce_res_126293;
            }
            // load next params
            {
                x_126694 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126675)[flat_tid_118185];
            }
            // red body
            {
                float defunc_1_op_res_126695 = x_126693 + x_126694;
                
                defunc_2_reduce_res_126293 = defunc_1_op_res_126695;
            }
            // load acc params
            {
                x_126696 = defunc_2_reduce_res_126294;
            }
            // load next params
            {
                x_126697 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126677)[flat_tid_118185];
            }
            // red body
            {
                float defunc_1_op_res_126698 = x_126696 + x_126697;
                
                defunc_2_reduce_res_126294 = defunc_1_op_res_126698;
            }
            // load acc params
            {
                x_126699 = defunc_2_reduce_res_126295;
            }
            // load next params
            {
                x_126700 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126679)[flat_tid_118185];
            }
            // red body
            {
                float defunc_1_op_res_126701 = x_126699 + x_126700;
                
                defunc_2_reduce_res_126295 = defunc_1_op_res_126701;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126671);
    free(reduce_stage_1_tid_res_arr_mem_126673);
    free(reduce_stage_1_tid_res_arr_mem_126675);
    free(reduce_stage_1_tid_res_arr_mem_126677);
    free(reduce_stage_1_tid_res_arr_mem_126679);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131406_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131406_end -
                 futhark_mc_segred_task_131406_start;
        
        ctx->futhark_mc_segred_task_131406_runs[tid]++;
        ctx->futhark_mc_segred_task_131406_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131406_iter[tid] += iterations;
    }
    *futhark_mc_task_131405->retval_defunc_2_reduce_res_126291 =
        defunc_2_reduce_res_126291;
    *futhark_mc_task_131405->retval_defunc_2_reduce_res_126292 =
        defunc_2_reduce_res_126292;
    *futhark_mc_task_131405->retval_defunc_2_reduce_res_126293 =
        defunc_2_reduce_res_126293;
    *futhark_mc_task_131405->retval_defunc_2_reduce_res_126294 =
        defunc_2_reduce_res_126294;
    *futhark_mc_task_131405->retval_defunc_2_reduce_res_126295 =
        defunc_2_reduce_res_126295;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131414 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_x_126286;
    float free_x_126287;
    float free_defunc_0_f_res_126290;
    float free_a12_126352;
    float free_b12_126353;
    float free_c12_126354;
    float free_b2_126355;
    float free_c2_126356;
    float *retval_defunc_2_reduce_res_126357;
    float *retval_defunc_2_reduce_res_126358;
};
struct futhark_mc_segred_stage_1_parloop_struct_131418 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118180;
    int64_t free_x_118310;
    char *free_mem_121982;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_x_126286;
    float free_x_126287;
    float free_defunc_0_f_res_126290;
    float free_a12_126352;
    float free_b12_126353;
    float free_c12_126354;
    float free_b2_126355;
    float free_c2_126356;
    char *free_reduce_stage_1_tid_res_arr_mem_126704;
    char *free_reduce_stage_1_tid_res_arr_mem_126706;
};
static int futhark_mc_segred_stage_1_parloop_131419(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118187,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131418
    *futhark_mc_segred_stage_1_parloop_struct_131418 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131418 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131418->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131419_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131419_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131418->free_n_114518;
    int64_t gtid_118180 =
            futhark_mc_segred_stage_1_parloop_struct_131418->free_gtid_118180;
    int64_t x_118310 =
            futhark_mc_segred_stage_1_parloop_struct_131418->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131418->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131418->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131418->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_126286 =
            futhark_mc_segred_stage_1_parloop_struct_131418->free_x_126286;
    float x_126287 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_x_126287;
    float defunc_0_f_res_126290 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_defunc_0_f_res_126290;
    float a12_126352 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_a12_126352;
    float b12_126353 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_b12_126353;
    float c12_126354 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_c12_126354;
    float b2_126355 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_b2_126355;
    float c2_126356 =
          futhark_mc_segred_stage_1_parloop_struct_131418->free_c2_126356;
    struct memblock reduce_stage_1_tid_res_arr_mem_126704 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126704",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131418->free_reduce_stage_1_tid_res_arr_mem_126704,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126706 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126706",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131418->free_reduce_stage_1_tid_res_arr_mem_126706,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126708 = start;
    float x_126628;
    float x_126629;
    float x_126631;
    float x_126632;
    float local_acc_126709 = 0.0F;
    float local_acc_126710 = 0.0F;
    
    for (; iter_126708 < end; iter_126708++) {
        int64_t gtid_118188 = iter_126708;
        bool cond_126634 = sle64(x_118310, gtid_118188);
        float defunc_0_f_res_126635;
        
        if (cond_126634) {
            defunc_0_f_res_126635 = 0.0F;
        } else {
            int64_t i_126636 = add64(gtid_118188, x_126286);
            float x_126637 = ((float *) mem_121982.mem)[gtid_118180 * n_114518 +
                                                        i_126636];
            float defunc_0_f_res_f_res_126638 = 1.0F + x_126637;
            
            defunc_0_f_res_126635 = defunc_0_f_res_f_res_126638;
        }
        
        float defunc_0_f_res_126639;
        
        if (cond_126634) {
            defunc_0_f_res_126639 = 0.0F;
        } else {
            int64_t i_126640 = add64(gtid_118188, x_126286);
            float x_126641 = ((float *) mem_122408.mem)[gtid_118180 * n_114518 +
                                                        i_126640];
            
            defunc_0_f_res_126639 = x_126641;
        }
        
        float x_j_126642 = defunc_0_f_res_126635 - defunc_0_f_res_126290;
        float abs_res_126643 = (float) fabs(x_j_126642);
        float tmp1_126644 = abs_res_126643 / x_126287;
        float x_126645 = tmp1_126644 * tmp1_126644;
        float y_126646 = tmp1_126644 * x_126645;
        float tmp2_126647 = 1.0F - y_126646;
        float x_126648 = tmp2_126647 * tmp2_126647;
        float tmp3_126649 = tmp2_126647 * x_126648;
        float tmp4_126650 = defunc_0_f_res_126639 * tmp3_126649;
        float defunc_1_f_res_126651 = x_j_126642 * tmp4_126650;
        float defunc_1_f_res_126652 = x_j_126642 * defunc_1_f_res_126651;
        float defunc_0_f_res_126653;
        
        if (cond_126634) {
            defunc_0_f_res_126653 = 0.0F;
        } else {
            int64_t i_126654 = add64(gtid_118188, x_126286);
            float x_126655 = ((float *) mem_122404.mem)[gtid_118180 * n_114518 +
                                                        i_126654];
            
            defunc_0_f_res_126653 = x_126655;
        }
        
        float x_126656 = a12_126352 * tmp4_126650;
        float y_126657 = b12_126353 * defunc_1_f_res_126651;
        float x_126658 = x_126656 + y_126657;
        float y_126659 = c12_126354 * defunc_1_f_res_126652;
        float x_126660 = x_126658 + y_126659;
        float defunc_9_fit_fun_res_126661 = defunc_0_f_res_126653 * x_126660;
        float x_126662 = b12_126353 * tmp4_126650;
        float y_126663 = b2_126355 * defunc_1_f_res_126651;
        float x_126664 = x_126662 + y_126663;
        float y_126665 = c2_126356 * defunc_1_f_res_126652;
        float x_126666 = x_126664 + y_126665;
        float defunc_9_slope_fun_res_126667 = defunc_0_f_res_126653 * x_126666;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126628 = local_acc_126709;
        }
        // Load next params
        {
            x_126629 = defunc_9_fit_fun_res_126661;
        }
        // Red body
        {
            float defunc_1_op_res_126630 = x_126628 + x_126629;
            
            local_acc_126709 = defunc_1_op_res_126630;
        }
        // Load accum params
        {
            x_126631 = local_acc_126710;
        }
        // Load next params
        {
            x_126632 = defunc_9_slope_fun_res_126667;
        }
        // Red body
        {
            float defunc_1_op_res_126633 = x_126631 + x_126632;
            
            local_acc_126710 = defunc_1_op_res_126633;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126704.mem)[flat_tid_118187] =
        local_acc_126709;
    ((float *) reduce_stage_1_tid_res_arr_mem_126706.mem)[flat_tid_118187] =
        local_acc_126710;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131419_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131419_end -
                 futhark_mc_segred_stage_1_parloop_131419_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131419_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131419_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131419_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131415(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118187 = tid;
    int num_tasks_126703 = info.nsubtasks;
    struct futhark_mc_task_131414 *futhark_mc_task_131414 =
                                  (struct futhark_mc_task_131414 *) args;
    struct futhark_context *ctx = futhark_mc_task_131414->ctx;
    uint64_t futhark_mc_segred_task_131415_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131415_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131414->free_n_114518;
    int64_t gtid_118180 = futhark_mc_task_131414->free_gtid_118180;
    int64_t x_118310 = futhark_mc_task_131414->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131414->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131414->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131414->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_126286 = futhark_mc_task_131414->free_x_126286;
    float x_126287 = futhark_mc_task_131414->free_x_126287;
    float defunc_0_f_res_126290 =
          futhark_mc_task_131414->free_defunc_0_f_res_126290;
    float a12_126352 = futhark_mc_task_131414->free_a12_126352;
    float b12_126353 = futhark_mc_task_131414->free_b12_126353;
    float c12_126354 = futhark_mc_task_131414->free_c12_126354;
    float b2_126355 = futhark_mc_task_131414->free_b2_126355;
    float c2_126356 = futhark_mc_task_131414->free_c2_126356;
    float defunc_2_reduce_res_126357 =
          *futhark_mc_task_131414->retval_defunc_2_reduce_res_126357;
    float defunc_2_reduce_res_126358 =
          *futhark_mc_task_131414->retval_defunc_2_reduce_res_126358;
    size_t reduce_stage_1_tid_res_arr_mem_126704_cached_sizze_131416 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126704 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126706_cached_sizze_131417 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126706 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126704_cached_sizze_131416 <
        (size_t) ((int64_t) 4 * num_tasks_126703)) {
        reduce_stage_1_tid_res_arr_mem_126704 =
            realloc(reduce_stage_1_tid_res_arr_mem_126704, (int64_t) 4 *
                    num_tasks_126703);
        reduce_stage_1_tid_res_arr_mem_126704_cached_sizze_131416 =
            (int64_t) 4 * num_tasks_126703;
    }
    if (reduce_stage_1_tid_res_arr_mem_126706_cached_sizze_131417 <
        (size_t) ((int64_t) 4 * num_tasks_126703)) {
        reduce_stage_1_tid_res_arr_mem_126706 =
            realloc(reduce_stage_1_tid_res_arr_mem_126706, (int64_t) 4 *
                    num_tasks_126703);
        reduce_stage_1_tid_res_arr_mem_126706_cached_sizze_131417 =
            (int64_t) 4 * num_tasks_126703;
    }
    
    int64_t iter_126708;
    struct futhark_mc_segred_stage_1_parloop_struct_131418
    futhark_mc_segred_stage_1_parloop_struct_131418;
    
    futhark_mc_segred_stage_1_parloop_struct_131418.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_gtid_118180 =
        gtid_118180;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_x_118310 = x_118310;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_mem_122404 =
        mem_122404.mem;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_x_126286 = x_126286;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_x_126287 = x_126287;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_defunc_0_f_res_126290 =
        defunc_0_f_res_126290;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_a12_126352 =
        a12_126352;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_b12_126353 =
        b12_126353;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_c12_126354 =
        c12_126354;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_b2_126355 = b2_126355;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_c2_126356 = c2_126356;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_reduce_stage_1_tid_res_arr_mem_126704 =
        reduce_stage_1_tid_res_arr_mem_126704;
    futhark_mc_segred_stage_1_parloop_struct_131418.free_reduce_stage_1_tid_res_arr_mem_126706 =
        reduce_stage_1_tid_res_arr_mem_126706;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131419_task;
    
    futhark_mc_segred_stage_1_parloop_131419_task.name =
        "futhark_mc_segred_stage_1_parloop_131419";
    futhark_mc_segred_stage_1_parloop_131419_task.fn =
        futhark_mc_segred_stage_1_parloop_131419;
    futhark_mc_segred_stage_1_parloop_131419_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131418;
    futhark_mc_segred_stage_1_parloop_131419_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131419_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131419_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131419_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131419_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131419_task);
    
    if (futhark_mc_segred_stage_1_parloop_131419_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131419_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131419_total_end -
                 futhark_mc_segred_stage_1_parloop_131419_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131419_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131419_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131419_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126357 = 0.0F;
        defunc_2_reduce_res_126358 = 0.0F;
    }
    
    float x_126711;
    float x_126712;
    float x_126714;
    float x_126715;
    
    for (int32_t i_126717 = 0; i_126717 < num_tasks_126703; i_126717++) {
        flat_tid_118187 = i_126717;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126711 = defunc_2_reduce_res_126357;
            }
            // load next params
            {
                x_126712 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126704)[flat_tid_118187];
            }
            // red body
            {
                float defunc_1_op_res_126713 = x_126711 + x_126712;
                
                defunc_2_reduce_res_126357 = defunc_1_op_res_126713;
            }
            // load acc params
            {
                x_126714 = defunc_2_reduce_res_126358;
            }
            // load next params
            {
                x_126715 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126706)[flat_tid_118187];
            }
            // red body
            {
                float defunc_1_op_res_126716 = x_126714 + x_126715;
                
                defunc_2_reduce_res_126358 = defunc_1_op_res_126716;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126704);
    free(reduce_stage_1_tid_res_arr_mem_126706);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131415_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131415_end -
                 futhark_mc_segred_task_131415_start;
        
        ctx->futhark_mc_segred_task_131415_runs[tid]++;
        ctx->futhark_mc_segred_task_131415_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131415_iter[tid] += iterations;
    }
    *futhark_mc_task_131414->retval_defunc_2_reduce_res_126357 =
        defunc_2_reduce_res_126357;
    *futhark_mc_task_131414->retval_defunc_2_reduce_res_126358 =
        defunc_2_reduce_res_126358;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131404(void *args, int64_t start,
                                            int64_t end, int flat_tid_118183,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131403
    *futhark_mc_segmap_parloop_struct_131403 =
    (struct futhark_mc_segmap_parloop_struct_131403 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131403->ctx;
    uint64_t futhark_mc_segmap_parloop_131404_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131404_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131403->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131403->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131403->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131403->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131403->free_i_114594;
    int64_t gtid_118180 =
            futhark_mc_segmap_parloop_struct_131403->free_gtid_118180;
    int64_t x_118310 = futhark_mc_segmap_parloop_struct_131403->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122481 = {.desc ="mem_122481", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_122481,
                                  .size =0, .references =NULL};
    struct memblock mem_122484 = {.desc ="mem_122484", .mem =
                                  futhark_mc_segmap_parloop_struct_131403->free_mem_122484,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126591 = start;
    
    for (; iter_126591 < end; iter_126591++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126668 = l_n_m_114568;
        int64_t gtid_118184 = iter_126591;
        int64_t remnant_126669 = iter_126591 - gtid_118184;
        int64_t x_126286 = ((int64_t *) mem_122102.mem)[gtid_118180 *
                                                        l_n_m_114568 +
                                                        gtid_118184];
        float x_126287 = ((float *) mem_122106.mem)[gtid_118180 * l_n_m_114568 +
                                                    gtid_118184];
        int64_t min_arg_126288 = mul64(t_jump_114525, gtid_118184);
        int64_t min_res_126289 = smin64(i_114594, min_arg_126288);
        float defunc_0_f_res_126290 = sitofp_i64_f32(min_res_126289);
        float defunc_2_reduce_res_126291;
        float defunc_2_reduce_res_126292;
        float defunc_2_reduce_res_126293;
        float defunc_2_reduce_res_126294;
        float defunc_2_reduce_res_126295;
        int64_t flat_tid_118185 = (int64_t) 0;
        int32_t num_tasks_126670;
        struct futhark_mc_task_131405 futhark_mc_task_131405;
        
        futhark_mc_task_131405.ctx = ctx;
        futhark_mc_task_131405.free_n_114518 = n_114518;
        futhark_mc_task_131405.free_gtid_118180 = gtid_118180;
        futhark_mc_task_131405.free_x_118310 = x_118310;
        futhark_mc_task_131405.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131405.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131405.free_x_126286 = x_126286;
        futhark_mc_task_131405.free_x_126287 = x_126287;
        futhark_mc_task_131405.free_defunc_0_f_res_126290 =
            defunc_0_f_res_126290;
        futhark_mc_task_131405.retval_defunc_2_reduce_res_126291 =
            &defunc_2_reduce_res_126291;
        futhark_mc_task_131405.retval_defunc_2_reduce_res_126292 =
            &defunc_2_reduce_res_126292;
        futhark_mc_task_131405.retval_defunc_2_reduce_res_126293 =
            &defunc_2_reduce_res_126293;
        futhark_mc_task_131405.retval_defunc_2_reduce_res_126294 =
            &defunc_2_reduce_res_126294;
        futhark_mc_task_131405.retval_defunc_2_reduce_res_126295 =
            &defunc_2_reduce_res_126295;
        
        struct scheduler_segop futhark_mc_task_131405_task;
        
        futhark_mc_task_131405_task.args = &futhark_mc_task_131405;
        futhark_mc_task_131405_task.top_level_fn =
            futhark_mc_segred_task_131406;
        futhark_mc_task_131405_task.name = "futhark_mc_segred_task_131406";
        futhark_mc_task_131405_task.iterations = l_window_114522;
        futhark_mc_task_131405_task.task_time =
            &ctx->futhark_mc_segred_task_131406_total_time;
        futhark_mc_task_131405_task.task_iter =
            &ctx->futhark_mc_segred_task_131406_total_iter;
        futhark_mc_task_131405_task.sched = STATIC;
        futhark_mc_task_131405_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131406_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131405_task);
        
        if (futhark_mc_segred_task_131406_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_126332 = defunc_2_reduce_res_126293 *
              defunc_2_reduce_res_126295;
        float y_126333 = defunc_2_reduce_res_126294 *
              defunc_2_reduce_res_126294;
        float a12_126334 = x_126332 - y_126333;
        float x_126335 = defunc_2_reduce_res_126293 *
              defunc_2_reduce_res_126294;
        float y_126336 = defunc_2_reduce_res_126292 *
              defunc_2_reduce_res_126295;
        float b12_126337 = x_126335 - y_126336;
        float x_126338 = defunc_2_reduce_res_126292 *
              defunc_2_reduce_res_126294;
        float y_126339 = defunc_2_reduce_res_126293 *
              defunc_2_reduce_res_126293;
        float c12_126340 = x_126338 - y_126339;
        float x_126341 = defunc_2_reduce_res_126291 *
              defunc_2_reduce_res_126295;
        float b2_126342 = x_126341 - y_126339;
        float x_126343 = defunc_2_reduce_res_126292 *
              defunc_2_reduce_res_126293;
        float y_126344 = defunc_2_reduce_res_126291 *
              defunc_2_reduce_res_126294;
        float c2_126345 = x_126343 - y_126344;
        float x_126346 = defunc_2_reduce_res_126291 * a12_126334;
        float y_126347 = defunc_2_reduce_res_126292 * b12_126337;
        float x_126348 = x_126346 + y_126347;
        float y_126349 = defunc_2_reduce_res_126293 * c12_126340;
        float y_126350 = x_126348 + y_126349;
        float det_126351 = 1.0F / y_126350;
        float a12_126352 = a12_126334 * det_126351;
        float b12_126353 = b12_126337 * det_126351;
        float c12_126354 = c12_126340 * det_126351;
        float b2_126355 = b2_126342 * det_126351;
        float c2_126356 = c2_126345 * det_126351;
        float defunc_2_reduce_res_126357;
        float defunc_2_reduce_res_126358;
        int64_t flat_tid_118187 = (int64_t) 0;
        int32_t num_tasks_126703;
        struct futhark_mc_task_131414 futhark_mc_task_131414;
        
        futhark_mc_task_131414.ctx = ctx;
        futhark_mc_task_131414.free_n_114518 = n_114518;
        futhark_mc_task_131414.free_gtid_118180 = gtid_118180;
        futhark_mc_task_131414.free_x_118310 = x_118310;
        futhark_mc_task_131414.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131414.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131414.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131414.free_x_126286 = x_126286;
        futhark_mc_task_131414.free_x_126287 = x_126287;
        futhark_mc_task_131414.free_defunc_0_f_res_126290 =
            defunc_0_f_res_126290;
        futhark_mc_task_131414.free_a12_126352 = a12_126352;
        futhark_mc_task_131414.free_b12_126353 = b12_126353;
        futhark_mc_task_131414.free_c12_126354 = c12_126354;
        futhark_mc_task_131414.free_b2_126355 = b2_126355;
        futhark_mc_task_131414.free_c2_126356 = c2_126356;
        futhark_mc_task_131414.retval_defunc_2_reduce_res_126357 =
            &defunc_2_reduce_res_126357;
        futhark_mc_task_131414.retval_defunc_2_reduce_res_126358 =
            &defunc_2_reduce_res_126358;
        
        struct scheduler_segop futhark_mc_task_131414_task;
        
        futhark_mc_task_131414_task.args = &futhark_mc_task_131414;
        futhark_mc_task_131414_task.top_level_fn =
            futhark_mc_segred_task_131415;
        futhark_mc_task_131414_task.name = "futhark_mc_segred_task_131415";
        futhark_mc_task_131414_task.iterations = l_window_114522;
        futhark_mc_task_131414_task.task_time =
            &ctx->futhark_mc_segred_task_131415_total_time;
        futhark_mc_task_131414_task.task_iter =
            &ctx->futhark_mc_segred_task_131415_total_iter;
        futhark_mc_task_131414_task.sched = STATIC;
        futhark_mc_task_131414_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131415_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131414_task);
        
        if (futhark_mc_segred_task_131415_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122481.mem)[gtid_118184] = defunc_2_reduce_res_126357;
        ((float *) mem_122484.mem)[gtid_118184] = defunc_2_reduce_res_126358;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131404_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131404_end -
                 futhark_mc_segmap_parloop_131404_start;
        
        ctx->futhark_mc_segmap_parloop_131404_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131404_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131404_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131402(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118183 = tid;
    int num_tasks_126509 = info.nsubtasks;
    struct futhark_mc_task_131398 *futhark_mc_task_131398 =
                                  (struct futhark_mc_task_131398 *) args;
    struct futhark_context *ctx = futhark_mc_task_131398->ctx;
    uint64_t futhark_mc_segmap_nested_task_131402_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131402_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131398->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131398->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131398->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131398->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131398->free_i_114594;
    int64_t gtid_118180 = futhark_mc_task_131398->free_gtid_118180;
    int64_t x_118310 = futhark_mc_task_131398->free_x_118310;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131398->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131398->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131398->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131398->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131398->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122481 = {.desc ="mem_122481", .mem =
                                  futhark_mc_task_131398->free_mem_122481,
                                  .size =0, .references =NULL};
    struct memblock mem_122484 = {.desc ="mem_122484", .mem =
                                  futhark_mc_task_131398->free_mem_122484,
                                  .size =0, .references =NULL};
    int64_t iter_126591;
    struct futhark_mc_segmap_parloop_struct_131403
    futhark_mc_segmap_parloop_struct_131403;
    
    futhark_mc_segmap_parloop_struct_131403.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131403.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131403.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131403.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131403.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131403.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131403.free_gtid_118180 = gtid_118180;
    futhark_mc_segmap_parloop_struct_131403.free_x_118310 = x_118310;
    futhark_mc_segmap_parloop_struct_131403.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131403.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131403.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131403.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131403.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131403.free_mem_122481 = mem_122481.mem;
    futhark_mc_segmap_parloop_struct_131403.free_mem_122484 = mem_122484.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131404_task;
    
    futhark_mc_segmap_parloop_131404_task.name =
        "futhark_mc_segmap_parloop_131404";
    futhark_mc_segmap_parloop_131404_task.fn = futhark_mc_segmap_parloop_131404;
    futhark_mc_segmap_parloop_131404_task.args =
        &futhark_mc_segmap_parloop_struct_131403;
    futhark_mc_segmap_parloop_131404_task.iterations = iterations;
    futhark_mc_segmap_parloop_131404_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131404_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131404_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131404_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131404_task);
    
    if (futhark_mc_segmap_parloop_131404_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131404_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131404_total_end -
                 futhark_mc_segmap_parloop_131404_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131404_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131404_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131404_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131402_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131402_end -
                 futhark_mc_segmap_nested_task_131402_start;
        
        ctx->futhark_mc_segmap_nested_task_131402_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131402_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131402_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131395(void *args, int64_t start,
                                            int64_t end, int flat_tid_118179,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131394
    *futhark_mc_segmap_parloop_struct_131394 =
    (struct futhark_mc_segmap_parloop_struct_131394 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131394->ctx;
    uint64_t futhark_mc_segmap_parloop_131395_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131395_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131394->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131394->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131394->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131394->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131394->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131394->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131394->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122518 = {.desc ="mem_122518", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_122518,
                                  .size =0, .references =NULL};
    struct memblock mem_122522 = {.desc ="mem_122522", .mem =
                                  futhark_mc_segmap_parloop_struct_131394->free_mem_122522,
                                  .size =0, .references =NULL};
    size_t mem_122481_cached_sizze_131396 = 0;
    char *mem_122481 = NULL;
    size_t mem_122484_cached_sizze_131397 = 0;
    char *mem_122484 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126285 = start;
    
    if (mem_122481_cached_sizze_131396 < (size_t) bytes_122033) {
        mem_122481 = realloc(mem_122481, bytes_122033);
        mem_122481_cached_sizze_131396 = bytes_122033;
    }
    if (mem_122484_cached_sizze_131397 < (size_t) bytes_122033) {
        mem_122484 = realloc(mem_122484, bytes_122033);
        mem_122484_cached_sizze_131397 = bytes_122033;
    }
    for (; iter_126285 < end; iter_126285++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126507 = m_114517;
        int64_t gtid_118180 = iter_126285;
        int64_t remnant_126508 = iter_126285 - gtid_118180;
        int64_t x_118310 = ((int64_t *) mem_121960.mem)[gtid_118180];
        int64_t flat_tid_118181 = (int64_t) 0;
        int32_t num_tasks_126509;
        int64_t flat_tid_118183 = (int64_t) 0;
        struct futhark_mc_task_131398 futhark_mc_task_131398;
        
        futhark_mc_task_131398.ctx = ctx;
        futhark_mc_task_131398.free_n_114518 = n_114518;
        futhark_mc_task_131398.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131398.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131398.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131398.free_i_114594 = i_114594;
        futhark_mc_task_131398.free_gtid_118180 = gtid_118180;
        futhark_mc_task_131398.free_x_118310 = x_118310;
        futhark_mc_task_131398.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131398.free_mem_122102 = mem_122102.mem;
        futhark_mc_task_131398.free_mem_122106 = mem_122106.mem;
        futhark_mc_task_131398.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131398.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131398.free_mem_122481 = mem_122481;
        futhark_mc_task_131398.free_mem_122484 = mem_122484;
        
        struct scheduler_segop futhark_mc_task_131398_task;
        
        futhark_mc_task_131398_task.args = &futhark_mc_task_131398;
        futhark_mc_task_131398_task.top_level_fn =
            futhark_mc_segmap_task_131399;
        futhark_mc_task_131398_task.name = "futhark_mc_segmap_task_131399";
        futhark_mc_task_131398_task.iterations = l_n_m_114568;
        futhark_mc_task_131398_task.task_time =
            &ctx->futhark_mc_segmap_task_131399_total_time;
        futhark_mc_task_131398_task.task_iter =
            &ctx->futhark_mc_segmap_task_131399_total_iter;
        futhark_mc_task_131398_task.sched = STATIC;
        futhark_mc_task_131398_task.nested_fn =
            futhark_mc_segmap_nested_task_131402;
        
        int futhark_mc_segmap_task_131399_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131398_task);
        
        if (futhark_mc_segmap_task_131399_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122518.mem + gtid_118180 * l_n_m_114568 * (int64_t) 4,
                mem_122481 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122522.mem + gtid_118180 * l_n_m_114568 * (int64_t) 4,
                mem_122484 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122481);
    free(mem_122484);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131395_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131395_end -
                 futhark_mc_segmap_parloop_131395_start;
        
        ctx->futhark_mc_segmap_parloop_131395_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131395_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131395_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131393(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118179 = tid;
    int num_tasks_126159 = info.nsubtasks;
    struct futhark_mc_task_131387 *futhark_mc_task_131387 =
                                  (struct futhark_mc_task_131387 *) args;
    struct futhark_context *ctx = futhark_mc_task_131387->ctx;
    uint64_t futhark_mc_segmap_nested_task_131393_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131393_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131387->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131387->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131387->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131387->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131387->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131387->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131387->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131387->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131387->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131387->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131387->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131387->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131387->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122518 = {.desc ="mem_122518", .mem =
                                  futhark_mc_task_131387->free_mem_122518,
                                  .size =0, .references =NULL};
    struct memblock mem_122522 = {.desc ="mem_122522", .mem =
                                  futhark_mc_task_131387->free_mem_122522,
                                  .size =0, .references =NULL};
    int64_t iter_126285;
    struct futhark_mc_segmap_parloop_struct_131394
    futhark_mc_segmap_parloop_struct_131394;
    
    futhark_mc_segmap_parloop_struct_131394.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131394.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131394.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131394.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131394.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131394.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131394.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131394.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131394.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131394.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131394.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131394.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131394.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131394.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131394.free_mem_122518 = mem_122518.mem;
    futhark_mc_segmap_parloop_struct_131394.free_mem_122522 = mem_122522.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131395_task;
    
    futhark_mc_segmap_parloop_131395_task.name =
        "futhark_mc_segmap_parloop_131395";
    futhark_mc_segmap_parloop_131395_task.fn = futhark_mc_segmap_parloop_131395;
    futhark_mc_segmap_parloop_131395_task.args =
        &futhark_mc_segmap_parloop_struct_131394;
    futhark_mc_segmap_parloop_131395_task.iterations = iterations;
    futhark_mc_segmap_parloop_131395_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131395_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131395_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131395_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131395_task);
    
    if (futhark_mc_segmap_parloop_131395_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131395_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131395_total_end -
                 futhark_mc_segmap_parloop_131395_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131395_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131395_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131395_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131393_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131393_end -
                 futhark_mc_segmap_nested_task_131393_start;
        
        ctx->futhark_mc_segmap_nested_task_131393_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131393_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131393_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131420 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122531;
    char *free_mem_122585;
};
struct futhark_mc_segmap_parloop_struct_131422 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122531;
    char *free_mem_122585;
};
static int futhark_mc_segmap_parloop_131423(void *args, int64_t start,
                                            int64_t end, int flat_tid_118545,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131422
    *futhark_mc_segmap_parloop_struct_131422 =
    (struct futhark_mc_segmap_parloop_struct_131422 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131422->ctx;
    uint64_t futhark_mc_segmap_parloop_131423_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131423_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131422->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131422->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131422->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131422->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131422->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131422->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131422->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 =
            futhark_mc_segmap_parloop_struct_131422->free_bytes_122531;
    struct memblock mem_122585 = {.desc ="mem_122585", .mem =
                                  futhark_mc_segmap_parloop_struct_131422->free_mem_122585,
                                  .size =0, .references =NULL};
    size_t mem_122554_cached_sizze_131424 = 0;
    char *mem_122554 = NULL;
    size_t mem_122564_cached_sizze_131425 = 0;
    char *mem_122564 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126721 = start;
    
    if (mem_122554_cached_sizze_131424 < (size_t) bytes_122033) {
        mem_122554 = realloc(mem_122554, bytes_122033);
        mem_122554_cached_sizze_131424 = bytes_122033;
    }
    if (mem_122564_cached_sizze_131425 < (size_t) bytes_122531) {
        mem_122564 = realloc(mem_122564, bytes_122531);
        mem_122564_cached_sizze_131425 = bytes_122531;
    }
    for (; iter_126721 < end; iter_126721++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126767 = m_114517;
        int64_t gtid_118546 = iter_126721;
        int64_t remnant_126768 = iter_126721 - gtid_118546;
        int64_t x_115476 = ((int64_t *) mem_121960.mem)[gtid_118546];
        
        for (int64_t i_126722 = 0; i_126722 < l_n_m_114568; i_126722++) {
            int64_t x_126724 = ((int64_t *) mem_122102.mem)[gtid_118546 *
                                                            l_n_m_114568 +
                                                            i_126722];
            float x_126725 = ((float *) mem_122106.mem)[gtid_118546 *
                                                        l_n_m_114568 +
                                                        i_126722];
            int64_t min_arg_126726 = mul64(t_jump_114525, i_126722);
            int64_t min_res_126727 = smin64(i_114594, min_arg_126726);
            float defunc_0_f_res_126728 = sitofp_i64_f32(min_res_126727);
            float defunc_2_reduce_res_126730;
            float redout_126733 = 0.0F;
            
            for (int64_t i_126732 = 0; i_126732 < l_window_114522; i_126732++) {
                bool cond_126735 = sle64(x_115476, i_126732);
                float defunc_0_f_res_126736;
                
                if (cond_126735) {
                    defunc_0_f_res_126736 = 0.0F;
                } else {
                    int64_t i_126737 = add64(x_126724, i_126732);
                    float x_126738 = ((float *) mem_121982.mem)[gtid_118546 *
                                                                n_114518 +
                                                                i_126737];
                    float defunc_0_f_res_f_res_126739 = 1.0F + x_126738;
                    
                    defunc_0_f_res_126736 = defunc_0_f_res_f_res_126739;
                }
                
                float defunc_0_f_res_126740;
                
                if (cond_126735) {
                    defunc_0_f_res_126740 = 0.0F;
                } else {
                    int64_t i_126741 = add64(x_126724, i_126732);
                    float x_126742 = ((float *) mem_122408.mem)[gtid_118546 *
                                                                n_114518 +
                                                                i_126741];
                    
                    defunc_0_f_res_126740 = x_126742;
                }
                
                float x_j_126743 = defunc_0_f_res_126736 -
                      defunc_0_f_res_126728;
                float abs_res_126744 = (float) fabs(x_j_126743);
                float tmp1_126745 = abs_res_126744 / x_126725;
                float x_126746 = tmp1_126745 * tmp1_126745;
                float y_126747 = tmp1_126745 * x_126746;
                float tmp2_126748 = 1.0F - y_126747;
                float x_126749 = tmp2_126748 * tmp2_126748;
                float tmp3_126750 = tmp2_126748 * x_126749;
                float tmp4_126751 = defunc_0_f_res_126740 * tmp3_126750;
                float defunc_1_op_res_126752 = tmp4_126751 + redout_126733;
                
                ((float *) mem_122564)[i_126732] = tmp4_126751;
                
                float redout_tmp_126770 = defunc_1_op_res_126752;
                
                redout_126733 = redout_tmp_126770;
            }
            defunc_2_reduce_res_126730 = redout_126733;
            
            float a0_126754 = 1.0F / defunc_2_reduce_res_126730;
            float defunc_2_reduce_res_126755;
            float redout_126757 = 0.0F;
            
            for (int64_t i_126756 = 0; i_126756 < l_window_114522; i_126756++) {
                float x_126758 = ((float *) mem_122564)[i_126756];
                bool cond_126759 = sle64(x_115476, i_126756);
                float defunc_0_f_res_126760;
                
                if (cond_126759) {
                    defunc_0_f_res_126760 = 0.0F;
                } else {
                    int64_t i_126761 = add64(x_126724, i_126756);
                    float x_126762 = ((float *) mem_122404.mem)[gtid_118546 *
                                                                n_114518 +
                                                                i_126761];
                    
                    defunc_0_f_res_126760 = x_126762;
                }
                
                float x_126763 = a0_126754 * x_126758;
                float defunc_9_fit_fun_res_126764 = defunc_0_f_res_126760 *
                      x_126763;
                float defunc_1_op_res_126765 = defunc_9_fit_fun_res_126764 +
                      redout_126757;
                float redout_tmp_126772 = defunc_1_op_res_126765;
                
                redout_126757 = redout_tmp_126772;
            }
            defunc_2_reduce_res_126755 = redout_126757;
            ((float *) mem_122554)[i_126722] = defunc_2_reduce_res_126755;
        }
        memmove(mem_122585.mem + gtid_118546 * l_n_m_114568 * (int64_t) 4,
                mem_122554 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122554);
    free(mem_122564);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131423_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131423_end -
                 futhark_mc_segmap_parloop_131423_start;
        
        ctx->futhark_mc_segmap_parloop_131423_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131423_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131423_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131421(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118545 = tid;
    int num_tasks_126720 = info.nsubtasks;
    struct futhark_mc_task_131420 *futhark_mc_task_131420 =
                                  (struct futhark_mc_task_131420 *) args;
    struct futhark_context *ctx = futhark_mc_task_131420->ctx;
    uint64_t futhark_mc_segmap_task_131421_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131421_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131420->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131420->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131420->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131420->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131420->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131420->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131420->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131420->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131420->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131420->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131420->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131420->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131420->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 = futhark_mc_task_131420->free_bytes_122531;
    struct memblock mem_122585 = {.desc ="mem_122585", .mem =
                                  futhark_mc_task_131420->free_mem_122585,
                                  .size =0, .references =NULL};
    int64_t iter_126721;
    struct futhark_mc_segmap_parloop_struct_131422
    futhark_mc_segmap_parloop_struct_131422;
    
    futhark_mc_segmap_parloop_struct_131422.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131422.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131422.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131422.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131422.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131422.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131422.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131422.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131422.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131422.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131422.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131422.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131422.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131422.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131422.free_bytes_122531 = bytes_122531;
    futhark_mc_segmap_parloop_struct_131422.free_mem_122585 = mem_122585.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131423_task;
    
    futhark_mc_segmap_parloop_131423_task.name =
        "futhark_mc_segmap_parloop_131423";
    futhark_mc_segmap_parloop_131423_task.fn = futhark_mc_segmap_parloop_131423;
    futhark_mc_segmap_parloop_131423_task.args =
        &futhark_mc_segmap_parloop_struct_131422;
    futhark_mc_segmap_parloop_131423_task.iterations = iterations;
    futhark_mc_segmap_parloop_131423_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131423_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131423_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131423_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131423_task);
    
    if (futhark_mc_segmap_parloop_131423_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131423_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131423_total_end -
                 futhark_mc_segmap_parloop_131423_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131423_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131423_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131423_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131421_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131421_end -
                 futhark_mc_segmap_task_131421_start;
        
        ctx->futhark_mc_segmap_task_131421_runs[tid]++;
        ctx->futhark_mc_segmap_task_131421_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131421_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131427 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122531;
    char *free_mem_122585;
};
struct futhark_mc_task_131430 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122531;
    char *free_mem_122551;
};
struct futhark_mc_segmap_parloop_struct_131432 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122531;
    char *free_mem_122551;
};
static int futhark_mc_segmap_parloop_131433(void *args, int64_t start,
                                            int64_t end, int flat_tid_118549,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131432
    *futhark_mc_segmap_parloop_struct_131432 =
    (struct futhark_mc_segmap_parloop_struct_131432 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131432->ctx;
    uint64_t futhark_mc_segmap_parloop_131433_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131433_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131432->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131432->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131432->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131432->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131432->free_i_114594;
    int64_t gtid_118548 =
            futhark_mc_segmap_parloop_struct_131432->free_gtid_118548;
    int64_t x_118604 = futhark_mc_segmap_parloop_struct_131432->free_x_118604;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131432->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131432->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131432->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131432->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131432->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 =
            futhark_mc_segmap_parloop_struct_131432->free_bytes_122531;
    struct memblock mem_122551 = {.desc ="mem_122551", .mem =
                                  futhark_mc_segmap_parloop_struct_131432->free_mem_122551,
                                  .size =0, .references =NULL};
    size_t mem_126819_cached_sizze_131434 = 0;
    char *mem_126819 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126860 = start;
    
    if (mem_126819_cached_sizze_131434 < (size_t) bytes_122531) {
        mem_126819 = realloc(mem_126819, bytes_122531);
        mem_126819_cached_sizze_131434 = bytes_122531;
    }
    for (; iter_126860 < end; iter_126860++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126893 = l_n_m_114568;
        int64_t gtid_118550 = iter_126860;
        int64_t remnant_126894 = iter_126860 - gtid_118550;
        int64_t x_126814 = ((int64_t *) mem_122102.mem)[gtid_118548 *
                                                        l_n_m_114568 +
                                                        gtid_118550];
        float x_126815 = ((float *) mem_122106.mem)[gtid_118548 * l_n_m_114568 +
                                                    gtid_118550];
        int64_t min_arg_126816 = mul64(t_jump_114525, gtid_118550);
        int64_t min_res_126817 = smin64(i_114594, min_arg_126816);
        float defunc_0_f_res_126818 = sitofp_i64_f32(min_res_126817);
        float defunc_2_reduce_res_126821;
        float redout_126862 = 0.0F;
        
        for (int64_t i_126861 = 0; i_126861 < l_window_114522; i_126861++) {
            bool cond_126864 = sle64(x_118604, i_126861);
            float defunc_0_f_res_126865;
            
            if (cond_126864) {
                defunc_0_f_res_126865 = 0.0F;
            } else {
                int64_t i_126866 = add64(x_126814, i_126861);
                float x_126867 = ((float *) mem_121982.mem)[gtid_118548 *
                                                            n_114518 +
                                                            i_126866];
                float defunc_0_f_res_f_res_126868 = 1.0F + x_126867;
                
                defunc_0_f_res_126865 = defunc_0_f_res_f_res_126868;
            }
            
            float defunc_0_f_res_126869;
            
            if (cond_126864) {
                defunc_0_f_res_126869 = 0.0F;
            } else {
                int64_t i_126870 = add64(x_126814, i_126861);
                float x_126871 = ((float *) mem_122408.mem)[gtid_118548 *
                                                            n_114518 +
                                                            i_126870];
                
                defunc_0_f_res_126869 = x_126871;
            }
            
            float x_j_126872 = defunc_0_f_res_126865 - defunc_0_f_res_126818;
            float abs_res_126873 = (float) fabs(x_j_126872);
            float tmp1_126874 = abs_res_126873 / x_126815;
            float x_126875 = tmp1_126874 * tmp1_126874;
            float y_126876 = tmp1_126874 * x_126875;
            float tmp2_126877 = 1.0F - y_126876;
            float x_126878 = tmp2_126877 * tmp2_126877;
            float tmp3_126879 = tmp2_126877 * x_126878;
            float tmp4_126880 = defunc_0_f_res_126869 * tmp3_126879;
            float defunc_1_op_res_126881 = tmp4_126880 + redout_126862;
            
            ((float *) mem_126819)[i_126861] = tmp4_126880;
            
            float redout_tmp_126895 = defunc_1_op_res_126881;
            
            redout_126862 = redout_tmp_126895;
        }
        defunc_2_reduce_res_126821 = redout_126862;
        
        float a0_126845 = 1.0F / defunc_2_reduce_res_126821;
        float defunc_2_reduce_res_126846;
        float redout_126884 = 0.0F;
        
        for (int64_t i_126883 = 0; i_126883 < l_window_114522; i_126883++) {
            float x_126885 = ((float *) mem_126819)[i_126883];
            bool cond_126886 = sle64(x_118604, i_126883);
            float defunc_0_f_res_126887;
            
            if (cond_126886) {
                defunc_0_f_res_126887 = 0.0F;
            } else {
                int64_t i_126888 = add64(x_126814, i_126883);
                float x_126889 = ((float *) mem_122404.mem)[gtid_118548 *
                                                            n_114518 +
                                                            i_126888];
                
                defunc_0_f_res_126887 = x_126889;
            }
            
            float x_126890 = a0_126845 * x_126885;
            float defunc_9_fit_fun_res_126891 = defunc_0_f_res_126887 *
                  x_126890;
            float defunc_1_op_res_126892 = defunc_9_fit_fun_res_126891 +
                  redout_126884;
            float redout_tmp_126897 = defunc_1_op_res_126892;
            
            redout_126884 = redout_tmp_126897;
        }
        defunc_2_reduce_res_126846 = redout_126884;
        ((float *) mem_122551.mem)[gtid_118550] = defunc_2_reduce_res_126846;
    }
    
  cleanup:
    { }
    free(mem_126819);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131433_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131433_end -
                 futhark_mc_segmap_parloop_131433_start;
        
        ctx->futhark_mc_segmap_parloop_131433_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131433_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131433_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131431(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118549 = tid;
    int num_tasks_126859 = info.nsubtasks;
    struct futhark_mc_task_131430 *futhark_mc_task_131430 =
                                  (struct futhark_mc_task_131430 *) args;
    struct futhark_context *ctx = futhark_mc_task_131430->ctx;
    uint64_t futhark_mc_segmap_task_131431_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131431_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131430->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131430->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131430->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131430->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131430->free_i_114594;
    int64_t gtid_118548 = futhark_mc_task_131430->free_gtid_118548;
    int64_t x_118604 = futhark_mc_task_131430->free_x_118604;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131430->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131430->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131430->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131430->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131430->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 = futhark_mc_task_131430->free_bytes_122531;
    struct memblock mem_122551 = {.desc ="mem_122551", .mem =
                                  futhark_mc_task_131430->free_mem_122551,
                                  .size =0, .references =NULL};
    int64_t iter_126860;
    struct futhark_mc_segmap_parloop_struct_131432
    futhark_mc_segmap_parloop_struct_131432;
    
    futhark_mc_segmap_parloop_struct_131432.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131432.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131432.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131432.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131432.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131432.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131432.free_gtid_118548 = gtid_118548;
    futhark_mc_segmap_parloop_struct_131432.free_x_118604 = x_118604;
    futhark_mc_segmap_parloop_struct_131432.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131432.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131432.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131432.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131432.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131432.free_bytes_122531 = bytes_122531;
    futhark_mc_segmap_parloop_struct_131432.free_mem_122551 = mem_122551.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131433_task;
    
    futhark_mc_segmap_parloop_131433_task.name =
        "futhark_mc_segmap_parloop_131433";
    futhark_mc_segmap_parloop_131433_task.fn = futhark_mc_segmap_parloop_131433;
    futhark_mc_segmap_parloop_131433_task.args =
        &futhark_mc_segmap_parloop_struct_131432;
    futhark_mc_segmap_parloop_131433_task.iterations = iterations;
    futhark_mc_segmap_parloop_131433_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131433_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131433_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131433_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131433_task);
    
    if (futhark_mc_segmap_parloop_131433_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131433_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131433_total_end -
                 futhark_mc_segmap_parloop_131433_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131433_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131433_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131433_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131431_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131431_end -
                 futhark_mc_segmap_task_131431_start;
        
        ctx->futhark_mc_segmap_task_131431_runs[tid]++;
        ctx->futhark_mc_segmap_task_131431_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131431_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131436 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122531;
    char *free_mem_122551;
};
struct futhark_mc_task_131439 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_126774;
    float free_x_126775;
    float free_defunc_0_f_res_126778;
    float *retval_defunc_2_reduce_res_126780;
    char *retval_mem_126779;
};
struct futhark_mc_segred_stage_1_parloop_struct_131442 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_126774;
    float free_x_126775;
    float free_defunc_0_f_res_126778;
    char *free_mem_126779;
    char *free_reduce_stage_1_tid_res_arr_mem_126932;
};
static int futhark_mc_segred_stage_1_parloop_131443(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118553,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131442
    *futhark_mc_segred_stage_1_parloop_struct_131442 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131442 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131442->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131443_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131443_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131442->free_n_114518;
    int64_t gtid_118548 =
            futhark_mc_segred_stage_1_parloop_struct_131442->free_gtid_118548;
    int64_t x_118604 =
            futhark_mc_segred_stage_1_parloop_struct_131442->free_x_118604;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131442->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131442->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_126774 =
            futhark_mc_segred_stage_1_parloop_struct_131442->free_x_126774;
    float x_126775 =
          futhark_mc_segred_stage_1_parloop_struct_131442->free_x_126775;
    float defunc_0_f_res_126778 =
          futhark_mc_segred_stage_1_parloop_struct_131442->free_defunc_0_f_res_126778;
    struct memblock mem_126779 = {.desc ="mem_126779", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131442->free_mem_126779,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126932 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126932",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131442->free_reduce_stage_1_tid_res_arr_mem_126932,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126934 = start;
    float x_126899;
    float x_126900;
    float local_acc_126935 = 0.0F;
    
    for (; iter_126934 < end; iter_126934++) {
        int64_t gtid_118554 = iter_126934;
        bool cond_126902 = sle64(x_118604, gtid_118554);
        float defunc_0_f_res_126903;
        
        if (cond_126902) {
            defunc_0_f_res_126903 = 0.0F;
        } else {
            int64_t i_126904 = add64(gtid_118554, x_126774);
            float x_126905 = ((float *) mem_121982.mem)[gtid_118548 * n_114518 +
                                                        i_126904];
            float defunc_0_f_res_f_res_126906 = 1.0F + x_126905;
            
            defunc_0_f_res_126903 = defunc_0_f_res_f_res_126906;
        }
        
        float defunc_0_f_res_126907;
        
        if (cond_126902) {
            defunc_0_f_res_126907 = 0.0F;
        } else {
            int64_t i_126908 = add64(gtid_118554, x_126774);
            float x_126909 = ((float *) mem_122408.mem)[gtid_118548 * n_114518 +
                                                        i_126908];
            
            defunc_0_f_res_126907 = x_126909;
        }
        
        float x_j_126910 = defunc_0_f_res_126903 - defunc_0_f_res_126778;
        float abs_res_126911 = (float) fabs(x_j_126910);
        float tmp1_126912 = abs_res_126911 / x_126775;
        float x_126913 = tmp1_126912 * tmp1_126912;
        float y_126914 = tmp1_126912 * x_126913;
        float tmp2_126915 = 1.0F - y_126914;
        float x_126916 = tmp2_126915 * tmp2_126915;
        float tmp3_126917 = tmp2_126915 * x_126916;
        float tmp4_126918 = defunc_0_f_res_126907 * tmp3_126917;
        
        // save map-out results
        {
            ((float *) mem_126779.mem)[gtid_118554] = tmp4_126918;
        }
        // Load accum params
        {
            x_126899 = local_acc_126935;
        }
        // Load next params
        {
            x_126900 = tmp4_126918;
        }
        // Red body
        {
            float defunc_1_op_res_126901 = x_126899 + x_126900;
            
            local_acc_126935 = defunc_1_op_res_126901;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126932.mem)[flat_tid_118553] =
        local_acc_126935;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131443_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131443_end -
                 futhark_mc_segred_stage_1_parloop_131443_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131443_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131443_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131443_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131440(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118553 = tid;
    int num_tasks_126931 = info.nsubtasks;
    struct futhark_mc_task_131439 *futhark_mc_task_131439 =
                                  (struct futhark_mc_task_131439 *) args;
    struct futhark_context *ctx = futhark_mc_task_131439->ctx;
    uint64_t futhark_mc_segred_task_131440_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131440_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131439->free_n_114518;
    int64_t gtid_118548 = futhark_mc_task_131439->free_gtid_118548;
    int64_t x_118604 = futhark_mc_task_131439->free_x_118604;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131439->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131439->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_126774 = futhark_mc_task_131439->free_x_126774;
    float x_126775 = futhark_mc_task_131439->free_x_126775;
    float defunc_0_f_res_126778 =
          futhark_mc_task_131439->free_defunc_0_f_res_126778;
    float defunc_2_reduce_res_126780 =
          *futhark_mc_task_131439->retval_defunc_2_reduce_res_126780;
    struct memblock mem_126779 = {.desc ="mem_126779", .mem =
                                  futhark_mc_task_131439->retval_mem_126779,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_126932_cached_sizze_131441 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126932 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126932_cached_sizze_131441 <
        (size_t) ((int64_t) 4 * num_tasks_126931)) {
        reduce_stage_1_tid_res_arr_mem_126932 =
            realloc(reduce_stage_1_tid_res_arr_mem_126932, (int64_t) 4 *
                    num_tasks_126931);
        reduce_stage_1_tid_res_arr_mem_126932_cached_sizze_131441 =
            (int64_t) 4 * num_tasks_126931;
    }
    
    int64_t iter_126934;
    struct futhark_mc_segred_stage_1_parloop_struct_131442
    futhark_mc_segred_stage_1_parloop_struct_131442;
    
    futhark_mc_segred_stage_1_parloop_struct_131442.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_gtid_118548 =
        gtid_118548;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_x_118604 = x_118604;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_x_126774 = x_126774;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_x_126775 = x_126775;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_defunc_0_f_res_126778 =
        defunc_0_f_res_126778;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_mem_126779 =
        mem_126779.mem;
    futhark_mc_segred_stage_1_parloop_struct_131442.free_reduce_stage_1_tid_res_arr_mem_126932 =
        reduce_stage_1_tid_res_arr_mem_126932;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131443_task;
    
    futhark_mc_segred_stage_1_parloop_131443_task.name =
        "futhark_mc_segred_stage_1_parloop_131443";
    futhark_mc_segred_stage_1_parloop_131443_task.fn =
        futhark_mc_segred_stage_1_parloop_131443;
    futhark_mc_segred_stage_1_parloop_131443_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131442;
    futhark_mc_segred_stage_1_parloop_131443_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131443_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131443_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131443_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131443_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131443_task);
    
    if (futhark_mc_segred_stage_1_parloop_131443_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131443_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131443_total_end -
                 futhark_mc_segred_stage_1_parloop_131443_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131443_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131443_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131443_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126780 = 0.0F;
    }
    
    float x_126936;
    float x_126937;
    
    for (int32_t i_126939 = 0; i_126939 < num_tasks_126931; i_126939++) {
        flat_tid_118553 = i_126939;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126936 = defunc_2_reduce_res_126780;
            }
            // load next params
            {
                x_126937 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126932)[flat_tid_118553];
            }
            // red body
            {
                float defunc_1_op_res_126938 = x_126936 + x_126937;
                
                defunc_2_reduce_res_126780 = defunc_1_op_res_126938;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126932);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131440_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131440_end -
                 futhark_mc_segred_task_131440_start;
        
        ctx->futhark_mc_segred_task_131440_runs[tid]++;
        ctx->futhark_mc_segred_task_131440_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131440_iter[tid] += iterations;
    }
    *futhark_mc_task_131439->retval_defunc_2_reduce_res_126780 =
        defunc_2_reduce_res_126780;
    futhark_mc_task_131439->retval_mem_126779 = mem_126779.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131444 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_122404;
    int64_t free_x_126774;
    char *free_mem_126779;
    float free_a0_126802;
    float *retval_defunc_2_reduce_res_126803;
};
struct futhark_mc_segred_stage_1_parloop_struct_131447 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118548;
    int64_t free_x_118604;
    char *free_mem_122404;
    int64_t free_x_126774;
    char *free_mem_126779;
    float free_a0_126802;
    char *free_reduce_stage_1_tid_res_arr_mem_126941;
};
static int futhark_mc_segred_stage_1_parloop_131448(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118555,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131447
    *futhark_mc_segred_stage_1_parloop_struct_131447 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131447 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131447->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131448_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131448_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131447->free_n_114518;
    int64_t gtid_118548 =
            futhark_mc_segred_stage_1_parloop_struct_131447->free_gtid_118548;
    int64_t x_118604 =
            futhark_mc_segred_stage_1_parloop_struct_131447->free_x_118604;
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131447->free_mem_122404,
                                  .size =0, .references =NULL};
    int64_t x_126774 =
            futhark_mc_segred_stage_1_parloop_struct_131447->free_x_126774;
    struct memblock mem_126779 = {.desc ="mem_126779", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131447->free_mem_126779,
                                  .size =0, .references =NULL};
    float a0_126802 =
          futhark_mc_segred_stage_1_parloop_struct_131447->free_a0_126802;
    struct memblock reduce_stage_1_tid_res_arr_mem_126941 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126941",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131447->free_reduce_stage_1_tid_res_arr_mem_126941,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126943 = start;
    float x_126919;
    float x_126920;
    float local_acc_126944 = 0.0F;
    
    for (; iter_126943 < end; iter_126943++) {
        int64_t gtid_118556 = iter_126943;
        float x_126922 = ((float *) mem_126779.mem)[gtid_118556];
        bool cond_126923 = sle64(x_118604, gtid_118556);
        float defunc_0_f_res_126924;
        
        if (cond_126923) {
            defunc_0_f_res_126924 = 0.0F;
        } else {
            int64_t i_126925 = add64(gtid_118556, x_126774);
            float x_126926 = ((float *) mem_122404.mem)[gtid_118548 * n_114518 +
                                                        i_126925];
            
            defunc_0_f_res_126924 = x_126926;
        }
        
        float x_126927 = a0_126802 * x_126922;
        float defunc_9_fit_fun_res_126928 = defunc_0_f_res_126924 * x_126927;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126919 = local_acc_126944;
        }
        // Load next params
        {
            x_126920 = defunc_9_fit_fun_res_126928;
        }
        // Red body
        {
            float defunc_1_op_res_126921 = x_126919 + x_126920;
            
            local_acc_126944 = defunc_1_op_res_126921;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126941.mem)[flat_tid_118555] =
        local_acc_126944;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131448_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131448_end -
                 futhark_mc_segred_stage_1_parloop_131448_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131448_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131448_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131448_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131445(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118555 = tid;
    int num_tasks_126940 = info.nsubtasks;
    struct futhark_mc_task_131444 *futhark_mc_task_131444 =
                                  (struct futhark_mc_task_131444 *) args;
    struct futhark_context *ctx = futhark_mc_task_131444->ctx;
    uint64_t futhark_mc_segred_task_131445_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131445_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131444->free_n_114518;
    int64_t gtid_118548 = futhark_mc_task_131444->free_gtid_118548;
    int64_t x_118604 = futhark_mc_task_131444->free_x_118604;
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131444->free_mem_122404,
                                  .size =0, .references =NULL};
    int64_t x_126774 = futhark_mc_task_131444->free_x_126774;
    struct memblock mem_126779 = {.desc ="mem_126779", .mem =
                                  futhark_mc_task_131444->free_mem_126779,
                                  .size =0, .references =NULL};
    float a0_126802 = futhark_mc_task_131444->free_a0_126802;
    float defunc_2_reduce_res_126803 =
          *futhark_mc_task_131444->retval_defunc_2_reduce_res_126803;
    size_t reduce_stage_1_tid_res_arr_mem_126941_cached_sizze_131446 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126941 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126941_cached_sizze_131446 <
        (size_t) ((int64_t) 4 * num_tasks_126940)) {
        reduce_stage_1_tid_res_arr_mem_126941 =
            realloc(reduce_stage_1_tid_res_arr_mem_126941, (int64_t) 4 *
                    num_tasks_126940);
        reduce_stage_1_tid_res_arr_mem_126941_cached_sizze_131446 =
            (int64_t) 4 * num_tasks_126940;
    }
    
    int64_t iter_126943;
    struct futhark_mc_segred_stage_1_parloop_struct_131447
    futhark_mc_segred_stage_1_parloop_struct_131447;
    
    futhark_mc_segred_stage_1_parloop_struct_131447.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_gtid_118548 =
        gtid_118548;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_x_118604 = x_118604;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_mem_122404 =
        mem_122404.mem;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_x_126774 = x_126774;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_mem_126779 =
        mem_126779.mem;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_a0_126802 = a0_126802;
    futhark_mc_segred_stage_1_parloop_struct_131447.free_reduce_stage_1_tid_res_arr_mem_126941 =
        reduce_stage_1_tid_res_arr_mem_126941;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131448_task;
    
    futhark_mc_segred_stage_1_parloop_131448_task.name =
        "futhark_mc_segred_stage_1_parloop_131448";
    futhark_mc_segred_stage_1_parloop_131448_task.fn =
        futhark_mc_segred_stage_1_parloop_131448;
    futhark_mc_segred_stage_1_parloop_131448_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131447;
    futhark_mc_segred_stage_1_parloop_131448_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131448_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131448_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131448_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131448_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131448_task);
    
    if (futhark_mc_segred_stage_1_parloop_131448_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131448_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131448_total_end -
                 futhark_mc_segred_stage_1_parloop_131448_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131448_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131448_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131448_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126803 = 0.0F;
    }
    
    float x_126945;
    float x_126946;
    
    for (int32_t i_126948 = 0; i_126948 < num_tasks_126940; i_126948++) {
        flat_tid_118555 = i_126948;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126945 = defunc_2_reduce_res_126803;
            }
            // load next params
            {
                x_126946 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126941)[flat_tid_118555];
            }
            // red body
            {
                float defunc_1_op_res_126947 = x_126945 + x_126946;
                
                defunc_2_reduce_res_126803 = defunc_1_op_res_126947;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126941);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131445_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131445_end -
                 futhark_mc_segred_task_131445_start;
        
        ctx->futhark_mc_segred_task_131445_runs[tid]++;
        ctx->futhark_mc_segred_task_131445_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131445_iter[tid] += iterations;
    }
    *futhark_mc_task_131444->retval_defunc_2_reduce_res_126803 =
        defunc_2_reduce_res_126803;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131437(void *args, int64_t start,
                                            int64_t end, int flat_tid_118551,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131436
    *futhark_mc_segmap_parloop_struct_131436 =
    (struct futhark_mc_segmap_parloop_struct_131436 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131436->ctx;
    uint64_t futhark_mc_segmap_parloop_131437_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131437_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131436->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131436->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131436->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131436->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131436->free_i_114594;
    int64_t gtid_118548 =
            futhark_mc_segmap_parloop_struct_131436->free_gtid_118548;
    int64_t x_118604 = futhark_mc_segmap_parloop_struct_131436->free_x_118604;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131436->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131436->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131436->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131436->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131436->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 =
            futhark_mc_segmap_parloop_struct_131436->free_bytes_122531;
    struct memblock mem_122551 = {.desc ="mem_122551", .mem =
                                  futhark_mc_segmap_parloop_struct_131436->free_mem_122551,
                                  .size =0, .references =NULL};
    size_t mem_126779_cached_sizze_131438 = 0;
    char *mem_126779 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126898 = start;
    
    if (mem_126779_cached_sizze_131438 < (size_t) bytes_122531) {
        mem_126779 = realloc(mem_126779, bytes_122531);
        mem_126779_cached_sizze_131438 = bytes_122531;
    }
    for (; iter_126898 < end; iter_126898++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126929 = l_n_m_114568;
        int64_t gtid_118552 = iter_126898;
        int64_t remnant_126930 = iter_126898 - gtid_118552;
        int64_t x_126774 = ((int64_t *) mem_122102.mem)[gtid_118548 *
                                                        l_n_m_114568 +
                                                        gtid_118552];
        float x_126775 = ((float *) mem_122106.mem)[gtid_118548 * l_n_m_114568 +
                                                    gtid_118552];
        int64_t min_arg_126776 = mul64(t_jump_114525, gtid_118552);
        int64_t min_res_126777 = smin64(i_114594, min_arg_126776);
        float defunc_0_f_res_126778 = sitofp_i64_f32(min_res_126777);
        float defunc_2_reduce_res_126780;
        int64_t flat_tid_118553 = (int64_t) 0;
        int32_t num_tasks_126931;
        struct futhark_mc_task_131439 futhark_mc_task_131439;
        
        futhark_mc_task_131439.ctx = ctx;
        futhark_mc_task_131439.free_n_114518 = n_114518;
        futhark_mc_task_131439.free_gtid_118548 = gtid_118548;
        futhark_mc_task_131439.free_x_118604 = x_118604;
        futhark_mc_task_131439.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131439.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131439.free_x_126774 = x_126774;
        futhark_mc_task_131439.free_x_126775 = x_126775;
        futhark_mc_task_131439.free_defunc_0_f_res_126778 =
            defunc_0_f_res_126778;
        futhark_mc_task_131439.retval_defunc_2_reduce_res_126780 =
            &defunc_2_reduce_res_126780;
        futhark_mc_task_131439.retval_mem_126779 = mem_126779;
        
        struct scheduler_segop futhark_mc_task_131439_task;
        
        futhark_mc_task_131439_task.args = &futhark_mc_task_131439;
        futhark_mc_task_131439_task.top_level_fn =
            futhark_mc_segred_task_131440;
        futhark_mc_task_131439_task.name = "futhark_mc_segred_task_131440";
        futhark_mc_task_131439_task.iterations = l_window_114522;
        futhark_mc_task_131439_task.task_time =
            &ctx->futhark_mc_segred_task_131440_total_time;
        futhark_mc_task_131439_task.task_iter =
            &ctx->futhark_mc_segred_task_131440_total_iter;
        futhark_mc_task_131439_task.sched = STATIC;
        futhark_mc_task_131439_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131440_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131439_task);
        
        if (futhark_mc_segred_task_131440_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_126802 = 1.0F / defunc_2_reduce_res_126780;
        float defunc_2_reduce_res_126803;
        int64_t flat_tid_118555 = (int64_t) 0;
        int32_t num_tasks_126940;
        struct futhark_mc_task_131444 futhark_mc_task_131444;
        
        futhark_mc_task_131444.ctx = ctx;
        futhark_mc_task_131444.free_n_114518 = n_114518;
        futhark_mc_task_131444.free_gtid_118548 = gtid_118548;
        futhark_mc_task_131444.free_x_118604 = x_118604;
        futhark_mc_task_131444.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131444.free_x_126774 = x_126774;
        futhark_mc_task_131444.free_mem_126779 = mem_126779;
        futhark_mc_task_131444.free_a0_126802 = a0_126802;
        futhark_mc_task_131444.retval_defunc_2_reduce_res_126803 =
            &defunc_2_reduce_res_126803;
        
        struct scheduler_segop futhark_mc_task_131444_task;
        
        futhark_mc_task_131444_task.args = &futhark_mc_task_131444;
        futhark_mc_task_131444_task.top_level_fn =
            futhark_mc_segred_task_131445;
        futhark_mc_task_131444_task.name = "futhark_mc_segred_task_131445";
        futhark_mc_task_131444_task.iterations = l_window_114522;
        futhark_mc_task_131444_task.task_time =
            &ctx->futhark_mc_segred_task_131445_total_time;
        futhark_mc_task_131444_task.task_iter =
            &ctx->futhark_mc_segred_task_131445_total_iter;
        futhark_mc_task_131444_task.sched = STATIC;
        futhark_mc_task_131444_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131445_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131444_task);
        
        if (futhark_mc_segred_task_131445_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122551.mem)[gtid_118552] = defunc_2_reduce_res_126803;
    }
    
  cleanup:
    { }
    free(mem_126779);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131437_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131437_end -
                 futhark_mc_segmap_parloop_131437_start;
        
        ctx->futhark_mc_segmap_parloop_131437_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131437_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131437_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131435(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118551 = tid;
    int num_tasks_126859 = info.nsubtasks;
    struct futhark_mc_task_131430 *futhark_mc_task_131430 =
                                  (struct futhark_mc_task_131430 *) args;
    struct futhark_context *ctx = futhark_mc_task_131430->ctx;
    uint64_t futhark_mc_segmap_nested_task_131435_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131435_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131430->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131430->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131430->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131430->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131430->free_i_114594;
    int64_t gtid_118548 = futhark_mc_task_131430->free_gtid_118548;
    int64_t x_118604 = futhark_mc_task_131430->free_x_118604;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131430->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131430->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131430->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131430->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131430->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 = futhark_mc_task_131430->free_bytes_122531;
    struct memblock mem_122551 = {.desc ="mem_122551", .mem =
                                  futhark_mc_task_131430->free_mem_122551,
                                  .size =0, .references =NULL};
    int64_t iter_126898;
    struct futhark_mc_segmap_parloop_struct_131436
    futhark_mc_segmap_parloop_struct_131436;
    
    futhark_mc_segmap_parloop_struct_131436.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131436.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131436.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131436.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131436.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131436.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131436.free_gtid_118548 = gtid_118548;
    futhark_mc_segmap_parloop_struct_131436.free_x_118604 = x_118604;
    futhark_mc_segmap_parloop_struct_131436.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131436.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131436.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131436.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131436.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131436.free_bytes_122531 = bytes_122531;
    futhark_mc_segmap_parloop_struct_131436.free_mem_122551 = mem_122551.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131437_task;
    
    futhark_mc_segmap_parloop_131437_task.name =
        "futhark_mc_segmap_parloop_131437";
    futhark_mc_segmap_parloop_131437_task.fn = futhark_mc_segmap_parloop_131437;
    futhark_mc_segmap_parloop_131437_task.args =
        &futhark_mc_segmap_parloop_struct_131436;
    futhark_mc_segmap_parloop_131437_task.iterations = iterations;
    futhark_mc_segmap_parloop_131437_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131437_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131437_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131437_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131437_task);
    
    if (futhark_mc_segmap_parloop_131437_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131437_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131437_total_end -
                 futhark_mc_segmap_parloop_131437_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131437_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131437_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131437_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131435_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131435_end -
                 futhark_mc_segmap_nested_task_131435_start;
        
        ctx->futhark_mc_segmap_nested_task_131435_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131435_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131435_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131428(void *args, int64_t start,
                                            int64_t end, int flat_tid_118547,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131427
    *futhark_mc_segmap_parloop_struct_131427 =
    (struct futhark_mc_segmap_parloop_struct_131427 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131427->ctx;
    uint64_t futhark_mc_segmap_parloop_131428_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131428_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131427->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131427->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131427->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131427->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131427->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131427->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131427->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 =
            futhark_mc_segmap_parloop_struct_131427->free_bytes_122531;
    struct memblock mem_122585 = {.desc ="mem_122585", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122585,
                                  .size =0, .references =NULL};
    size_t mem_122551_cached_sizze_131429 = 0;
    char *mem_122551 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126773 = start;
    
    if (mem_122551_cached_sizze_131429 < (size_t) bytes_122033) {
        mem_122551 = realloc(mem_122551, bytes_122033);
        mem_122551_cached_sizze_131429 = bytes_122033;
    }
    for (; iter_126773 < end; iter_126773++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126857 = m_114517;
        int64_t gtid_118548 = iter_126773;
        int64_t remnant_126858 = iter_126773 - gtid_118548;
        int64_t x_118604 = ((int64_t *) mem_121960.mem)[gtid_118548];
        int64_t flat_tid_118549 = (int64_t) 0;
        int32_t num_tasks_126859;
        int64_t flat_tid_118551 = (int64_t) 0;
        struct futhark_mc_task_131430 futhark_mc_task_131430;
        
        futhark_mc_task_131430.ctx = ctx;
        futhark_mc_task_131430.free_n_114518 = n_114518;
        futhark_mc_task_131430.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131430.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131430.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131430.free_i_114594 = i_114594;
        futhark_mc_task_131430.free_gtid_118548 = gtid_118548;
        futhark_mc_task_131430.free_x_118604 = x_118604;
        futhark_mc_task_131430.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131430.free_mem_122102 = mem_122102.mem;
        futhark_mc_task_131430.free_mem_122106 = mem_122106.mem;
        futhark_mc_task_131430.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131430.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131430.free_bytes_122531 = bytes_122531;
        futhark_mc_task_131430.free_mem_122551 = mem_122551;
        
        struct scheduler_segop futhark_mc_task_131430_task;
        
        futhark_mc_task_131430_task.args = &futhark_mc_task_131430;
        futhark_mc_task_131430_task.top_level_fn =
            futhark_mc_segmap_task_131431;
        futhark_mc_task_131430_task.name = "futhark_mc_segmap_task_131431";
        futhark_mc_task_131430_task.iterations = l_n_m_114568;
        futhark_mc_task_131430_task.task_time =
            &ctx->futhark_mc_segmap_task_131431_total_time;
        futhark_mc_task_131430_task.task_iter =
            &ctx->futhark_mc_segmap_task_131431_total_iter;
        futhark_mc_task_131430_task.sched = STATIC;
        futhark_mc_task_131430_task.nested_fn =
            futhark_mc_segmap_nested_task_131435;
        
        int futhark_mc_segmap_task_131431_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131430_task);
        
        if (futhark_mc_segmap_task_131431_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122585.mem + gtid_118548 * l_n_m_114568 * (int64_t) 4,
                mem_122551 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122551);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131428_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131428_end -
                 futhark_mc_segmap_parloop_131428_start;
        
        ctx->futhark_mc_segmap_parloop_131428_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131428_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131428_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131426(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118547 = tid;
    int num_tasks_126720 = info.nsubtasks;
    struct futhark_mc_task_131420 *futhark_mc_task_131420 =
                                  (struct futhark_mc_task_131420 *) args;
    struct futhark_context *ctx = futhark_mc_task_131420->ctx;
    uint64_t futhark_mc_segmap_nested_task_131426_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131426_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131420->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131420->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131420->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131420->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131420->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131420->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131420->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131420->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131420->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131420->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131420->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131420->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131420->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122531 = futhark_mc_task_131420->free_bytes_122531;
    struct memblock mem_122585 = {.desc ="mem_122585", .mem =
                                  futhark_mc_task_131420->free_mem_122585,
                                  .size =0, .references =NULL};
    int64_t iter_126773;
    struct futhark_mc_segmap_parloop_struct_131427
    futhark_mc_segmap_parloop_struct_131427;
    
    futhark_mc_segmap_parloop_struct_131427.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131427.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131427.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131427.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131427.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131427.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131427.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131427.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131427.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131427.free_bytes_122531 = bytes_122531;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122585 = mem_122585.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131428_task;
    
    futhark_mc_segmap_parloop_131428_task.name =
        "futhark_mc_segmap_parloop_131428";
    futhark_mc_segmap_parloop_131428_task.fn = futhark_mc_segmap_parloop_131428;
    futhark_mc_segmap_parloop_131428_task.args =
        &futhark_mc_segmap_parloop_struct_131427;
    futhark_mc_segmap_parloop_131428_task.iterations = iterations;
    futhark_mc_segmap_parloop_131428_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131428_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131428_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131428_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131428_task);
    
    if (futhark_mc_segmap_parloop_131428_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131428_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131428_total_end -
                 futhark_mc_segmap_parloop_131428_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131428_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131428_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131428_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131426_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131426_end -
                 futhark_mc_segmap_nested_task_131426_start;
        
        ctx->futhark_mc_segmap_nested_task_131426_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131426_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131426_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131449 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122586;
    char *free_mem_122691;
    char *free_mem_122695;
};
struct futhark_mc_segmap_parloop_struct_131451 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122586;
    char *free_mem_122691;
    char *free_mem_122695;
};
static int futhark_mc_segmap_parloop_131452(void *args, int64_t start,
                                            int64_t end, int flat_tid_118690,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131451
    *futhark_mc_segmap_parloop_struct_131451 =
    (struct futhark_mc_segmap_parloop_struct_131451 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131451->ctx;
    uint64_t futhark_mc_segmap_parloop_131452_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131452_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131451->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131451->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131451->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131451->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131451->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131451->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131451->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 =
            futhark_mc_segmap_parloop_struct_131451->free_bytes_122586;
    struct memblock mem_122691 = {.desc ="mem_122691", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_122691,
                                  .size =0, .references =NULL};
    struct memblock mem_122695 = {.desc ="mem_122695", .mem =
                                  futhark_mc_segmap_parloop_struct_131451->free_mem_122695,
                                  .size =0, .references =NULL};
    size_t mem_122630_cached_sizze_131453 = 0;
    char *mem_122630 = NULL;
    size_t mem_122633_cached_sizze_131454 = 0;
    char *mem_122633 = NULL;
    size_t mem_122650_cached_sizze_131455 = 0;
    char *mem_122650 = NULL;
    size_t mem_122653_cached_sizze_131456 = 0;
    char *mem_122653 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126950 = start;
    
    if (mem_122630_cached_sizze_131453 < (size_t) bytes_122033) {
        mem_122630 = realloc(mem_122630, bytes_122033);
        mem_122630_cached_sizze_131453 = bytes_122033;
    }
    if (mem_122633_cached_sizze_131454 < (size_t) bytes_122033) {
        mem_122633 = realloc(mem_122633, bytes_122033);
        mem_122633_cached_sizze_131454 = bytes_122033;
    }
    if (mem_122650_cached_sizze_131455 < (size_t) bytes_122586) {
        mem_122650 = realloc(mem_122650, bytes_122586);
        mem_122650_cached_sizze_131455 = bytes_122586;
    }
    if (mem_122653_cached_sizze_131456 < (size_t) bytes_122586) {
        mem_122653 = realloc(mem_122653, bytes_122586);
        mem_122653_cached_sizze_131456 = bytes_122586;
    }
    for (; iter_126950 < end; iter_126950++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127027 = m_114517;
        int64_t gtid_118691 = iter_126950;
        int64_t remnant_127028 = iter_126950 - gtid_118691;
        int64_t x_115533 = ((int64_t *) mem_121960.mem)[gtid_118691];
        
        for (int64_t i_126951 = 0; i_126951 < l_n_m_114568; i_126951++) {
            int64_t x_126954 = ((int64_t *) mem_122102.mem)[gtid_118691 *
                                                            l_n_m_114568 +
                                                            i_126951];
            float x_126955 = ((float *) mem_122106.mem)[gtid_118691 *
                                                        l_n_m_114568 +
                                                        i_126951];
            int64_t min_arg_126956 = mul64(t_jump_114525, i_126951);
            int64_t min_res_126957 = smin64(i_114594, min_arg_126956);
            float defunc_0_f_res_126958 = sitofp_i64_f32(min_res_126957);
            float defunc_2_reduce_res_126961;
            float defunc_2_reduce_res_126962;
            float defunc_2_reduce_res_126963;
            float redout_126967;
            float redout_126968;
            float redout_126969;
            
            redout_126967 = 0.0F;
            redout_126968 = 0.0F;
            redout_126969 = 0.0F;
            for (int64_t i_126966 = 0; i_126966 < l_window_114522; i_126966++) {
                bool cond_126972 = sle64(x_115533, i_126966);
                float defunc_0_f_res_126973;
                
                if (cond_126972) {
                    defunc_0_f_res_126973 = 0.0F;
                } else {
                    int64_t i_126974 = add64(x_126954, i_126966);
                    float x_126975 = ((float *) mem_121982.mem)[gtid_118691 *
                                                                n_114518 +
                                                                i_126974];
                    float defunc_0_f_res_f_res_126976 = 1.0F + x_126975;
                    
                    defunc_0_f_res_126973 = defunc_0_f_res_f_res_126976;
                }
                
                float defunc_0_f_res_126977;
                
                if (cond_126972) {
                    defunc_0_f_res_126977 = 0.0F;
                } else {
                    int64_t i_126978 = add64(x_126954, i_126966);
                    float x_126979 = ((float *) mem_122408.mem)[gtid_118691 *
                                                                n_114518 +
                                                                i_126978];
                    
                    defunc_0_f_res_126977 = x_126979;
                }
                
                float x_j_126980 = defunc_0_f_res_126973 -
                      defunc_0_f_res_126958;
                float abs_res_126981 = (float) fabs(x_j_126980);
                float tmp1_126982 = abs_res_126981 / x_126955;
                float x_126983 = tmp1_126982 * tmp1_126982;
                float y_126984 = tmp1_126982 * x_126983;
                float tmp2_126985 = 1.0F - y_126984;
                float x_126986 = tmp2_126985 * tmp2_126985;
                float tmp3_126987 = tmp2_126985 * x_126986;
                float tmp4_126988 = defunc_0_f_res_126977 * tmp3_126987;
                float defunc_1_f_res_126989 = x_j_126980 * tmp4_126988;
                float defunc_1_f_res_126990 = x_j_126980 *
                      defunc_1_f_res_126989;
                float defunc_1_op_res_126991 = tmp4_126988 + redout_126967;
                float defunc_1_op_res_126992 = defunc_1_f_res_126989 +
                      redout_126968;
                float defunc_1_op_res_126993 = defunc_1_f_res_126990 +
                      redout_126969;
                
                ((float *) mem_122650)[i_126966] = defunc_1_f_res_126989;
                ((float *) mem_122653)[i_126966] = tmp4_126988;
                
                float redout_tmp_127031 = defunc_1_op_res_126991;
                float redout_tmp_127032 = defunc_1_op_res_126992;
                float redout_tmp_127033 = defunc_1_op_res_126993;
                
                redout_126967 = redout_tmp_127031;
                redout_126968 = redout_tmp_127032;
                redout_126969 = redout_tmp_127033;
            }
            defunc_2_reduce_res_126961 = redout_126967;
            defunc_2_reduce_res_126962 = redout_126968;
            defunc_2_reduce_res_126963 = redout_126969;
            
            float x_126996 = defunc_2_reduce_res_126961 *
                  defunc_2_reduce_res_126963;
            float y_126997 = defunc_2_reduce_res_126962 *
                  defunc_2_reduce_res_126962;
            float y_126998 = x_126996 - y_126997;
            float det1_126999 = 1.0F / y_126998;
            float a11_127000 = defunc_2_reduce_res_126963 * det1_126999;
            float negate_arg_127001 = defunc_2_reduce_res_126962 * det1_126999;
            float b11_127002 = 0.0F - negate_arg_127001;
            float c11_127003 = defunc_2_reduce_res_126961 * det1_126999;
            float defunc_2_reduce_res_127004;
            float defunc_2_reduce_res_127005;
            float redout_127007;
            float redout_127008;
            
            redout_127007 = 0.0F;
            redout_127008 = 0.0F;
            for (int64_t i_127006 = 0; i_127006 < l_window_114522; i_127006++) {
                float x_127009 = ((float *) mem_122653)[i_127006];
                float x_127010 = ((float *) mem_122650)[i_127006];
                bool cond_127011 = sle64(x_115533, i_127006);
                float defunc_0_f_res_127012;
                
                if (cond_127011) {
                    defunc_0_f_res_127012 = 0.0F;
                } else {
                    int64_t i_127013 = add64(x_126954, i_127006);
                    float x_127014 = ((float *) mem_122404.mem)[gtid_118691 *
                                                                n_114518 +
                                                                i_127013];
                    
                    defunc_0_f_res_127012 = x_127014;
                }
                
                float x_127015 = a11_127000 * x_127009;
                float y_127016 = b11_127002 * x_127010;
                float x_127017 = x_127015 + y_127016;
                float defunc_9_fit_fun_res_127018 = defunc_0_f_res_127012 *
                      x_127017;
                float x_127019 = b11_127002 * x_127009;
                float y_127020 = c11_127003 * x_127010;
                float x_127021 = x_127019 + y_127020;
                float defunc_9_slope_fun_res_127022 = defunc_0_f_res_127012 *
                      x_127021;
                float defunc_1_op_res_127023 = defunc_9_fit_fun_res_127018 +
                      redout_127007;
                float defunc_1_op_res_127024 = defunc_9_slope_fun_res_127022 +
                      redout_127008;
                float redout_tmp_127036 = defunc_1_op_res_127023;
                float redout_tmp_127037 = defunc_1_op_res_127024;
                
                redout_127007 = redout_tmp_127036;
                redout_127008 = redout_tmp_127037;
            }
            defunc_2_reduce_res_127004 = redout_127007;
            defunc_2_reduce_res_127005 = redout_127008;
            ((float *) mem_122630)[i_126951] = defunc_2_reduce_res_127004;
            ((float *) mem_122633)[i_126951] = defunc_2_reduce_res_127005;
        }
        memmove(mem_122691.mem + gtid_118691 * l_n_m_114568 * (int64_t) 4,
                mem_122630 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122695.mem + gtid_118691 * l_n_m_114568 * (int64_t) 4,
                mem_122633 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122630);
    free(mem_122633);
    free(mem_122650);
    free(mem_122653);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131452_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131452_end -
                 futhark_mc_segmap_parloop_131452_start;
        
        ctx->futhark_mc_segmap_parloop_131452_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131452_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131452_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131450(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118690 = tid;
    int num_tasks_126949 = info.nsubtasks;
    struct futhark_mc_task_131449 *futhark_mc_task_131449 =
                                  (struct futhark_mc_task_131449 *) args;
    struct futhark_context *ctx = futhark_mc_task_131449->ctx;
    uint64_t futhark_mc_segmap_task_131450_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131450_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131449->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131449->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131449->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131449->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131449->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131449->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131449->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131449->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131449->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131449->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131449->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131449->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131449->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 = futhark_mc_task_131449->free_bytes_122586;
    struct memblock mem_122691 = {.desc ="mem_122691", .mem =
                                  futhark_mc_task_131449->free_mem_122691,
                                  .size =0, .references =NULL};
    struct memblock mem_122695 = {.desc ="mem_122695", .mem =
                                  futhark_mc_task_131449->free_mem_122695,
                                  .size =0, .references =NULL};
    int64_t iter_126950;
    struct futhark_mc_segmap_parloop_struct_131451
    futhark_mc_segmap_parloop_struct_131451;
    
    futhark_mc_segmap_parloop_struct_131451.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131451.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131451.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131451.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131451.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131451.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131451.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131451.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131451.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131451.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131451.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131451.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131451.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131451.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131451.free_bytes_122586 = bytes_122586;
    futhark_mc_segmap_parloop_struct_131451.free_mem_122691 = mem_122691.mem;
    futhark_mc_segmap_parloop_struct_131451.free_mem_122695 = mem_122695.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131452_task;
    
    futhark_mc_segmap_parloop_131452_task.name =
        "futhark_mc_segmap_parloop_131452";
    futhark_mc_segmap_parloop_131452_task.fn = futhark_mc_segmap_parloop_131452;
    futhark_mc_segmap_parloop_131452_task.args =
        &futhark_mc_segmap_parloop_struct_131451;
    futhark_mc_segmap_parloop_131452_task.iterations = iterations;
    futhark_mc_segmap_parloop_131452_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131452_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131452_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131452_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131452_task);
    
    if (futhark_mc_segmap_parloop_131452_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131452_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131452_total_end -
                 futhark_mc_segmap_parloop_131452_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131452_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131452_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131452_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131450_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131450_end -
                 futhark_mc_segmap_task_131450_start;
        
        ctx->futhark_mc_segmap_task_131450_runs[tid]++;
        ctx->futhark_mc_segmap_task_131450_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131450_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131458 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122586;
    char *free_mem_122691;
    char *free_mem_122695;
};
struct futhark_mc_task_131462 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122586;
    char *free_mem_122624;
    char *free_mem_122627;
};
struct futhark_mc_segmap_parloop_struct_131464 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122586;
    char *free_mem_122624;
    char *free_mem_122627;
};
static int futhark_mc_segmap_parloop_131465(void *args, int64_t start,
                                            int64_t end, int flat_tid_118694,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131464
    *futhark_mc_segmap_parloop_struct_131464 =
    (struct futhark_mc_segmap_parloop_struct_131464 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131464->ctx;
    uint64_t futhark_mc_segmap_parloop_131465_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131465_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131464->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131464->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131464->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131464->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131464->free_i_114594;
    int64_t gtid_118693 =
            futhark_mc_segmap_parloop_struct_131464->free_gtid_118693;
    int64_t x_118778 = futhark_mc_segmap_parloop_struct_131464->free_x_118778;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 =
            futhark_mc_segmap_parloop_struct_131464->free_bytes_122586;
    struct memblock mem_122624 = {.desc ="mem_122624", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_122624,
                                  .size =0, .references =NULL};
    struct memblock mem_122627 = {.desc ="mem_122627", .mem =
                                  futhark_mc_segmap_parloop_struct_131464->free_mem_122627,
                                  .size =0, .references =NULL};
    size_t mem_127114_cached_sizze_131466 = 0;
    char *mem_127114 = NULL;
    size_t mem_127116_cached_sizze_131467 = 0;
    char *mem_127116 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127185 = start;
    
    if (mem_127114_cached_sizze_131466 < (size_t) bytes_122586) {
        mem_127114 = realloc(mem_127114, bytes_122586);
        mem_127114_cached_sizze_131466 = bytes_122586;
    }
    if (mem_127116_cached_sizze_131467 < (size_t) bytes_122586) {
        mem_127116 = realloc(mem_127116, bytes_122586);
        mem_127116_cached_sizze_131467 = bytes_122586;
    }
    for (; iter_127185 < end; iter_127185++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127235 = l_n_m_114568;
        int64_t gtid_118695 = iter_127185;
        int64_t remnant_127236 = iter_127185 - gtid_118695;
        int64_t x_127109 = ((int64_t *) mem_122102.mem)[gtid_118693 *
                                                        l_n_m_114568 +
                                                        gtid_118695];
        float x_127110 = ((float *) mem_122106.mem)[gtid_118693 * l_n_m_114568 +
                                                    gtid_118695];
        int64_t min_arg_127111 = mul64(t_jump_114525, gtid_118695);
        int64_t min_res_127112 = smin64(i_114594, min_arg_127111);
        float defunc_0_f_res_127113 = sitofp_i64_f32(min_res_127112);
        float defunc_2_reduce_res_127118;
        float defunc_2_reduce_res_127119;
        float defunc_2_reduce_res_127120;
        float redout_127187;
        float redout_127188;
        float redout_127189;
        
        redout_127187 = 0.0F;
        redout_127188 = 0.0F;
        redout_127189 = 0.0F;
        for (int64_t i_127186 = 0; i_127186 < l_window_114522; i_127186++) {
            bool cond_127192 = sle64(x_118778, i_127186);
            float defunc_0_f_res_127193;
            
            if (cond_127192) {
                defunc_0_f_res_127193 = 0.0F;
            } else {
                int64_t i_127194 = add64(x_127109, i_127186);
                float x_127195 = ((float *) mem_121982.mem)[gtid_118693 *
                                                            n_114518 +
                                                            i_127194];
                float defunc_0_f_res_f_res_127196 = 1.0F + x_127195;
                
                defunc_0_f_res_127193 = defunc_0_f_res_f_res_127196;
            }
            
            float defunc_0_f_res_127197;
            
            if (cond_127192) {
                defunc_0_f_res_127197 = 0.0F;
            } else {
                int64_t i_127198 = add64(x_127109, i_127186);
                float x_127199 = ((float *) mem_122408.mem)[gtid_118693 *
                                                            n_114518 +
                                                            i_127198];
                
                defunc_0_f_res_127197 = x_127199;
            }
            
            float x_j_127200 = defunc_0_f_res_127193 - defunc_0_f_res_127113;
            float abs_res_127201 = (float) fabs(x_j_127200);
            float tmp1_127202 = abs_res_127201 / x_127110;
            float x_127203 = tmp1_127202 * tmp1_127202;
            float y_127204 = tmp1_127202 * x_127203;
            float tmp2_127205 = 1.0F - y_127204;
            float x_127206 = tmp2_127205 * tmp2_127205;
            float tmp3_127207 = tmp2_127205 * x_127206;
            float tmp4_127208 = defunc_0_f_res_127197 * tmp3_127207;
            float defunc_1_f_res_127209 = x_j_127200 * tmp4_127208;
            float defunc_1_f_res_127210 = x_j_127200 * defunc_1_f_res_127209;
            float defunc_1_op_res_127211 = tmp4_127208 + redout_127187;
            float defunc_1_op_res_127212 = defunc_1_f_res_127209 +
                  redout_127188;
            float defunc_1_op_res_127213 = defunc_1_f_res_127210 +
                  redout_127189;
            
            ((float *) mem_127114)[i_127186] = defunc_1_f_res_127209;
            ((float *) mem_127116)[i_127186] = tmp4_127208;
            
            float redout_tmp_127237 = defunc_1_op_res_127211;
            float redout_tmp_127238 = defunc_1_op_res_127212;
            float redout_tmp_127239 = defunc_1_op_res_127213;
            
            redout_127187 = redout_tmp_127237;
            redout_127188 = redout_tmp_127238;
            redout_127189 = redout_tmp_127239;
        }
        defunc_2_reduce_res_127118 = redout_127187;
        defunc_2_reduce_res_127119 = redout_127188;
        defunc_2_reduce_res_127120 = redout_127189;
        
        float x_127153 = defunc_2_reduce_res_127118 *
              defunc_2_reduce_res_127120;
        float y_127154 = defunc_2_reduce_res_127119 *
              defunc_2_reduce_res_127119;
        float y_127155 = x_127153 - y_127154;
        float det1_127156 = 1.0F / y_127155;
        float a11_127157 = defunc_2_reduce_res_127120 * det1_127156;
        float negate_arg_127158 = defunc_2_reduce_res_127119 * det1_127156;
        float b11_127159 = 0.0F - negate_arg_127158;
        float c11_127160 = defunc_2_reduce_res_127118 * det1_127156;
        float defunc_2_reduce_res_127161;
        float defunc_2_reduce_res_127162;
        float redout_127217;
        float redout_127218;
        
        redout_127217 = 0.0F;
        redout_127218 = 0.0F;
        for (int64_t i_127216 = 0; i_127216 < l_window_114522; i_127216++) {
            float x_127219 = ((float *) mem_127116)[i_127216];
            float x_127220 = ((float *) mem_127114)[i_127216];
            bool cond_127221 = sle64(x_118778, i_127216);
            float defunc_0_f_res_127222;
            
            if (cond_127221) {
                defunc_0_f_res_127222 = 0.0F;
            } else {
                int64_t i_127223 = add64(x_127109, i_127216);
                float x_127224 = ((float *) mem_122404.mem)[gtid_118693 *
                                                            n_114518 +
                                                            i_127223];
                
                defunc_0_f_res_127222 = x_127224;
            }
            
            float x_127225 = a11_127157 * x_127219;
            float y_127226 = b11_127159 * x_127220;
            float x_127227 = x_127225 + y_127226;
            float defunc_9_fit_fun_res_127228 = defunc_0_f_res_127222 *
                  x_127227;
            float x_127229 = b11_127159 * x_127219;
            float y_127230 = c11_127160 * x_127220;
            float x_127231 = x_127229 + y_127230;
            float defunc_9_slope_fun_res_127232 = defunc_0_f_res_127222 *
                  x_127231;
            float defunc_1_op_res_127233 = defunc_9_fit_fun_res_127228 +
                  redout_127217;
            float defunc_1_op_res_127234 = defunc_9_slope_fun_res_127232 +
                  redout_127218;
            float redout_tmp_127242 = defunc_1_op_res_127233;
            float redout_tmp_127243 = defunc_1_op_res_127234;
            
            redout_127217 = redout_tmp_127242;
            redout_127218 = redout_tmp_127243;
        }
        defunc_2_reduce_res_127161 = redout_127217;
        defunc_2_reduce_res_127162 = redout_127218;
        ((float *) mem_122624.mem)[gtid_118695] = defunc_2_reduce_res_127161;
        ((float *) mem_122627.mem)[gtid_118695] = defunc_2_reduce_res_127162;
    }
    
  cleanup:
    { }
    free(mem_127114);
    free(mem_127116);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131465_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131465_end -
                 futhark_mc_segmap_parloop_131465_start;
        
        ctx->futhark_mc_segmap_parloop_131465_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131465_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131465_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131463(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118694 = tid;
    int num_tasks_127184 = info.nsubtasks;
    struct futhark_mc_task_131462 *futhark_mc_task_131462 =
                                  (struct futhark_mc_task_131462 *) args;
    struct futhark_context *ctx = futhark_mc_task_131462->ctx;
    uint64_t futhark_mc_segmap_task_131463_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131463_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131462->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131462->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131462->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131462->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131462->free_i_114594;
    int64_t gtid_118693 = futhark_mc_task_131462->free_gtid_118693;
    int64_t x_118778 = futhark_mc_task_131462->free_x_118778;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131462->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131462->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131462->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131462->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131462->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 = futhark_mc_task_131462->free_bytes_122586;
    struct memblock mem_122624 = {.desc ="mem_122624", .mem =
                                  futhark_mc_task_131462->free_mem_122624,
                                  .size =0, .references =NULL};
    struct memblock mem_122627 = {.desc ="mem_122627", .mem =
                                  futhark_mc_task_131462->free_mem_122627,
                                  .size =0, .references =NULL};
    int64_t iter_127185;
    struct futhark_mc_segmap_parloop_struct_131464
    futhark_mc_segmap_parloop_struct_131464;
    
    futhark_mc_segmap_parloop_struct_131464.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131464.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131464.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131464.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131464.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131464.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131464.free_gtid_118693 = gtid_118693;
    futhark_mc_segmap_parloop_struct_131464.free_x_118778 = x_118778;
    futhark_mc_segmap_parloop_struct_131464.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131464.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131464.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131464.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131464.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131464.free_bytes_122586 = bytes_122586;
    futhark_mc_segmap_parloop_struct_131464.free_mem_122624 = mem_122624.mem;
    futhark_mc_segmap_parloop_struct_131464.free_mem_122627 = mem_122627.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131465_task;
    
    futhark_mc_segmap_parloop_131465_task.name =
        "futhark_mc_segmap_parloop_131465";
    futhark_mc_segmap_parloop_131465_task.fn = futhark_mc_segmap_parloop_131465;
    futhark_mc_segmap_parloop_131465_task.args =
        &futhark_mc_segmap_parloop_struct_131464;
    futhark_mc_segmap_parloop_131465_task.iterations = iterations;
    futhark_mc_segmap_parloop_131465_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131465_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131465_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131465_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131465_task);
    
    if (futhark_mc_segmap_parloop_131465_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131465_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131465_total_end -
                 futhark_mc_segmap_parloop_131465_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131465_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131465_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131465_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131463_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131463_end -
                 futhark_mc_segmap_task_131463_start;
        
        ctx->futhark_mc_segmap_task_131463_runs[tid]++;
        ctx->futhark_mc_segmap_task_131463_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131463_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131469 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122586;
    char *free_mem_122624;
    char *free_mem_122627;
};
struct futhark_mc_task_131473 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_127039;
    float free_x_127040;
    float free_defunc_0_f_res_127043;
    float *retval_defunc_2_reduce_res_127046;
    float *retval_defunc_2_reduce_res_127047;
    float *retval_defunc_2_reduce_res_127048;
    char *retval_mem_127044;
    char *retval_mem_127045;
};
struct futhark_mc_segred_stage_1_parloop_struct_131478 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_127039;
    float free_x_127040;
    float free_defunc_0_f_res_127043;
    char *free_mem_127044;
    char *free_mem_127045;
    char *free_reduce_stage_1_tid_res_arr_mem_127296;
    char *free_reduce_stage_1_tid_res_arr_mem_127298;
    char *free_reduce_stage_1_tid_res_arr_mem_127300;
};
static int futhark_mc_segred_stage_1_parloop_131479(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118698,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131478
    *futhark_mc_segred_stage_1_parloop_struct_131478 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131478 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131478->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131479_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131479_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131478->free_n_114518;
    int64_t gtid_118693 =
            futhark_mc_segred_stage_1_parloop_struct_131478->free_gtid_118693;
    int64_t x_118778 =
            futhark_mc_segred_stage_1_parloop_struct_131478->free_x_118778;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131478->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131478->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_127039 =
            futhark_mc_segred_stage_1_parloop_struct_131478->free_x_127039;
    float x_127040 =
          futhark_mc_segred_stage_1_parloop_struct_131478->free_x_127040;
    float defunc_0_f_res_127043 =
          futhark_mc_segred_stage_1_parloop_struct_131478->free_defunc_0_f_res_127043;
    struct memblock mem_127044 = {.desc ="mem_127044", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131478->free_mem_127044,
                                  .size =0, .references =NULL};
    struct memblock mem_127045 = {.desc ="mem_127045", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131478->free_mem_127045,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127296 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127296",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131478->free_reduce_stage_1_tid_res_arr_mem_127296,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127298 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127298",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131478->free_reduce_stage_1_tid_res_arr_mem_127298,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127300 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127300",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131478->free_reduce_stage_1_tid_res_arr_mem_127300,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127302 = start;
    float x_127245;
    float x_127246;
    float x_127248;
    float x_127249;
    float x_127251;
    float x_127252;
    float local_acc_127303 = 0.0F;
    float local_acc_127304 = 0.0F;
    float local_acc_127305 = 0.0F;
    
    for (; iter_127302 < end; iter_127302++) {
        int64_t gtid_118699 = iter_127302;
        bool cond_127254 = sle64(x_118778, gtid_118699);
        float defunc_0_f_res_127255;
        
        if (cond_127254) {
            defunc_0_f_res_127255 = 0.0F;
        } else {
            int64_t i_127256 = add64(gtid_118699, x_127039);
            float x_127257 = ((float *) mem_121982.mem)[gtid_118693 * n_114518 +
                                                        i_127256];
            float defunc_0_f_res_f_res_127258 = 1.0F + x_127257;
            
            defunc_0_f_res_127255 = defunc_0_f_res_f_res_127258;
        }
        
        float defunc_0_f_res_127259;
        
        if (cond_127254) {
            defunc_0_f_res_127259 = 0.0F;
        } else {
            int64_t i_127260 = add64(gtid_118699, x_127039);
            float x_127261 = ((float *) mem_122408.mem)[gtid_118693 * n_114518 +
                                                        i_127260];
            
            defunc_0_f_res_127259 = x_127261;
        }
        
        float x_j_127262 = defunc_0_f_res_127255 - defunc_0_f_res_127043;
        float abs_res_127263 = (float) fabs(x_j_127262);
        float tmp1_127264 = abs_res_127263 / x_127040;
        float x_127265 = tmp1_127264 * tmp1_127264;
        float y_127266 = tmp1_127264 * x_127265;
        float tmp2_127267 = 1.0F - y_127266;
        float x_127268 = tmp2_127267 * tmp2_127267;
        float tmp3_127269 = tmp2_127267 * x_127268;
        float tmp4_127270 = defunc_0_f_res_127259 * tmp3_127269;
        float defunc_1_f_res_127271 = x_j_127262 * tmp4_127270;
        float defunc_1_f_res_127272 = x_j_127262 * defunc_1_f_res_127271;
        
        // save map-out results
        {
            ((float *) mem_127044.mem)[gtid_118699] = defunc_1_f_res_127271;
            ((float *) mem_127045.mem)[gtid_118699] = tmp4_127270;
        }
        // Load accum params
        {
            x_127245 = local_acc_127303;
        }
        // Load next params
        {
            x_127246 = tmp4_127270;
        }
        // Red body
        {
            float defunc_1_op_res_127247 = x_127245 + x_127246;
            
            local_acc_127303 = defunc_1_op_res_127247;
        }
        // Load accum params
        {
            x_127248 = local_acc_127304;
        }
        // Load next params
        {
            x_127249 = defunc_1_f_res_127271;
        }
        // Red body
        {
            float defunc_1_op_res_127250 = x_127248 + x_127249;
            
            local_acc_127304 = defunc_1_op_res_127250;
        }
        // Load accum params
        {
            x_127251 = local_acc_127305;
        }
        // Load next params
        {
            x_127252 = defunc_1_f_res_127272;
        }
        // Red body
        {
            float defunc_1_op_res_127253 = x_127251 + x_127252;
            
            local_acc_127305 = defunc_1_op_res_127253;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127296.mem)[flat_tid_118698] =
        local_acc_127303;
    ((float *) reduce_stage_1_tid_res_arr_mem_127298.mem)[flat_tid_118698] =
        local_acc_127304;
    ((float *) reduce_stage_1_tid_res_arr_mem_127300.mem)[flat_tid_118698] =
        local_acc_127305;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131479_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131479_end -
                 futhark_mc_segred_stage_1_parloop_131479_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131479_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131479_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131479_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131474(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118698 = tid;
    int num_tasks_127295 = info.nsubtasks;
    struct futhark_mc_task_131473 *futhark_mc_task_131473 =
                                  (struct futhark_mc_task_131473 *) args;
    struct futhark_context *ctx = futhark_mc_task_131473->ctx;
    uint64_t futhark_mc_segred_task_131474_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131474_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131473->free_n_114518;
    int64_t gtid_118693 = futhark_mc_task_131473->free_gtid_118693;
    int64_t x_118778 = futhark_mc_task_131473->free_x_118778;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131473->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131473->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_127039 = futhark_mc_task_131473->free_x_127039;
    float x_127040 = futhark_mc_task_131473->free_x_127040;
    float defunc_0_f_res_127043 =
          futhark_mc_task_131473->free_defunc_0_f_res_127043;
    float defunc_2_reduce_res_127046 =
          *futhark_mc_task_131473->retval_defunc_2_reduce_res_127046;
    float defunc_2_reduce_res_127047 =
          *futhark_mc_task_131473->retval_defunc_2_reduce_res_127047;
    float defunc_2_reduce_res_127048 =
          *futhark_mc_task_131473->retval_defunc_2_reduce_res_127048;
    struct memblock mem_127044 = {.desc ="mem_127044", .mem =
                                  futhark_mc_task_131473->retval_mem_127044,
                                  .size =0, .references =NULL};
    struct memblock mem_127045 = {.desc ="mem_127045", .mem =
                                  futhark_mc_task_131473->retval_mem_127045,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127296_cached_sizze_131475 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127296 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127298_cached_sizze_131476 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127298 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127300_cached_sizze_131477 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127300 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127296_cached_sizze_131475 <
        (size_t) ((int64_t) 4 * num_tasks_127295)) {
        reduce_stage_1_tid_res_arr_mem_127296 =
            realloc(reduce_stage_1_tid_res_arr_mem_127296, (int64_t) 4 *
                    num_tasks_127295);
        reduce_stage_1_tid_res_arr_mem_127296_cached_sizze_131475 =
            (int64_t) 4 * num_tasks_127295;
    }
    if (reduce_stage_1_tid_res_arr_mem_127298_cached_sizze_131476 <
        (size_t) ((int64_t) 4 * num_tasks_127295)) {
        reduce_stage_1_tid_res_arr_mem_127298 =
            realloc(reduce_stage_1_tid_res_arr_mem_127298, (int64_t) 4 *
                    num_tasks_127295);
        reduce_stage_1_tid_res_arr_mem_127298_cached_sizze_131476 =
            (int64_t) 4 * num_tasks_127295;
    }
    if (reduce_stage_1_tid_res_arr_mem_127300_cached_sizze_131477 <
        (size_t) ((int64_t) 4 * num_tasks_127295)) {
        reduce_stage_1_tid_res_arr_mem_127300 =
            realloc(reduce_stage_1_tid_res_arr_mem_127300, (int64_t) 4 *
                    num_tasks_127295);
        reduce_stage_1_tid_res_arr_mem_127300_cached_sizze_131477 =
            (int64_t) 4 * num_tasks_127295;
    }
    
    int64_t iter_127302;
    struct futhark_mc_segred_stage_1_parloop_struct_131478
    futhark_mc_segred_stage_1_parloop_struct_131478;
    
    futhark_mc_segred_stage_1_parloop_struct_131478.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_gtid_118693 =
        gtid_118693;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_x_118778 = x_118778;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_x_127039 = x_127039;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_x_127040 = x_127040;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_defunc_0_f_res_127043 =
        defunc_0_f_res_127043;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_mem_127044 =
        mem_127044.mem;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_mem_127045 =
        mem_127045.mem;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_reduce_stage_1_tid_res_arr_mem_127296 =
        reduce_stage_1_tid_res_arr_mem_127296;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_reduce_stage_1_tid_res_arr_mem_127298 =
        reduce_stage_1_tid_res_arr_mem_127298;
    futhark_mc_segred_stage_1_parloop_struct_131478.free_reduce_stage_1_tid_res_arr_mem_127300 =
        reduce_stage_1_tid_res_arr_mem_127300;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131479_task;
    
    futhark_mc_segred_stage_1_parloop_131479_task.name =
        "futhark_mc_segred_stage_1_parloop_131479";
    futhark_mc_segred_stage_1_parloop_131479_task.fn =
        futhark_mc_segred_stage_1_parloop_131479;
    futhark_mc_segred_stage_1_parloop_131479_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131478;
    futhark_mc_segred_stage_1_parloop_131479_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131479_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131479_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131479_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131479_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131479_task);
    
    if (futhark_mc_segred_stage_1_parloop_131479_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131479_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131479_total_end -
                 futhark_mc_segred_stage_1_parloop_131479_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131479_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131479_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131479_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127046 = 0.0F;
        defunc_2_reduce_res_127047 = 0.0F;
        defunc_2_reduce_res_127048 = 0.0F;
    }
    
    float x_127306;
    float x_127307;
    float x_127309;
    float x_127310;
    float x_127312;
    float x_127313;
    
    for (int32_t i_127315 = 0; i_127315 < num_tasks_127295; i_127315++) {
        flat_tid_118698 = i_127315;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127306 = defunc_2_reduce_res_127046;
            }
            // load next params
            {
                x_127307 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127296)[flat_tid_118698];
            }
            // red body
            {
                float defunc_1_op_res_127308 = x_127306 + x_127307;
                
                defunc_2_reduce_res_127046 = defunc_1_op_res_127308;
            }
            // load acc params
            {
                x_127309 = defunc_2_reduce_res_127047;
            }
            // load next params
            {
                x_127310 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127298)[flat_tid_118698];
            }
            // red body
            {
                float defunc_1_op_res_127311 = x_127309 + x_127310;
                
                defunc_2_reduce_res_127047 = defunc_1_op_res_127311;
            }
            // load acc params
            {
                x_127312 = defunc_2_reduce_res_127048;
            }
            // load next params
            {
                x_127313 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127300)[flat_tid_118698];
            }
            // red body
            {
                float defunc_1_op_res_127314 = x_127312 + x_127313;
                
                defunc_2_reduce_res_127048 = defunc_1_op_res_127314;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127296);
    free(reduce_stage_1_tid_res_arr_mem_127298);
    free(reduce_stage_1_tid_res_arr_mem_127300);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131474_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131474_end -
                 futhark_mc_segred_task_131474_start;
        
        ctx->futhark_mc_segred_task_131474_runs[tid]++;
        ctx->futhark_mc_segred_task_131474_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131474_iter[tid] += iterations;
    }
    *futhark_mc_task_131473->retval_defunc_2_reduce_res_127046 =
        defunc_2_reduce_res_127046;
    *futhark_mc_task_131473->retval_defunc_2_reduce_res_127047 =
        defunc_2_reduce_res_127047;
    *futhark_mc_task_131473->retval_defunc_2_reduce_res_127048 =
        defunc_2_reduce_res_127048;
    futhark_mc_task_131473->retval_mem_127044 = mem_127044.mem;
    futhark_mc_task_131473->retval_mem_127045 = mem_127045.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131480 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_122404;
    int64_t free_x_127039;
    char *free_mem_127044;
    char *free_mem_127045;
    float free_a11_127083;
    float free_b11_127085;
    float free_c11_127086;
    float *retval_defunc_2_reduce_res_127087;
    float *retval_defunc_2_reduce_res_127088;
};
struct futhark_mc_segred_stage_1_parloop_struct_131484 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118693;
    int64_t free_x_118778;
    char *free_mem_122404;
    int64_t free_x_127039;
    char *free_mem_127044;
    char *free_mem_127045;
    float free_a11_127083;
    float free_b11_127085;
    float free_c11_127086;
    char *free_reduce_stage_1_tid_res_arr_mem_127317;
    char *free_reduce_stage_1_tid_res_arr_mem_127319;
};
static int futhark_mc_segred_stage_1_parloop_131485(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118700,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131484
    *futhark_mc_segred_stage_1_parloop_struct_131484 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131484 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131484->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131485_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131485_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131484->free_n_114518;
    int64_t gtid_118693 =
            futhark_mc_segred_stage_1_parloop_struct_131484->free_gtid_118693;
    int64_t x_118778 =
            futhark_mc_segred_stage_1_parloop_struct_131484->free_x_118778;
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131484->free_mem_122404,
                                  .size =0, .references =NULL};
    int64_t x_127039 =
            futhark_mc_segred_stage_1_parloop_struct_131484->free_x_127039;
    struct memblock mem_127044 = {.desc ="mem_127044", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131484->free_mem_127044,
                                  .size =0, .references =NULL};
    struct memblock mem_127045 = {.desc ="mem_127045", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131484->free_mem_127045,
                                  .size =0, .references =NULL};
    float a11_127083 =
          futhark_mc_segred_stage_1_parloop_struct_131484->free_a11_127083;
    float b11_127085 =
          futhark_mc_segred_stage_1_parloop_struct_131484->free_b11_127085;
    float c11_127086 =
          futhark_mc_segred_stage_1_parloop_struct_131484->free_c11_127086;
    struct memblock reduce_stage_1_tid_res_arr_mem_127317 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127317",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131484->free_reduce_stage_1_tid_res_arr_mem_127317,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127319 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127319",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131484->free_reduce_stage_1_tid_res_arr_mem_127319,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127321 = start;
    float x_127273;
    float x_127274;
    float x_127276;
    float x_127277;
    float local_acc_127322 = 0.0F;
    float local_acc_127323 = 0.0F;
    
    for (; iter_127321 < end; iter_127321++) {
        int64_t gtid_118701 = iter_127321;
        float x_127279 = ((float *) mem_127045.mem)[gtid_118701];
        float x_127280 = ((float *) mem_127044.mem)[gtid_118701];
        bool cond_127281 = sle64(x_118778, gtid_118701);
        float defunc_0_f_res_127282;
        
        if (cond_127281) {
            defunc_0_f_res_127282 = 0.0F;
        } else {
            int64_t i_127283 = add64(gtid_118701, x_127039);
            float x_127284 = ((float *) mem_122404.mem)[gtid_118693 * n_114518 +
                                                        i_127283];
            
            defunc_0_f_res_127282 = x_127284;
        }
        
        float x_127285 = a11_127083 * x_127279;
        float y_127286 = b11_127085 * x_127280;
        float x_127287 = x_127285 + y_127286;
        float defunc_9_fit_fun_res_127288 = defunc_0_f_res_127282 * x_127287;
        float x_127289 = b11_127085 * x_127279;
        float y_127290 = c11_127086 * x_127280;
        float x_127291 = x_127289 + y_127290;
        float defunc_9_slope_fun_res_127292 = defunc_0_f_res_127282 * x_127291;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127273 = local_acc_127322;
        }
        // Load next params
        {
            x_127274 = defunc_9_fit_fun_res_127288;
        }
        // Red body
        {
            float defunc_1_op_res_127275 = x_127273 + x_127274;
            
            local_acc_127322 = defunc_1_op_res_127275;
        }
        // Load accum params
        {
            x_127276 = local_acc_127323;
        }
        // Load next params
        {
            x_127277 = defunc_9_slope_fun_res_127292;
        }
        // Red body
        {
            float defunc_1_op_res_127278 = x_127276 + x_127277;
            
            local_acc_127323 = defunc_1_op_res_127278;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127317.mem)[flat_tid_118700] =
        local_acc_127322;
    ((float *) reduce_stage_1_tid_res_arr_mem_127319.mem)[flat_tid_118700] =
        local_acc_127323;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131485_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131485_end -
                 futhark_mc_segred_stage_1_parloop_131485_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131485_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131485_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131485_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131481(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118700 = tid;
    int num_tasks_127316 = info.nsubtasks;
    struct futhark_mc_task_131480 *futhark_mc_task_131480 =
                                  (struct futhark_mc_task_131480 *) args;
    struct futhark_context *ctx = futhark_mc_task_131480->ctx;
    uint64_t futhark_mc_segred_task_131481_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131481_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131480->free_n_114518;
    int64_t gtid_118693 = futhark_mc_task_131480->free_gtid_118693;
    int64_t x_118778 = futhark_mc_task_131480->free_x_118778;
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131480->free_mem_122404,
                                  .size =0, .references =NULL};
    int64_t x_127039 = futhark_mc_task_131480->free_x_127039;
    struct memblock mem_127044 = {.desc ="mem_127044", .mem =
                                  futhark_mc_task_131480->free_mem_127044,
                                  .size =0, .references =NULL};
    struct memblock mem_127045 = {.desc ="mem_127045", .mem =
                                  futhark_mc_task_131480->free_mem_127045,
                                  .size =0, .references =NULL};
    float a11_127083 = futhark_mc_task_131480->free_a11_127083;
    float b11_127085 = futhark_mc_task_131480->free_b11_127085;
    float c11_127086 = futhark_mc_task_131480->free_c11_127086;
    float defunc_2_reduce_res_127087 =
          *futhark_mc_task_131480->retval_defunc_2_reduce_res_127087;
    float defunc_2_reduce_res_127088 =
          *futhark_mc_task_131480->retval_defunc_2_reduce_res_127088;
    size_t reduce_stage_1_tid_res_arr_mem_127317_cached_sizze_131482 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127317 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127319_cached_sizze_131483 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127319 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127317_cached_sizze_131482 <
        (size_t) ((int64_t) 4 * num_tasks_127316)) {
        reduce_stage_1_tid_res_arr_mem_127317 =
            realloc(reduce_stage_1_tid_res_arr_mem_127317, (int64_t) 4 *
                    num_tasks_127316);
        reduce_stage_1_tid_res_arr_mem_127317_cached_sizze_131482 =
            (int64_t) 4 * num_tasks_127316;
    }
    if (reduce_stage_1_tid_res_arr_mem_127319_cached_sizze_131483 <
        (size_t) ((int64_t) 4 * num_tasks_127316)) {
        reduce_stage_1_tid_res_arr_mem_127319 =
            realloc(reduce_stage_1_tid_res_arr_mem_127319, (int64_t) 4 *
                    num_tasks_127316);
        reduce_stage_1_tid_res_arr_mem_127319_cached_sizze_131483 =
            (int64_t) 4 * num_tasks_127316;
    }
    
    int64_t iter_127321;
    struct futhark_mc_segred_stage_1_parloop_struct_131484
    futhark_mc_segred_stage_1_parloop_struct_131484;
    
    futhark_mc_segred_stage_1_parloop_struct_131484.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_gtid_118693 =
        gtid_118693;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_x_118778 = x_118778;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_mem_122404 =
        mem_122404.mem;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_x_127039 = x_127039;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_mem_127044 =
        mem_127044.mem;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_mem_127045 =
        mem_127045.mem;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_a11_127083 =
        a11_127083;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_b11_127085 =
        b11_127085;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_c11_127086 =
        c11_127086;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_reduce_stage_1_tid_res_arr_mem_127317 =
        reduce_stage_1_tid_res_arr_mem_127317;
    futhark_mc_segred_stage_1_parloop_struct_131484.free_reduce_stage_1_tid_res_arr_mem_127319 =
        reduce_stage_1_tid_res_arr_mem_127319;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131485_task;
    
    futhark_mc_segred_stage_1_parloop_131485_task.name =
        "futhark_mc_segred_stage_1_parloop_131485";
    futhark_mc_segred_stage_1_parloop_131485_task.fn =
        futhark_mc_segred_stage_1_parloop_131485;
    futhark_mc_segred_stage_1_parloop_131485_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131484;
    futhark_mc_segred_stage_1_parloop_131485_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131485_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131485_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131485_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131485_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131485_task);
    
    if (futhark_mc_segred_stage_1_parloop_131485_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131485_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131485_total_end -
                 futhark_mc_segred_stage_1_parloop_131485_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131485_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131485_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131485_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127087 = 0.0F;
        defunc_2_reduce_res_127088 = 0.0F;
    }
    
    float x_127324;
    float x_127325;
    float x_127327;
    float x_127328;
    
    for (int32_t i_127330 = 0; i_127330 < num_tasks_127316; i_127330++) {
        flat_tid_118700 = i_127330;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127324 = defunc_2_reduce_res_127087;
            }
            // load next params
            {
                x_127325 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127317)[flat_tid_118700];
            }
            // red body
            {
                float defunc_1_op_res_127326 = x_127324 + x_127325;
                
                defunc_2_reduce_res_127087 = defunc_1_op_res_127326;
            }
            // load acc params
            {
                x_127327 = defunc_2_reduce_res_127088;
            }
            // load next params
            {
                x_127328 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127319)[flat_tid_118700];
            }
            // red body
            {
                float defunc_1_op_res_127329 = x_127327 + x_127328;
                
                defunc_2_reduce_res_127088 = defunc_1_op_res_127329;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127317);
    free(reduce_stage_1_tid_res_arr_mem_127319);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131481_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131481_end -
                 futhark_mc_segred_task_131481_start;
        
        ctx->futhark_mc_segred_task_131481_runs[tid]++;
        ctx->futhark_mc_segred_task_131481_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131481_iter[tid] += iterations;
    }
    *futhark_mc_task_131480->retval_defunc_2_reduce_res_127087 =
        defunc_2_reduce_res_127087;
    *futhark_mc_task_131480->retval_defunc_2_reduce_res_127088 =
        defunc_2_reduce_res_127088;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131470(void *args, int64_t start,
                                            int64_t end, int flat_tid_118696,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131469
    *futhark_mc_segmap_parloop_struct_131469 =
    (struct futhark_mc_segmap_parloop_struct_131469 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131469->ctx;
    uint64_t futhark_mc_segmap_parloop_131470_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131470_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131469->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131469->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131469->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131469->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131469->free_i_114594;
    int64_t gtid_118693 =
            futhark_mc_segmap_parloop_struct_131469->free_gtid_118693;
    int64_t x_118778 = futhark_mc_segmap_parloop_struct_131469->free_x_118778;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 =
            futhark_mc_segmap_parloop_struct_131469->free_bytes_122586;
    struct memblock mem_122624 = {.desc ="mem_122624", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_122624,
                                  .size =0, .references =NULL};
    struct memblock mem_122627 = {.desc ="mem_122627", .mem =
                                  futhark_mc_segmap_parloop_struct_131469->free_mem_122627,
                                  .size =0, .references =NULL};
    size_t mem_127044_cached_sizze_131471 = 0;
    char *mem_127044 = NULL;
    size_t mem_127045_cached_sizze_131472 = 0;
    char *mem_127045 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127244 = start;
    
    if (mem_127044_cached_sizze_131471 < (size_t) bytes_122586) {
        mem_127044 = realloc(mem_127044, bytes_122586);
        mem_127044_cached_sizze_131471 = bytes_122586;
    }
    if (mem_127045_cached_sizze_131472 < (size_t) bytes_122586) {
        mem_127045 = realloc(mem_127045, bytes_122586);
        mem_127045_cached_sizze_131472 = bytes_122586;
    }
    for (; iter_127244 < end; iter_127244++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127293 = l_n_m_114568;
        int64_t gtid_118697 = iter_127244;
        int64_t remnant_127294 = iter_127244 - gtid_118697;
        int64_t x_127039 = ((int64_t *) mem_122102.mem)[gtid_118693 *
                                                        l_n_m_114568 +
                                                        gtid_118697];
        float x_127040 = ((float *) mem_122106.mem)[gtid_118693 * l_n_m_114568 +
                                                    gtid_118697];
        int64_t min_arg_127041 = mul64(t_jump_114525, gtid_118697);
        int64_t min_res_127042 = smin64(i_114594, min_arg_127041);
        float defunc_0_f_res_127043 = sitofp_i64_f32(min_res_127042);
        float defunc_2_reduce_res_127046;
        float defunc_2_reduce_res_127047;
        float defunc_2_reduce_res_127048;
        int64_t flat_tid_118698 = (int64_t) 0;
        int32_t num_tasks_127295;
        struct futhark_mc_task_131473 futhark_mc_task_131473;
        
        futhark_mc_task_131473.ctx = ctx;
        futhark_mc_task_131473.free_n_114518 = n_114518;
        futhark_mc_task_131473.free_gtid_118693 = gtid_118693;
        futhark_mc_task_131473.free_x_118778 = x_118778;
        futhark_mc_task_131473.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131473.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131473.free_x_127039 = x_127039;
        futhark_mc_task_131473.free_x_127040 = x_127040;
        futhark_mc_task_131473.free_defunc_0_f_res_127043 =
            defunc_0_f_res_127043;
        futhark_mc_task_131473.retval_defunc_2_reduce_res_127046 =
            &defunc_2_reduce_res_127046;
        futhark_mc_task_131473.retval_defunc_2_reduce_res_127047 =
            &defunc_2_reduce_res_127047;
        futhark_mc_task_131473.retval_defunc_2_reduce_res_127048 =
            &defunc_2_reduce_res_127048;
        futhark_mc_task_131473.retval_mem_127044 = mem_127044;
        futhark_mc_task_131473.retval_mem_127045 = mem_127045;
        
        struct scheduler_segop futhark_mc_task_131473_task;
        
        futhark_mc_task_131473_task.args = &futhark_mc_task_131473;
        futhark_mc_task_131473_task.top_level_fn =
            futhark_mc_segred_task_131474;
        futhark_mc_task_131473_task.name = "futhark_mc_segred_task_131474";
        futhark_mc_task_131473_task.iterations = l_window_114522;
        futhark_mc_task_131473_task.task_time =
            &ctx->futhark_mc_segred_task_131474_total_time;
        futhark_mc_task_131473_task.task_iter =
            &ctx->futhark_mc_segred_task_131474_total_iter;
        futhark_mc_task_131473_task.sched = STATIC;
        futhark_mc_task_131473_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131474_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131473_task);
        
        if (futhark_mc_segred_task_131474_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_127079 = defunc_2_reduce_res_127046 *
              defunc_2_reduce_res_127048;
        float y_127080 = defunc_2_reduce_res_127047 *
              defunc_2_reduce_res_127047;
        float y_127081 = x_127079 - y_127080;
        float det1_127082 = 1.0F / y_127081;
        float a11_127083 = defunc_2_reduce_res_127048 * det1_127082;
        float negate_arg_127084 = defunc_2_reduce_res_127047 * det1_127082;
        float b11_127085 = 0.0F - negate_arg_127084;
        float c11_127086 = defunc_2_reduce_res_127046 * det1_127082;
        float defunc_2_reduce_res_127087;
        float defunc_2_reduce_res_127088;
        int64_t flat_tid_118700 = (int64_t) 0;
        int32_t num_tasks_127316;
        struct futhark_mc_task_131480 futhark_mc_task_131480;
        
        futhark_mc_task_131480.ctx = ctx;
        futhark_mc_task_131480.free_n_114518 = n_114518;
        futhark_mc_task_131480.free_gtid_118693 = gtid_118693;
        futhark_mc_task_131480.free_x_118778 = x_118778;
        futhark_mc_task_131480.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131480.free_x_127039 = x_127039;
        futhark_mc_task_131480.free_mem_127044 = mem_127044;
        futhark_mc_task_131480.free_mem_127045 = mem_127045;
        futhark_mc_task_131480.free_a11_127083 = a11_127083;
        futhark_mc_task_131480.free_b11_127085 = b11_127085;
        futhark_mc_task_131480.free_c11_127086 = c11_127086;
        futhark_mc_task_131480.retval_defunc_2_reduce_res_127087 =
            &defunc_2_reduce_res_127087;
        futhark_mc_task_131480.retval_defunc_2_reduce_res_127088 =
            &defunc_2_reduce_res_127088;
        
        struct scheduler_segop futhark_mc_task_131480_task;
        
        futhark_mc_task_131480_task.args = &futhark_mc_task_131480;
        futhark_mc_task_131480_task.top_level_fn =
            futhark_mc_segred_task_131481;
        futhark_mc_task_131480_task.name = "futhark_mc_segred_task_131481";
        futhark_mc_task_131480_task.iterations = l_window_114522;
        futhark_mc_task_131480_task.task_time =
            &ctx->futhark_mc_segred_task_131481_total_time;
        futhark_mc_task_131480_task.task_iter =
            &ctx->futhark_mc_segred_task_131481_total_iter;
        futhark_mc_task_131480_task.sched = STATIC;
        futhark_mc_task_131480_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131481_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131480_task);
        
        if (futhark_mc_segred_task_131481_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122624.mem)[gtid_118697] = defunc_2_reduce_res_127087;
        ((float *) mem_122627.mem)[gtid_118697] = defunc_2_reduce_res_127088;
    }
    
  cleanup:
    { }
    free(mem_127044);
    free(mem_127045);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131470_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131470_end -
                 futhark_mc_segmap_parloop_131470_start;
        
        ctx->futhark_mc_segmap_parloop_131470_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131470_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131470_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131468(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118696 = tid;
    int num_tasks_127184 = info.nsubtasks;
    struct futhark_mc_task_131462 *futhark_mc_task_131462 =
                                  (struct futhark_mc_task_131462 *) args;
    struct futhark_context *ctx = futhark_mc_task_131462->ctx;
    uint64_t futhark_mc_segmap_nested_task_131468_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131468_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131462->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131462->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131462->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131462->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131462->free_i_114594;
    int64_t gtid_118693 = futhark_mc_task_131462->free_gtid_118693;
    int64_t x_118778 = futhark_mc_task_131462->free_x_118778;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131462->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131462->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131462->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131462->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131462->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 = futhark_mc_task_131462->free_bytes_122586;
    struct memblock mem_122624 = {.desc ="mem_122624", .mem =
                                  futhark_mc_task_131462->free_mem_122624,
                                  .size =0, .references =NULL};
    struct memblock mem_122627 = {.desc ="mem_122627", .mem =
                                  futhark_mc_task_131462->free_mem_122627,
                                  .size =0, .references =NULL};
    int64_t iter_127244;
    struct futhark_mc_segmap_parloop_struct_131469
    futhark_mc_segmap_parloop_struct_131469;
    
    futhark_mc_segmap_parloop_struct_131469.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131469.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131469.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131469.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131469.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131469.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131469.free_gtid_118693 = gtid_118693;
    futhark_mc_segmap_parloop_struct_131469.free_x_118778 = x_118778;
    futhark_mc_segmap_parloop_struct_131469.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131469.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131469.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131469.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131469.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131469.free_bytes_122586 = bytes_122586;
    futhark_mc_segmap_parloop_struct_131469.free_mem_122624 = mem_122624.mem;
    futhark_mc_segmap_parloop_struct_131469.free_mem_122627 = mem_122627.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131470_task;
    
    futhark_mc_segmap_parloop_131470_task.name =
        "futhark_mc_segmap_parloop_131470";
    futhark_mc_segmap_parloop_131470_task.fn = futhark_mc_segmap_parloop_131470;
    futhark_mc_segmap_parloop_131470_task.args =
        &futhark_mc_segmap_parloop_struct_131469;
    futhark_mc_segmap_parloop_131470_task.iterations = iterations;
    futhark_mc_segmap_parloop_131470_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131470_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131470_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131470_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131470_task);
    
    if (futhark_mc_segmap_parloop_131470_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131470_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131470_total_end -
                 futhark_mc_segmap_parloop_131470_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131470_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131470_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131470_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131468_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131468_end -
                 futhark_mc_segmap_nested_task_131468_start;
        
        ctx->futhark_mc_segmap_nested_task_131468_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131468_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131468_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131459(void *args, int64_t start,
                                            int64_t end, int flat_tid_118692,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131458
    *futhark_mc_segmap_parloop_struct_131458 =
    (struct futhark_mc_segmap_parloop_struct_131458 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131458->ctx;
    uint64_t futhark_mc_segmap_parloop_131459_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131459_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131458->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131458->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131458->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131458->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131458->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131458->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131458->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 =
            futhark_mc_segmap_parloop_struct_131458->free_bytes_122586;
    struct memblock mem_122691 = {.desc ="mem_122691", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122691,
                                  .size =0, .references =NULL};
    struct memblock mem_122695 = {.desc ="mem_122695", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122695,
                                  .size =0, .references =NULL};
    size_t mem_122624_cached_sizze_131460 = 0;
    char *mem_122624 = NULL;
    size_t mem_122627_cached_sizze_131461 = 0;
    char *mem_122627 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127038 = start;
    
    if (mem_122624_cached_sizze_131460 < (size_t) bytes_122033) {
        mem_122624 = realloc(mem_122624, bytes_122033);
        mem_122624_cached_sizze_131460 = bytes_122033;
    }
    if (mem_122627_cached_sizze_131461 < (size_t) bytes_122033) {
        mem_122627 = realloc(mem_122627, bytes_122033);
        mem_122627_cached_sizze_131461 = bytes_122033;
    }
    for (; iter_127038 < end; iter_127038++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127182 = m_114517;
        int64_t gtid_118693 = iter_127038;
        int64_t remnant_127183 = iter_127038 - gtid_118693;
        int64_t x_118778 = ((int64_t *) mem_121960.mem)[gtid_118693];
        int64_t flat_tid_118694 = (int64_t) 0;
        int32_t num_tasks_127184;
        int64_t flat_tid_118696 = (int64_t) 0;
        struct futhark_mc_task_131462 futhark_mc_task_131462;
        
        futhark_mc_task_131462.ctx = ctx;
        futhark_mc_task_131462.free_n_114518 = n_114518;
        futhark_mc_task_131462.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131462.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131462.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131462.free_i_114594 = i_114594;
        futhark_mc_task_131462.free_gtid_118693 = gtid_118693;
        futhark_mc_task_131462.free_x_118778 = x_118778;
        futhark_mc_task_131462.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131462.free_mem_122102 = mem_122102.mem;
        futhark_mc_task_131462.free_mem_122106 = mem_122106.mem;
        futhark_mc_task_131462.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131462.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131462.free_bytes_122586 = bytes_122586;
        futhark_mc_task_131462.free_mem_122624 = mem_122624;
        futhark_mc_task_131462.free_mem_122627 = mem_122627;
        
        struct scheduler_segop futhark_mc_task_131462_task;
        
        futhark_mc_task_131462_task.args = &futhark_mc_task_131462;
        futhark_mc_task_131462_task.top_level_fn =
            futhark_mc_segmap_task_131463;
        futhark_mc_task_131462_task.name = "futhark_mc_segmap_task_131463";
        futhark_mc_task_131462_task.iterations = l_n_m_114568;
        futhark_mc_task_131462_task.task_time =
            &ctx->futhark_mc_segmap_task_131463_total_time;
        futhark_mc_task_131462_task.task_iter =
            &ctx->futhark_mc_segmap_task_131463_total_iter;
        futhark_mc_task_131462_task.sched = STATIC;
        futhark_mc_task_131462_task.nested_fn =
            futhark_mc_segmap_nested_task_131468;
        
        int futhark_mc_segmap_task_131463_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131462_task);
        
        if (futhark_mc_segmap_task_131463_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122691.mem + gtid_118693 * l_n_m_114568 * (int64_t) 4,
                mem_122624 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122695.mem + gtid_118693 * l_n_m_114568 * (int64_t) 4,
                mem_122627 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122624);
    free(mem_122627);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131459_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131459_end -
                 futhark_mc_segmap_parloop_131459_start;
        
        ctx->futhark_mc_segmap_parloop_131459_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131459_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131459_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131457(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118692 = tid;
    int num_tasks_126949 = info.nsubtasks;
    struct futhark_mc_task_131449 *futhark_mc_task_131449 =
                                  (struct futhark_mc_task_131449 *) args;
    struct futhark_context *ctx = futhark_mc_task_131449->ctx;
    uint64_t futhark_mc_segmap_nested_task_131457_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131457_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131449->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131449->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131449->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131449->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131449->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131449->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131449->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131449->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131449->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131449->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131449->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131449->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131449->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122586 = futhark_mc_task_131449->free_bytes_122586;
    struct memblock mem_122691 = {.desc ="mem_122691", .mem =
                                  futhark_mc_task_131449->free_mem_122691,
                                  .size =0, .references =NULL};
    struct memblock mem_122695 = {.desc ="mem_122695", .mem =
                                  futhark_mc_task_131449->free_mem_122695,
                                  .size =0, .references =NULL};
    int64_t iter_127038;
    struct futhark_mc_segmap_parloop_struct_131458
    futhark_mc_segmap_parloop_struct_131458;
    
    futhark_mc_segmap_parloop_struct_131458.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131458.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131458.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131458.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131458.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131458.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131458.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131458.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131458.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131458.free_bytes_122586 = bytes_122586;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122691 = mem_122691.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122695 = mem_122695.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131459_task;
    
    futhark_mc_segmap_parloop_131459_task.name =
        "futhark_mc_segmap_parloop_131459";
    futhark_mc_segmap_parloop_131459_task.fn = futhark_mc_segmap_parloop_131459;
    futhark_mc_segmap_parloop_131459_task.args =
        &futhark_mc_segmap_parloop_struct_131458;
    futhark_mc_segmap_parloop_131459_task.iterations = iterations;
    futhark_mc_segmap_parloop_131459_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131459_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131459_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131459_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131459_task);
    
    if (futhark_mc_segmap_parloop_131459_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131459_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131459_total_end -
                 futhark_mc_segmap_parloop_131459_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131459_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131459_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131459_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131457_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131457_end -
                 futhark_mc_segmap_nested_task_131457_start;
        
        ctx->futhark_mc_segmap_nested_task_131457_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131457_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131457_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131486 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122696;
    char *free_mem_122867;
    char *free_mem_122871;
};
struct futhark_mc_segmap_parloop_struct_131488 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122696;
    char *free_mem_122867;
    char *free_mem_122871;
};
static int futhark_mc_segmap_parloop_131489(void *args, int64_t start,
                                            int64_t end, int flat_tid_118923,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131488
    *futhark_mc_segmap_parloop_struct_131488 =
    (struct futhark_mc_segmap_parloop_struct_131488 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131488->ctx;
    uint64_t futhark_mc_segmap_parloop_131489_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131489_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131488->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131488->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131488->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131488->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131488->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131488->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131488->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 =
            futhark_mc_segmap_parloop_struct_131488->free_bytes_122696;
    struct memblock mem_122867 = {.desc ="mem_122867", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_122867,
                                  .size =0, .references =NULL};
    struct memblock mem_122871 = {.desc ="mem_122871", .mem =
                                  futhark_mc_segmap_parloop_struct_131488->free_mem_122871,
                                  .size =0, .references =NULL};
    size_t mem_122776_cached_sizze_131490 = 0;
    char *mem_122776 = NULL;
    size_t mem_122779_cached_sizze_131491 = 0;
    char *mem_122779 = NULL;
    size_t mem_122796_cached_sizze_131492 = 0;
    char *mem_122796 = NULL;
    size_t mem_122799_cached_sizze_131493 = 0;
    char *mem_122799 = NULL;
    size_t mem_122826_cached_sizze_131494 = 0;
    char *mem_122826 = NULL;
    size_t mem_122829_cached_sizze_131495 = 0;
    char *mem_122829 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127332 = start;
    
    if (mem_122776_cached_sizze_131490 < (size_t) bytes_122033) {
        mem_122776 = realloc(mem_122776, bytes_122033);
        mem_122776_cached_sizze_131490 = bytes_122033;
    }
    if (mem_122779_cached_sizze_131491 < (size_t) bytes_122033) {
        mem_122779 = realloc(mem_122779, bytes_122033);
        mem_122779_cached_sizze_131491 = bytes_122033;
    }
    if (mem_122796_cached_sizze_131492 < (size_t) bytes_122696) {
        mem_122796 = realloc(mem_122796, bytes_122696);
        mem_122796_cached_sizze_131492 = bytes_122696;
    }
    if (mem_122799_cached_sizze_131493 < (size_t) bytes_122696) {
        mem_122799 = realloc(mem_122799, bytes_122696);
        mem_122799_cached_sizze_131493 = bytes_122696;
    }
    if (mem_122826_cached_sizze_131494 < (size_t) bytes_122696) {
        mem_122826 = realloc(mem_122826, bytes_122696);
        mem_122826_cached_sizze_131494 = bytes_122696;
    }
    if (mem_122829_cached_sizze_131495 < (size_t) bytes_122696) {
        mem_122829 = realloc(mem_122829, bytes_122696);
        mem_122829_cached_sizze_131495 = bytes_122696;
    }
    for (; iter_127332 < end; iter_127332++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127450 = m_114517;
        int64_t gtid_118924 = iter_127332;
        int64_t remnant_127451 = iter_127332 - gtid_118924;
        int64_t x_115644 = ((int64_t *) mem_121960.mem)[gtid_118924];
        
        for (int64_t i_127333 = 0; i_127333 < l_n_m_114568; i_127333++) {
            int64_t x_127336 = ((int64_t *) mem_122102.mem)[gtid_118924 *
                                                            l_n_m_114568 +
                                                            i_127333];
            float x_127337 = ((float *) mem_122106.mem)[gtid_118924 *
                                                        l_n_m_114568 +
                                                        i_127333];
            int64_t min_arg_127338 = mul64(t_jump_114525, i_127333);
            int64_t min_res_127339 = smin64(i_114594, min_arg_127338);
            float defunc_0_f_res_127340 = sitofp_i64_f32(min_res_127339);
            
            for (int64_t i_127345 = 0; i_127345 < l_window_114522; i_127345++) {
                bool cond_127348 = sle64(x_115644, i_127345);
                float defunc_0_f_res_127349;
                
                if (cond_127348) {
                    defunc_0_f_res_127349 = 0.0F;
                } else {
                    int64_t i_127350 = add64(x_127336, i_127345);
                    float x_127351 = ((float *) mem_121982.mem)[gtid_118924 *
                                                                n_114518 +
                                                                i_127350];
                    float defunc_0_f_res_f_res_127352 = 1.0F + x_127351;
                    
                    defunc_0_f_res_127349 = defunc_0_f_res_f_res_127352;
                }
                
                float defunc_0_f_res_127353;
                
                if (cond_127348) {
                    defunc_0_f_res_127353 = 0.0F;
                } else {
                    int64_t i_127354 = add64(x_127336, i_127345);
                    float x_127355 = ((float *) mem_122408.mem)[gtid_118924 *
                                                                n_114518 +
                                                                i_127354];
                    
                    defunc_0_f_res_127353 = x_127355;
                }
                
                float x_j_127356 = defunc_0_f_res_127349 -
                      defunc_0_f_res_127340;
                float abs_res_127357 = (float) fabs(x_j_127356);
                float tmp1_127358 = abs_res_127357 / x_127337;
                float x_127359 = tmp1_127358 * tmp1_127358;
                float y_127360 = tmp1_127358 * x_127359;
                float tmp2_127361 = 1.0F - y_127360;
                float x_127362 = tmp2_127361 * tmp2_127361;
                float tmp3_127363 = tmp2_127361 * x_127362;
                float tmp4_127364 = defunc_0_f_res_127353 * tmp3_127363;
                
                ((float *) mem_122796)[i_127345] = x_j_127356;
                ((float *) mem_122799)[i_127345] = tmp4_127364;
            }
            
            float defunc_2_reduce_res_127369;
            float defunc_2_reduce_res_127370;
            float defunc_2_reduce_res_127371;
            float defunc_2_reduce_res_127372;
            float defunc_2_reduce_res_127373;
            float redout_127377;
            float redout_127378;
            float redout_127379;
            float redout_127380;
            float redout_127381;
            
            redout_127377 = 0.0F;
            redout_127378 = 0.0F;
            redout_127379 = 0.0F;
            redout_127380 = 0.0F;
            redout_127381 = 0.0F;
            for (int64_t i_127376 = 0; i_127376 < l_window_114522; i_127376++) {
                float x_127384 = ((float *) mem_122796)[i_127376];
                float x_127385 = ((float *) mem_122799)[i_127376];
                float defunc_1_f_res_127386 = x_127384 * x_127385;
                float defunc_1_f_res_127387 = x_127384 * defunc_1_f_res_127386;
                float defunc_1_f_res_127388 = x_127384 * defunc_1_f_res_127387;
                float defunc_1_f_res_127389 = x_127384 * defunc_1_f_res_127388;
                float defunc_1_op_res_127390 = x_127385 + redout_127377;
                float defunc_1_op_res_127391 = defunc_1_f_res_127386 +
                      redout_127378;
                float defunc_1_op_res_127392 = defunc_1_f_res_127387 +
                      redout_127379;
                float defunc_1_op_res_127393 = defunc_1_f_res_127388 +
                      redout_127380;
                float defunc_1_op_res_127394 = defunc_1_f_res_127389 +
                      redout_127381;
                
                ((float *) mem_122826)[i_127376] = defunc_1_f_res_127387;
                ((float *) mem_122829)[i_127376] = defunc_1_f_res_127386;
                
                float redout_tmp_127456 = defunc_1_op_res_127390;
                float redout_tmp_127457 = defunc_1_op_res_127391;
                float redout_tmp_127458 = defunc_1_op_res_127392;
                float redout_tmp_127459 = defunc_1_op_res_127393;
                float redout_tmp_127460 = defunc_1_op_res_127394;
                
                redout_127377 = redout_tmp_127456;
                redout_127378 = redout_tmp_127457;
                redout_127379 = redout_tmp_127458;
                redout_127380 = redout_tmp_127459;
                redout_127381 = redout_tmp_127460;
            }
            defunc_2_reduce_res_127369 = redout_127377;
            defunc_2_reduce_res_127370 = redout_127378;
            defunc_2_reduce_res_127371 = redout_127379;
            defunc_2_reduce_res_127372 = redout_127380;
            defunc_2_reduce_res_127373 = redout_127381;
            
            float x_127397 = defunc_2_reduce_res_127371 *
                  defunc_2_reduce_res_127373;
            float y_127398 = defunc_2_reduce_res_127372 *
                  defunc_2_reduce_res_127372;
            float a12_127399 = x_127397 - y_127398;
            float x_127400 = defunc_2_reduce_res_127371 *
                  defunc_2_reduce_res_127372;
            float y_127401 = defunc_2_reduce_res_127370 *
                  defunc_2_reduce_res_127373;
            float b12_127402 = x_127400 - y_127401;
            float x_127403 = defunc_2_reduce_res_127370 *
                  defunc_2_reduce_res_127372;
            float y_127404 = defunc_2_reduce_res_127371 *
                  defunc_2_reduce_res_127371;
            float c12_127405 = x_127403 - y_127404;
            float x_127406 = defunc_2_reduce_res_127369 *
                  defunc_2_reduce_res_127373;
            float b2_127407 = x_127406 - y_127404;
            float x_127408 = defunc_2_reduce_res_127370 *
                  defunc_2_reduce_res_127371;
            float y_127409 = defunc_2_reduce_res_127369 *
                  defunc_2_reduce_res_127372;
            float c2_127410 = x_127408 - y_127409;
            float x_127411 = defunc_2_reduce_res_127369 * a12_127399;
            float y_127412 = defunc_2_reduce_res_127370 * b12_127402;
            float x_127413 = x_127411 + y_127412;
            float y_127414 = defunc_2_reduce_res_127371 * c12_127405;
            float y_127415 = x_127413 + y_127414;
            float det_127416 = 1.0F / y_127415;
            float a12_127417 = a12_127399 * det_127416;
            float b12_127418 = b12_127402 * det_127416;
            float c12_127419 = c12_127405 * det_127416;
            float b2_127420 = b2_127407 * det_127416;
            float c2_127421 = c2_127410 * det_127416;
            float defunc_2_reduce_res_127422;
            float defunc_2_reduce_res_127423;
            float redout_127425;
            float redout_127426;
            
            redout_127425 = 0.0F;
            redout_127426 = 0.0F;
            for (int64_t i_127424 = 0; i_127424 < l_window_114522; i_127424++) {
                float x_127427 = ((float *) mem_122799)[i_127424];
                float x_127428 = ((float *) mem_122829)[i_127424];
                float x_127429 = ((float *) mem_122826)[i_127424];
                bool cond_127430 = sle64(x_115644, i_127424);
                float defunc_0_f_res_127431;
                
                if (cond_127430) {
                    defunc_0_f_res_127431 = 0.0F;
                } else {
                    int64_t i_127432 = add64(x_127336, i_127424);
                    float x_127433 = ((float *) mem_122404.mem)[gtid_118924 *
                                                                n_114518 +
                                                                i_127432];
                    
                    defunc_0_f_res_127431 = x_127433;
                }
                
                float x_127434 = a12_127417 * x_127427;
                float y_127435 = b12_127418 * x_127428;
                float x_127436 = x_127434 + y_127435;
                float y_127437 = c12_127419 * x_127429;
                float x_127438 = x_127436 + y_127437;
                float defunc_9_fit_fun_res_127439 = defunc_0_f_res_127431 *
                      x_127438;
                float x_127440 = b12_127418 * x_127427;
                float y_127441 = b2_127420 * x_127428;
                float x_127442 = x_127440 + y_127441;
                float y_127443 = c2_127421 * x_127429;
                float x_127444 = x_127442 + y_127443;
                float defunc_9_slope_fun_res_127445 = defunc_0_f_res_127431 *
                      x_127444;
                float defunc_1_op_res_127446 = defunc_9_fit_fun_res_127439 +
                      redout_127425;
                float defunc_1_op_res_127447 = defunc_9_slope_fun_res_127445 +
                      redout_127426;
                float redout_tmp_127463 = defunc_1_op_res_127446;
                float redout_tmp_127464 = defunc_1_op_res_127447;
                
                redout_127425 = redout_tmp_127463;
                redout_127426 = redout_tmp_127464;
            }
            defunc_2_reduce_res_127422 = redout_127425;
            defunc_2_reduce_res_127423 = redout_127426;
            ((float *) mem_122776)[i_127333] = defunc_2_reduce_res_127422;
            ((float *) mem_122779)[i_127333] = defunc_2_reduce_res_127423;
        }
        memmove(mem_122867.mem + gtid_118924 * l_n_m_114568 * (int64_t) 4,
                mem_122776 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122871.mem + gtid_118924 * l_n_m_114568 * (int64_t) 4,
                mem_122779 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122776);
    free(mem_122779);
    free(mem_122796);
    free(mem_122799);
    free(mem_122826);
    free(mem_122829);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131489_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131489_end -
                 futhark_mc_segmap_parloop_131489_start;
        
        ctx->futhark_mc_segmap_parloop_131489_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131489_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131489_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131487(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118923 = tid;
    int num_tasks_127331 = info.nsubtasks;
    struct futhark_mc_task_131486 *futhark_mc_task_131486 =
                                  (struct futhark_mc_task_131486 *) args;
    struct futhark_context *ctx = futhark_mc_task_131486->ctx;
    uint64_t futhark_mc_segmap_task_131487_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131487_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131486->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131486->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131486->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131486->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131486->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131486->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131486->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131486->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131486->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131486->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131486->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131486->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131486->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 = futhark_mc_task_131486->free_bytes_122696;
    struct memblock mem_122867 = {.desc ="mem_122867", .mem =
                                  futhark_mc_task_131486->free_mem_122867,
                                  .size =0, .references =NULL};
    struct memblock mem_122871 = {.desc ="mem_122871", .mem =
                                  futhark_mc_task_131486->free_mem_122871,
                                  .size =0, .references =NULL};
    int64_t iter_127332;
    struct futhark_mc_segmap_parloop_struct_131488
    futhark_mc_segmap_parloop_struct_131488;
    
    futhark_mc_segmap_parloop_struct_131488.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131488.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131488.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131488.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131488.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131488.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131488.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131488.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131488.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131488.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131488.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131488.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131488.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131488.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131488.free_bytes_122696 = bytes_122696;
    futhark_mc_segmap_parloop_struct_131488.free_mem_122867 = mem_122867.mem;
    futhark_mc_segmap_parloop_struct_131488.free_mem_122871 = mem_122871.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131489_task;
    
    futhark_mc_segmap_parloop_131489_task.name =
        "futhark_mc_segmap_parloop_131489";
    futhark_mc_segmap_parloop_131489_task.fn = futhark_mc_segmap_parloop_131489;
    futhark_mc_segmap_parloop_131489_task.args =
        &futhark_mc_segmap_parloop_struct_131488;
    futhark_mc_segmap_parloop_131489_task.iterations = iterations;
    futhark_mc_segmap_parloop_131489_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131489_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131489_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131489_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131489_task);
    
    if (futhark_mc_segmap_parloop_131489_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131489_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131489_total_end -
                 futhark_mc_segmap_parloop_131489_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131489_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131489_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131489_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131487_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131487_end -
                 futhark_mc_segmap_task_131487_start;
        
        ctx->futhark_mc_segmap_task_131487_runs[tid]++;
        ctx->futhark_mc_segmap_task_131487_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131487_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131497 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122033;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122696;
    char *free_mem_122867;
    char *free_mem_122871;
};
struct futhark_mc_task_131501 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122696;
    char *free_mem_122770;
    char *free_mem_122773;
};
struct futhark_mc_segmap_parloop_struct_131503 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122696;
    char *free_mem_122770;
    char *free_mem_122773;
};
static int futhark_mc_segmap_parloop_131504(void *args, int64_t start,
                                            int64_t end, int flat_tid_118927,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131503
    *futhark_mc_segmap_parloop_struct_131503 =
    (struct futhark_mc_segmap_parloop_struct_131503 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131503->ctx;
    uint64_t futhark_mc_segmap_parloop_131504_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131504_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131503->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131503->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131503->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131503->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131503->free_i_114594;
    int64_t gtid_118926 =
            futhark_mc_segmap_parloop_struct_131503->free_gtid_118926;
    int64_t x_119049 = futhark_mc_segmap_parloop_struct_131503->free_x_119049;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 =
            futhark_mc_segmap_parloop_struct_131503->free_bytes_122696;
    struct memblock mem_122770 = {.desc ="mem_122770", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_122770,
                                  .size =0, .references =NULL};
    struct memblock mem_122773 = {.desc ="mem_122773", .mem =
                                  futhark_mc_segmap_parloop_struct_131503->free_mem_122773,
                                  .size =0, .references =NULL};
    size_t mem_127579_cached_sizze_131505 = 0;
    char *mem_127579 = NULL;
    size_t mem_127581_cached_sizze_131506 = 0;
    char *mem_127581 = NULL;
    size_t mem_127607_cached_sizze_131507 = 0;
    char *mem_127607 = NULL;
    size_t mem_127609_cached_sizze_131508 = 0;
    char *mem_127609 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127693 = start;
    
    if (mem_127579_cached_sizze_131505 < (size_t) bytes_122696) {
        mem_127579 = realloc(mem_127579, bytes_122696);
        mem_127579_cached_sizze_131505 = bytes_122696;
    }
    if (mem_127581_cached_sizze_131506 < (size_t) bytes_122696) {
        mem_127581 = realloc(mem_127581, bytes_122696);
        mem_127581_cached_sizze_131506 = bytes_122696;
    }
    if (mem_127607_cached_sizze_131507 < (size_t) bytes_122696) {
        mem_127607 = realloc(mem_127607, bytes_122696);
        mem_127607_cached_sizze_131507 = bytes_122696;
    }
    if (mem_127609_cached_sizze_131508 < (size_t) bytes_122696) {
        mem_127609 = realloc(mem_127609, bytes_122696);
        mem_127609_cached_sizze_131508 = bytes_122696;
    }
    for (; iter_127693 < end; iter_127693++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127761 = l_n_m_114568;
        int64_t gtid_118928 = iter_127693;
        int64_t remnant_127762 = iter_127693 - gtid_118928;
        int64_t x_127574 = ((int64_t *) mem_122102.mem)[gtid_118926 *
                                                        l_n_m_114568 +
                                                        gtid_118928];
        float x_127575 = ((float *) mem_122106.mem)[gtid_118926 * l_n_m_114568 +
                                                    gtid_118928];
        int64_t min_arg_127576 = mul64(t_jump_114525, gtid_118928);
        int64_t min_res_127577 = smin64(i_114594, min_arg_127576);
        float defunc_0_f_res_127578 = sitofp_i64_f32(min_res_127577);
        
        for (int64_t i_127694 = 0; i_127694 < l_window_114522; i_127694++) {
            bool cond_127697 = sle64(x_119049, i_127694);
            float defunc_0_f_res_127698;
            
            if (cond_127697) {
                defunc_0_f_res_127698 = 0.0F;
            } else {
                int64_t i_127699 = add64(x_127574, i_127694);
                float x_127700 = ((float *) mem_121982.mem)[gtid_118926 *
                                                            n_114518 +
                                                            i_127699];
                float defunc_0_f_res_f_res_127701 = 1.0F + x_127700;
                
                defunc_0_f_res_127698 = defunc_0_f_res_f_res_127701;
            }
            
            float defunc_0_f_res_127702;
            
            if (cond_127697) {
                defunc_0_f_res_127702 = 0.0F;
            } else {
                int64_t i_127703 = add64(x_127574, i_127694);
                float x_127704 = ((float *) mem_122408.mem)[gtid_118926 *
                                                            n_114518 +
                                                            i_127703];
                
                defunc_0_f_res_127702 = x_127704;
            }
            
            float x_j_127705 = defunc_0_f_res_127698 - defunc_0_f_res_127578;
            float abs_res_127706 = (float) fabs(x_j_127705);
            float tmp1_127707 = abs_res_127706 / x_127575;
            float x_127708 = tmp1_127707 * tmp1_127707;
            float y_127709 = tmp1_127707 * x_127708;
            float tmp2_127710 = 1.0F - y_127709;
            float x_127711 = tmp2_127710 * tmp2_127710;
            float tmp3_127712 = tmp2_127710 * x_127711;
            float tmp4_127713 = defunc_0_f_res_127702 * tmp3_127712;
            
            ((float *) mem_127579)[i_127694] = x_j_127705;
            ((float *) mem_127581)[i_127694] = tmp4_127713;
        }
        
        float defunc_2_reduce_res_127611;
        float defunc_2_reduce_res_127612;
        float defunc_2_reduce_res_127613;
        float defunc_2_reduce_res_127614;
        float defunc_2_reduce_res_127615;
        float redout_127717;
        float redout_127718;
        float redout_127719;
        float redout_127720;
        float redout_127721;
        
        redout_127717 = 0.0F;
        redout_127718 = 0.0F;
        redout_127719 = 0.0F;
        redout_127720 = 0.0F;
        redout_127721 = 0.0F;
        for (int64_t i_127716 = 0; i_127716 < l_window_114522; i_127716++) {
            float x_127724 = ((float *) mem_127579)[i_127716];
            float x_127725 = ((float *) mem_127581)[i_127716];
            float defunc_1_f_res_127726 = x_127724 * x_127725;
            float defunc_1_f_res_127727 = x_127724 * defunc_1_f_res_127726;
            float defunc_1_f_res_127728 = x_127724 * defunc_1_f_res_127727;
            float defunc_1_f_res_127729 = x_127724 * defunc_1_f_res_127728;
            float defunc_1_op_res_127730 = x_127725 + redout_127717;
            float defunc_1_op_res_127731 = defunc_1_f_res_127726 +
                  redout_127718;
            float defunc_1_op_res_127732 = defunc_1_f_res_127727 +
                  redout_127719;
            float defunc_1_op_res_127733 = defunc_1_f_res_127728 +
                  redout_127720;
            float defunc_1_op_res_127734 = defunc_1_f_res_127729 +
                  redout_127721;
            
            ((float *) mem_127607)[i_127716] = defunc_1_f_res_127727;
            ((float *) mem_127609)[i_127716] = defunc_1_f_res_127726;
            
            float redout_tmp_127765 = defunc_1_op_res_127730;
            float redout_tmp_127766 = defunc_1_op_res_127731;
            float redout_tmp_127767 = defunc_1_op_res_127732;
            float redout_tmp_127768 = defunc_1_op_res_127733;
            float redout_tmp_127769 = defunc_1_op_res_127734;
            
            redout_127717 = redout_tmp_127765;
            redout_127718 = redout_tmp_127766;
            redout_127719 = redout_tmp_127767;
            redout_127720 = redout_tmp_127768;
            redout_127721 = redout_tmp_127769;
        }
        defunc_2_reduce_res_127611 = redout_127717;
        defunc_2_reduce_res_127612 = redout_127718;
        defunc_2_reduce_res_127613 = redout_127719;
        defunc_2_reduce_res_127614 = redout_127720;
        defunc_2_reduce_res_127615 = redout_127721;
        
        float x_127639 = defunc_2_reduce_res_127613 *
              defunc_2_reduce_res_127615;
        float y_127640 = defunc_2_reduce_res_127614 *
              defunc_2_reduce_res_127614;
        float a12_127641 = x_127639 - y_127640;
        float x_127642 = defunc_2_reduce_res_127613 *
              defunc_2_reduce_res_127614;
        float y_127643 = defunc_2_reduce_res_127612 *
              defunc_2_reduce_res_127615;
        float b12_127644 = x_127642 - y_127643;
        float x_127645 = defunc_2_reduce_res_127612 *
              defunc_2_reduce_res_127614;
        float y_127646 = defunc_2_reduce_res_127613 *
              defunc_2_reduce_res_127613;
        float c12_127647 = x_127645 - y_127646;
        float x_127648 = defunc_2_reduce_res_127611 *
              defunc_2_reduce_res_127615;
        float b2_127649 = x_127648 - y_127646;
        float x_127650 = defunc_2_reduce_res_127612 *
              defunc_2_reduce_res_127613;
        float y_127651 = defunc_2_reduce_res_127611 *
              defunc_2_reduce_res_127614;
        float c2_127652 = x_127650 - y_127651;
        float x_127653 = defunc_2_reduce_res_127611 * a12_127641;
        float y_127654 = defunc_2_reduce_res_127612 * b12_127644;
        float x_127655 = x_127653 + y_127654;
        float y_127656 = defunc_2_reduce_res_127613 * c12_127647;
        float y_127657 = x_127655 + y_127656;
        float det_127658 = 1.0F / y_127657;
        float a12_127659 = a12_127641 * det_127658;
        float b12_127660 = b12_127644 * det_127658;
        float c12_127661 = c12_127647 * det_127658;
        float b2_127662 = b2_127649 * det_127658;
        float c2_127663 = c2_127652 * det_127658;
        float defunc_2_reduce_res_127664;
        float defunc_2_reduce_res_127665;
        float redout_127738;
        float redout_127739;
        
        redout_127738 = 0.0F;
        redout_127739 = 0.0F;
        for (int64_t i_127737 = 0; i_127737 < l_window_114522; i_127737++) {
            float x_127740 = ((float *) mem_127581)[i_127737];
            float x_127741 = ((float *) mem_127609)[i_127737];
            float x_127742 = ((float *) mem_127607)[i_127737];
            bool cond_127743 = sle64(x_119049, i_127737);
            float defunc_0_f_res_127744;
            
            if (cond_127743) {
                defunc_0_f_res_127744 = 0.0F;
            } else {
                int64_t i_127745 = add64(x_127574, i_127737);
                float x_127746 = ((float *) mem_122404.mem)[gtid_118926 *
                                                            n_114518 +
                                                            i_127745];
                
                defunc_0_f_res_127744 = x_127746;
            }
            
            float x_127747 = a12_127659 * x_127740;
            float y_127748 = b12_127660 * x_127741;
            float x_127749 = x_127747 + y_127748;
            float y_127750 = c12_127661 * x_127742;
            float x_127751 = x_127749 + y_127750;
            float defunc_9_fit_fun_res_127752 = defunc_0_f_res_127744 *
                  x_127751;
            float x_127753 = b12_127660 * x_127740;
            float y_127754 = b2_127662 * x_127741;
            float x_127755 = x_127753 + y_127754;
            float y_127756 = c2_127663 * x_127742;
            float x_127757 = x_127755 + y_127756;
            float defunc_9_slope_fun_res_127758 = defunc_0_f_res_127744 *
                  x_127757;
            float defunc_1_op_res_127759 = defunc_9_fit_fun_res_127752 +
                  redout_127738;
            float defunc_1_op_res_127760 = defunc_9_slope_fun_res_127758 +
                  redout_127739;
            float redout_tmp_127772 = defunc_1_op_res_127759;
            float redout_tmp_127773 = defunc_1_op_res_127760;
            
            redout_127738 = redout_tmp_127772;
            redout_127739 = redout_tmp_127773;
        }
        defunc_2_reduce_res_127664 = redout_127738;
        defunc_2_reduce_res_127665 = redout_127739;
        ((float *) mem_122770.mem)[gtid_118928] = defunc_2_reduce_res_127664;
        ((float *) mem_122773.mem)[gtid_118928] = defunc_2_reduce_res_127665;
    }
    
  cleanup:
    { }
    free(mem_127579);
    free(mem_127581);
    free(mem_127607);
    free(mem_127609);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131504_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131504_end -
                 futhark_mc_segmap_parloop_131504_start;
        
        ctx->futhark_mc_segmap_parloop_131504_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131504_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131504_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131502(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118927 = tid;
    int num_tasks_127692 = info.nsubtasks;
    struct futhark_mc_task_131501 *futhark_mc_task_131501 =
                                  (struct futhark_mc_task_131501 *) args;
    struct futhark_context *ctx = futhark_mc_task_131501->ctx;
    uint64_t futhark_mc_segmap_task_131502_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131502_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131501->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131501->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131501->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131501->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131501->free_i_114594;
    int64_t gtid_118926 = futhark_mc_task_131501->free_gtid_118926;
    int64_t x_119049 = futhark_mc_task_131501->free_x_119049;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131501->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131501->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131501->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131501->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131501->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 = futhark_mc_task_131501->free_bytes_122696;
    struct memblock mem_122770 = {.desc ="mem_122770", .mem =
                                  futhark_mc_task_131501->free_mem_122770,
                                  .size =0, .references =NULL};
    struct memblock mem_122773 = {.desc ="mem_122773", .mem =
                                  futhark_mc_task_131501->free_mem_122773,
                                  .size =0, .references =NULL};
    int64_t iter_127693;
    struct futhark_mc_segmap_parloop_struct_131503
    futhark_mc_segmap_parloop_struct_131503;
    
    futhark_mc_segmap_parloop_struct_131503.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131503.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131503.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131503.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131503.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131503.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131503.free_gtid_118926 = gtid_118926;
    futhark_mc_segmap_parloop_struct_131503.free_x_119049 = x_119049;
    futhark_mc_segmap_parloop_struct_131503.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131503.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131503.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131503.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131503.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131503.free_bytes_122696 = bytes_122696;
    futhark_mc_segmap_parloop_struct_131503.free_mem_122770 = mem_122770.mem;
    futhark_mc_segmap_parloop_struct_131503.free_mem_122773 = mem_122773.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131504_task;
    
    futhark_mc_segmap_parloop_131504_task.name =
        "futhark_mc_segmap_parloop_131504";
    futhark_mc_segmap_parloop_131504_task.fn = futhark_mc_segmap_parloop_131504;
    futhark_mc_segmap_parloop_131504_task.args =
        &futhark_mc_segmap_parloop_struct_131503;
    futhark_mc_segmap_parloop_131504_task.iterations = iterations;
    futhark_mc_segmap_parloop_131504_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131504_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131504_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131504_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131504_task);
    
    if (futhark_mc_segmap_parloop_131504_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131504_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131504_total_end -
                 futhark_mc_segmap_parloop_131504_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131504_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131504_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131504_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131502_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131502_end -
                 futhark_mc_segmap_task_131502_start;
        
        ctx->futhark_mc_segmap_task_131502_runs[tid]++;
        ctx->futhark_mc_segmap_task_131502_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131502_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131510 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_t_jump_114525;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_121982;
    char *free_mem_122102;
    char *free_mem_122106;
    char *free_mem_122404;
    char *free_mem_122408;
    int64_t free_bytes_122696;
    char *free_mem_122770;
    char *free_mem_122773;
};
struct futhark_mc_task_131516 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_127466;
    float free_x_127467;
    float free_defunc_0_f_res_127470;
    char *free_mem_127471;
    char *free_mem_127472;
};
struct futhark_mc_segmap_parloop_struct_131518 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_window_114522;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_127466;
    float free_x_127467;
    float free_defunc_0_f_res_127470;
    char *free_mem_127471;
    char *free_mem_127472;
};
static int futhark_mc_segmap_parloop_131519(void *args, int64_t start,
                                            int64_t end, int flat_tid_118931,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131518
    *futhark_mc_segmap_parloop_struct_131518 =
    (struct futhark_mc_segmap_parloop_struct_131518 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131518->ctx;
    uint64_t futhark_mc_segmap_parloop_131519_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131519_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131518->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131518->free_l_window_114522;
    int64_t gtid_118926 =
            futhark_mc_segmap_parloop_struct_131518->free_gtid_118926;
    int64_t x_119049 = futhark_mc_segmap_parloop_struct_131518->free_x_119049;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131518->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131518->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_127466 = futhark_mc_segmap_parloop_struct_131518->free_x_127466;
    float x_127467 = futhark_mc_segmap_parloop_struct_131518->free_x_127467;
    float defunc_0_f_res_127470 =
          futhark_mc_segmap_parloop_struct_131518->free_defunc_0_f_res_127470;
    struct memblock mem_127471 = {.desc ="mem_127471", .mem =
                                  futhark_mc_segmap_parloop_struct_131518->free_mem_127471,
                                  .size =0, .references =NULL};
    struct memblock mem_127472 = {.desc ="mem_127472", .mem =
                                  futhark_mc_segmap_parloop_struct_131518->free_mem_127472,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127841 = start;
    
    for (; iter_127841 < end; iter_127841++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127847 = l_window_114522;
        int64_t gtid_118932 = iter_127841;
        int64_t remnant_127848 = iter_127841 - gtid_118932;
        bool cond_127775 = sle64(x_119049, gtid_118932);
        float defunc_0_f_res_127776;
        
        if (cond_127775) {
            defunc_0_f_res_127776 = 0.0F;
        } else {
            int64_t i_127842 = add64(gtid_118932, x_127466);
            float x_127843 = ((float *) mem_121982.mem)[gtid_118926 * n_114518 +
                                                        i_127842];
            float defunc_0_f_res_f_res_127844 = 1.0F + x_127843;
            
            defunc_0_f_res_127776 = defunc_0_f_res_f_res_127844;
        }
        
        float defunc_0_f_res_127780;
        
        if (cond_127775) {
            defunc_0_f_res_127780 = 0.0F;
        } else {
            int64_t i_127845 = add64(gtid_118932, x_127466);
            float x_127846 = ((float *) mem_122408.mem)[gtid_118926 * n_114518 +
                                                        i_127845];
            
            defunc_0_f_res_127780 = x_127846;
        }
        
        float x_j_127783 = defunc_0_f_res_127776 - defunc_0_f_res_127470;
        float abs_res_127784 = (float) fabs(x_j_127783);
        float tmp1_127785 = abs_res_127784 / x_127467;
        float x_127786 = tmp1_127785 * tmp1_127785;
        float y_127787 = tmp1_127785 * x_127786;
        float tmp2_127788 = 1.0F - y_127787;
        float x_127789 = tmp2_127788 * tmp2_127788;
        float tmp3_127790 = tmp2_127788 * x_127789;
        float tmp4_127791 = defunc_0_f_res_127780 * tmp3_127790;
        
        ((float *) mem_127471.mem)[gtid_118932] = x_j_127783;
        ((float *) mem_127472.mem)[gtid_118932] = tmp4_127791;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131519_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131519_end -
                 futhark_mc_segmap_parloop_131519_start;
        
        ctx->futhark_mc_segmap_parloop_131519_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131519_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131519_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131517(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118931 = tid;
    int num_tasks_127840 = info.nsubtasks;
    struct futhark_mc_task_131516 *futhark_mc_task_131516 =
                                  (struct futhark_mc_task_131516 *) args;
    struct futhark_context *ctx = futhark_mc_task_131516->ctx;
    uint64_t futhark_mc_segmap_task_131517_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131517_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131516->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131516->free_l_window_114522;
    int64_t gtid_118926 = futhark_mc_task_131516->free_gtid_118926;
    int64_t x_119049 = futhark_mc_task_131516->free_x_119049;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131516->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131516->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_127466 = futhark_mc_task_131516->free_x_127466;
    float x_127467 = futhark_mc_task_131516->free_x_127467;
    float defunc_0_f_res_127470 =
          futhark_mc_task_131516->free_defunc_0_f_res_127470;
    struct memblock mem_127471 = {.desc ="mem_127471", .mem =
                                  futhark_mc_task_131516->free_mem_127471,
                                  .size =0, .references =NULL};
    struct memblock mem_127472 = {.desc ="mem_127472", .mem =
                                  futhark_mc_task_131516->free_mem_127472,
                                  .size =0, .references =NULL};
    int64_t iter_127841;
    struct futhark_mc_segmap_parloop_struct_131518
    futhark_mc_segmap_parloop_struct_131518;
    
    futhark_mc_segmap_parloop_struct_131518.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131518.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131518.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131518.free_gtid_118926 = gtid_118926;
    futhark_mc_segmap_parloop_struct_131518.free_x_119049 = x_119049;
    futhark_mc_segmap_parloop_struct_131518.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131518.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131518.free_x_127466 = x_127466;
    futhark_mc_segmap_parloop_struct_131518.free_x_127467 = x_127467;
    futhark_mc_segmap_parloop_struct_131518.free_defunc_0_f_res_127470 =
        defunc_0_f_res_127470;
    futhark_mc_segmap_parloop_struct_131518.free_mem_127471 = mem_127471.mem;
    futhark_mc_segmap_parloop_struct_131518.free_mem_127472 = mem_127472.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131519_task;
    
    futhark_mc_segmap_parloop_131519_task.name =
        "futhark_mc_segmap_parloop_131519";
    futhark_mc_segmap_parloop_131519_task.fn = futhark_mc_segmap_parloop_131519;
    futhark_mc_segmap_parloop_131519_task.args =
        &futhark_mc_segmap_parloop_struct_131518;
    futhark_mc_segmap_parloop_131519_task.iterations = iterations;
    futhark_mc_segmap_parloop_131519_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131519_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131519_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131519_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131519_task);
    
    if (futhark_mc_segmap_parloop_131519_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131519_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131519_total_end -
                 futhark_mc_segmap_parloop_131519_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131519_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131519_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131519_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131517_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131517_end -
                 futhark_mc_segmap_task_131517_start;
        
        ctx->futhark_mc_segmap_task_131517_runs[tid]++;
        ctx->futhark_mc_segmap_task_131517_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131517_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131520 {
    struct futhark_context *ctx;
    char *free_mem_127471;
    char *free_mem_127472;
    float *retval_defunc_2_reduce_res_127494;
    float *retval_defunc_2_reduce_res_127495;
    float *retval_defunc_2_reduce_res_127496;
    float *retval_defunc_2_reduce_res_127497;
    float *retval_defunc_2_reduce_res_127498;
    char *retval_mem_127492;
    char *retval_mem_127493;
};
struct futhark_mc_segred_stage_1_parloop_struct_131527 {
    struct futhark_context *ctx;
    char *free_mem_127471;
    char *free_mem_127472;
    char *free_mem_127492;
    char *free_mem_127493;
    char *free_reduce_stage_1_tid_res_arr_mem_127850;
    char *free_reduce_stage_1_tid_res_arr_mem_127852;
    char *free_reduce_stage_1_tid_res_arr_mem_127854;
    char *free_reduce_stage_1_tid_res_arr_mem_127856;
    char *free_reduce_stage_1_tid_res_arr_mem_127858;
};
static int futhark_mc_segred_stage_1_parloop_131528(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118933,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131527
    *futhark_mc_segred_stage_1_parloop_struct_131527 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131527 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131527->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131528_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131528_start = get_wall_time();
    
    struct memblock mem_127471 = {.desc ="mem_127471", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131527->free_mem_127471,
                                  .size =0, .references =NULL};
    struct memblock mem_127472 = {.desc ="mem_127472", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131527->free_mem_127472,
                                  .size =0, .references =NULL};
    struct memblock mem_127492 = {.desc ="mem_127492", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131527->free_mem_127492,
                                  .size =0, .references =NULL};
    struct memblock mem_127493 = {.desc ="mem_127493", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131527->free_mem_127493,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127850 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127850",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131527->free_reduce_stage_1_tid_res_arr_mem_127850,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127852 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127852",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131527->free_reduce_stage_1_tid_res_arr_mem_127852,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127854 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127854",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131527->free_reduce_stage_1_tid_res_arr_mem_127854,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127856 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127856",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131527->free_reduce_stage_1_tid_res_arr_mem_127856,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127858 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127858",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131527->free_reduce_stage_1_tid_res_arr_mem_127858,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127860 = start;
    float x_127792;
    float x_127793;
    float x_127795;
    float x_127796;
    float x_127798;
    float x_127799;
    float x_127801;
    float x_127802;
    float x_127804;
    float x_127805;
    float local_acc_127861 = 0.0F;
    float local_acc_127862 = 0.0F;
    float local_acc_127863 = 0.0F;
    float local_acc_127864 = 0.0F;
    float local_acc_127865 = 0.0F;
    
    for (; iter_127860 < end; iter_127860++) {
        int64_t gtid_118934 = iter_127860;
        float x_127807 = ((float *) mem_127471.mem)[gtid_118934];
        float x_127808 = ((float *) mem_127472.mem)[gtid_118934];
        float defunc_1_f_res_127809 = x_127807 * x_127808;
        float defunc_1_f_res_127810 = x_127807 * defunc_1_f_res_127809;
        float defunc_1_f_res_127811 = x_127807 * defunc_1_f_res_127810;
        float defunc_1_f_res_127812 = x_127807 * defunc_1_f_res_127811;
        
        // save map-out results
        {
            ((float *) mem_127492.mem)[gtid_118934] = defunc_1_f_res_127810;
            ((float *) mem_127493.mem)[gtid_118934] = defunc_1_f_res_127809;
        }
        // Load accum params
        {
            x_127792 = local_acc_127861;
        }
        // Load next params
        {
            x_127793 = x_127808;
        }
        // Red body
        {
            float defunc_1_op_res_127794 = x_127792 + x_127793;
            
            local_acc_127861 = defunc_1_op_res_127794;
        }
        // Load accum params
        {
            x_127795 = local_acc_127862;
        }
        // Load next params
        {
            x_127796 = defunc_1_f_res_127809;
        }
        // Red body
        {
            float defunc_1_op_res_127797 = x_127795 + x_127796;
            
            local_acc_127862 = defunc_1_op_res_127797;
        }
        // Load accum params
        {
            x_127798 = local_acc_127863;
        }
        // Load next params
        {
            x_127799 = defunc_1_f_res_127810;
        }
        // Red body
        {
            float defunc_1_op_res_127800 = x_127798 + x_127799;
            
            local_acc_127863 = defunc_1_op_res_127800;
        }
        // Load accum params
        {
            x_127801 = local_acc_127864;
        }
        // Load next params
        {
            x_127802 = defunc_1_f_res_127811;
        }
        // Red body
        {
            float defunc_1_op_res_127803 = x_127801 + x_127802;
            
            local_acc_127864 = defunc_1_op_res_127803;
        }
        // Load accum params
        {
            x_127804 = local_acc_127865;
        }
        // Load next params
        {
            x_127805 = defunc_1_f_res_127812;
        }
        // Red body
        {
            float defunc_1_op_res_127806 = x_127804 + x_127805;
            
            local_acc_127865 = defunc_1_op_res_127806;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127850.mem)[flat_tid_118933] =
        local_acc_127861;
    ((float *) reduce_stage_1_tid_res_arr_mem_127852.mem)[flat_tid_118933] =
        local_acc_127862;
    ((float *) reduce_stage_1_tid_res_arr_mem_127854.mem)[flat_tid_118933] =
        local_acc_127863;
    ((float *) reduce_stage_1_tid_res_arr_mem_127856.mem)[flat_tid_118933] =
        local_acc_127864;
    ((float *) reduce_stage_1_tid_res_arr_mem_127858.mem)[flat_tid_118933] =
        local_acc_127865;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131528_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131528_end -
                 futhark_mc_segred_stage_1_parloop_131528_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131528_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131528_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131528_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131521(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118933 = tid;
    int num_tasks_127849 = info.nsubtasks;
    struct futhark_mc_task_131520 *futhark_mc_task_131520 =
                                  (struct futhark_mc_task_131520 *) args;
    struct futhark_context *ctx = futhark_mc_task_131520->ctx;
    uint64_t futhark_mc_segred_task_131521_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131521_start = get_wall_time();
    
    struct memblock mem_127471 = {.desc ="mem_127471", .mem =
                                  futhark_mc_task_131520->free_mem_127471,
                                  .size =0, .references =NULL};
    struct memblock mem_127472 = {.desc ="mem_127472", .mem =
                                  futhark_mc_task_131520->free_mem_127472,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_127494 =
          *futhark_mc_task_131520->retval_defunc_2_reduce_res_127494;
    float defunc_2_reduce_res_127495 =
          *futhark_mc_task_131520->retval_defunc_2_reduce_res_127495;
    float defunc_2_reduce_res_127496 =
          *futhark_mc_task_131520->retval_defunc_2_reduce_res_127496;
    float defunc_2_reduce_res_127497 =
          *futhark_mc_task_131520->retval_defunc_2_reduce_res_127497;
    float defunc_2_reduce_res_127498 =
          *futhark_mc_task_131520->retval_defunc_2_reduce_res_127498;
    struct memblock mem_127492 = {.desc ="mem_127492", .mem =
                                  futhark_mc_task_131520->retval_mem_127492,
                                  .size =0, .references =NULL};
    struct memblock mem_127493 = {.desc ="mem_127493", .mem =
                                  futhark_mc_task_131520->retval_mem_127493,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127850_cached_sizze_131522 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127850 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127852_cached_sizze_131523 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127852 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127854_cached_sizze_131524 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127854 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127856_cached_sizze_131525 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127856 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127858_cached_sizze_131526 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127858 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127850_cached_sizze_131522 <
        (size_t) ((int64_t) 4 * num_tasks_127849)) {
        reduce_stage_1_tid_res_arr_mem_127850 =
            realloc(reduce_stage_1_tid_res_arr_mem_127850, (int64_t) 4 *
                    num_tasks_127849);
        reduce_stage_1_tid_res_arr_mem_127850_cached_sizze_131522 =
            (int64_t) 4 * num_tasks_127849;
    }
    if (reduce_stage_1_tid_res_arr_mem_127852_cached_sizze_131523 <
        (size_t) ((int64_t) 4 * num_tasks_127849)) {
        reduce_stage_1_tid_res_arr_mem_127852 =
            realloc(reduce_stage_1_tid_res_arr_mem_127852, (int64_t) 4 *
                    num_tasks_127849);
        reduce_stage_1_tid_res_arr_mem_127852_cached_sizze_131523 =
            (int64_t) 4 * num_tasks_127849;
    }
    if (reduce_stage_1_tid_res_arr_mem_127854_cached_sizze_131524 <
        (size_t) ((int64_t) 4 * num_tasks_127849)) {
        reduce_stage_1_tid_res_arr_mem_127854 =
            realloc(reduce_stage_1_tid_res_arr_mem_127854, (int64_t) 4 *
                    num_tasks_127849);
        reduce_stage_1_tid_res_arr_mem_127854_cached_sizze_131524 =
            (int64_t) 4 * num_tasks_127849;
    }
    if (reduce_stage_1_tid_res_arr_mem_127856_cached_sizze_131525 <
        (size_t) ((int64_t) 4 * num_tasks_127849)) {
        reduce_stage_1_tid_res_arr_mem_127856 =
            realloc(reduce_stage_1_tid_res_arr_mem_127856, (int64_t) 4 *
                    num_tasks_127849);
        reduce_stage_1_tid_res_arr_mem_127856_cached_sizze_131525 =
            (int64_t) 4 * num_tasks_127849;
    }
    if (reduce_stage_1_tid_res_arr_mem_127858_cached_sizze_131526 <
        (size_t) ((int64_t) 4 * num_tasks_127849)) {
        reduce_stage_1_tid_res_arr_mem_127858 =
            realloc(reduce_stage_1_tid_res_arr_mem_127858, (int64_t) 4 *
                    num_tasks_127849);
        reduce_stage_1_tid_res_arr_mem_127858_cached_sizze_131526 =
            (int64_t) 4 * num_tasks_127849;
    }
    
    int64_t iter_127860;
    struct futhark_mc_segred_stage_1_parloop_struct_131527
    futhark_mc_segred_stage_1_parloop_struct_131527;
    
    futhark_mc_segred_stage_1_parloop_struct_131527.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_mem_127471 =
        mem_127471.mem;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_mem_127472 =
        mem_127472.mem;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_mem_127492 =
        mem_127492.mem;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_mem_127493 =
        mem_127493.mem;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_reduce_stage_1_tid_res_arr_mem_127850 =
        reduce_stage_1_tid_res_arr_mem_127850;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_reduce_stage_1_tid_res_arr_mem_127852 =
        reduce_stage_1_tid_res_arr_mem_127852;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_reduce_stage_1_tid_res_arr_mem_127854 =
        reduce_stage_1_tid_res_arr_mem_127854;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_reduce_stage_1_tid_res_arr_mem_127856 =
        reduce_stage_1_tid_res_arr_mem_127856;
    futhark_mc_segred_stage_1_parloop_struct_131527.free_reduce_stage_1_tid_res_arr_mem_127858 =
        reduce_stage_1_tid_res_arr_mem_127858;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131528_task;
    
    futhark_mc_segred_stage_1_parloop_131528_task.name =
        "futhark_mc_segred_stage_1_parloop_131528";
    futhark_mc_segred_stage_1_parloop_131528_task.fn =
        futhark_mc_segred_stage_1_parloop_131528;
    futhark_mc_segred_stage_1_parloop_131528_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131527;
    futhark_mc_segred_stage_1_parloop_131528_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131528_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131528_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131528_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131528_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131528_task);
    
    if (futhark_mc_segred_stage_1_parloop_131528_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131528_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131528_total_end -
                 futhark_mc_segred_stage_1_parloop_131528_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131528_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131528_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131528_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127494 = 0.0F;
        defunc_2_reduce_res_127495 = 0.0F;
        defunc_2_reduce_res_127496 = 0.0F;
        defunc_2_reduce_res_127497 = 0.0F;
        defunc_2_reduce_res_127498 = 0.0F;
    }
    
    float x_127866;
    float x_127867;
    float x_127869;
    float x_127870;
    float x_127872;
    float x_127873;
    float x_127875;
    float x_127876;
    float x_127878;
    float x_127879;
    
    for (int32_t i_127881 = 0; i_127881 < num_tasks_127849; i_127881++) {
        flat_tid_118933 = i_127881;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127866 = defunc_2_reduce_res_127494;
            }
            // load next params
            {
                x_127867 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127850)[flat_tid_118933];
            }
            // red body
            {
                float defunc_1_op_res_127868 = x_127866 + x_127867;
                
                defunc_2_reduce_res_127494 = defunc_1_op_res_127868;
            }
            // load acc params
            {
                x_127869 = defunc_2_reduce_res_127495;
            }
            // load next params
            {
                x_127870 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127852)[flat_tid_118933];
            }
            // red body
            {
                float defunc_1_op_res_127871 = x_127869 + x_127870;
                
                defunc_2_reduce_res_127495 = defunc_1_op_res_127871;
            }
            // load acc params
            {
                x_127872 = defunc_2_reduce_res_127496;
            }
            // load next params
            {
                x_127873 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127854)[flat_tid_118933];
            }
            // red body
            {
                float defunc_1_op_res_127874 = x_127872 + x_127873;
                
                defunc_2_reduce_res_127496 = defunc_1_op_res_127874;
            }
            // load acc params
            {
                x_127875 = defunc_2_reduce_res_127497;
            }
            // load next params
            {
                x_127876 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127856)[flat_tid_118933];
            }
            // red body
            {
                float defunc_1_op_res_127877 = x_127875 + x_127876;
                
                defunc_2_reduce_res_127497 = defunc_1_op_res_127877;
            }
            // load acc params
            {
                x_127878 = defunc_2_reduce_res_127498;
            }
            // load next params
            {
                x_127879 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127858)[flat_tid_118933];
            }
            // red body
            {
                float defunc_1_op_res_127880 = x_127878 + x_127879;
                
                defunc_2_reduce_res_127498 = defunc_1_op_res_127880;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127850);
    free(reduce_stage_1_tid_res_arr_mem_127852);
    free(reduce_stage_1_tid_res_arr_mem_127854);
    free(reduce_stage_1_tid_res_arr_mem_127856);
    free(reduce_stage_1_tid_res_arr_mem_127858);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131521_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131521_end -
                 futhark_mc_segred_task_131521_start;
        
        ctx->futhark_mc_segred_task_131521_runs[tid]++;
        ctx->futhark_mc_segred_task_131521_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131521_iter[tid] += iterations;
    }
    *futhark_mc_task_131520->retval_defunc_2_reduce_res_127494 =
        defunc_2_reduce_res_127494;
    *futhark_mc_task_131520->retval_defunc_2_reduce_res_127495 =
        defunc_2_reduce_res_127495;
    *futhark_mc_task_131520->retval_defunc_2_reduce_res_127496 =
        defunc_2_reduce_res_127496;
    *futhark_mc_task_131520->retval_defunc_2_reduce_res_127497 =
        defunc_2_reduce_res_127497;
    *futhark_mc_task_131520->retval_defunc_2_reduce_res_127498 =
        defunc_2_reduce_res_127498;
    futhark_mc_task_131520->retval_mem_127492 = mem_127492.mem;
    futhark_mc_task_131520->retval_mem_127493 = mem_127493.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131529 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_122404;
    int64_t free_x_127466;
    char *free_mem_127472;
    char *free_mem_127492;
    char *free_mem_127493;
    float free_a12_127542;
    float free_b12_127543;
    float free_c12_127544;
    float free_b2_127545;
    float free_c2_127546;
    float *retval_defunc_2_reduce_res_127547;
    float *retval_defunc_2_reduce_res_127548;
};
struct futhark_mc_segred_stage_1_parloop_struct_131533 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_118926;
    int64_t free_x_119049;
    char *free_mem_122404;
    int64_t free_x_127466;
    char *free_mem_127472;
    char *free_mem_127492;
    char *free_mem_127493;
    float free_a12_127542;
    float free_b12_127543;
    float free_c12_127544;
    float free_b2_127545;
    float free_c2_127546;
    char *free_reduce_stage_1_tid_res_arr_mem_127883;
    char *free_reduce_stage_1_tid_res_arr_mem_127885;
};
static int futhark_mc_segred_stage_1_parloop_131534(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118935,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131533
    *futhark_mc_segred_stage_1_parloop_struct_131533 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131533 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131533->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131534_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131534_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_n_114518;
    int64_t gtid_118926 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_gtid_118926;
    int64_t x_119049 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_x_119049;
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_122404,
                                  .size =0, .references =NULL};
    int64_t x_127466 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_x_127466;
    struct memblock mem_127472 = {.desc ="mem_127472", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_127472,
                                  .size =0, .references =NULL};
    struct memblock mem_127492 = {.desc ="mem_127492", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_127492,
                                  .size =0, .references =NULL};
    struct memblock mem_127493 = {.desc ="mem_127493", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_127493,
                                  .size =0, .references =NULL};
    float a12_127542 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_a12_127542;
    float b12_127543 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_b12_127543;
    float c12_127544 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_c12_127544;
    float b2_127545 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_b2_127545;
    float c2_127546 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_c2_127546;
    struct memblock reduce_stage_1_tid_res_arr_mem_127883 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127883",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131533->free_reduce_stage_1_tid_res_arr_mem_127883,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127885 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127885",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131533->free_reduce_stage_1_tid_res_arr_mem_127885,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127887 = start;
    float x_127813;
    float x_127814;
    float x_127816;
    float x_127817;
    float local_acc_127888 = 0.0F;
    float local_acc_127889 = 0.0F;
    
    for (; iter_127887 < end; iter_127887++) {
        int64_t gtid_118936 = iter_127887;
        float x_127819 = ((float *) mem_127472.mem)[gtid_118936];
        float x_127820 = ((float *) mem_127493.mem)[gtid_118936];
        float x_127821 = ((float *) mem_127492.mem)[gtid_118936];
        bool cond_127822 = sle64(x_119049, gtid_118936);
        float defunc_0_f_res_127823;
        
        if (cond_127822) {
            defunc_0_f_res_127823 = 0.0F;
        } else {
            int64_t i_127824 = add64(gtid_118936, x_127466);
            float x_127825 = ((float *) mem_122404.mem)[gtid_118926 * n_114518 +
                                                        i_127824];
            
            defunc_0_f_res_127823 = x_127825;
        }
        
        float x_127826 = a12_127542 * x_127819;
        float y_127827 = b12_127543 * x_127820;
        float x_127828 = x_127826 + y_127827;
        float y_127829 = c12_127544 * x_127821;
        float x_127830 = x_127828 + y_127829;
        float defunc_9_fit_fun_res_127831 = defunc_0_f_res_127823 * x_127830;
        float x_127832 = b12_127543 * x_127819;
        float y_127833 = b2_127545 * x_127820;
        float x_127834 = x_127832 + y_127833;
        float y_127835 = c2_127546 * x_127821;
        float x_127836 = x_127834 + y_127835;
        float defunc_9_slope_fun_res_127837 = defunc_0_f_res_127823 * x_127836;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127813 = local_acc_127888;
        }
        // Load next params
        {
            x_127814 = defunc_9_fit_fun_res_127831;
        }
        // Red body
        {
            float defunc_1_op_res_127815 = x_127813 + x_127814;
            
            local_acc_127888 = defunc_1_op_res_127815;
        }
        // Load accum params
        {
            x_127816 = local_acc_127889;
        }
        // Load next params
        {
            x_127817 = defunc_9_slope_fun_res_127837;
        }
        // Red body
        {
            float defunc_1_op_res_127818 = x_127816 + x_127817;
            
            local_acc_127889 = defunc_1_op_res_127818;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127883.mem)[flat_tid_118935] =
        local_acc_127888;
    ((float *) reduce_stage_1_tid_res_arr_mem_127885.mem)[flat_tid_118935] =
        local_acc_127889;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131534_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131534_end -
                 futhark_mc_segred_stage_1_parloop_131534_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131534_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131534_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131530(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118935 = tid;
    int num_tasks_127882 = info.nsubtasks;
    struct futhark_mc_task_131529 *futhark_mc_task_131529 =
                                  (struct futhark_mc_task_131529 *) args;
    struct futhark_context *ctx = futhark_mc_task_131529->ctx;
    uint64_t futhark_mc_segred_task_131530_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131530_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131529->free_n_114518;
    int64_t gtid_118926 = futhark_mc_task_131529->free_gtid_118926;
    int64_t x_119049 = futhark_mc_task_131529->free_x_119049;
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131529->free_mem_122404,
                                  .size =0, .references =NULL};
    int64_t x_127466 = futhark_mc_task_131529->free_x_127466;
    struct memblock mem_127472 = {.desc ="mem_127472", .mem =
                                  futhark_mc_task_131529->free_mem_127472,
                                  .size =0, .references =NULL};
    struct memblock mem_127492 = {.desc ="mem_127492", .mem =
                                  futhark_mc_task_131529->free_mem_127492,
                                  .size =0, .references =NULL};
    struct memblock mem_127493 = {.desc ="mem_127493", .mem =
                                  futhark_mc_task_131529->free_mem_127493,
                                  .size =0, .references =NULL};
    float a12_127542 = futhark_mc_task_131529->free_a12_127542;
    float b12_127543 = futhark_mc_task_131529->free_b12_127543;
    float c12_127544 = futhark_mc_task_131529->free_c12_127544;
    float b2_127545 = futhark_mc_task_131529->free_b2_127545;
    float c2_127546 = futhark_mc_task_131529->free_c2_127546;
    float defunc_2_reduce_res_127547 =
          *futhark_mc_task_131529->retval_defunc_2_reduce_res_127547;
    float defunc_2_reduce_res_127548 =
          *futhark_mc_task_131529->retval_defunc_2_reduce_res_127548;
    size_t reduce_stage_1_tid_res_arr_mem_127883_cached_sizze_131531 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127883 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127885_cached_sizze_131532 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127885 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127883_cached_sizze_131531 <
        (size_t) ((int64_t) 4 * num_tasks_127882)) {
        reduce_stage_1_tid_res_arr_mem_127883 =
            realloc(reduce_stage_1_tid_res_arr_mem_127883, (int64_t) 4 *
                    num_tasks_127882);
        reduce_stage_1_tid_res_arr_mem_127883_cached_sizze_131531 =
            (int64_t) 4 * num_tasks_127882;
    }
    if (reduce_stage_1_tid_res_arr_mem_127885_cached_sizze_131532 <
        (size_t) ((int64_t) 4 * num_tasks_127882)) {
        reduce_stage_1_tid_res_arr_mem_127885 =
            realloc(reduce_stage_1_tid_res_arr_mem_127885, (int64_t) 4 *
                    num_tasks_127882);
        reduce_stage_1_tid_res_arr_mem_127885_cached_sizze_131532 =
            (int64_t) 4 * num_tasks_127882;
    }
    
    int64_t iter_127887;
    struct futhark_mc_segred_stage_1_parloop_struct_131533
    futhark_mc_segred_stage_1_parloop_struct_131533;
    
    futhark_mc_segred_stage_1_parloop_struct_131533.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_gtid_118926 =
        gtid_118926;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_x_119049 = x_119049;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_122404 =
        mem_122404.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_x_127466 = x_127466;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_127472 =
        mem_127472.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_127492 =
        mem_127492.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_127493 =
        mem_127493.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_a12_127542 =
        a12_127542;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_b12_127543 =
        b12_127543;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_c12_127544 =
        c12_127544;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_b2_127545 = b2_127545;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_c2_127546 = c2_127546;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_reduce_stage_1_tid_res_arr_mem_127883 =
        reduce_stage_1_tid_res_arr_mem_127883;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_reduce_stage_1_tid_res_arr_mem_127885 =
        reduce_stage_1_tid_res_arr_mem_127885;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131534_task;
    
    futhark_mc_segred_stage_1_parloop_131534_task.name =
        "futhark_mc_segred_stage_1_parloop_131534";
    futhark_mc_segred_stage_1_parloop_131534_task.fn =
        futhark_mc_segred_stage_1_parloop_131534;
    futhark_mc_segred_stage_1_parloop_131534_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131533;
    futhark_mc_segred_stage_1_parloop_131534_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131534_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131534_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131534_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131534_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131534_task);
    
    if (futhark_mc_segred_stage_1_parloop_131534_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131534_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131534_total_end -
                 futhark_mc_segred_stage_1_parloop_131534_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127547 = 0.0F;
        defunc_2_reduce_res_127548 = 0.0F;
    }
    
    float x_127890;
    float x_127891;
    float x_127893;
    float x_127894;
    
    for (int32_t i_127896 = 0; i_127896 < num_tasks_127882; i_127896++) {
        flat_tid_118935 = i_127896;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127890 = defunc_2_reduce_res_127547;
            }
            // load next params
            {
                x_127891 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127883)[flat_tid_118935];
            }
            // red body
            {
                float defunc_1_op_res_127892 = x_127890 + x_127891;
                
                defunc_2_reduce_res_127547 = defunc_1_op_res_127892;
            }
            // load acc params
            {
                x_127893 = defunc_2_reduce_res_127548;
            }
            // load next params
            {
                x_127894 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127885)[flat_tid_118935];
            }
            // red body
            {
                float defunc_1_op_res_127895 = x_127893 + x_127894;
                
                defunc_2_reduce_res_127548 = defunc_1_op_res_127895;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127883);
    free(reduce_stage_1_tid_res_arr_mem_127885);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131530_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131530_end -
                 futhark_mc_segred_task_131530_start;
        
        ctx->futhark_mc_segred_task_131530_runs[tid]++;
        ctx->futhark_mc_segred_task_131530_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131530_iter[tid] += iterations;
    }
    *futhark_mc_task_131529->retval_defunc_2_reduce_res_127547 =
        defunc_2_reduce_res_127547;
    *futhark_mc_task_131529->retval_defunc_2_reduce_res_127548 =
        defunc_2_reduce_res_127548;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131511(void *args, int64_t start,
                                            int64_t end, int flat_tid_118929,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131510
    *futhark_mc_segmap_parloop_struct_131510 =
    (struct futhark_mc_segmap_parloop_struct_131510 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131510->ctx;
    uint64_t futhark_mc_segmap_parloop_131511_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131511_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131510->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131510->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131510->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131510->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131510->free_i_114594;
    int64_t gtid_118926 =
            futhark_mc_segmap_parloop_struct_131510->free_gtid_118926;
    int64_t x_119049 = futhark_mc_segmap_parloop_struct_131510->free_x_119049;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 =
            futhark_mc_segmap_parloop_struct_131510->free_bytes_122696;
    struct memblock mem_122770 = {.desc ="mem_122770", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_122770,
                                  .size =0, .references =NULL};
    struct memblock mem_122773 = {.desc ="mem_122773", .mem =
                                  futhark_mc_segmap_parloop_struct_131510->free_mem_122773,
                                  .size =0, .references =NULL};
    size_t mem_127471_cached_sizze_131512 = 0;
    char *mem_127471 = NULL;
    size_t mem_127472_cached_sizze_131513 = 0;
    char *mem_127472 = NULL;
    size_t mem_127492_cached_sizze_131514 = 0;
    char *mem_127492 = NULL;
    size_t mem_127493_cached_sizze_131515 = 0;
    char *mem_127493 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127774 = start;
    
    if (mem_127471_cached_sizze_131512 < (size_t) bytes_122696) {
        mem_127471 = realloc(mem_127471, bytes_122696);
        mem_127471_cached_sizze_131512 = bytes_122696;
    }
    if (mem_127472_cached_sizze_131513 < (size_t) bytes_122696) {
        mem_127472 = realloc(mem_127472, bytes_122696);
        mem_127472_cached_sizze_131513 = bytes_122696;
    }
    if (mem_127492_cached_sizze_131514 < (size_t) bytes_122696) {
        mem_127492 = realloc(mem_127492, bytes_122696);
        mem_127492_cached_sizze_131514 = bytes_122696;
    }
    if (mem_127493_cached_sizze_131515 < (size_t) bytes_122696) {
        mem_127493 = realloc(mem_127493, bytes_122696);
        mem_127493_cached_sizze_131515 = bytes_122696;
    }
    for (; iter_127774 < end; iter_127774++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127838 = l_n_m_114568;
        int64_t gtid_118930 = iter_127774;
        int64_t remnant_127839 = iter_127774 - gtid_118930;
        int64_t x_127466 = ((int64_t *) mem_122102.mem)[gtid_118926 *
                                                        l_n_m_114568 +
                                                        gtid_118930];
        float x_127467 = ((float *) mem_122106.mem)[gtid_118926 * l_n_m_114568 +
                                                    gtid_118930];
        int64_t min_arg_127468 = mul64(t_jump_114525, gtid_118930);
        int64_t min_res_127469 = smin64(i_114594, min_arg_127468);
        float defunc_0_f_res_127470 = sitofp_i64_f32(min_res_127469);
        int64_t flat_tid_118931 = (int64_t) 0;
        int32_t num_tasks_127840;
        struct futhark_mc_task_131516 futhark_mc_task_131516;
        
        futhark_mc_task_131516.ctx = ctx;
        futhark_mc_task_131516.free_n_114518 = n_114518;
        futhark_mc_task_131516.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131516.free_gtid_118926 = gtid_118926;
        futhark_mc_task_131516.free_x_119049 = x_119049;
        futhark_mc_task_131516.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131516.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131516.free_x_127466 = x_127466;
        futhark_mc_task_131516.free_x_127467 = x_127467;
        futhark_mc_task_131516.free_defunc_0_f_res_127470 =
            defunc_0_f_res_127470;
        futhark_mc_task_131516.free_mem_127471 = mem_127471;
        futhark_mc_task_131516.free_mem_127472 = mem_127472;
        
        struct scheduler_segop futhark_mc_task_131516_task;
        
        futhark_mc_task_131516_task.args = &futhark_mc_task_131516;
        futhark_mc_task_131516_task.top_level_fn =
            futhark_mc_segmap_task_131517;
        futhark_mc_task_131516_task.name = "futhark_mc_segmap_task_131517";
        futhark_mc_task_131516_task.iterations = l_window_114522;
        futhark_mc_task_131516_task.task_time =
            &ctx->futhark_mc_segmap_task_131517_total_time;
        futhark_mc_task_131516_task.task_iter =
            &ctx->futhark_mc_segmap_task_131517_total_iter;
        futhark_mc_task_131516_task.sched = STATIC;
        futhark_mc_task_131516_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131517_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131516_task);
        
        if (futhark_mc_segmap_task_131517_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_127494;
        float defunc_2_reduce_res_127495;
        float defunc_2_reduce_res_127496;
        float defunc_2_reduce_res_127497;
        float defunc_2_reduce_res_127498;
        int64_t flat_tid_118933 = (int64_t) 0;
        int32_t num_tasks_127849;
        struct futhark_mc_task_131520 futhark_mc_task_131520;
        
        futhark_mc_task_131520.ctx = ctx;
        futhark_mc_task_131520.free_mem_127471 = mem_127471;
        futhark_mc_task_131520.free_mem_127472 = mem_127472;
        futhark_mc_task_131520.retval_defunc_2_reduce_res_127494 =
            &defunc_2_reduce_res_127494;
        futhark_mc_task_131520.retval_defunc_2_reduce_res_127495 =
            &defunc_2_reduce_res_127495;
        futhark_mc_task_131520.retval_defunc_2_reduce_res_127496 =
            &defunc_2_reduce_res_127496;
        futhark_mc_task_131520.retval_defunc_2_reduce_res_127497 =
            &defunc_2_reduce_res_127497;
        futhark_mc_task_131520.retval_defunc_2_reduce_res_127498 =
            &defunc_2_reduce_res_127498;
        futhark_mc_task_131520.retval_mem_127492 = mem_127492;
        futhark_mc_task_131520.retval_mem_127493 = mem_127493;
        
        struct scheduler_segop futhark_mc_task_131520_task;
        
        futhark_mc_task_131520_task.args = &futhark_mc_task_131520;
        futhark_mc_task_131520_task.top_level_fn =
            futhark_mc_segred_task_131521;
        futhark_mc_task_131520_task.name = "futhark_mc_segred_task_131521";
        futhark_mc_task_131520_task.iterations = l_window_114522;
        futhark_mc_task_131520_task.task_time =
            &ctx->futhark_mc_segred_task_131521_total_time;
        futhark_mc_task_131520_task.task_iter =
            &ctx->futhark_mc_segred_task_131521_total_iter;
        futhark_mc_task_131520_task.sched = STATIC;
        futhark_mc_task_131520_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131521_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131520_task);
        
        if (futhark_mc_segred_task_131521_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_127522 = defunc_2_reduce_res_127496 *
              defunc_2_reduce_res_127498;
        float y_127523 = defunc_2_reduce_res_127497 *
              defunc_2_reduce_res_127497;
        float a12_127524 = x_127522 - y_127523;
        float x_127525 = defunc_2_reduce_res_127496 *
              defunc_2_reduce_res_127497;
        float y_127526 = defunc_2_reduce_res_127495 *
              defunc_2_reduce_res_127498;
        float b12_127527 = x_127525 - y_127526;
        float x_127528 = defunc_2_reduce_res_127495 *
              defunc_2_reduce_res_127497;
        float y_127529 = defunc_2_reduce_res_127496 *
              defunc_2_reduce_res_127496;
        float c12_127530 = x_127528 - y_127529;
        float x_127531 = defunc_2_reduce_res_127494 *
              defunc_2_reduce_res_127498;
        float b2_127532 = x_127531 - y_127529;
        float x_127533 = defunc_2_reduce_res_127495 *
              defunc_2_reduce_res_127496;
        float y_127534 = defunc_2_reduce_res_127494 *
              defunc_2_reduce_res_127497;
        float c2_127535 = x_127533 - y_127534;
        float x_127536 = defunc_2_reduce_res_127494 * a12_127524;
        float y_127537 = defunc_2_reduce_res_127495 * b12_127527;
        float x_127538 = x_127536 + y_127537;
        float y_127539 = defunc_2_reduce_res_127496 * c12_127530;
        float y_127540 = x_127538 + y_127539;
        float det_127541 = 1.0F / y_127540;
        float a12_127542 = a12_127524 * det_127541;
        float b12_127543 = b12_127527 * det_127541;
        float c12_127544 = c12_127530 * det_127541;
        float b2_127545 = b2_127532 * det_127541;
        float c2_127546 = c2_127535 * det_127541;
        float defunc_2_reduce_res_127547;
        float defunc_2_reduce_res_127548;
        int64_t flat_tid_118935 = (int64_t) 0;
        int32_t num_tasks_127882;
        struct futhark_mc_task_131529 futhark_mc_task_131529;
        
        futhark_mc_task_131529.ctx = ctx;
        futhark_mc_task_131529.free_n_114518 = n_114518;
        futhark_mc_task_131529.free_gtid_118926 = gtid_118926;
        futhark_mc_task_131529.free_x_119049 = x_119049;
        futhark_mc_task_131529.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131529.free_x_127466 = x_127466;
        futhark_mc_task_131529.free_mem_127472 = mem_127472;
        futhark_mc_task_131529.free_mem_127492 = mem_127492;
        futhark_mc_task_131529.free_mem_127493 = mem_127493;
        futhark_mc_task_131529.free_a12_127542 = a12_127542;
        futhark_mc_task_131529.free_b12_127543 = b12_127543;
        futhark_mc_task_131529.free_c12_127544 = c12_127544;
        futhark_mc_task_131529.free_b2_127545 = b2_127545;
        futhark_mc_task_131529.free_c2_127546 = c2_127546;
        futhark_mc_task_131529.retval_defunc_2_reduce_res_127547 =
            &defunc_2_reduce_res_127547;
        futhark_mc_task_131529.retval_defunc_2_reduce_res_127548 =
            &defunc_2_reduce_res_127548;
        
        struct scheduler_segop futhark_mc_task_131529_task;
        
        futhark_mc_task_131529_task.args = &futhark_mc_task_131529;
        futhark_mc_task_131529_task.top_level_fn =
            futhark_mc_segred_task_131530;
        futhark_mc_task_131529_task.name = "futhark_mc_segred_task_131530";
        futhark_mc_task_131529_task.iterations = l_window_114522;
        futhark_mc_task_131529_task.task_time =
            &ctx->futhark_mc_segred_task_131530_total_time;
        futhark_mc_task_131529_task.task_iter =
            &ctx->futhark_mc_segred_task_131530_total_iter;
        futhark_mc_task_131529_task.sched = STATIC;
        futhark_mc_task_131529_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131530_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131529_task);
        
        if (futhark_mc_segred_task_131530_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122770.mem)[gtid_118930] = defunc_2_reduce_res_127547;
        ((float *) mem_122773.mem)[gtid_118930] = defunc_2_reduce_res_127548;
    }
    
  cleanup:
    { }
    free(mem_127471);
    free(mem_127472);
    free(mem_127492);
    free(mem_127493);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131511_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131511_end -
                 futhark_mc_segmap_parloop_131511_start;
        
        ctx->futhark_mc_segmap_parloop_131511_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131511_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131511_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131509(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118929 = tid;
    int num_tasks_127692 = info.nsubtasks;
    struct futhark_mc_task_131501 *futhark_mc_task_131501 =
                                  (struct futhark_mc_task_131501 *) args;
    struct futhark_context *ctx = futhark_mc_task_131501->ctx;
    uint64_t futhark_mc_segmap_nested_task_131509_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131509_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131501->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131501->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131501->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131501->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131501->free_i_114594;
    int64_t gtid_118926 = futhark_mc_task_131501->free_gtid_118926;
    int64_t x_119049 = futhark_mc_task_131501->free_x_119049;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131501->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131501->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131501->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131501->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131501->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 = futhark_mc_task_131501->free_bytes_122696;
    struct memblock mem_122770 = {.desc ="mem_122770", .mem =
                                  futhark_mc_task_131501->free_mem_122770,
                                  .size =0, .references =NULL};
    struct memblock mem_122773 = {.desc ="mem_122773", .mem =
                                  futhark_mc_task_131501->free_mem_122773,
                                  .size =0, .references =NULL};
    int64_t iter_127774;
    struct futhark_mc_segmap_parloop_struct_131510
    futhark_mc_segmap_parloop_struct_131510;
    
    futhark_mc_segmap_parloop_struct_131510.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131510.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131510.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131510.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131510.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131510.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131510.free_gtid_118926 = gtid_118926;
    futhark_mc_segmap_parloop_struct_131510.free_x_119049 = x_119049;
    futhark_mc_segmap_parloop_struct_131510.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131510.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131510.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131510.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131510.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131510.free_bytes_122696 = bytes_122696;
    futhark_mc_segmap_parloop_struct_131510.free_mem_122770 = mem_122770.mem;
    futhark_mc_segmap_parloop_struct_131510.free_mem_122773 = mem_122773.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131511_task;
    
    futhark_mc_segmap_parloop_131511_task.name =
        "futhark_mc_segmap_parloop_131511";
    futhark_mc_segmap_parloop_131511_task.fn = futhark_mc_segmap_parloop_131511;
    futhark_mc_segmap_parloop_131511_task.args =
        &futhark_mc_segmap_parloop_struct_131510;
    futhark_mc_segmap_parloop_131511_task.iterations = iterations;
    futhark_mc_segmap_parloop_131511_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131511_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131511_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131511_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131511_task);
    
    if (futhark_mc_segmap_parloop_131511_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131511_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131511_total_end -
                 futhark_mc_segmap_parloop_131511_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131511_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131511_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131511_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131509_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131509_end -
                 futhark_mc_segmap_nested_task_131509_start;
        
        ctx->futhark_mc_segmap_nested_task_131509_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131509_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131509_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131498(void *args, int64_t start,
                                            int64_t end, int flat_tid_118925,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131497
    *futhark_mc_segmap_parloop_struct_131497 =
    (struct futhark_mc_segmap_parloop_struct_131497 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131497->ctx;
    uint64_t futhark_mc_segmap_parloop_131498_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131498_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131497->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131497->free_n_114518;
    int64_t l_window_114522 =
            futhark_mc_segmap_parloop_struct_131497->free_l_window_114522;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131497->free_t_jump_114525;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131497->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131497->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 =
            futhark_mc_segmap_parloop_struct_131497->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 =
            futhark_mc_segmap_parloop_struct_131497->free_bytes_122696;
    struct memblock mem_122867 = {.desc ="mem_122867", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_122867,
                                  .size =0, .references =NULL};
    struct memblock mem_122871 = {.desc ="mem_122871", .mem =
                                  futhark_mc_segmap_parloop_struct_131497->free_mem_122871,
                                  .size =0, .references =NULL};
    size_t mem_122770_cached_sizze_131499 = 0;
    char *mem_122770 = NULL;
    size_t mem_122773_cached_sizze_131500 = 0;
    char *mem_122773 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127465 = start;
    
    if (mem_122770_cached_sizze_131499 < (size_t) bytes_122033) {
        mem_122770 = realloc(mem_122770, bytes_122033);
        mem_122770_cached_sizze_131499 = bytes_122033;
    }
    if (mem_122773_cached_sizze_131500 < (size_t) bytes_122033) {
        mem_122773 = realloc(mem_122773, bytes_122033);
        mem_122773_cached_sizze_131500 = bytes_122033;
    }
    for (; iter_127465 < end; iter_127465++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127690 = m_114517;
        int64_t gtid_118926 = iter_127465;
        int64_t remnant_127691 = iter_127465 - gtid_118926;
        int64_t x_119049 = ((int64_t *) mem_121960.mem)[gtid_118926];
        int64_t flat_tid_118927 = (int64_t) 0;
        int32_t num_tasks_127692;
        int64_t flat_tid_118929 = (int64_t) 0;
        struct futhark_mc_task_131501 futhark_mc_task_131501;
        
        futhark_mc_task_131501.ctx = ctx;
        futhark_mc_task_131501.free_n_114518 = n_114518;
        futhark_mc_task_131501.free_l_window_114522 = l_window_114522;
        futhark_mc_task_131501.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131501.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131501.free_i_114594 = i_114594;
        futhark_mc_task_131501.free_gtid_118926 = gtid_118926;
        futhark_mc_task_131501.free_x_119049 = x_119049;
        futhark_mc_task_131501.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131501.free_mem_122102 = mem_122102.mem;
        futhark_mc_task_131501.free_mem_122106 = mem_122106.mem;
        futhark_mc_task_131501.free_mem_122404 = mem_122404.mem;
        futhark_mc_task_131501.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131501.free_bytes_122696 = bytes_122696;
        futhark_mc_task_131501.free_mem_122770 = mem_122770;
        futhark_mc_task_131501.free_mem_122773 = mem_122773;
        
        struct scheduler_segop futhark_mc_task_131501_task;
        
        futhark_mc_task_131501_task.args = &futhark_mc_task_131501;
        futhark_mc_task_131501_task.top_level_fn =
            futhark_mc_segmap_task_131502;
        futhark_mc_task_131501_task.name = "futhark_mc_segmap_task_131502";
        futhark_mc_task_131501_task.iterations = l_n_m_114568;
        futhark_mc_task_131501_task.task_time =
            &ctx->futhark_mc_segmap_task_131502_total_time;
        futhark_mc_task_131501_task.task_iter =
            &ctx->futhark_mc_segmap_task_131502_total_iter;
        futhark_mc_task_131501_task.sched = STATIC;
        futhark_mc_task_131501_task.nested_fn =
            futhark_mc_segmap_nested_task_131509;
        
        int futhark_mc_segmap_task_131502_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131501_task);
        
        if (futhark_mc_segmap_task_131502_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122867.mem + gtid_118926 * l_n_m_114568 * (int64_t) 4,
                mem_122770 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
        memmove(mem_122871.mem + gtid_118926 * l_n_m_114568 * (int64_t) 4,
                mem_122773 + (int64_t) 0, l_n_m_114568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122770);
    free(mem_122773);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131498_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131498_end -
                 futhark_mc_segmap_parloop_131498_start;
        
        ctx->futhark_mc_segmap_parloop_131498_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131498_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131498_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131496(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118925 = tid;
    int num_tasks_127331 = info.nsubtasks;
    struct futhark_mc_task_131486 *futhark_mc_task_131486 =
                                  (struct futhark_mc_task_131486 *) args;
    struct futhark_context *ctx = futhark_mc_task_131486->ctx;
    uint64_t futhark_mc_segmap_nested_task_131496_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131496_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131486->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131486->free_n_114518;
    int64_t l_window_114522 = futhark_mc_task_131486->free_l_window_114522;
    int64_t t_jump_114525 = futhark_mc_task_131486->free_t_jump_114525;
    int64_t l_n_m_114568 = futhark_mc_task_131486->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131486->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131486->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131486->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122033 = futhark_mc_task_131486->free_bytes_122033;
    struct memblock mem_122102 = {.desc ="mem_122102", .mem =
                                  futhark_mc_task_131486->free_mem_122102,
                                  .size =0, .references =NULL};
    struct memblock mem_122106 = {.desc ="mem_122106", .mem =
                                  futhark_mc_task_131486->free_mem_122106,
                                  .size =0, .references =NULL};
    struct memblock mem_122404 = {.desc ="mem_122404", .mem =
                                  futhark_mc_task_131486->free_mem_122404,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131486->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t bytes_122696 = futhark_mc_task_131486->free_bytes_122696;
    struct memblock mem_122867 = {.desc ="mem_122867", .mem =
                                  futhark_mc_task_131486->free_mem_122867,
                                  .size =0, .references =NULL};
    struct memblock mem_122871 = {.desc ="mem_122871", .mem =
                                  futhark_mc_task_131486->free_mem_122871,
                                  .size =0, .references =NULL};
    int64_t iter_127465;
    struct futhark_mc_segmap_parloop_struct_131497
    futhark_mc_segmap_parloop_struct_131497;
    
    futhark_mc_segmap_parloop_struct_131497.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131497.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131497.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131497.free_l_window_114522 =
        l_window_114522;
    futhark_mc_segmap_parloop_struct_131497.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131497.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131497.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131497.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131497.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131497.free_bytes_122033 = bytes_122033;
    futhark_mc_segmap_parloop_struct_131497.free_mem_122102 = mem_122102.mem;
    futhark_mc_segmap_parloop_struct_131497.free_mem_122106 = mem_122106.mem;
    futhark_mc_segmap_parloop_struct_131497.free_mem_122404 = mem_122404.mem;
    futhark_mc_segmap_parloop_struct_131497.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131497.free_bytes_122696 = bytes_122696;
    futhark_mc_segmap_parloop_struct_131497.free_mem_122867 = mem_122867.mem;
    futhark_mc_segmap_parloop_struct_131497.free_mem_122871 = mem_122871.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131498_task;
    
    futhark_mc_segmap_parloop_131498_task.name =
        "futhark_mc_segmap_parloop_131498";
    futhark_mc_segmap_parloop_131498_task.fn = futhark_mc_segmap_parloop_131498;
    futhark_mc_segmap_parloop_131498_task.args =
        &futhark_mc_segmap_parloop_struct_131497;
    futhark_mc_segmap_parloop_131498_task.iterations = iterations;
    futhark_mc_segmap_parloop_131498_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131498_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131498_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131498_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131498_task);
    
    if (futhark_mc_segmap_parloop_131498_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131498_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131498_total_end -
                 futhark_mc_segmap_parloop_131498_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131498_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131498_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131498_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131496_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131496_end -
                 futhark_mc_segmap_nested_task_131496_start;
        
        ctx->futhark_mc_segmap_nested_task_131496_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131496_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131496_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131535 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_y_115773;
    int64_t free_bytes_121961;
    char *free_ext_mem_122876;
    char *free_ext_mem_122877;
    char *free_mem_122899;
};
struct futhark_mc_segmap_parloop_struct_131537 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_y_115773;
    int64_t free_bytes_121961;
    char *free_ext_mem_122876;
    char *free_ext_mem_122877;
    char *free_mem_122899;
};
static int futhark_mc_segmap_parloop_131538(void *args, int64_t start,
                                            int64_t end, int flat_tid_119266,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131537
    *futhark_mc_segmap_parloop_struct_131537 =
    (struct futhark_mc_segmap_parloop_struct_131537 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131537->ctx;
    uint64_t futhark_mc_segmap_parloop_131538_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131538_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131537->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131537->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131537->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131537->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131537->free_i_114594;
    int64_t y_115773 = futhark_mc_segmap_parloop_struct_131537->free_y_115773;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131537->free_bytes_121961;
    struct memblock ext_mem_122876 = {.desc ="ext_mem_122876", .mem =
                                      futhark_mc_segmap_parloop_struct_131537->free_ext_mem_122876,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122877 = {.desc ="ext_mem_122877", .mem =
                                      futhark_mc_segmap_parloop_struct_131537->free_ext_mem_122877,
                                      .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_segmap_parloop_struct_131537->free_mem_122899,
                                  .size =0, .references =NULL};
    size_t mem_122883_cached_sizze_131539 = 0;
    char *mem_122883 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127898 = start;
    
    if (mem_122883_cached_sizze_131539 < (size_t) bytes_121961) {
        mem_122883 = realloc(mem_122883, bytes_121961);
        mem_122883_cached_sizze_131539 = bytes_121961;
    }
    for (; iter_127898 < end; iter_127898++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127948 = m_114517;
        int64_t gtid_119267 = iter_127898;
        int64_t remnant_127949 = iter_127898 - gtid_119267;
        
        for (int64_t i_127899 = 0; i_127899 < n_114518; i_127899++) {
            int64_t m_v_127901 = sdiv64(i_127899, l_jump_114526);
            bool cond_127902 = m_v_127901 == y_115773;
            int64_t j_127903;
            
            if (cond_127902) {
                int64_t j_t_res_127904 = sub64(m_v_127901, (int64_t) 1);
                
                j_127903 = j_t_res_127904;
            } else {
                j_127903 = m_v_127901;
            }
            
            int64_t min_arg_127905 = mul64(l_jump_114526, j_127903);
            int64_t min_res_127906 = smin64(i_114594, min_arg_127905);
            int64_t defunc_0_m_fun_arg_127907 = add64((int64_t) 1, j_127903);
            int64_t min_arg_127908 = mul64(l_jump_114526,
                                           defunc_0_m_fun_arg_127907);
            int64_t min_res_127909 = smin64(i_114594, min_arg_127908);
            int64_t i64_arg_127910 = sub64(min_res_127909, min_res_127906);
            float i64_res_127911 = sitofp_i64_f32(i64_arg_127910);
            int64_t i64_arg_127912 = sub64(i_127899, min_res_127906);
            float i64_res_127913 = sitofp_i64_f32(i64_arg_127912);
            float u_127914 = i64_res_127913 / i64_res_127911;
            float u2_127915 = u_127914 * u_127914;
            float u3_127916 = u_127914 * u2_127915;
            float x_127917 = 2.0F * u3_127916;
            float y_127918 = 3.0F * u2_127915;
            float x_127919 = x_127917 - y_127918;
            float x_127920 = 1.0F + x_127919;
            bool x_127921 = sle64((int64_t) 0, j_127903);
            bool y_127922 = slt64(j_127903, l_n_m_114568);
            bool bounds_check_127923 = x_127921 && y_127922;
            bool index_certs_127924;
            
            if (!bounds_check_127923) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_127903,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_114568, "].",
                              "-> #0  stl.fut:63:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:252:21-67\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:250:15-253:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float y_127925 = ((float *) ext_mem_122877.mem)[gtid_119267 *
                                                            l_n_m_114568 +
                                                            j_127903];
            float x_127926 = x_127920 * y_127925;
            float x_127927 = y_127918 - x_127917;
            bool x_127928 = sle64((int64_t) 0, defunc_0_m_fun_arg_127907);
            bool y_127929 = slt64(defunc_0_m_fun_arg_127907, l_n_m_114568);
            bool bounds_check_127930 = x_127928 && y_127929;
            bool index_certs_127931;
            
            if (!bounds_check_127930) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_127907,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_114568, "].",
                              "-> #0  stl.fut:64:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:252:21-67\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:250:15-253:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float y_127932 = ((float *) ext_mem_122877.mem)[gtid_119267 *
                                                            l_n_m_114568 +
                                                            defunc_0_m_fun_arg_127907];
            float y_127933 = x_127927 * y_127932;
            float x_127934 = x_127926 + y_127933;
            float y_127935 = 2.0F * u2_127915;
            float x_127936 = u3_127916 - y_127935;
            float x_127937 = u_127914 + x_127936;
            float y_127938 = ((float *) ext_mem_122876.mem)[gtid_119267 *
                                                            l_n_m_114568 +
                                                            j_127903];
            float x_127939 = x_127937 * y_127938;
            float y_127940 = i64_res_127911 * x_127939;
            float x_127941 = x_127934 + y_127940;
            float x_127942 = u3_127916 - u2_127915;
            float y_127943 = ((float *) ext_mem_122876.mem)[gtid_119267 *
                                                            l_n_m_114568 +
                                                            defunc_0_m_fun_arg_127907];
            float x_127944 = x_127942 * y_127943;
            float y_127945 = i64_res_127911 * x_127944;
            float defunc_0_f_res_127946 = x_127941 + y_127945;
            
            ((float *) mem_122883)[i_127899] = defunc_0_f_res_127946;
        }
        memmove(mem_122899.mem + gtid_119267 * n_114518 * (int64_t) 4,
                mem_122883 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122883);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131538_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131538_end -
                 futhark_mc_segmap_parloop_131538_start;
        
        ctx->futhark_mc_segmap_parloop_131538_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131538_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131538_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131536(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119266 = tid;
    int num_tasks_127897 = info.nsubtasks;
    struct futhark_mc_task_131535 *futhark_mc_task_131535 =
                                  (struct futhark_mc_task_131535 *) args;
    struct futhark_context *ctx = futhark_mc_task_131535->ctx;
    uint64_t futhark_mc_segmap_task_131536_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131536_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131535->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131535->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131535->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131535->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131535->free_i_114594;
    int64_t y_115773 = futhark_mc_task_131535->free_y_115773;
    int64_t bytes_121961 = futhark_mc_task_131535->free_bytes_121961;
    struct memblock ext_mem_122876 = {.desc ="ext_mem_122876", .mem =
                                      futhark_mc_task_131535->free_ext_mem_122876,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122877 = {.desc ="ext_mem_122877", .mem =
                                      futhark_mc_task_131535->free_ext_mem_122877,
                                      .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_task_131535->free_mem_122899,
                                  .size =0, .references =NULL};
    int64_t iter_127898;
    struct futhark_mc_segmap_parloop_struct_131537
    futhark_mc_segmap_parloop_struct_131537;
    
    futhark_mc_segmap_parloop_struct_131537.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131537.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131537.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131537.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131537.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131537.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131537.free_y_115773 = y_115773;
    futhark_mc_segmap_parloop_struct_131537.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131537.free_ext_mem_122876 =
        ext_mem_122876.mem;
    futhark_mc_segmap_parloop_struct_131537.free_ext_mem_122877 =
        ext_mem_122877.mem;
    futhark_mc_segmap_parloop_struct_131537.free_mem_122899 = mem_122899.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131538_task;
    
    futhark_mc_segmap_parloop_131538_task.name =
        "futhark_mc_segmap_parloop_131538";
    futhark_mc_segmap_parloop_131538_task.fn = futhark_mc_segmap_parloop_131538;
    futhark_mc_segmap_parloop_131538_task.args =
        &futhark_mc_segmap_parloop_struct_131537;
    futhark_mc_segmap_parloop_131538_task.iterations = iterations;
    futhark_mc_segmap_parloop_131538_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131538_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131538_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131538_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131538_task);
    
    if (futhark_mc_segmap_parloop_131538_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131538_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131538_total_end -
                 futhark_mc_segmap_parloop_131538_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131538_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131538_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131538_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131536_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131536_end -
                 futhark_mc_segmap_task_131536_start;
        
        ctx->futhark_mc_segmap_task_131536_runs[tid]++;
        ctx->futhark_mc_segmap_task_131536_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131536_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131541 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_y_115773;
    int64_t free_bytes_121961;
    char *free_ext_mem_122876;
    char *free_ext_mem_122877;
    char *free_mem_122899;
};
struct futhark_mc_task_131544 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_y_115773;
    int64_t free_gtid_119269;
    char *free_ext_mem_122876;
    char *free_ext_mem_122877;
    char *free_mem_122880;
};
struct futhark_mc_segmap_parloop_struct_131546 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_l_jump_114526;
    int64_t free_l_n_m_114568;
    int64_t free_i_114594;
    int64_t free_y_115773;
    int64_t free_gtid_119269;
    char *free_ext_mem_122876;
    char *free_ext_mem_122877;
    char *free_mem_122880;
};
static int futhark_mc_segmap_parloop_131547(void *args, int64_t start,
                                            int64_t end, int flat_tid_119270,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131546
    *futhark_mc_segmap_parloop_struct_131546 =
    (struct futhark_mc_segmap_parloop_struct_131546 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131546->ctx;
    uint64_t futhark_mc_segmap_parloop_131547_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131547_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131546->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131546->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131546->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131546->free_i_114594;
    int64_t y_115773 = futhark_mc_segmap_parloop_struct_131546->free_y_115773;
    int64_t gtid_119269 =
            futhark_mc_segmap_parloop_struct_131546->free_gtid_119269;
    struct memblock ext_mem_122876 = {.desc ="ext_mem_122876", .mem =
                                      futhark_mc_segmap_parloop_struct_131546->free_ext_mem_122876,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122877 = {.desc ="ext_mem_122877", .mem =
                                      futhark_mc_segmap_parloop_struct_131546->free_ext_mem_122877,
                                      .size =0, .references =NULL};
    struct memblock mem_122880 = {.desc ="mem_122880", .mem =
                                  futhark_mc_segmap_parloop_struct_131546->free_mem_122880,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128001 = start;
    
    for (; iter_128001 < end; iter_128001++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128003 = n_114518;
        int64_t gtid_119271 = iter_128001;
        int64_t remnant_128004 = iter_128001 - gtid_119271;
        int64_t m_v_127952 = sdiv64(gtid_119271, l_jump_114526);
        bool cond_127953 = m_v_127952 == y_115773;
        int64_t j_127954;
        
        if (cond_127953) {
            int64_t j_t_res_128002 = sub64(m_v_127952, (int64_t) 1);
            
            j_127954 = j_t_res_128002;
        } else {
            j_127954 = m_v_127952;
        }
        
        int64_t min_arg_127956 = mul64(l_jump_114526, j_127954);
        int64_t min_res_127957 = smin64(i_114594, min_arg_127956);
        int64_t defunc_0_m_fun_arg_127958 = add64((int64_t) 1, j_127954);
        int64_t min_arg_127959 = mul64(l_jump_114526,
                                       defunc_0_m_fun_arg_127958);
        int64_t min_res_127960 = smin64(i_114594, min_arg_127959);
        int64_t i64_arg_127961 = sub64(min_res_127960, min_res_127957);
        float i64_res_127962 = sitofp_i64_f32(i64_arg_127961);
        int64_t i64_arg_127963 = sub64(gtid_119271, min_res_127957);
        float i64_res_127964 = sitofp_i64_f32(i64_arg_127963);
        float u_127965 = i64_res_127964 / i64_res_127962;
        float u2_127966 = u_127965 * u_127965;
        float u3_127967 = u_127965 * u2_127966;
        float x_127968 = 2.0F * u3_127967;
        float y_127969 = 3.0F * u2_127966;
        float x_127970 = x_127968 - y_127969;
        float x_127971 = 1.0F + x_127970;
        bool x_127972 = sle64((int64_t) 0, j_127954);
        bool y_127973 = slt64(j_127954, l_n_m_114568);
        bool bounds_check_127974 = x_127972 && y_127973;
        bool index_certs_127975;
        
        if (!bounds_check_127974) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_127954,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_114568, "].",
                                   "-> #0  stl.fut:63:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:252:21-67\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:250:15-253:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
            return 1;
        }
        
        float y_127976 = ((float *) ext_mem_122877.mem)[gtid_119269 *
                                                        l_n_m_114568 +
                                                        j_127954];
        float x_127977 = x_127971 * y_127976;
        float x_127978 = y_127969 - x_127968;
        bool x_127979 = sle64((int64_t) 0, defunc_0_m_fun_arg_127958);
        bool y_127980 = slt64(defunc_0_m_fun_arg_127958, l_n_m_114568);
        bool bounds_check_127981 = x_127979 && y_127980;
        bool index_certs_127982;
        
        if (!bounds_check_127981) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_127958,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_114568, "].",
                                   "-> #0  stl.fut:64:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:252:21-67\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:250:15-253:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
            return 1;
        }
        
        float y_127983 = ((float *) ext_mem_122877.mem)[gtid_119269 *
                                                        l_n_m_114568 +
                                                        defunc_0_m_fun_arg_127958];
        float y_127984 = x_127978 * y_127983;
        float x_127985 = x_127977 + y_127984;
        float y_127986 = 2.0F * u2_127966;
        float x_127987 = u3_127967 - y_127986;
        float x_127988 = u_127965 + x_127987;
        float y_127989 = ((float *) ext_mem_122876.mem)[gtid_119269 *
                                                        l_n_m_114568 +
                                                        j_127954];
        float x_127990 = x_127988 * y_127989;
        float y_127991 = i64_res_127962 * x_127990;
        float x_127992 = x_127985 + y_127991;
        float x_127993 = u3_127967 - u2_127966;
        float y_127994 = ((float *) ext_mem_122876.mem)[gtid_119269 *
                                                        l_n_m_114568 +
                                                        defunc_0_m_fun_arg_127958];
        float x_127995 = x_127993 * y_127994;
        float y_127996 = i64_res_127962 * x_127995;
        float defunc_0_f_res_127997 = x_127992 + y_127996;
        
        ((float *) mem_122880.mem)[gtid_119271] = defunc_0_f_res_127997;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131547_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131547_end -
                 futhark_mc_segmap_parloop_131547_start;
        
        ctx->futhark_mc_segmap_parloop_131547_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131547_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131547_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131545(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119270 = tid;
    int num_tasks_128000 = info.nsubtasks;
    struct futhark_mc_task_131544 *futhark_mc_task_131544 =
                                  (struct futhark_mc_task_131544 *) args;
    struct futhark_context *ctx = futhark_mc_task_131544->ctx;
    uint64_t futhark_mc_segmap_task_131545_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131545_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131544->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131544->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131544->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131544->free_i_114594;
    int64_t y_115773 = futhark_mc_task_131544->free_y_115773;
    int64_t gtid_119269 = futhark_mc_task_131544->free_gtid_119269;
    struct memblock ext_mem_122876 = {.desc ="ext_mem_122876", .mem =
                                      futhark_mc_task_131544->free_ext_mem_122876,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122877 = {.desc ="ext_mem_122877", .mem =
                                      futhark_mc_task_131544->free_ext_mem_122877,
                                      .size =0, .references =NULL};
    struct memblock mem_122880 = {.desc ="mem_122880", .mem =
                                  futhark_mc_task_131544->free_mem_122880,
                                  .size =0, .references =NULL};
    int64_t iter_128001;
    struct futhark_mc_segmap_parloop_struct_131546
    futhark_mc_segmap_parloop_struct_131546;
    
    futhark_mc_segmap_parloop_struct_131546.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131546.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131546.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131546.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131546.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131546.free_y_115773 = y_115773;
    futhark_mc_segmap_parloop_struct_131546.free_gtid_119269 = gtid_119269;
    futhark_mc_segmap_parloop_struct_131546.free_ext_mem_122876 =
        ext_mem_122876.mem;
    futhark_mc_segmap_parloop_struct_131546.free_ext_mem_122877 =
        ext_mem_122877.mem;
    futhark_mc_segmap_parloop_struct_131546.free_mem_122880 = mem_122880.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131547_task;
    
    futhark_mc_segmap_parloop_131547_task.name =
        "futhark_mc_segmap_parloop_131547";
    futhark_mc_segmap_parloop_131547_task.fn = futhark_mc_segmap_parloop_131547;
    futhark_mc_segmap_parloop_131547_task.args =
        &futhark_mc_segmap_parloop_struct_131546;
    futhark_mc_segmap_parloop_131547_task.iterations = iterations;
    futhark_mc_segmap_parloop_131547_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131547_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131547_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131547_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131547_task);
    
    if (futhark_mc_segmap_parloop_131547_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131547_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131547_total_end -
                 futhark_mc_segmap_parloop_131547_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131547_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131547_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131547_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131545_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131545_end -
                 futhark_mc_segmap_task_131545_start;
        
        ctx->futhark_mc_segmap_task_131545_runs[tid]++;
        ctx->futhark_mc_segmap_task_131545_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131545_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131542(void *args, int64_t start,
                                            int64_t end, int flat_tid_119268,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131541
    *futhark_mc_segmap_parloop_struct_131541 =
    (struct futhark_mc_segmap_parloop_struct_131541 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131541->ctx;
    uint64_t futhark_mc_segmap_parloop_131542_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131542_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131541->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131541->free_n_114518;
    int64_t l_jump_114526 =
            futhark_mc_segmap_parloop_struct_131541->free_l_jump_114526;
    int64_t l_n_m_114568 =
            futhark_mc_segmap_parloop_struct_131541->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131541->free_i_114594;
    int64_t y_115773 = futhark_mc_segmap_parloop_struct_131541->free_y_115773;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131541->free_bytes_121961;
    struct memblock ext_mem_122876 = {.desc ="ext_mem_122876", .mem =
                                      futhark_mc_segmap_parloop_struct_131541->free_ext_mem_122876,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122877 = {.desc ="ext_mem_122877", .mem =
                                      futhark_mc_segmap_parloop_struct_131541->free_ext_mem_122877,
                                      .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_segmap_parloop_struct_131541->free_mem_122899,
                                  .size =0, .references =NULL};
    size_t mem_122880_cached_sizze_131543 = 0;
    char *mem_122880 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127951 = start;
    
    if (mem_122880_cached_sizze_131543 < (size_t) bytes_121961) {
        mem_122880 = realloc(mem_122880, bytes_121961);
        mem_122880_cached_sizze_131543 = bytes_121961;
    }
    for (; iter_127951 < end; iter_127951++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127998 = m_114517;
        int64_t gtid_119269 = iter_127951;
        int64_t remnant_127999 = iter_127951 - gtid_119269;
        int64_t flat_tid_119270 = (int64_t) 0;
        int32_t num_tasks_128000;
        struct futhark_mc_task_131544 futhark_mc_task_131544;
        
        futhark_mc_task_131544.ctx = ctx;
        futhark_mc_task_131544.free_n_114518 = n_114518;
        futhark_mc_task_131544.free_l_jump_114526 = l_jump_114526;
        futhark_mc_task_131544.free_l_n_m_114568 = l_n_m_114568;
        futhark_mc_task_131544.free_i_114594 = i_114594;
        futhark_mc_task_131544.free_y_115773 = y_115773;
        futhark_mc_task_131544.free_gtid_119269 = gtid_119269;
        futhark_mc_task_131544.free_ext_mem_122876 = ext_mem_122876.mem;
        futhark_mc_task_131544.free_ext_mem_122877 = ext_mem_122877.mem;
        futhark_mc_task_131544.free_mem_122880 = mem_122880;
        
        struct scheduler_segop futhark_mc_task_131544_task;
        
        futhark_mc_task_131544_task.args = &futhark_mc_task_131544;
        futhark_mc_task_131544_task.top_level_fn =
            futhark_mc_segmap_task_131545;
        futhark_mc_task_131544_task.name = "futhark_mc_segmap_task_131545";
        futhark_mc_task_131544_task.iterations = n_114518;
        futhark_mc_task_131544_task.task_time =
            &ctx->futhark_mc_segmap_task_131545_total_time;
        futhark_mc_task_131544_task.task_iter =
            &ctx->futhark_mc_segmap_task_131545_total_iter;
        futhark_mc_task_131544_task.sched = STATIC;
        futhark_mc_task_131544_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131545_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131544_task);
        
        if (futhark_mc_segmap_task_131545_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122899.mem + gtid_119269 * n_114518 * (int64_t) 4,
                mem_122880 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122880);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131542_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131542_end -
                 futhark_mc_segmap_parloop_131542_start;
        
        ctx->futhark_mc_segmap_parloop_131542_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131542_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131542_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131540(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119268 = tid;
    int num_tasks_127897 = info.nsubtasks;
    struct futhark_mc_task_131535 *futhark_mc_task_131535 =
                                  (struct futhark_mc_task_131535 *) args;
    struct futhark_context *ctx = futhark_mc_task_131535->ctx;
    uint64_t futhark_mc_segmap_nested_task_131540_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131540_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131535->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131535->free_n_114518;
    int64_t l_jump_114526 = futhark_mc_task_131535->free_l_jump_114526;
    int64_t l_n_m_114568 = futhark_mc_task_131535->free_l_n_m_114568;
    int64_t i_114594 = futhark_mc_task_131535->free_i_114594;
    int64_t y_115773 = futhark_mc_task_131535->free_y_115773;
    int64_t bytes_121961 = futhark_mc_task_131535->free_bytes_121961;
    struct memblock ext_mem_122876 = {.desc ="ext_mem_122876", .mem =
                                      futhark_mc_task_131535->free_ext_mem_122876,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122877 = {.desc ="ext_mem_122877", .mem =
                                      futhark_mc_task_131535->free_ext_mem_122877,
                                      .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_task_131535->free_mem_122899,
                                  .size =0, .references =NULL};
    int64_t iter_127951;
    struct futhark_mc_segmap_parloop_struct_131541
    futhark_mc_segmap_parloop_struct_131541;
    
    futhark_mc_segmap_parloop_struct_131541.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131541.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131541.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131541.free_l_jump_114526 = l_jump_114526;
    futhark_mc_segmap_parloop_struct_131541.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_segmap_parloop_struct_131541.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131541.free_y_115773 = y_115773;
    futhark_mc_segmap_parloop_struct_131541.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131541.free_ext_mem_122876 =
        ext_mem_122876.mem;
    futhark_mc_segmap_parloop_struct_131541.free_ext_mem_122877 =
        ext_mem_122877.mem;
    futhark_mc_segmap_parloop_struct_131541.free_mem_122899 = mem_122899.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131542_task;
    
    futhark_mc_segmap_parloop_131542_task.name =
        "futhark_mc_segmap_parloop_131542";
    futhark_mc_segmap_parloop_131542_task.fn = futhark_mc_segmap_parloop_131542;
    futhark_mc_segmap_parloop_131542_task.args =
        &futhark_mc_segmap_parloop_struct_131541;
    futhark_mc_segmap_parloop_131542_task.iterations = iterations;
    futhark_mc_segmap_parloop_131542_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131542_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131542_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131542_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131542_task);
    
    if (futhark_mc_segmap_parloop_131542_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131542_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131542_total_end -
                 futhark_mc_segmap_parloop_131542_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131542_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131542_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131542_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131540_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131540_end -
                 futhark_mc_segmap_nested_task_131540_start;
        
        ctx->futhark_mc_segmap_nested_task_131540_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131540_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131540_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131548 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    char *free_Y_mem_121917;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_122306;
    char *free_ext_mem_122900;
    int64_t free_ext_122901;
    char *free_mem_122959;
    char *free_mem_122963;
};
struct futhark_mc_segmap_parloop_struct_131550 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    char *free_Y_mem_121917;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_122306;
    char *free_ext_mem_122900;
    int64_t free_ext_122901;
    char *free_mem_122959;
    char *free_mem_122963;
};
static int futhark_mc_segmap_parloop_131551(void *args, int64_t start,
                                            int64_t end, int flat_tid_119322,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131550
    *futhark_mc_segmap_parloop_struct_131550 =
    (struct futhark_mc_segmap_parloop_struct_131550 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131550->ctx;
    uint64_t futhark_mc_segmap_parloop_131551_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131551_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131550->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131550->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131550->free_n_p_114520;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131550->free_C_len_114566;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131550->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131550->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131550->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131550->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122900 = {.desc ="ext_mem_122900", .mem =
                                      futhark_mc_segmap_parloop_struct_131550->free_ext_mem_122900,
                                      .size =0, .references =NULL};
    int64_t ext_122901 =
            futhark_mc_segmap_parloop_struct_131550->free_ext_122901;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131550->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122963 = {.desc ="mem_122963", .mem =
                                  futhark_mc_segmap_parloop_struct_131550->free_mem_122963,
                                  .size =0, .references =NULL};
    size_t mem_122913_cached_sizze_131552 = 0;
    char *mem_122913 = NULL;
    size_t mem_122916_cached_sizze_131553 = 0;
    char *mem_122916 = NULL;
    size_t mem_122943_cached_sizze_131554 = 0;
    char *mem_122943 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128006 = start;
    
    if (mem_122913_cached_sizze_131552 < (size_t) bytes_121961) {
        mem_122913 = realloc(mem_122913, bytes_121961);
        mem_122913_cached_sizze_131552 = bytes_121961;
    }
    if (mem_122916_cached_sizze_131553 < (size_t) bytes_121961) {
        mem_122916 = realloc(mem_122916, bytes_121961);
        mem_122916_cached_sizze_131553 = bytes_121961;
    }
    if (mem_122943_cached_sizze_131554 < (size_t) bytes_121961) {
        mem_122943 = realloc(mem_122943, bytes_121961);
        mem_122943_cached_sizze_131554 = bytes_121961;
    }
    for (; iter_128006 < end; iter_128006++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128028 = m_114517;
        int64_t gtid_119323 = iter_128006;
        int64_t remnant_128029 = iter_128006 - gtid_119323;
        
        for (int64_t i_128007 = 0; i_128007 < n_114518; i_128007++) {
            int64_t slice_128010 = n_p_114520 + i_128007;
            float x_128011 = ((float *) mem_122306.mem)[gtid_119323 *
                                                        C_len_114566 +
                                                        slice_128010];
            float x_128012 = ((float *) ext_mem_122900.mem)[gtid_119323 *
                                                            ext_122901 +
                                                            i_128007];
            float x_128013 = ((float *) Y_mem_121917.mem)[gtid_119323 *
                                                          n_114518 + i_128007];
            float defunc_1_f_res_128014 = x_128011 - x_128012;
            float defunc_1_f_res_128015 = x_128013 - defunc_1_f_res_128014;
            
            ((float *) mem_122913)[i_128007] = defunc_1_f_res_128015;
            ((float *) mem_122916)[i_128007] = defunc_1_f_res_128014;
        }
        for (int64_t i_128018 = 0; i_128018 < n_114518; i_128018++) {
            int64_t x_128020 = ((int64_t *) mem_121957.mem)[gtid_119323 *
                                                            n_114518 +
                                                            i_128018];
            bool cond_128021 = sle64((int64_t) 0, x_128020);
            float defunc_0_f_res_128022;
            
            if (cond_128021) {
                bool y_128023 = slt64(x_128020, n_114518);
                bool bounds_check_128024 = cond_128021 && y_128023;
                bool index_certs_128025;
                
                if (!bounds_check_128024) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_128020,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:279:21-41\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:277:13-280:31\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_128026 =
                      ((float *) mem_122913)[x_128020];
                
                defunc_0_f_res_128022 = defunc_0_f_res_t_res_128026;
            } else {
                defunc_0_f_res_128022 = 0.0F;
            }
            ((float *) mem_122943)[i_128018] = defunc_0_f_res_128022;
        }
        memmove(mem_122959.mem + gtid_119323 * n_114518 * (int64_t) 4,
                mem_122943 + (int64_t) 0, n_114518 * (int64_t) 4);
        memmove(mem_122963.mem + gtid_119323 * n_114518 * (int64_t) 4,
                mem_122916 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122913);
    free(mem_122916);
    free(mem_122943);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131551_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131551_end -
                 futhark_mc_segmap_parloop_131551_start;
        
        ctx->futhark_mc_segmap_parloop_131551_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131551_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131551_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131549(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119322 = tid;
    int num_tasks_128005 = info.nsubtasks;
    struct futhark_mc_task_131548 *futhark_mc_task_131548 =
                                  (struct futhark_mc_task_131548 *) args;
    struct futhark_context *ctx = futhark_mc_task_131548->ctx;
    uint64_t futhark_mc_segmap_task_131549_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131549_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131548->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131548->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131548->free_n_p_114520;
    int64_t C_len_114566 = futhark_mc_task_131548->free_C_len_114566;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131548->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131548->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131548->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131548->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122900 = {.desc ="ext_mem_122900", .mem =
                                      futhark_mc_task_131548->free_ext_mem_122900,
                                      .size =0, .references =NULL};
    int64_t ext_122901 = futhark_mc_task_131548->free_ext_122901;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131548->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122963 = {.desc ="mem_122963", .mem =
                                  futhark_mc_task_131548->free_mem_122963,
                                  .size =0, .references =NULL};
    int64_t iter_128006;
    struct futhark_mc_segmap_parloop_struct_131550
    futhark_mc_segmap_parloop_struct_131550;
    
    futhark_mc_segmap_parloop_struct_131550.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131550.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131550.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131550.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131550.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131550.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131550.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131550.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131550.free_mem_122306 = mem_122306.mem;
    futhark_mc_segmap_parloop_struct_131550.free_ext_mem_122900 =
        ext_mem_122900.mem;
    futhark_mc_segmap_parloop_struct_131550.free_ext_122901 = ext_122901;
    futhark_mc_segmap_parloop_struct_131550.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131550.free_mem_122963 = mem_122963.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131551_task;
    
    futhark_mc_segmap_parloop_131551_task.name =
        "futhark_mc_segmap_parloop_131551";
    futhark_mc_segmap_parloop_131551_task.fn = futhark_mc_segmap_parloop_131551;
    futhark_mc_segmap_parloop_131551_task.args =
        &futhark_mc_segmap_parloop_struct_131550;
    futhark_mc_segmap_parloop_131551_task.iterations = iterations;
    futhark_mc_segmap_parloop_131551_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131551_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131551_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131551_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131551_task);
    
    if (futhark_mc_segmap_parloop_131551_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131551_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131551_total_end -
                 futhark_mc_segmap_parloop_131551_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131551_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131551_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131551_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131549_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131549_end -
                 futhark_mc_segmap_task_131549_start;
        
        ctx->futhark_mc_segmap_task_131549_runs[tid]++;
        ctx->futhark_mc_segmap_task_131549_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131549_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131556 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    char *free_Y_mem_121917;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_122306;
    char *free_ext_mem_122900;
    int64_t free_ext_122901;
    char *free_mem_122959;
    char *free_mem_122963;
};
struct futhark_mc_task_131561 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    int64_t free_gtid_119325;
    char *free_Y_mem_121917;
    char *free_mem_122306;
    char *free_ext_mem_122900;
    int64_t free_ext_122901;
    char *free_mem_122904;
    char *free_mem_122907;
};
struct futhark_mc_segmap_parloop_struct_131563 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_n_p_114520;
    int64_t free_C_len_114566;
    int64_t free_gtid_119325;
    char *free_Y_mem_121917;
    char *free_mem_122306;
    char *free_ext_mem_122900;
    int64_t free_ext_122901;
    char *free_mem_122904;
    char *free_mem_122907;
};
static int futhark_mc_segmap_parloop_131564(void *args, int64_t start,
                                            int64_t end, int flat_tid_119326,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131563
    *futhark_mc_segmap_parloop_struct_131563 =
    (struct futhark_mc_segmap_parloop_struct_131563 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131563->ctx;
    uint64_t futhark_mc_segmap_parloop_131564_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131564_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131563->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131563->free_n_p_114520;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131563->free_C_len_114566;
    int64_t gtid_119325 =
            futhark_mc_segmap_parloop_struct_131563->free_gtid_119325;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131563->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131563->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122900 = {.desc ="ext_mem_122900", .mem =
                                      futhark_mc_segmap_parloop_struct_131563->free_ext_mem_122900,
                                      .size =0, .references =NULL};
    int64_t ext_122901 =
            futhark_mc_segmap_parloop_struct_131563->free_ext_122901;
    struct memblock mem_122904 = {.desc ="mem_122904", .mem =
                                  futhark_mc_segmap_parloop_struct_131563->free_mem_122904,
                                  .size =0, .references =NULL};
    struct memblock mem_122907 = {.desc ="mem_122907", .mem =
                                  futhark_mc_segmap_parloop_struct_131563->free_mem_122907,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128050 = start;
    
    for (; iter_128050 < end; iter_128050++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128051 = n_114518;
        int64_t gtid_119327 = iter_128050;
        int64_t remnant_128052 = iter_128050 - gtid_119327;
        int64_t slice_128034 = n_p_114520 + gtid_119327;
        float x_128035 = ((float *) mem_122306.mem)[gtid_119325 * C_len_114566 +
                                                    slice_128034];
        float x_128036 = ((float *) ext_mem_122900.mem)[gtid_119325 *
                                                        ext_122901 +
                                                        gtid_119327];
        float x_128037 = ((float *) Y_mem_121917.mem)[gtid_119325 * n_114518 +
                                                      gtid_119327];
        float defunc_1_f_res_128038 = x_128035 - x_128036;
        float defunc_1_f_res_128039 = x_128037 - defunc_1_f_res_128038;
        
        ((float *) mem_122904.mem)[gtid_119327] = defunc_1_f_res_128039;
        ((float *) mem_122907.mem)[gtid_119327] = defunc_1_f_res_128038;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131564_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131564_end -
                 futhark_mc_segmap_parloop_131564_start;
        
        ctx->futhark_mc_segmap_parloop_131564_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131564_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131564_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131562(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119326 = tid;
    int num_tasks_128049 = info.nsubtasks;
    struct futhark_mc_task_131561 *futhark_mc_task_131561 =
                                  (struct futhark_mc_task_131561 *) args;
    struct futhark_context *ctx = futhark_mc_task_131561->ctx;
    uint64_t futhark_mc_segmap_task_131562_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131562_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131561->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131561->free_n_p_114520;
    int64_t C_len_114566 = futhark_mc_task_131561->free_C_len_114566;
    int64_t gtid_119325 = futhark_mc_task_131561->free_gtid_119325;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131561->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131561->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122900 = {.desc ="ext_mem_122900", .mem =
                                      futhark_mc_task_131561->free_ext_mem_122900,
                                      .size =0, .references =NULL};
    int64_t ext_122901 = futhark_mc_task_131561->free_ext_122901;
    struct memblock mem_122904 = {.desc ="mem_122904", .mem =
                                  futhark_mc_task_131561->free_mem_122904,
                                  .size =0, .references =NULL};
    struct memblock mem_122907 = {.desc ="mem_122907", .mem =
                                  futhark_mc_task_131561->free_mem_122907,
                                  .size =0, .references =NULL};
    int64_t iter_128050;
    struct futhark_mc_segmap_parloop_struct_131563
    futhark_mc_segmap_parloop_struct_131563;
    
    futhark_mc_segmap_parloop_struct_131563.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131563.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131563.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131563.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131563.free_gtid_119325 = gtid_119325;
    futhark_mc_segmap_parloop_struct_131563.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131563.free_mem_122306 = mem_122306.mem;
    futhark_mc_segmap_parloop_struct_131563.free_ext_mem_122900 =
        ext_mem_122900.mem;
    futhark_mc_segmap_parloop_struct_131563.free_ext_122901 = ext_122901;
    futhark_mc_segmap_parloop_struct_131563.free_mem_122904 = mem_122904.mem;
    futhark_mc_segmap_parloop_struct_131563.free_mem_122907 = mem_122907.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131564_task;
    
    futhark_mc_segmap_parloop_131564_task.name =
        "futhark_mc_segmap_parloop_131564";
    futhark_mc_segmap_parloop_131564_task.fn = futhark_mc_segmap_parloop_131564;
    futhark_mc_segmap_parloop_131564_task.args =
        &futhark_mc_segmap_parloop_struct_131563;
    futhark_mc_segmap_parloop_131564_task.iterations = iterations;
    futhark_mc_segmap_parloop_131564_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131564_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131564_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131564_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131564_task);
    
    if (futhark_mc_segmap_parloop_131564_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131564_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131564_total_end -
                 futhark_mc_segmap_parloop_131564_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131564_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131564_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131564_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131562_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131562_end -
                 futhark_mc_segmap_task_131562_start;
        
        ctx->futhark_mc_segmap_task_131562_runs[tid]++;
        ctx->futhark_mc_segmap_task_131562_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131562_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131565 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119325;
    char *free_mem_121957;
    char *free_mem_122904;
    char *free_mem_122910;
};
struct futhark_mc_segmap_parloop_struct_131567 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119325;
    char *free_mem_121957;
    char *free_mem_122904;
    char *free_mem_122910;
};
static int futhark_mc_segmap_parloop_131568(void *args, int64_t start,
                                            int64_t end, int flat_tid_119328,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131567
    *futhark_mc_segmap_parloop_struct_131567 =
    (struct futhark_mc_segmap_parloop_struct_131567 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131567->ctx;
    uint64_t futhark_mc_segmap_parloop_131568_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131568_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131567->free_n_114518;
    int64_t gtid_119325 =
            futhark_mc_segmap_parloop_struct_131567->free_gtid_119325;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131567->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122904 = {.desc ="mem_122904", .mem =
                                  futhark_mc_segmap_parloop_struct_131567->free_mem_122904,
                                  .size =0, .references =NULL};
    struct memblock mem_122910 = {.desc ="mem_122910", .mem =
                                  futhark_mc_segmap_parloop_struct_131567->free_mem_122910,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128054 = start;
    
    for (; iter_128054 < end; iter_128054++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128059 = n_114518;
        int64_t gtid_119329 = iter_128054;
        int64_t remnant_128060 = iter_128054 - gtid_119329;
        int64_t x_128040 = ((int64_t *) mem_121957.mem)[gtid_119325 * n_114518 +
                                                        gtid_119329];
        bool cond_128041 = sle64((int64_t) 0, x_128040);
        float defunc_0_f_res_128042;
        
        if (cond_128041) {
            bool y_128055 = slt64(x_128040, n_114518);
            bool bounds_check_128056 = cond_128041 && y_128055;
            bool index_certs_128057;
            
            if (!bounds_check_128056) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_128040,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:279:21-41\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:277:13-280:31\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_128058 =
                  ((float *) mem_122904.mem)[x_128040];
            
            defunc_0_f_res_128042 = defunc_0_f_res_t_res_128058;
        } else {
            defunc_0_f_res_128042 = 0.0F;
        }
        ((float *) mem_122910.mem)[gtid_119329] = defunc_0_f_res_128042;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131568_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131568_end -
                 futhark_mc_segmap_parloop_131568_start;
        
        ctx->futhark_mc_segmap_parloop_131568_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131568_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131568_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131566(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119328 = tid;
    int num_tasks_128053 = info.nsubtasks;
    struct futhark_mc_task_131565 *futhark_mc_task_131565 =
                                  (struct futhark_mc_task_131565 *) args;
    struct futhark_context *ctx = futhark_mc_task_131565->ctx;
    uint64_t futhark_mc_segmap_task_131566_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131566_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131565->free_n_114518;
    int64_t gtid_119325 = futhark_mc_task_131565->free_gtid_119325;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131565->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_122904 = {.desc ="mem_122904", .mem =
                                  futhark_mc_task_131565->free_mem_122904,
                                  .size =0, .references =NULL};
    struct memblock mem_122910 = {.desc ="mem_122910", .mem =
                                  futhark_mc_task_131565->free_mem_122910,
                                  .size =0, .references =NULL};
    int64_t iter_128054;
    struct futhark_mc_segmap_parloop_struct_131567
    futhark_mc_segmap_parloop_struct_131567;
    
    futhark_mc_segmap_parloop_struct_131567.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131567.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131567.free_gtid_119325 = gtid_119325;
    futhark_mc_segmap_parloop_struct_131567.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131567.free_mem_122904 = mem_122904.mem;
    futhark_mc_segmap_parloop_struct_131567.free_mem_122910 = mem_122910.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131568_task;
    
    futhark_mc_segmap_parloop_131568_task.name =
        "futhark_mc_segmap_parloop_131568";
    futhark_mc_segmap_parloop_131568_task.fn = futhark_mc_segmap_parloop_131568;
    futhark_mc_segmap_parloop_131568_task.args =
        &futhark_mc_segmap_parloop_struct_131567;
    futhark_mc_segmap_parloop_131568_task.iterations = iterations;
    futhark_mc_segmap_parloop_131568_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131568_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131568_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131568_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131568_task);
    
    if (futhark_mc_segmap_parloop_131568_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131568_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131568_total_end -
                 futhark_mc_segmap_parloop_131568_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131568_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131568_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131568_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131566_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131566_end -
                 futhark_mc_segmap_task_131566_start;
        
        ctx->futhark_mc_segmap_task_131566_runs[tid]++;
        ctx->futhark_mc_segmap_task_131566_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131566_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131557(void *args, int64_t start,
                                            int64_t end, int flat_tid_119324,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131556
    *futhark_mc_segmap_parloop_struct_131556 =
    (struct futhark_mc_segmap_parloop_struct_131556 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131556->ctx;
    uint64_t futhark_mc_segmap_parloop_131557_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131557_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131556->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131556->free_n_114518;
    int64_t n_p_114520 =
            futhark_mc_segmap_parloop_struct_131556->free_n_p_114520;
    int64_t C_len_114566 =
            futhark_mc_segmap_parloop_struct_131556->free_C_len_114566;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131556->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131556->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131556->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_segmap_parloop_struct_131556->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122900 = {.desc ="ext_mem_122900", .mem =
                                      futhark_mc_segmap_parloop_struct_131556->free_ext_mem_122900,
                                      .size =0, .references =NULL};
    int64_t ext_122901 =
            futhark_mc_segmap_parloop_struct_131556->free_ext_122901;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131556->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122963 = {.desc ="mem_122963", .mem =
                                  futhark_mc_segmap_parloop_struct_131556->free_mem_122963,
                                  .size =0, .references =NULL};
    size_t mem_122904_cached_sizze_131558 = 0;
    char *mem_122904 = NULL;
    size_t mem_122907_cached_sizze_131559 = 0;
    char *mem_122907 = NULL;
    size_t mem_122910_cached_sizze_131560 = 0;
    char *mem_122910 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128033 = start;
    
    if (mem_122904_cached_sizze_131558 < (size_t) bytes_121961) {
        mem_122904 = realloc(mem_122904, bytes_121961);
        mem_122904_cached_sizze_131558 = bytes_121961;
    }
    if (mem_122907_cached_sizze_131559 < (size_t) bytes_121961) {
        mem_122907 = realloc(mem_122907, bytes_121961);
        mem_122907_cached_sizze_131559 = bytes_121961;
    }
    if (mem_122910_cached_sizze_131560 < (size_t) bytes_121961) {
        mem_122910 = realloc(mem_122910, bytes_121961);
        mem_122910_cached_sizze_131560 = bytes_121961;
    }
    for (; iter_128033 < end; iter_128033++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128047 = m_114517;
        int64_t gtid_119325 = iter_128033;
        int64_t remnant_128048 = iter_128033 - gtid_119325;
        int64_t flat_tid_119326 = (int64_t) 0;
        int32_t num_tasks_128049;
        struct futhark_mc_task_131561 futhark_mc_task_131561;
        
        futhark_mc_task_131561.ctx = ctx;
        futhark_mc_task_131561.free_n_114518 = n_114518;
        futhark_mc_task_131561.free_n_p_114520 = n_p_114520;
        futhark_mc_task_131561.free_C_len_114566 = C_len_114566;
        futhark_mc_task_131561.free_gtid_119325 = gtid_119325;
        futhark_mc_task_131561.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131561.free_mem_122306 = mem_122306.mem;
        futhark_mc_task_131561.free_ext_mem_122900 = ext_mem_122900.mem;
        futhark_mc_task_131561.free_ext_122901 = ext_122901;
        futhark_mc_task_131561.free_mem_122904 = mem_122904;
        futhark_mc_task_131561.free_mem_122907 = mem_122907;
        
        struct scheduler_segop futhark_mc_task_131561_task;
        
        futhark_mc_task_131561_task.args = &futhark_mc_task_131561;
        futhark_mc_task_131561_task.top_level_fn =
            futhark_mc_segmap_task_131562;
        futhark_mc_task_131561_task.name = "futhark_mc_segmap_task_131562";
        futhark_mc_task_131561_task.iterations = n_114518;
        futhark_mc_task_131561_task.task_time =
            &ctx->futhark_mc_segmap_task_131562_total_time;
        futhark_mc_task_131561_task.task_iter =
            &ctx->futhark_mc_segmap_task_131562_total_iter;
        futhark_mc_task_131561_task.sched = STATIC;
        futhark_mc_task_131561_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131562_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131561_task);
        
        if (futhark_mc_segmap_task_131562_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_119328 = (int64_t) 0;
        int32_t num_tasks_128053;
        struct futhark_mc_task_131565 futhark_mc_task_131565;
        
        futhark_mc_task_131565.ctx = ctx;
        futhark_mc_task_131565.free_n_114518 = n_114518;
        futhark_mc_task_131565.free_gtid_119325 = gtid_119325;
        futhark_mc_task_131565.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131565.free_mem_122904 = mem_122904;
        futhark_mc_task_131565.free_mem_122910 = mem_122910;
        
        struct scheduler_segop futhark_mc_task_131565_task;
        
        futhark_mc_task_131565_task.args = &futhark_mc_task_131565;
        futhark_mc_task_131565_task.top_level_fn =
            futhark_mc_segmap_task_131566;
        futhark_mc_task_131565_task.name = "futhark_mc_segmap_task_131566";
        futhark_mc_task_131565_task.iterations = n_114518;
        futhark_mc_task_131565_task.task_time =
            &ctx->futhark_mc_segmap_task_131566_total_time;
        futhark_mc_task_131565_task.task_iter =
            &ctx->futhark_mc_segmap_task_131566_total_iter;
        futhark_mc_task_131565_task.sched = STATIC;
        futhark_mc_task_131565_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131566_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131565_task);
        
        if (futhark_mc_segmap_task_131566_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122959.mem + gtid_119325 * n_114518 * (int64_t) 4,
                mem_122910 + (int64_t) 0, n_114518 * (int64_t) 4);
        memmove(mem_122963.mem + gtid_119325 * n_114518 * (int64_t) 4,
                mem_122907 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122904);
    free(mem_122907);
    free(mem_122910);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131557_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131557_end -
                 futhark_mc_segmap_parloop_131557_start;
        
        ctx->futhark_mc_segmap_parloop_131557_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131557_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131557_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131555(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119324 = tid;
    int num_tasks_128005 = info.nsubtasks;
    struct futhark_mc_task_131548 *futhark_mc_task_131548 =
                                  (struct futhark_mc_task_131548 *) args;
    struct futhark_context *ctx = futhark_mc_task_131548->ctx;
    uint64_t futhark_mc_segmap_nested_task_131555_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131555_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131548->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131548->free_n_114518;
    int64_t n_p_114520 = futhark_mc_task_131548->free_n_p_114520;
    int64_t C_len_114566 = futhark_mc_task_131548->free_C_len_114566;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131548->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131548->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131548->free_bytes_121961;
    struct memblock mem_122306 = {.desc ="mem_122306", .mem =
                                  futhark_mc_task_131548->free_mem_122306,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122900 = {.desc ="ext_mem_122900", .mem =
                                      futhark_mc_task_131548->free_ext_mem_122900,
                                      .size =0, .references =NULL};
    int64_t ext_122901 = futhark_mc_task_131548->free_ext_122901;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131548->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122963 = {.desc ="mem_122963", .mem =
                                  futhark_mc_task_131548->free_mem_122963,
                                  .size =0, .references =NULL};
    int64_t iter_128033;
    struct futhark_mc_segmap_parloop_struct_131556
    futhark_mc_segmap_parloop_struct_131556;
    
    futhark_mc_segmap_parloop_struct_131556.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131556.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131556.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131556.free_n_p_114520 = n_p_114520;
    futhark_mc_segmap_parloop_struct_131556.free_C_len_114566 = C_len_114566;
    futhark_mc_segmap_parloop_struct_131556.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131556.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131556.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131556.free_mem_122306 = mem_122306.mem;
    futhark_mc_segmap_parloop_struct_131556.free_ext_mem_122900 =
        ext_mem_122900.mem;
    futhark_mc_segmap_parloop_struct_131556.free_ext_122901 = ext_122901;
    futhark_mc_segmap_parloop_struct_131556.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131556.free_mem_122963 = mem_122963.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131557_task;
    
    futhark_mc_segmap_parloop_131557_task.name =
        "futhark_mc_segmap_parloop_131557";
    futhark_mc_segmap_parloop_131557_task.fn = futhark_mc_segmap_parloop_131557;
    futhark_mc_segmap_parloop_131557_task.args =
        &futhark_mc_segmap_parloop_struct_131556;
    futhark_mc_segmap_parloop_131557_task.iterations = iterations;
    futhark_mc_segmap_parloop_131557_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131557_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131557_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131557_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131557_task);
    
    if (futhark_mc_segmap_parloop_131557_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131557_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131557_total_end -
                 futhark_mc_segmap_parloop_131557_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131557_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131557_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131557_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131555_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131555_end -
                 futhark_mc_segmap_nested_task_131555_start;
        
        ctx->futhark_mc_segmap_nested_task_131555_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131555_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131555_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131569 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122989;
};
struct futhark_mc_segmap_parloop_struct_131571 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122989;
};
static int futhark_mc_segmap_parloop_131572(void *args, int64_t start,
                                            int64_t end, int flat_tid_119349,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131571
    *futhark_mc_segmap_parloop_struct_131571 =
    (struct futhark_mc_segmap_parloop_struct_131571 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131571->ctx;
    uint64_t futhark_mc_segmap_parloop_131572_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131572_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131571->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131571->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131571->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131571->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131571->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131571->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131571->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122989 = {.desc ="mem_122989", .mem =
                                  futhark_mc_segmap_parloop_struct_131571->free_mem_122989,
                                  .size =0, .references =NULL};
    size_t mem_122973_cached_sizze_131573 = 0;
    char *mem_122973 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128064 = start;
    
    if (mem_122973_cached_sizze_131573 < (size_t) bytes_122113) {
        mem_122973 = realloc(mem_122973, bytes_122113);
        mem_122973_cached_sizze_131573 = bytes_122113;
    }
    for (; iter_128064 < end; iter_128064++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128121 = m_114517;
        int64_t gtid_119350 = iter_128064;
        int64_t remnant_128122 = iter_128064 - gtid_119350;
        int64_t x_115879 = ((int64_t *) mem_121960.mem)[gtid_119350];
        
        for (int64_t i_128065 = 0; i_128065 < t_n_m_114575; i_128065++) {
            int64_t x_128067 = ((int64_t *) mem_122182.mem)[gtid_119350 *
                                                            t_n_m_114575 +
                                                            i_128065];
            float x_128068 = ((float *) mem_122186.mem)[gtid_119350 *
                                                        t_n_m_114575 +
                                                        i_128065];
            int64_t min_arg_128069 = mul64(t_jump_114525, i_128065);
            int64_t min_res_128070 = smin64(i_114594, min_arg_128069);
            float defunc_0_f_res_128071 = sitofp_i64_f32(min_res_128070);
            float defunc_2_reduce_res_128072;
            float redout_128074 = 0.0F;
            
            for (int64_t i_128073 = 0; i_128073 < t_window_114521; i_128073++) {
                bool cond_128075 = sle64(x_115879, i_128073);
                float defunc_0_f_res_128076;
                
                if (cond_128075) {
                    defunc_0_f_res_128076 = 0.0F;
                } else {
                    int64_t i_128077 = add64(x_128067, i_128073);
                    float x_128078 = ((float *) mem_121982.mem)[gtid_119350 *
                                                                n_114518 +
                                                                i_128077];
                    float defunc_0_f_res_f_res_128079 = 1.0F + x_128078;
                    
                    defunc_0_f_res_128076 = defunc_0_f_res_f_res_128079;
                }
                
                float defunc_0_f_res_128080;
                
                if (cond_128075) {
                    defunc_0_f_res_128080 = 0.0F;
                } else {
                    int64_t i_128081 = add64(x_128067, i_128073);
                    float x_128082 = ((float *) mem_122408.mem)[gtid_119350 *
                                                                n_114518 +
                                                                i_128081];
                    
                    defunc_0_f_res_128080 = x_128082;
                }
                
                float x_j_128083 = defunc_0_f_res_128076 -
                      defunc_0_f_res_128071;
                float abs_res_128084 = (float) fabs(x_j_128083);
                float tmp1_128085 = abs_res_128084 / x_128068;
                float x_128086 = tmp1_128085 * tmp1_128085;
                float y_128087 = tmp1_128085 * x_128086;
                float tmp2_128088 = 1.0F - y_128087;
                float x_128089 = tmp2_128088 * tmp2_128088;
                float tmp3_128090 = tmp2_128088 * x_128089;
                float w_j_128091 = defunc_0_f_res_128080 * tmp3_128090;
                float defunc_1_op_res_128092 = w_j_128091 + redout_128074;
                float redout_tmp_128124 = defunc_1_op_res_128092;
                
                redout_128074 = redout_tmp_128124;
            }
            defunc_2_reduce_res_128072 = redout_128074;
            
            float a0_128093 = 1.0F / defunc_2_reduce_res_128072;
            float defunc_2_reduce_res_128094;
            float redout_128096 = 0.0F;
            
            for (int64_t i_128095 = 0; i_128095 < t_window_114521; i_128095++) {
                bool cond_128097 = sle64(x_115879, i_128095);
                float defunc_0_f_res_128098;
                
                if (cond_128097) {
                    defunc_0_f_res_128098 = 0.0F;
                } else {
                    int64_t i_128099 = add64(x_128067, i_128095);
                    float x_128100 = ((float *) mem_121982.mem)[gtid_119350 *
                                                                n_114518 +
                                                                i_128099];
                    float defunc_0_f_res_f_res_128101 = 1.0F + x_128100;
                    
                    defunc_0_f_res_128098 = defunc_0_f_res_f_res_128101;
                }
                
                float defunc_0_f_res_128102;
                
                if (cond_128097) {
                    defunc_0_f_res_128102 = 0.0F;
                } else {
                    int64_t i_128103 = add64(x_128067, i_128095);
                    float x_128104 = ((float *) mem_122408.mem)[gtid_119350 *
                                                                n_114518 +
                                                                i_128103];
                    
                    defunc_0_f_res_128102 = x_128104;
                }
                
                float x_j_128105 = defunc_0_f_res_128098 -
                      defunc_0_f_res_128071;
                float abs_res_128106 = (float) fabs(x_j_128105);
                float tmp1_128107 = abs_res_128106 / x_128068;
                float x_128108 = tmp1_128107 * tmp1_128107;
                float y_128109 = tmp1_128107 * x_128108;
                float tmp2_128110 = 1.0F - y_128109;
                float x_128111 = tmp2_128110 * tmp2_128110;
                float tmp3_128112 = tmp2_128110 * x_128111;
                float tmp4_128113 = defunc_0_f_res_128102 * tmp3_128112;
                float defunc_0_f_res_128114;
                
                if (cond_128097) {
                    defunc_0_f_res_128114 = 0.0F;
                } else {
                    int64_t i_128115 = add64(x_128067, i_128095);
                    float x_128116 = ((float *) mem_122959.mem)[gtid_119350 *
                                                                n_114518 +
                                                                i_128115];
                    
                    defunc_0_f_res_128114 = x_128116;
                }
                
                float x_128117 = a0_128093 * tmp4_128113;
                float defunc_9_fit_fun_res_128118 = defunc_0_f_res_128114 *
                      x_128117;
                float defunc_1_op_res_128119 = defunc_9_fit_fun_res_128118 +
                      redout_128096;
                float redout_tmp_128125 = defunc_1_op_res_128119;
                
                redout_128096 = redout_tmp_128125;
            }
            defunc_2_reduce_res_128094 = redout_128096;
            ((float *) mem_122973)[i_128065] = defunc_2_reduce_res_128094;
        }
        memmove(mem_122989.mem + gtid_119350 * t_n_m_114575 * (int64_t) 4,
                mem_122973 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122973);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131572_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131572_end -
                 futhark_mc_segmap_parloop_131572_start;
        
        ctx->futhark_mc_segmap_parloop_131572_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131572_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131572_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131570(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119349 = tid;
    int num_tasks_128063 = info.nsubtasks;
    struct futhark_mc_task_131569 *futhark_mc_task_131569 =
                                  (struct futhark_mc_task_131569 *) args;
    struct futhark_context *ctx = futhark_mc_task_131569->ctx;
    uint64_t futhark_mc_segmap_task_131570_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131570_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131569->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131569->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131569->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131569->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131569->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131569->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131569->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131569->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131569->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131569->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131569->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131569->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131569->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122989 = {.desc ="mem_122989", .mem =
                                  futhark_mc_task_131569->free_mem_122989,
                                  .size =0, .references =NULL};
    int64_t iter_128064;
    struct futhark_mc_segmap_parloop_struct_131571
    futhark_mc_segmap_parloop_struct_131571;
    
    futhark_mc_segmap_parloop_struct_131571.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131571.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131571.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131571.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131571.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131571.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131571.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131571.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131571.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131571.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131571.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131571.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131571.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131571.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131571.free_mem_122989 = mem_122989.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131572_task;
    
    futhark_mc_segmap_parloop_131572_task.name =
        "futhark_mc_segmap_parloop_131572";
    futhark_mc_segmap_parloop_131572_task.fn = futhark_mc_segmap_parloop_131572;
    futhark_mc_segmap_parloop_131572_task.args =
        &futhark_mc_segmap_parloop_struct_131571;
    futhark_mc_segmap_parloop_131572_task.iterations = iterations;
    futhark_mc_segmap_parloop_131572_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131572_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131572_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131572_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131572_task);
    
    if (futhark_mc_segmap_parloop_131572_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131572_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131572_total_end -
                 futhark_mc_segmap_parloop_131572_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131572_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131572_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131572_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131570_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131570_end -
                 futhark_mc_segmap_task_131570_start;
        
        ctx->futhark_mc_segmap_task_131570_runs[tid]++;
        ctx->futhark_mc_segmap_task_131570_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131570_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131575 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122989;
};
struct futhark_mc_task_131578 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122970;
};
struct futhark_mc_segmap_parloop_struct_131580 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122970;
};
static int futhark_mc_segmap_parloop_131581(void *args, int64_t start,
                                            int64_t end, int flat_tid_119353,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131580
    *futhark_mc_segmap_parloop_struct_131580 =
    (struct futhark_mc_segmap_parloop_struct_131580 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131580->ctx;
    uint64_t futhark_mc_segmap_parloop_131581_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131581_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131580->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131580->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131580->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131580->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131580->free_i_114594;
    int64_t gtid_119352 =
            futhark_mc_segmap_parloop_struct_131580->free_gtid_119352;
    int64_t x_119422 = futhark_mc_segmap_parloop_struct_131580->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131580->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131580->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131580->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131580->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131580->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122970 = {.desc ="mem_122970", .mem =
                                  futhark_mc_segmap_parloop_struct_131580->free_mem_122970,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128236 = start;
    
    for (; iter_128236 < end; iter_128236++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128282 = t_n_m_114575;
        int64_t gtid_119354 = iter_128236;
        int64_t remnant_128283 = iter_128236 - gtid_119354;
        int64_t x_128180 = ((int64_t *) mem_122182.mem)[gtid_119352 *
                                                        t_n_m_114575 +
                                                        gtid_119354];
        float x_128181 = ((float *) mem_122186.mem)[gtid_119352 * t_n_m_114575 +
                                                    gtid_119354];
        int64_t min_arg_128182 = mul64(t_jump_114525, gtid_119354);
        int64_t min_res_128183 = smin64(i_114594, min_arg_128182);
        float defunc_0_f_res_128184 = sitofp_i64_f32(min_res_128183);
        float defunc_2_reduce_res_128185;
        float redout_128238 = 0.0F;
        
        for (int64_t i_128237 = 0; i_128237 < t_window_114521; i_128237++) {
            bool cond_128239 = sle64(x_119422, i_128237);
            float defunc_0_f_res_128240;
            
            if (cond_128239) {
                defunc_0_f_res_128240 = 0.0F;
            } else {
                int64_t i_128241 = add64(x_128180, i_128237);
                float x_128242 = ((float *) mem_121982.mem)[gtid_119352 *
                                                            n_114518 +
                                                            i_128241];
                float defunc_0_f_res_f_res_128243 = 1.0F + x_128242;
                
                defunc_0_f_res_128240 = defunc_0_f_res_f_res_128243;
            }
            
            float defunc_0_f_res_128244;
            
            if (cond_128239) {
                defunc_0_f_res_128244 = 0.0F;
            } else {
                int64_t i_128245 = add64(x_128180, i_128237);
                float x_128246 = ((float *) mem_122408.mem)[gtid_119352 *
                                                            n_114518 +
                                                            i_128245];
                
                defunc_0_f_res_128244 = x_128246;
            }
            
            float x_j_128247 = defunc_0_f_res_128240 - defunc_0_f_res_128184;
            float abs_res_128248 = (float) fabs(x_j_128247);
            float tmp1_128249 = abs_res_128248 / x_128181;
            float x_128250 = tmp1_128249 * tmp1_128249;
            float y_128251 = tmp1_128249 * x_128250;
            float tmp2_128252 = 1.0F - y_128251;
            float x_128253 = tmp2_128252 * tmp2_128252;
            float tmp3_128254 = tmp2_128252 * x_128253;
            float w_j_128255 = defunc_0_f_res_128244 * tmp3_128254;
            float defunc_1_op_res_128256 = w_j_128255 + redout_128238;
            float redout_tmp_128284 = defunc_1_op_res_128256;
            
            redout_128238 = redout_tmp_128284;
        }
        defunc_2_reduce_res_128185 = redout_128238;
        
        float a0_128206 = 1.0F / defunc_2_reduce_res_128185;
        float defunc_2_reduce_res_128207;
        float redout_128258 = 0.0F;
        
        for (int64_t i_128257 = 0; i_128257 < t_window_114521; i_128257++) {
            bool cond_128259 = sle64(x_119422, i_128257);
            float defunc_0_f_res_128260;
            
            if (cond_128259) {
                defunc_0_f_res_128260 = 0.0F;
            } else {
                int64_t i_128261 = add64(x_128180, i_128257);
                float x_128262 = ((float *) mem_121982.mem)[gtid_119352 *
                                                            n_114518 +
                                                            i_128261];
                float defunc_0_f_res_f_res_128263 = 1.0F + x_128262;
                
                defunc_0_f_res_128260 = defunc_0_f_res_f_res_128263;
            }
            
            float defunc_0_f_res_128264;
            
            if (cond_128259) {
                defunc_0_f_res_128264 = 0.0F;
            } else {
                int64_t i_128265 = add64(x_128180, i_128257);
                float x_128266 = ((float *) mem_122408.mem)[gtid_119352 *
                                                            n_114518 +
                                                            i_128265];
                
                defunc_0_f_res_128264 = x_128266;
            }
            
            float x_j_128267 = defunc_0_f_res_128260 - defunc_0_f_res_128184;
            float abs_res_128268 = (float) fabs(x_j_128267);
            float tmp1_128269 = abs_res_128268 / x_128181;
            float x_128270 = tmp1_128269 * tmp1_128269;
            float y_128271 = tmp1_128269 * x_128270;
            float tmp2_128272 = 1.0F - y_128271;
            float x_128273 = tmp2_128272 * tmp2_128272;
            float tmp3_128274 = tmp2_128272 * x_128273;
            float tmp4_128275 = defunc_0_f_res_128264 * tmp3_128274;
            float defunc_0_f_res_128276;
            
            if (cond_128259) {
                defunc_0_f_res_128276 = 0.0F;
            } else {
                int64_t i_128277 = add64(x_128180, i_128257);
                float x_128278 = ((float *) mem_122959.mem)[gtid_119352 *
                                                            n_114518 +
                                                            i_128277];
                
                defunc_0_f_res_128276 = x_128278;
            }
            
            float x_128279 = a0_128206 * tmp4_128275;
            float defunc_9_fit_fun_res_128280 = defunc_0_f_res_128276 *
                  x_128279;
            float defunc_1_op_res_128281 = defunc_9_fit_fun_res_128280 +
                  redout_128258;
            float redout_tmp_128285 = defunc_1_op_res_128281;
            
            redout_128258 = redout_tmp_128285;
        }
        defunc_2_reduce_res_128207 = redout_128258;
        ((float *) mem_122970.mem)[gtid_119354] = defunc_2_reduce_res_128207;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131581_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131581_end -
                 futhark_mc_segmap_parloop_131581_start;
        
        ctx->futhark_mc_segmap_parloop_131581_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131581_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131581_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131579(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119353 = tid;
    int num_tasks_128235 = info.nsubtasks;
    struct futhark_mc_task_131578 *futhark_mc_task_131578 =
                                  (struct futhark_mc_task_131578 *) args;
    struct futhark_context *ctx = futhark_mc_task_131578->ctx;
    uint64_t futhark_mc_segmap_task_131579_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131579_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131578->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131578->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131578->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131578->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131578->free_i_114594;
    int64_t gtid_119352 = futhark_mc_task_131578->free_gtid_119352;
    int64_t x_119422 = futhark_mc_task_131578->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131578->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131578->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131578->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131578->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131578->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122970 = {.desc ="mem_122970", .mem =
                                  futhark_mc_task_131578->free_mem_122970,
                                  .size =0, .references =NULL};
    int64_t iter_128236;
    struct futhark_mc_segmap_parloop_struct_131580
    futhark_mc_segmap_parloop_struct_131580;
    
    futhark_mc_segmap_parloop_struct_131580.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131580.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131580.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131580.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131580.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131580.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131580.free_gtid_119352 = gtid_119352;
    futhark_mc_segmap_parloop_struct_131580.free_x_119422 = x_119422;
    futhark_mc_segmap_parloop_struct_131580.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131580.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131580.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131580.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131580.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131580.free_mem_122970 = mem_122970.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131581_task;
    
    futhark_mc_segmap_parloop_131581_task.name =
        "futhark_mc_segmap_parloop_131581";
    futhark_mc_segmap_parloop_131581_task.fn = futhark_mc_segmap_parloop_131581;
    futhark_mc_segmap_parloop_131581_task.args =
        &futhark_mc_segmap_parloop_struct_131580;
    futhark_mc_segmap_parloop_131581_task.iterations = iterations;
    futhark_mc_segmap_parloop_131581_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131581_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131581_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131581_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131581_task);
    
    if (futhark_mc_segmap_parloop_131581_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131581_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131581_total_end -
                 futhark_mc_segmap_parloop_131581_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131581_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131581_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131581_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131579_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131579_end -
                 futhark_mc_segmap_task_131579_start;
        
        ctx->futhark_mc_segmap_task_131579_runs[tid]++;
        ctx->futhark_mc_segmap_task_131579_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131579_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131583 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122970;
};
struct futhark_mc_task_131585 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_128127;
    float free_x_128128;
    float free_defunc_0_f_res_128131;
    float *retval_defunc_2_reduce_res_128132;
};
struct futhark_mc_segred_stage_1_parloop_struct_131588 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_128127;
    float free_x_128128;
    float free_defunc_0_f_res_128131;
    char *free_reduce_stage_1_tid_res_arr_mem_128335;
};
static int futhark_mc_segred_stage_1_parloop_131589(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119357,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131588
    *futhark_mc_segred_stage_1_parloop_struct_131588 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131588 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131588->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131589_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131589_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_n_114518;
    int64_t gtid_119352 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_gtid_119352;
    int64_t x_119422 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131588->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131588->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_128127 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_x_128127;
    float x_128128 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_x_128128;
    float defunc_0_f_res_128131 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_defunc_0_f_res_128131;
    struct memblock reduce_stage_1_tid_res_arr_mem_128335 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128335",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131588->free_reduce_stage_1_tid_res_arr_mem_128335,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128337 = start;
    float x_128287;
    float x_128288;
    float local_acc_128338 = 0.0F;
    
    for (; iter_128337 < end; iter_128337++) {
        int64_t gtid_119358 = iter_128337;
        bool cond_128290 = sle64(x_119422, gtid_119358);
        float defunc_0_f_res_128291;
        
        if (cond_128290) {
            defunc_0_f_res_128291 = 0.0F;
        } else {
            int64_t i_128292 = add64(gtid_119358, x_128127);
            float x_128293 = ((float *) mem_121982.mem)[gtid_119352 * n_114518 +
                                                        i_128292];
            float defunc_0_f_res_f_res_128294 = 1.0F + x_128293;
            
            defunc_0_f_res_128291 = defunc_0_f_res_f_res_128294;
        }
        
        float defunc_0_f_res_128295;
        
        if (cond_128290) {
            defunc_0_f_res_128295 = 0.0F;
        } else {
            int64_t i_128296 = add64(gtid_119358, x_128127);
            float x_128297 = ((float *) mem_122408.mem)[gtid_119352 * n_114518 +
                                                        i_128296];
            
            defunc_0_f_res_128295 = x_128297;
        }
        
        float x_j_128298 = defunc_0_f_res_128291 - defunc_0_f_res_128131;
        float abs_res_128299 = (float) fabs(x_j_128298);
        float tmp1_128300 = abs_res_128299 / x_128128;
        float x_128301 = tmp1_128300 * tmp1_128300;
        float y_128302 = tmp1_128300 * x_128301;
        float tmp2_128303 = 1.0F - y_128302;
        float x_128304 = tmp2_128303 * tmp2_128303;
        float tmp3_128305 = tmp2_128303 * x_128304;
        float w_j_128306 = defunc_0_f_res_128295 * tmp3_128305;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128287 = local_acc_128338;
        }
        // Load next params
        {
            x_128288 = w_j_128306;
        }
        // Red body
        {
            float defunc_1_op_res_128289 = x_128287 + x_128288;
            
            local_acc_128338 = defunc_1_op_res_128289;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128335.mem)[flat_tid_119357] =
        local_acc_128338;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131589_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131589_end -
                 futhark_mc_segred_stage_1_parloop_131589_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131589_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131589_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131586(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119357 = tid;
    int num_tasks_128334 = info.nsubtasks;
    struct futhark_mc_task_131585 *futhark_mc_task_131585 =
                                  (struct futhark_mc_task_131585 *) args;
    struct futhark_context *ctx = futhark_mc_task_131585->ctx;
    uint64_t futhark_mc_segred_task_131586_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131586_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131585->free_n_114518;
    int64_t gtid_119352 = futhark_mc_task_131585->free_gtid_119352;
    int64_t x_119422 = futhark_mc_task_131585->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131585->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131585->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_128127 = futhark_mc_task_131585->free_x_128127;
    float x_128128 = futhark_mc_task_131585->free_x_128128;
    float defunc_0_f_res_128131 =
          futhark_mc_task_131585->free_defunc_0_f_res_128131;
    float defunc_2_reduce_res_128132 =
          *futhark_mc_task_131585->retval_defunc_2_reduce_res_128132;
    size_t reduce_stage_1_tid_res_arr_mem_128335_cached_sizze_131587 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128335 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128335_cached_sizze_131587 <
        (size_t) ((int64_t) 4 * num_tasks_128334)) {
        reduce_stage_1_tid_res_arr_mem_128335 =
            realloc(reduce_stage_1_tid_res_arr_mem_128335, (int64_t) 4 *
                    num_tasks_128334);
        reduce_stage_1_tid_res_arr_mem_128335_cached_sizze_131587 =
            (int64_t) 4 * num_tasks_128334;
    }
    
    int64_t iter_128337;
    struct futhark_mc_segred_stage_1_parloop_struct_131588
    futhark_mc_segred_stage_1_parloop_struct_131588;
    
    futhark_mc_segred_stage_1_parloop_struct_131588.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_gtid_119352 =
        gtid_119352;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_x_119422 = x_119422;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_x_128127 = x_128127;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_x_128128 = x_128128;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_defunc_0_f_res_128131 =
        defunc_0_f_res_128131;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_reduce_stage_1_tid_res_arr_mem_128335 =
        reduce_stage_1_tid_res_arr_mem_128335;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131589_task;
    
    futhark_mc_segred_stage_1_parloop_131589_task.name =
        "futhark_mc_segred_stage_1_parloop_131589";
    futhark_mc_segred_stage_1_parloop_131589_task.fn =
        futhark_mc_segred_stage_1_parloop_131589;
    futhark_mc_segred_stage_1_parloop_131589_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131588;
    futhark_mc_segred_stage_1_parloop_131589_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131589_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131589_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131589_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131589_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131589_task);
    
    if (futhark_mc_segred_stage_1_parloop_131589_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131589_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131589_total_end -
                 futhark_mc_segred_stage_1_parloop_131589_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128132 = 0.0F;
    }
    
    float x_128339;
    float x_128340;
    
    for (int32_t i_128342 = 0; i_128342 < num_tasks_128334; i_128342++) {
        flat_tid_119357 = i_128342;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128339 = defunc_2_reduce_res_128132;
            }
            // load next params
            {
                x_128340 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128335)[flat_tid_119357];
            }
            // red body
            {
                float defunc_1_op_res_128341 = x_128339 + x_128340;
                
                defunc_2_reduce_res_128132 = defunc_1_op_res_128341;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128335);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131586_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131586_end -
                 futhark_mc_segred_task_131586_start;
        
        ctx->futhark_mc_segred_task_131586_runs[tid]++;
        ctx->futhark_mc_segred_task_131586_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131586_iter[tid] += iterations;
    }
    *futhark_mc_task_131585->retval_defunc_2_reduce_res_128132 =
        defunc_2_reduce_res_128132;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131590 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_x_128127;
    float free_x_128128;
    float free_defunc_0_f_res_128131;
    float free_a0_128153;
    float *retval_defunc_2_reduce_res_128154;
};
struct futhark_mc_segred_stage_1_parloop_struct_131593 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119352;
    int64_t free_x_119422;
    char *free_mem_121982;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_x_128127;
    float free_x_128128;
    float free_defunc_0_f_res_128131;
    float free_a0_128153;
    char *free_reduce_stage_1_tid_res_arr_mem_128344;
};
static int futhark_mc_segred_stage_1_parloop_131594(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119359,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131593
    *futhark_mc_segred_stage_1_parloop_struct_131593 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131593 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131593->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131594_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131594_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131593->free_n_114518;
    int64_t gtid_119352 =
            futhark_mc_segred_stage_1_parloop_struct_131593->free_gtid_119352;
    int64_t x_119422 =
            futhark_mc_segred_stage_1_parloop_struct_131593->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131593->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131593->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131593->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_128127 =
            futhark_mc_segred_stage_1_parloop_struct_131593->free_x_128127;
    float x_128128 =
          futhark_mc_segred_stage_1_parloop_struct_131593->free_x_128128;
    float defunc_0_f_res_128131 =
          futhark_mc_segred_stage_1_parloop_struct_131593->free_defunc_0_f_res_128131;
    float a0_128153 =
          futhark_mc_segred_stage_1_parloop_struct_131593->free_a0_128153;
    struct memblock reduce_stage_1_tid_res_arr_mem_128344 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128344",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131593->free_reduce_stage_1_tid_res_arr_mem_128344,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128346 = start;
    float x_128307;
    float x_128308;
    float local_acc_128347 = 0.0F;
    
    for (; iter_128346 < end; iter_128346++) {
        int64_t gtid_119360 = iter_128346;
        bool cond_128310 = sle64(x_119422, gtid_119360);
        float defunc_0_f_res_128311;
        
        if (cond_128310) {
            defunc_0_f_res_128311 = 0.0F;
        } else {
            int64_t i_128312 = add64(gtid_119360, x_128127);
            float x_128313 = ((float *) mem_121982.mem)[gtid_119352 * n_114518 +
                                                        i_128312];
            float defunc_0_f_res_f_res_128314 = 1.0F + x_128313;
            
            defunc_0_f_res_128311 = defunc_0_f_res_f_res_128314;
        }
        
        float defunc_0_f_res_128315;
        
        if (cond_128310) {
            defunc_0_f_res_128315 = 0.0F;
        } else {
            int64_t i_128316 = add64(gtid_119360, x_128127);
            float x_128317 = ((float *) mem_122408.mem)[gtid_119352 * n_114518 +
                                                        i_128316];
            
            defunc_0_f_res_128315 = x_128317;
        }
        
        float x_j_128318 = defunc_0_f_res_128311 - defunc_0_f_res_128131;
        float abs_res_128319 = (float) fabs(x_j_128318);
        float tmp1_128320 = abs_res_128319 / x_128128;
        float x_128321 = tmp1_128320 * tmp1_128320;
        float y_128322 = tmp1_128320 * x_128321;
        float tmp2_128323 = 1.0F - y_128322;
        float x_128324 = tmp2_128323 * tmp2_128323;
        float tmp3_128325 = tmp2_128323 * x_128324;
        float tmp4_128326 = defunc_0_f_res_128315 * tmp3_128325;
        float defunc_0_f_res_128327;
        
        if (cond_128310) {
            defunc_0_f_res_128327 = 0.0F;
        } else {
            int64_t i_128328 = add64(gtid_119360, x_128127);
            float x_128329 = ((float *) mem_122959.mem)[gtid_119352 * n_114518 +
                                                        i_128328];
            
            defunc_0_f_res_128327 = x_128329;
        }
        
        float x_128330 = a0_128153 * tmp4_128326;
        float defunc_9_fit_fun_res_128331 = defunc_0_f_res_128327 * x_128330;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128307 = local_acc_128347;
        }
        // Load next params
        {
            x_128308 = defunc_9_fit_fun_res_128331;
        }
        // Red body
        {
            float defunc_1_op_res_128309 = x_128307 + x_128308;
            
            local_acc_128347 = defunc_1_op_res_128309;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128344.mem)[flat_tid_119359] =
        local_acc_128347;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131594_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131594_end -
                 futhark_mc_segred_stage_1_parloop_131594_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131594_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131594_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131594_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131591(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119359 = tid;
    int num_tasks_128343 = info.nsubtasks;
    struct futhark_mc_task_131590 *futhark_mc_task_131590 =
                                  (struct futhark_mc_task_131590 *) args;
    struct futhark_context *ctx = futhark_mc_task_131590->ctx;
    uint64_t futhark_mc_segred_task_131591_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131591_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131590->free_n_114518;
    int64_t gtid_119352 = futhark_mc_task_131590->free_gtid_119352;
    int64_t x_119422 = futhark_mc_task_131590->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131590->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131590->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131590->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_128127 = futhark_mc_task_131590->free_x_128127;
    float x_128128 = futhark_mc_task_131590->free_x_128128;
    float defunc_0_f_res_128131 =
          futhark_mc_task_131590->free_defunc_0_f_res_128131;
    float a0_128153 = futhark_mc_task_131590->free_a0_128153;
    float defunc_2_reduce_res_128154 =
          *futhark_mc_task_131590->retval_defunc_2_reduce_res_128154;
    size_t reduce_stage_1_tid_res_arr_mem_128344_cached_sizze_131592 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128344 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128344_cached_sizze_131592 <
        (size_t) ((int64_t) 4 * num_tasks_128343)) {
        reduce_stage_1_tid_res_arr_mem_128344 =
            realloc(reduce_stage_1_tid_res_arr_mem_128344, (int64_t) 4 *
                    num_tasks_128343);
        reduce_stage_1_tid_res_arr_mem_128344_cached_sizze_131592 =
            (int64_t) 4 * num_tasks_128343;
    }
    
    int64_t iter_128346;
    struct futhark_mc_segred_stage_1_parloop_struct_131593
    futhark_mc_segred_stage_1_parloop_struct_131593;
    
    futhark_mc_segred_stage_1_parloop_struct_131593.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_gtid_119352 =
        gtid_119352;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_x_119422 = x_119422;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_mem_122959 =
        mem_122959.mem;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_x_128127 = x_128127;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_x_128128 = x_128128;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_defunc_0_f_res_128131 =
        defunc_0_f_res_128131;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_a0_128153 = a0_128153;
    futhark_mc_segred_stage_1_parloop_struct_131593.free_reduce_stage_1_tid_res_arr_mem_128344 =
        reduce_stage_1_tid_res_arr_mem_128344;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131594_task;
    
    futhark_mc_segred_stage_1_parloop_131594_task.name =
        "futhark_mc_segred_stage_1_parloop_131594";
    futhark_mc_segred_stage_1_parloop_131594_task.fn =
        futhark_mc_segred_stage_1_parloop_131594;
    futhark_mc_segred_stage_1_parloop_131594_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131593;
    futhark_mc_segred_stage_1_parloop_131594_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131594_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131594_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131594_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131594_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131594_task);
    
    if (futhark_mc_segred_stage_1_parloop_131594_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131594_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131594_total_end -
                 futhark_mc_segred_stage_1_parloop_131594_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131594_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131594_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131594_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128154 = 0.0F;
    }
    
    float x_128348;
    float x_128349;
    
    for (int32_t i_128351 = 0; i_128351 < num_tasks_128343; i_128351++) {
        flat_tid_119359 = i_128351;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128348 = defunc_2_reduce_res_128154;
            }
            // load next params
            {
                x_128349 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128344)[flat_tid_119359];
            }
            // red body
            {
                float defunc_1_op_res_128350 = x_128348 + x_128349;
                
                defunc_2_reduce_res_128154 = defunc_1_op_res_128350;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128344);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131591_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131591_end -
                 futhark_mc_segred_task_131591_start;
        
        ctx->futhark_mc_segred_task_131591_runs[tid]++;
        ctx->futhark_mc_segred_task_131591_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131591_iter[tid] += iterations;
    }
    *futhark_mc_task_131590->retval_defunc_2_reduce_res_128154 =
        defunc_2_reduce_res_128154;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131584(void *args, int64_t start,
                                            int64_t end, int flat_tid_119355,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131583
    *futhark_mc_segmap_parloop_struct_131583 =
    (struct futhark_mc_segmap_parloop_struct_131583 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131583->ctx;
    uint64_t futhark_mc_segmap_parloop_131584_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131584_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131583->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131583->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131583->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131583->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131583->free_i_114594;
    int64_t gtid_119352 =
            futhark_mc_segmap_parloop_struct_131583->free_gtid_119352;
    int64_t x_119422 = futhark_mc_segmap_parloop_struct_131583->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131583->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131583->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131583->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131583->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131583->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122970 = {.desc ="mem_122970", .mem =
                                  futhark_mc_segmap_parloop_struct_131583->free_mem_122970,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128286 = start;
    
    for (; iter_128286 < end; iter_128286++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128332 = t_n_m_114575;
        int64_t gtid_119356 = iter_128286;
        int64_t remnant_128333 = iter_128286 - gtid_119356;
        int64_t x_128127 = ((int64_t *) mem_122182.mem)[gtid_119352 *
                                                        t_n_m_114575 +
                                                        gtid_119356];
        float x_128128 = ((float *) mem_122186.mem)[gtid_119352 * t_n_m_114575 +
                                                    gtid_119356];
        int64_t min_arg_128129 = mul64(t_jump_114525, gtid_119356);
        int64_t min_res_128130 = smin64(i_114594, min_arg_128129);
        float defunc_0_f_res_128131 = sitofp_i64_f32(min_res_128130);
        float defunc_2_reduce_res_128132;
        int64_t flat_tid_119357 = (int64_t) 0;
        int32_t num_tasks_128334;
        struct futhark_mc_task_131585 futhark_mc_task_131585;
        
        futhark_mc_task_131585.ctx = ctx;
        futhark_mc_task_131585.free_n_114518 = n_114518;
        futhark_mc_task_131585.free_gtid_119352 = gtid_119352;
        futhark_mc_task_131585.free_x_119422 = x_119422;
        futhark_mc_task_131585.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131585.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131585.free_x_128127 = x_128127;
        futhark_mc_task_131585.free_x_128128 = x_128128;
        futhark_mc_task_131585.free_defunc_0_f_res_128131 =
            defunc_0_f_res_128131;
        futhark_mc_task_131585.retval_defunc_2_reduce_res_128132 =
            &defunc_2_reduce_res_128132;
        
        struct scheduler_segop futhark_mc_task_131585_task;
        
        futhark_mc_task_131585_task.args = &futhark_mc_task_131585;
        futhark_mc_task_131585_task.top_level_fn =
            futhark_mc_segred_task_131586;
        futhark_mc_task_131585_task.name = "futhark_mc_segred_task_131586";
        futhark_mc_task_131585_task.iterations = t_window_114521;
        futhark_mc_task_131585_task.task_time =
            &ctx->futhark_mc_segred_task_131586_total_time;
        futhark_mc_task_131585_task.task_iter =
            &ctx->futhark_mc_segred_task_131586_total_iter;
        futhark_mc_task_131585_task.sched = STATIC;
        futhark_mc_task_131585_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131586_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131585_task);
        
        if (futhark_mc_segred_task_131586_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_128153 = 1.0F / defunc_2_reduce_res_128132;
        float defunc_2_reduce_res_128154;
        int64_t flat_tid_119359 = (int64_t) 0;
        int32_t num_tasks_128343;
        struct futhark_mc_task_131590 futhark_mc_task_131590;
        
        futhark_mc_task_131590.ctx = ctx;
        futhark_mc_task_131590.free_n_114518 = n_114518;
        futhark_mc_task_131590.free_gtid_119352 = gtid_119352;
        futhark_mc_task_131590.free_x_119422 = x_119422;
        futhark_mc_task_131590.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131590.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131590.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131590.free_x_128127 = x_128127;
        futhark_mc_task_131590.free_x_128128 = x_128128;
        futhark_mc_task_131590.free_defunc_0_f_res_128131 =
            defunc_0_f_res_128131;
        futhark_mc_task_131590.free_a0_128153 = a0_128153;
        futhark_mc_task_131590.retval_defunc_2_reduce_res_128154 =
            &defunc_2_reduce_res_128154;
        
        struct scheduler_segop futhark_mc_task_131590_task;
        
        futhark_mc_task_131590_task.args = &futhark_mc_task_131590;
        futhark_mc_task_131590_task.top_level_fn =
            futhark_mc_segred_task_131591;
        futhark_mc_task_131590_task.name = "futhark_mc_segred_task_131591";
        futhark_mc_task_131590_task.iterations = t_window_114521;
        futhark_mc_task_131590_task.task_time =
            &ctx->futhark_mc_segred_task_131591_total_time;
        futhark_mc_task_131590_task.task_iter =
            &ctx->futhark_mc_segred_task_131591_total_iter;
        futhark_mc_task_131590_task.sched = STATIC;
        futhark_mc_task_131590_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131591_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131590_task);
        
        if (futhark_mc_segred_task_131591_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122970.mem)[gtid_119356] = defunc_2_reduce_res_128154;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131584_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131584_end -
                 futhark_mc_segmap_parloop_131584_start;
        
        ctx->futhark_mc_segmap_parloop_131584_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131584_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131584_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131582(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119355 = tid;
    int num_tasks_128235 = info.nsubtasks;
    struct futhark_mc_task_131578 *futhark_mc_task_131578 =
                                  (struct futhark_mc_task_131578 *) args;
    struct futhark_context *ctx = futhark_mc_task_131578->ctx;
    uint64_t futhark_mc_segmap_nested_task_131582_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131582_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131578->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131578->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131578->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131578->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131578->free_i_114594;
    int64_t gtid_119352 = futhark_mc_task_131578->free_gtid_119352;
    int64_t x_119422 = futhark_mc_task_131578->free_x_119422;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131578->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131578->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131578->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131578->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131578->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122970 = {.desc ="mem_122970", .mem =
                                  futhark_mc_task_131578->free_mem_122970,
                                  .size =0, .references =NULL};
    int64_t iter_128286;
    struct futhark_mc_segmap_parloop_struct_131583
    futhark_mc_segmap_parloop_struct_131583;
    
    futhark_mc_segmap_parloop_struct_131583.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131583.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131583.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131583.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131583.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131583.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131583.free_gtid_119352 = gtid_119352;
    futhark_mc_segmap_parloop_struct_131583.free_x_119422 = x_119422;
    futhark_mc_segmap_parloop_struct_131583.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131583.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131583.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131583.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131583.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131583.free_mem_122970 = mem_122970.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131584_task;
    
    futhark_mc_segmap_parloop_131584_task.name =
        "futhark_mc_segmap_parloop_131584";
    futhark_mc_segmap_parloop_131584_task.fn = futhark_mc_segmap_parloop_131584;
    futhark_mc_segmap_parloop_131584_task.args =
        &futhark_mc_segmap_parloop_struct_131583;
    futhark_mc_segmap_parloop_131584_task.iterations = iterations;
    futhark_mc_segmap_parloop_131584_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131584_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131584_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131584_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131584_task);
    
    if (futhark_mc_segmap_parloop_131584_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131584_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131584_total_end -
                 futhark_mc_segmap_parloop_131584_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131584_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131584_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131584_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131582_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131582_end -
                 futhark_mc_segmap_nested_task_131582_start;
        
        ctx->futhark_mc_segmap_nested_task_131582_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131582_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131582_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131576(void *args, int64_t start,
                                            int64_t end, int flat_tid_119351,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131575
    *futhark_mc_segmap_parloop_struct_131575 =
    (struct futhark_mc_segmap_parloop_struct_131575 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131575->ctx;
    uint64_t futhark_mc_segmap_parloop_131576_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131576_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131575->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131575->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131575->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131575->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131575->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131575->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131575->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122989 = {.desc ="mem_122989", .mem =
                                  futhark_mc_segmap_parloop_struct_131575->free_mem_122989,
                                  .size =0, .references =NULL};
    size_t mem_122970_cached_sizze_131577 = 0;
    char *mem_122970 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128126 = start;
    
    if (mem_122970_cached_sizze_131577 < (size_t) bytes_122113) {
        mem_122970 = realloc(mem_122970, bytes_122113);
        mem_122970_cached_sizze_131577 = bytes_122113;
    }
    for (; iter_128126 < end; iter_128126++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128233 = m_114517;
        int64_t gtid_119352 = iter_128126;
        int64_t remnant_128234 = iter_128126 - gtid_119352;
        int64_t x_119422 = ((int64_t *) mem_121960.mem)[gtid_119352];
        int64_t flat_tid_119353 = (int64_t) 0;
        int32_t num_tasks_128235;
        int64_t flat_tid_119355 = (int64_t) 0;
        struct futhark_mc_task_131578 futhark_mc_task_131578;
        
        futhark_mc_task_131578.ctx = ctx;
        futhark_mc_task_131578.free_n_114518 = n_114518;
        futhark_mc_task_131578.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131578.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131578.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131578.free_i_114594 = i_114594;
        futhark_mc_task_131578.free_gtid_119352 = gtid_119352;
        futhark_mc_task_131578.free_x_119422 = x_119422;
        futhark_mc_task_131578.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131578.free_mem_122182 = mem_122182.mem;
        futhark_mc_task_131578.free_mem_122186 = mem_122186.mem;
        futhark_mc_task_131578.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131578.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131578.free_mem_122970 = mem_122970;
        
        struct scheduler_segop futhark_mc_task_131578_task;
        
        futhark_mc_task_131578_task.args = &futhark_mc_task_131578;
        futhark_mc_task_131578_task.top_level_fn =
            futhark_mc_segmap_task_131579;
        futhark_mc_task_131578_task.name = "futhark_mc_segmap_task_131579";
        futhark_mc_task_131578_task.iterations = t_n_m_114575;
        futhark_mc_task_131578_task.task_time =
            &ctx->futhark_mc_segmap_task_131579_total_time;
        futhark_mc_task_131578_task.task_iter =
            &ctx->futhark_mc_segmap_task_131579_total_iter;
        futhark_mc_task_131578_task.sched = STATIC;
        futhark_mc_task_131578_task.nested_fn =
            futhark_mc_segmap_nested_task_131582;
        
        int futhark_mc_segmap_task_131579_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131578_task);
        
        if (futhark_mc_segmap_task_131579_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122989.mem + gtid_119352 * t_n_m_114575 * (int64_t) 4,
                mem_122970 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122970);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131576_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131576_end -
                 futhark_mc_segmap_parloop_131576_start;
        
        ctx->futhark_mc_segmap_parloop_131576_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131576_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131576_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131574(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119351 = tid;
    int num_tasks_128063 = info.nsubtasks;
    struct futhark_mc_task_131569 *futhark_mc_task_131569 =
                                  (struct futhark_mc_task_131569 *) args;
    struct futhark_context *ctx = futhark_mc_task_131569->ctx;
    uint64_t futhark_mc_segmap_nested_task_131574_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131574_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131569->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131569->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131569->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131569->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131569->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131569->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131569->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131569->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131569->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131569->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131569->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131569->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131569->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122989 = {.desc ="mem_122989", .mem =
                                  futhark_mc_task_131569->free_mem_122989,
                                  .size =0, .references =NULL};
    int64_t iter_128126;
    struct futhark_mc_segmap_parloop_struct_131575
    futhark_mc_segmap_parloop_struct_131575;
    
    futhark_mc_segmap_parloop_struct_131575.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131575.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131575.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131575.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131575.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131575.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131575.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131575.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131575.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131575.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131575.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131575.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131575.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131575.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131575.free_mem_122989 = mem_122989.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131576_task;
    
    futhark_mc_segmap_parloop_131576_task.name =
        "futhark_mc_segmap_parloop_131576";
    futhark_mc_segmap_parloop_131576_task.fn = futhark_mc_segmap_parloop_131576;
    futhark_mc_segmap_parloop_131576_task.args =
        &futhark_mc_segmap_parloop_struct_131575;
    futhark_mc_segmap_parloop_131576_task.iterations = iterations;
    futhark_mc_segmap_parloop_131576_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131576_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131576_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131576_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131576_task);
    
    if (futhark_mc_segmap_parloop_131576_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131576_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131576_total_end -
                 futhark_mc_segmap_parloop_131576_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131576_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131576_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131576_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131574_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131574_end -
                 futhark_mc_segmap_nested_task_131574_start;
        
        ctx->futhark_mc_segmap_nested_task_131574_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131574_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131574_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131595 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123029;
    char *free_mem_123033;
};
struct futhark_mc_segmap_parloop_struct_131597 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123029;
    char *free_mem_123033;
};
static int futhark_mc_segmap_parloop_131598(void *args, int64_t start,
                                            int64_t end, int flat_tid_119536,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131597
    *futhark_mc_segmap_parloop_struct_131597 =
    (struct futhark_mc_segmap_parloop_struct_131597 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131597->ctx;
    uint64_t futhark_mc_segmap_parloop_131598_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131598_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131597->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131597->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131597->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131597->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131597->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131597->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131597->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123029 = {.desc ="mem_123029", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_123029,
                                  .size =0, .references =NULL};
    struct memblock mem_123033 = {.desc ="mem_123033", .mem =
                                  futhark_mc_segmap_parloop_struct_131597->free_mem_123033,
                                  .size =0, .references =NULL};
    size_t mem_122998_cached_sizze_131599 = 0;
    char *mem_122998 = NULL;
    size_t mem_123001_cached_sizze_131600 = 0;
    char *mem_123001 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128353 = start;
    
    if (mem_122998_cached_sizze_131599 < (size_t) bytes_122113) {
        mem_122998 = realloc(mem_122998, bytes_122113);
        mem_122998_cached_sizze_131599 = bytes_122113;
    }
    if (mem_123001_cached_sizze_131600 < (size_t) bytes_122113) {
        mem_123001 = realloc(mem_123001, bytes_122113);
        mem_123001_cached_sizze_131600 = bytes_122113;
    }
    for (; iter_128353 < end; iter_128353++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128437 = m_114517;
        int64_t gtid_119537 = iter_128353;
        int64_t remnant_128438 = iter_128353 - gtid_119537;
        int64_t x_115950 = ((int64_t *) mem_121960.mem)[gtid_119537];
        
        for (int64_t i_128354 = 0; i_128354 < t_n_m_114575; i_128354++) {
            int64_t x_128357 = ((int64_t *) mem_122182.mem)[gtid_119537 *
                                                            t_n_m_114575 +
                                                            i_128354];
            float x_128358 = ((float *) mem_122186.mem)[gtid_119537 *
                                                        t_n_m_114575 +
                                                        i_128354];
            int64_t min_arg_128359 = mul64(t_jump_114525, i_128354);
            int64_t min_res_128360 = smin64(i_114594, min_arg_128359);
            float defunc_0_f_res_128361 = sitofp_i64_f32(min_res_128360);
            float defunc_2_reduce_res_128362;
            float defunc_2_reduce_res_128363;
            float defunc_2_reduce_res_128364;
            float redout_128366;
            float redout_128367;
            float redout_128368;
            
            redout_128366 = 0.0F;
            redout_128367 = 0.0F;
            redout_128368 = 0.0F;
            for (int64_t i_128365 = 0; i_128365 < t_window_114521; i_128365++) {
                bool cond_128369 = sle64(x_115950, i_128365);
                float defunc_0_f_res_128370;
                
                if (cond_128369) {
                    defunc_0_f_res_128370 = 0.0F;
                } else {
                    int64_t i_128371 = add64(x_128357, i_128365);
                    float x_128372 = ((float *) mem_121982.mem)[gtid_119537 *
                                                                n_114518 +
                                                                i_128371];
                    float defunc_0_f_res_f_res_128373 = 1.0F + x_128372;
                    
                    defunc_0_f_res_128370 = defunc_0_f_res_f_res_128373;
                }
                
                float defunc_0_f_res_128374;
                
                if (cond_128369) {
                    defunc_0_f_res_128374 = 0.0F;
                } else {
                    int64_t i_128375 = add64(x_128357, i_128365);
                    float x_128376 = ((float *) mem_122408.mem)[gtid_119537 *
                                                                n_114518 +
                                                                i_128375];
                    
                    defunc_0_f_res_128374 = x_128376;
                }
                
                float x_j_128377 = defunc_0_f_res_128370 -
                      defunc_0_f_res_128361;
                float abs_res_128378 = (float) fabs(x_j_128377);
                float tmp1_128379 = abs_res_128378 / x_128358;
                float x_128380 = tmp1_128379 * tmp1_128379;
                float y_128381 = tmp1_128379 * x_128380;
                float tmp2_128382 = 1.0F - y_128381;
                float x_128383 = tmp2_128382 * tmp2_128382;
                float tmp3_128384 = tmp2_128382 * x_128383;
                float w_j_128385 = defunc_0_f_res_128374 * tmp3_128384;
                float xw_j_128386 = x_j_128377 * w_j_128385;
                float x2w_j_128387 = x_j_128377 * xw_j_128386;
                float defunc_1_op_res_128388 = w_j_128385 + redout_128366;
                float defunc_1_op_res_128389 = xw_j_128386 + redout_128367;
                float defunc_1_op_res_128390 = x2w_j_128387 + redout_128368;
                float redout_tmp_128441 = defunc_1_op_res_128388;
                float redout_tmp_128442 = defunc_1_op_res_128389;
                float redout_tmp_128443 = defunc_1_op_res_128390;
                
                redout_128366 = redout_tmp_128441;
                redout_128367 = redout_tmp_128442;
                redout_128368 = redout_tmp_128443;
            }
            defunc_2_reduce_res_128362 = redout_128366;
            defunc_2_reduce_res_128363 = redout_128367;
            defunc_2_reduce_res_128364 = redout_128368;
            
            float x_128391 = defunc_2_reduce_res_128362 *
                  defunc_2_reduce_res_128364;
            float y_128392 = defunc_2_reduce_res_128363 *
                  defunc_2_reduce_res_128363;
            float y_128393 = x_128391 - y_128392;
            float det1_128394 = 1.0F / y_128393;
            float a11_128395 = defunc_2_reduce_res_128364 * det1_128394;
            float negate_arg_128396 = defunc_2_reduce_res_128363 * det1_128394;
            float b11_128397 = 0.0F - negate_arg_128396;
            float c11_128398 = defunc_2_reduce_res_128362 * det1_128394;
            float defunc_2_reduce_res_128399;
            float defunc_2_reduce_res_128400;
            float redout_128402;
            float redout_128403;
            
            redout_128402 = 0.0F;
            redout_128403 = 0.0F;
            for (int64_t i_128401 = 0; i_128401 < t_window_114521; i_128401++) {
                bool cond_128404 = sle64(x_115950, i_128401);
                float defunc_0_f_res_128405;
                
                if (cond_128404) {
                    defunc_0_f_res_128405 = 0.0F;
                } else {
                    int64_t i_128406 = add64(x_128357, i_128401);
                    float x_128407 = ((float *) mem_121982.mem)[gtid_119537 *
                                                                n_114518 +
                                                                i_128406];
                    float defunc_0_f_res_f_res_128408 = 1.0F + x_128407;
                    
                    defunc_0_f_res_128405 = defunc_0_f_res_f_res_128408;
                }
                
                float defunc_0_f_res_128409;
                
                if (cond_128404) {
                    defunc_0_f_res_128409 = 0.0F;
                } else {
                    int64_t i_128410 = add64(x_128357, i_128401);
                    float x_128411 = ((float *) mem_122408.mem)[gtid_119537 *
                                                                n_114518 +
                                                                i_128410];
                    
                    defunc_0_f_res_128409 = x_128411;
                }
                
                float x_j_128412 = defunc_0_f_res_128405 -
                      defunc_0_f_res_128361;
                float abs_res_128413 = (float) fabs(x_j_128412);
                float tmp1_128414 = abs_res_128413 / x_128358;
                float x_128415 = tmp1_128414 * tmp1_128414;
                float y_128416 = tmp1_128414 * x_128415;
                float tmp2_128417 = 1.0F - y_128416;
                float x_128418 = tmp2_128417 * tmp2_128417;
                float tmp3_128419 = tmp2_128417 * x_128418;
                float tmp4_128420 = defunc_0_f_res_128409 * tmp3_128419;
                float defunc_1_f_res_128421 = x_j_128412 * tmp4_128420;
                float defunc_0_f_res_128422;
                
                if (cond_128404) {
                    defunc_0_f_res_128422 = 0.0F;
                } else {
                    int64_t i_128423 = add64(x_128357, i_128401);
                    float x_128424 = ((float *) mem_122959.mem)[gtid_119537 *
                                                                n_114518 +
                                                                i_128423];
                    
                    defunc_0_f_res_128422 = x_128424;
                }
                
                float x_128425 = a11_128395 * tmp4_128420;
                float y_128426 = b11_128397 * defunc_1_f_res_128421;
                float x_128427 = x_128425 + y_128426;
                float defunc_9_fit_fun_res_128428 = defunc_0_f_res_128422 *
                      x_128427;
                float x_128429 = b11_128397 * tmp4_128420;
                float y_128430 = c11_128398 * defunc_1_f_res_128421;
                float x_128431 = x_128429 + y_128430;
                float defunc_9_slope_fun_res_128432 = defunc_0_f_res_128422 *
                      x_128431;
                float defunc_1_op_res_128433 = defunc_9_fit_fun_res_128428 +
                      redout_128402;
                float defunc_1_op_res_128434 = defunc_9_slope_fun_res_128432 +
                      redout_128403;
                float redout_tmp_128444 = defunc_1_op_res_128433;
                float redout_tmp_128445 = defunc_1_op_res_128434;
                
                redout_128402 = redout_tmp_128444;
                redout_128403 = redout_tmp_128445;
            }
            defunc_2_reduce_res_128399 = redout_128402;
            defunc_2_reduce_res_128400 = redout_128403;
            ((float *) mem_122998)[i_128354] = defunc_2_reduce_res_128399;
            ((float *) mem_123001)[i_128354] = defunc_2_reduce_res_128400;
        }
        memmove(mem_123029.mem + gtid_119537 * t_n_m_114575 * (int64_t) 4,
                mem_122998 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123033.mem + gtid_119537 * t_n_m_114575 * (int64_t) 4,
                mem_123001 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122998);
    free(mem_123001);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131598_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131598_end -
                 futhark_mc_segmap_parloop_131598_start;
        
        ctx->futhark_mc_segmap_parloop_131598_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131598_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131598_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131596(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119536 = tid;
    int num_tasks_128352 = info.nsubtasks;
    struct futhark_mc_task_131595 *futhark_mc_task_131595 =
                                  (struct futhark_mc_task_131595 *) args;
    struct futhark_context *ctx = futhark_mc_task_131595->ctx;
    uint64_t futhark_mc_segmap_task_131596_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131596_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131595->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131595->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131595->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131595->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131595->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131595->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131595->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131595->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131595->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131595->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131595->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131595->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131595->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123029 = {.desc ="mem_123029", .mem =
                                  futhark_mc_task_131595->free_mem_123029,
                                  .size =0, .references =NULL};
    struct memblock mem_123033 = {.desc ="mem_123033", .mem =
                                  futhark_mc_task_131595->free_mem_123033,
                                  .size =0, .references =NULL};
    int64_t iter_128353;
    struct futhark_mc_segmap_parloop_struct_131597
    futhark_mc_segmap_parloop_struct_131597;
    
    futhark_mc_segmap_parloop_struct_131597.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131597.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131597.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131597.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131597.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131597.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131597.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131597.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131597.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131597.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131597.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131597.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131597.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131597.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131597.free_mem_123029 = mem_123029.mem;
    futhark_mc_segmap_parloop_struct_131597.free_mem_123033 = mem_123033.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131598_task;
    
    futhark_mc_segmap_parloop_131598_task.name =
        "futhark_mc_segmap_parloop_131598";
    futhark_mc_segmap_parloop_131598_task.fn = futhark_mc_segmap_parloop_131598;
    futhark_mc_segmap_parloop_131598_task.args =
        &futhark_mc_segmap_parloop_struct_131597;
    futhark_mc_segmap_parloop_131598_task.iterations = iterations;
    futhark_mc_segmap_parloop_131598_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131598_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131598_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131598_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131598_task);
    
    if (futhark_mc_segmap_parloop_131598_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131598_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131598_total_end -
                 futhark_mc_segmap_parloop_131598_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131598_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131598_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131598_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131596_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131596_end -
                 futhark_mc_segmap_task_131596_start;
        
        ctx->futhark_mc_segmap_task_131596_runs[tid]++;
        ctx->futhark_mc_segmap_task_131596_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131596_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131602 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123029;
    char *free_mem_123033;
};
struct futhark_mc_task_131606 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122992;
    char *free_mem_122995;
};
struct futhark_mc_segmap_parloop_struct_131608 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122992;
    char *free_mem_122995;
};
static int futhark_mc_segmap_parloop_131609(void *args, int64_t start,
                                            int64_t end, int flat_tid_119540,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131608
    *futhark_mc_segmap_parloop_struct_131608 =
    (struct futhark_mc_segmap_parloop_struct_131608 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131608->ctx;
    uint64_t futhark_mc_segmap_parloop_131609_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131609_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131608->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131608->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131608->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131608->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131608->free_i_114594;
    int64_t gtid_119539 =
            futhark_mc_segmap_parloop_struct_131608->free_gtid_119539;
    int64_t x_119637 = futhark_mc_segmap_parloop_struct_131608->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122992 = {.desc ="mem_122992", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_122992,
                                  .size =0, .references =NULL};
    struct memblock mem_122995 = {.desc ="mem_122995", .mem =
                                  futhark_mc_segmap_parloop_struct_131608->free_mem_122995,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128609 = start;
    
    for (; iter_128609 < end; iter_128609++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128670 = t_n_m_114575;
        int64_t gtid_119541 = iter_128609;
        int64_t remnant_128671 = iter_128609 - gtid_119541;
        int64_t x_128528 = ((int64_t *) mem_122182.mem)[gtid_119539 *
                                                        t_n_m_114575 +
                                                        gtid_119541];
        float x_128529 = ((float *) mem_122186.mem)[gtid_119539 * t_n_m_114575 +
                                                    gtid_119541];
        int64_t min_arg_128530 = mul64(t_jump_114525, gtid_119541);
        int64_t min_res_128531 = smin64(i_114594, min_arg_128530);
        float defunc_0_f_res_128532 = sitofp_i64_f32(min_res_128531);
        float defunc_2_reduce_res_128533;
        float defunc_2_reduce_res_128534;
        float defunc_2_reduce_res_128535;
        float redout_128611;
        float redout_128612;
        float redout_128613;
        
        redout_128611 = 0.0F;
        redout_128612 = 0.0F;
        redout_128613 = 0.0F;
        for (int64_t i_128610 = 0; i_128610 < t_window_114521; i_128610++) {
            bool cond_128614 = sle64(x_119637, i_128610);
            float defunc_0_f_res_128615;
            
            if (cond_128614) {
                defunc_0_f_res_128615 = 0.0F;
            } else {
                int64_t i_128616 = add64(x_128528, i_128610);
                float x_128617 = ((float *) mem_121982.mem)[gtid_119539 *
                                                            n_114518 +
                                                            i_128616];
                float defunc_0_f_res_f_res_128618 = 1.0F + x_128617;
                
                defunc_0_f_res_128615 = defunc_0_f_res_f_res_128618;
            }
            
            float defunc_0_f_res_128619;
            
            if (cond_128614) {
                defunc_0_f_res_128619 = 0.0F;
            } else {
                int64_t i_128620 = add64(x_128528, i_128610);
                float x_128621 = ((float *) mem_122408.mem)[gtid_119539 *
                                                            n_114518 +
                                                            i_128620];
                
                defunc_0_f_res_128619 = x_128621;
            }
            
            float x_j_128622 = defunc_0_f_res_128615 - defunc_0_f_res_128532;
            float abs_res_128623 = (float) fabs(x_j_128622);
            float tmp1_128624 = abs_res_128623 / x_128529;
            float x_128625 = tmp1_128624 * tmp1_128624;
            float y_128626 = tmp1_128624 * x_128625;
            float tmp2_128627 = 1.0F - y_128626;
            float x_128628 = tmp2_128627 * tmp2_128627;
            float tmp3_128629 = tmp2_128627 * x_128628;
            float w_j_128630 = defunc_0_f_res_128619 * tmp3_128629;
            float xw_j_128631 = x_j_128622 * w_j_128630;
            float x2w_j_128632 = x_j_128622 * xw_j_128631;
            float defunc_1_op_res_128633 = w_j_128630 + redout_128611;
            float defunc_1_op_res_128634 = xw_j_128631 + redout_128612;
            float defunc_1_op_res_128635 = x2w_j_128632 + redout_128613;
            float redout_tmp_128672 = defunc_1_op_res_128633;
            float redout_tmp_128673 = defunc_1_op_res_128634;
            float redout_tmp_128674 = defunc_1_op_res_128635;
            
            redout_128611 = redout_tmp_128672;
            redout_128612 = redout_tmp_128673;
            redout_128613 = redout_tmp_128674;
        }
        defunc_2_reduce_res_128533 = redout_128611;
        defunc_2_reduce_res_128534 = redout_128612;
        defunc_2_reduce_res_128535 = redout_128613;
        
        float x_128562 = defunc_2_reduce_res_128533 *
              defunc_2_reduce_res_128535;
        float y_128563 = defunc_2_reduce_res_128534 *
              defunc_2_reduce_res_128534;
        float y_128564 = x_128562 - y_128563;
        float det1_128565 = 1.0F / y_128564;
        float a11_128566 = defunc_2_reduce_res_128535 * det1_128565;
        float negate_arg_128567 = defunc_2_reduce_res_128534 * det1_128565;
        float b11_128568 = 0.0F - negate_arg_128567;
        float c11_128569 = defunc_2_reduce_res_128533 * det1_128565;
        float defunc_2_reduce_res_128570;
        float defunc_2_reduce_res_128571;
        float redout_128637;
        float redout_128638;
        
        redout_128637 = 0.0F;
        redout_128638 = 0.0F;
        for (int64_t i_128636 = 0; i_128636 < t_window_114521; i_128636++) {
            bool cond_128639 = sle64(x_119637, i_128636);
            float defunc_0_f_res_128640;
            
            if (cond_128639) {
                defunc_0_f_res_128640 = 0.0F;
            } else {
                int64_t i_128641 = add64(x_128528, i_128636);
                float x_128642 = ((float *) mem_121982.mem)[gtid_119539 *
                                                            n_114518 +
                                                            i_128641];
                float defunc_0_f_res_f_res_128643 = 1.0F + x_128642;
                
                defunc_0_f_res_128640 = defunc_0_f_res_f_res_128643;
            }
            
            float defunc_0_f_res_128644;
            
            if (cond_128639) {
                defunc_0_f_res_128644 = 0.0F;
            } else {
                int64_t i_128645 = add64(x_128528, i_128636);
                float x_128646 = ((float *) mem_122408.mem)[gtid_119539 *
                                                            n_114518 +
                                                            i_128645];
                
                defunc_0_f_res_128644 = x_128646;
            }
            
            float x_j_128647 = defunc_0_f_res_128640 - defunc_0_f_res_128532;
            float abs_res_128648 = (float) fabs(x_j_128647);
            float tmp1_128649 = abs_res_128648 / x_128529;
            float x_128650 = tmp1_128649 * tmp1_128649;
            float y_128651 = tmp1_128649 * x_128650;
            float tmp2_128652 = 1.0F - y_128651;
            float x_128653 = tmp2_128652 * tmp2_128652;
            float tmp3_128654 = tmp2_128652 * x_128653;
            float tmp4_128655 = defunc_0_f_res_128644 * tmp3_128654;
            float defunc_1_f_res_128656 = x_j_128647 * tmp4_128655;
            float defunc_0_f_res_128657;
            
            if (cond_128639) {
                defunc_0_f_res_128657 = 0.0F;
            } else {
                int64_t i_128658 = add64(x_128528, i_128636);
                float x_128659 = ((float *) mem_122959.mem)[gtid_119539 *
                                                            n_114518 +
                                                            i_128658];
                
                defunc_0_f_res_128657 = x_128659;
            }
            
            float x_128660 = a11_128566 * tmp4_128655;
            float y_128661 = b11_128568 * defunc_1_f_res_128656;
            float x_128662 = x_128660 + y_128661;
            float defunc_9_fit_fun_res_128663 = defunc_0_f_res_128657 *
                  x_128662;
            float x_128664 = b11_128568 * tmp4_128655;
            float y_128665 = c11_128569 * defunc_1_f_res_128656;
            float x_128666 = x_128664 + y_128665;
            float defunc_9_slope_fun_res_128667 = defunc_0_f_res_128657 *
                  x_128666;
            float defunc_1_op_res_128668 = defunc_9_fit_fun_res_128663 +
                  redout_128637;
            float defunc_1_op_res_128669 = defunc_9_slope_fun_res_128667 +
                  redout_128638;
            float redout_tmp_128675 = defunc_1_op_res_128668;
            float redout_tmp_128676 = defunc_1_op_res_128669;
            
            redout_128637 = redout_tmp_128675;
            redout_128638 = redout_tmp_128676;
        }
        defunc_2_reduce_res_128570 = redout_128637;
        defunc_2_reduce_res_128571 = redout_128638;
        ((float *) mem_122992.mem)[gtid_119541] = defunc_2_reduce_res_128570;
        ((float *) mem_122995.mem)[gtid_119541] = defunc_2_reduce_res_128571;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131609_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131609_end -
                 futhark_mc_segmap_parloop_131609_start;
        
        ctx->futhark_mc_segmap_parloop_131609_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131609_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131609_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131607(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119540 = tid;
    int num_tasks_128608 = info.nsubtasks;
    struct futhark_mc_task_131606 *futhark_mc_task_131606 =
                                  (struct futhark_mc_task_131606 *) args;
    struct futhark_context *ctx = futhark_mc_task_131606->ctx;
    uint64_t futhark_mc_segmap_task_131607_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131607_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131606->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131606->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131606->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131606->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131606->free_i_114594;
    int64_t gtid_119539 = futhark_mc_task_131606->free_gtid_119539;
    int64_t x_119637 = futhark_mc_task_131606->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131606->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131606->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131606->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131606->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131606->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122992 = {.desc ="mem_122992", .mem =
                                  futhark_mc_task_131606->free_mem_122992,
                                  .size =0, .references =NULL};
    struct memblock mem_122995 = {.desc ="mem_122995", .mem =
                                  futhark_mc_task_131606->free_mem_122995,
                                  .size =0, .references =NULL};
    int64_t iter_128609;
    struct futhark_mc_segmap_parloop_struct_131608
    futhark_mc_segmap_parloop_struct_131608;
    
    futhark_mc_segmap_parloop_struct_131608.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131608.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131608.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131608.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131608.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131608.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131608.free_gtid_119539 = gtid_119539;
    futhark_mc_segmap_parloop_struct_131608.free_x_119637 = x_119637;
    futhark_mc_segmap_parloop_struct_131608.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131608.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131608.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131608.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131608.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131608.free_mem_122992 = mem_122992.mem;
    futhark_mc_segmap_parloop_struct_131608.free_mem_122995 = mem_122995.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131609_task;
    
    futhark_mc_segmap_parloop_131609_task.name =
        "futhark_mc_segmap_parloop_131609";
    futhark_mc_segmap_parloop_131609_task.fn = futhark_mc_segmap_parloop_131609;
    futhark_mc_segmap_parloop_131609_task.args =
        &futhark_mc_segmap_parloop_struct_131608;
    futhark_mc_segmap_parloop_131609_task.iterations = iterations;
    futhark_mc_segmap_parloop_131609_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131609_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131609_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131609_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131609_task);
    
    if (futhark_mc_segmap_parloop_131609_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131609_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131609_total_end -
                 futhark_mc_segmap_parloop_131609_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131609_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131609_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131609_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131607_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131607_end -
                 futhark_mc_segmap_task_131607_start;
        
        ctx->futhark_mc_segmap_task_131607_runs[tid]++;
        ctx->futhark_mc_segmap_task_131607_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131607_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131611 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_122992;
    char *free_mem_122995;
};
struct futhark_mc_task_131613 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_128447;
    float free_x_128448;
    float free_defunc_0_f_res_128451;
    float *retval_defunc_2_reduce_res_128452;
    float *retval_defunc_2_reduce_res_128453;
    float *retval_defunc_2_reduce_res_128454;
};
struct futhark_mc_segred_stage_1_parloop_struct_131618 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_128447;
    float free_x_128448;
    float free_defunc_0_f_res_128451;
    char *free_reduce_stage_1_tid_res_arr_mem_128744;
    char *free_reduce_stage_1_tid_res_arr_mem_128746;
    char *free_reduce_stage_1_tid_res_arr_mem_128748;
};
static int futhark_mc_segred_stage_1_parloop_131619(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119544,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131618
    *futhark_mc_segred_stage_1_parloop_struct_131618 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131618 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131618->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131619_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131619_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131618->free_n_114518;
    int64_t gtid_119539 =
            futhark_mc_segred_stage_1_parloop_struct_131618->free_gtid_119539;
    int64_t x_119637 =
            futhark_mc_segred_stage_1_parloop_struct_131618->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131618->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131618->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_128447 =
            futhark_mc_segred_stage_1_parloop_struct_131618->free_x_128447;
    float x_128448 =
          futhark_mc_segred_stage_1_parloop_struct_131618->free_x_128448;
    float defunc_0_f_res_128451 =
          futhark_mc_segred_stage_1_parloop_struct_131618->free_defunc_0_f_res_128451;
    struct memblock reduce_stage_1_tid_res_arr_mem_128744 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128744",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131618->free_reduce_stage_1_tid_res_arr_mem_128744,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128746 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128746",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131618->free_reduce_stage_1_tid_res_arr_mem_128746,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128748 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128748",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131618->free_reduce_stage_1_tid_res_arr_mem_128748,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128750 = start;
    float x_128678;
    float x_128679;
    float x_128681;
    float x_128682;
    float x_128684;
    float x_128685;
    float local_acc_128751 = 0.0F;
    float local_acc_128752 = 0.0F;
    float local_acc_128753 = 0.0F;
    
    for (; iter_128750 < end; iter_128750++) {
        int64_t gtid_119545 = iter_128750;
        bool cond_128687 = sle64(x_119637, gtid_119545);
        float defunc_0_f_res_128688;
        
        if (cond_128687) {
            defunc_0_f_res_128688 = 0.0F;
        } else {
            int64_t i_128689 = add64(gtid_119545, x_128447);
            float x_128690 = ((float *) mem_121982.mem)[gtid_119539 * n_114518 +
                                                        i_128689];
            float defunc_0_f_res_f_res_128691 = 1.0F + x_128690;
            
            defunc_0_f_res_128688 = defunc_0_f_res_f_res_128691;
        }
        
        float defunc_0_f_res_128692;
        
        if (cond_128687) {
            defunc_0_f_res_128692 = 0.0F;
        } else {
            int64_t i_128693 = add64(gtid_119545, x_128447);
            float x_128694 = ((float *) mem_122408.mem)[gtid_119539 * n_114518 +
                                                        i_128693];
            
            defunc_0_f_res_128692 = x_128694;
        }
        
        float x_j_128695 = defunc_0_f_res_128688 - defunc_0_f_res_128451;
        float abs_res_128696 = (float) fabs(x_j_128695);
        float tmp1_128697 = abs_res_128696 / x_128448;
        float x_128698 = tmp1_128697 * tmp1_128697;
        float y_128699 = tmp1_128697 * x_128698;
        float tmp2_128700 = 1.0F - y_128699;
        float x_128701 = tmp2_128700 * tmp2_128700;
        float tmp3_128702 = tmp2_128700 * x_128701;
        float w_j_128703 = defunc_0_f_res_128692 * tmp3_128702;
        float xw_j_128704 = x_j_128695 * w_j_128703;
        float x2w_j_128705 = x_j_128695 * xw_j_128704;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128678 = local_acc_128751;
        }
        // Load next params
        {
            x_128679 = w_j_128703;
        }
        // Red body
        {
            float defunc_1_op_res_128680 = x_128678 + x_128679;
            
            local_acc_128751 = defunc_1_op_res_128680;
        }
        // Load accum params
        {
            x_128681 = local_acc_128752;
        }
        // Load next params
        {
            x_128682 = xw_j_128704;
        }
        // Red body
        {
            float defunc_1_op_res_128683 = x_128681 + x_128682;
            
            local_acc_128752 = defunc_1_op_res_128683;
        }
        // Load accum params
        {
            x_128684 = local_acc_128753;
        }
        // Load next params
        {
            x_128685 = x2w_j_128705;
        }
        // Red body
        {
            float defunc_1_op_res_128686 = x_128684 + x_128685;
            
            local_acc_128753 = defunc_1_op_res_128686;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128744.mem)[flat_tid_119544] =
        local_acc_128751;
    ((float *) reduce_stage_1_tid_res_arr_mem_128746.mem)[flat_tid_119544] =
        local_acc_128752;
    ((float *) reduce_stage_1_tid_res_arr_mem_128748.mem)[flat_tid_119544] =
        local_acc_128753;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131619_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131619_end -
                 futhark_mc_segred_stage_1_parloop_131619_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131619_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131619_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131619_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131614(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119544 = tid;
    int num_tasks_128743 = info.nsubtasks;
    struct futhark_mc_task_131613 *futhark_mc_task_131613 =
                                  (struct futhark_mc_task_131613 *) args;
    struct futhark_context *ctx = futhark_mc_task_131613->ctx;
    uint64_t futhark_mc_segred_task_131614_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131614_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131613->free_n_114518;
    int64_t gtid_119539 = futhark_mc_task_131613->free_gtid_119539;
    int64_t x_119637 = futhark_mc_task_131613->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131613->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131613->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_128447 = futhark_mc_task_131613->free_x_128447;
    float x_128448 = futhark_mc_task_131613->free_x_128448;
    float defunc_0_f_res_128451 =
          futhark_mc_task_131613->free_defunc_0_f_res_128451;
    float defunc_2_reduce_res_128452 =
          *futhark_mc_task_131613->retval_defunc_2_reduce_res_128452;
    float defunc_2_reduce_res_128453 =
          *futhark_mc_task_131613->retval_defunc_2_reduce_res_128453;
    float defunc_2_reduce_res_128454 =
          *futhark_mc_task_131613->retval_defunc_2_reduce_res_128454;
    size_t reduce_stage_1_tid_res_arr_mem_128744_cached_sizze_131615 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128744 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_128746_cached_sizze_131616 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128746 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_128748_cached_sizze_131617 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128748 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128744_cached_sizze_131615 <
        (size_t) ((int64_t) 4 * num_tasks_128743)) {
        reduce_stage_1_tid_res_arr_mem_128744 =
            realloc(reduce_stage_1_tid_res_arr_mem_128744, (int64_t) 4 *
                    num_tasks_128743);
        reduce_stage_1_tid_res_arr_mem_128744_cached_sizze_131615 =
            (int64_t) 4 * num_tasks_128743;
    }
    if (reduce_stage_1_tid_res_arr_mem_128746_cached_sizze_131616 <
        (size_t) ((int64_t) 4 * num_tasks_128743)) {
        reduce_stage_1_tid_res_arr_mem_128746 =
            realloc(reduce_stage_1_tid_res_arr_mem_128746, (int64_t) 4 *
                    num_tasks_128743);
        reduce_stage_1_tid_res_arr_mem_128746_cached_sizze_131616 =
            (int64_t) 4 * num_tasks_128743;
    }
    if (reduce_stage_1_tid_res_arr_mem_128748_cached_sizze_131617 <
        (size_t) ((int64_t) 4 * num_tasks_128743)) {
        reduce_stage_1_tid_res_arr_mem_128748 =
            realloc(reduce_stage_1_tid_res_arr_mem_128748, (int64_t) 4 *
                    num_tasks_128743);
        reduce_stage_1_tid_res_arr_mem_128748_cached_sizze_131617 =
            (int64_t) 4 * num_tasks_128743;
    }
    
    int64_t iter_128750;
    struct futhark_mc_segred_stage_1_parloop_struct_131618
    futhark_mc_segred_stage_1_parloop_struct_131618;
    
    futhark_mc_segred_stage_1_parloop_struct_131618.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_gtid_119539 =
        gtid_119539;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_x_119637 = x_119637;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_x_128447 = x_128447;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_x_128448 = x_128448;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_defunc_0_f_res_128451 =
        defunc_0_f_res_128451;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_reduce_stage_1_tid_res_arr_mem_128744 =
        reduce_stage_1_tid_res_arr_mem_128744;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_reduce_stage_1_tid_res_arr_mem_128746 =
        reduce_stage_1_tid_res_arr_mem_128746;
    futhark_mc_segred_stage_1_parloop_struct_131618.free_reduce_stage_1_tid_res_arr_mem_128748 =
        reduce_stage_1_tid_res_arr_mem_128748;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131619_task;
    
    futhark_mc_segred_stage_1_parloop_131619_task.name =
        "futhark_mc_segred_stage_1_parloop_131619";
    futhark_mc_segred_stage_1_parloop_131619_task.fn =
        futhark_mc_segred_stage_1_parloop_131619;
    futhark_mc_segred_stage_1_parloop_131619_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131618;
    futhark_mc_segred_stage_1_parloop_131619_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131619_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131619_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131619_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131619_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131619_task);
    
    if (futhark_mc_segred_stage_1_parloop_131619_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131619_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131619_total_end -
                 futhark_mc_segred_stage_1_parloop_131619_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131619_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131619_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131619_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128452 = 0.0F;
        defunc_2_reduce_res_128453 = 0.0F;
        defunc_2_reduce_res_128454 = 0.0F;
    }
    
    float x_128754;
    float x_128755;
    float x_128757;
    float x_128758;
    float x_128760;
    float x_128761;
    
    for (int32_t i_128763 = 0; i_128763 < num_tasks_128743; i_128763++) {
        flat_tid_119544 = i_128763;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128754 = defunc_2_reduce_res_128452;
            }
            // load next params
            {
                x_128755 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128744)[flat_tid_119544];
            }
            // red body
            {
                float defunc_1_op_res_128756 = x_128754 + x_128755;
                
                defunc_2_reduce_res_128452 = defunc_1_op_res_128756;
            }
            // load acc params
            {
                x_128757 = defunc_2_reduce_res_128453;
            }
            // load next params
            {
                x_128758 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128746)[flat_tid_119544];
            }
            // red body
            {
                float defunc_1_op_res_128759 = x_128757 + x_128758;
                
                defunc_2_reduce_res_128453 = defunc_1_op_res_128759;
            }
            // load acc params
            {
                x_128760 = defunc_2_reduce_res_128454;
            }
            // load next params
            {
                x_128761 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128748)[flat_tid_119544];
            }
            // red body
            {
                float defunc_1_op_res_128762 = x_128760 + x_128761;
                
                defunc_2_reduce_res_128454 = defunc_1_op_res_128762;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128744);
    free(reduce_stage_1_tid_res_arr_mem_128746);
    free(reduce_stage_1_tid_res_arr_mem_128748);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131614_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131614_end -
                 futhark_mc_segred_task_131614_start;
        
        ctx->futhark_mc_segred_task_131614_runs[tid]++;
        ctx->futhark_mc_segred_task_131614_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131614_iter[tid] += iterations;
    }
    *futhark_mc_task_131613->retval_defunc_2_reduce_res_128452 =
        defunc_2_reduce_res_128452;
    *futhark_mc_task_131613->retval_defunc_2_reduce_res_128453 =
        defunc_2_reduce_res_128453;
    *futhark_mc_task_131613->retval_defunc_2_reduce_res_128454 =
        defunc_2_reduce_res_128454;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131620 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_x_128447;
    float free_x_128448;
    float free_defunc_0_f_res_128451;
    float free_a11_128487;
    float free_b11_128489;
    float free_c11_128490;
    float *retval_defunc_2_reduce_res_128491;
    float *retval_defunc_2_reduce_res_128492;
};
struct futhark_mc_segred_stage_1_parloop_struct_131624 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119539;
    int64_t free_x_119637;
    char *free_mem_121982;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_x_128447;
    float free_x_128448;
    float free_defunc_0_f_res_128451;
    float free_a11_128487;
    float free_b11_128489;
    float free_c11_128490;
    char *free_reduce_stage_1_tid_res_arr_mem_128765;
    char *free_reduce_stage_1_tid_res_arr_mem_128767;
};
static int futhark_mc_segred_stage_1_parloop_131625(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119546,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131624
    *futhark_mc_segred_stage_1_parloop_struct_131624 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131624 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131624->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131625_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131625_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131624->free_n_114518;
    int64_t gtid_119539 =
            futhark_mc_segred_stage_1_parloop_struct_131624->free_gtid_119539;
    int64_t x_119637 =
            futhark_mc_segred_stage_1_parloop_struct_131624->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131624->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131624->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131624->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_128447 =
            futhark_mc_segred_stage_1_parloop_struct_131624->free_x_128447;
    float x_128448 =
          futhark_mc_segred_stage_1_parloop_struct_131624->free_x_128448;
    float defunc_0_f_res_128451 =
          futhark_mc_segred_stage_1_parloop_struct_131624->free_defunc_0_f_res_128451;
    float a11_128487 =
          futhark_mc_segred_stage_1_parloop_struct_131624->free_a11_128487;
    float b11_128489 =
          futhark_mc_segred_stage_1_parloop_struct_131624->free_b11_128489;
    float c11_128490 =
          futhark_mc_segred_stage_1_parloop_struct_131624->free_c11_128490;
    struct memblock reduce_stage_1_tid_res_arr_mem_128765 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128765",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131624->free_reduce_stage_1_tid_res_arr_mem_128765,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128767 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128767",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131624->free_reduce_stage_1_tid_res_arr_mem_128767,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128769 = start;
    float x_128706;
    float x_128707;
    float x_128709;
    float x_128710;
    float local_acc_128770 = 0.0F;
    float local_acc_128771 = 0.0F;
    
    for (; iter_128769 < end; iter_128769++) {
        int64_t gtid_119547 = iter_128769;
        bool cond_128712 = sle64(x_119637, gtid_119547);
        float defunc_0_f_res_128713;
        
        if (cond_128712) {
            defunc_0_f_res_128713 = 0.0F;
        } else {
            int64_t i_128714 = add64(gtid_119547, x_128447);
            float x_128715 = ((float *) mem_121982.mem)[gtid_119539 * n_114518 +
                                                        i_128714];
            float defunc_0_f_res_f_res_128716 = 1.0F + x_128715;
            
            defunc_0_f_res_128713 = defunc_0_f_res_f_res_128716;
        }
        
        float defunc_0_f_res_128717;
        
        if (cond_128712) {
            defunc_0_f_res_128717 = 0.0F;
        } else {
            int64_t i_128718 = add64(gtid_119547, x_128447);
            float x_128719 = ((float *) mem_122408.mem)[gtid_119539 * n_114518 +
                                                        i_128718];
            
            defunc_0_f_res_128717 = x_128719;
        }
        
        float x_j_128720 = defunc_0_f_res_128713 - defunc_0_f_res_128451;
        float abs_res_128721 = (float) fabs(x_j_128720);
        float tmp1_128722 = abs_res_128721 / x_128448;
        float x_128723 = tmp1_128722 * tmp1_128722;
        float y_128724 = tmp1_128722 * x_128723;
        float tmp2_128725 = 1.0F - y_128724;
        float x_128726 = tmp2_128725 * tmp2_128725;
        float tmp3_128727 = tmp2_128725 * x_128726;
        float tmp4_128728 = defunc_0_f_res_128717 * tmp3_128727;
        float defunc_1_f_res_128729 = x_j_128720 * tmp4_128728;
        float defunc_0_f_res_128730;
        
        if (cond_128712) {
            defunc_0_f_res_128730 = 0.0F;
        } else {
            int64_t i_128731 = add64(gtid_119547, x_128447);
            float x_128732 = ((float *) mem_122959.mem)[gtid_119539 * n_114518 +
                                                        i_128731];
            
            defunc_0_f_res_128730 = x_128732;
        }
        
        float x_128733 = a11_128487 * tmp4_128728;
        float y_128734 = b11_128489 * defunc_1_f_res_128729;
        float x_128735 = x_128733 + y_128734;
        float defunc_9_fit_fun_res_128736 = defunc_0_f_res_128730 * x_128735;
        float x_128737 = b11_128489 * tmp4_128728;
        float y_128738 = c11_128490 * defunc_1_f_res_128729;
        float x_128739 = x_128737 + y_128738;
        float defunc_9_slope_fun_res_128740 = defunc_0_f_res_128730 * x_128739;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128706 = local_acc_128770;
        }
        // Load next params
        {
            x_128707 = defunc_9_fit_fun_res_128736;
        }
        // Red body
        {
            float defunc_1_op_res_128708 = x_128706 + x_128707;
            
            local_acc_128770 = defunc_1_op_res_128708;
        }
        // Load accum params
        {
            x_128709 = local_acc_128771;
        }
        // Load next params
        {
            x_128710 = defunc_9_slope_fun_res_128740;
        }
        // Red body
        {
            float defunc_1_op_res_128711 = x_128709 + x_128710;
            
            local_acc_128771 = defunc_1_op_res_128711;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128765.mem)[flat_tid_119546] =
        local_acc_128770;
    ((float *) reduce_stage_1_tid_res_arr_mem_128767.mem)[flat_tid_119546] =
        local_acc_128771;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131625_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131625_end -
                 futhark_mc_segred_stage_1_parloop_131625_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131625_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131625_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131625_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131621(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119546 = tid;
    int num_tasks_128764 = info.nsubtasks;
    struct futhark_mc_task_131620 *futhark_mc_task_131620 =
                                  (struct futhark_mc_task_131620 *) args;
    struct futhark_context *ctx = futhark_mc_task_131620->ctx;
    uint64_t futhark_mc_segred_task_131621_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131621_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131620->free_n_114518;
    int64_t gtid_119539 = futhark_mc_task_131620->free_gtid_119539;
    int64_t x_119637 = futhark_mc_task_131620->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131620->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131620->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131620->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_128447 = futhark_mc_task_131620->free_x_128447;
    float x_128448 = futhark_mc_task_131620->free_x_128448;
    float defunc_0_f_res_128451 =
          futhark_mc_task_131620->free_defunc_0_f_res_128451;
    float a11_128487 = futhark_mc_task_131620->free_a11_128487;
    float b11_128489 = futhark_mc_task_131620->free_b11_128489;
    float c11_128490 = futhark_mc_task_131620->free_c11_128490;
    float defunc_2_reduce_res_128491 =
          *futhark_mc_task_131620->retval_defunc_2_reduce_res_128491;
    float defunc_2_reduce_res_128492 =
          *futhark_mc_task_131620->retval_defunc_2_reduce_res_128492;
    size_t reduce_stage_1_tid_res_arr_mem_128765_cached_sizze_131622 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128765 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_128767_cached_sizze_131623 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128767 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128765_cached_sizze_131622 <
        (size_t) ((int64_t) 4 * num_tasks_128764)) {
        reduce_stage_1_tid_res_arr_mem_128765 =
            realloc(reduce_stage_1_tid_res_arr_mem_128765, (int64_t) 4 *
                    num_tasks_128764);
        reduce_stage_1_tid_res_arr_mem_128765_cached_sizze_131622 =
            (int64_t) 4 * num_tasks_128764;
    }
    if (reduce_stage_1_tid_res_arr_mem_128767_cached_sizze_131623 <
        (size_t) ((int64_t) 4 * num_tasks_128764)) {
        reduce_stage_1_tid_res_arr_mem_128767 =
            realloc(reduce_stage_1_tid_res_arr_mem_128767, (int64_t) 4 *
                    num_tasks_128764);
        reduce_stage_1_tid_res_arr_mem_128767_cached_sizze_131623 =
            (int64_t) 4 * num_tasks_128764;
    }
    
    int64_t iter_128769;
    struct futhark_mc_segred_stage_1_parloop_struct_131624
    futhark_mc_segred_stage_1_parloop_struct_131624;
    
    futhark_mc_segred_stage_1_parloop_struct_131624.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_gtid_119539 =
        gtid_119539;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_x_119637 = x_119637;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_mem_122959 =
        mem_122959.mem;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_x_128447 = x_128447;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_x_128448 = x_128448;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_defunc_0_f_res_128451 =
        defunc_0_f_res_128451;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_a11_128487 =
        a11_128487;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_b11_128489 =
        b11_128489;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_c11_128490 =
        c11_128490;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_reduce_stage_1_tid_res_arr_mem_128765 =
        reduce_stage_1_tid_res_arr_mem_128765;
    futhark_mc_segred_stage_1_parloop_struct_131624.free_reduce_stage_1_tid_res_arr_mem_128767 =
        reduce_stage_1_tid_res_arr_mem_128767;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131625_task;
    
    futhark_mc_segred_stage_1_parloop_131625_task.name =
        "futhark_mc_segred_stage_1_parloop_131625";
    futhark_mc_segred_stage_1_parloop_131625_task.fn =
        futhark_mc_segred_stage_1_parloop_131625;
    futhark_mc_segred_stage_1_parloop_131625_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131624;
    futhark_mc_segred_stage_1_parloop_131625_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131625_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131625_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131625_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131625_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131625_task);
    
    if (futhark_mc_segred_stage_1_parloop_131625_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131625_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131625_total_end -
                 futhark_mc_segred_stage_1_parloop_131625_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131625_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131625_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131625_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128491 = 0.0F;
        defunc_2_reduce_res_128492 = 0.0F;
    }
    
    float x_128772;
    float x_128773;
    float x_128775;
    float x_128776;
    
    for (int32_t i_128778 = 0; i_128778 < num_tasks_128764; i_128778++) {
        flat_tid_119546 = i_128778;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128772 = defunc_2_reduce_res_128491;
            }
            // load next params
            {
                x_128773 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128765)[flat_tid_119546];
            }
            // red body
            {
                float defunc_1_op_res_128774 = x_128772 + x_128773;
                
                defunc_2_reduce_res_128491 = defunc_1_op_res_128774;
            }
            // load acc params
            {
                x_128775 = defunc_2_reduce_res_128492;
            }
            // load next params
            {
                x_128776 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128767)[flat_tid_119546];
            }
            // red body
            {
                float defunc_1_op_res_128777 = x_128775 + x_128776;
                
                defunc_2_reduce_res_128492 = defunc_1_op_res_128777;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128765);
    free(reduce_stage_1_tid_res_arr_mem_128767);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131621_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131621_end -
                 futhark_mc_segred_task_131621_start;
        
        ctx->futhark_mc_segred_task_131621_runs[tid]++;
        ctx->futhark_mc_segred_task_131621_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131621_iter[tid] += iterations;
    }
    *futhark_mc_task_131620->retval_defunc_2_reduce_res_128491 =
        defunc_2_reduce_res_128491;
    *futhark_mc_task_131620->retval_defunc_2_reduce_res_128492 =
        defunc_2_reduce_res_128492;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131612(void *args, int64_t start,
                                            int64_t end, int flat_tid_119542,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131611
    *futhark_mc_segmap_parloop_struct_131611 =
    (struct futhark_mc_segmap_parloop_struct_131611 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131611->ctx;
    uint64_t futhark_mc_segmap_parloop_131612_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131612_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131611->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131611->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131611->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131611->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131611->free_i_114594;
    int64_t gtid_119539 =
            futhark_mc_segmap_parloop_struct_131611->free_gtid_119539;
    int64_t x_119637 = futhark_mc_segmap_parloop_struct_131611->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122992 = {.desc ="mem_122992", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_122992,
                                  .size =0, .references =NULL};
    struct memblock mem_122995 = {.desc ="mem_122995", .mem =
                                  futhark_mc_segmap_parloop_struct_131611->free_mem_122995,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128677 = start;
    
    for (; iter_128677 < end; iter_128677++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128741 = t_n_m_114575;
        int64_t gtid_119543 = iter_128677;
        int64_t remnant_128742 = iter_128677 - gtid_119543;
        int64_t x_128447 = ((int64_t *) mem_122182.mem)[gtid_119539 *
                                                        t_n_m_114575 +
                                                        gtid_119543];
        float x_128448 = ((float *) mem_122186.mem)[gtid_119539 * t_n_m_114575 +
                                                    gtid_119543];
        int64_t min_arg_128449 = mul64(t_jump_114525, gtid_119543);
        int64_t min_res_128450 = smin64(i_114594, min_arg_128449);
        float defunc_0_f_res_128451 = sitofp_i64_f32(min_res_128450);
        float defunc_2_reduce_res_128452;
        float defunc_2_reduce_res_128453;
        float defunc_2_reduce_res_128454;
        int64_t flat_tid_119544 = (int64_t) 0;
        int32_t num_tasks_128743;
        struct futhark_mc_task_131613 futhark_mc_task_131613;
        
        futhark_mc_task_131613.ctx = ctx;
        futhark_mc_task_131613.free_n_114518 = n_114518;
        futhark_mc_task_131613.free_gtid_119539 = gtid_119539;
        futhark_mc_task_131613.free_x_119637 = x_119637;
        futhark_mc_task_131613.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131613.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131613.free_x_128447 = x_128447;
        futhark_mc_task_131613.free_x_128448 = x_128448;
        futhark_mc_task_131613.free_defunc_0_f_res_128451 =
            defunc_0_f_res_128451;
        futhark_mc_task_131613.retval_defunc_2_reduce_res_128452 =
            &defunc_2_reduce_res_128452;
        futhark_mc_task_131613.retval_defunc_2_reduce_res_128453 =
            &defunc_2_reduce_res_128453;
        futhark_mc_task_131613.retval_defunc_2_reduce_res_128454 =
            &defunc_2_reduce_res_128454;
        
        struct scheduler_segop futhark_mc_task_131613_task;
        
        futhark_mc_task_131613_task.args = &futhark_mc_task_131613;
        futhark_mc_task_131613_task.top_level_fn =
            futhark_mc_segred_task_131614;
        futhark_mc_task_131613_task.name = "futhark_mc_segred_task_131614";
        futhark_mc_task_131613_task.iterations = t_window_114521;
        futhark_mc_task_131613_task.task_time =
            &ctx->futhark_mc_segred_task_131614_total_time;
        futhark_mc_task_131613_task.task_iter =
            &ctx->futhark_mc_segred_task_131614_total_iter;
        futhark_mc_task_131613_task.sched = STATIC;
        futhark_mc_task_131613_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131614_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131613_task);
        
        if (futhark_mc_segred_task_131614_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_128483 = defunc_2_reduce_res_128452 *
              defunc_2_reduce_res_128454;
        float y_128484 = defunc_2_reduce_res_128453 *
              defunc_2_reduce_res_128453;
        float y_128485 = x_128483 - y_128484;
        float det1_128486 = 1.0F / y_128485;
        float a11_128487 = defunc_2_reduce_res_128454 * det1_128486;
        float negate_arg_128488 = defunc_2_reduce_res_128453 * det1_128486;
        float b11_128489 = 0.0F - negate_arg_128488;
        float c11_128490 = defunc_2_reduce_res_128452 * det1_128486;
        float defunc_2_reduce_res_128491;
        float defunc_2_reduce_res_128492;
        int64_t flat_tid_119546 = (int64_t) 0;
        int32_t num_tasks_128764;
        struct futhark_mc_task_131620 futhark_mc_task_131620;
        
        futhark_mc_task_131620.ctx = ctx;
        futhark_mc_task_131620.free_n_114518 = n_114518;
        futhark_mc_task_131620.free_gtid_119539 = gtid_119539;
        futhark_mc_task_131620.free_x_119637 = x_119637;
        futhark_mc_task_131620.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131620.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131620.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131620.free_x_128447 = x_128447;
        futhark_mc_task_131620.free_x_128448 = x_128448;
        futhark_mc_task_131620.free_defunc_0_f_res_128451 =
            defunc_0_f_res_128451;
        futhark_mc_task_131620.free_a11_128487 = a11_128487;
        futhark_mc_task_131620.free_b11_128489 = b11_128489;
        futhark_mc_task_131620.free_c11_128490 = c11_128490;
        futhark_mc_task_131620.retval_defunc_2_reduce_res_128491 =
            &defunc_2_reduce_res_128491;
        futhark_mc_task_131620.retval_defunc_2_reduce_res_128492 =
            &defunc_2_reduce_res_128492;
        
        struct scheduler_segop futhark_mc_task_131620_task;
        
        futhark_mc_task_131620_task.args = &futhark_mc_task_131620;
        futhark_mc_task_131620_task.top_level_fn =
            futhark_mc_segred_task_131621;
        futhark_mc_task_131620_task.name = "futhark_mc_segred_task_131621";
        futhark_mc_task_131620_task.iterations = t_window_114521;
        futhark_mc_task_131620_task.task_time =
            &ctx->futhark_mc_segred_task_131621_total_time;
        futhark_mc_task_131620_task.task_iter =
            &ctx->futhark_mc_segred_task_131621_total_iter;
        futhark_mc_task_131620_task.sched = STATIC;
        futhark_mc_task_131620_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131621_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131620_task);
        
        if (futhark_mc_segred_task_131621_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122992.mem)[gtid_119543] = defunc_2_reduce_res_128491;
        ((float *) mem_122995.mem)[gtid_119543] = defunc_2_reduce_res_128492;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131612_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131612_end -
                 futhark_mc_segmap_parloop_131612_start;
        
        ctx->futhark_mc_segmap_parloop_131612_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131612_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131612_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131610(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119542 = tid;
    int num_tasks_128608 = info.nsubtasks;
    struct futhark_mc_task_131606 *futhark_mc_task_131606 =
                                  (struct futhark_mc_task_131606 *) args;
    struct futhark_context *ctx = futhark_mc_task_131606->ctx;
    uint64_t futhark_mc_segmap_nested_task_131610_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131610_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131606->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131606->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131606->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131606->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131606->free_i_114594;
    int64_t gtid_119539 = futhark_mc_task_131606->free_gtid_119539;
    int64_t x_119637 = futhark_mc_task_131606->free_x_119637;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131606->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131606->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131606->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131606->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131606->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_122992 = {.desc ="mem_122992", .mem =
                                  futhark_mc_task_131606->free_mem_122992,
                                  .size =0, .references =NULL};
    struct memblock mem_122995 = {.desc ="mem_122995", .mem =
                                  futhark_mc_task_131606->free_mem_122995,
                                  .size =0, .references =NULL};
    int64_t iter_128677;
    struct futhark_mc_segmap_parloop_struct_131611
    futhark_mc_segmap_parloop_struct_131611;
    
    futhark_mc_segmap_parloop_struct_131611.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131611.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131611.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131611.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131611.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131611.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131611.free_gtid_119539 = gtid_119539;
    futhark_mc_segmap_parloop_struct_131611.free_x_119637 = x_119637;
    futhark_mc_segmap_parloop_struct_131611.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131611.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131611.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131611.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131611.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131611.free_mem_122992 = mem_122992.mem;
    futhark_mc_segmap_parloop_struct_131611.free_mem_122995 = mem_122995.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131612_task;
    
    futhark_mc_segmap_parloop_131612_task.name =
        "futhark_mc_segmap_parloop_131612";
    futhark_mc_segmap_parloop_131612_task.fn = futhark_mc_segmap_parloop_131612;
    futhark_mc_segmap_parloop_131612_task.args =
        &futhark_mc_segmap_parloop_struct_131611;
    futhark_mc_segmap_parloop_131612_task.iterations = iterations;
    futhark_mc_segmap_parloop_131612_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131612_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131612_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131612_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131612_task);
    
    if (futhark_mc_segmap_parloop_131612_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131612_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131612_total_end -
                 futhark_mc_segmap_parloop_131612_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131612_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131612_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131612_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131610_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131610_end -
                 futhark_mc_segmap_nested_task_131610_start;
        
        ctx->futhark_mc_segmap_nested_task_131610_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131610_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131610_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131603(void *args, int64_t start,
                                            int64_t end, int flat_tid_119538,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131602
    *futhark_mc_segmap_parloop_struct_131602 =
    (struct futhark_mc_segmap_parloop_struct_131602 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131602->ctx;
    uint64_t futhark_mc_segmap_parloop_131603_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131603_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131602->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131602->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131602->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131602->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131602->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131602->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131602->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123029 = {.desc ="mem_123029", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_123029,
                                  .size =0, .references =NULL};
    struct memblock mem_123033 = {.desc ="mem_123033", .mem =
                                  futhark_mc_segmap_parloop_struct_131602->free_mem_123033,
                                  .size =0, .references =NULL};
    size_t mem_122992_cached_sizze_131604 = 0;
    char *mem_122992 = NULL;
    size_t mem_122995_cached_sizze_131605 = 0;
    char *mem_122995 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128446 = start;
    
    if (mem_122992_cached_sizze_131604 < (size_t) bytes_122113) {
        mem_122992 = realloc(mem_122992, bytes_122113);
        mem_122992_cached_sizze_131604 = bytes_122113;
    }
    if (mem_122995_cached_sizze_131605 < (size_t) bytes_122113) {
        mem_122995 = realloc(mem_122995, bytes_122113);
        mem_122995_cached_sizze_131605 = bytes_122113;
    }
    for (; iter_128446 < end; iter_128446++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128606 = m_114517;
        int64_t gtid_119539 = iter_128446;
        int64_t remnant_128607 = iter_128446 - gtid_119539;
        int64_t x_119637 = ((int64_t *) mem_121960.mem)[gtid_119539];
        int64_t flat_tid_119540 = (int64_t) 0;
        int32_t num_tasks_128608;
        int64_t flat_tid_119542 = (int64_t) 0;
        struct futhark_mc_task_131606 futhark_mc_task_131606;
        
        futhark_mc_task_131606.ctx = ctx;
        futhark_mc_task_131606.free_n_114518 = n_114518;
        futhark_mc_task_131606.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131606.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131606.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131606.free_i_114594 = i_114594;
        futhark_mc_task_131606.free_gtid_119539 = gtid_119539;
        futhark_mc_task_131606.free_x_119637 = x_119637;
        futhark_mc_task_131606.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131606.free_mem_122182 = mem_122182.mem;
        futhark_mc_task_131606.free_mem_122186 = mem_122186.mem;
        futhark_mc_task_131606.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131606.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131606.free_mem_122992 = mem_122992;
        futhark_mc_task_131606.free_mem_122995 = mem_122995;
        
        struct scheduler_segop futhark_mc_task_131606_task;
        
        futhark_mc_task_131606_task.args = &futhark_mc_task_131606;
        futhark_mc_task_131606_task.top_level_fn =
            futhark_mc_segmap_task_131607;
        futhark_mc_task_131606_task.name = "futhark_mc_segmap_task_131607";
        futhark_mc_task_131606_task.iterations = t_n_m_114575;
        futhark_mc_task_131606_task.task_time =
            &ctx->futhark_mc_segmap_task_131607_total_time;
        futhark_mc_task_131606_task.task_iter =
            &ctx->futhark_mc_segmap_task_131607_total_iter;
        futhark_mc_task_131606_task.sched = STATIC;
        futhark_mc_task_131606_task.nested_fn =
            futhark_mc_segmap_nested_task_131610;
        
        int futhark_mc_segmap_task_131607_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131606_task);
        
        if (futhark_mc_segmap_task_131607_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123029.mem + gtid_119539 * t_n_m_114575 * (int64_t) 4,
                mem_122992 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123033.mem + gtid_119539 * t_n_m_114575 * (int64_t) 4,
                mem_122995 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122992);
    free(mem_122995);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131603_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131603_end -
                 futhark_mc_segmap_parloop_131603_start;
        
        ctx->futhark_mc_segmap_parloop_131603_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131603_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131603_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131601(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119538 = tid;
    int num_tasks_128352 = info.nsubtasks;
    struct futhark_mc_task_131595 *futhark_mc_task_131595 =
                                  (struct futhark_mc_task_131595 *) args;
    struct futhark_context *ctx = futhark_mc_task_131595->ctx;
    uint64_t futhark_mc_segmap_nested_task_131601_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131601_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131595->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131595->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131595->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131595->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131595->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131595->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131595->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131595->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131595->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131595->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131595->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131595->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131595->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123029 = {.desc ="mem_123029", .mem =
                                  futhark_mc_task_131595->free_mem_123029,
                                  .size =0, .references =NULL};
    struct memblock mem_123033 = {.desc ="mem_123033", .mem =
                                  futhark_mc_task_131595->free_mem_123033,
                                  .size =0, .references =NULL};
    int64_t iter_128446;
    struct futhark_mc_segmap_parloop_struct_131602
    futhark_mc_segmap_parloop_struct_131602;
    
    futhark_mc_segmap_parloop_struct_131602.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131602.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131602.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131602.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131602.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131602.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131602.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131602.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131602.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131602.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131602.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131602.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131602.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131602.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131602.free_mem_123029 = mem_123029.mem;
    futhark_mc_segmap_parloop_struct_131602.free_mem_123033 = mem_123033.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131603_task;
    
    futhark_mc_segmap_parloop_131603_task.name =
        "futhark_mc_segmap_parloop_131603";
    futhark_mc_segmap_parloop_131603_task.fn = futhark_mc_segmap_parloop_131603;
    futhark_mc_segmap_parloop_131603_task.args =
        &futhark_mc_segmap_parloop_struct_131602;
    futhark_mc_segmap_parloop_131603_task.iterations = iterations;
    futhark_mc_segmap_parloop_131603_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131603_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131603_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131603_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131603_task);
    
    if (futhark_mc_segmap_parloop_131603_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131603_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131603_total_end -
                 futhark_mc_segmap_parloop_131603_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131603_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131603_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131603_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131601_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131601_end -
                 futhark_mc_segmap_nested_task_131601_start;
        
        ctx->futhark_mc_segmap_nested_task_131601_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131601_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131601_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131626 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123073;
    char *free_mem_123077;
};
struct futhark_mc_segmap_parloop_struct_131628 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123073;
    char *free_mem_123077;
};
static int futhark_mc_segmap_parloop_131629(void *args, int64_t start,
                                            int64_t end, int flat_tid_119808,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131628
    *futhark_mc_segmap_parloop_struct_131628 =
    (struct futhark_mc_segmap_parloop_struct_131628 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131628->ctx;
    uint64_t futhark_mc_segmap_parloop_131629_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131629_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131628->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131628->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131628->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131628->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131628->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131628->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131628->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123073 = {.desc ="mem_123073", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_123073,
                                  .size =0, .references =NULL};
    struct memblock mem_123077 = {.desc ="mem_123077", .mem =
                                  futhark_mc_segmap_parloop_struct_131628->free_mem_123077,
                                  .size =0, .references =NULL};
    size_t mem_123042_cached_sizze_131630 = 0;
    char *mem_123042 = NULL;
    size_t mem_123045_cached_sizze_131631 = 0;
    char *mem_123045 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128780 = start;
    
    if (mem_123042_cached_sizze_131630 < (size_t) bytes_122113) {
        mem_123042 = realloc(mem_123042, bytes_122113);
        mem_123042_cached_sizze_131630 = bytes_122113;
    }
    if (mem_123045_cached_sizze_131631 < (size_t) bytes_122113) {
        mem_123045 = realloc(mem_123045, bytes_122113);
        mem_123045_cached_sizze_131631 = bytes_122113;
    }
    for (; iter_128780 < end; iter_128780++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128894 = m_114517;
        int64_t gtid_119809 = iter_128780;
        int64_t remnant_128895 = iter_128780 - gtid_119809;
        int64_t x_116047 = ((int64_t *) mem_121960.mem)[gtid_119809];
        
        for (int64_t i_128781 = 0; i_128781 < t_n_m_114575; i_128781++) {
            int64_t x_128784 = ((int64_t *) mem_122182.mem)[gtid_119809 *
                                                            t_n_m_114575 +
                                                            i_128781];
            float x_128785 = ((float *) mem_122186.mem)[gtid_119809 *
                                                        t_n_m_114575 +
                                                        i_128781];
            int64_t min_arg_128786 = mul64(t_jump_114525, i_128781);
            int64_t min_res_128787 = smin64(i_114594, min_arg_128786);
            float defunc_0_f_res_128788 = sitofp_i64_f32(min_res_128787);
            float defunc_2_reduce_res_128789;
            float defunc_2_reduce_res_128790;
            float defunc_2_reduce_res_128791;
            float defunc_2_reduce_res_128792;
            float defunc_2_reduce_res_128793;
            float redout_128795;
            float redout_128796;
            float redout_128797;
            float redout_128798;
            float redout_128799;
            
            redout_128795 = 0.0F;
            redout_128796 = 0.0F;
            redout_128797 = 0.0F;
            redout_128798 = 0.0F;
            redout_128799 = 0.0F;
            for (int64_t i_128794 = 0; i_128794 < t_window_114521; i_128794++) {
                bool cond_128800 = sle64(x_116047, i_128794);
                float defunc_0_f_res_128801;
                
                if (cond_128800) {
                    defunc_0_f_res_128801 = 0.0F;
                } else {
                    int64_t i_128802 = add64(x_128784, i_128794);
                    float x_128803 = ((float *) mem_121982.mem)[gtid_119809 *
                                                                n_114518 +
                                                                i_128802];
                    float defunc_0_f_res_f_res_128804 = 1.0F + x_128803;
                    
                    defunc_0_f_res_128801 = defunc_0_f_res_f_res_128804;
                }
                
                float defunc_0_f_res_128805;
                
                if (cond_128800) {
                    defunc_0_f_res_128805 = 0.0F;
                } else {
                    int64_t i_128806 = add64(x_128784, i_128794);
                    float x_128807 = ((float *) mem_122408.mem)[gtid_119809 *
                                                                n_114518 +
                                                                i_128806];
                    
                    defunc_0_f_res_128805 = x_128807;
                }
                
                float x_j_128808 = defunc_0_f_res_128801 -
                      defunc_0_f_res_128788;
                float abs_res_128809 = (float) fabs(x_j_128808);
                float tmp1_128810 = abs_res_128809 / x_128785;
                float x_128811 = tmp1_128810 * tmp1_128810;
                float y_128812 = tmp1_128810 * x_128811;
                float tmp2_128813 = 1.0F - y_128812;
                float x_128814 = tmp2_128813 * tmp2_128813;
                float tmp3_128815 = tmp2_128813 * x_128814;
                float w_j_128816 = defunc_0_f_res_128805 * tmp3_128815;
                float xw_j_128817 = x_j_128808 * w_j_128816;
                float x2w_j_128818 = x_j_128808 * xw_j_128817;
                float x3w_j_128819 = x_j_128808 * x2w_j_128818;
                float x4w_j_128820 = x_j_128808 * x3w_j_128819;
                float defunc_1_op_res_128821 = w_j_128816 + redout_128795;
                float defunc_1_op_res_128822 = xw_j_128817 + redout_128796;
                float defunc_1_op_res_128823 = x2w_j_128818 + redout_128797;
                float defunc_1_op_res_128824 = x3w_j_128819 + redout_128798;
                float defunc_1_op_res_128825 = x4w_j_128820 + redout_128799;
                float redout_tmp_128898 = defunc_1_op_res_128821;
                float redout_tmp_128899 = defunc_1_op_res_128822;
                float redout_tmp_128900 = defunc_1_op_res_128823;
                float redout_tmp_128901 = defunc_1_op_res_128824;
                float redout_tmp_128902 = defunc_1_op_res_128825;
                
                redout_128795 = redout_tmp_128898;
                redout_128796 = redout_tmp_128899;
                redout_128797 = redout_tmp_128900;
                redout_128798 = redout_tmp_128901;
                redout_128799 = redout_tmp_128902;
            }
            defunc_2_reduce_res_128789 = redout_128795;
            defunc_2_reduce_res_128790 = redout_128796;
            defunc_2_reduce_res_128791 = redout_128797;
            defunc_2_reduce_res_128792 = redout_128798;
            defunc_2_reduce_res_128793 = redout_128799;
            
            float x_128826 = defunc_2_reduce_res_128791 *
                  defunc_2_reduce_res_128793;
            float y_128827 = defunc_2_reduce_res_128792 *
                  defunc_2_reduce_res_128792;
            float a12_128828 = x_128826 - y_128827;
            float x_128829 = defunc_2_reduce_res_128791 *
                  defunc_2_reduce_res_128792;
            float y_128830 = defunc_2_reduce_res_128790 *
                  defunc_2_reduce_res_128793;
            float b12_128831 = x_128829 - y_128830;
            float x_128832 = defunc_2_reduce_res_128790 *
                  defunc_2_reduce_res_128792;
            float y_128833 = defunc_2_reduce_res_128791 *
                  defunc_2_reduce_res_128791;
            float c12_128834 = x_128832 - y_128833;
            float x_128835 = defunc_2_reduce_res_128789 *
                  defunc_2_reduce_res_128793;
            float b2_128836 = x_128835 - y_128833;
            float x_128837 = defunc_2_reduce_res_128790 *
                  defunc_2_reduce_res_128791;
            float y_128838 = defunc_2_reduce_res_128789 *
                  defunc_2_reduce_res_128792;
            float c2_128839 = x_128837 - y_128838;
            float x_128840 = defunc_2_reduce_res_128789 * a12_128828;
            float y_128841 = defunc_2_reduce_res_128790 * b12_128831;
            float x_128842 = x_128840 + y_128841;
            float y_128843 = defunc_2_reduce_res_128791 * c12_128834;
            float y_128844 = x_128842 + y_128843;
            float det_128845 = 1.0F / y_128844;
            float a12_128846 = a12_128828 * det_128845;
            float b12_128847 = b12_128831 * det_128845;
            float c12_128848 = c12_128834 * det_128845;
            float b2_128849 = b2_128836 * det_128845;
            float c2_128850 = c2_128839 * det_128845;
            float defunc_2_reduce_res_128851;
            float defunc_2_reduce_res_128852;
            float redout_128854;
            float redout_128855;
            
            redout_128854 = 0.0F;
            redout_128855 = 0.0F;
            for (int64_t i_128853 = 0; i_128853 < t_window_114521; i_128853++) {
                bool cond_128856 = sle64(x_116047, i_128853);
                float defunc_0_f_res_128857;
                
                if (cond_128856) {
                    defunc_0_f_res_128857 = 0.0F;
                } else {
                    int64_t i_128858 = add64(x_128784, i_128853);
                    float x_128859 = ((float *) mem_121982.mem)[gtid_119809 *
                                                                n_114518 +
                                                                i_128858];
                    float defunc_0_f_res_f_res_128860 = 1.0F + x_128859;
                    
                    defunc_0_f_res_128857 = defunc_0_f_res_f_res_128860;
                }
                
                float defunc_0_f_res_128861;
                
                if (cond_128856) {
                    defunc_0_f_res_128861 = 0.0F;
                } else {
                    int64_t i_128862 = add64(x_128784, i_128853);
                    float x_128863 = ((float *) mem_122408.mem)[gtid_119809 *
                                                                n_114518 +
                                                                i_128862];
                    
                    defunc_0_f_res_128861 = x_128863;
                }
                
                float x_j_128864 = defunc_0_f_res_128857 -
                      defunc_0_f_res_128788;
                float abs_res_128865 = (float) fabs(x_j_128864);
                float tmp1_128866 = abs_res_128865 / x_128785;
                float x_128867 = tmp1_128866 * tmp1_128866;
                float y_128868 = tmp1_128866 * x_128867;
                float tmp2_128869 = 1.0F - y_128868;
                float x_128870 = tmp2_128869 * tmp2_128869;
                float tmp3_128871 = tmp2_128869 * x_128870;
                float tmp4_128872 = defunc_0_f_res_128861 * tmp3_128871;
                float defunc_1_f_res_128873 = x_j_128864 * tmp4_128872;
                float defunc_1_f_res_128874 = x_j_128864 *
                      defunc_1_f_res_128873;
                float defunc_0_f_res_128875;
                
                if (cond_128856) {
                    defunc_0_f_res_128875 = 0.0F;
                } else {
                    int64_t i_128876 = add64(x_128784, i_128853);
                    float x_128877 = ((float *) mem_122959.mem)[gtid_119809 *
                                                                n_114518 +
                                                                i_128876];
                    
                    defunc_0_f_res_128875 = x_128877;
                }
                
                float x_128878 = a12_128846 * tmp4_128872;
                float y_128879 = b12_128847 * defunc_1_f_res_128873;
                float x_128880 = x_128878 + y_128879;
                float y_128881 = c12_128848 * defunc_1_f_res_128874;
                float x_128882 = x_128880 + y_128881;
                float defunc_9_fit_fun_res_128883 = defunc_0_f_res_128875 *
                      x_128882;
                float x_128884 = b12_128847 * tmp4_128872;
                float y_128885 = b2_128849 * defunc_1_f_res_128873;
                float x_128886 = x_128884 + y_128885;
                float y_128887 = c2_128850 * defunc_1_f_res_128874;
                float x_128888 = x_128886 + y_128887;
                float defunc_9_slope_fun_res_128889 = defunc_0_f_res_128875 *
                      x_128888;
                float defunc_1_op_res_128890 = defunc_9_fit_fun_res_128883 +
                      redout_128854;
                float defunc_1_op_res_128891 = defunc_9_slope_fun_res_128889 +
                      redout_128855;
                float redout_tmp_128903 = defunc_1_op_res_128890;
                float redout_tmp_128904 = defunc_1_op_res_128891;
                
                redout_128854 = redout_tmp_128903;
                redout_128855 = redout_tmp_128904;
            }
            defunc_2_reduce_res_128851 = redout_128854;
            defunc_2_reduce_res_128852 = redout_128855;
            ((float *) mem_123042)[i_128781] = defunc_2_reduce_res_128851;
            ((float *) mem_123045)[i_128781] = defunc_2_reduce_res_128852;
        }
        memmove(mem_123073.mem + gtid_119809 * t_n_m_114575 * (int64_t) 4,
                mem_123042 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123077.mem + gtid_119809 * t_n_m_114575 * (int64_t) 4,
                mem_123045 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123042);
    free(mem_123045);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131629_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131629_end -
                 futhark_mc_segmap_parloop_131629_start;
        
        ctx->futhark_mc_segmap_parloop_131629_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131629_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131629_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131627(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119808 = tid;
    int num_tasks_128779 = info.nsubtasks;
    struct futhark_mc_task_131626 *futhark_mc_task_131626 =
                                  (struct futhark_mc_task_131626 *) args;
    struct futhark_context *ctx = futhark_mc_task_131626->ctx;
    uint64_t futhark_mc_segmap_task_131627_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131627_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131626->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131626->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131626->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131626->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131626->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131626->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131626->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131626->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131626->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131626->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131626->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131626->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131626->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123073 = {.desc ="mem_123073", .mem =
                                  futhark_mc_task_131626->free_mem_123073,
                                  .size =0, .references =NULL};
    struct memblock mem_123077 = {.desc ="mem_123077", .mem =
                                  futhark_mc_task_131626->free_mem_123077,
                                  .size =0, .references =NULL};
    int64_t iter_128780;
    struct futhark_mc_segmap_parloop_struct_131628
    futhark_mc_segmap_parloop_struct_131628;
    
    futhark_mc_segmap_parloop_struct_131628.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131628.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131628.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131628.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131628.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131628.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131628.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131628.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131628.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131628.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131628.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131628.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131628.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131628.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131628.free_mem_123073 = mem_123073.mem;
    futhark_mc_segmap_parloop_struct_131628.free_mem_123077 = mem_123077.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131629_task;
    
    futhark_mc_segmap_parloop_131629_task.name =
        "futhark_mc_segmap_parloop_131629";
    futhark_mc_segmap_parloop_131629_task.fn = futhark_mc_segmap_parloop_131629;
    futhark_mc_segmap_parloop_131629_task.args =
        &futhark_mc_segmap_parloop_struct_131628;
    futhark_mc_segmap_parloop_131629_task.iterations = iterations;
    futhark_mc_segmap_parloop_131629_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131629_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131629_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131629_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131629_task);
    
    if (futhark_mc_segmap_parloop_131629_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131629_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131629_total_end -
                 futhark_mc_segmap_parloop_131629_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131629_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131629_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131629_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131627_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131627_end -
                 futhark_mc_segmap_task_131627_start;
        
        ctx->futhark_mc_segmap_task_131627_runs[tid]++;
        ctx->futhark_mc_segmap_task_131627_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131627_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131633 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123073;
    char *free_mem_123077;
};
struct futhark_mc_task_131637 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123036;
    char *free_mem_123039;
};
struct futhark_mc_segmap_parloop_struct_131639 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123036;
    char *free_mem_123039;
};
static int futhark_mc_segmap_parloop_131640(void *args, int64_t start,
                                            int64_t end, int flat_tid_119812,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131639
    *futhark_mc_segmap_parloop_struct_131639 =
    (struct futhark_mc_segmap_parloop_struct_131639 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131639->ctx;
    uint64_t futhark_mc_segmap_parloop_131640_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131640_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131639->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131639->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131639->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131639->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131639->free_i_114594;
    int64_t gtid_119811 =
            futhark_mc_segmap_parloop_struct_131639->free_gtid_119811;
    int64_t x_119941 = futhark_mc_segmap_parloop_struct_131639->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123036 = {.desc ="mem_123036", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_123036,
                                  .size =0, .references =NULL};
    struct memblock mem_123039 = {.desc ="mem_123039", .mem =
                                  futhark_mc_segmap_parloop_struct_131639->free_mem_123039,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129130 = start;
    
    for (; iter_129130 < end; iter_129130++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129202 = t_n_m_114575;
        int64_t gtid_119813 = iter_129130;
        int64_t remnant_129203 = iter_129130 - gtid_119813;
        int64_t x_129019 = ((int64_t *) mem_122182.mem)[gtid_119811 *
                                                        t_n_m_114575 +
                                                        gtid_119813];
        float x_129020 = ((float *) mem_122186.mem)[gtid_119811 * t_n_m_114575 +
                                                    gtid_119813];
        int64_t min_arg_129021 = mul64(t_jump_114525, gtid_119813);
        int64_t min_res_129022 = smin64(i_114594, min_arg_129021);
        float defunc_0_f_res_129023 = sitofp_i64_f32(min_res_129022);
        float defunc_2_reduce_res_129024;
        float defunc_2_reduce_res_129025;
        float defunc_2_reduce_res_129026;
        float defunc_2_reduce_res_129027;
        float defunc_2_reduce_res_129028;
        float redout_129132;
        float redout_129133;
        float redout_129134;
        float redout_129135;
        float redout_129136;
        
        redout_129132 = 0.0F;
        redout_129133 = 0.0F;
        redout_129134 = 0.0F;
        redout_129135 = 0.0F;
        redout_129136 = 0.0F;
        for (int64_t i_129131 = 0; i_129131 < t_window_114521; i_129131++) {
            bool cond_129137 = sle64(x_119941, i_129131);
            float defunc_0_f_res_129138;
            
            if (cond_129137) {
                defunc_0_f_res_129138 = 0.0F;
            } else {
                int64_t i_129139 = add64(x_129019, i_129131);
                float x_129140 = ((float *) mem_121982.mem)[gtid_119811 *
                                                            n_114518 +
                                                            i_129139];
                float defunc_0_f_res_f_res_129141 = 1.0F + x_129140;
                
                defunc_0_f_res_129138 = defunc_0_f_res_f_res_129141;
            }
            
            float defunc_0_f_res_129142;
            
            if (cond_129137) {
                defunc_0_f_res_129142 = 0.0F;
            } else {
                int64_t i_129143 = add64(x_129019, i_129131);
                float x_129144 = ((float *) mem_122408.mem)[gtid_119811 *
                                                            n_114518 +
                                                            i_129143];
                
                defunc_0_f_res_129142 = x_129144;
            }
            
            float x_j_129145 = defunc_0_f_res_129138 - defunc_0_f_res_129023;
            float abs_res_129146 = (float) fabs(x_j_129145);
            float tmp1_129147 = abs_res_129146 / x_129020;
            float x_129148 = tmp1_129147 * tmp1_129147;
            float y_129149 = tmp1_129147 * x_129148;
            float tmp2_129150 = 1.0F - y_129149;
            float x_129151 = tmp2_129150 * tmp2_129150;
            float tmp3_129152 = tmp2_129150 * x_129151;
            float w_j_129153 = defunc_0_f_res_129142 * tmp3_129152;
            float xw_j_129154 = x_j_129145 * w_j_129153;
            float x2w_j_129155 = x_j_129145 * xw_j_129154;
            float x3w_j_129156 = x_j_129145 * x2w_j_129155;
            float x4w_j_129157 = x_j_129145 * x3w_j_129156;
            float defunc_1_op_res_129158 = w_j_129153 + redout_129132;
            float defunc_1_op_res_129159 = xw_j_129154 + redout_129133;
            float defunc_1_op_res_129160 = x2w_j_129155 + redout_129134;
            float defunc_1_op_res_129161 = x3w_j_129156 + redout_129135;
            float defunc_1_op_res_129162 = x4w_j_129157 + redout_129136;
            float redout_tmp_129204 = defunc_1_op_res_129158;
            float redout_tmp_129205 = defunc_1_op_res_129159;
            float redout_tmp_129206 = defunc_1_op_res_129160;
            float redout_tmp_129207 = defunc_1_op_res_129161;
            float redout_tmp_129208 = defunc_1_op_res_129162;
            
            redout_129132 = redout_tmp_129204;
            redout_129133 = redout_tmp_129205;
            redout_129134 = redout_tmp_129206;
            redout_129135 = redout_tmp_129207;
            redout_129136 = redout_tmp_129208;
        }
        defunc_2_reduce_res_129024 = redout_129132;
        defunc_2_reduce_res_129025 = redout_129133;
        defunc_2_reduce_res_129026 = redout_129134;
        defunc_2_reduce_res_129027 = redout_129135;
        defunc_2_reduce_res_129028 = redout_129136;
        
        float x_129061 = defunc_2_reduce_res_129026 *
              defunc_2_reduce_res_129028;
        float y_129062 = defunc_2_reduce_res_129027 *
              defunc_2_reduce_res_129027;
        float a12_129063 = x_129061 - y_129062;
        float x_129064 = defunc_2_reduce_res_129026 *
              defunc_2_reduce_res_129027;
        float y_129065 = defunc_2_reduce_res_129025 *
              defunc_2_reduce_res_129028;
        float b12_129066 = x_129064 - y_129065;
        float x_129067 = defunc_2_reduce_res_129025 *
              defunc_2_reduce_res_129027;
        float y_129068 = defunc_2_reduce_res_129026 *
              defunc_2_reduce_res_129026;
        float c12_129069 = x_129067 - y_129068;
        float x_129070 = defunc_2_reduce_res_129024 *
              defunc_2_reduce_res_129028;
        float b2_129071 = x_129070 - y_129068;
        float x_129072 = defunc_2_reduce_res_129025 *
              defunc_2_reduce_res_129026;
        float y_129073 = defunc_2_reduce_res_129024 *
              defunc_2_reduce_res_129027;
        float c2_129074 = x_129072 - y_129073;
        float x_129075 = defunc_2_reduce_res_129024 * a12_129063;
        float y_129076 = defunc_2_reduce_res_129025 * b12_129066;
        float x_129077 = x_129075 + y_129076;
        float y_129078 = defunc_2_reduce_res_129026 * c12_129069;
        float y_129079 = x_129077 + y_129078;
        float det_129080 = 1.0F / y_129079;
        float a12_129081 = a12_129063 * det_129080;
        float b12_129082 = b12_129066 * det_129080;
        float c12_129083 = c12_129069 * det_129080;
        float b2_129084 = b2_129071 * det_129080;
        float c2_129085 = c2_129074 * det_129080;
        float defunc_2_reduce_res_129086;
        float defunc_2_reduce_res_129087;
        float redout_129164;
        float redout_129165;
        
        redout_129164 = 0.0F;
        redout_129165 = 0.0F;
        for (int64_t i_129163 = 0; i_129163 < t_window_114521; i_129163++) {
            bool cond_129166 = sle64(x_119941, i_129163);
            float defunc_0_f_res_129167;
            
            if (cond_129166) {
                defunc_0_f_res_129167 = 0.0F;
            } else {
                int64_t i_129168 = add64(x_129019, i_129163);
                float x_129169 = ((float *) mem_121982.mem)[gtid_119811 *
                                                            n_114518 +
                                                            i_129168];
                float defunc_0_f_res_f_res_129170 = 1.0F + x_129169;
                
                defunc_0_f_res_129167 = defunc_0_f_res_f_res_129170;
            }
            
            float defunc_0_f_res_129171;
            
            if (cond_129166) {
                defunc_0_f_res_129171 = 0.0F;
            } else {
                int64_t i_129172 = add64(x_129019, i_129163);
                float x_129173 = ((float *) mem_122408.mem)[gtid_119811 *
                                                            n_114518 +
                                                            i_129172];
                
                defunc_0_f_res_129171 = x_129173;
            }
            
            float x_j_129174 = defunc_0_f_res_129167 - defunc_0_f_res_129023;
            float abs_res_129175 = (float) fabs(x_j_129174);
            float tmp1_129176 = abs_res_129175 / x_129020;
            float x_129177 = tmp1_129176 * tmp1_129176;
            float y_129178 = tmp1_129176 * x_129177;
            float tmp2_129179 = 1.0F - y_129178;
            float x_129180 = tmp2_129179 * tmp2_129179;
            float tmp3_129181 = tmp2_129179 * x_129180;
            float tmp4_129182 = defunc_0_f_res_129171 * tmp3_129181;
            float defunc_1_f_res_129183 = x_j_129174 * tmp4_129182;
            float defunc_1_f_res_129184 = x_j_129174 * defunc_1_f_res_129183;
            float defunc_0_f_res_129185;
            
            if (cond_129166) {
                defunc_0_f_res_129185 = 0.0F;
            } else {
                int64_t i_129186 = add64(x_129019, i_129163);
                float x_129187 = ((float *) mem_122959.mem)[gtid_119811 *
                                                            n_114518 +
                                                            i_129186];
                
                defunc_0_f_res_129185 = x_129187;
            }
            
            float x_129188 = a12_129081 * tmp4_129182;
            float y_129189 = b12_129082 * defunc_1_f_res_129183;
            float x_129190 = x_129188 + y_129189;
            float y_129191 = c12_129083 * defunc_1_f_res_129184;
            float x_129192 = x_129190 + y_129191;
            float defunc_9_fit_fun_res_129193 = defunc_0_f_res_129185 *
                  x_129192;
            float x_129194 = b12_129082 * tmp4_129182;
            float y_129195 = b2_129084 * defunc_1_f_res_129183;
            float x_129196 = x_129194 + y_129195;
            float y_129197 = c2_129085 * defunc_1_f_res_129184;
            float x_129198 = x_129196 + y_129197;
            float defunc_9_slope_fun_res_129199 = defunc_0_f_res_129185 *
                  x_129198;
            float defunc_1_op_res_129200 = defunc_9_fit_fun_res_129193 +
                  redout_129164;
            float defunc_1_op_res_129201 = defunc_9_slope_fun_res_129199 +
                  redout_129165;
            float redout_tmp_129209 = defunc_1_op_res_129200;
            float redout_tmp_129210 = defunc_1_op_res_129201;
            
            redout_129164 = redout_tmp_129209;
            redout_129165 = redout_tmp_129210;
        }
        defunc_2_reduce_res_129086 = redout_129164;
        defunc_2_reduce_res_129087 = redout_129165;
        ((float *) mem_123036.mem)[gtid_119813] = defunc_2_reduce_res_129086;
        ((float *) mem_123039.mem)[gtid_119813] = defunc_2_reduce_res_129087;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131640_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131640_end -
                 futhark_mc_segmap_parloop_131640_start;
        
        ctx->futhark_mc_segmap_parloop_131640_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131640_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131640_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131638(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119812 = tid;
    int num_tasks_129129 = info.nsubtasks;
    struct futhark_mc_task_131637 *futhark_mc_task_131637 =
                                  (struct futhark_mc_task_131637 *) args;
    struct futhark_context *ctx = futhark_mc_task_131637->ctx;
    uint64_t futhark_mc_segmap_task_131638_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131638_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131637->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131637->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131637->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131637->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131637->free_i_114594;
    int64_t gtid_119811 = futhark_mc_task_131637->free_gtid_119811;
    int64_t x_119941 = futhark_mc_task_131637->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131637->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131637->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131637->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131637->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131637->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123036 = {.desc ="mem_123036", .mem =
                                  futhark_mc_task_131637->free_mem_123036,
                                  .size =0, .references =NULL};
    struct memblock mem_123039 = {.desc ="mem_123039", .mem =
                                  futhark_mc_task_131637->free_mem_123039,
                                  .size =0, .references =NULL};
    int64_t iter_129130;
    struct futhark_mc_segmap_parloop_struct_131639
    futhark_mc_segmap_parloop_struct_131639;
    
    futhark_mc_segmap_parloop_struct_131639.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131639.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131639.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131639.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131639.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131639.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131639.free_gtid_119811 = gtid_119811;
    futhark_mc_segmap_parloop_struct_131639.free_x_119941 = x_119941;
    futhark_mc_segmap_parloop_struct_131639.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131639.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131639.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131639.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131639.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131639.free_mem_123036 = mem_123036.mem;
    futhark_mc_segmap_parloop_struct_131639.free_mem_123039 = mem_123039.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131640_task;
    
    futhark_mc_segmap_parloop_131640_task.name =
        "futhark_mc_segmap_parloop_131640";
    futhark_mc_segmap_parloop_131640_task.fn = futhark_mc_segmap_parloop_131640;
    futhark_mc_segmap_parloop_131640_task.args =
        &futhark_mc_segmap_parloop_struct_131639;
    futhark_mc_segmap_parloop_131640_task.iterations = iterations;
    futhark_mc_segmap_parloop_131640_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131640_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131640_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131640_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131640_task);
    
    if (futhark_mc_segmap_parloop_131640_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131640_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131640_total_end -
                 futhark_mc_segmap_parloop_131640_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131640_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131640_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131640_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131638_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131638_end -
                 futhark_mc_segmap_task_131638_start;
        
        ctx->futhark_mc_segmap_task_131638_runs[tid]++;
        ctx->futhark_mc_segmap_task_131638_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131638_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131642 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    char *free_mem_123036;
    char *free_mem_123039;
};
struct futhark_mc_task_131644 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_128906;
    float free_x_128907;
    float free_defunc_0_f_res_128910;
    float *retval_defunc_2_reduce_res_128911;
    float *retval_defunc_2_reduce_res_128912;
    float *retval_defunc_2_reduce_res_128913;
    float *retval_defunc_2_reduce_res_128914;
    float *retval_defunc_2_reduce_res_128915;
};
struct futhark_mc_segred_stage_1_parloop_struct_131651 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_128906;
    float free_x_128907;
    float free_defunc_0_f_res_128910;
    char *free_reduce_stage_1_tid_res_arr_mem_129291;
    char *free_reduce_stage_1_tid_res_arr_mem_129293;
    char *free_reduce_stage_1_tid_res_arr_mem_129295;
    char *free_reduce_stage_1_tid_res_arr_mem_129297;
    char *free_reduce_stage_1_tid_res_arr_mem_129299;
};
static int futhark_mc_segred_stage_1_parloop_131652(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119816,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131651
    *futhark_mc_segred_stage_1_parloop_struct_131651 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131651 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131651->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131652_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131652_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131651->free_n_114518;
    int64_t gtid_119811 =
            futhark_mc_segred_stage_1_parloop_struct_131651->free_gtid_119811;
    int64_t x_119941 =
            futhark_mc_segred_stage_1_parloop_struct_131651->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131651->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131651->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_128906 =
            futhark_mc_segred_stage_1_parloop_struct_131651->free_x_128906;
    float x_128907 =
          futhark_mc_segred_stage_1_parloop_struct_131651->free_x_128907;
    float defunc_0_f_res_128910 =
          futhark_mc_segred_stage_1_parloop_struct_131651->free_defunc_0_f_res_128910;
    struct memblock reduce_stage_1_tid_res_arr_mem_129291 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129291",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131651->free_reduce_stage_1_tid_res_arr_mem_129291,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129293 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129293",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131651->free_reduce_stage_1_tid_res_arr_mem_129293,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129295 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129295",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131651->free_reduce_stage_1_tid_res_arr_mem_129295,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129297 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129297",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131651->free_reduce_stage_1_tid_res_arr_mem_129297,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129299 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129299",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131651->free_reduce_stage_1_tid_res_arr_mem_129299,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129301 = start;
    float x_129212;
    float x_129213;
    float x_129215;
    float x_129216;
    float x_129218;
    float x_129219;
    float x_129221;
    float x_129222;
    float x_129224;
    float x_129225;
    float local_acc_129302 = 0.0F;
    float local_acc_129303 = 0.0F;
    float local_acc_129304 = 0.0F;
    float local_acc_129305 = 0.0F;
    float local_acc_129306 = 0.0F;
    
    for (; iter_129301 < end; iter_129301++) {
        int64_t gtid_119817 = iter_129301;
        bool cond_129227 = sle64(x_119941, gtid_119817);
        float defunc_0_f_res_129228;
        
        if (cond_129227) {
            defunc_0_f_res_129228 = 0.0F;
        } else {
            int64_t i_129229 = add64(gtid_119817, x_128906);
            float x_129230 = ((float *) mem_121982.mem)[gtid_119811 * n_114518 +
                                                        i_129229];
            float defunc_0_f_res_f_res_129231 = 1.0F + x_129230;
            
            defunc_0_f_res_129228 = defunc_0_f_res_f_res_129231;
        }
        
        float defunc_0_f_res_129232;
        
        if (cond_129227) {
            defunc_0_f_res_129232 = 0.0F;
        } else {
            int64_t i_129233 = add64(gtid_119817, x_128906);
            float x_129234 = ((float *) mem_122408.mem)[gtid_119811 * n_114518 +
                                                        i_129233];
            
            defunc_0_f_res_129232 = x_129234;
        }
        
        float x_j_129235 = defunc_0_f_res_129228 - defunc_0_f_res_128910;
        float abs_res_129236 = (float) fabs(x_j_129235);
        float tmp1_129237 = abs_res_129236 / x_128907;
        float x_129238 = tmp1_129237 * tmp1_129237;
        float y_129239 = tmp1_129237 * x_129238;
        float tmp2_129240 = 1.0F - y_129239;
        float x_129241 = tmp2_129240 * tmp2_129240;
        float tmp3_129242 = tmp2_129240 * x_129241;
        float w_j_129243 = defunc_0_f_res_129232 * tmp3_129242;
        float xw_j_129244 = x_j_129235 * w_j_129243;
        float x2w_j_129245 = x_j_129235 * xw_j_129244;
        float x3w_j_129246 = x_j_129235 * x2w_j_129245;
        float x4w_j_129247 = x_j_129235 * x3w_j_129246;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129212 = local_acc_129302;
        }
        // Load next params
        {
            x_129213 = w_j_129243;
        }
        // Red body
        {
            float defunc_1_op_res_129214 = x_129212 + x_129213;
            
            local_acc_129302 = defunc_1_op_res_129214;
        }
        // Load accum params
        {
            x_129215 = local_acc_129303;
        }
        // Load next params
        {
            x_129216 = xw_j_129244;
        }
        // Red body
        {
            float defunc_1_op_res_129217 = x_129215 + x_129216;
            
            local_acc_129303 = defunc_1_op_res_129217;
        }
        // Load accum params
        {
            x_129218 = local_acc_129304;
        }
        // Load next params
        {
            x_129219 = x2w_j_129245;
        }
        // Red body
        {
            float defunc_1_op_res_129220 = x_129218 + x_129219;
            
            local_acc_129304 = defunc_1_op_res_129220;
        }
        // Load accum params
        {
            x_129221 = local_acc_129305;
        }
        // Load next params
        {
            x_129222 = x3w_j_129246;
        }
        // Red body
        {
            float defunc_1_op_res_129223 = x_129221 + x_129222;
            
            local_acc_129305 = defunc_1_op_res_129223;
        }
        // Load accum params
        {
            x_129224 = local_acc_129306;
        }
        // Load next params
        {
            x_129225 = x4w_j_129247;
        }
        // Red body
        {
            float defunc_1_op_res_129226 = x_129224 + x_129225;
            
            local_acc_129306 = defunc_1_op_res_129226;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129291.mem)[flat_tid_119816] =
        local_acc_129302;
    ((float *) reduce_stage_1_tid_res_arr_mem_129293.mem)[flat_tid_119816] =
        local_acc_129303;
    ((float *) reduce_stage_1_tid_res_arr_mem_129295.mem)[flat_tid_119816] =
        local_acc_129304;
    ((float *) reduce_stage_1_tid_res_arr_mem_129297.mem)[flat_tid_119816] =
        local_acc_129305;
    ((float *) reduce_stage_1_tid_res_arr_mem_129299.mem)[flat_tid_119816] =
        local_acc_129306;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131652_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131652_end -
                 futhark_mc_segred_stage_1_parloop_131652_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131652_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131652_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131652_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131645(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119816 = tid;
    int num_tasks_129290 = info.nsubtasks;
    struct futhark_mc_task_131644 *futhark_mc_task_131644 =
                                  (struct futhark_mc_task_131644 *) args;
    struct futhark_context *ctx = futhark_mc_task_131644->ctx;
    uint64_t futhark_mc_segred_task_131645_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131645_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131644->free_n_114518;
    int64_t gtid_119811 = futhark_mc_task_131644->free_gtid_119811;
    int64_t x_119941 = futhark_mc_task_131644->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131644->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131644->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_128906 = futhark_mc_task_131644->free_x_128906;
    float x_128907 = futhark_mc_task_131644->free_x_128907;
    float defunc_0_f_res_128910 =
          futhark_mc_task_131644->free_defunc_0_f_res_128910;
    float defunc_2_reduce_res_128911 =
          *futhark_mc_task_131644->retval_defunc_2_reduce_res_128911;
    float defunc_2_reduce_res_128912 =
          *futhark_mc_task_131644->retval_defunc_2_reduce_res_128912;
    float defunc_2_reduce_res_128913 =
          *futhark_mc_task_131644->retval_defunc_2_reduce_res_128913;
    float defunc_2_reduce_res_128914 =
          *futhark_mc_task_131644->retval_defunc_2_reduce_res_128914;
    float defunc_2_reduce_res_128915 =
          *futhark_mc_task_131644->retval_defunc_2_reduce_res_128915;
    size_t reduce_stage_1_tid_res_arr_mem_129291_cached_sizze_131646 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129291 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129293_cached_sizze_131647 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129293 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129295_cached_sizze_131648 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129295 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129297_cached_sizze_131649 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129297 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129299_cached_sizze_131650 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129299 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129291_cached_sizze_131646 <
        (size_t) ((int64_t) 4 * num_tasks_129290)) {
        reduce_stage_1_tid_res_arr_mem_129291 =
            realloc(reduce_stage_1_tid_res_arr_mem_129291, (int64_t) 4 *
                    num_tasks_129290);
        reduce_stage_1_tid_res_arr_mem_129291_cached_sizze_131646 =
            (int64_t) 4 * num_tasks_129290;
    }
    if (reduce_stage_1_tid_res_arr_mem_129293_cached_sizze_131647 <
        (size_t) ((int64_t) 4 * num_tasks_129290)) {
        reduce_stage_1_tid_res_arr_mem_129293 =
            realloc(reduce_stage_1_tid_res_arr_mem_129293, (int64_t) 4 *
                    num_tasks_129290);
        reduce_stage_1_tid_res_arr_mem_129293_cached_sizze_131647 =
            (int64_t) 4 * num_tasks_129290;
    }
    if (reduce_stage_1_tid_res_arr_mem_129295_cached_sizze_131648 <
        (size_t) ((int64_t) 4 * num_tasks_129290)) {
        reduce_stage_1_tid_res_arr_mem_129295 =
            realloc(reduce_stage_1_tid_res_arr_mem_129295, (int64_t) 4 *
                    num_tasks_129290);
        reduce_stage_1_tid_res_arr_mem_129295_cached_sizze_131648 =
            (int64_t) 4 * num_tasks_129290;
    }
    if (reduce_stage_1_tid_res_arr_mem_129297_cached_sizze_131649 <
        (size_t) ((int64_t) 4 * num_tasks_129290)) {
        reduce_stage_1_tid_res_arr_mem_129297 =
            realloc(reduce_stage_1_tid_res_arr_mem_129297, (int64_t) 4 *
                    num_tasks_129290);
        reduce_stage_1_tid_res_arr_mem_129297_cached_sizze_131649 =
            (int64_t) 4 * num_tasks_129290;
    }
    if (reduce_stage_1_tid_res_arr_mem_129299_cached_sizze_131650 <
        (size_t) ((int64_t) 4 * num_tasks_129290)) {
        reduce_stage_1_tid_res_arr_mem_129299 =
            realloc(reduce_stage_1_tid_res_arr_mem_129299, (int64_t) 4 *
                    num_tasks_129290);
        reduce_stage_1_tid_res_arr_mem_129299_cached_sizze_131650 =
            (int64_t) 4 * num_tasks_129290;
    }
    
    int64_t iter_129301;
    struct futhark_mc_segred_stage_1_parloop_struct_131651
    futhark_mc_segred_stage_1_parloop_struct_131651;
    
    futhark_mc_segred_stage_1_parloop_struct_131651.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_gtid_119811 =
        gtid_119811;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_x_119941 = x_119941;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_x_128906 = x_128906;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_x_128907 = x_128907;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_defunc_0_f_res_128910 =
        defunc_0_f_res_128910;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_reduce_stage_1_tid_res_arr_mem_129291 =
        reduce_stage_1_tid_res_arr_mem_129291;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_reduce_stage_1_tid_res_arr_mem_129293 =
        reduce_stage_1_tid_res_arr_mem_129293;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_reduce_stage_1_tid_res_arr_mem_129295 =
        reduce_stage_1_tid_res_arr_mem_129295;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_reduce_stage_1_tid_res_arr_mem_129297 =
        reduce_stage_1_tid_res_arr_mem_129297;
    futhark_mc_segred_stage_1_parloop_struct_131651.free_reduce_stage_1_tid_res_arr_mem_129299 =
        reduce_stage_1_tid_res_arr_mem_129299;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131652_task;
    
    futhark_mc_segred_stage_1_parloop_131652_task.name =
        "futhark_mc_segred_stage_1_parloop_131652";
    futhark_mc_segred_stage_1_parloop_131652_task.fn =
        futhark_mc_segred_stage_1_parloop_131652;
    futhark_mc_segred_stage_1_parloop_131652_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131651;
    futhark_mc_segred_stage_1_parloop_131652_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131652_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131652_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131652_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131652_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131652_task);
    
    if (futhark_mc_segred_stage_1_parloop_131652_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131652_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131652_total_end -
                 futhark_mc_segred_stage_1_parloop_131652_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131652_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131652_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131652_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128911 = 0.0F;
        defunc_2_reduce_res_128912 = 0.0F;
        defunc_2_reduce_res_128913 = 0.0F;
        defunc_2_reduce_res_128914 = 0.0F;
        defunc_2_reduce_res_128915 = 0.0F;
    }
    
    float x_129307;
    float x_129308;
    float x_129310;
    float x_129311;
    float x_129313;
    float x_129314;
    float x_129316;
    float x_129317;
    float x_129319;
    float x_129320;
    
    for (int32_t i_129322 = 0; i_129322 < num_tasks_129290; i_129322++) {
        flat_tid_119816 = i_129322;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129307 = defunc_2_reduce_res_128911;
            }
            // load next params
            {
                x_129308 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129291)[flat_tid_119816];
            }
            // red body
            {
                float defunc_1_op_res_129309 = x_129307 + x_129308;
                
                defunc_2_reduce_res_128911 = defunc_1_op_res_129309;
            }
            // load acc params
            {
                x_129310 = defunc_2_reduce_res_128912;
            }
            // load next params
            {
                x_129311 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129293)[flat_tid_119816];
            }
            // red body
            {
                float defunc_1_op_res_129312 = x_129310 + x_129311;
                
                defunc_2_reduce_res_128912 = defunc_1_op_res_129312;
            }
            // load acc params
            {
                x_129313 = defunc_2_reduce_res_128913;
            }
            // load next params
            {
                x_129314 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129295)[flat_tid_119816];
            }
            // red body
            {
                float defunc_1_op_res_129315 = x_129313 + x_129314;
                
                defunc_2_reduce_res_128913 = defunc_1_op_res_129315;
            }
            // load acc params
            {
                x_129316 = defunc_2_reduce_res_128914;
            }
            // load next params
            {
                x_129317 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129297)[flat_tid_119816];
            }
            // red body
            {
                float defunc_1_op_res_129318 = x_129316 + x_129317;
                
                defunc_2_reduce_res_128914 = defunc_1_op_res_129318;
            }
            // load acc params
            {
                x_129319 = defunc_2_reduce_res_128915;
            }
            // load next params
            {
                x_129320 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129299)[flat_tid_119816];
            }
            // red body
            {
                float defunc_1_op_res_129321 = x_129319 + x_129320;
                
                defunc_2_reduce_res_128915 = defunc_1_op_res_129321;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129291);
    free(reduce_stage_1_tid_res_arr_mem_129293);
    free(reduce_stage_1_tid_res_arr_mem_129295);
    free(reduce_stage_1_tid_res_arr_mem_129297);
    free(reduce_stage_1_tid_res_arr_mem_129299);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131645_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131645_end -
                 futhark_mc_segred_task_131645_start;
        
        ctx->futhark_mc_segred_task_131645_runs[tid]++;
        ctx->futhark_mc_segred_task_131645_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131645_iter[tid] += iterations;
    }
    *futhark_mc_task_131644->retval_defunc_2_reduce_res_128911 =
        defunc_2_reduce_res_128911;
    *futhark_mc_task_131644->retval_defunc_2_reduce_res_128912 =
        defunc_2_reduce_res_128912;
    *futhark_mc_task_131644->retval_defunc_2_reduce_res_128913 =
        defunc_2_reduce_res_128913;
    *futhark_mc_task_131644->retval_defunc_2_reduce_res_128914 =
        defunc_2_reduce_res_128914;
    *futhark_mc_task_131644->retval_defunc_2_reduce_res_128915 =
        defunc_2_reduce_res_128915;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131653 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_x_128906;
    float free_x_128907;
    float free_defunc_0_f_res_128910;
    float free_a12_128972;
    float free_b12_128973;
    float free_c12_128974;
    float free_b2_128975;
    float free_c2_128976;
    float *retval_defunc_2_reduce_res_128977;
    float *retval_defunc_2_reduce_res_128978;
};
struct futhark_mc_segred_stage_1_parloop_struct_131657 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_119811;
    int64_t free_x_119941;
    char *free_mem_121982;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_x_128906;
    float free_x_128907;
    float free_defunc_0_f_res_128910;
    float free_a12_128972;
    float free_b12_128973;
    float free_c12_128974;
    float free_b2_128975;
    float free_c2_128976;
    char *free_reduce_stage_1_tid_res_arr_mem_129324;
    char *free_reduce_stage_1_tid_res_arr_mem_129326;
};
static int futhark_mc_segred_stage_1_parloop_131658(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119818,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131657
    *futhark_mc_segred_stage_1_parloop_struct_131657 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131657 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131657->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131658_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131658_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131657->free_n_114518;
    int64_t gtid_119811 =
            futhark_mc_segred_stage_1_parloop_struct_131657->free_gtid_119811;
    int64_t x_119941 =
            futhark_mc_segred_stage_1_parloop_struct_131657->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131657->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131657->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131657->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_128906 =
            futhark_mc_segred_stage_1_parloop_struct_131657->free_x_128906;
    float x_128907 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_x_128907;
    float defunc_0_f_res_128910 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_defunc_0_f_res_128910;
    float a12_128972 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_a12_128972;
    float b12_128973 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_b12_128973;
    float c12_128974 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_c12_128974;
    float b2_128975 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_b2_128975;
    float c2_128976 =
          futhark_mc_segred_stage_1_parloop_struct_131657->free_c2_128976;
    struct memblock reduce_stage_1_tid_res_arr_mem_129324 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129324",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131657->free_reduce_stage_1_tid_res_arr_mem_129324,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129326 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129326",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131657->free_reduce_stage_1_tid_res_arr_mem_129326,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129328 = start;
    float x_129248;
    float x_129249;
    float x_129251;
    float x_129252;
    float local_acc_129329 = 0.0F;
    float local_acc_129330 = 0.0F;
    
    for (; iter_129328 < end; iter_129328++) {
        int64_t gtid_119819 = iter_129328;
        bool cond_129254 = sle64(x_119941, gtid_119819);
        float defunc_0_f_res_129255;
        
        if (cond_129254) {
            defunc_0_f_res_129255 = 0.0F;
        } else {
            int64_t i_129256 = add64(gtid_119819, x_128906);
            float x_129257 = ((float *) mem_121982.mem)[gtid_119811 * n_114518 +
                                                        i_129256];
            float defunc_0_f_res_f_res_129258 = 1.0F + x_129257;
            
            defunc_0_f_res_129255 = defunc_0_f_res_f_res_129258;
        }
        
        float defunc_0_f_res_129259;
        
        if (cond_129254) {
            defunc_0_f_res_129259 = 0.0F;
        } else {
            int64_t i_129260 = add64(gtid_119819, x_128906);
            float x_129261 = ((float *) mem_122408.mem)[gtid_119811 * n_114518 +
                                                        i_129260];
            
            defunc_0_f_res_129259 = x_129261;
        }
        
        float x_j_129262 = defunc_0_f_res_129255 - defunc_0_f_res_128910;
        float abs_res_129263 = (float) fabs(x_j_129262);
        float tmp1_129264 = abs_res_129263 / x_128907;
        float x_129265 = tmp1_129264 * tmp1_129264;
        float y_129266 = tmp1_129264 * x_129265;
        float tmp2_129267 = 1.0F - y_129266;
        float x_129268 = tmp2_129267 * tmp2_129267;
        float tmp3_129269 = tmp2_129267 * x_129268;
        float tmp4_129270 = defunc_0_f_res_129259 * tmp3_129269;
        float defunc_1_f_res_129271 = x_j_129262 * tmp4_129270;
        float defunc_1_f_res_129272 = x_j_129262 * defunc_1_f_res_129271;
        float defunc_0_f_res_129273;
        
        if (cond_129254) {
            defunc_0_f_res_129273 = 0.0F;
        } else {
            int64_t i_129274 = add64(gtid_119819, x_128906);
            float x_129275 = ((float *) mem_122959.mem)[gtid_119811 * n_114518 +
                                                        i_129274];
            
            defunc_0_f_res_129273 = x_129275;
        }
        
        float x_129276 = a12_128972 * tmp4_129270;
        float y_129277 = b12_128973 * defunc_1_f_res_129271;
        float x_129278 = x_129276 + y_129277;
        float y_129279 = c12_128974 * defunc_1_f_res_129272;
        float x_129280 = x_129278 + y_129279;
        float defunc_9_fit_fun_res_129281 = defunc_0_f_res_129273 * x_129280;
        float x_129282 = b12_128973 * tmp4_129270;
        float y_129283 = b2_128975 * defunc_1_f_res_129271;
        float x_129284 = x_129282 + y_129283;
        float y_129285 = c2_128976 * defunc_1_f_res_129272;
        float x_129286 = x_129284 + y_129285;
        float defunc_9_slope_fun_res_129287 = defunc_0_f_res_129273 * x_129286;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129248 = local_acc_129329;
        }
        // Load next params
        {
            x_129249 = defunc_9_fit_fun_res_129281;
        }
        // Red body
        {
            float defunc_1_op_res_129250 = x_129248 + x_129249;
            
            local_acc_129329 = defunc_1_op_res_129250;
        }
        // Load accum params
        {
            x_129251 = local_acc_129330;
        }
        // Load next params
        {
            x_129252 = defunc_9_slope_fun_res_129287;
        }
        // Red body
        {
            float defunc_1_op_res_129253 = x_129251 + x_129252;
            
            local_acc_129330 = defunc_1_op_res_129253;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129324.mem)[flat_tid_119818] =
        local_acc_129329;
    ((float *) reduce_stage_1_tid_res_arr_mem_129326.mem)[flat_tid_119818] =
        local_acc_129330;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131658_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131658_end -
                 futhark_mc_segred_stage_1_parloop_131658_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131658_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131658_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131658_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131654(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119818 = tid;
    int num_tasks_129323 = info.nsubtasks;
    struct futhark_mc_task_131653 *futhark_mc_task_131653 =
                                  (struct futhark_mc_task_131653 *) args;
    struct futhark_context *ctx = futhark_mc_task_131653->ctx;
    uint64_t futhark_mc_segred_task_131654_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131654_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131653->free_n_114518;
    int64_t gtid_119811 = futhark_mc_task_131653->free_gtid_119811;
    int64_t x_119941 = futhark_mc_task_131653->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131653->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131653->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131653->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_128906 = futhark_mc_task_131653->free_x_128906;
    float x_128907 = futhark_mc_task_131653->free_x_128907;
    float defunc_0_f_res_128910 =
          futhark_mc_task_131653->free_defunc_0_f_res_128910;
    float a12_128972 = futhark_mc_task_131653->free_a12_128972;
    float b12_128973 = futhark_mc_task_131653->free_b12_128973;
    float c12_128974 = futhark_mc_task_131653->free_c12_128974;
    float b2_128975 = futhark_mc_task_131653->free_b2_128975;
    float c2_128976 = futhark_mc_task_131653->free_c2_128976;
    float defunc_2_reduce_res_128977 =
          *futhark_mc_task_131653->retval_defunc_2_reduce_res_128977;
    float defunc_2_reduce_res_128978 =
          *futhark_mc_task_131653->retval_defunc_2_reduce_res_128978;
    size_t reduce_stage_1_tid_res_arr_mem_129324_cached_sizze_131655 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129324 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129326_cached_sizze_131656 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129326 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129324_cached_sizze_131655 <
        (size_t) ((int64_t) 4 * num_tasks_129323)) {
        reduce_stage_1_tid_res_arr_mem_129324 =
            realloc(reduce_stage_1_tid_res_arr_mem_129324, (int64_t) 4 *
                    num_tasks_129323);
        reduce_stage_1_tid_res_arr_mem_129324_cached_sizze_131655 =
            (int64_t) 4 * num_tasks_129323;
    }
    if (reduce_stage_1_tid_res_arr_mem_129326_cached_sizze_131656 <
        (size_t) ((int64_t) 4 * num_tasks_129323)) {
        reduce_stage_1_tid_res_arr_mem_129326 =
            realloc(reduce_stage_1_tid_res_arr_mem_129326, (int64_t) 4 *
                    num_tasks_129323);
        reduce_stage_1_tid_res_arr_mem_129326_cached_sizze_131656 =
            (int64_t) 4 * num_tasks_129323;
    }
    
    int64_t iter_129328;
    struct futhark_mc_segred_stage_1_parloop_struct_131657
    futhark_mc_segred_stage_1_parloop_struct_131657;
    
    futhark_mc_segred_stage_1_parloop_struct_131657.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_gtid_119811 =
        gtid_119811;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_x_119941 = x_119941;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_mem_122959 =
        mem_122959.mem;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_x_128906 = x_128906;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_x_128907 = x_128907;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_defunc_0_f_res_128910 =
        defunc_0_f_res_128910;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_a12_128972 =
        a12_128972;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_b12_128973 =
        b12_128973;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_c12_128974 =
        c12_128974;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_b2_128975 = b2_128975;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_c2_128976 = c2_128976;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_reduce_stage_1_tid_res_arr_mem_129324 =
        reduce_stage_1_tid_res_arr_mem_129324;
    futhark_mc_segred_stage_1_parloop_struct_131657.free_reduce_stage_1_tid_res_arr_mem_129326 =
        reduce_stage_1_tid_res_arr_mem_129326;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131658_task;
    
    futhark_mc_segred_stage_1_parloop_131658_task.name =
        "futhark_mc_segred_stage_1_parloop_131658";
    futhark_mc_segred_stage_1_parloop_131658_task.fn =
        futhark_mc_segred_stage_1_parloop_131658;
    futhark_mc_segred_stage_1_parloop_131658_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131657;
    futhark_mc_segred_stage_1_parloop_131658_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131658_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131658_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131658_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131658_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131658_task);
    
    if (futhark_mc_segred_stage_1_parloop_131658_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131658_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131658_total_end -
                 futhark_mc_segred_stage_1_parloop_131658_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131658_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131658_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131658_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128977 = 0.0F;
        defunc_2_reduce_res_128978 = 0.0F;
    }
    
    float x_129331;
    float x_129332;
    float x_129334;
    float x_129335;
    
    for (int32_t i_129337 = 0; i_129337 < num_tasks_129323; i_129337++) {
        flat_tid_119818 = i_129337;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129331 = defunc_2_reduce_res_128977;
            }
            // load next params
            {
                x_129332 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129324)[flat_tid_119818];
            }
            // red body
            {
                float defunc_1_op_res_129333 = x_129331 + x_129332;
                
                defunc_2_reduce_res_128977 = defunc_1_op_res_129333;
            }
            // load acc params
            {
                x_129334 = defunc_2_reduce_res_128978;
            }
            // load next params
            {
                x_129335 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129326)[flat_tid_119818];
            }
            // red body
            {
                float defunc_1_op_res_129336 = x_129334 + x_129335;
                
                defunc_2_reduce_res_128978 = defunc_1_op_res_129336;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129324);
    free(reduce_stage_1_tid_res_arr_mem_129326);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131654_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131654_end -
                 futhark_mc_segred_task_131654_start;
        
        ctx->futhark_mc_segred_task_131654_runs[tid]++;
        ctx->futhark_mc_segred_task_131654_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131654_iter[tid] += iterations;
    }
    *futhark_mc_task_131653->retval_defunc_2_reduce_res_128977 =
        defunc_2_reduce_res_128977;
    *futhark_mc_task_131653->retval_defunc_2_reduce_res_128978 =
        defunc_2_reduce_res_128978;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131643(void *args, int64_t start,
                                            int64_t end, int flat_tid_119814,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131642
    *futhark_mc_segmap_parloop_struct_131642 =
    (struct futhark_mc_segmap_parloop_struct_131642 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131642->ctx;
    uint64_t futhark_mc_segmap_parloop_131643_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131643_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131642->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131642->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131642->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131642->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131642->free_i_114594;
    int64_t gtid_119811 =
            futhark_mc_segmap_parloop_struct_131642->free_gtid_119811;
    int64_t x_119941 = futhark_mc_segmap_parloop_struct_131642->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123036 = {.desc ="mem_123036", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_123036,
                                  .size =0, .references =NULL};
    struct memblock mem_123039 = {.desc ="mem_123039", .mem =
                                  futhark_mc_segmap_parloop_struct_131642->free_mem_123039,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129211 = start;
    
    for (; iter_129211 < end; iter_129211++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129288 = t_n_m_114575;
        int64_t gtid_119815 = iter_129211;
        int64_t remnant_129289 = iter_129211 - gtid_119815;
        int64_t x_128906 = ((int64_t *) mem_122182.mem)[gtid_119811 *
                                                        t_n_m_114575 +
                                                        gtid_119815];
        float x_128907 = ((float *) mem_122186.mem)[gtid_119811 * t_n_m_114575 +
                                                    gtid_119815];
        int64_t min_arg_128908 = mul64(t_jump_114525, gtid_119815);
        int64_t min_res_128909 = smin64(i_114594, min_arg_128908);
        float defunc_0_f_res_128910 = sitofp_i64_f32(min_res_128909);
        float defunc_2_reduce_res_128911;
        float defunc_2_reduce_res_128912;
        float defunc_2_reduce_res_128913;
        float defunc_2_reduce_res_128914;
        float defunc_2_reduce_res_128915;
        int64_t flat_tid_119816 = (int64_t) 0;
        int32_t num_tasks_129290;
        struct futhark_mc_task_131644 futhark_mc_task_131644;
        
        futhark_mc_task_131644.ctx = ctx;
        futhark_mc_task_131644.free_n_114518 = n_114518;
        futhark_mc_task_131644.free_gtid_119811 = gtid_119811;
        futhark_mc_task_131644.free_x_119941 = x_119941;
        futhark_mc_task_131644.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131644.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131644.free_x_128906 = x_128906;
        futhark_mc_task_131644.free_x_128907 = x_128907;
        futhark_mc_task_131644.free_defunc_0_f_res_128910 =
            defunc_0_f_res_128910;
        futhark_mc_task_131644.retval_defunc_2_reduce_res_128911 =
            &defunc_2_reduce_res_128911;
        futhark_mc_task_131644.retval_defunc_2_reduce_res_128912 =
            &defunc_2_reduce_res_128912;
        futhark_mc_task_131644.retval_defunc_2_reduce_res_128913 =
            &defunc_2_reduce_res_128913;
        futhark_mc_task_131644.retval_defunc_2_reduce_res_128914 =
            &defunc_2_reduce_res_128914;
        futhark_mc_task_131644.retval_defunc_2_reduce_res_128915 =
            &defunc_2_reduce_res_128915;
        
        struct scheduler_segop futhark_mc_task_131644_task;
        
        futhark_mc_task_131644_task.args = &futhark_mc_task_131644;
        futhark_mc_task_131644_task.top_level_fn =
            futhark_mc_segred_task_131645;
        futhark_mc_task_131644_task.name = "futhark_mc_segred_task_131645";
        futhark_mc_task_131644_task.iterations = t_window_114521;
        futhark_mc_task_131644_task.task_time =
            &ctx->futhark_mc_segred_task_131645_total_time;
        futhark_mc_task_131644_task.task_iter =
            &ctx->futhark_mc_segred_task_131645_total_iter;
        futhark_mc_task_131644_task.sched = STATIC;
        futhark_mc_task_131644_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131645_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131644_task);
        
        if (futhark_mc_segred_task_131645_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_128952 = defunc_2_reduce_res_128913 *
              defunc_2_reduce_res_128915;
        float y_128953 = defunc_2_reduce_res_128914 *
              defunc_2_reduce_res_128914;
        float a12_128954 = x_128952 - y_128953;
        float x_128955 = defunc_2_reduce_res_128913 *
              defunc_2_reduce_res_128914;
        float y_128956 = defunc_2_reduce_res_128912 *
              defunc_2_reduce_res_128915;
        float b12_128957 = x_128955 - y_128956;
        float x_128958 = defunc_2_reduce_res_128912 *
              defunc_2_reduce_res_128914;
        float y_128959 = defunc_2_reduce_res_128913 *
              defunc_2_reduce_res_128913;
        float c12_128960 = x_128958 - y_128959;
        float x_128961 = defunc_2_reduce_res_128911 *
              defunc_2_reduce_res_128915;
        float b2_128962 = x_128961 - y_128959;
        float x_128963 = defunc_2_reduce_res_128912 *
              defunc_2_reduce_res_128913;
        float y_128964 = defunc_2_reduce_res_128911 *
              defunc_2_reduce_res_128914;
        float c2_128965 = x_128963 - y_128964;
        float x_128966 = defunc_2_reduce_res_128911 * a12_128954;
        float y_128967 = defunc_2_reduce_res_128912 * b12_128957;
        float x_128968 = x_128966 + y_128967;
        float y_128969 = defunc_2_reduce_res_128913 * c12_128960;
        float y_128970 = x_128968 + y_128969;
        float det_128971 = 1.0F / y_128970;
        float a12_128972 = a12_128954 * det_128971;
        float b12_128973 = b12_128957 * det_128971;
        float c12_128974 = c12_128960 * det_128971;
        float b2_128975 = b2_128962 * det_128971;
        float c2_128976 = c2_128965 * det_128971;
        float defunc_2_reduce_res_128977;
        float defunc_2_reduce_res_128978;
        int64_t flat_tid_119818 = (int64_t) 0;
        int32_t num_tasks_129323;
        struct futhark_mc_task_131653 futhark_mc_task_131653;
        
        futhark_mc_task_131653.ctx = ctx;
        futhark_mc_task_131653.free_n_114518 = n_114518;
        futhark_mc_task_131653.free_gtid_119811 = gtid_119811;
        futhark_mc_task_131653.free_x_119941 = x_119941;
        futhark_mc_task_131653.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131653.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131653.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131653.free_x_128906 = x_128906;
        futhark_mc_task_131653.free_x_128907 = x_128907;
        futhark_mc_task_131653.free_defunc_0_f_res_128910 =
            defunc_0_f_res_128910;
        futhark_mc_task_131653.free_a12_128972 = a12_128972;
        futhark_mc_task_131653.free_b12_128973 = b12_128973;
        futhark_mc_task_131653.free_c12_128974 = c12_128974;
        futhark_mc_task_131653.free_b2_128975 = b2_128975;
        futhark_mc_task_131653.free_c2_128976 = c2_128976;
        futhark_mc_task_131653.retval_defunc_2_reduce_res_128977 =
            &defunc_2_reduce_res_128977;
        futhark_mc_task_131653.retval_defunc_2_reduce_res_128978 =
            &defunc_2_reduce_res_128978;
        
        struct scheduler_segop futhark_mc_task_131653_task;
        
        futhark_mc_task_131653_task.args = &futhark_mc_task_131653;
        futhark_mc_task_131653_task.top_level_fn =
            futhark_mc_segred_task_131654;
        futhark_mc_task_131653_task.name = "futhark_mc_segred_task_131654";
        futhark_mc_task_131653_task.iterations = t_window_114521;
        futhark_mc_task_131653_task.task_time =
            &ctx->futhark_mc_segred_task_131654_total_time;
        futhark_mc_task_131653_task.task_iter =
            &ctx->futhark_mc_segred_task_131654_total_iter;
        futhark_mc_task_131653_task.sched = STATIC;
        futhark_mc_task_131653_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131654_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131653_task);
        
        if (futhark_mc_segred_task_131654_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_123036.mem)[gtid_119815] = defunc_2_reduce_res_128977;
        ((float *) mem_123039.mem)[gtid_119815] = defunc_2_reduce_res_128978;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131643_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131643_end -
                 futhark_mc_segmap_parloop_131643_start;
        
        ctx->futhark_mc_segmap_parloop_131643_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131643_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131643_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131641(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119814 = tid;
    int num_tasks_129129 = info.nsubtasks;
    struct futhark_mc_task_131637 *futhark_mc_task_131637 =
                                  (struct futhark_mc_task_131637 *) args;
    struct futhark_context *ctx = futhark_mc_task_131637->ctx;
    uint64_t futhark_mc_segmap_nested_task_131641_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131641_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131637->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131637->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131637->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131637->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131637->free_i_114594;
    int64_t gtid_119811 = futhark_mc_task_131637->free_gtid_119811;
    int64_t x_119941 = futhark_mc_task_131637->free_x_119941;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131637->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131637->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131637->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131637->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131637->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123036 = {.desc ="mem_123036", .mem =
                                  futhark_mc_task_131637->free_mem_123036,
                                  .size =0, .references =NULL};
    struct memblock mem_123039 = {.desc ="mem_123039", .mem =
                                  futhark_mc_task_131637->free_mem_123039,
                                  .size =0, .references =NULL};
    int64_t iter_129211;
    struct futhark_mc_segmap_parloop_struct_131642
    futhark_mc_segmap_parloop_struct_131642;
    
    futhark_mc_segmap_parloop_struct_131642.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131642.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131642.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131642.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131642.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131642.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131642.free_gtid_119811 = gtid_119811;
    futhark_mc_segmap_parloop_struct_131642.free_x_119941 = x_119941;
    futhark_mc_segmap_parloop_struct_131642.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131642.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131642.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131642.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131642.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131642.free_mem_123036 = mem_123036.mem;
    futhark_mc_segmap_parloop_struct_131642.free_mem_123039 = mem_123039.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131643_task;
    
    futhark_mc_segmap_parloop_131643_task.name =
        "futhark_mc_segmap_parloop_131643";
    futhark_mc_segmap_parloop_131643_task.fn = futhark_mc_segmap_parloop_131643;
    futhark_mc_segmap_parloop_131643_task.args =
        &futhark_mc_segmap_parloop_struct_131642;
    futhark_mc_segmap_parloop_131643_task.iterations = iterations;
    futhark_mc_segmap_parloop_131643_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131643_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131643_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131643_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131643_task);
    
    if (futhark_mc_segmap_parloop_131643_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131643_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131643_total_end -
                 futhark_mc_segmap_parloop_131643_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131643_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131643_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131643_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131641_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131641_end -
                 futhark_mc_segmap_nested_task_131641_start;
        
        ctx->futhark_mc_segmap_nested_task_131641_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131641_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131641_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131634(void *args, int64_t start,
                                            int64_t end, int flat_tid_119810,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131633
    *futhark_mc_segmap_parloop_struct_131633 =
    (struct futhark_mc_segmap_parloop_struct_131633 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131633->ctx;
    uint64_t futhark_mc_segmap_parloop_131634_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131634_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131633->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131633->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131633->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131633->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131633->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131633->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131633->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123073 = {.desc ="mem_123073", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_123073,
                                  .size =0, .references =NULL};
    struct memblock mem_123077 = {.desc ="mem_123077", .mem =
                                  futhark_mc_segmap_parloop_struct_131633->free_mem_123077,
                                  .size =0, .references =NULL};
    size_t mem_123036_cached_sizze_131635 = 0;
    char *mem_123036 = NULL;
    size_t mem_123039_cached_sizze_131636 = 0;
    char *mem_123039 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128905 = start;
    
    if (mem_123036_cached_sizze_131635 < (size_t) bytes_122113) {
        mem_123036 = realloc(mem_123036, bytes_122113);
        mem_123036_cached_sizze_131635 = bytes_122113;
    }
    if (mem_123039_cached_sizze_131636 < (size_t) bytes_122113) {
        mem_123039 = realloc(mem_123039, bytes_122113);
        mem_123039_cached_sizze_131636 = bytes_122113;
    }
    for (; iter_128905 < end; iter_128905++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129127 = m_114517;
        int64_t gtid_119811 = iter_128905;
        int64_t remnant_129128 = iter_128905 - gtid_119811;
        int64_t x_119941 = ((int64_t *) mem_121960.mem)[gtid_119811];
        int64_t flat_tid_119812 = (int64_t) 0;
        int32_t num_tasks_129129;
        int64_t flat_tid_119814 = (int64_t) 0;
        struct futhark_mc_task_131637 futhark_mc_task_131637;
        
        futhark_mc_task_131637.ctx = ctx;
        futhark_mc_task_131637.free_n_114518 = n_114518;
        futhark_mc_task_131637.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131637.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131637.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131637.free_i_114594 = i_114594;
        futhark_mc_task_131637.free_gtid_119811 = gtid_119811;
        futhark_mc_task_131637.free_x_119941 = x_119941;
        futhark_mc_task_131637.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131637.free_mem_122182 = mem_122182.mem;
        futhark_mc_task_131637.free_mem_122186 = mem_122186.mem;
        futhark_mc_task_131637.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131637.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131637.free_mem_123036 = mem_123036;
        futhark_mc_task_131637.free_mem_123039 = mem_123039;
        
        struct scheduler_segop futhark_mc_task_131637_task;
        
        futhark_mc_task_131637_task.args = &futhark_mc_task_131637;
        futhark_mc_task_131637_task.top_level_fn =
            futhark_mc_segmap_task_131638;
        futhark_mc_task_131637_task.name = "futhark_mc_segmap_task_131638";
        futhark_mc_task_131637_task.iterations = t_n_m_114575;
        futhark_mc_task_131637_task.task_time =
            &ctx->futhark_mc_segmap_task_131638_total_time;
        futhark_mc_task_131637_task.task_iter =
            &ctx->futhark_mc_segmap_task_131638_total_iter;
        futhark_mc_task_131637_task.sched = STATIC;
        futhark_mc_task_131637_task.nested_fn =
            futhark_mc_segmap_nested_task_131641;
        
        int futhark_mc_segmap_task_131638_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131637_task);
        
        if (futhark_mc_segmap_task_131638_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123073.mem + gtid_119811 * t_n_m_114575 * (int64_t) 4,
                mem_123036 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123077.mem + gtid_119811 * t_n_m_114575 * (int64_t) 4,
                mem_123039 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123036);
    free(mem_123039);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131634_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131634_end -
                 futhark_mc_segmap_parloop_131634_start;
        
        ctx->futhark_mc_segmap_parloop_131634_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131634_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131634_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131632(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119810 = tid;
    int num_tasks_128779 = info.nsubtasks;
    struct futhark_mc_task_131626 *futhark_mc_task_131626 =
                                  (struct futhark_mc_task_131626 *) args;
    struct futhark_context *ctx = futhark_mc_task_131626->ctx;
    uint64_t futhark_mc_segmap_nested_task_131632_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131632_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131626->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131626->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131626->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131626->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131626->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131626->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131626->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131626->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131626->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131626->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131626->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131626->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131626->free_mem_122959,
                                  .size =0, .references =NULL};
    struct memblock mem_123073 = {.desc ="mem_123073", .mem =
                                  futhark_mc_task_131626->free_mem_123073,
                                  .size =0, .references =NULL};
    struct memblock mem_123077 = {.desc ="mem_123077", .mem =
                                  futhark_mc_task_131626->free_mem_123077,
                                  .size =0, .references =NULL};
    int64_t iter_128905;
    struct futhark_mc_segmap_parloop_struct_131633
    futhark_mc_segmap_parloop_struct_131633;
    
    futhark_mc_segmap_parloop_struct_131633.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131633.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131633.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131633.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131633.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131633.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131633.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131633.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131633.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131633.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131633.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131633.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131633.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131633.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131633.free_mem_123073 = mem_123073.mem;
    futhark_mc_segmap_parloop_struct_131633.free_mem_123077 = mem_123077.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131634_task;
    
    futhark_mc_segmap_parloop_131634_task.name =
        "futhark_mc_segmap_parloop_131634";
    futhark_mc_segmap_parloop_131634_task.fn = futhark_mc_segmap_parloop_131634;
    futhark_mc_segmap_parloop_131634_task.args =
        &futhark_mc_segmap_parloop_struct_131633;
    futhark_mc_segmap_parloop_131634_task.iterations = iterations;
    futhark_mc_segmap_parloop_131634_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131634_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131634_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131634_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131634_task);
    
    if (futhark_mc_segmap_parloop_131634_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131634_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131634_total_end -
                 futhark_mc_segmap_parloop_131634_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131634_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131634_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131634_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131632_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131632_end -
                 futhark_mc_segmap_nested_task_131632_start;
        
        ctx->futhark_mc_segmap_nested_task_131632_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131632_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131632_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131659 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123086;
    char *free_mem_123140;
};
struct futhark_mc_segmap_parloop_struct_131661 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123086;
    char *free_mem_123140;
};
static int futhark_mc_segmap_parloop_131662(void *args, int64_t start,
                                            int64_t end, int flat_tid_120176,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131661
    *futhark_mc_segmap_parloop_struct_131661 =
    (struct futhark_mc_segmap_parloop_struct_131661 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131661->ctx;
    uint64_t futhark_mc_segmap_parloop_131662_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131662_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131661->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131661->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131661->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131661->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131661->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131661->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131661->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 =
            futhark_mc_segmap_parloop_struct_131661->free_bytes_123086;
    struct memblock mem_123140 = {.desc ="mem_123140", .mem =
                                  futhark_mc_segmap_parloop_struct_131661->free_mem_123140,
                                  .size =0, .references =NULL};
    size_t mem_123109_cached_sizze_131663 = 0;
    char *mem_123109 = NULL;
    size_t mem_123119_cached_sizze_131664 = 0;
    char *mem_123119 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129341 = start;
    
    if (mem_123109_cached_sizze_131663 < (size_t) bytes_122113) {
        mem_123109 = realloc(mem_123109, bytes_122113);
        mem_123109_cached_sizze_131663 = bytes_122113;
    }
    if (mem_123119_cached_sizze_131664 < (size_t) bytes_123086) {
        mem_123119 = realloc(mem_123119, bytes_123086);
        mem_123119_cached_sizze_131664 = bytes_123086;
    }
    for (; iter_129341 < end; iter_129341++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129387 = m_114517;
        int64_t gtid_120177 = iter_129341;
        int64_t remnant_129388 = iter_129341 - gtid_120177;
        int64_t x_116179 = ((int64_t *) mem_121960.mem)[gtid_120177];
        
        for (int64_t i_129342 = 0; i_129342 < t_n_m_114575; i_129342++) {
            int64_t x_129344 = ((int64_t *) mem_122182.mem)[gtid_120177 *
                                                            t_n_m_114575 +
                                                            i_129342];
            float x_129345 = ((float *) mem_122186.mem)[gtid_120177 *
                                                        t_n_m_114575 +
                                                        i_129342];
            int64_t min_arg_129346 = mul64(t_jump_114525, i_129342);
            int64_t min_res_129347 = smin64(i_114594, min_arg_129346);
            float defunc_0_f_res_129348 = sitofp_i64_f32(min_res_129347);
            float defunc_2_reduce_res_129350;
            float redout_129353 = 0.0F;
            
            for (int64_t i_129352 = 0; i_129352 < t_window_114521; i_129352++) {
                bool cond_129355 = sle64(x_116179, i_129352);
                float defunc_0_f_res_129356;
                
                if (cond_129355) {
                    defunc_0_f_res_129356 = 0.0F;
                } else {
                    int64_t i_129357 = add64(x_129344, i_129352);
                    float x_129358 = ((float *) mem_121982.mem)[gtid_120177 *
                                                                n_114518 +
                                                                i_129357];
                    float defunc_0_f_res_f_res_129359 = 1.0F + x_129358;
                    
                    defunc_0_f_res_129356 = defunc_0_f_res_f_res_129359;
                }
                
                float defunc_0_f_res_129360;
                
                if (cond_129355) {
                    defunc_0_f_res_129360 = 0.0F;
                } else {
                    int64_t i_129361 = add64(x_129344, i_129352);
                    float x_129362 = ((float *) mem_122408.mem)[gtid_120177 *
                                                                n_114518 +
                                                                i_129361];
                    
                    defunc_0_f_res_129360 = x_129362;
                }
                
                float x_j_129363 = defunc_0_f_res_129356 -
                      defunc_0_f_res_129348;
                float abs_res_129364 = (float) fabs(x_j_129363);
                float tmp1_129365 = abs_res_129364 / x_129345;
                float x_129366 = tmp1_129365 * tmp1_129365;
                float y_129367 = tmp1_129365 * x_129366;
                float tmp2_129368 = 1.0F - y_129367;
                float x_129369 = tmp2_129368 * tmp2_129368;
                float tmp3_129370 = tmp2_129368 * x_129369;
                float tmp4_129371 = defunc_0_f_res_129360 * tmp3_129370;
                float defunc_1_op_res_129372 = tmp4_129371 + redout_129353;
                
                ((float *) mem_123119)[i_129352] = tmp4_129371;
                
                float redout_tmp_129390 = defunc_1_op_res_129372;
                
                redout_129353 = redout_tmp_129390;
            }
            defunc_2_reduce_res_129350 = redout_129353;
            
            float a0_129374 = 1.0F / defunc_2_reduce_res_129350;
            float defunc_2_reduce_res_129375;
            float redout_129377 = 0.0F;
            
            for (int64_t i_129376 = 0; i_129376 < t_window_114521; i_129376++) {
                float x_129378 = ((float *) mem_123119)[i_129376];
                bool cond_129379 = sle64(x_116179, i_129376);
                float defunc_0_f_res_129380;
                
                if (cond_129379) {
                    defunc_0_f_res_129380 = 0.0F;
                } else {
                    int64_t i_129381 = add64(x_129344, i_129376);
                    float x_129382 = ((float *) mem_122959.mem)[gtid_120177 *
                                                                n_114518 +
                                                                i_129381];
                    
                    defunc_0_f_res_129380 = x_129382;
                }
                
                float x_129383 = a0_129374 * x_129378;
                float defunc_9_fit_fun_res_129384 = defunc_0_f_res_129380 *
                      x_129383;
                float defunc_1_op_res_129385 = defunc_9_fit_fun_res_129384 +
                      redout_129377;
                float redout_tmp_129392 = defunc_1_op_res_129385;
                
                redout_129377 = redout_tmp_129392;
            }
            defunc_2_reduce_res_129375 = redout_129377;
            ((float *) mem_123109)[i_129342] = defunc_2_reduce_res_129375;
        }
        memmove(mem_123140.mem + gtid_120177 * t_n_m_114575 * (int64_t) 4,
                mem_123109 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123109);
    free(mem_123119);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131662_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131662_end -
                 futhark_mc_segmap_parloop_131662_start;
        
        ctx->futhark_mc_segmap_parloop_131662_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131662_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131662_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131660(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120176 = tid;
    int num_tasks_129340 = info.nsubtasks;
    struct futhark_mc_task_131659 *futhark_mc_task_131659 =
                                  (struct futhark_mc_task_131659 *) args;
    struct futhark_context *ctx = futhark_mc_task_131659->ctx;
    uint64_t futhark_mc_segmap_task_131660_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131660_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131659->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131659->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131659->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131659->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131659->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131659->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131659->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131659->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131659->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131659->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131659->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131659->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131659->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 = futhark_mc_task_131659->free_bytes_123086;
    struct memblock mem_123140 = {.desc ="mem_123140", .mem =
                                  futhark_mc_task_131659->free_mem_123140,
                                  .size =0, .references =NULL};
    int64_t iter_129341;
    struct futhark_mc_segmap_parloop_struct_131661
    futhark_mc_segmap_parloop_struct_131661;
    
    futhark_mc_segmap_parloop_struct_131661.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131661.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131661.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131661.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131661.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131661.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131661.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131661.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131661.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131661.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131661.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131661.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131661.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131661.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131661.free_bytes_123086 = bytes_123086;
    futhark_mc_segmap_parloop_struct_131661.free_mem_123140 = mem_123140.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131662_task;
    
    futhark_mc_segmap_parloop_131662_task.name =
        "futhark_mc_segmap_parloop_131662";
    futhark_mc_segmap_parloop_131662_task.fn = futhark_mc_segmap_parloop_131662;
    futhark_mc_segmap_parloop_131662_task.args =
        &futhark_mc_segmap_parloop_struct_131661;
    futhark_mc_segmap_parloop_131662_task.iterations = iterations;
    futhark_mc_segmap_parloop_131662_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131662_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131662_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131662_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131662_task);
    
    if (futhark_mc_segmap_parloop_131662_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131662_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131662_total_end -
                 futhark_mc_segmap_parloop_131662_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131662_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131662_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131662_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131660_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131660_end -
                 futhark_mc_segmap_task_131660_start;
        
        ctx->futhark_mc_segmap_task_131660_runs[tid]++;
        ctx->futhark_mc_segmap_task_131660_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131660_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131666 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123086;
    char *free_mem_123140;
};
struct futhark_mc_task_131669 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123086;
    char *free_mem_123106;
};
struct futhark_mc_segmap_parloop_struct_131671 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123086;
    char *free_mem_123106;
};
static int futhark_mc_segmap_parloop_131672(void *args, int64_t start,
                                            int64_t end, int flat_tid_120180,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131671
    *futhark_mc_segmap_parloop_struct_131671 =
    (struct futhark_mc_segmap_parloop_struct_131671 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131671->ctx;
    uint64_t futhark_mc_segmap_parloop_131672_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131672_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131671->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131671->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131671->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131671->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131671->free_i_114594;
    int64_t gtid_120179 =
            futhark_mc_segmap_parloop_struct_131671->free_gtid_120179;
    int64_t x_120235 = futhark_mc_segmap_parloop_struct_131671->free_x_120235;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131671->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131671->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131671->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131671->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131671->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 =
            futhark_mc_segmap_parloop_struct_131671->free_bytes_123086;
    struct memblock mem_123106 = {.desc ="mem_123106", .mem =
                                  futhark_mc_segmap_parloop_struct_131671->free_mem_123106,
                                  .size =0, .references =NULL};
    size_t mem_129439_cached_sizze_131673 = 0;
    char *mem_129439 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129480 = start;
    
    if (mem_129439_cached_sizze_131673 < (size_t) bytes_123086) {
        mem_129439 = realloc(mem_129439, bytes_123086);
        mem_129439_cached_sizze_131673 = bytes_123086;
    }
    for (; iter_129480 < end; iter_129480++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129513 = t_n_m_114575;
        int64_t gtid_120181 = iter_129480;
        int64_t remnant_129514 = iter_129480 - gtid_120181;
        int64_t x_129434 = ((int64_t *) mem_122182.mem)[gtid_120179 *
                                                        t_n_m_114575 +
                                                        gtid_120181];
        float x_129435 = ((float *) mem_122186.mem)[gtid_120179 * t_n_m_114575 +
                                                    gtid_120181];
        int64_t min_arg_129436 = mul64(t_jump_114525, gtid_120181);
        int64_t min_res_129437 = smin64(i_114594, min_arg_129436);
        float defunc_0_f_res_129438 = sitofp_i64_f32(min_res_129437);
        float defunc_2_reduce_res_129441;
        float redout_129482 = 0.0F;
        
        for (int64_t i_129481 = 0; i_129481 < t_window_114521; i_129481++) {
            bool cond_129484 = sle64(x_120235, i_129481);
            float defunc_0_f_res_129485;
            
            if (cond_129484) {
                defunc_0_f_res_129485 = 0.0F;
            } else {
                int64_t i_129486 = add64(x_129434, i_129481);
                float x_129487 = ((float *) mem_121982.mem)[gtid_120179 *
                                                            n_114518 +
                                                            i_129486];
                float defunc_0_f_res_f_res_129488 = 1.0F + x_129487;
                
                defunc_0_f_res_129485 = defunc_0_f_res_f_res_129488;
            }
            
            float defunc_0_f_res_129489;
            
            if (cond_129484) {
                defunc_0_f_res_129489 = 0.0F;
            } else {
                int64_t i_129490 = add64(x_129434, i_129481);
                float x_129491 = ((float *) mem_122408.mem)[gtid_120179 *
                                                            n_114518 +
                                                            i_129490];
                
                defunc_0_f_res_129489 = x_129491;
            }
            
            float x_j_129492 = defunc_0_f_res_129485 - defunc_0_f_res_129438;
            float abs_res_129493 = (float) fabs(x_j_129492);
            float tmp1_129494 = abs_res_129493 / x_129435;
            float x_129495 = tmp1_129494 * tmp1_129494;
            float y_129496 = tmp1_129494 * x_129495;
            float tmp2_129497 = 1.0F - y_129496;
            float x_129498 = tmp2_129497 * tmp2_129497;
            float tmp3_129499 = tmp2_129497 * x_129498;
            float tmp4_129500 = defunc_0_f_res_129489 * tmp3_129499;
            float defunc_1_op_res_129501 = tmp4_129500 + redout_129482;
            
            ((float *) mem_129439)[i_129481] = tmp4_129500;
            
            float redout_tmp_129515 = defunc_1_op_res_129501;
            
            redout_129482 = redout_tmp_129515;
        }
        defunc_2_reduce_res_129441 = redout_129482;
        
        float a0_129465 = 1.0F / defunc_2_reduce_res_129441;
        float defunc_2_reduce_res_129466;
        float redout_129504 = 0.0F;
        
        for (int64_t i_129503 = 0; i_129503 < t_window_114521; i_129503++) {
            float x_129505 = ((float *) mem_129439)[i_129503];
            bool cond_129506 = sle64(x_120235, i_129503);
            float defunc_0_f_res_129507;
            
            if (cond_129506) {
                defunc_0_f_res_129507 = 0.0F;
            } else {
                int64_t i_129508 = add64(x_129434, i_129503);
                float x_129509 = ((float *) mem_122959.mem)[gtid_120179 *
                                                            n_114518 +
                                                            i_129508];
                
                defunc_0_f_res_129507 = x_129509;
            }
            
            float x_129510 = a0_129465 * x_129505;
            float defunc_9_fit_fun_res_129511 = defunc_0_f_res_129507 *
                  x_129510;
            float defunc_1_op_res_129512 = defunc_9_fit_fun_res_129511 +
                  redout_129504;
            float redout_tmp_129517 = defunc_1_op_res_129512;
            
            redout_129504 = redout_tmp_129517;
        }
        defunc_2_reduce_res_129466 = redout_129504;
        ((float *) mem_123106.mem)[gtid_120181] = defunc_2_reduce_res_129466;
    }
    
  cleanup:
    { }
    free(mem_129439);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131672_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131672_end -
                 futhark_mc_segmap_parloop_131672_start;
        
        ctx->futhark_mc_segmap_parloop_131672_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131672_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131672_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131670(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120180 = tid;
    int num_tasks_129479 = info.nsubtasks;
    struct futhark_mc_task_131669 *futhark_mc_task_131669 =
                                  (struct futhark_mc_task_131669 *) args;
    struct futhark_context *ctx = futhark_mc_task_131669->ctx;
    uint64_t futhark_mc_segmap_task_131670_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131670_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131669->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131669->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131669->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131669->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131669->free_i_114594;
    int64_t gtid_120179 = futhark_mc_task_131669->free_gtid_120179;
    int64_t x_120235 = futhark_mc_task_131669->free_x_120235;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131669->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131669->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131669->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131669->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131669->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 = futhark_mc_task_131669->free_bytes_123086;
    struct memblock mem_123106 = {.desc ="mem_123106", .mem =
                                  futhark_mc_task_131669->free_mem_123106,
                                  .size =0, .references =NULL};
    int64_t iter_129480;
    struct futhark_mc_segmap_parloop_struct_131671
    futhark_mc_segmap_parloop_struct_131671;
    
    futhark_mc_segmap_parloop_struct_131671.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131671.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131671.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131671.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131671.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131671.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131671.free_gtid_120179 = gtid_120179;
    futhark_mc_segmap_parloop_struct_131671.free_x_120235 = x_120235;
    futhark_mc_segmap_parloop_struct_131671.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131671.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131671.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131671.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131671.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131671.free_bytes_123086 = bytes_123086;
    futhark_mc_segmap_parloop_struct_131671.free_mem_123106 = mem_123106.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131672_task;
    
    futhark_mc_segmap_parloop_131672_task.name =
        "futhark_mc_segmap_parloop_131672";
    futhark_mc_segmap_parloop_131672_task.fn = futhark_mc_segmap_parloop_131672;
    futhark_mc_segmap_parloop_131672_task.args =
        &futhark_mc_segmap_parloop_struct_131671;
    futhark_mc_segmap_parloop_131672_task.iterations = iterations;
    futhark_mc_segmap_parloop_131672_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131672_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131672_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131672_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131672_task);
    
    if (futhark_mc_segmap_parloop_131672_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131672_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131672_total_end -
                 futhark_mc_segmap_parloop_131672_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131672_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131672_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131672_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131670_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131670_end -
                 futhark_mc_segmap_task_131670_start;
        
        ctx->futhark_mc_segmap_task_131670_runs[tid]++;
        ctx->futhark_mc_segmap_task_131670_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131670_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131675 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123086;
    char *free_mem_123106;
};
struct futhark_mc_task_131678 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_129394;
    float free_x_129395;
    float free_defunc_0_f_res_129398;
    float *retval_defunc_2_reduce_res_129400;
    char *retval_mem_129399;
};
struct futhark_mc_segred_stage_1_parloop_struct_131681 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_129394;
    float free_x_129395;
    float free_defunc_0_f_res_129398;
    char *free_mem_129399;
    char *free_reduce_stage_1_tid_res_arr_mem_129552;
};
static int futhark_mc_segred_stage_1_parloop_131682(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120184,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131681
    *futhark_mc_segred_stage_1_parloop_struct_131681 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131681 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131681->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131682_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131682_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131681->free_n_114518;
    int64_t gtid_120179 =
            futhark_mc_segred_stage_1_parloop_struct_131681->free_gtid_120179;
    int64_t x_120235 =
            futhark_mc_segred_stage_1_parloop_struct_131681->free_x_120235;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131681->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131681->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_129394 =
            futhark_mc_segred_stage_1_parloop_struct_131681->free_x_129394;
    float x_129395 =
          futhark_mc_segred_stage_1_parloop_struct_131681->free_x_129395;
    float defunc_0_f_res_129398 =
          futhark_mc_segred_stage_1_parloop_struct_131681->free_defunc_0_f_res_129398;
    struct memblock mem_129399 = {.desc ="mem_129399", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131681->free_mem_129399,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129552 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129552",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131681->free_reduce_stage_1_tid_res_arr_mem_129552,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129554 = start;
    float x_129519;
    float x_129520;
    float local_acc_129555 = 0.0F;
    
    for (; iter_129554 < end; iter_129554++) {
        int64_t gtid_120185 = iter_129554;
        bool cond_129522 = sle64(x_120235, gtid_120185);
        float defunc_0_f_res_129523;
        
        if (cond_129522) {
            defunc_0_f_res_129523 = 0.0F;
        } else {
            int64_t i_129524 = add64(gtid_120185, x_129394);
            float x_129525 = ((float *) mem_121982.mem)[gtid_120179 * n_114518 +
                                                        i_129524];
            float defunc_0_f_res_f_res_129526 = 1.0F + x_129525;
            
            defunc_0_f_res_129523 = defunc_0_f_res_f_res_129526;
        }
        
        float defunc_0_f_res_129527;
        
        if (cond_129522) {
            defunc_0_f_res_129527 = 0.0F;
        } else {
            int64_t i_129528 = add64(gtid_120185, x_129394);
            float x_129529 = ((float *) mem_122408.mem)[gtid_120179 * n_114518 +
                                                        i_129528];
            
            defunc_0_f_res_129527 = x_129529;
        }
        
        float x_j_129530 = defunc_0_f_res_129523 - defunc_0_f_res_129398;
        float abs_res_129531 = (float) fabs(x_j_129530);
        float tmp1_129532 = abs_res_129531 / x_129395;
        float x_129533 = tmp1_129532 * tmp1_129532;
        float y_129534 = tmp1_129532 * x_129533;
        float tmp2_129535 = 1.0F - y_129534;
        float x_129536 = tmp2_129535 * tmp2_129535;
        float tmp3_129537 = tmp2_129535 * x_129536;
        float tmp4_129538 = defunc_0_f_res_129527 * tmp3_129537;
        
        // save map-out results
        {
            ((float *) mem_129399.mem)[gtid_120185] = tmp4_129538;
        }
        // Load accum params
        {
            x_129519 = local_acc_129555;
        }
        // Load next params
        {
            x_129520 = tmp4_129538;
        }
        // Red body
        {
            float defunc_1_op_res_129521 = x_129519 + x_129520;
            
            local_acc_129555 = defunc_1_op_res_129521;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129552.mem)[flat_tid_120184] =
        local_acc_129555;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131682_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131682_end -
                 futhark_mc_segred_stage_1_parloop_131682_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131682_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131682_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131682_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131679(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120184 = tid;
    int num_tasks_129551 = info.nsubtasks;
    struct futhark_mc_task_131678 *futhark_mc_task_131678 =
                                  (struct futhark_mc_task_131678 *) args;
    struct futhark_context *ctx = futhark_mc_task_131678->ctx;
    uint64_t futhark_mc_segred_task_131679_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131679_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131678->free_n_114518;
    int64_t gtid_120179 = futhark_mc_task_131678->free_gtid_120179;
    int64_t x_120235 = futhark_mc_task_131678->free_x_120235;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131678->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131678->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_129394 = futhark_mc_task_131678->free_x_129394;
    float x_129395 = futhark_mc_task_131678->free_x_129395;
    float defunc_0_f_res_129398 =
          futhark_mc_task_131678->free_defunc_0_f_res_129398;
    float defunc_2_reduce_res_129400 =
          *futhark_mc_task_131678->retval_defunc_2_reduce_res_129400;
    struct memblock mem_129399 = {.desc ="mem_129399", .mem =
                                  futhark_mc_task_131678->retval_mem_129399,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_129552_cached_sizze_131680 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129552 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129552_cached_sizze_131680 <
        (size_t) ((int64_t) 4 * num_tasks_129551)) {
        reduce_stage_1_tid_res_arr_mem_129552 =
            realloc(reduce_stage_1_tid_res_arr_mem_129552, (int64_t) 4 *
                    num_tasks_129551);
        reduce_stage_1_tid_res_arr_mem_129552_cached_sizze_131680 =
            (int64_t) 4 * num_tasks_129551;
    }
    
    int64_t iter_129554;
    struct futhark_mc_segred_stage_1_parloop_struct_131681
    futhark_mc_segred_stage_1_parloop_struct_131681;
    
    futhark_mc_segred_stage_1_parloop_struct_131681.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_gtid_120179 =
        gtid_120179;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_x_120235 = x_120235;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_x_129394 = x_129394;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_x_129395 = x_129395;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_defunc_0_f_res_129398 =
        defunc_0_f_res_129398;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_mem_129399 =
        mem_129399.mem;
    futhark_mc_segred_stage_1_parloop_struct_131681.free_reduce_stage_1_tid_res_arr_mem_129552 =
        reduce_stage_1_tid_res_arr_mem_129552;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131682_task;
    
    futhark_mc_segred_stage_1_parloop_131682_task.name =
        "futhark_mc_segred_stage_1_parloop_131682";
    futhark_mc_segred_stage_1_parloop_131682_task.fn =
        futhark_mc_segred_stage_1_parloop_131682;
    futhark_mc_segred_stage_1_parloop_131682_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131681;
    futhark_mc_segred_stage_1_parloop_131682_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131682_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131682_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131682_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131682_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131682_task);
    
    if (futhark_mc_segred_stage_1_parloop_131682_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131682_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131682_total_end -
                 futhark_mc_segred_stage_1_parloop_131682_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131682_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131682_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131682_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129400 = 0.0F;
    }
    
    float x_129556;
    float x_129557;
    
    for (int32_t i_129559 = 0; i_129559 < num_tasks_129551; i_129559++) {
        flat_tid_120184 = i_129559;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129556 = defunc_2_reduce_res_129400;
            }
            // load next params
            {
                x_129557 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129552)[flat_tid_120184];
            }
            // red body
            {
                float defunc_1_op_res_129558 = x_129556 + x_129557;
                
                defunc_2_reduce_res_129400 = defunc_1_op_res_129558;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129552);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131679_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131679_end -
                 futhark_mc_segred_task_131679_start;
        
        ctx->futhark_mc_segred_task_131679_runs[tid]++;
        ctx->futhark_mc_segred_task_131679_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131679_iter[tid] += iterations;
    }
    *futhark_mc_task_131678->retval_defunc_2_reduce_res_129400 =
        defunc_2_reduce_res_129400;
    futhark_mc_task_131678->retval_mem_129399 = mem_129399.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131683 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_122959;
    int64_t free_x_129394;
    char *free_mem_129399;
    float free_a0_129422;
    float *retval_defunc_2_reduce_res_129423;
};
struct futhark_mc_segred_stage_1_parloop_struct_131686 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120179;
    int64_t free_x_120235;
    char *free_mem_122959;
    int64_t free_x_129394;
    char *free_mem_129399;
    float free_a0_129422;
    char *free_reduce_stage_1_tid_res_arr_mem_129561;
};
static int futhark_mc_segred_stage_1_parloop_131687(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120186,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131686
    *futhark_mc_segred_stage_1_parloop_struct_131686 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131686 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131686->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131687_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131687_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131686->free_n_114518;
    int64_t gtid_120179 =
            futhark_mc_segred_stage_1_parloop_struct_131686->free_gtid_120179;
    int64_t x_120235 =
            futhark_mc_segred_stage_1_parloop_struct_131686->free_x_120235;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131686->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_129394 =
            futhark_mc_segred_stage_1_parloop_struct_131686->free_x_129394;
    struct memblock mem_129399 = {.desc ="mem_129399", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131686->free_mem_129399,
                                  .size =0, .references =NULL};
    float a0_129422 =
          futhark_mc_segred_stage_1_parloop_struct_131686->free_a0_129422;
    struct memblock reduce_stage_1_tid_res_arr_mem_129561 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129561",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131686->free_reduce_stage_1_tid_res_arr_mem_129561,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129563 = start;
    float x_129539;
    float x_129540;
    float local_acc_129564 = 0.0F;
    
    for (; iter_129563 < end; iter_129563++) {
        int64_t gtid_120187 = iter_129563;
        float x_129542 = ((float *) mem_129399.mem)[gtid_120187];
        bool cond_129543 = sle64(x_120235, gtid_120187);
        float defunc_0_f_res_129544;
        
        if (cond_129543) {
            defunc_0_f_res_129544 = 0.0F;
        } else {
            int64_t i_129545 = add64(gtid_120187, x_129394);
            float x_129546 = ((float *) mem_122959.mem)[gtid_120179 * n_114518 +
                                                        i_129545];
            
            defunc_0_f_res_129544 = x_129546;
        }
        
        float x_129547 = a0_129422 * x_129542;
        float defunc_9_fit_fun_res_129548 = defunc_0_f_res_129544 * x_129547;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129539 = local_acc_129564;
        }
        // Load next params
        {
            x_129540 = defunc_9_fit_fun_res_129548;
        }
        // Red body
        {
            float defunc_1_op_res_129541 = x_129539 + x_129540;
            
            local_acc_129564 = defunc_1_op_res_129541;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129561.mem)[flat_tid_120186] =
        local_acc_129564;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131687_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131687_end -
                 futhark_mc_segred_stage_1_parloop_131687_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131687_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131687_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131687_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131684(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120186 = tid;
    int num_tasks_129560 = info.nsubtasks;
    struct futhark_mc_task_131683 *futhark_mc_task_131683 =
                                  (struct futhark_mc_task_131683 *) args;
    struct futhark_context *ctx = futhark_mc_task_131683->ctx;
    uint64_t futhark_mc_segred_task_131684_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131684_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131683->free_n_114518;
    int64_t gtid_120179 = futhark_mc_task_131683->free_gtid_120179;
    int64_t x_120235 = futhark_mc_task_131683->free_x_120235;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131683->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_129394 = futhark_mc_task_131683->free_x_129394;
    struct memblock mem_129399 = {.desc ="mem_129399", .mem =
                                  futhark_mc_task_131683->free_mem_129399,
                                  .size =0, .references =NULL};
    float a0_129422 = futhark_mc_task_131683->free_a0_129422;
    float defunc_2_reduce_res_129423 =
          *futhark_mc_task_131683->retval_defunc_2_reduce_res_129423;
    size_t reduce_stage_1_tid_res_arr_mem_129561_cached_sizze_131685 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129561 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129561_cached_sizze_131685 <
        (size_t) ((int64_t) 4 * num_tasks_129560)) {
        reduce_stage_1_tid_res_arr_mem_129561 =
            realloc(reduce_stage_1_tid_res_arr_mem_129561, (int64_t) 4 *
                    num_tasks_129560);
        reduce_stage_1_tid_res_arr_mem_129561_cached_sizze_131685 =
            (int64_t) 4 * num_tasks_129560;
    }
    
    int64_t iter_129563;
    struct futhark_mc_segred_stage_1_parloop_struct_131686
    futhark_mc_segred_stage_1_parloop_struct_131686;
    
    futhark_mc_segred_stage_1_parloop_struct_131686.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_gtid_120179 =
        gtid_120179;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_x_120235 = x_120235;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_mem_122959 =
        mem_122959.mem;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_x_129394 = x_129394;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_mem_129399 =
        mem_129399.mem;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_a0_129422 = a0_129422;
    futhark_mc_segred_stage_1_parloop_struct_131686.free_reduce_stage_1_tid_res_arr_mem_129561 =
        reduce_stage_1_tid_res_arr_mem_129561;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131687_task;
    
    futhark_mc_segred_stage_1_parloop_131687_task.name =
        "futhark_mc_segred_stage_1_parloop_131687";
    futhark_mc_segred_stage_1_parloop_131687_task.fn =
        futhark_mc_segred_stage_1_parloop_131687;
    futhark_mc_segred_stage_1_parloop_131687_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131686;
    futhark_mc_segred_stage_1_parloop_131687_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131687_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131687_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131687_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131687_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131687_task);
    
    if (futhark_mc_segred_stage_1_parloop_131687_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131687_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131687_total_end -
                 futhark_mc_segred_stage_1_parloop_131687_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131687_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131687_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131687_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129423 = 0.0F;
    }
    
    float x_129565;
    float x_129566;
    
    for (int32_t i_129568 = 0; i_129568 < num_tasks_129560; i_129568++) {
        flat_tid_120186 = i_129568;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129565 = defunc_2_reduce_res_129423;
            }
            // load next params
            {
                x_129566 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129561)[flat_tid_120186];
            }
            // red body
            {
                float defunc_1_op_res_129567 = x_129565 + x_129566;
                
                defunc_2_reduce_res_129423 = defunc_1_op_res_129567;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129561);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131684_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131684_end -
                 futhark_mc_segred_task_131684_start;
        
        ctx->futhark_mc_segred_task_131684_runs[tid]++;
        ctx->futhark_mc_segred_task_131684_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131684_iter[tid] += iterations;
    }
    *futhark_mc_task_131683->retval_defunc_2_reduce_res_129423 =
        defunc_2_reduce_res_129423;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131676(void *args, int64_t start,
                                            int64_t end, int flat_tid_120182,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131675
    *futhark_mc_segmap_parloop_struct_131675 =
    (struct futhark_mc_segmap_parloop_struct_131675 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131675->ctx;
    uint64_t futhark_mc_segmap_parloop_131676_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131676_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131675->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131675->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131675->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131675->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131675->free_i_114594;
    int64_t gtid_120179 =
            futhark_mc_segmap_parloop_struct_131675->free_gtid_120179;
    int64_t x_120235 = futhark_mc_segmap_parloop_struct_131675->free_x_120235;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131675->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131675->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131675->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131675->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131675->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 =
            futhark_mc_segmap_parloop_struct_131675->free_bytes_123086;
    struct memblock mem_123106 = {.desc ="mem_123106", .mem =
                                  futhark_mc_segmap_parloop_struct_131675->free_mem_123106,
                                  .size =0, .references =NULL};
    size_t mem_129399_cached_sizze_131677 = 0;
    char *mem_129399 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129518 = start;
    
    if (mem_129399_cached_sizze_131677 < (size_t) bytes_123086) {
        mem_129399 = realloc(mem_129399, bytes_123086);
        mem_129399_cached_sizze_131677 = bytes_123086;
    }
    for (; iter_129518 < end; iter_129518++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129549 = t_n_m_114575;
        int64_t gtid_120183 = iter_129518;
        int64_t remnant_129550 = iter_129518 - gtid_120183;
        int64_t x_129394 = ((int64_t *) mem_122182.mem)[gtid_120179 *
                                                        t_n_m_114575 +
                                                        gtid_120183];
        float x_129395 = ((float *) mem_122186.mem)[gtid_120179 * t_n_m_114575 +
                                                    gtid_120183];
        int64_t min_arg_129396 = mul64(t_jump_114525, gtid_120183);
        int64_t min_res_129397 = smin64(i_114594, min_arg_129396);
        float defunc_0_f_res_129398 = sitofp_i64_f32(min_res_129397);
        float defunc_2_reduce_res_129400;
        int64_t flat_tid_120184 = (int64_t) 0;
        int32_t num_tasks_129551;
        struct futhark_mc_task_131678 futhark_mc_task_131678;
        
        futhark_mc_task_131678.ctx = ctx;
        futhark_mc_task_131678.free_n_114518 = n_114518;
        futhark_mc_task_131678.free_gtid_120179 = gtid_120179;
        futhark_mc_task_131678.free_x_120235 = x_120235;
        futhark_mc_task_131678.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131678.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131678.free_x_129394 = x_129394;
        futhark_mc_task_131678.free_x_129395 = x_129395;
        futhark_mc_task_131678.free_defunc_0_f_res_129398 =
            defunc_0_f_res_129398;
        futhark_mc_task_131678.retval_defunc_2_reduce_res_129400 =
            &defunc_2_reduce_res_129400;
        futhark_mc_task_131678.retval_mem_129399 = mem_129399;
        
        struct scheduler_segop futhark_mc_task_131678_task;
        
        futhark_mc_task_131678_task.args = &futhark_mc_task_131678;
        futhark_mc_task_131678_task.top_level_fn =
            futhark_mc_segred_task_131679;
        futhark_mc_task_131678_task.name = "futhark_mc_segred_task_131679";
        futhark_mc_task_131678_task.iterations = t_window_114521;
        futhark_mc_task_131678_task.task_time =
            &ctx->futhark_mc_segred_task_131679_total_time;
        futhark_mc_task_131678_task.task_iter =
            &ctx->futhark_mc_segred_task_131679_total_iter;
        futhark_mc_task_131678_task.sched = STATIC;
        futhark_mc_task_131678_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131679_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131678_task);
        
        if (futhark_mc_segred_task_131679_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_129422 = 1.0F / defunc_2_reduce_res_129400;
        float defunc_2_reduce_res_129423;
        int64_t flat_tid_120186 = (int64_t) 0;
        int32_t num_tasks_129560;
        struct futhark_mc_task_131683 futhark_mc_task_131683;
        
        futhark_mc_task_131683.ctx = ctx;
        futhark_mc_task_131683.free_n_114518 = n_114518;
        futhark_mc_task_131683.free_gtid_120179 = gtid_120179;
        futhark_mc_task_131683.free_x_120235 = x_120235;
        futhark_mc_task_131683.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131683.free_x_129394 = x_129394;
        futhark_mc_task_131683.free_mem_129399 = mem_129399;
        futhark_mc_task_131683.free_a0_129422 = a0_129422;
        futhark_mc_task_131683.retval_defunc_2_reduce_res_129423 =
            &defunc_2_reduce_res_129423;
        
        struct scheduler_segop futhark_mc_task_131683_task;
        
        futhark_mc_task_131683_task.args = &futhark_mc_task_131683;
        futhark_mc_task_131683_task.top_level_fn =
            futhark_mc_segred_task_131684;
        futhark_mc_task_131683_task.name = "futhark_mc_segred_task_131684";
        futhark_mc_task_131683_task.iterations = t_window_114521;
        futhark_mc_task_131683_task.task_time =
            &ctx->futhark_mc_segred_task_131684_total_time;
        futhark_mc_task_131683_task.task_iter =
            &ctx->futhark_mc_segred_task_131684_total_iter;
        futhark_mc_task_131683_task.sched = STATIC;
        futhark_mc_task_131683_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131684_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131683_task);
        
        if (futhark_mc_segred_task_131684_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_123106.mem)[gtid_120183] = defunc_2_reduce_res_129423;
    }
    
  cleanup:
    { }
    free(mem_129399);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131676_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131676_end -
                 futhark_mc_segmap_parloop_131676_start;
        
        ctx->futhark_mc_segmap_parloop_131676_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131676_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131676_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131674(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120182 = tid;
    int num_tasks_129479 = info.nsubtasks;
    struct futhark_mc_task_131669 *futhark_mc_task_131669 =
                                  (struct futhark_mc_task_131669 *) args;
    struct futhark_context *ctx = futhark_mc_task_131669->ctx;
    uint64_t futhark_mc_segmap_nested_task_131674_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131674_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131669->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131669->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131669->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131669->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131669->free_i_114594;
    int64_t gtid_120179 = futhark_mc_task_131669->free_gtid_120179;
    int64_t x_120235 = futhark_mc_task_131669->free_x_120235;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131669->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131669->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131669->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131669->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131669->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 = futhark_mc_task_131669->free_bytes_123086;
    struct memblock mem_123106 = {.desc ="mem_123106", .mem =
                                  futhark_mc_task_131669->free_mem_123106,
                                  .size =0, .references =NULL};
    int64_t iter_129518;
    struct futhark_mc_segmap_parloop_struct_131675
    futhark_mc_segmap_parloop_struct_131675;
    
    futhark_mc_segmap_parloop_struct_131675.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131675.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131675.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131675.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131675.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131675.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131675.free_gtid_120179 = gtid_120179;
    futhark_mc_segmap_parloop_struct_131675.free_x_120235 = x_120235;
    futhark_mc_segmap_parloop_struct_131675.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131675.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131675.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131675.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131675.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131675.free_bytes_123086 = bytes_123086;
    futhark_mc_segmap_parloop_struct_131675.free_mem_123106 = mem_123106.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131676_task;
    
    futhark_mc_segmap_parloop_131676_task.name =
        "futhark_mc_segmap_parloop_131676";
    futhark_mc_segmap_parloop_131676_task.fn = futhark_mc_segmap_parloop_131676;
    futhark_mc_segmap_parloop_131676_task.args =
        &futhark_mc_segmap_parloop_struct_131675;
    futhark_mc_segmap_parloop_131676_task.iterations = iterations;
    futhark_mc_segmap_parloop_131676_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131676_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131676_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131676_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131676_task);
    
    if (futhark_mc_segmap_parloop_131676_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131676_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131676_total_end -
                 futhark_mc_segmap_parloop_131676_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131676_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131676_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131676_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131674_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131674_end -
                 futhark_mc_segmap_nested_task_131674_start;
        
        ctx->futhark_mc_segmap_nested_task_131674_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131674_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131674_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131667(void *args, int64_t start,
                                            int64_t end, int flat_tid_120178,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131666
    *futhark_mc_segmap_parloop_struct_131666 =
    (struct futhark_mc_segmap_parloop_struct_131666 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131666->ctx;
    uint64_t futhark_mc_segmap_parloop_131667_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131667_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131666->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131666->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131666->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131666->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131666->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131666->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131666->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 =
            futhark_mc_segmap_parloop_struct_131666->free_bytes_123086;
    struct memblock mem_123140 = {.desc ="mem_123140", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_123140,
                                  .size =0, .references =NULL};
    size_t mem_123106_cached_sizze_131668 = 0;
    char *mem_123106 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129393 = start;
    
    if (mem_123106_cached_sizze_131668 < (size_t) bytes_122113) {
        mem_123106 = realloc(mem_123106, bytes_122113);
        mem_123106_cached_sizze_131668 = bytes_122113;
    }
    for (; iter_129393 < end; iter_129393++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129477 = m_114517;
        int64_t gtid_120179 = iter_129393;
        int64_t remnant_129478 = iter_129393 - gtid_120179;
        int64_t x_120235 = ((int64_t *) mem_121960.mem)[gtid_120179];
        int64_t flat_tid_120180 = (int64_t) 0;
        int32_t num_tasks_129479;
        int64_t flat_tid_120182 = (int64_t) 0;
        struct futhark_mc_task_131669 futhark_mc_task_131669;
        
        futhark_mc_task_131669.ctx = ctx;
        futhark_mc_task_131669.free_n_114518 = n_114518;
        futhark_mc_task_131669.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131669.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131669.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131669.free_i_114594 = i_114594;
        futhark_mc_task_131669.free_gtid_120179 = gtid_120179;
        futhark_mc_task_131669.free_x_120235 = x_120235;
        futhark_mc_task_131669.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131669.free_mem_122182 = mem_122182.mem;
        futhark_mc_task_131669.free_mem_122186 = mem_122186.mem;
        futhark_mc_task_131669.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131669.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131669.free_bytes_123086 = bytes_123086;
        futhark_mc_task_131669.free_mem_123106 = mem_123106;
        
        struct scheduler_segop futhark_mc_task_131669_task;
        
        futhark_mc_task_131669_task.args = &futhark_mc_task_131669;
        futhark_mc_task_131669_task.top_level_fn =
            futhark_mc_segmap_task_131670;
        futhark_mc_task_131669_task.name = "futhark_mc_segmap_task_131670";
        futhark_mc_task_131669_task.iterations = t_n_m_114575;
        futhark_mc_task_131669_task.task_time =
            &ctx->futhark_mc_segmap_task_131670_total_time;
        futhark_mc_task_131669_task.task_iter =
            &ctx->futhark_mc_segmap_task_131670_total_iter;
        futhark_mc_task_131669_task.sched = STATIC;
        futhark_mc_task_131669_task.nested_fn =
            futhark_mc_segmap_nested_task_131674;
        
        int futhark_mc_segmap_task_131670_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131669_task);
        
        if (futhark_mc_segmap_task_131670_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123140.mem + gtid_120179 * t_n_m_114575 * (int64_t) 4,
                mem_123106 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123106);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131667_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131667_end -
                 futhark_mc_segmap_parloop_131667_start;
        
        ctx->futhark_mc_segmap_parloop_131667_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131667_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131667_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131665(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120178 = tid;
    int num_tasks_129340 = info.nsubtasks;
    struct futhark_mc_task_131659 *futhark_mc_task_131659 =
                                  (struct futhark_mc_task_131659 *) args;
    struct futhark_context *ctx = futhark_mc_task_131659->ctx;
    uint64_t futhark_mc_segmap_nested_task_131665_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131665_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131659->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131659->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131659->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131659->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131659->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131659->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131659->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131659->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131659->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131659->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131659->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131659->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131659->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123086 = futhark_mc_task_131659->free_bytes_123086;
    struct memblock mem_123140 = {.desc ="mem_123140", .mem =
                                  futhark_mc_task_131659->free_mem_123140,
                                  .size =0, .references =NULL};
    int64_t iter_129393;
    struct futhark_mc_segmap_parloop_struct_131666
    futhark_mc_segmap_parloop_struct_131666;
    
    futhark_mc_segmap_parloop_struct_131666.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131666.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131666.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131666.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131666.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131666.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131666.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131666.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131666.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131666.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131666.free_bytes_123086 = bytes_123086;
    futhark_mc_segmap_parloop_struct_131666.free_mem_123140 = mem_123140.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131667_task;
    
    futhark_mc_segmap_parloop_131667_task.name =
        "futhark_mc_segmap_parloop_131667";
    futhark_mc_segmap_parloop_131667_task.fn = futhark_mc_segmap_parloop_131667;
    futhark_mc_segmap_parloop_131667_task.args =
        &futhark_mc_segmap_parloop_struct_131666;
    futhark_mc_segmap_parloop_131667_task.iterations = iterations;
    futhark_mc_segmap_parloop_131667_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131667_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131667_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131667_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131667_task);
    
    if (futhark_mc_segmap_parloop_131667_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131667_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131667_total_end -
                 futhark_mc_segmap_parloop_131667_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131667_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131667_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131667_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131665_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131665_end -
                 futhark_mc_segmap_nested_task_131665_start;
        
        ctx->futhark_mc_segmap_nested_task_131665_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131665_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131665_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131688 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123141;
    char *free_mem_123246;
    char *free_mem_123250;
};
struct futhark_mc_segmap_parloop_struct_131690 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123141;
    char *free_mem_123246;
    char *free_mem_123250;
};
static int futhark_mc_segmap_parloop_131691(void *args, int64_t start,
                                            int64_t end, int flat_tid_120321,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131690
    *futhark_mc_segmap_parloop_struct_131690 =
    (struct futhark_mc_segmap_parloop_struct_131690 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131690->ctx;
    uint64_t futhark_mc_segmap_parloop_131691_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131691_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131690->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131690->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131690->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131690->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131690->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131690->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131690->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 =
            futhark_mc_segmap_parloop_struct_131690->free_bytes_123141;
    struct memblock mem_123246 = {.desc ="mem_123246", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_123246,
                                  .size =0, .references =NULL};
    struct memblock mem_123250 = {.desc ="mem_123250", .mem =
                                  futhark_mc_segmap_parloop_struct_131690->free_mem_123250,
                                  .size =0, .references =NULL};
    size_t mem_123185_cached_sizze_131692 = 0;
    char *mem_123185 = NULL;
    size_t mem_123188_cached_sizze_131693 = 0;
    char *mem_123188 = NULL;
    size_t mem_123205_cached_sizze_131694 = 0;
    char *mem_123205 = NULL;
    size_t mem_123208_cached_sizze_131695 = 0;
    char *mem_123208 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129570 = start;
    
    if (mem_123185_cached_sizze_131692 < (size_t) bytes_122113) {
        mem_123185 = realloc(mem_123185, bytes_122113);
        mem_123185_cached_sizze_131692 = bytes_122113;
    }
    if (mem_123188_cached_sizze_131693 < (size_t) bytes_122113) {
        mem_123188 = realloc(mem_123188, bytes_122113);
        mem_123188_cached_sizze_131693 = bytes_122113;
    }
    if (mem_123205_cached_sizze_131694 < (size_t) bytes_123141) {
        mem_123205 = realloc(mem_123205, bytes_123141);
        mem_123205_cached_sizze_131694 = bytes_123141;
    }
    if (mem_123208_cached_sizze_131695 < (size_t) bytes_123141) {
        mem_123208 = realloc(mem_123208, bytes_123141);
        mem_123208_cached_sizze_131695 = bytes_123141;
    }
    for (; iter_129570 < end; iter_129570++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129647 = m_114517;
        int64_t gtid_120322 = iter_129570;
        int64_t remnant_129648 = iter_129570 - gtid_120322;
        int64_t x_116236 = ((int64_t *) mem_121960.mem)[gtid_120322];
        
        for (int64_t i_129571 = 0; i_129571 < t_n_m_114575; i_129571++) {
            int64_t x_129574 = ((int64_t *) mem_122182.mem)[gtid_120322 *
                                                            t_n_m_114575 +
                                                            i_129571];
            float x_129575 = ((float *) mem_122186.mem)[gtid_120322 *
                                                        t_n_m_114575 +
                                                        i_129571];
            int64_t min_arg_129576 = mul64(t_jump_114525, i_129571);
            int64_t min_res_129577 = smin64(i_114594, min_arg_129576);
            float defunc_0_f_res_129578 = sitofp_i64_f32(min_res_129577);
            float defunc_2_reduce_res_129581;
            float defunc_2_reduce_res_129582;
            float defunc_2_reduce_res_129583;
            float redout_129587;
            float redout_129588;
            float redout_129589;
            
            redout_129587 = 0.0F;
            redout_129588 = 0.0F;
            redout_129589 = 0.0F;
            for (int64_t i_129586 = 0; i_129586 < t_window_114521; i_129586++) {
                bool cond_129592 = sle64(x_116236, i_129586);
                float defunc_0_f_res_129593;
                
                if (cond_129592) {
                    defunc_0_f_res_129593 = 0.0F;
                } else {
                    int64_t i_129594 = add64(x_129574, i_129586);
                    float x_129595 = ((float *) mem_121982.mem)[gtid_120322 *
                                                                n_114518 +
                                                                i_129594];
                    float defunc_0_f_res_f_res_129596 = 1.0F + x_129595;
                    
                    defunc_0_f_res_129593 = defunc_0_f_res_f_res_129596;
                }
                
                float defunc_0_f_res_129597;
                
                if (cond_129592) {
                    defunc_0_f_res_129597 = 0.0F;
                } else {
                    int64_t i_129598 = add64(x_129574, i_129586);
                    float x_129599 = ((float *) mem_122408.mem)[gtid_120322 *
                                                                n_114518 +
                                                                i_129598];
                    
                    defunc_0_f_res_129597 = x_129599;
                }
                
                float x_j_129600 = defunc_0_f_res_129593 -
                      defunc_0_f_res_129578;
                float abs_res_129601 = (float) fabs(x_j_129600);
                float tmp1_129602 = abs_res_129601 / x_129575;
                float x_129603 = tmp1_129602 * tmp1_129602;
                float y_129604 = tmp1_129602 * x_129603;
                float tmp2_129605 = 1.0F - y_129604;
                float x_129606 = tmp2_129605 * tmp2_129605;
                float tmp3_129607 = tmp2_129605 * x_129606;
                float tmp4_129608 = defunc_0_f_res_129597 * tmp3_129607;
                float defunc_1_f_res_129609 = x_j_129600 * tmp4_129608;
                float defunc_1_f_res_129610 = x_j_129600 *
                      defunc_1_f_res_129609;
                float defunc_1_op_res_129611 = tmp4_129608 + redout_129587;
                float defunc_1_op_res_129612 = defunc_1_f_res_129609 +
                      redout_129588;
                float defunc_1_op_res_129613 = defunc_1_f_res_129610 +
                      redout_129589;
                
                ((float *) mem_123205)[i_129586] = defunc_1_f_res_129609;
                ((float *) mem_123208)[i_129586] = tmp4_129608;
                
                float redout_tmp_129651 = defunc_1_op_res_129611;
                float redout_tmp_129652 = defunc_1_op_res_129612;
                float redout_tmp_129653 = defunc_1_op_res_129613;
                
                redout_129587 = redout_tmp_129651;
                redout_129588 = redout_tmp_129652;
                redout_129589 = redout_tmp_129653;
            }
            defunc_2_reduce_res_129581 = redout_129587;
            defunc_2_reduce_res_129582 = redout_129588;
            defunc_2_reduce_res_129583 = redout_129589;
            
            float x_129616 = defunc_2_reduce_res_129581 *
                  defunc_2_reduce_res_129583;
            float y_129617 = defunc_2_reduce_res_129582 *
                  defunc_2_reduce_res_129582;
            float y_129618 = x_129616 - y_129617;
            float det1_129619 = 1.0F / y_129618;
            float a11_129620 = defunc_2_reduce_res_129583 * det1_129619;
            float negate_arg_129621 = defunc_2_reduce_res_129582 * det1_129619;
            float b11_129622 = 0.0F - negate_arg_129621;
            float c11_129623 = defunc_2_reduce_res_129581 * det1_129619;
            float defunc_2_reduce_res_129624;
            float defunc_2_reduce_res_129625;
            float redout_129627;
            float redout_129628;
            
            redout_129627 = 0.0F;
            redout_129628 = 0.0F;
            for (int64_t i_129626 = 0; i_129626 < t_window_114521; i_129626++) {
                float x_129629 = ((float *) mem_123208)[i_129626];
                float x_129630 = ((float *) mem_123205)[i_129626];
                bool cond_129631 = sle64(x_116236, i_129626);
                float defunc_0_f_res_129632;
                
                if (cond_129631) {
                    defunc_0_f_res_129632 = 0.0F;
                } else {
                    int64_t i_129633 = add64(x_129574, i_129626);
                    float x_129634 = ((float *) mem_122959.mem)[gtid_120322 *
                                                                n_114518 +
                                                                i_129633];
                    
                    defunc_0_f_res_129632 = x_129634;
                }
                
                float x_129635 = a11_129620 * x_129629;
                float y_129636 = b11_129622 * x_129630;
                float x_129637 = x_129635 + y_129636;
                float defunc_9_fit_fun_res_129638 = defunc_0_f_res_129632 *
                      x_129637;
                float x_129639 = b11_129622 * x_129629;
                float y_129640 = c11_129623 * x_129630;
                float x_129641 = x_129639 + y_129640;
                float defunc_9_slope_fun_res_129642 = defunc_0_f_res_129632 *
                      x_129641;
                float defunc_1_op_res_129643 = defunc_9_fit_fun_res_129638 +
                      redout_129627;
                float defunc_1_op_res_129644 = defunc_9_slope_fun_res_129642 +
                      redout_129628;
                float redout_tmp_129656 = defunc_1_op_res_129643;
                float redout_tmp_129657 = defunc_1_op_res_129644;
                
                redout_129627 = redout_tmp_129656;
                redout_129628 = redout_tmp_129657;
            }
            defunc_2_reduce_res_129624 = redout_129627;
            defunc_2_reduce_res_129625 = redout_129628;
            ((float *) mem_123185)[i_129571] = defunc_2_reduce_res_129624;
            ((float *) mem_123188)[i_129571] = defunc_2_reduce_res_129625;
        }
        memmove(mem_123246.mem + gtid_120322 * t_n_m_114575 * (int64_t) 4,
                mem_123185 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123250.mem + gtid_120322 * t_n_m_114575 * (int64_t) 4,
                mem_123188 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123185);
    free(mem_123188);
    free(mem_123205);
    free(mem_123208);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131691_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131691_end -
                 futhark_mc_segmap_parloop_131691_start;
        
        ctx->futhark_mc_segmap_parloop_131691_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131691_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131691_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131689(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120321 = tid;
    int num_tasks_129569 = info.nsubtasks;
    struct futhark_mc_task_131688 *futhark_mc_task_131688 =
                                  (struct futhark_mc_task_131688 *) args;
    struct futhark_context *ctx = futhark_mc_task_131688->ctx;
    uint64_t futhark_mc_segmap_task_131689_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131689_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131688->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131688->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131688->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131688->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131688->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131688->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131688->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131688->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131688->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131688->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131688->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131688->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131688->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 = futhark_mc_task_131688->free_bytes_123141;
    struct memblock mem_123246 = {.desc ="mem_123246", .mem =
                                  futhark_mc_task_131688->free_mem_123246,
                                  .size =0, .references =NULL};
    struct memblock mem_123250 = {.desc ="mem_123250", .mem =
                                  futhark_mc_task_131688->free_mem_123250,
                                  .size =0, .references =NULL};
    int64_t iter_129570;
    struct futhark_mc_segmap_parloop_struct_131690
    futhark_mc_segmap_parloop_struct_131690;
    
    futhark_mc_segmap_parloop_struct_131690.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131690.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131690.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131690.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131690.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131690.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131690.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131690.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131690.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131690.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131690.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131690.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131690.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131690.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131690.free_bytes_123141 = bytes_123141;
    futhark_mc_segmap_parloop_struct_131690.free_mem_123246 = mem_123246.mem;
    futhark_mc_segmap_parloop_struct_131690.free_mem_123250 = mem_123250.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131691_task;
    
    futhark_mc_segmap_parloop_131691_task.name =
        "futhark_mc_segmap_parloop_131691";
    futhark_mc_segmap_parloop_131691_task.fn = futhark_mc_segmap_parloop_131691;
    futhark_mc_segmap_parloop_131691_task.args =
        &futhark_mc_segmap_parloop_struct_131690;
    futhark_mc_segmap_parloop_131691_task.iterations = iterations;
    futhark_mc_segmap_parloop_131691_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131691_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131691_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131691_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131691_task);
    
    if (futhark_mc_segmap_parloop_131691_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131691_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131691_total_end -
                 futhark_mc_segmap_parloop_131691_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131691_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131691_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131691_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131689_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131689_end -
                 futhark_mc_segmap_task_131689_start;
        
        ctx->futhark_mc_segmap_task_131689_runs[tid]++;
        ctx->futhark_mc_segmap_task_131689_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131689_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131697 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123141;
    char *free_mem_123246;
    char *free_mem_123250;
};
struct futhark_mc_task_131701 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123141;
    char *free_mem_123179;
    char *free_mem_123182;
};
struct futhark_mc_segmap_parloop_struct_131703 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123141;
    char *free_mem_123179;
    char *free_mem_123182;
};
static int futhark_mc_segmap_parloop_131704(void *args, int64_t start,
                                            int64_t end, int flat_tid_120325,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131703
    *futhark_mc_segmap_parloop_struct_131703 =
    (struct futhark_mc_segmap_parloop_struct_131703 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131703->ctx;
    uint64_t futhark_mc_segmap_parloop_131704_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131704_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131703->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131703->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131703->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131703->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131703->free_i_114594;
    int64_t gtid_120324 =
            futhark_mc_segmap_parloop_struct_131703->free_gtid_120324;
    int64_t x_120409 = futhark_mc_segmap_parloop_struct_131703->free_x_120409;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 =
            futhark_mc_segmap_parloop_struct_131703->free_bytes_123141;
    struct memblock mem_123179 = {.desc ="mem_123179", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_123179,
                                  .size =0, .references =NULL};
    struct memblock mem_123182 = {.desc ="mem_123182", .mem =
                                  futhark_mc_segmap_parloop_struct_131703->free_mem_123182,
                                  .size =0, .references =NULL};
    size_t mem_129734_cached_sizze_131705 = 0;
    char *mem_129734 = NULL;
    size_t mem_129736_cached_sizze_131706 = 0;
    char *mem_129736 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129805 = start;
    
    if (mem_129734_cached_sizze_131705 < (size_t) bytes_123141) {
        mem_129734 = realloc(mem_129734, bytes_123141);
        mem_129734_cached_sizze_131705 = bytes_123141;
    }
    if (mem_129736_cached_sizze_131706 < (size_t) bytes_123141) {
        mem_129736 = realloc(mem_129736, bytes_123141);
        mem_129736_cached_sizze_131706 = bytes_123141;
    }
    for (; iter_129805 < end; iter_129805++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129855 = t_n_m_114575;
        int64_t gtid_120326 = iter_129805;
        int64_t remnant_129856 = iter_129805 - gtid_120326;
        int64_t x_129729 = ((int64_t *) mem_122182.mem)[gtid_120324 *
                                                        t_n_m_114575 +
                                                        gtid_120326];
        float x_129730 = ((float *) mem_122186.mem)[gtid_120324 * t_n_m_114575 +
                                                    gtid_120326];
        int64_t min_arg_129731 = mul64(t_jump_114525, gtid_120326);
        int64_t min_res_129732 = smin64(i_114594, min_arg_129731);
        float defunc_0_f_res_129733 = sitofp_i64_f32(min_res_129732);
        float defunc_2_reduce_res_129738;
        float defunc_2_reduce_res_129739;
        float defunc_2_reduce_res_129740;
        float redout_129807;
        float redout_129808;
        float redout_129809;
        
        redout_129807 = 0.0F;
        redout_129808 = 0.0F;
        redout_129809 = 0.0F;
        for (int64_t i_129806 = 0; i_129806 < t_window_114521; i_129806++) {
            bool cond_129812 = sle64(x_120409, i_129806);
            float defunc_0_f_res_129813;
            
            if (cond_129812) {
                defunc_0_f_res_129813 = 0.0F;
            } else {
                int64_t i_129814 = add64(x_129729, i_129806);
                float x_129815 = ((float *) mem_121982.mem)[gtid_120324 *
                                                            n_114518 +
                                                            i_129814];
                float defunc_0_f_res_f_res_129816 = 1.0F + x_129815;
                
                defunc_0_f_res_129813 = defunc_0_f_res_f_res_129816;
            }
            
            float defunc_0_f_res_129817;
            
            if (cond_129812) {
                defunc_0_f_res_129817 = 0.0F;
            } else {
                int64_t i_129818 = add64(x_129729, i_129806);
                float x_129819 = ((float *) mem_122408.mem)[gtid_120324 *
                                                            n_114518 +
                                                            i_129818];
                
                defunc_0_f_res_129817 = x_129819;
            }
            
            float x_j_129820 = defunc_0_f_res_129813 - defunc_0_f_res_129733;
            float abs_res_129821 = (float) fabs(x_j_129820);
            float tmp1_129822 = abs_res_129821 / x_129730;
            float x_129823 = tmp1_129822 * tmp1_129822;
            float y_129824 = tmp1_129822 * x_129823;
            float tmp2_129825 = 1.0F - y_129824;
            float x_129826 = tmp2_129825 * tmp2_129825;
            float tmp3_129827 = tmp2_129825 * x_129826;
            float tmp4_129828 = defunc_0_f_res_129817 * tmp3_129827;
            float defunc_1_f_res_129829 = x_j_129820 * tmp4_129828;
            float defunc_1_f_res_129830 = x_j_129820 * defunc_1_f_res_129829;
            float defunc_1_op_res_129831 = tmp4_129828 + redout_129807;
            float defunc_1_op_res_129832 = defunc_1_f_res_129829 +
                  redout_129808;
            float defunc_1_op_res_129833 = defunc_1_f_res_129830 +
                  redout_129809;
            
            ((float *) mem_129734)[i_129806] = defunc_1_f_res_129829;
            ((float *) mem_129736)[i_129806] = tmp4_129828;
            
            float redout_tmp_129857 = defunc_1_op_res_129831;
            float redout_tmp_129858 = defunc_1_op_res_129832;
            float redout_tmp_129859 = defunc_1_op_res_129833;
            
            redout_129807 = redout_tmp_129857;
            redout_129808 = redout_tmp_129858;
            redout_129809 = redout_tmp_129859;
        }
        defunc_2_reduce_res_129738 = redout_129807;
        defunc_2_reduce_res_129739 = redout_129808;
        defunc_2_reduce_res_129740 = redout_129809;
        
        float x_129773 = defunc_2_reduce_res_129738 *
              defunc_2_reduce_res_129740;
        float y_129774 = defunc_2_reduce_res_129739 *
              defunc_2_reduce_res_129739;
        float y_129775 = x_129773 - y_129774;
        float det1_129776 = 1.0F / y_129775;
        float a11_129777 = defunc_2_reduce_res_129740 * det1_129776;
        float negate_arg_129778 = defunc_2_reduce_res_129739 * det1_129776;
        float b11_129779 = 0.0F - negate_arg_129778;
        float c11_129780 = defunc_2_reduce_res_129738 * det1_129776;
        float defunc_2_reduce_res_129781;
        float defunc_2_reduce_res_129782;
        float redout_129837;
        float redout_129838;
        
        redout_129837 = 0.0F;
        redout_129838 = 0.0F;
        for (int64_t i_129836 = 0; i_129836 < t_window_114521; i_129836++) {
            float x_129839 = ((float *) mem_129736)[i_129836];
            float x_129840 = ((float *) mem_129734)[i_129836];
            bool cond_129841 = sle64(x_120409, i_129836);
            float defunc_0_f_res_129842;
            
            if (cond_129841) {
                defunc_0_f_res_129842 = 0.0F;
            } else {
                int64_t i_129843 = add64(x_129729, i_129836);
                float x_129844 = ((float *) mem_122959.mem)[gtid_120324 *
                                                            n_114518 +
                                                            i_129843];
                
                defunc_0_f_res_129842 = x_129844;
            }
            
            float x_129845 = a11_129777 * x_129839;
            float y_129846 = b11_129779 * x_129840;
            float x_129847 = x_129845 + y_129846;
            float defunc_9_fit_fun_res_129848 = defunc_0_f_res_129842 *
                  x_129847;
            float x_129849 = b11_129779 * x_129839;
            float y_129850 = c11_129780 * x_129840;
            float x_129851 = x_129849 + y_129850;
            float defunc_9_slope_fun_res_129852 = defunc_0_f_res_129842 *
                  x_129851;
            float defunc_1_op_res_129853 = defunc_9_fit_fun_res_129848 +
                  redout_129837;
            float defunc_1_op_res_129854 = defunc_9_slope_fun_res_129852 +
                  redout_129838;
            float redout_tmp_129862 = defunc_1_op_res_129853;
            float redout_tmp_129863 = defunc_1_op_res_129854;
            
            redout_129837 = redout_tmp_129862;
            redout_129838 = redout_tmp_129863;
        }
        defunc_2_reduce_res_129781 = redout_129837;
        defunc_2_reduce_res_129782 = redout_129838;
        ((float *) mem_123179.mem)[gtid_120326] = defunc_2_reduce_res_129781;
        ((float *) mem_123182.mem)[gtid_120326] = defunc_2_reduce_res_129782;
    }
    
  cleanup:
    { }
    free(mem_129734);
    free(mem_129736);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131704_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131704_end -
                 futhark_mc_segmap_parloop_131704_start;
        
        ctx->futhark_mc_segmap_parloop_131704_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131704_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131704_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131702(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120325 = tid;
    int num_tasks_129804 = info.nsubtasks;
    struct futhark_mc_task_131701 *futhark_mc_task_131701 =
                                  (struct futhark_mc_task_131701 *) args;
    struct futhark_context *ctx = futhark_mc_task_131701->ctx;
    uint64_t futhark_mc_segmap_task_131702_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131702_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131701->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131701->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131701->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131701->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131701->free_i_114594;
    int64_t gtid_120324 = futhark_mc_task_131701->free_gtid_120324;
    int64_t x_120409 = futhark_mc_task_131701->free_x_120409;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131701->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131701->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131701->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131701->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131701->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 = futhark_mc_task_131701->free_bytes_123141;
    struct memblock mem_123179 = {.desc ="mem_123179", .mem =
                                  futhark_mc_task_131701->free_mem_123179,
                                  .size =0, .references =NULL};
    struct memblock mem_123182 = {.desc ="mem_123182", .mem =
                                  futhark_mc_task_131701->free_mem_123182,
                                  .size =0, .references =NULL};
    int64_t iter_129805;
    struct futhark_mc_segmap_parloop_struct_131703
    futhark_mc_segmap_parloop_struct_131703;
    
    futhark_mc_segmap_parloop_struct_131703.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131703.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131703.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131703.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131703.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131703.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131703.free_gtid_120324 = gtid_120324;
    futhark_mc_segmap_parloop_struct_131703.free_x_120409 = x_120409;
    futhark_mc_segmap_parloop_struct_131703.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131703.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131703.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131703.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131703.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131703.free_bytes_123141 = bytes_123141;
    futhark_mc_segmap_parloop_struct_131703.free_mem_123179 = mem_123179.mem;
    futhark_mc_segmap_parloop_struct_131703.free_mem_123182 = mem_123182.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131704_task;
    
    futhark_mc_segmap_parloop_131704_task.name =
        "futhark_mc_segmap_parloop_131704";
    futhark_mc_segmap_parloop_131704_task.fn = futhark_mc_segmap_parloop_131704;
    futhark_mc_segmap_parloop_131704_task.args =
        &futhark_mc_segmap_parloop_struct_131703;
    futhark_mc_segmap_parloop_131704_task.iterations = iterations;
    futhark_mc_segmap_parloop_131704_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131704_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131704_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131704_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131704_task);
    
    if (futhark_mc_segmap_parloop_131704_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131704_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131704_total_end -
                 futhark_mc_segmap_parloop_131704_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131704_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131704_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131704_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131702_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131702_end -
                 futhark_mc_segmap_task_131702_start;
        
        ctx->futhark_mc_segmap_task_131702_runs[tid]++;
        ctx->futhark_mc_segmap_task_131702_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131702_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131708 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123141;
    char *free_mem_123179;
    char *free_mem_123182;
};
struct futhark_mc_task_131712 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_129659;
    float free_x_129660;
    float free_defunc_0_f_res_129663;
    float *retval_defunc_2_reduce_res_129666;
    float *retval_defunc_2_reduce_res_129667;
    float *retval_defunc_2_reduce_res_129668;
    char *retval_mem_129664;
    char *retval_mem_129665;
};
struct futhark_mc_segred_stage_1_parloop_struct_131717 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_129659;
    float free_x_129660;
    float free_defunc_0_f_res_129663;
    char *free_mem_129664;
    char *free_mem_129665;
    char *free_reduce_stage_1_tid_res_arr_mem_129916;
    char *free_reduce_stage_1_tid_res_arr_mem_129918;
    char *free_reduce_stage_1_tid_res_arr_mem_129920;
};
static int futhark_mc_segred_stage_1_parloop_131718(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120329,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131717
    *futhark_mc_segred_stage_1_parloop_struct_131717 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131717 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131717->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131718_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131718_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131717->free_n_114518;
    int64_t gtid_120324 =
            futhark_mc_segred_stage_1_parloop_struct_131717->free_gtid_120324;
    int64_t x_120409 =
            futhark_mc_segred_stage_1_parloop_struct_131717->free_x_120409;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131717->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131717->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_129659 =
            futhark_mc_segred_stage_1_parloop_struct_131717->free_x_129659;
    float x_129660 =
          futhark_mc_segred_stage_1_parloop_struct_131717->free_x_129660;
    float defunc_0_f_res_129663 =
          futhark_mc_segred_stage_1_parloop_struct_131717->free_defunc_0_f_res_129663;
    struct memblock mem_129664 = {.desc ="mem_129664", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131717->free_mem_129664,
                                  .size =0, .references =NULL};
    struct memblock mem_129665 = {.desc ="mem_129665", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131717->free_mem_129665,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129916 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129916",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131717->free_reduce_stage_1_tid_res_arr_mem_129916,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129918 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129918",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131717->free_reduce_stage_1_tid_res_arr_mem_129918,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129920 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129920",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131717->free_reduce_stage_1_tid_res_arr_mem_129920,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129922 = start;
    float x_129865;
    float x_129866;
    float x_129868;
    float x_129869;
    float x_129871;
    float x_129872;
    float local_acc_129923 = 0.0F;
    float local_acc_129924 = 0.0F;
    float local_acc_129925 = 0.0F;
    
    for (; iter_129922 < end; iter_129922++) {
        int64_t gtid_120330 = iter_129922;
        bool cond_129874 = sle64(x_120409, gtid_120330);
        float defunc_0_f_res_129875;
        
        if (cond_129874) {
            defunc_0_f_res_129875 = 0.0F;
        } else {
            int64_t i_129876 = add64(gtid_120330, x_129659);
            float x_129877 = ((float *) mem_121982.mem)[gtid_120324 * n_114518 +
                                                        i_129876];
            float defunc_0_f_res_f_res_129878 = 1.0F + x_129877;
            
            defunc_0_f_res_129875 = defunc_0_f_res_f_res_129878;
        }
        
        float defunc_0_f_res_129879;
        
        if (cond_129874) {
            defunc_0_f_res_129879 = 0.0F;
        } else {
            int64_t i_129880 = add64(gtid_120330, x_129659);
            float x_129881 = ((float *) mem_122408.mem)[gtid_120324 * n_114518 +
                                                        i_129880];
            
            defunc_0_f_res_129879 = x_129881;
        }
        
        float x_j_129882 = defunc_0_f_res_129875 - defunc_0_f_res_129663;
        float abs_res_129883 = (float) fabs(x_j_129882);
        float tmp1_129884 = abs_res_129883 / x_129660;
        float x_129885 = tmp1_129884 * tmp1_129884;
        float y_129886 = tmp1_129884 * x_129885;
        float tmp2_129887 = 1.0F - y_129886;
        float x_129888 = tmp2_129887 * tmp2_129887;
        float tmp3_129889 = tmp2_129887 * x_129888;
        float tmp4_129890 = defunc_0_f_res_129879 * tmp3_129889;
        float defunc_1_f_res_129891 = x_j_129882 * tmp4_129890;
        float defunc_1_f_res_129892 = x_j_129882 * defunc_1_f_res_129891;
        
        // save map-out results
        {
            ((float *) mem_129664.mem)[gtid_120330] = defunc_1_f_res_129891;
            ((float *) mem_129665.mem)[gtid_120330] = tmp4_129890;
        }
        // Load accum params
        {
            x_129865 = local_acc_129923;
        }
        // Load next params
        {
            x_129866 = tmp4_129890;
        }
        // Red body
        {
            float defunc_1_op_res_129867 = x_129865 + x_129866;
            
            local_acc_129923 = defunc_1_op_res_129867;
        }
        // Load accum params
        {
            x_129868 = local_acc_129924;
        }
        // Load next params
        {
            x_129869 = defunc_1_f_res_129891;
        }
        // Red body
        {
            float defunc_1_op_res_129870 = x_129868 + x_129869;
            
            local_acc_129924 = defunc_1_op_res_129870;
        }
        // Load accum params
        {
            x_129871 = local_acc_129925;
        }
        // Load next params
        {
            x_129872 = defunc_1_f_res_129892;
        }
        // Red body
        {
            float defunc_1_op_res_129873 = x_129871 + x_129872;
            
            local_acc_129925 = defunc_1_op_res_129873;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129916.mem)[flat_tid_120329] =
        local_acc_129923;
    ((float *) reduce_stage_1_tid_res_arr_mem_129918.mem)[flat_tid_120329] =
        local_acc_129924;
    ((float *) reduce_stage_1_tid_res_arr_mem_129920.mem)[flat_tid_120329] =
        local_acc_129925;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131718_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131718_end -
                 futhark_mc_segred_stage_1_parloop_131718_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131718_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131718_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131718_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131713(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120329 = tid;
    int num_tasks_129915 = info.nsubtasks;
    struct futhark_mc_task_131712 *futhark_mc_task_131712 =
                                  (struct futhark_mc_task_131712 *) args;
    struct futhark_context *ctx = futhark_mc_task_131712->ctx;
    uint64_t futhark_mc_segred_task_131713_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131713_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131712->free_n_114518;
    int64_t gtid_120324 = futhark_mc_task_131712->free_gtid_120324;
    int64_t x_120409 = futhark_mc_task_131712->free_x_120409;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131712->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131712->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_129659 = futhark_mc_task_131712->free_x_129659;
    float x_129660 = futhark_mc_task_131712->free_x_129660;
    float defunc_0_f_res_129663 =
          futhark_mc_task_131712->free_defunc_0_f_res_129663;
    float defunc_2_reduce_res_129666 =
          *futhark_mc_task_131712->retval_defunc_2_reduce_res_129666;
    float defunc_2_reduce_res_129667 =
          *futhark_mc_task_131712->retval_defunc_2_reduce_res_129667;
    float defunc_2_reduce_res_129668 =
          *futhark_mc_task_131712->retval_defunc_2_reduce_res_129668;
    struct memblock mem_129664 = {.desc ="mem_129664", .mem =
                                  futhark_mc_task_131712->retval_mem_129664,
                                  .size =0, .references =NULL};
    struct memblock mem_129665 = {.desc ="mem_129665", .mem =
                                  futhark_mc_task_131712->retval_mem_129665,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_129916_cached_sizze_131714 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129916 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129918_cached_sizze_131715 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129918 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129920_cached_sizze_131716 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129920 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129916_cached_sizze_131714 <
        (size_t) ((int64_t) 4 * num_tasks_129915)) {
        reduce_stage_1_tid_res_arr_mem_129916 =
            realloc(reduce_stage_1_tid_res_arr_mem_129916, (int64_t) 4 *
                    num_tasks_129915);
        reduce_stage_1_tid_res_arr_mem_129916_cached_sizze_131714 =
            (int64_t) 4 * num_tasks_129915;
    }
    if (reduce_stage_1_tid_res_arr_mem_129918_cached_sizze_131715 <
        (size_t) ((int64_t) 4 * num_tasks_129915)) {
        reduce_stage_1_tid_res_arr_mem_129918 =
            realloc(reduce_stage_1_tid_res_arr_mem_129918, (int64_t) 4 *
                    num_tasks_129915);
        reduce_stage_1_tid_res_arr_mem_129918_cached_sizze_131715 =
            (int64_t) 4 * num_tasks_129915;
    }
    if (reduce_stage_1_tid_res_arr_mem_129920_cached_sizze_131716 <
        (size_t) ((int64_t) 4 * num_tasks_129915)) {
        reduce_stage_1_tid_res_arr_mem_129920 =
            realloc(reduce_stage_1_tid_res_arr_mem_129920, (int64_t) 4 *
                    num_tasks_129915);
        reduce_stage_1_tid_res_arr_mem_129920_cached_sizze_131716 =
            (int64_t) 4 * num_tasks_129915;
    }
    
    int64_t iter_129922;
    struct futhark_mc_segred_stage_1_parloop_struct_131717
    futhark_mc_segred_stage_1_parloop_struct_131717;
    
    futhark_mc_segred_stage_1_parloop_struct_131717.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_gtid_120324 =
        gtid_120324;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_x_120409 = x_120409;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_mem_121982 =
        mem_121982.mem;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_mem_122408 =
        mem_122408.mem;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_x_129659 = x_129659;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_x_129660 = x_129660;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_defunc_0_f_res_129663 =
        defunc_0_f_res_129663;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_mem_129664 =
        mem_129664.mem;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_mem_129665 =
        mem_129665.mem;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_reduce_stage_1_tid_res_arr_mem_129916 =
        reduce_stage_1_tid_res_arr_mem_129916;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_reduce_stage_1_tid_res_arr_mem_129918 =
        reduce_stage_1_tid_res_arr_mem_129918;
    futhark_mc_segred_stage_1_parloop_struct_131717.free_reduce_stage_1_tid_res_arr_mem_129920 =
        reduce_stage_1_tid_res_arr_mem_129920;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131718_task;
    
    futhark_mc_segred_stage_1_parloop_131718_task.name =
        "futhark_mc_segred_stage_1_parloop_131718";
    futhark_mc_segred_stage_1_parloop_131718_task.fn =
        futhark_mc_segred_stage_1_parloop_131718;
    futhark_mc_segred_stage_1_parloop_131718_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131717;
    futhark_mc_segred_stage_1_parloop_131718_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131718_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131718_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131718_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131718_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131718_task);
    
    if (futhark_mc_segred_stage_1_parloop_131718_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131718_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131718_total_end -
                 futhark_mc_segred_stage_1_parloop_131718_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131718_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131718_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131718_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129666 = 0.0F;
        defunc_2_reduce_res_129667 = 0.0F;
        defunc_2_reduce_res_129668 = 0.0F;
    }
    
    float x_129926;
    float x_129927;
    float x_129929;
    float x_129930;
    float x_129932;
    float x_129933;
    
    for (int32_t i_129935 = 0; i_129935 < num_tasks_129915; i_129935++) {
        flat_tid_120329 = i_129935;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129926 = defunc_2_reduce_res_129666;
            }
            // load next params
            {
                x_129927 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129916)[flat_tid_120329];
            }
            // red body
            {
                float defunc_1_op_res_129928 = x_129926 + x_129927;
                
                defunc_2_reduce_res_129666 = defunc_1_op_res_129928;
            }
            // load acc params
            {
                x_129929 = defunc_2_reduce_res_129667;
            }
            // load next params
            {
                x_129930 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129918)[flat_tid_120329];
            }
            // red body
            {
                float defunc_1_op_res_129931 = x_129929 + x_129930;
                
                defunc_2_reduce_res_129667 = defunc_1_op_res_129931;
            }
            // load acc params
            {
                x_129932 = defunc_2_reduce_res_129668;
            }
            // load next params
            {
                x_129933 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129920)[flat_tid_120329];
            }
            // red body
            {
                float defunc_1_op_res_129934 = x_129932 + x_129933;
                
                defunc_2_reduce_res_129668 = defunc_1_op_res_129934;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129916);
    free(reduce_stage_1_tid_res_arr_mem_129918);
    free(reduce_stage_1_tid_res_arr_mem_129920);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131713_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131713_end -
                 futhark_mc_segred_task_131713_start;
        
        ctx->futhark_mc_segred_task_131713_runs[tid]++;
        ctx->futhark_mc_segred_task_131713_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131713_iter[tid] += iterations;
    }
    *futhark_mc_task_131712->retval_defunc_2_reduce_res_129666 =
        defunc_2_reduce_res_129666;
    *futhark_mc_task_131712->retval_defunc_2_reduce_res_129667 =
        defunc_2_reduce_res_129667;
    *futhark_mc_task_131712->retval_defunc_2_reduce_res_129668 =
        defunc_2_reduce_res_129668;
    futhark_mc_task_131712->retval_mem_129664 = mem_129664.mem;
    futhark_mc_task_131712->retval_mem_129665 = mem_129665.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131719 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_122959;
    int64_t free_x_129659;
    char *free_mem_129664;
    char *free_mem_129665;
    float free_a11_129703;
    float free_b11_129705;
    float free_c11_129706;
    float *retval_defunc_2_reduce_res_129707;
    float *retval_defunc_2_reduce_res_129708;
};
struct futhark_mc_segred_stage_1_parloop_struct_131723 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120324;
    int64_t free_x_120409;
    char *free_mem_122959;
    int64_t free_x_129659;
    char *free_mem_129664;
    char *free_mem_129665;
    float free_a11_129703;
    float free_b11_129705;
    float free_c11_129706;
    char *free_reduce_stage_1_tid_res_arr_mem_129937;
    char *free_reduce_stage_1_tid_res_arr_mem_129939;
};
static int futhark_mc_segred_stage_1_parloop_131724(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120331,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131723
    *futhark_mc_segred_stage_1_parloop_struct_131723 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131723 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131723->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131724_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131724_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131723->free_n_114518;
    int64_t gtid_120324 =
            futhark_mc_segred_stage_1_parloop_struct_131723->free_gtid_120324;
    int64_t x_120409 =
            futhark_mc_segred_stage_1_parloop_struct_131723->free_x_120409;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131723->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_129659 =
            futhark_mc_segred_stage_1_parloop_struct_131723->free_x_129659;
    struct memblock mem_129664 = {.desc ="mem_129664", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131723->free_mem_129664,
                                  .size =0, .references =NULL};
    struct memblock mem_129665 = {.desc ="mem_129665", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131723->free_mem_129665,
                                  .size =0, .references =NULL};
    float a11_129703 =
          futhark_mc_segred_stage_1_parloop_struct_131723->free_a11_129703;
    float b11_129705 =
          futhark_mc_segred_stage_1_parloop_struct_131723->free_b11_129705;
    float c11_129706 =
          futhark_mc_segred_stage_1_parloop_struct_131723->free_c11_129706;
    struct memblock reduce_stage_1_tid_res_arr_mem_129937 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129937",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131723->free_reduce_stage_1_tid_res_arr_mem_129937,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129939 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129939",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131723->free_reduce_stage_1_tid_res_arr_mem_129939,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129941 = start;
    float x_129893;
    float x_129894;
    float x_129896;
    float x_129897;
    float local_acc_129942 = 0.0F;
    float local_acc_129943 = 0.0F;
    
    for (; iter_129941 < end; iter_129941++) {
        int64_t gtid_120332 = iter_129941;
        float x_129899 = ((float *) mem_129665.mem)[gtid_120332];
        float x_129900 = ((float *) mem_129664.mem)[gtid_120332];
        bool cond_129901 = sle64(x_120409, gtid_120332);
        float defunc_0_f_res_129902;
        
        if (cond_129901) {
            defunc_0_f_res_129902 = 0.0F;
        } else {
            int64_t i_129903 = add64(gtid_120332, x_129659);
            float x_129904 = ((float *) mem_122959.mem)[gtid_120324 * n_114518 +
                                                        i_129903];
            
            defunc_0_f_res_129902 = x_129904;
        }
        
        float x_129905 = a11_129703 * x_129899;
        float y_129906 = b11_129705 * x_129900;
        float x_129907 = x_129905 + y_129906;
        float defunc_9_fit_fun_res_129908 = defunc_0_f_res_129902 * x_129907;
        float x_129909 = b11_129705 * x_129899;
        float y_129910 = c11_129706 * x_129900;
        float x_129911 = x_129909 + y_129910;
        float defunc_9_slope_fun_res_129912 = defunc_0_f_res_129902 * x_129911;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129893 = local_acc_129942;
        }
        // Load next params
        {
            x_129894 = defunc_9_fit_fun_res_129908;
        }
        // Red body
        {
            float defunc_1_op_res_129895 = x_129893 + x_129894;
            
            local_acc_129942 = defunc_1_op_res_129895;
        }
        // Load accum params
        {
            x_129896 = local_acc_129943;
        }
        // Load next params
        {
            x_129897 = defunc_9_slope_fun_res_129912;
        }
        // Red body
        {
            float defunc_1_op_res_129898 = x_129896 + x_129897;
            
            local_acc_129943 = defunc_1_op_res_129898;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129937.mem)[flat_tid_120331] =
        local_acc_129942;
    ((float *) reduce_stage_1_tid_res_arr_mem_129939.mem)[flat_tid_120331] =
        local_acc_129943;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131724_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131724_end -
                 futhark_mc_segred_stage_1_parloop_131724_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131724_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131724_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131724_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131720(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120331 = tid;
    int num_tasks_129936 = info.nsubtasks;
    struct futhark_mc_task_131719 *futhark_mc_task_131719 =
                                  (struct futhark_mc_task_131719 *) args;
    struct futhark_context *ctx = futhark_mc_task_131719->ctx;
    uint64_t futhark_mc_segred_task_131720_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131720_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131719->free_n_114518;
    int64_t gtid_120324 = futhark_mc_task_131719->free_gtid_120324;
    int64_t x_120409 = futhark_mc_task_131719->free_x_120409;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131719->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_129659 = futhark_mc_task_131719->free_x_129659;
    struct memblock mem_129664 = {.desc ="mem_129664", .mem =
                                  futhark_mc_task_131719->free_mem_129664,
                                  .size =0, .references =NULL};
    struct memblock mem_129665 = {.desc ="mem_129665", .mem =
                                  futhark_mc_task_131719->free_mem_129665,
                                  .size =0, .references =NULL};
    float a11_129703 = futhark_mc_task_131719->free_a11_129703;
    float b11_129705 = futhark_mc_task_131719->free_b11_129705;
    float c11_129706 = futhark_mc_task_131719->free_c11_129706;
    float defunc_2_reduce_res_129707 =
          *futhark_mc_task_131719->retval_defunc_2_reduce_res_129707;
    float defunc_2_reduce_res_129708 =
          *futhark_mc_task_131719->retval_defunc_2_reduce_res_129708;
    size_t reduce_stage_1_tid_res_arr_mem_129937_cached_sizze_131721 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129937 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129939_cached_sizze_131722 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129939 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129937_cached_sizze_131721 <
        (size_t) ((int64_t) 4 * num_tasks_129936)) {
        reduce_stage_1_tid_res_arr_mem_129937 =
            realloc(reduce_stage_1_tid_res_arr_mem_129937, (int64_t) 4 *
                    num_tasks_129936);
        reduce_stage_1_tid_res_arr_mem_129937_cached_sizze_131721 =
            (int64_t) 4 * num_tasks_129936;
    }
    if (reduce_stage_1_tid_res_arr_mem_129939_cached_sizze_131722 <
        (size_t) ((int64_t) 4 * num_tasks_129936)) {
        reduce_stage_1_tid_res_arr_mem_129939 =
            realloc(reduce_stage_1_tid_res_arr_mem_129939, (int64_t) 4 *
                    num_tasks_129936);
        reduce_stage_1_tid_res_arr_mem_129939_cached_sizze_131722 =
            (int64_t) 4 * num_tasks_129936;
    }
    
    int64_t iter_129941;
    struct futhark_mc_segred_stage_1_parloop_struct_131723
    futhark_mc_segred_stage_1_parloop_struct_131723;
    
    futhark_mc_segred_stage_1_parloop_struct_131723.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_gtid_120324 =
        gtid_120324;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_x_120409 = x_120409;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_mem_122959 =
        mem_122959.mem;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_x_129659 = x_129659;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_mem_129664 =
        mem_129664.mem;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_mem_129665 =
        mem_129665.mem;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_a11_129703 =
        a11_129703;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_b11_129705 =
        b11_129705;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_c11_129706 =
        c11_129706;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_reduce_stage_1_tid_res_arr_mem_129937 =
        reduce_stage_1_tid_res_arr_mem_129937;
    futhark_mc_segred_stage_1_parloop_struct_131723.free_reduce_stage_1_tid_res_arr_mem_129939 =
        reduce_stage_1_tid_res_arr_mem_129939;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131724_task;
    
    futhark_mc_segred_stage_1_parloop_131724_task.name =
        "futhark_mc_segred_stage_1_parloop_131724";
    futhark_mc_segred_stage_1_parloop_131724_task.fn =
        futhark_mc_segred_stage_1_parloop_131724;
    futhark_mc_segred_stage_1_parloop_131724_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131723;
    futhark_mc_segred_stage_1_parloop_131724_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131724_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131724_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131724_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131724_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131724_task);
    
    if (futhark_mc_segred_stage_1_parloop_131724_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131724_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131724_total_end -
                 futhark_mc_segred_stage_1_parloop_131724_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131724_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131724_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131724_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129707 = 0.0F;
        defunc_2_reduce_res_129708 = 0.0F;
    }
    
    float x_129944;
    float x_129945;
    float x_129947;
    float x_129948;
    
    for (int32_t i_129950 = 0; i_129950 < num_tasks_129936; i_129950++) {
        flat_tid_120331 = i_129950;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129944 = defunc_2_reduce_res_129707;
            }
            // load next params
            {
                x_129945 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129937)[flat_tid_120331];
            }
            // red body
            {
                float defunc_1_op_res_129946 = x_129944 + x_129945;
                
                defunc_2_reduce_res_129707 = defunc_1_op_res_129946;
            }
            // load acc params
            {
                x_129947 = defunc_2_reduce_res_129708;
            }
            // load next params
            {
                x_129948 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129939)[flat_tid_120331];
            }
            // red body
            {
                float defunc_1_op_res_129949 = x_129947 + x_129948;
                
                defunc_2_reduce_res_129708 = defunc_1_op_res_129949;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129937);
    free(reduce_stage_1_tid_res_arr_mem_129939);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131720_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131720_end -
                 futhark_mc_segred_task_131720_start;
        
        ctx->futhark_mc_segred_task_131720_runs[tid]++;
        ctx->futhark_mc_segred_task_131720_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131720_iter[tid] += iterations;
    }
    *futhark_mc_task_131719->retval_defunc_2_reduce_res_129707 =
        defunc_2_reduce_res_129707;
    *futhark_mc_task_131719->retval_defunc_2_reduce_res_129708 =
        defunc_2_reduce_res_129708;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131709(void *args, int64_t start,
                                            int64_t end, int flat_tid_120327,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131708
    *futhark_mc_segmap_parloop_struct_131708 =
    (struct futhark_mc_segmap_parloop_struct_131708 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131708->ctx;
    uint64_t futhark_mc_segmap_parloop_131709_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131709_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131708->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131708->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131708->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131708->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131708->free_i_114594;
    int64_t gtid_120324 =
            futhark_mc_segmap_parloop_struct_131708->free_gtid_120324;
    int64_t x_120409 = futhark_mc_segmap_parloop_struct_131708->free_x_120409;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 =
            futhark_mc_segmap_parloop_struct_131708->free_bytes_123141;
    struct memblock mem_123179 = {.desc ="mem_123179", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_123179,
                                  .size =0, .references =NULL};
    struct memblock mem_123182 = {.desc ="mem_123182", .mem =
                                  futhark_mc_segmap_parloop_struct_131708->free_mem_123182,
                                  .size =0, .references =NULL};
    size_t mem_129664_cached_sizze_131710 = 0;
    char *mem_129664 = NULL;
    size_t mem_129665_cached_sizze_131711 = 0;
    char *mem_129665 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129864 = start;
    
    if (mem_129664_cached_sizze_131710 < (size_t) bytes_123141) {
        mem_129664 = realloc(mem_129664, bytes_123141);
        mem_129664_cached_sizze_131710 = bytes_123141;
    }
    if (mem_129665_cached_sizze_131711 < (size_t) bytes_123141) {
        mem_129665 = realloc(mem_129665, bytes_123141);
        mem_129665_cached_sizze_131711 = bytes_123141;
    }
    for (; iter_129864 < end; iter_129864++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129913 = t_n_m_114575;
        int64_t gtid_120328 = iter_129864;
        int64_t remnant_129914 = iter_129864 - gtid_120328;
        int64_t x_129659 = ((int64_t *) mem_122182.mem)[gtid_120324 *
                                                        t_n_m_114575 +
                                                        gtid_120328];
        float x_129660 = ((float *) mem_122186.mem)[gtid_120324 * t_n_m_114575 +
                                                    gtid_120328];
        int64_t min_arg_129661 = mul64(t_jump_114525, gtid_120328);
        int64_t min_res_129662 = smin64(i_114594, min_arg_129661);
        float defunc_0_f_res_129663 = sitofp_i64_f32(min_res_129662);
        float defunc_2_reduce_res_129666;
        float defunc_2_reduce_res_129667;
        float defunc_2_reduce_res_129668;
        int64_t flat_tid_120329 = (int64_t) 0;
        int32_t num_tasks_129915;
        struct futhark_mc_task_131712 futhark_mc_task_131712;
        
        futhark_mc_task_131712.ctx = ctx;
        futhark_mc_task_131712.free_n_114518 = n_114518;
        futhark_mc_task_131712.free_gtid_120324 = gtid_120324;
        futhark_mc_task_131712.free_x_120409 = x_120409;
        futhark_mc_task_131712.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131712.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131712.free_x_129659 = x_129659;
        futhark_mc_task_131712.free_x_129660 = x_129660;
        futhark_mc_task_131712.free_defunc_0_f_res_129663 =
            defunc_0_f_res_129663;
        futhark_mc_task_131712.retval_defunc_2_reduce_res_129666 =
            &defunc_2_reduce_res_129666;
        futhark_mc_task_131712.retval_defunc_2_reduce_res_129667 =
            &defunc_2_reduce_res_129667;
        futhark_mc_task_131712.retval_defunc_2_reduce_res_129668 =
            &defunc_2_reduce_res_129668;
        futhark_mc_task_131712.retval_mem_129664 = mem_129664;
        futhark_mc_task_131712.retval_mem_129665 = mem_129665;
        
        struct scheduler_segop futhark_mc_task_131712_task;
        
        futhark_mc_task_131712_task.args = &futhark_mc_task_131712;
        futhark_mc_task_131712_task.top_level_fn =
            futhark_mc_segred_task_131713;
        futhark_mc_task_131712_task.name = "futhark_mc_segred_task_131713";
        futhark_mc_task_131712_task.iterations = t_window_114521;
        futhark_mc_task_131712_task.task_time =
            &ctx->futhark_mc_segred_task_131713_total_time;
        futhark_mc_task_131712_task.task_iter =
            &ctx->futhark_mc_segred_task_131713_total_iter;
        futhark_mc_task_131712_task.sched = STATIC;
        futhark_mc_task_131712_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131713_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131712_task);
        
        if (futhark_mc_segred_task_131713_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_129699 = defunc_2_reduce_res_129666 *
              defunc_2_reduce_res_129668;
        float y_129700 = defunc_2_reduce_res_129667 *
              defunc_2_reduce_res_129667;
        float y_129701 = x_129699 - y_129700;
        float det1_129702 = 1.0F / y_129701;
        float a11_129703 = defunc_2_reduce_res_129668 * det1_129702;
        float negate_arg_129704 = defunc_2_reduce_res_129667 * det1_129702;
        float b11_129705 = 0.0F - negate_arg_129704;
        float c11_129706 = defunc_2_reduce_res_129666 * det1_129702;
        float defunc_2_reduce_res_129707;
        float defunc_2_reduce_res_129708;
        int64_t flat_tid_120331 = (int64_t) 0;
        int32_t num_tasks_129936;
        struct futhark_mc_task_131719 futhark_mc_task_131719;
        
        futhark_mc_task_131719.ctx = ctx;
        futhark_mc_task_131719.free_n_114518 = n_114518;
        futhark_mc_task_131719.free_gtid_120324 = gtid_120324;
        futhark_mc_task_131719.free_x_120409 = x_120409;
        futhark_mc_task_131719.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131719.free_x_129659 = x_129659;
        futhark_mc_task_131719.free_mem_129664 = mem_129664;
        futhark_mc_task_131719.free_mem_129665 = mem_129665;
        futhark_mc_task_131719.free_a11_129703 = a11_129703;
        futhark_mc_task_131719.free_b11_129705 = b11_129705;
        futhark_mc_task_131719.free_c11_129706 = c11_129706;
        futhark_mc_task_131719.retval_defunc_2_reduce_res_129707 =
            &defunc_2_reduce_res_129707;
        futhark_mc_task_131719.retval_defunc_2_reduce_res_129708 =
            &defunc_2_reduce_res_129708;
        
        struct scheduler_segop futhark_mc_task_131719_task;
        
        futhark_mc_task_131719_task.args = &futhark_mc_task_131719;
        futhark_mc_task_131719_task.top_level_fn =
            futhark_mc_segred_task_131720;
        futhark_mc_task_131719_task.name = "futhark_mc_segred_task_131720";
        futhark_mc_task_131719_task.iterations = t_window_114521;
        futhark_mc_task_131719_task.task_time =
            &ctx->futhark_mc_segred_task_131720_total_time;
        futhark_mc_task_131719_task.task_iter =
            &ctx->futhark_mc_segred_task_131720_total_iter;
        futhark_mc_task_131719_task.sched = STATIC;
        futhark_mc_task_131719_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131720_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131719_task);
        
        if (futhark_mc_segred_task_131720_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_123179.mem)[gtid_120328] = defunc_2_reduce_res_129707;
        ((float *) mem_123182.mem)[gtid_120328] = defunc_2_reduce_res_129708;
    }
    
  cleanup:
    { }
    free(mem_129664);
    free(mem_129665);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131709_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131709_end -
                 futhark_mc_segmap_parloop_131709_start;
        
        ctx->futhark_mc_segmap_parloop_131709_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131709_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131709_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131707(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120327 = tid;
    int num_tasks_129804 = info.nsubtasks;
    struct futhark_mc_task_131701 *futhark_mc_task_131701 =
                                  (struct futhark_mc_task_131701 *) args;
    struct futhark_context *ctx = futhark_mc_task_131701->ctx;
    uint64_t futhark_mc_segmap_nested_task_131707_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131707_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131701->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131701->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131701->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131701->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131701->free_i_114594;
    int64_t gtid_120324 = futhark_mc_task_131701->free_gtid_120324;
    int64_t x_120409 = futhark_mc_task_131701->free_x_120409;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131701->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131701->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131701->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131701->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131701->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 = futhark_mc_task_131701->free_bytes_123141;
    struct memblock mem_123179 = {.desc ="mem_123179", .mem =
                                  futhark_mc_task_131701->free_mem_123179,
                                  .size =0, .references =NULL};
    struct memblock mem_123182 = {.desc ="mem_123182", .mem =
                                  futhark_mc_task_131701->free_mem_123182,
                                  .size =0, .references =NULL};
    int64_t iter_129864;
    struct futhark_mc_segmap_parloop_struct_131708
    futhark_mc_segmap_parloop_struct_131708;
    
    futhark_mc_segmap_parloop_struct_131708.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131708.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131708.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131708.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131708.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131708.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131708.free_gtid_120324 = gtid_120324;
    futhark_mc_segmap_parloop_struct_131708.free_x_120409 = x_120409;
    futhark_mc_segmap_parloop_struct_131708.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131708.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131708.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131708.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131708.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131708.free_bytes_123141 = bytes_123141;
    futhark_mc_segmap_parloop_struct_131708.free_mem_123179 = mem_123179.mem;
    futhark_mc_segmap_parloop_struct_131708.free_mem_123182 = mem_123182.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131709_task;
    
    futhark_mc_segmap_parloop_131709_task.name =
        "futhark_mc_segmap_parloop_131709";
    futhark_mc_segmap_parloop_131709_task.fn = futhark_mc_segmap_parloop_131709;
    futhark_mc_segmap_parloop_131709_task.args =
        &futhark_mc_segmap_parloop_struct_131708;
    futhark_mc_segmap_parloop_131709_task.iterations = iterations;
    futhark_mc_segmap_parloop_131709_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131709_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131709_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131709_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131709_task);
    
    if (futhark_mc_segmap_parloop_131709_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131709_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131709_total_end -
                 futhark_mc_segmap_parloop_131709_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131709_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131709_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131709_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131707_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131707_end -
                 futhark_mc_segmap_nested_task_131707_start;
        
        ctx->futhark_mc_segmap_nested_task_131707_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131707_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131707_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131698(void *args, int64_t start,
                                            int64_t end, int flat_tid_120323,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131697
    *futhark_mc_segmap_parloop_struct_131697 =
    (struct futhark_mc_segmap_parloop_struct_131697 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131697->ctx;
    uint64_t futhark_mc_segmap_parloop_131698_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131698_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131697->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131697->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131697->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131697->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131697->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131697->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131697->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 =
            futhark_mc_segmap_parloop_struct_131697->free_bytes_123141;
    struct memblock mem_123246 = {.desc ="mem_123246", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_123246,
                                  .size =0, .references =NULL};
    struct memblock mem_123250 = {.desc ="mem_123250", .mem =
                                  futhark_mc_segmap_parloop_struct_131697->free_mem_123250,
                                  .size =0, .references =NULL};
    size_t mem_123179_cached_sizze_131699 = 0;
    char *mem_123179 = NULL;
    size_t mem_123182_cached_sizze_131700 = 0;
    char *mem_123182 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129658 = start;
    
    if (mem_123179_cached_sizze_131699 < (size_t) bytes_122113) {
        mem_123179 = realloc(mem_123179, bytes_122113);
        mem_123179_cached_sizze_131699 = bytes_122113;
    }
    if (mem_123182_cached_sizze_131700 < (size_t) bytes_122113) {
        mem_123182 = realloc(mem_123182, bytes_122113);
        mem_123182_cached_sizze_131700 = bytes_122113;
    }
    for (; iter_129658 < end; iter_129658++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129802 = m_114517;
        int64_t gtid_120324 = iter_129658;
        int64_t remnant_129803 = iter_129658 - gtid_120324;
        int64_t x_120409 = ((int64_t *) mem_121960.mem)[gtid_120324];
        int64_t flat_tid_120325 = (int64_t) 0;
        int32_t num_tasks_129804;
        int64_t flat_tid_120327 = (int64_t) 0;
        struct futhark_mc_task_131701 futhark_mc_task_131701;
        
        futhark_mc_task_131701.ctx = ctx;
        futhark_mc_task_131701.free_n_114518 = n_114518;
        futhark_mc_task_131701.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131701.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131701.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131701.free_i_114594 = i_114594;
        futhark_mc_task_131701.free_gtid_120324 = gtid_120324;
        futhark_mc_task_131701.free_x_120409 = x_120409;
        futhark_mc_task_131701.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131701.free_mem_122182 = mem_122182.mem;
        futhark_mc_task_131701.free_mem_122186 = mem_122186.mem;
        futhark_mc_task_131701.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131701.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131701.free_bytes_123141 = bytes_123141;
        futhark_mc_task_131701.free_mem_123179 = mem_123179;
        futhark_mc_task_131701.free_mem_123182 = mem_123182;
        
        struct scheduler_segop futhark_mc_task_131701_task;
        
        futhark_mc_task_131701_task.args = &futhark_mc_task_131701;
        futhark_mc_task_131701_task.top_level_fn =
            futhark_mc_segmap_task_131702;
        futhark_mc_task_131701_task.name = "futhark_mc_segmap_task_131702";
        futhark_mc_task_131701_task.iterations = t_n_m_114575;
        futhark_mc_task_131701_task.task_time =
            &ctx->futhark_mc_segmap_task_131702_total_time;
        futhark_mc_task_131701_task.task_iter =
            &ctx->futhark_mc_segmap_task_131702_total_iter;
        futhark_mc_task_131701_task.sched = STATIC;
        futhark_mc_task_131701_task.nested_fn =
            futhark_mc_segmap_nested_task_131707;
        
        int futhark_mc_segmap_task_131702_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131701_task);
        
        if (futhark_mc_segmap_task_131702_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123246.mem + gtid_120324 * t_n_m_114575 * (int64_t) 4,
                mem_123179 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123250.mem + gtid_120324 * t_n_m_114575 * (int64_t) 4,
                mem_123182 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123179);
    free(mem_123182);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131698_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131698_end -
                 futhark_mc_segmap_parloop_131698_start;
        
        ctx->futhark_mc_segmap_parloop_131698_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131698_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131698_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131696(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120323 = tid;
    int num_tasks_129569 = info.nsubtasks;
    struct futhark_mc_task_131688 *futhark_mc_task_131688 =
                                  (struct futhark_mc_task_131688 *) args;
    struct futhark_context *ctx = futhark_mc_task_131688->ctx;
    uint64_t futhark_mc_segmap_nested_task_131696_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131696_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131688->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131688->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131688->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131688->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131688->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131688->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131688->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131688->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131688->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131688->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131688->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131688->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131688->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123141 = futhark_mc_task_131688->free_bytes_123141;
    struct memblock mem_123246 = {.desc ="mem_123246", .mem =
                                  futhark_mc_task_131688->free_mem_123246,
                                  .size =0, .references =NULL};
    struct memblock mem_123250 = {.desc ="mem_123250", .mem =
                                  futhark_mc_task_131688->free_mem_123250,
                                  .size =0, .references =NULL};
    int64_t iter_129658;
    struct futhark_mc_segmap_parloop_struct_131697
    futhark_mc_segmap_parloop_struct_131697;
    
    futhark_mc_segmap_parloop_struct_131697.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131697.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131697.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131697.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131697.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131697.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131697.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131697.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131697.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131697.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131697.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131697.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131697.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131697.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131697.free_bytes_123141 = bytes_123141;
    futhark_mc_segmap_parloop_struct_131697.free_mem_123246 = mem_123246.mem;
    futhark_mc_segmap_parloop_struct_131697.free_mem_123250 = mem_123250.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131698_task;
    
    futhark_mc_segmap_parloop_131698_task.name =
        "futhark_mc_segmap_parloop_131698";
    futhark_mc_segmap_parloop_131698_task.fn = futhark_mc_segmap_parloop_131698;
    futhark_mc_segmap_parloop_131698_task.args =
        &futhark_mc_segmap_parloop_struct_131697;
    futhark_mc_segmap_parloop_131698_task.iterations = iterations;
    futhark_mc_segmap_parloop_131698_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131698_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131698_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131698_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131698_task);
    
    if (futhark_mc_segmap_parloop_131698_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131698_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131698_total_end -
                 futhark_mc_segmap_parloop_131698_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131698_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131698_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131698_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131696_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131696_end -
                 futhark_mc_segmap_nested_task_131696_start;
        
        ctx->futhark_mc_segmap_nested_task_131696_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131696_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131696_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131725 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123251;
    char *free_mem_123422;
    char *free_mem_123426;
};
struct futhark_mc_segmap_parloop_struct_131727 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123251;
    char *free_mem_123422;
    char *free_mem_123426;
};
static int futhark_mc_segmap_parloop_131728(void *args, int64_t start,
                                            int64_t end, int flat_tid_120554,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131727
    *futhark_mc_segmap_parloop_struct_131727 =
    (struct futhark_mc_segmap_parloop_struct_131727 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131727->ctx;
    uint64_t futhark_mc_segmap_parloop_131728_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131728_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131727->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131727->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131727->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131727->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131727->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131727->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131727->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 =
            futhark_mc_segmap_parloop_struct_131727->free_bytes_123251;
    struct memblock mem_123422 = {.desc ="mem_123422", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_123422,
                                  .size =0, .references =NULL};
    struct memblock mem_123426 = {.desc ="mem_123426", .mem =
                                  futhark_mc_segmap_parloop_struct_131727->free_mem_123426,
                                  .size =0, .references =NULL};
    size_t mem_123331_cached_sizze_131729 = 0;
    char *mem_123331 = NULL;
    size_t mem_123334_cached_sizze_131730 = 0;
    char *mem_123334 = NULL;
    size_t mem_123351_cached_sizze_131731 = 0;
    char *mem_123351 = NULL;
    size_t mem_123354_cached_sizze_131732 = 0;
    char *mem_123354 = NULL;
    size_t mem_123381_cached_sizze_131733 = 0;
    char *mem_123381 = NULL;
    size_t mem_123384_cached_sizze_131734 = 0;
    char *mem_123384 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129952 = start;
    
    if (mem_123331_cached_sizze_131729 < (size_t) bytes_122113) {
        mem_123331 = realloc(mem_123331, bytes_122113);
        mem_123331_cached_sizze_131729 = bytes_122113;
    }
    if (mem_123334_cached_sizze_131730 < (size_t) bytes_122113) {
        mem_123334 = realloc(mem_123334, bytes_122113);
        mem_123334_cached_sizze_131730 = bytes_122113;
    }
    if (mem_123351_cached_sizze_131731 < (size_t) bytes_123251) {
        mem_123351 = realloc(mem_123351, bytes_123251);
        mem_123351_cached_sizze_131731 = bytes_123251;
    }
    if (mem_123354_cached_sizze_131732 < (size_t) bytes_123251) {
        mem_123354 = realloc(mem_123354, bytes_123251);
        mem_123354_cached_sizze_131732 = bytes_123251;
    }
    if (mem_123381_cached_sizze_131733 < (size_t) bytes_123251) {
        mem_123381 = realloc(mem_123381, bytes_123251);
        mem_123381_cached_sizze_131733 = bytes_123251;
    }
    if (mem_123384_cached_sizze_131734 < (size_t) bytes_123251) {
        mem_123384 = realloc(mem_123384, bytes_123251);
        mem_123384_cached_sizze_131734 = bytes_123251;
    }
    for (; iter_129952 < end; iter_129952++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130070 = m_114517;
        int64_t gtid_120555 = iter_129952;
        int64_t remnant_130071 = iter_129952 - gtid_120555;
        int64_t x_116347 = ((int64_t *) mem_121960.mem)[gtid_120555];
        
        for (int64_t i_129953 = 0; i_129953 < t_n_m_114575; i_129953++) {
            int64_t x_129956 = ((int64_t *) mem_122182.mem)[gtid_120555 *
                                                            t_n_m_114575 +
                                                            i_129953];
            float x_129957 = ((float *) mem_122186.mem)[gtid_120555 *
                                                        t_n_m_114575 +
                                                        i_129953];
            int64_t min_arg_129958 = mul64(t_jump_114525, i_129953);
            int64_t min_res_129959 = smin64(i_114594, min_arg_129958);
            float defunc_0_f_res_129960 = sitofp_i64_f32(min_res_129959);
            
            for (int64_t i_129965 = 0; i_129965 < t_window_114521; i_129965++) {
                bool cond_129968 = sle64(x_116347, i_129965);
                float defunc_0_f_res_129969;
                
                if (cond_129968) {
                    defunc_0_f_res_129969 = 0.0F;
                } else {
                    int64_t i_129970 = add64(x_129956, i_129965);
                    float x_129971 = ((float *) mem_121982.mem)[gtid_120555 *
                                                                n_114518 +
                                                                i_129970];
                    float defunc_0_f_res_f_res_129972 = 1.0F + x_129971;
                    
                    defunc_0_f_res_129969 = defunc_0_f_res_f_res_129972;
                }
                
                float defunc_0_f_res_129973;
                
                if (cond_129968) {
                    defunc_0_f_res_129973 = 0.0F;
                } else {
                    int64_t i_129974 = add64(x_129956, i_129965);
                    float x_129975 = ((float *) mem_122408.mem)[gtid_120555 *
                                                                n_114518 +
                                                                i_129974];
                    
                    defunc_0_f_res_129973 = x_129975;
                }
                
                float x_j_129976 = defunc_0_f_res_129969 -
                      defunc_0_f_res_129960;
                float abs_res_129977 = (float) fabs(x_j_129976);
                float tmp1_129978 = abs_res_129977 / x_129957;
                float x_129979 = tmp1_129978 * tmp1_129978;
                float y_129980 = tmp1_129978 * x_129979;
                float tmp2_129981 = 1.0F - y_129980;
                float x_129982 = tmp2_129981 * tmp2_129981;
                float tmp3_129983 = tmp2_129981 * x_129982;
                float tmp4_129984 = defunc_0_f_res_129973 * tmp3_129983;
                
                ((float *) mem_123351)[i_129965] = x_j_129976;
                ((float *) mem_123354)[i_129965] = tmp4_129984;
            }
            
            float defunc_2_reduce_res_129989;
            float defunc_2_reduce_res_129990;
            float defunc_2_reduce_res_129991;
            float defunc_2_reduce_res_129992;
            float defunc_2_reduce_res_129993;
            float redout_129997;
            float redout_129998;
            float redout_129999;
            float redout_130000;
            float redout_130001;
            
            redout_129997 = 0.0F;
            redout_129998 = 0.0F;
            redout_129999 = 0.0F;
            redout_130000 = 0.0F;
            redout_130001 = 0.0F;
            for (int64_t i_129996 = 0; i_129996 < t_window_114521; i_129996++) {
                float x_130004 = ((float *) mem_123351)[i_129996];
                float x_130005 = ((float *) mem_123354)[i_129996];
                float defunc_1_f_res_130006 = x_130004 * x_130005;
                float defunc_1_f_res_130007 = x_130004 * defunc_1_f_res_130006;
                float defunc_1_f_res_130008 = x_130004 * defunc_1_f_res_130007;
                float defunc_1_f_res_130009 = x_130004 * defunc_1_f_res_130008;
                float defunc_1_op_res_130010 = x_130005 + redout_129997;
                float defunc_1_op_res_130011 = defunc_1_f_res_130006 +
                      redout_129998;
                float defunc_1_op_res_130012 = defunc_1_f_res_130007 +
                      redout_129999;
                float defunc_1_op_res_130013 = defunc_1_f_res_130008 +
                      redout_130000;
                float defunc_1_op_res_130014 = defunc_1_f_res_130009 +
                      redout_130001;
                
                ((float *) mem_123381)[i_129996] = defunc_1_f_res_130007;
                ((float *) mem_123384)[i_129996] = defunc_1_f_res_130006;
                
                float redout_tmp_130076 = defunc_1_op_res_130010;
                float redout_tmp_130077 = defunc_1_op_res_130011;
                float redout_tmp_130078 = defunc_1_op_res_130012;
                float redout_tmp_130079 = defunc_1_op_res_130013;
                float redout_tmp_130080 = defunc_1_op_res_130014;
                
                redout_129997 = redout_tmp_130076;
                redout_129998 = redout_tmp_130077;
                redout_129999 = redout_tmp_130078;
                redout_130000 = redout_tmp_130079;
                redout_130001 = redout_tmp_130080;
            }
            defunc_2_reduce_res_129989 = redout_129997;
            defunc_2_reduce_res_129990 = redout_129998;
            defunc_2_reduce_res_129991 = redout_129999;
            defunc_2_reduce_res_129992 = redout_130000;
            defunc_2_reduce_res_129993 = redout_130001;
            
            float x_130017 = defunc_2_reduce_res_129991 *
                  defunc_2_reduce_res_129993;
            float y_130018 = defunc_2_reduce_res_129992 *
                  defunc_2_reduce_res_129992;
            float a12_130019 = x_130017 - y_130018;
            float x_130020 = defunc_2_reduce_res_129991 *
                  defunc_2_reduce_res_129992;
            float y_130021 = defunc_2_reduce_res_129990 *
                  defunc_2_reduce_res_129993;
            float b12_130022 = x_130020 - y_130021;
            float x_130023 = defunc_2_reduce_res_129990 *
                  defunc_2_reduce_res_129992;
            float y_130024 = defunc_2_reduce_res_129991 *
                  defunc_2_reduce_res_129991;
            float c12_130025 = x_130023 - y_130024;
            float x_130026 = defunc_2_reduce_res_129989 *
                  defunc_2_reduce_res_129993;
            float b2_130027 = x_130026 - y_130024;
            float x_130028 = defunc_2_reduce_res_129990 *
                  defunc_2_reduce_res_129991;
            float y_130029 = defunc_2_reduce_res_129989 *
                  defunc_2_reduce_res_129992;
            float c2_130030 = x_130028 - y_130029;
            float x_130031 = defunc_2_reduce_res_129989 * a12_130019;
            float y_130032 = defunc_2_reduce_res_129990 * b12_130022;
            float x_130033 = x_130031 + y_130032;
            float y_130034 = defunc_2_reduce_res_129991 * c12_130025;
            float y_130035 = x_130033 + y_130034;
            float det_130036 = 1.0F / y_130035;
            float a12_130037 = a12_130019 * det_130036;
            float b12_130038 = b12_130022 * det_130036;
            float c12_130039 = c12_130025 * det_130036;
            float b2_130040 = b2_130027 * det_130036;
            float c2_130041 = c2_130030 * det_130036;
            float defunc_2_reduce_res_130042;
            float defunc_2_reduce_res_130043;
            float redout_130045;
            float redout_130046;
            
            redout_130045 = 0.0F;
            redout_130046 = 0.0F;
            for (int64_t i_130044 = 0; i_130044 < t_window_114521; i_130044++) {
                float x_130047 = ((float *) mem_123354)[i_130044];
                float x_130048 = ((float *) mem_123384)[i_130044];
                float x_130049 = ((float *) mem_123381)[i_130044];
                bool cond_130050 = sle64(x_116347, i_130044);
                float defunc_0_f_res_130051;
                
                if (cond_130050) {
                    defunc_0_f_res_130051 = 0.0F;
                } else {
                    int64_t i_130052 = add64(x_129956, i_130044);
                    float x_130053 = ((float *) mem_122959.mem)[gtid_120555 *
                                                                n_114518 +
                                                                i_130052];
                    
                    defunc_0_f_res_130051 = x_130053;
                }
                
                float x_130054 = a12_130037 * x_130047;
                float y_130055 = b12_130038 * x_130048;
                float x_130056 = x_130054 + y_130055;
                float y_130057 = c12_130039 * x_130049;
                float x_130058 = x_130056 + y_130057;
                float defunc_9_fit_fun_res_130059 = defunc_0_f_res_130051 *
                      x_130058;
                float x_130060 = b12_130038 * x_130047;
                float y_130061 = b2_130040 * x_130048;
                float x_130062 = x_130060 + y_130061;
                float y_130063 = c2_130041 * x_130049;
                float x_130064 = x_130062 + y_130063;
                float defunc_9_slope_fun_res_130065 = defunc_0_f_res_130051 *
                      x_130064;
                float defunc_1_op_res_130066 = defunc_9_fit_fun_res_130059 +
                      redout_130045;
                float defunc_1_op_res_130067 = defunc_9_slope_fun_res_130065 +
                      redout_130046;
                float redout_tmp_130083 = defunc_1_op_res_130066;
                float redout_tmp_130084 = defunc_1_op_res_130067;
                
                redout_130045 = redout_tmp_130083;
                redout_130046 = redout_tmp_130084;
            }
            defunc_2_reduce_res_130042 = redout_130045;
            defunc_2_reduce_res_130043 = redout_130046;
            ((float *) mem_123331)[i_129953] = defunc_2_reduce_res_130042;
            ((float *) mem_123334)[i_129953] = defunc_2_reduce_res_130043;
        }
        memmove(mem_123422.mem + gtid_120555 * t_n_m_114575 * (int64_t) 4,
                mem_123331 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123426.mem + gtid_120555 * t_n_m_114575 * (int64_t) 4,
                mem_123334 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123331);
    free(mem_123334);
    free(mem_123351);
    free(mem_123354);
    free(mem_123381);
    free(mem_123384);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131728_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131728_end -
                 futhark_mc_segmap_parloop_131728_start;
        
        ctx->futhark_mc_segmap_parloop_131728_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131728_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131728_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131726(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120554 = tid;
    int num_tasks_129951 = info.nsubtasks;
    struct futhark_mc_task_131725 *futhark_mc_task_131725 =
                                  (struct futhark_mc_task_131725 *) args;
    struct futhark_context *ctx = futhark_mc_task_131725->ctx;
    uint64_t futhark_mc_segmap_task_131726_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131726_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131725->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131725->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131725->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131725->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131725->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131725->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131725->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131725->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131725->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131725->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131725->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131725->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131725->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 = futhark_mc_task_131725->free_bytes_123251;
    struct memblock mem_123422 = {.desc ="mem_123422", .mem =
                                  futhark_mc_task_131725->free_mem_123422,
                                  .size =0, .references =NULL};
    struct memblock mem_123426 = {.desc ="mem_123426", .mem =
                                  futhark_mc_task_131725->free_mem_123426,
                                  .size =0, .references =NULL};
    int64_t iter_129952;
    struct futhark_mc_segmap_parloop_struct_131727
    futhark_mc_segmap_parloop_struct_131727;
    
    futhark_mc_segmap_parloop_struct_131727.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131727.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131727.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131727.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131727.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131727.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131727.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131727.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131727.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131727.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131727.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131727.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131727.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131727.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131727.free_bytes_123251 = bytes_123251;
    futhark_mc_segmap_parloop_struct_131727.free_mem_123422 = mem_123422.mem;
    futhark_mc_segmap_parloop_struct_131727.free_mem_123426 = mem_123426.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131728_task;
    
    futhark_mc_segmap_parloop_131728_task.name =
        "futhark_mc_segmap_parloop_131728";
    futhark_mc_segmap_parloop_131728_task.fn = futhark_mc_segmap_parloop_131728;
    futhark_mc_segmap_parloop_131728_task.args =
        &futhark_mc_segmap_parloop_struct_131727;
    futhark_mc_segmap_parloop_131728_task.iterations = iterations;
    futhark_mc_segmap_parloop_131728_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131728_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131728_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131728_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131728_task);
    
    if (futhark_mc_segmap_parloop_131728_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131728_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131728_total_end -
                 futhark_mc_segmap_parloop_131728_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131728_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131728_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131728_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131726_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131726_end -
                 futhark_mc_segmap_task_131726_start;
        
        ctx->futhark_mc_segmap_task_131726_runs[tid]++;
        ctx->futhark_mc_segmap_task_131726_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131726_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131736 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    char *free_mem_121960;
    char *free_mem_121982;
    int64_t free_bytes_122113;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123251;
    char *free_mem_123422;
    char *free_mem_123426;
};
struct futhark_mc_task_131740 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123251;
    char *free_mem_123325;
    char *free_mem_123328;
};
struct futhark_mc_segmap_parloop_struct_131742 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123251;
    char *free_mem_123325;
    char *free_mem_123328;
};
static int futhark_mc_segmap_parloop_131743(void *args, int64_t start,
                                            int64_t end, int flat_tid_120558,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131742
    *futhark_mc_segmap_parloop_struct_131742 =
    (struct futhark_mc_segmap_parloop_struct_131742 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131742->ctx;
    uint64_t futhark_mc_segmap_parloop_131743_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131743_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131742->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131742->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131742->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131742->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131742->free_i_114594;
    int64_t gtid_120557 =
            futhark_mc_segmap_parloop_struct_131742->free_gtid_120557;
    int64_t x_120680 = futhark_mc_segmap_parloop_struct_131742->free_x_120680;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 =
            futhark_mc_segmap_parloop_struct_131742->free_bytes_123251;
    struct memblock mem_123325 = {.desc ="mem_123325", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_123325,
                                  .size =0, .references =NULL};
    struct memblock mem_123328 = {.desc ="mem_123328", .mem =
                                  futhark_mc_segmap_parloop_struct_131742->free_mem_123328,
                                  .size =0, .references =NULL};
    size_t mem_130199_cached_sizze_131744 = 0;
    char *mem_130199 = NULL;
    size_t mem_130201_cached_sizze_131745 = 0;
    char *mem_130201 = NULL;
    size_t mem_130227_cached_sizze_131746 = 0;
    char *mem_130227 = NULL;
    size_t mem_130229_cached_sizze_131747 = 0;
    char *mem_130229 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130313 = start;
    
    if (mem_130199_cached_sizze_131744 < (size_t) bytes_123251) {
        mem_130199 = realloc(mem_130199, bytes_123251);
        mem_130199_cached_sizze_131744 = bytes_123251;
    }
    if (mem_130201_cached_sizze_131745 < (size_t) bytes_123251) {
        mem_130201 = realloc(mem_130201, bytes_123251);
        mem_130201_cached_sizze_131745 = bytes_123251;
    }
    if (mem_130227_cached_sizze_131746 < (size_t) bytes_123251) {
        mem_130227 = realloc(mem_130227, bytes_123251);
        mem_130227_cached_sizze_131746 = bytes_123251;
    }
    if (mem_130229_cached_sizze_131747 < (size_t) bytes_123251) {
        mem_130229 = realloc(mem_130229, bytes_123251);
        mem_130229_cached_sizze_131747 = bytes_123251;
    }
    for (; iter_130313 < end; iter_130313++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130381 = t_n_m_114575;
        int64_t gtid_120559 = iter_130313;
        int64_t remnant_130382 = iter_130313 - gtid_120559;
        int64_t x_130194 = ((int64_t *) mem_122182.mem)[gtid_120557 *
                                                        t_n_m_114575 +
                                                        gtid_120559];
        float x_130195 = ((float *) mem_122186.mem)[gtid_120557 * t_n_m_114575 +
                                                    gtid_120559];
        int64_t min_arg_130196 = mul64(t_jump_114525, gtid_120559);
        int64_t min_res_130197 = smin64(i_114594, min_arg_130196);
        float defunc_0_f_res_130198 = sitofp_i64_f32(min_res_130197);
        
        for (int64_t i_130314 = 0; i_130314 < t_window_114521; i_130314++) {
            bool cond_130317 = sle64(x_120680, i_130314);
            float defunc_0_f_res_130318;
            
            if (cond_130317) {
                defunc_0_f_res_130318 = 0.0F;
            } else {
                int64_t i_130319 = add64(x_130194, i_130314);
                float x_130320 = ((float *) mem_121982.mem)[gtid_120557 *
                                                            n_114518 +
                                                            i_130319];
                float defunc_0_f_res_f_res_130321 = 1.0F + x_130320;
                
                defunc_0_f_res_130318 = defunc_0_f_res_f_res_130321;
            }
            
            float defunc_0_f_res_130322;
            
            if (cond_130317) {
                defunc_0_f_res_130322 = 0.0F;
            } else {
                int64_t i_130323 = add64(x_130194, i_130314);
                float x_130324 = ((float *) mem_122408.mem)[gtid_120557 *
                                                            n_114518 +
                                                            i_130323];
                
                defunc_0_f_res_130322 = x_130324;
            }
            
            float x_j_130325 = defunc_0_f_res_130318 - defunc_0_f_res_130198;
            float abs_res_130326 = (float) fabs(x_j_130325);
            float tmp1_130327 = abs_res_130326 / x_130195;
            float x_130328 = tmp1_130327 * tmp1_130327;
            float y_130329 = tmp1_130327 * x_130328;
            float tmp2_130330 = 1.0F - y_130329;
            float x_130331 = tmp2_130330 * tmp2_130330;
            float tmp3_130332 = tmp2_130330 * x_130331;
            float tmp4_130333 = defunc_0_f_res_130322 * tmp3_130332;
            
            ((float *) mem_130199)[i_130314] = x_j_130325;
            ((float *) mem_130201)[i_130314] = tmp4_130333;
        }
        
        float defunc_2_reduce_res_130231;
        float defunc_2_reduce_res_130232;
        float defunc_2_reduce_res_130233;
        float defunc_2_reduce_res_130234;
        float defunc_2_reduce_res_130235;
        float redout_130337;
        float redout_130338;
        float redout_130339;
        float redout_130340;
        float redout_130341;
        
        redout_130337 = 0.0F;
        redout_130338 = 0.0F;
        redout_130339 = 0.0F;
        redout_130340 = 0.0F;
        redout_130341 = 0.0F;
        for (int64_t i_130336 = 0; i_130336 < t_window_114521; i_130336++) {
            float x_130344 = ((float *) mem_130199)[i_130336];
            float x_130345 = ((float *) mem_130201)[i_130336];
            float defunc_1_f_res_130346 = x_130344 * x_130345;
            float defunc_1_f_res_130347 = x_130344 * defunc_1_f_res_130346;
            float defunc_1_f_res_130348 = x_130344 * defunc_1_f_res_130347;
            float defunc_1_f_res_130349 = x_130344 * defunc_1_f_res_130348;
            float defunc_1_op_res_130350 = x_130345 + redout_130337;
            float defunc_1_op_res_130351 = defunc_1_f_res_130346 +
                  redout_130338;
            float defunc_1_op_res_130352 = defunc_1_f_res_130347 +
                  redout_130339;
            float defunc_1_op_res_130353 = defunc_1_f_res_130348 +
                  redout_130340;
            float defunc_1_op_res_130354 = defunc_1_f_res_130349 +
                  redout_130341;
            
            ((float *) mem_130227)[i_130336] = defunc_1_f_res_130347;
            ((float *) mem_130229)[i_130336] = defunc_1_f_res_130346;
            
            float redout_tmp_130385 = defunc_1_op_res_130350;
            float redout_tmp_130386 = defunc_1_op_res_130351;
            float redout_tmp_130387 = defunc_1_op_res_130352;
            float redout_tmp_130388 = defunc_1_op_res_130353;
            float redout_tmp_130389 = defunc_1_op_res_130354;
            
            redout_130337 = redout_tmp_130385;
            redout_130338 = redout_tmp_130386;
            redout_130339 = redout_tmp_130387;
            redout_130340 = redout_tmp_130388;
            redout_130341 = redout_tmp_130389;
        }
        defunc_2_reduce_res_130231 = redout_130337;
        defunc_2_reduce_res_130232 = redout_130338;
        defunc_2_reduce_res_130233 = redout_130339;
        defunc_2_reduce_res_130234 = redout_130340;
        defunc_2_reduce_res_130235 = redout_130341;
        
        float x_130259 = defunc_2_reduce_res_130233 *
              defunc_2_reduce_res_130235;
        float y_130260 = defunc_2_reduce_res_130234 *
              defunc_2_reduce_res_130234;
        float a12_130261 = x_130259 - y_130260;
        float x_130262 = defunc_2_reduce_res_130233 *
              defunc_2_reduce_res_130234;
        float y_130263 = defunc_2_reduce_res_130232 *
              defunc_2_reduce_res_130235;
        float b12_130264 = x_130262 - y_130263;
        float x_130265 = defunc_2_reduce_res_130232 *
              defunc_2_reduce_res_130234;
        float y_130266 = defunc_2_reduce_res_130233 *
              defunc_2_reduce_res_130233;
        float c12_130267 = x_130265 - y_130266;
        float x_130268 = defunc_2_reduce_res_130231 *
              defunc_2_reduce_res_130235;
        float b2_130269 = x_130268 - y_130266;
        float x_130270 = defunc_2_reduce_res_130232 *
              defunc_2_reduce_res_130233;
        float y_130271 = defunc_2_reduce_res_130231 *
              defunc_2_reduce_res_130234;
        float c2_130272 = x_130270 - y_130271;
        float x_130273 = defunc_2_reduce_res_130231 * a12_130261;
        float y_130274 = defunc_2_reduce_res_130232 * b12_130264;
        float x_130275 = x_130273 + y_130274;
        float y_130276 = defunc_2_reduce_res_130233 * c12_130267;
        float y_130277 = x_130275 + y_130276;
        float det_130278 = 1.0F / y_130277;
        float a12_130279 = a12_130261 * det_130278;
        float b12_130280 = b12_130264 * det_130278;
        float c12_130281 = c12_130267 * det_130278;
        float b2_130282 = b2_130269 * det_130278;
        float c2_130283 = c2_130272 * det_130278;
        float defunc_2_reduce_res_130284;
        float defunc_2_reduce_res_130285;
        float redout_130358;
        float redout_130359;
        
        redout_130358 = 0.0F;
        redout_130359 = 0.0F;
        for (int64_t i_130357 = 0; i_130357 < t_window_114521; i_130357++) {
            float x_130360 = ((float *) mem_130201)[i_130357];
            float x_130361 = ((float *) mem_130229)[i_130357];
            float x_130362 = ((float *) mem_130227)[i_130357];
            bool cond_130363 = sle64(x_120680, i_130357);
            float defunc_0_f_res_130364;
            
            if (cond_130363) {
                defunc_0_f_res_130364 = 0.0F;
            } else {
                int64_t i_130365 = add64(x_130194, i_130357);
                float x_130366 = ((float *) mem_122959.mem)[gtid_120557 *
                                                            n_114518 +
                                                            i_130365];
                
                defunc_0_f_res_130364 = x_130366;
            }
            
            float x_130367 = a12_130279 * x_130360;
            float y_130368 = b12_130280 * x_130361;
            float x_130369 = x_130367 + y_130368;
            float y_130370 = c12_130281 * x_130362;
            float x_130371 = x_130369 + y_130370;
            float defunc_9_fit_fun_res_130372 = defunc_0_f_res_130364 *
                  x_130371;
            float x_130373 = b12_130280 * x_130360;
            float y_130374 = b2_130282 * x_130361;
            float x_130375 = x_130373 + y_130374;
            float y_130376 = c2_130283 * x_130362;
            float x_130377 = x_130375 + y_130376;
            float defunc_9_slope_fun_res_130378 = defunc_0_f_res_130364 *
                  x_130377;
            float defunc_1_op_res_130379 = defunc_9_fit_fun_res_130372 +
                  redout_130358;
            float defunc_1_op_res_130380 = defunc_9_slope_fun_res_130378 +
                  redout_130359;
            float redout_tmp_130392 = defunc_1_op_res_130379;
            float redout_tmp_130393 = defunc_1_op_res_130380;
            
            redout_130358 = redout_tmp_130392;
            redout_130359 = redout_tmp_130393;
        }
        defunc_2_reduce_res_130284 = redout_130358;
        defunc_2_reduce_res_130285 = redout_130359;
        ((float *) mem_123325.mem)[gtid_120559] = defunc_2_reduce_res_130284;
        ((float *) mem_123328.mem)[gtid_120559] = defunc_2_reduce_res_130285;
    }
    
  cleanup:
    { }
    free(mem_130199);
    free(mem_130201);
    free(mem_130227);
    free(mem_130229);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131743_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131743_end -
                 futhark_mc_segmap_parloop_131743_start;
        
        ctx->futhark_mc_segmap_parloop_131743_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131743_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131743_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131741(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120558 = tid;
    int num_tasks_130312 = info.nsubtasks;
    struct futhark_mc_task_131740 *futhark_mc_task_131740 =
                                  (struct futhark_mc_task_131740 *) args;
    struct futhark_context *ctx = futhark_mc_task_131740->ctx;
    uint64_t futhark_mc_segmap_task_131741_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131741_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131740->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131740->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131740->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131740->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131740->free_i_114594;
    int64_t gtid_120557 = futhark_mc_task_131740->free_gtid_120557;
    int64_t x_120680 = futhark_mc_task_131740->free_x_120680;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131740->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131740->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131740->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131740->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131740->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 = futhark_mc_task_131740->free_bytes_123251;
    struct memblock mem_123325 = {.desc ="mem_123325", .mem =
                                  futhark_mc_task_131740->free_mem_123325,
                                  .size =0, .references =NULL};
    struct memblock mem_123328 = {.desc ="mem_123328", .mem =
                                  futhark_mc_task_131740->free_mem_123328,
                                  .size =0, .references =NULL};
    int64_t iter_130313;
    struct futhark_mc_segmap_parloop_struct_131742
    futhark_mc_segmap_parloop_struct_131742;
    
    futhark_mc_segmap_parloop_struct_131742.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131742.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131742.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131742.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131742.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131742.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131742.free_gtid_120557 = gtid_120557;
    futhark_mc_segmap_parloop_struct_131742.free_x_120680 = x_120680;
    futhark_mc_segmap_parloop_struct_131742.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131742.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131742.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131742.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131742.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131742.free_bytes_123251 = bytes_123251;
    futhark_mc_segmap_parloop_struct_131742.free_mem_123325 = mem_123325.mem;
    futhark_mc_segmap_parloop_struct_131742.free_mem_123328 = mem_123328.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131743_task;
    
    futhark_mc_segmap_parloop_131743_task.name =
        "futhark_mc_segmap_parloop_131743";
    futhark_mc_segmap_parloop_131743_task.fn = futhark_mc_segmap_parloop_131743;
    futhark_mc_segmap_parloop_131743_task.args =
        &futhark_mc_segmap_parloop_struct_131742;
    futhark_mc_segmap_parloop_131743_task.iterations = iterations;
    futhark_mc_segmap_parloop_131743_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131743_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131743_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131743_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131743_task);
    
    if (futhark_mc_segmap_parloop_131743_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131743_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131743_total_end -
                 futhark_mc_segmap_parloop_131743_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131743_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131743_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131743_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131741_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131741_end -
                 futhark_mc_segmap_task_131741_start;
        
        ctx->futhark_mc_segmap_task_131741_runs[tid]++;
        ctx->futhark_mc_segmap_task_131741_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131741_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131749 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_121982;
    char *free_mem_122182;
    char *free_mem_122186;
    char *free_mem_122408;
    char *free_mem_122959;
    int64_t free_bytes_123251;
    char *free_mem_123325;
    char *free_mem_123328;
};
struct futhark_mc_task_131755 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_130086;
    float free_x_130087;
    float free_defunc_0_f_res_130090;
    char *free_mem_130091;
    char *free_mem_130092;
};
struct futhark_mc_segmap_parloop_struct_131757 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_window_114521;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_121982;
    char *free_mem_122408;
    int64_t free_x_130086;
    float free_x_130087;
    float free_defunc_0_f_res_130090;
    char *free_mem_130091;
    char *free_mem_130092;
};
static int futhark_mc_segmap_parloop_131758(void *args, int64_t start,
                                            int64_t end, int flat_tid_120562,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131757
    *futhark_mc_segmap_parloop_struct_131757 =
    (struct futhark_mc_segmap_parloop_struct_131757 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131757->ctx;
    uint64_t futhark_mc_segmap_parloop_131758_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131758_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131757->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131757->free_t_window_114521;
    int64_t gtid_120557 =
            futhark_mc_segmap_parloop_struct_131757->free_gtid_120557;
    int64_t x_120680 = futhark_mc_segmap_parloop_struct_131757->free_x_120680;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131757->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131757->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_130086 = futhark_mc_segmap_parloop_struct_131757->free_x_130086;
    float x_130087 = futhark_mc_segmap_parloop_struct_131757->free_x_130087;
    float defunc_0_f_res_130090 =
          futhark_mc_segmap_parloop_struct_131757->free_defunc_0_f_res_130090;
    struct memblock mem_130091 = {.desc ="mem_130091", .mem =
                                  futhark_mc_segmap_parloop_struct_131757->free_mem_130091,
                                  .size =0, .references =NULL};
    struct memblock mem_130092 = {.desc ="mem_130092", .mem =
                                  futhark_mc_segmap_parloop_struct_131757->free_mem_130092,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130461 = start;
    
    for (; iter_130461 < end; iter_130461++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130467 = t_window_114521;
        int64_t gtid_120563 = iter_130461;
        int64_t remnant_130468 = iter_130461 - gtid_120563;
        bool cond_130395 = sle64(x_120680, gtid_120563);
        float defunc_0_f_res_130396;
        
        if (cond_130395) {
            defunc_0_f_res_130396 = 0.0F;
        } else {
            int64_t i_130462 = add64(gtid_120563, x_130086);
            float x_130463 = ((float *) mem_121982.mem)[gtid_120557 * n_114518 +
                                                        i_130462];
            float defunc_0_f_res_f_res_130464 = 1.0F + x_130463;
            
            defunc_0_f_res_130396 = defunc_0_f_res_f_res_130464;
        }
        
        float defunc_0_f_res_130400;
        
        if (cond_130395) {
            defunc_0_f_res_130400 = 0.0F;
        } else {
            int64_t i_130465 = add64(gtid_120563, x_130086);
            float x_130466 = ((float *) mem_122408.mem)[gtid_120557 * n_114518 +
                                                        i_130465];
            
            defunc_0_f_res_130400 = x_130466;
        }
        
        float x_j_130403 = defunc_0_f_res_130396 - defunc_0_f_res_130090;
        float abs_res_130404 = (float) fabs(x_j_130403);
        float tmp1_130405 = abs_res_130404 / x_130087;
        float x_130406 = tmp1_130405 * tmp1_130405;
        float y_130407 = tmp1_130405 * x_130406;
        float tmp2_130408 = 1.0F - y_130407;
        float x_130409 = tmp2_130408 * tmp2_130408;
        float tmp3_130410 = tmp2_130408 * x_130409;
        float tmp4_130411 = defunc_0_f_res_130400 * tmp3_130410;
        
        ((float *) mem_130091.mem)[gtid_120563] = x_j_130403;
        ((float *) mem_130092.mem)[gtid_120563] = tmp4_130411;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131758_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131758_end -
                 futhark_mc_segmap_parloop_131758_start;
        
        ctx->futhark_mc_segmap_parloop_131758_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131758_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131758_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131756(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120562 = tid;
    int num_tasks_130460 = info.nsubtasks;
    struct futhark_mc_task_131755 *futhark_mc_task_131755 =
                                  (struct futhark_mc_task_131755 *) args;
    struct futhark_context *ctx = futhark_mc_task_131755->ctx;
    uint64_t futhark_mc_segmap_task_131756_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131756_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131755->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131755->free_t_window_114521;
    int64_t gtid_120557 = futhark_mc_task_131755->free_gtid_120557;
    int64_t x_120680 = futhark_mc_task_131755->free_x_120680;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131755->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131755->free_mem_122408,
                                  .size =0, .references =NULL};
    int64_t x_130086 = futhark_mc_task_131755->free_x_130086;
    float x_130087 = futhark_mc_task_131755->free_x_130087;
    float defunc_0_f_res_130090 =
          futhark_mc_task_131755->free_defunc_0_f_res_130090;
    struct memblock mem_130091 = {.desc ="mem_130091", .mem =
                                  futhark_mc_task_131755->free_mem_130091,
                                  .size =0, .references =NULL};
    struct memblock mem_130092 = {.desc ="mem_130092", .mem =
                                  futhark_mc_task_131755->free_mem_130092,
                                  .size =0, .references =NULL};
    int64_t iter_130461;
    struct futhark_mc_segmap_parloop_struct_131757
    futhark_mc_segmap_parloop_struct_131757;
    
    futhark_mc_segmap_parloop_struct_131757.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131757.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131757.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131757.free_gtid_120557 = gtid_120557;
    futhark_mc_segmap_parloop_struct_131757.free_x_120680 = x_120680;
    futhark_mc_segmap_parloop_struct_131757.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131757.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131757.free_x_130086 = x_130086;
    futhark_mc_segmap_parloop_struct_131757.free_x_130087 = x_130087;
    futhark_mc_segmap_parloop_struct_131757.free_defunc_0_f_res_130090 =
        defunc_0_f_res_130090;
    futhark_mc_segmap_parloop_struct_131757.free_mem_130091 = mem_130091.mem;
    futhark_mc_segmap_parloop_struct_131757.free_mem_130092 = mem_130092.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131758_task;
    
    futhark_mc_segmap_parloop_131758_task.name =
        "futhark_mc_segmap_parloop_131758";
    futhark_mc_segmap_parloop_131758_task.fn = futhark_mc_segmap_parloop_131758;
    futhark_mc_segmap_parloop_131758_task.args =
        &futhark_mc_segmap_parloop_struct_131757;
    futhark_mc_segmap_parloop_131758_task.iterations = iterations;
    futhark_mc_segmap_parloop_131758_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131758_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131758_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131758_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131758_task);
    
    if (futhark_mc_segmap_parloop_131758_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131758_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131758_total_end -
                 futhark_mc_segmap_parloop_131758_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131758_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131758_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131758_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131756_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131756_end -
                 futhark_mc_segmap_task_131756_start;
        
        ctx->futhark_mc_segmap_task_131756_runs[tid]++;
        ctx->futhark_mc_segmap_task_131756_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131756_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131759 {
    struct futhark_context *ctx;
    char *free_mem_130091;
    char *free_mem_130092;
    float *retval_defunc_2_reduce_res_130114;
    float *retval_defunc_2_reduce_res_130115;
    float *retval_defunc_2_reduce_res_130116;
    float *retval_defunc_2_reduce_res_130117;
    float *retval_defunc_2_reduce_res_130118;
    char *retval_mem_130112;
    char *retval_mem_130113;
};
struct futhark_mc_segred_stage_1_parloop_struct_131766 {
    struct futhark_context *ctx;
    char *free_mem_130091;
    char *free_mem_130092;
    char *free_mem_130112;
    char *free_mem_130113;
    char *free_reduce_stage_1_tid_res_arr_mem_130470;
    char *free_reduce_stage_1_tid_res_arr_mem_130472;
    char *free_reduce_stage_1_tid_res_arr_mem_130474;
    char *free_reduce_stage_1_tid_res_arr_mem_130476;
    char *free_reduce_stage_1_tid_res_arr_mem_130478;
};
static int futhark_mc_segred_stage_1_parloop_131767(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120564,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131766
    *futhark_mc_segred_stage_1_parloop_struct_131766 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131766 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131766->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131767_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131767_start = get_wall_time();
    
    struct memblock mem_130091 = {.desc ="mem_130091", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131766->free_mem_130091,
                                  .size =0, .references =NULL};
    struct memblock mem_130092 = {.desc ="mem_130092", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131766->free_mem_130092,
                                  .size =0, .references =NULL};
    struct memblock mem_130112 = {.desc ="mem_130112", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131766->free_mem_130112,
                                  .size =0, .references =NULL};
    struct memblock mem_130113 = {.desc ="mem_130113", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131766->free_mem_130113,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130470 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130470",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131766->free_reduce_stage_1_tid_res_arr_mem_130470,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130472 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130472",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131766->free_reduce_stage_1_tid_res_arr_mem_130472,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130474 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130474",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131766->free_reduce_stage_1_tid_res_arr_mem_130474,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130476 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130476",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131766->free_reduce_stage_1_tid_res_arr_mem_130476,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130478 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130478",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131766->free_reduce_stage_1_tid_res_arr_mem_130478,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130480 = start;
    float x_130412;
    float x_130413;
    float x_130415;
    float x_130416;
    float x_130418;
    float x_130419;
    float x_130421;
    float x_130422;
    float x_130424;
    float x_130425;
    float local_acc_130481 = 0.0F;
    float local_acc_130482 = 0.0F;
    float local_acc_130483 = 0.0F;
    float local_acc_130484 = 0.0F;
    float local_acc_130485 = 0.0F;
    
    for (; iter_130480 < end; iter_130480++) {
        int64_t gtid_120565 = iter_130480;
        float x_130427 = ((float *) mem_130091.mem)[gtid_120565];
        float x_130428 = ((float *) mem_130092.mem)[gtid_120565];
        float defunc_1_f_res_130429 = x_130427 * x_130428;
        float defunc_1_f_res_130430 = x_130427 * defunc_1_f_res_130429;
        float defunc_1_f_res_130431 = x_130427 * defunc_1_f_res_130430;
        float defunc_1_f_res_130432 = x_130427 * defunc_1_f_res_130431;
        
        // save map-out results
        {
            ((float *) mem_130112.mem)[gtid_120565] = defunc_1_f_res_130430;
            ((float *) mem_130113.mem)[gtid_120565] = defunc_1_f_res_130429;
        }
        // Load accum params
        {
            x_130412 = local_acc_130481;
        }
        // Load next params
        {
            x_130413 = x_130428;
        }
        // Red body
        {
            float defunc_1_op_res_130414 = x_130412 + x_130413;
            
            local_acc_130481 = defunc_1_op_res_130414;
        }
        // Load accum params
        {
            x_130415 = local_acc_130482;
        }
        // Load next params
        {
            x_130416 = defunc_1_f_res_130429;
        }
        // Red body
        {
            float defunc_1_op_res_130417 = x_130415 + x_130416;
            
            local_acc_130482 = defunc_1_op_res_130417;
        }
        // Load accum params
        {
            x_130418 = local_acc_130483;
        }
        // Load next params
        {
            x_130419 = defunc_1_f_res_130430;
        }
        // Red body
        {
            float defunc_1_op_res_130420 = x_130418 + x_130419;
            
            local_acc_130483 = defunc_1_op_res_130420;
        }
        // Load accum params
        {
            x_130421 = local_acc_130484;
        }
        // Load next params
        {
            x_130422 = defunc_1_f_res_130431;
        }
        // Red body
        {
            float defunc_1_op_res_130423 = x_130421 + x_130422;
            
            local_acc_130484 = defunc_1_op_res_130423;
        }
        // Load accum params
        {
            x_130424 = local_acc_130485;
        }
        // Load next params
        {
            x_130425 = defunc_1_f_res_130432;
        }
        // Red body
        {
            float defunc_1_op_res_130426 = x_130424 + x_130425;
            
            local_acc_130485 = defunc_1_op_res_130426;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_130470.mem)[flat_tid_120564] =
        local_acc_130481;
    ((float *) reduce_stage_1_tid_res_arr_mem_130472.mem)[flat_tid_120564] =
        local_acc_130482;
    ((float *) reduce_stage_1_tid_res_arr_mem_130474.mem)[flat_tid_120564] =
        local_acc_130483;
    ((float *) reduce_stage_1_tid_res_arr_mem_130476.mem)[flat_tid_120564] =
        local_acc_130484;
    ((float *) reduce_stage_1_tid_res_arr_mem_130478.mem)[flat_tid_120564] =
        local_acc_130485;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131767_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131767_end -
                 futhark_mc_segred_stage_1_parloop_131767_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131767_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131767_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131767_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131760(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120564 = tid;
    int num_tasks_130469 = info.nsubtasks;
    struct futhark_mc_task_131759 *futhark_mc_task_131759 =
                                  (struct futhark_mc_task_131759 *) args;
    struct futhark_context *ctx = futhark_mc_task_131759->ctx;
    uint64_t futhark_mc_segred_task_131760_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131760_start = get_wall_time();
    
    struct memblock mem_130091 = {.desc ="mem_130091", .mem =
                                  futhark_mc_task_131759->free_mem_130091,
                                  .size =0, .references =NULL};
    struct memblock mem_130092 = {.desc ="mem_130092", .mem =
                                  futhark_mc_task_131759->free_mem_130092,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_130114 =
          *futhark_mc_task_131759->retval_defunc_2_reduce_res_130114;
    float defunc_2_reduce_res_130115 =
          *futhark_mc_task_131759->retval_defunc_2_reduce_res_130115;
    float defunc_2_reduce_res_130116 =
          *futhark_mc_task_131759->retval_defunc_2_reduce_res_130116;
    float defunc_2_reduce_res_130117 =
          *futhark_mc_task_131759->retval_defunc_2_reduce_res_130117;
    float defunc_2_reduce_res_130118 =
          *futhark_mc_task_131759->retval_defunc_2_reduce_res_130118;
    struct memblock mem_130112 = {.desc ="mem_130112", .mem =
                                  futhark_mc_task_131759->retval_mem_130112,
                                  .size =0, .references =NULL};
    struct memblock mem_130113 = {.desc ="mem_130113", .mem =
                                  futhark_mc_task_131759->retval_mem_130113,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_130470_cached_sizze_131761 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130470 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130472_cached_sizze_131762 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130472 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130474_cached_sizze_131763 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130474 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130476_cached_sizze_131764 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130476 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130478_cached_sizze_131765 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130478 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_130470_cached_sizze_131761 <
        (size_t) ((int64_t) 4 * num_tasks_130469)) {
        reduce_stage_1_tid_res_arr_mem_130470 =
            realloc(reduce_stage_1_tid_res_arr_mem_130470, (int64_t) 4 *
                    num_tasks_130469);
        reduce_stage_1_tid_res_arr_mem_130470_cached_sizze_131761 =
            (int64_t) 4 * num_tasks_130469;
    }
    if (reduce_stage_1_tid_res_arr_mem_130472_cached_sizze_131762 <
        (size_t) ((int64_t) 4 * num_tasks_130469)) {
        reduce_stage_1_tid_res_arr_mem_130472 =
            realloc(reduce_stage_1_tid_res_arr_mem_130472, (int64_t) 4 *
                    num_tasks_130469);
        reduce_stage_1_tid_res_arr_mem_130472_cached_sizze_131762 =
            (int64_t) 4 * num_tasks_130469;
    }
    if (reduce_stage_1_tid_res_arr_mem_130474_cached_sizze_131763 <
        (size_t) ((int64_t) 4 * num_tasks_130469)) {
        reduce_stage_1_tid_res_arr_mem_130474 =
            realloc(reduce_stage_1_tid_res_arr_mem_130474, (int64_t) 4 *
                    num_tasks_130469);
        reduce_stage_1_tid_res_arr_mem_130474_cached_sizze_131763 =
            (int64_t) 4 * num_tasks_130469;
    }
    if (reduce_stage_1_tid_res_arr_mem_130476_cached_sizze_131764 <
        (size_t) ((int64_t) 4 * num_tasks_130469)) {
        reduce_stage_1_tid_res_arr_mem_130476 =
            realloc(reduce_stage_1_tid_res_arr_mem_130476, (int64_t) 4 *
                    num_tasks_130469);
        reduce_stage_1_tid_res_arr_mem_130476_cached_sizze_131764 =
            (int64_t) 4 * num_tasks_130469;
    }
    if (reduce_stage_1_tid_res_arr_mem_130478_cached_sizze_131765 <
        (size_t) ((int64_t) 4 * num_tasks_130469)) {
        reduce_stage_1_tid_res_arr_mem_130478 =
            realloc(reduce_stage_1_tid_res_arr_mem_130478, (int64_t) 4 *
                    num_tasks_130469);
        reduce_stage_1_tid_res_arr_mem_130478_cached_sizze_131765 =
            (int64_t) 4 * num_tasks_130469;
    }
    
    int64_t iter_130480;
    struct futhark_mc_segred_stage_1_parloop_struct_131766
    futhark_mc_segred_stage_1_parloop_struct_131766;
    
    futhark_mc_segred_stage_1_parloop_struct_131766.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_mem_130091 =
        mem_130091.mem;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_mem_130092 =
        mem_130092.mem;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_mem_130112 =
        mem_130112.mem;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_mem_130113 =
        mem_130113.mem;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_reduce_stage_1_tid_res_arr_mem_130470 =
        reduce_stage_1_tid_res_arr_mem_130470;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_reduce_stage_1_tid_res_arr_mem_130472 =
        reduce_stage_1_tid_res_arr_mem_130472;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_reduce_stage_1_tid_res_arr_mem_130474 =
        reduce_stage_1_tid_res_arr_mem_130474;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_reduce_stage_1_tid_res_arr_mem_130476 =
        reduce_stage_1_tid_res_arr_mem_130476;
    futhark_mc_segred_stage_1_parloop_struct_131766.free_reduce_stage_1_tid_res_arr_mem_130478 =
        reduce_stage_1_tid_res_arr_mem_130478;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131767_task;
    
    futhark_mc_segred_stage_1_parloop_131767_task.name =
        "futhark_mc_segred_stage_1_parloop_131767";
    futhark_mc_segred_stage_1_parloop_131767_task.fn =
        futhark_mc_segred_stage_1_parloop_131767;
    futhark_mc_segred_stage_1_parloop_131767_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131766;
    futhark_mc_segred_stage_1_parloop_131767_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131767_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131767_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131767_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131767_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131767_task);
    
    if (futhark_mc_segred_stage_1_parloop_131767_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131767_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131767_total_end -
                 futhark_mc_segred_stage_1_parloop_131767_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131767_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131767_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131767_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_130114 = 0.0F;
        defunc_2_reduce_res_130115 = 0.0F;
        defunc_2_reduce_res_130116 = 0.0F;
        defunc_2_reduce_res_130117 = 0.0F;
        defunc_2_reduce_res_130118 = 0.0F;
    }
    
    float x_130486;
    float x_130487;
    float x_130489;
    float x_130490;
    float x_130492;
    float x_130493;
    float x_130495;
    float x_130496;
    float x_130498;
    float x_130499;
    
    for (int32_t i_130501 = 0; i_130501 < num_tasks_130469; i_130501++) {
        flat_tid_120564 = i_130501;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_130486 = defunc_2_reduce_res_130114;
            }
            // load next params
            {
                x_130487 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130470)[flat_tid_120564];
            }
            // red body
            {
                float defunc_1_op_res_130488 = x_130486 + x_130487;
                
                defunc_2_reduce_res_130114 = defunc_1_op_res_130488;
            }
            // load acc params
            {
                x_130489 = defunc_2_reduce_res_130115;
            }
            // load next params
            {
                x_130490 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130472)[flat_tid_120564];
            }
            // red body
            {
                float defunc_1_op_res_130491 = x_130489 + x_130490;
                
                defunc_2_reduce_res_130115 = defunc_1_op_res_130491;
            }
            // load acc params
            {
                x_130492 = defunc_2_reduce_res_130116;
            }
            // load next params
            {
                x_130493 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130474)[flat_tid_120564];
            }
            // red body
            {
                float defunc_1_op_res_130494 = x_130492 + x_130493;
                
                defunc_2_reduce_res_130116 = defunc_1_op_res_130494;
            }
            // load acc params
            {
                x_130495 = defunc_2_reduce_res_130117;
            }
            // load next params
            {
                x_130496 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130476)[flat_tid_120564];
            }
            // red body
            {
                float defunc_1_op_res_130497 = x_130495 + x_130496;
                
                defunc_2_reduce_res_130117 = defunc_1_op_res_130497;
            }
            // load acc params
            {
                x_130498 = defunc_2_reduce_res_130118;
            }
            // load next params
            {
                x_130499 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130478)[flat_tid_120564];
            }
            // red body
            {
                float defunc_1_op_res_130500 = x_130498 + x_130499;
                
                defunc_2_reduce_res_130118 = defunc_1_op_res_130500;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_130470);
    free(reduce_stage_1_tid_res_arr_mem_130472);
    free(reduce_stage_1_tid_res_arr_mem_130474);
    free(reduce_stage_1_tid_res_arr_mem_130476);
    free(reduce_stage_1_tid_res_arr_mem_130478);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131760_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131760_end -
                 futhark_mc_segred_task_131760_start;
        
        ctx->futhark_mc_segred_task_131760_runs[tid]++;
        ctx->futhark_mc_segred_task_131760_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131760_iter[tid] += iterations;
    }
    *futhark_mc_task_131759->retval_defunc_2_reduce_res_130114 =
        defunc_2_reduce_res_130114;
    *futhark_mc_task_131759->retval_defunc_2_reduce_res_130115 =
        defunc_2_reduce_res_130115;
    *futhark_mc_task_131759->retval_defunc_2_reduce_res_130116 =
        defunc_2_reduce_res_130116;
    *futhark_mc_task_131759->retval_defunc_2_reduce_res_130117 =
        defunc_2_reduce_res_130117;
    *futhark_mc_task_131759->retval_defunc_2_reduce_res_130118 =
        defunc_2_reduce_res_130118;
    futhark_mc_task_131759->retval_mem_130112 = mem_130112.mem;
    futhark_mc_task_131759->retval_mem_130113 = mem_130113.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131768 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_122959;
    int64_t free_x_130086;
    char *free_mem_130092;
    char *free_mem_130112;
    char *free_mem_130113;
    float free_a12_130162;
    float free_b12_130163;
    float free_c12_130164;
    float free_b2_130165;
    float free_c2_130166;
    float *retval_defunc_2_reduce_res_130167;
    float *retval_defunc_2_reduce_res_130168;
};
struct futhark_mc_segred_stage_1_parloop_struct_131772 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120557;
    int64_t free_x_120680;
    char *free_mem_122959;
    int64_t free_x_130086;
    char *free_mem_130092;
    char *free_mem_130112;
    char *free_mem_130113;
    float free_a12_130162;
    float free_b12_130163;
    float free_c12_130164;
    float free_b2_130165;
    float free_c2_130166;
    char *free_reduce_stage_1_tid_res_arr_mem_130503;
    char *free_reduce_stage_1_tid_res_arr_mem_130505;
};
static int futhark_mc_segred_stage_1_parloop_131773(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120566,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131772
    *futhark_mc_segred_stage_1_parloop_struct_131772 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131772 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131772->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131773_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131773_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131772->free_n_114518;
    int64_t gtid_120557 =
            futhark_mc_segred_stage_1_parloop_struct_131772->free_gtid_120557;
    int64_t x_120680 =
            futhark_mc_segred_stage_1_parloop_struct_131772->free_x_120680;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131772->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_130086 =
            futhark_mc_segred_stage_1_parloop_struct_131772->free_x_130086;
    struct memblock mem_130092 = {.desc ="mem_130092", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131772->free_mem_130092,
                                  .size =0, .references =NULL};
    struct memblock mem_130112 = {.desc ="mem_130112", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131772->free_mem_130112,
                                  .size =0, .references =NULL};
    struct memblock mem_130113 = {.desc ="mem_130113", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131772->free_mem_130113,
                                  .size =0, .references =NULL};
    float a12_130162 =
          futhark_mc_segred_stage_1_parloop_struct_131772->free_a12_130162;
    float b12_130163 =
          futhark_mc_segred_stage_1_parloop_struct_131772->free_b12_130163;
    float c12_130164 =
          futhark_mc_segred_stage_1_parloop_struct_131772->free_c12_130164;
    float b2_130165 =
          futhark_mc_segred_stage_1_parloop_struct_131772->free_b2_130165;
    float c2_130166 =
          futhark_mc_segred_stage_1_parloop_struct_131772->free_c2_130166;
    struct memblock reduce_stage_1_tid_res_arr_mem_130503 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130503",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131772->free_reduce_stage_1_tid_res_arr_mem_130503,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130505 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130505",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131772->free_reduce_stage_1_tid_res_arr_mem_130505,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130507 = start;
    float x_130433;
    float x_130434;
    float x_130436;
    float x_130437;
    float local_acc_130508 = 0.0F;
    float local_acc_130509 = 0.0F;
    
    for (; iter_130507 < end; iter_130507++) {
        int64_t gtid_120567 = iter_130507;
        float x_130439 = ((float *) mem_130092.mem)[gtid_120567];
        float x_130440 = ((float *) mem_130113.mem)[gtid_120567];
        float x_130441 = ((float *) mem_130112.mem)[gtid_120567];
        bool cond_130442 = sle64(x_120680, gtid_120567);
        float defunc_0_f_res_130443;
        
        if (cond_130442) {
            defunc_0_f_res_130443 = 0.0F;
        } else {
            int64_t i_130444 = add64(gtid_120567, x_130086);
            float x_130445 = ((float *) mem_122959.mem)[gtid_120557 * n_114518 +
                                                        i_130444];
            
            defunc_0_f_res_130443 = x_130445;
        }
        
        float x_130446 = a12_130162 * x_130439;
        float y_130447 = b12_130163 * x_130440;
        float x_130448 = x_130446 + y_130447;
        float y_130449 = c12_130164 * x_130441;
        float x_130450 = x_130448 + y_130449;
        float defunc_9_fit_fun_res_130451 = defunc_0_f_res_130443 * x_130450;
        float x_130452 = b12_130163 * x_130439;
        float y_130453 = b2_130165 * x_130440;
        float x_130454 = x_130452 + y_130453;
        float y_130455 = c2_130166 * x_130441;
        float x_130456 = x_130454 + y_130455;
        float defunc_9_slope_fun_res_130457 = defunc_0_f_res_130443 * x_130456;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_130433 = local_acc_130508;
        }
        // Load next params
        {
            x_130434 = defunc_9_fit_fun_res_130451;
        }
        // Red body
        {
            float defunc_1_op_res_130435 = x_130433 + x_130434;
            
            local_acc_130508 = defunc_1_op_res_130435;
        }
        // Load accum params
        {
            x_130436 = local_acc_130509;
        }
        // Load next params
        {
            x_130437 = defunc_9_slope_fun_res_130457;
        }
        // Red body
        {
            float defunc_1_op_res_130438 = x_130436 + x_130437;
            
            local_acc_130509 = defunc_1_op_res_130438;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_130503.mem)[flat_tid_120566] =
        local_acc_130508;
    ((float *) reduce_stage_1_tid_res_arr_mem_130505.mem)[flat_tid_120566] =
        local_acc_130509;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131773_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131773_end -
                 futhark_mc_segred_stage_1_parloop_131773_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131773_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131773_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131773_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131769(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120566 = tid;
    int num_tasks_130502 = info.nsubtasks;
    struct futhark_mc_task_131768 *futhark_mc_task_131768 =
                                  (struct futhark_mc_task_131768 *) args;
    struct futhark_context *ctx = futhark_mc_task_131768->ctx;
    uint64_t futhark_mc_segred_task_131769_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131769_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131768->free_n_114518;
    int64_t gtid_120557 = futhark_mc_task_131768->free_gtid_120557;
    int64_t x_120680 = futhark_mc_task_131768->free_x_120680;
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131768->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t x_130086 = futhark_mc_task_131768->free_x_130086;
    struct memblock mem_130092 = {.desc ="mem_130092", .mem =
                                  futhark_mc_task_131768->free_mem_130092,
                                  .size =0, .references =NULL};
    struct memblock mem_130112 = {.desc ="mem_130112", .mem =
                                  futhark_mc_task_131768->free_mem_130112,
                                  .size =0, .references =NULL};
    struct memblock mem_130113 = {.desc ="mem_130113", .mem =
                                  futhark_mc_task_131768->free_mem_130113,
                                  .size =0, .references =NULL};
    float a12_130162 = futhark_mc_task_131768->free_a12_130162;
    float b12_130163 = futhark_mc_task_131768->free_b12_130163;
    float c12_130164 = futhark_mc_task_131768->free_c12_130164;
    float b2_130165 = futhark_mc_task_131768->free_b2_130165;
    float c2_130166 = futhark_mc_task_131768->free_c2_130166;
    float defunc_2_reduce_res_130167 =
          *futhark_mc_task_131768->retval_defunc_2_reduce_res_130167;
    float defunc_2_reduce_res_130168 =
          *futhark_mc_task_131768->retval_defunc_2_reduce_res_130168;
    size_t reduce_stage_1_tid_res_arr_mem_130503_cached_sizze_131770 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130503 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130505_cached_sizze_131771 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130505 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_130503_cached_sizze_131770 <
        (size_t) ((int64_t) 4 * num_tasks_130502)) {
        reduce_stage_1_tid_res_arr_mem_130503 =
            realloc(reduce_stage_1_tid_res_arr_mem_130503, (int64_t) 4 *
                    num_tasks_130502);
        reduce_stage_1_tid_res_arr_mem_130503_cached_sizze_131770 =
            (int64_t) 4 * num_tasks_130502;
    }
    if (reduce_stage_1_tid_res_arr_mem_130505_cached_sizze_131771 <
        (size_t) ((int64_t) 4 * num_tasks_130502)) {
        reduce_stage_1_tid_res_arr_mem_130505 =
            realloc(reduce_stage_1_tid_res_arr_mem_130505, (int64_t) 4 *
                    num_tasks_130502);
        reduce_stage_1_tid_res_arr_mem_130505_cached_sizze_131771 =
            (int64_t) 4 * num_tasks_130502;
    }
    
    int64_t iter_130507;
    struct futhark_mc_segred_stage_1_parloop_struct_131772
    futhark_mc_segred_stage_1_parloop_struct_131772;
    
    futhark_mc_segred_stage_1_parloop_struct_131772.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_gtid_120557 =
        gtid_120557;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_x_120680 = x_120680;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_mem_122959 =
        mem_122959.mem;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_x_130086 = x_130086;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_mem_130092 =
        mem_130092.mem;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_mem_130112 =
        mem_130112.mem;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_mem_130113 =
        mem_130113.mem;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_a12_130162 =
        a12_130162;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_b12_130163 =
        b12_130163;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_c12_130164 =
        c12_130164;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_b2_130165 = b2_130165;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_c2_130166 = c2_130166;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_reduce_stage_1_tid_res_arr_mem_130503 =
        reduce_stage_1_tid_res_arr_mem_130503;
    futhark_mc_segred_stage_1_parloop_struct_131772.free_reduce_stage_1_tid_res_arr_mem_130505 =
        reduce_stage_1_tid_res_arr_mem_130505;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131773_task;
    
    futhark_mc_segred_stage_1_parloop_131773_task.name =
        "futhark_mc_segred_stage_1_parloop_131773";
    futhark_mc_segred_stage_1_parloop_131773_task.fn =
        futhark_mc_segred_stage_1_parloop_131773;
    futhark_mc_segred_stage_1_parloop_131773_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131772;
    futhark_mc_segred_stage_1_parloop_131773_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131773_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131773_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131773_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131773_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131773_task);
    
    if (futhark_mc_segred_stage_1_parloop_131773_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131773_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131773_total_end -
                 futhark_mc_segred_stage_1_parloop_131773_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131773_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131773_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131773_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_130167 = 0.0F;
        defunc_2_reduce_res_130168 = 0.0F;
    }
    
    float x_130510;
    float x_130511;
    float x_130513;
    float x_130514;
    
    for (int32_t i_130516 = 0; i_130516 < num_tasks_130502; i_130516++) {
        flat_tid_120566 = i_130516;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_130510 = defunc_2_reduce_res_130167;
            }
            // load next params
            {
                x_130511 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130503)[flat_tid_120566];
            }
            // red body
            {
                float defunc_1_op_res_130512 = x_130510 + x_130511;
                
                defunc_2_reduce_res_130167 = defunc_1_op_res_130512;
            }
            // load acc params
            {
                x_130513 = defunc_2_reduce_res_130168;
            }
            // load next params
            {
                x_130514 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130505)[flat_tid_120566];
            }
            // red body
            {
                float defunc_1_op_res_130515 = x_130513 + x_130514;
                
                defunc_2_reduce_res_130168 = defunc_1_op_res_130515;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_130503);
    free(reduce_stage_1_tid_res_arr_mem_130505);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131769_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131769_end -
                 futhark_mc_segred_task_131769_start;
        
        ctx->futhark_mc_segred_task_131769_runs[tid]++;
        ctx->futhark_mc_segred_task_131769_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131769_iter[tid] += iterations;
    }
    *futhark_mc_task_131768->retval_defunc_2_reduce_res_130167 =
        defunc_2_reduce_res_130167;
    *futhark_mc_task_131768->retval_defunc_2_reduce_res_130168 =
        defunc_2_reduce_res_130168;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131750(void *args, int64_t start,
                                            int64_t end, int flat_tid_120560,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131749
    *futhark_mc_segmap_parloop_struct_131749 =
    (struct futhark_mc_segmap_parloop_struct_131749 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131749->ctx;
    uint64_t futhark_mc_segmap_parloop_131750_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131750_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131749->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131749->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131749->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131749->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131749->free_i_114594;
    int64_t gtid_120557 =
            futhark_mc_segmap_parloop_struct_131749->free_gtid_120557;
    int64_t x_120680 = futhark_mc_segmap_parloop_struct_131749->free_x_120680;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 =
            futhark_mc_segmap_parloop_struct_131749->free_bytes_123251;
    struct memblock mem_123325 = {.desc ="mem_123325", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_123325,
                                  .size =0, .references =NULL};
    struct memblock mem_123328 = {.desc ="mem_123328", .mem =
                                  futhark_mc_segmap_parloop_struct_131749->free_mem_123328,
                                  .size =0, .references =NULL};
    size_t mem_130091_cached_sizze_131751 = 0;
    char *mem_130091 = NULL;
    size_t mem_130092_cached_sizze_131752 = 0;
    char *mem_130092 = NULL;
    size_t mem_130112_cached_sizze_131753 = 0;
    char *mem_130112 = NULL;
    size_t mem_130113_cached_sizze_131754 = 0;
    char *mem_130113 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130394 = start;
    
    if (mem_130091_cached_sizze_131751 < (size_t) bytes_123251) {
        mem_130091 = realloc(mem_130091, bytes_123251);
        mem_130091_cached_sizze_131751 = bytes_123251;
    }
    if (mem_130092_cached_sizze_131752 < (size_t) bytes_123251) {
        mem_130092 = realloc(mem_130092, bytes_123251);
        mem_130092_cached_sizze_131752 = bytes_123251;
    }
    if (mem_130112_cached_sizze_131753 < (size_t) bytes_123251) {
        mem_130112 = realloc(mem_130112, bytes_123251);
        mem_130112_cached_sizze_131753 = bytes_123251;
    }
    if (mem_130113_cached_sizze_131754 < (size_t) bytes_123251) {
        mem_130113 = realloc(mem_130113, bytes_123251);
        mem_130113_cached_sizze_131754 = bytes_123251;
    }
    for (; iter_130394 < end; iter_130394++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130458 = t_n_m_114575;
        int64_t gtid_120561 = iter_130394;
        int64_t remnant_130459 = iter_130394 - gtid_120561;
        int64_t x_130086 = ((int64_t *) mem_122182.mem)[gtid_120557 *
                                                        t_n_m_114575 +
                                                        gtid_120561];
        float x_130087 = ((float *) mem_122186.mem)[gtid_120557 * t_n_m_114575 +
                                                    gtid_120561];
        int64_t min_arg_130088 = mul64(t_jump_114525, gtid_120561);
        int64_t min_res_130089 = smin64(i_114594, min_arg_130088);
        float defunc_0_f_res_130090 = sitofp_i64_f32(min_res_130089);
        int64_t flat_tid_120562 = (int64_t) 0;
        int32_t num_tasks_130460;
        struct futhark_mc_task_131755 futhark_mc_task_131755;
        
        futhark_mc_task_131755.ctx = ctx;
        futhark_mc_task_131755.free_n_114518 = n_114518;
        futhark_mc_task_131755.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131755.free_gtid_120557 = gtid_120557;
        futhark_mc_task_131755.free_x_120680 = x_120680;
        futhark_mc_task_131755.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131755.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131755.free_x_130086 = x_130086;
        futhark_mc_task_131755.free_x_130087 = x_130087;
        futhark_mc_task_131755.free_defunc_0_f_res_130090 =
            defunc_0_f_res_130090;
        futhark_mc_task_131755.free_mem_130091 = mem_130091;
        futhark_mc_task_131755.free_mem_130092 = mem_130092;
        
        struct scheduler_segop futhark_mc_task_131755_task;
        
        futhark_mc_task_131755_task.args = &futhark_mc_task_131755;
        futhark_mc_task_131755_task.top_level_fn =
            futhark_mc_segmap_task_131756;
        futhark_mc_task_131755_task.name = "futhark_mc_segmap_task_131756";
        futhark_mc_task_131755_task.iterations = t_window_114521;
        futhark_mc_task_131755_task.task_time =
            &ctx->futhark_mc_segmap_task_131756_total_time;
        futhark_mc_task_131755_task.task_iter =
            &ctx->futhark_mc_segmap_task_131756_total_iter;
        futhark_mc_task_131755_task.sched = STATIC;
        futhark_mc_task_131755_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131756_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131755_task);
        
        if (futhark_mc_segmap_task_131756_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_130114;
        float defunc_2_reduce_res_130115;
        float defunc_2_reduce_res_130116;
        float defunc_2_reduce_res_130117;
        float defunc_2_reduce_res_130118;
        int64_t flat_tid_120564 = (int64_t) 0;
        int32_t num_tasks_130469;
        struct futhark_mc_task_131759 futhark_mc_task_131759;
        
        futhark_mc_task_131759.ctx = ctx;
        futhark_mc_task_131759.free_mem_130091 = mem_130091;
        futhark_mc_task_131759.free_mem_130092 = mem_130092;
        futhark_mc_task_131759.retval_defunc_2_reduce_res_130114 =
            &defunc_2_reduce_res_130114;
        futhark_mc_task_131759.retval_defunc_2_reduce_res_130115 =
            &defunc_2_reduce_res_130115;
        futhark_mc_task_131759.retval_defunc_2_reduce_res_130116 =
            &defunc_2_reduce_res_130116;
        futhark_mc_task_131759.retval_defunc_2_reduce_res_130117 =
            &defunc_2_reduce_res_130117;
        futhark_mc_task_131759.retval_defunc_2_reduce_res_130118 =
            &defunc_2_reduce_res_130118;
        futhark_mc_task_131759.retval_mem_130112 = mem_130112;
        futhark_mc_task_131759.retval_mem_130113 = mem_130113;
        
        struct scheduler_segop futhark_mc_task_131759_task;
        
        futhark_mc_task_131759_task.args = &futhark_mc_task_131759;
        futhark_mc_task_131759_task.top_level_fn =
            futhark_mc_segred_task_131760;
        futhark_mc_task_131759_task.name = "futhark_mc_segred_task_131760";
        futhark_mc_task_131759_task.iterations = t_window_114521;
        futhark_mc_task_131759_task.task_time =
            &ctx->futhark_mc_segred_task_131760_total_time;
        futhark_mc_task_131759_task.task_iter =
            &ctx->futhark_mc_segred_task_131760_total_iter;
        futhark_mc_task_131759_task.sched = STATIC;
        futhark_mc_task_131759_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131760_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131759_task);
        
        if (futhark_mc_segred_task_131760_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_130142 = defunc_2_reduce_res_130116 *
              defunc_2_reduce_res_130118;
        float y_130143 = defunc_2_reduce_res_130117 *
              defunc_2_reduce_res_130117;
        float a12_130144 = x_130142 - y_130143;
        float x_130145 = defunc_2_reduce_res_130116 *
              defunc_2_reduce_res_130117;
        float y_130146 = defunc_2_reduce_res_130115 *
              defunc_2_reduce_res_130118;
        float b12_130147 = x_130145 - y_130146;
        float x_130148 = defunc_2_reduce_res_130115 *
              defunc_2_reduce_res_130117;
        float y_130149 = defunc_2_reduce_res_130116 *
              defunc_2_reduce_res_130116;
        float c12_130150 = x_130148 - y_130149;
        float x_130151 = defunc_2_reduce_res_130114 *
              defunc_2_reduce_res_130118;
        float b2_130152 = x_130151 - y_130149;
        float x_130153 = defunc_2_reduce_res_130115 *
              defunc_2_reduce_res_130116;
        float y_130154 = defunc_2_reduce_res_130114 *
              defunc_2_reduce_res_130117;
        float c2_130155 = x_130153 - y_130154;
        float x_130156 = defunc_2_reduce_res_130114 * a12_130144;
        float y_130157 = defunc_2_reduce_res_130115 * b12_130147;
        float x_130158 = x_130156 + y_130157;
        float y_130159 = defunc_2_reduce_res_130116 * c12_130150;
        float y_130160 = x_130158 + y_130159;
        float det_130161 = 1.0F / y_130160;
        float a12_130162 = a12_130144 * det_130161;
        float b12_130163 = b12_130147 * det_130161;
        float c12_130164 = c12_130150 * det_130161;
        float b2_130165 = b2_130152 * det_130161;
        float c2_130166 = c2_130155 * det_130161;
        float defunc_2_reduce_res_130167;
        float defunc_2_reduce_res_130168;
        int64_t flat_tid_120566 = (int64_t) 0;
        int32_t num_tasks_130502;
        struct futhark_mc_task_131768 futhark_mc_task_131768;
        
        futhark_mc_task_131768.ctx = ctx;
        futhark_mc_task_131768.free_n_114518 = n_114518;
        futhark_mc_task_131768.free_gtid_120557 = gtid_120557;
        futhark_mc_task_131768.free_x_120680 = x_120680;
        futhark_mc_task_131768.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131768.free_x_130086 = x_130086;
        futhark_mc_task_131768.free_mem_130092 = mem_130092;
        futhark_mc_task_131768.free_mem_130112 = mem_130112;
        futhark_mc_task_131768.free_mem_130113 = mem_130113;
        futhark_mc_task_131768.free_a12_130162 = a12_130162;
        futhark_mc_task_131768.free_b12_130163 = b12_130163;
        futhark_mc_task_131768.free_c12_130164 = c12_130164;
        futhark_mc_task_131768.free_b2_130165 = b2_130165;
        futhark_mc_task_131768.free_c2_130166 = c2_130166;
        futhark_mc_task_131768.retval_defunc_2_reduce_res_130167 =
            &defunc_2_reduce_res_130167;
        futhark_mc_task_131768.retval_defunc_2_reduce_res_130168 =
            &defunc_2_reduce_res_130168;
        
        struct scheduler_segop futhark_mc_task_131768_task;
        
        futhark_mc_task_131768_task.args = &futhark_mc_task_131768;
        futhark_mc_task_131768_task.top_level_fn =
            futhark_mc_segred_task_131769;
        futhark_mc_task_131768_task.name = "futhark_mc_segred_task_131769";
        futhark_mc_task_131768_task.iterations = t_window_114521;
        futhark_mc_task_131768_task.task_time =
            &ctx->futhark_mc_segred_task_131769_total_time;
        futhark_mc_task_131768_task.task_iter =
            &ctx->futhark_mc_segred_task_131769_total_iter;
        futhark_mc_task_131768_task.sched = STATIC;
        futhark_mc_task_131768_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131769_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131768_task);
        
        if (futhark_mc_segred_task_131769_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_123325.mem)[gtid_120561] = defunc_2_reduce_res_130167;
        ((float *) mem_123328.mem)[gtid_120561] = defunc_2_reduce_res_130168;
    }
    
  cleanup:
    { }
    free(mem_130091);
    free(mem_130092);
    free(mem_130112);
    free(mem_130113);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131750_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131750_end -
                 futhark_mc_segmap_parloop_131750_start;
        
        ctx->futhark_mc_segmap_parloop_131750_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131750_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131750_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131748(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120560 = tid;
    int num_tasks_130312 = info.nsubtasks;
    struct futhark_mc_task_131740 *futhark_mc_task_131740 =
                                  (struct futhark_mc_task_131740 *) args;
    struct futhark_context *ctx = futhark_mc_task_131740->ctx;
    uint64_t futhark_mc_segmap_nested_task_131748_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131748_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131740->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131740->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131740->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131740->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131740->free_i_114594;
    int64_t gtid_120557 = futhark_mc_task_131740->free_gtid_120557;
    int64_t x_120680 = futhark_mc_task_131740->free_x_120680;
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131740->free_mem_121982,
                                  .size =0, .references =NULL};
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131740->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131740->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131740->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131740->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 = futhark_mc_task_131740->free_bytes_123251;
    struct memblock mem_123325 = {.desc ="mem_123325", .mem =
                                  futhark_mc_task_131740->free_mem_123325,
                                  .size =0, .references =NULL};
    struct memblock mem_123328 = {.desc ="mem_123328", .mem =
                                  futhark_mc_task_131740->free_mem_123328,
                                  .size =0, .references =NULL};
    int64_t iter_130394;
    struct futhark_mc_segmap_parloop_struct_131749
    futhark_mc_segmap_parloop_struct_131749;
    
    futhark_mc_segmap_parloop_struct_131749.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131749.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131749.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131749.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131749.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131749.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131749.free_gtid_120557 = gtid_120557;
    futhark_mc_segmap_parloop_struct_131749.free_x_120680 = x_120680;
    futhark_mc_segmap_parloop_struct_131749.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131749.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131749.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131749.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131749.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131749.free_bytes_123251 = bytes_123251;
    futhark_mc_segmap_parloop_struct_131749.free_mem_123325 = mem_123325.mem;
    futhark_mc_segmap_parloop_struct_131749.free_mem_123328 = mem_123328.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131750_task;
    
    futhark_mc_segmap_parloop_131750_task.name =
        "futhark_mc_segmap_parloop_131750";
    futhark_mc_segmap_parloop_131750_task.fn = futhark_mc_segmap_parloop_131750;
    futhark_mc_segmap_parloop_131750_task.args =
        &futhark_mc_segmap_parloop_struct_131749;
    futhark_mc_segmap_parloop_131750_task.iterations = iterations;
    futhark_mc_segmap_parloop_131750_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131750_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131750_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131750_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131750_task);
    
    if (futhark_mc_segmap_parloop_131750_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131750_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131750_total_end -
                 futhark_mc_segmap_parloop_131750_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131750_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131750_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131750_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131748_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131748_end -
                 futhark_mc_segmap_nested_task_131748_start;
        
        ctx->futhark_mc_segmap_nested_task_131748_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131748_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131748_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131737(void *args, int64_t start,
                                            int64_t end, int flat_tid_120556,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131736
    *futhark_mc_segmap_parloop_struct_131736 =
    (struct futhark_mc_segmap_parloop_struct_131736 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131736->ctx;
    uint64_t futhark_mc_segmap_parloop_131737_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131737_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131736->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131736->free_n_114518;
    int64_t t_window_114521 =
            futhark_mc_segmap_parloop_struct_131736->free_t_window_114521;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131736->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131736->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131736->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 =
            futhark_mc_segmap_parloop_struct_131736->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 =
            futhark_mc_segmap_parloop_struct_131736->free_bytes_123251;
    struct memblock mem_123422 = {.desc ="mem_123422", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_123422,
                                  .size =0, .references =NULL};
    struct memblock mem_123426 = {.desc ="mem_123426", .mem =
                                  futhark_mc_segmap_parloop_struct_131736->free_mem_123426,
                                  .size =0, .references =NULL};
    size_t mem_123325_cached_sizze_131738 = 0;
    char *mem_123325 = NULL;
    size_t mem_123328_cached_sizze_131739 = 0;
    char *mem_123328 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130085 = start;
    
    if (mem_123325_cached_sizze_131738 < (size_t) bytes_122113) {
        mem_123325 = realloc(mem_123325, bytes_122113);
        mem_123325_cached_sizze_131738 = bytes_122113;
    }
    if (mem_123328_cached_sizze_131739 < (size_t) bytes_122113) {
        mem_123328 = realloc(mem_123328, bytes_122113);
        mem_123328_cached_sizze_131739 = bytes_122113;
    }
    for (; iter_130085 < end; iter_130085++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130310 = m_114517;
        int64_t gtid_120557 = iter_130085;
        int64_t remnant_130311 = iter_130085 - gtid_120557;
        int64_t x_120680 = ((int64_t *) mem_121960.mem)[gtid_120557];
        int64_t flat_tid_120558 = (int64_t) 0;
        int32_t num_tasks_130312;
        int64_t flat_tid_120560 = (int64_t) 0;
        struct futhark_mc_task_131740 futhark_mc_task_131740;
        
        futhark_mc_task_131740.ctx = ctx;
        futhark_mc_task_131740.free_n_114518 = n_114518;
        futhark_mc_task_131740.free_t_window_114521 = t_window_114521;
        futhark_mc_task_131740.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131740.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131740.free_i_114594 = i_114594;
        futhark_mc_task_131740.free_gtid_120557 = gtid_120557;
        futhark_mc_task_131740.free_x_120680 = x_120680;
        futhark_mc_task_131740.free_mem_121982 = mem_121982.mem;
        futhark_mc_task_131740.free_mem_122182 = mem_122182.mem;
        futhark_mc_task_131740.free_mem_122186 = mem_122186.mem;
        futhark_mc_task_131740.free_mem_122408 = mem_122408.mem;
        futhark_mc_task_131740.free_mem_122959 = mem_122959.mem;
        futhark_mc_task_131740.free_bytes_123251 = bytes_123251;
        futhark_mc_task_131740.free_mem_123325 = mem_123325;
        futhark_mc_task_131740.free_mem_123328 = mem_123328;
        
        struct scheduler_segop futhark_mc_task_131740_task;
        
        futhark_mc_task_131740_task.args = &futhark_mc_task_131740;
        futhark_mc_task_131740_task.top_level_fn =
            futhark_mc_segmap_task_131741;
        futhark_mc_task_131740_task.name = "futhark_mc_segmap_task_131741";
        futhark_mc_task_131740_task.iterations = t_n_m_114575;
        futhark_mc_task_131740_task.task_time =
            &ctx->futhark_mc_segmap_task_131741_total_time;
        futhark_mc_task_131740_task.task_iter =
            &ctx->futhark_mc_segmap_task_131741_total_iter;
        futhark_mc_task_131740_task.sched = STATIC;
        futhark_mc_task_131740_task.nested_fn =
            futhark_mc_segmap_nested_task_131748;
        
        int futhark_mc_segmap_task_131741_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131740_task);
        
        if (futhark_mc_segmap_task_131741_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123422.mem + gtid_120557 * t_n_m_114575 * (int64_t) 4,
                mem_123325 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
        memmove(mem_123426.mem + gtid_120557 * t_n_m_114575 * (int64_t) 4,
                mem_123328 + (int64_t) 0, t_n_m_114575 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123325);
    free(mem_123328);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131737_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131737_end -
                 futhark_mc_segmap_parloop_131737_start;
        
        ctx->futhark_mc_segmap_parloop_131737_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131737_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131737_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131735(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120556 = tid;
    int num_tasks_129951 = info.nsubtasks;
    struct futhark_mc_task_131725 *futhark_mc_task_131725 =
                                  (struct futhark_mc_task_131725 *) args;
    struct futhark_context *ctx = futhark_mc_task_131725->ctx;
    uint64_t futhark_mc_segmap_nested_task_131735_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131735_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131725->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131725->free_n_114518;
    int64_t t_window_114521 = futhark_mc_task_131725->free_t_window_114521;
    int64_t t_jump_114525 = futhark_mc_task_131725->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131725->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131725->free_i_114594;
    struct memblock mem_121960 = {.desc ="mem_121960", .mem =
                                  futhark_mc_task_131725->free_mem_121960,
                                  .size =0, .references =NULL};
    struct memblock mem_121982 = {.desc ="mem_121982", .mem =
                                  futhark_mc_task_131725->free_mem_121982,
                                  .size =0, .references =NULL};
    int64_t bytes_122113 = futhark_mc_task_131725->free_bytes_122113;
    struct memblock mem_122182 = {.desc ="mem_122182", .mem =
                                  futhark_mc_task_131725->free_mem_122182,
                                  .size =0, .references =NULL};
    struct memblock mem_122186 = {.desc ="mem_122186", .mem =
                                  futhark_mc_task_131725->free_mem_122186,
                                  .size =0, .references =NULL};
    struct memblock mem_122408 = {.desc ="mem_122408", .mem =
                                  futhark_mc_task_131725->free_mem_122408,
                                  .size =0, .references =NULL};
    struct memblock mem_122959 = {.desc ="mem_122959", .mem =
                                  futhark_mc_task_131725->free_mem_122959,
                                  .size =0, .references =NULL};
    int64_t bytes_123251 = futhark_mc_task_131725->free_bytes_123251;
    struct memblock mem_123422 = {.desc ="mem_123422", .mem =
                                  futhark_mc_task_131725->free_mem_123422,
                                  .size =0, .references =NULL};
    struct memblock mem_123426 = {.desc ="mem_123426", .mem =
                                  futhark_mc_task_131725->free_mem_123426,
                                  .size =0, .references =NULL};
    int64_t iter_130085;
    struct futhark_mc_segmap_parloop_struct_131736
    futhark_mc_segmap_parloop_struct_131736;
    
    futhark_mc_segmap_parloop_struct_131736.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131736.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131736.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131736.free_t_window_114521 =
        t_window_114521;
    futhark_mc_segmap_parloop_struct_131736.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131736.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131736.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131736.free_mem_121960 = mem_121960.mem;
    futhark_mc_segmap_parloop_struct_131736.free_mem_121982 = mem_121982.mem;
    futhark_mc_segmap_parloop_struct_131736.free_bytes_122113 = bytes_122113;
    futhark_mc_segmap_parloop_struct_131736.free_mem_122182 = mem_122182.mem;
    futhark_mc_segmap_parloop_struct_131736.free_mem_122186 = mem_122186.mem;
    futhark_mc_segmap_parloop_struct_131736.free_mem_122408 = mem_122408.mem;
    futhark_mc_segmap_parloop_struct_131736.free_mem_122959 = mem_122959.mem;
    futhark_mc_segmap_parloop_struct_131736.free_bytes_123251 = bytes_123251;
    futhark_mc_segmap_parloop_struct_131736.free_mem_123422 = mem_123422.mem;
    futhark_mc_segmap_parloop_struct_131736.free_mem_123426 = mem_123426.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131737_task;
    
    futhark_mc_segmap_parloop_131737_task.name =
        "futhark_mc_segmap_parloop_131737";
    futhark_mc_segmap_parloop_131737_task.fn = futhark_mc_segmap_parloop_131737;
    futhark_mc_segmap_parloop_131737_task.args =
        &futhark_mc_segmap_parloop_struct_131736;
    futhark_mc_segmap_parloop_131737_task.iterations = iterations;
    futhark_mc_segmap_parloop_131737_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131737_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131737_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131737_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131737_task);
    
    if (futhark_mc_segmap_parloop_131737_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131737_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131737_total_end -
                 futhark_mc_segmap_parloop_131737_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131737_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131737_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131737_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131735_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131735_end -
                 futhark_mc_segmap_nested_task_131735_start;
        
        ctx->futhark_mc_segmap_nested_task_131735_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131735_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131735_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131774 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_y_116476;
    int64_t free_bytes_121961;
    char *free_ext_mem_123431;
    char *free_ext_mem_123432;
    char *free_mem_123454;
};
struct futhark_mc_segmap_parloop_struct_131776 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_y_116476;
    int64_t free_bytes_121961;
    char *free_ext_mem_123431;
    char *free_ext_mem_123432;
    char *free_mem_123454;
};
static int futhark_mc_segmap_parloop_131777(void *args, int64_t start,
                                            int64_t end, int flat_tid_120897,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131776
    *futhark_mc_segmap_parloop_struct_131776 =
    (struct futhark_mc_segmap_parloop_struct_131776 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131776->ctx;
    uint64_t futhark_mc_segmap_parloop_131777_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131777_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131776->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131776->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131776->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131776->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131776->free_i_114594;
    int64_t y_116476 = futhark_mc_segmap_parloop_struct_131776->free_y_116476;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131776->free_bytes_121961;
    struct memblock ext_mem_123431 = {.desc ="ext_mem_123431", .mem =
                                      futhark_mc_segmap_parloop_struct_131776->free_ext_mem_123431,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123432 = {.desc ="ext_mem_123432", .mem =
                                      futhark_mc_segmap_parloop_struct_131776->free_ext_mem_123432,
                                      .size =0, .references =NULL};
    struct memblock mem_123454 = {.desc ="mem_123454", .mem =
                                  futhark_mc_segmap_parloop_struct_131776->free_mem_123454,
                                  .size =0, .references =NULL};
    size_t mem_123438_cached_sizze_131778 = 0;
    char *mem_123438 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130518 = start;
    
    if (mem_123438_cached_sizze_131778 < (size_t) bytes_121961) {
        mem_123438 = realloc(mem_123438, bytes_121961);
        mem_123438_cached_sizze_131778 = bytes_121961;
    }
    for (; iter_130518 < end; iter_130518++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130568 = m_114517;
        int64_t gtid_120898 = iter_130518;
        int64_t remnant_130569 = iter_130518 - gtid_120898;
        
        for (int64_t i_130519 = 0; i_130519 < n_114518; i_130519++) {
            int64_t m_v_130521 = sdiv64(i_130519, t_jump_114525);
            bool cond_130522 = m_v_130521 == y_116476;
            int64_t j_130523;
            
            if (cond_130522) {
                int64_t j_t_res_130524 = sub64(m_v_130521, (int64_t) 1);
                
                j_130523 = j_t_res_130524;
            } else {
                j_130523 = m_v_130521;
            }
            
            int64_t min_arg_130525 = mul64(t_jump_114525, j_130523);
            int64_t min_res_130526 = smin64(i_114594, min_arg_130525);
            int64_t defunc_0_m_fun_arg_130527 = add64((int64_t) 1, j_130523);
            int64_t min_arg_130528 = mul64(t_jump_114525,
                                           defunc_0_m_fun_arg_130527);
            int64_t min_res_130529 = smin64(i_114594, min_arg_130528);
            int64_t i64_arg_130530 = sub64(min_res_130529, min_res_130526);
            float i64_res_130531 = sitofp_i64_f32(i64_arg_130530);
            int64_t i64_arg_130532 = sub64(i_130519, min_res_130526);
            float i64_res_130533 = sitofp_i64_f32(i64_arg_130532);
            float u_130534 = i64_res_130533 / i64_res_130531;
            float u2_130535 = u_130534 * u_130534;
            float u3_130536 = u_130534 * u2_130535;
            float x_130537 = 2.0F * u3_130536;
            float y_130538 = 3.0F * u2_130535;
            float x_130539 = x_130537 - y_130538;
            float x_130540 = 1.0F + x_130539;
            bool x_130541 = sle64((int64_t) 0, j_130523);
            bool y_130542 = slt64(j_130523, t_n_m_114575);
            bool bounds_check_130543 = x_130541 && y_130542;
            bool index_certs_130544;
            
            if (!bounds_check_130543) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_130523,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_114575, "].",
                              "-> #0  stl.fut:63:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:300:23-69\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:299:15-301:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float y_130545 = ((float *) ext_mem_123432.mem)[gtid_120898 *
                                                            t_n_m_114575 +
                                                            j_130523];
            float x_130546 = x_130540 * y_130545;
            float x_130547 = y_130538 - x_130537;
            bool x_130548 = sle64((int64_t) 0, defunc_0_m_fun_arg_130527);
            bool y_130549 = slt64(defunc_0_m_fun_arg_130527, t_n_m_114575);
            bool bounds_check_130550 = x_130548 && y_130549;
            bool index_certs_130551;
            
            if (!bounds_check_130550) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_130527,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_114575, "].",
                              "-> #0  stl.fut:64:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:300:23-69\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:299:15-301:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float y_130552 = ((float *) ext_mem_123432.mem)[gtid_120898 *
                                                            t_n_m_114575 +
                                                            defunc_0_m_fun_arg_130527];
            float y_130553 = x_130547 * y_130552;
            float x_130554 = x_130546 + y_130553;
            float y_130555 = 2.0F * u2_130535;
            float x_130556 = u3_130536 - y_130555;
            float x_130557 = u_130534 + x_130556;
            float y_130558 = ((float *) ext_mem_123431.mem)[gtid_120898 *
                                                            t_n_m_114575 +
                                                            j_130523];
            float x_130559 = x_130557 * y_130558;
            float y_130560 = i64_res_130531 * x_130559;
            float x_130561 = x_130554 + y_130560;
            float x_130562 = u3_130536 - u2_130535;
            float y_130563 = ((float *) ext_mem_123431.mem)[gtid_120898 *
                                                            t_n_m_114575 +
                                                            defunc_0_m_fun_arg_130527];
            float x_130564 = x_130562 * y_130563;
            float y_130565 = i64_res_130531 * x_130564;
            float defunc_0_f_res_130566 = x_130561 + y_130565;
            
            ((float *) mem_123438)[i_130519] = defunc_0_f_res_130566;
        }
        memmove(mem_123454.mem + gtid_120898 * n_114518 * (int64_t) 4,
                mem_123438 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123438);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131777_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131777_end -
                 futhark_mc_segmap_parloop_131777_start;
        
        ctx->futhark_mc_segmap_parloop_131777_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131777_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131777_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131775(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120897 = tid;
    int num_tasks_130517 = info.nsubtasks;
    struct futhark_mc_task_131774 *futhark_mc_task_131774 =
                                  (struct futhark_mc_task_131774 *) args;
    struct futhark_context *ctx = futhark_mc_task_131774->ctx;
    uint64_t futhark_mc_segmap_task_131775_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131775_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131774->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131774->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131774->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131774->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131774->free_i_114594;
    int64_t y_116476 = futhark_mc_task_131774->free_y_116476;
    int64_t bytes_121961 = futhark_mc_task_131774->free_bytes_121961;
    struct memblock ext_mem_123431 = {.desc ="ext_mem_123431", .mem =
                                      futhark_mc_task_131774->free_ext_mem_123431,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123432 = {.desc ="ext_mem_123432", .mem =
                                      futhark_mc_task_131774->free_ext_mem_123432,
                                      .size =0, .references =NULL};
    struct memblock mem_123454 = {.desc ="mem_123454", .mem =
                                  futhark_mc_task_131774->free_mem_123454,
                                  .size =0, .references =NULL};
    int64_t iter_130518;
    struct futhark_mc_segmap_parloop_struct_131776
    futhark_mc_segmap_parloop_struct_131776;
    
    futhark_mc_segmap_parloop_struct_131776.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131776.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131776.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131776.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131776.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131776.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131776.free_y_116476 = y_116476;
    futhark_mc_segmap_parloop_struct_131776.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131776.free_ext_mem_123431 =
        ext_mem_123431.mem;
    futhark_mc_segmap_parloop_struct_131776.free_ext_mem_123432 =
        ext_mem_123432.mem;
    futhark_mc_segmap_parloop_struct_131776.free_mem_123454 = mem_123454.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131777_task;
    
    futhark_mc_segmap_parloop_131777_task.name =
        "futhark_mc_segmap_parloop_131777";
    futhark_mc_segmap_parloop_131777_task.fn = futhark_mc_segmap_parloop_131777;
    futhark_mc_segmap_parloop_131777_task.args =
        &futhark_mc_segmap_parloop_struct_131776;
    futhark_mc_segmap_parloop_131777_task.iterations = iterations;
    futhark_mc_segmap_parloop_131777_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131777_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131777_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131777_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131777_task);
    
    if (futhark_mc_segmap_parloop_131777_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131777_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131777_total_end -
                 futhark_mc_segmap_parloop_131777_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131777_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131777_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131777_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131775_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131775_end -
                 futhark_mc_segmap_task_131775_start;
        
        ctx->futhark_mc_segmap_task_131775_runs[tid]++;
        ctx->futhark_mc_segmap_task_131775_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131775_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131780 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_y_116476;
    int64_t free_bytes_121961;
    char *free_ext_mem_123431;
    char *free_ext_mem_123432;
    char *free_mem_123454;
};
struct futhark_mc_task_131783 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_y_116476;
    int64_t free_gtid_120900;
    char *free_ext_mem_123431;
    char *free_ext_mem_123432;
    char *free_mem_123435;
};
struct futhark_mc_segmap_parloop_struct_131785 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_t_jump_114525;
    int64_t free_t_n_m_114575;
    int64_t free_i_114594;
    int64_t free_y_116476;
    int64_t free_gtid_120900;
    char *free_ext_mem_123431;
    char *free_ext_mem_123432;
    char *free_mem_123435;
};
static int futhark_mc_segmap_parloop_131786(void *args, int64_t start,
                                            int64_t end, int flat_tid_120901,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131785
    *futhark_mc_segmap_parloop_struct_131785 =
    (struct futhark_mc_segmap_parloop_struct_131785 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131785->ctx;
    uint64_t futhark_mc_segmap_parloop_131786_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131786_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131785->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131785->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131785->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131785->free_i_114594;
    int64_t y_116476 = futhark_mc_segmap_parloop_struct_131785->free_y_116476;
    int64_t gtid_120900 =
            futhark_mc_segmap_parloop_struct_131785->free_gtid_120900;
    struct memblock ext_mem_123431 = {.desc ="ext_mem_123431", .mem =
                                      futhark_mc_segmap_parloop_struct_131785->free_ext_mem_123431,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123432 = {.desc ="ext_mem_123432", .mem =
                                      futhark_mc_segmap_parloop_struct_131785->free_ext_mem_123432,
                                      .size =0, .references =NULL};
    struct memblock mem_123435 = {.desc ="mem_123435", .mem =
                                  futhark_mc_segmap_parloop_struct_131785->free_mem_123435,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130621 = start;
    
    for (; iter_130621 < end; iter_130621++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130623 = n_114518;
        int64_t gtid_120902 = iter_130621;
        int64_t remnant_130624 = iter_130621 - gtid_120902;
        int64_t m_v_130572 = sdiv64(gtid_120902, t_jump_114525);
        bool cond_130573 = m_v_130572 == y_116476;
        int64_t j_130574;
        
        if (cond_130573) {
            int64_t j_t_res_130622 = sub64(m_v_130572, (int64_t) 1);
            
            j_130574 = j_t_res_130622;
        } else {
            j_130574 = m_v_130572;
        }
        
        int64_t min_arg_130576 = mul64(t_jump_114525, j_130574);
        int64_t min_res_130577 = smin64(i_114594, min_arg_130576);
        int64_t defunc_0_m_fun_arg_130578 = add64((int64_t) 1, j_130574);
        int64_t min_arg_130579 = mul64(t_jump_114525,
                                       defunc_0_m_fun_arg_130578);
        int64_t min_res_130580 = smin64(i_114594, min_arg_130579);
        int64_t i64_arg_130581 = sub64(min_res_130580, min_res_130577);
        float i64_res_130582 = sitofp_i64_f32(i64_arg_130581);
        int64_t i64_arg_130583 = sub64(gtid_120902, min_res_130577);
        float i64_res_130584 = sitofp_i64_f32(i64_arg_130583);
        float u_130585 = i64_res_130584 / i64_res_130582;
        float u2_130586 = u_130585 * u_130585;
        float u3_130587 = u_130585 * u2_130586;
        float x_130588 = 2.0F * u3_130587;
        float y_130589 = 3.0F * u2_130586;
        float x_130590 = x_130588 - y_130589;
        float x_130591 = 1.0F + x_130590;
        bool x_130592 = sle64((int64_t) 0, j_130574);
        bool y_130593 = slt64(j_130574, t_n_m_114575);
        bool bounds_check_130594 = x_130592 && y_130593;
        bool index_certs_130595;
        
        if (!bounds_check_130594) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_130574,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_114575, "].",
                                   "-> #0  stl.fut:63:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:300:23-69\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:299:15-301:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
            return 1;
        }
        
        float y_130596 = ((float *) ext_mem_123432.mem)[gtid_120900 *
                                                        t_n_m_114575 +
                                                        j_130574];
        float x_130597 = x_130591 * y_130596;
        float x_130598 = y_130589 - x_130588;
        bool x_130599 = sle64((int64_t) 0, defunc_0_m_fun_arg_130578);
        bool y_130600 = slt64(defunc_0_m_fun_arg_130578, t_n_m_114575);
        bool bounds_check_130601 = x_130599 && y_130600;
        bool index_certs_130602;
        
        if (!bounds_check_130601) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_130578,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_114575, "].",
                                   "-> #0  stl.fut:64:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:300:23-69\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:299:15-301:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
            return 1;
        }
        
        float y_130603 = ((float *) ext_mem_123432.mem)[gtid_120900 *
                                                        t_n_m_114575 +
                                                        defunc_0_m_fun_arg_130578];
        float y_130604 = x_130598 * y_130603;
        float x_130605 = x_130597 + y_130604;
        float y_130606 = 2.0F * u2_130586;
        float x_130607 = u3_130587 - y_130606;
        float x_130608 = u_130585 + x_130607;
        float y_130609 = ((float *) ext_mem_123431.mem)[gtid_120900 *
                                                        t_n_m_114575 +
                                                        j_130574];
        float x_130610 = x_130608 * y_130609;
        float y_130611 = i64_res_130582 * x_130610;
        float x_130612 = x_130605 + y_130611;
        float x_130613 = u3_130587 - u2_130586;
        float y_130614 = ((float *) ext_mem_123431.mem)[gtid_120900 *
                                                        t_n_m_114575 +
                                                        defunc_0_m_fun_arg_130578];
        float x_130615 = x_130613 * y_130614;
        float y_130616 = i64_res_130582 * x_130615;
        float defunc_0_f_res_130617 = x_130612 + y_130616;
        
        ((float *) mem_123435.mem)[gtid_120902] = defunc_0_f_res_130617;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131786_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131786_end -
                 futhark_mc_segmap_parloop_131786_start;
        
        ctx->futhark_mc_segmap_parloop_131786_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131786_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131786_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131784(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120901 = tid;
    int num_tasks_130620 = info.nsubtasks;
    struct futhark_mc_task_131783 *futhark_mc_task_131783 =
                                  (struct futhark_mc_task_131783 *) args;
    struct futhark_context *ctx = futhark_mc_task_131783->ctx;
    uint64_t futhark_mc_segmap_task_131784_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131784_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131783->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131783->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131783->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131783->free_i_114594;
    int64_t y_116476 = futhark_mc_task_131783->free_y_116476;
    int64_t gtid_120900 = futhark_mc_task_131783->free_gtid_120900;
    struct memblock ext_mem_123431 = {.desc ="ext_mem_123431", .mem =
                                      futhark_mc_task_131783->free_ext_mem_123431,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123432 = {.desc ="ext_mem_123432", .mem =
                                      futhark_mc_task_131783->free_ext_mem_123432,
                                      .size =0, .references =NULL};
    struct memblock mem_123435 = {.desc ="mem_123435", .mem =
                                  futhark_mc_task_131783->free_mem_123435,
                                  .size =0, .references =NULL};
    int64_t iter_130621;
    struct futhark_mc_segmap_parloop_struct_131785
    futhark_mc_segmap_parloop_struct_131785;
    
    futhark_mc_segmap_parloop_struct_131785.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131785.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131785.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131785.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131785.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131785.free_y_116476 = y_116476;
    futhark_mc_segmap_parloop_struct_131785.free_gtid_120900 = gtid_120900;
    futhark_mc_segmap_parloop_struct_131785.free_ext_mem_123431 =
        ext_mem_123431.mem;
    futhark_mc_segmap_parloop_struct_131785.free_ext_mem_123432 =
        ext_mem_123432.mem;
    futhark_mc_segmap_parloop_struct_131785.free_mem_123435 = mem_123435.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131786_task;
    
    futhark_mc_segmap_parloop_131786_task.name =
        "futhark_mc_segmap_parloop_131786";
    futhark_mc_segmap_parloop_131786_task.fn = futhark_mc_segmap_parloop_131786;
    futhark_mc_segmap_parloop_131786_task.args =
        &futhark_mc_segmap_parloop_struct_131785;
    futhark_mc_segmap_parloop_131786_task.iterations = iterations;
    futhark_mc_segmap_parloop_131786_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131786_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131786_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131786_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131786_task);
    
    if (futhark_mc_segmap_parloop_131786_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131786_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131786_total_end -
                 futhark_mc_segmap_parloop_131786_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131786_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131786_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131786_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131784_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131784_end -
                 futhark_mc_segmap_task_131784_start;
        
        ctx->futhark_mc_segmap_task_131784_runs[tid]++;
        ctx->futhark_mc_segmap_task_131784_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131784_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131781(void *args, int64_t start,
                                            int64_t end, int flat_tid_120899,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131780
    *futhark_mc_segmap_parloop_struct_131780 =
    (struct futhark_mc_segmap_parloop_struct_131780 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131780->ctx;
    uint64_t futhark_mc_segmap_parloop_131781_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131781_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131780->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131780->free_n_114518;
    int64_t t_jump_114525 =
            futhark_mc_segmap_parloop_struct_131780->free_t_jump_114525;
    int64_t t_n_m_114575 =
            futhark_mc_segmap_parloop_struct_131780->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131780->free_i_114594;
    int64_t y_116476 = futhark_mc_segmap_parloop_struct_131780->free_y_116476;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131780->free_bytes_121961;
    struct memblock ext_mem_123431 = {.desc ="ext_mem_123431", .mem =
                                      futhark_mc_segmap_parloop_struct_131780->free_ext_mem_123431,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123432 = {.desc ="ext_mem_123432", .mem =
                                      futhark_mc_segmap_parloop_struct_131780->free_ext_mem_123432,
                                      .size =0, .references =NULL};
    struct memblock mem_123454 = {.desc ="mem_123454", .mem =
                                  futhark_mc_segmap_parloop_struct_131780->free_mem_123454,
                                  .size =0, .references =NULL};
    size_t mem_123435_cached_sizze_131782 = 0;
    char *mem_123435 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130571 = start;
    
    if (mem_123435_cached_sizze_131782 < (size_t) bytes_121961) {
        mem_123435 = realloc(mem_123435, bytes_121961);
        mem_123435_cached_sizze_131782 = bytes_121961;
    }
    for (; iter_130571 < end; iter_130571++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130618 = m_114517;
        int64_t gtid_120900 = iter_130571;
        int64_t remnant_130619 = iter_130571 - gtid_120900;
        int64_t flat_tid_120901 = (int64_t) 0;
        int32_t num_tasks_130620;
        struct futhark_mc_task_131783 futhark_mc_task_131783;
        
        futhark_mc_task_131783.ctx = ctx;
        futhark_mc_task_131783.free_n_114518 = n_114518;
        futhark_mc_task_131783.free_t_jump_114525 = t_jump_114525;
        futhark_mc_task_131783.free_t_n_m_114575 = t_n_m_114575;
        futhark_mc_task_131783.free_i_114594 = i_114594;
        futhark_mc_task_131783.free_y_116476 = y_116476;
        futhark_mc_task_131783.free_gtid_120900 = gtid_120900;
        futhark_mc_task_131783.free_ext_mem_123431 = ext_mem_123431.mem;
        futhark_mc_task_131783.free_ext_mem_123432 = ext_mem_123432.mem;
        futhark_mc_task_131783.free_mem_123435 = mem_123435;
        
        struct scheduler_segop futhark_mc_task_131783_task;
        
        futhark_mc_task_131783_task.args = &futhark_mc_task_131783;
        futhark_mc_task_131783_task.top_level_fn =
            futhark_mc_segmap_task_131784;
        futhark_mc_task_131783_task.name = "futhark_mc_segmap_task_131784";
        futhark_mc_task_131783_task.iterations = n_114518;
        futhark_mc_task_131783_task.task_time =
            &ctx->futhark_mc_segmap_task_131784_total_time;
        futhark_mc_task_131783_task.task_iter =
            &ctx->futhark_mc_segmap_task_131784_total_iter;
        futhark_mc_task_131783_task.sched = STATIC;
        futhark_mc_task_131783_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131784_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131783_task);
        
        if (futhark_mc_segmap_task_131784_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123454.mem + gtid_120900 * n_114518 * (int64_t) 4,
                mem_123435 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123435);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131781_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131781_end -
                 futhark_mc_segmap_parloop_131781_start;
        
        ctx->futhark_mc_segmap_parloop_131781_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131781_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131781_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131779(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120899 = tid;
    int num_tasks_130517 = info.nsubtasks;
    struct futhark_mc_task_131774 *futhark_mc_task_131774 =
                                  (struct futhark_mc_task_131774 *) args;
    struct futhark_context *ctx = futhark_mc_task_131774->ctx;
    uint64_t futhark_mc_segmap_nested_task_131779_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131779_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131774->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131774->free_n_114518;
    int64_t t_jump_114525 = futhark_mc_task_131774->free_t_jump_114525;
    int64_t t_n_m_114575 = futhark_mc_task_131774->free_t_n_m_114575;
    int64_t i_114594 = futhark_mc_task_131774->free_i_114594;
    int64_t y_116476 = futhark_mc_task_131774->free_y_116476;
    int64_t bytes_121961 = futhark_mc_task_131774->free_bytes_121961;
    struct memblock ext_mem_123431 = {.desc ="ext_mem_123431", .mem =
                                      futhark_mc_task_131774->free_ext_mem_123431,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123432 = {.desc ="ext_mem_123432", .mem =
                                      futhark_mc_task_131774->free_ext_mem_123432,
                                      .size =0, .references =NULL};
    struct memblock mem_123454 = {.desc ="mem_123454", .mem =
                                  futhark_mc_task_131774->free_mem_123454,
                                  .size =0, .references =NULL};
    int64_t iter_130571;
    struct futhark_mc_segmap_parloop_struct_131780
    futhark_mc_segmap_parloop_struct_131780;
    
    futhark_mc_segmap_parloop_struct_131780.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131780.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131780.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131780.free_t_jump_114525 = t_jump_114525;
    futhark_mc_segmap_parloop_struct_131780.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_segmap_parloop_struct_131780.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131780.free_y_116476 = y_116476;
    futhark_mc_segmap_parloop_struct_131780.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131780.free_ext_mem_123431 =
        ext_mem_123431.mem;
    futhark_mc_segmap_parloop_struct_131780.free_ext_mem_123432 =
        ext_mem_123432.mem;
    futhark_mc_segmap_parloop_struct_131780.free_mem_123454 = mem_123454.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131781_task;
    
    futhark_mc_segmap_parloop_131781_task.name =
        "futhark_mc_segmap_parloop_131781";
    futhark_mc_segmap_parloop_131781_task.fn = futhark_mc_segmap_parloop_131781;
    futhark_mc_segmap_parloop_131781_task.args =
        &futhark_mc_segmap_parloop_struct_131780;
    futhark_mc_segmap_parloop_131781_task.iterations = iterations;
    futhark_mc_segmap_parloop_131781_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131781_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131781_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131781_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131781_task);
    
    if (futhark_mc_segmap_parloop_131781_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131781_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131781_total_end -
                 futhark_mc_segmap_parloop_131781_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131781_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131781_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131781_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131779_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131779_end -
                 futhark_mc_segmap_nested_task_131779_start;
        
        ctx->futhark_mc_segmap_nested_task_131779_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131779_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131779_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131787 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    char *free_ext_mem_123461;
    char *free_ext_mem_123462;
    int64_t free_ext_123466;
    char *free_mem_123498;
};
struct futhark_mc_segmap_parloop_struct_131789 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    char *free_ext_mem_123461;
    char *free_ext_mem_123462;
    int64_t free_ext_123466;
    char *free_mem_123498;
};
static int futhark_mc_segmap_parloop_131790(void *args, int64_t start,
                                            int64_t end, int flat_tid_120953,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131789
    *futhark_mc_segmap_parloop_struct_131789 =
    (struct futhark_mc_segmap_parloop_struct_131789 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131789->ctx;
    uint64_t futhark_mc_segmap_parloop_131790_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131790_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131789->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131789->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131789->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131789->free_bytes_121961;
    struct memblock ext_mem_123461 = {.desc ="ext_mem_123461", .mem =
                                      futhark_mc_segmap_parloop_struct_131789->free_ext_mem_123461,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123462 = {.desc ="ext_mem_123462", .mem =
                                      futhark_mc_segmap_parloop_struct_131789->free_ext_mem_123462,
                                      .size =0, .references =NULL};
    int64_t ext_123466 =
            futhark_mc_segmap_parloop_struct_131789->free_ext_123466;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131789->free_mem_123498,
                                  .size =0, .references =NULL};
    size_t mem_123482_cached_sizze_131791 = 0;
    char *mem_123482 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130626 = start;
    
    if (mem_123482_cached_sizze_131791 < (size_t) bytes_121961) {
        mem_123482 = realloc(mem_123482, bytes_121961);
        mem_123482_cached_sizze_131791 = bytes_121961;
    }
    for (; iter_130626 < end; iter_130626++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130638 = m_114517;
        int64_t gtid_120954 = iter_130626;
        int64_t remnant_130639 = iter_130626 - gtid_120954;
        
        for (int64_t i_130627 = 0; i_130627 < n_114518; i_130627++) {
            float x_130629 = ((float *) Y_mem_121917.mem)[gtid_120954 *
                                                          n_114518 + i_130627];
            float x_130630 = ((float *) ext_mem_123462.mem)[gtid_120954 *
                                                            n_114518 +
                                                            i_130627];
            float x_130631 = ((float *) ext_mem_123461.mem)[gtid_120954 *
                                                            ext_123466 +
                                                            i_130627];
            float x_130632 = x_130629 - x_130630;
            float defunc_2_f_res_130633 = x_130632 - x_130631;
            bool isnan_res_130634;
            
            isnan_res_130634 = futrts_isnan32(defunc_2_f_res_130633);
            
            float defunc_0_f_res_130635;
            
            if (isnan_res_130634) {
                defunc_0_f_res_130635 = NAN;
            } else {
                float abs_res_130636 = (float) fabs(defunc_2_f_res_130633);
                
                defunc_0_f_res_130635 = abs_res_130636;
            }
            ((float *) mem_123482)[i_130627] = defunc_0_f_res_130635;
        }
        memmove(mem_123498.mem + gtid_120954 * n_114518 * (int64_t) 4,
                mem_123482 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123482);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131790_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131790_end -
                 futhark_mc_segmap_parloop_131790_start;
        
        ctx->futhark_mc_segmap_parloop_131790_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131790_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131790_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131788(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120953 = tid;
    int num_tasks_130625 = info.nsubtasks;
    struct futhark_mc_task_131787 *futhark_mc_task_131787 =
                                  (struct futhark_mc_task_131787 *) args;
    struct futhark_context *ctx = futhark_mc_task_131787->ctx;
    uint64_t futhark_mc_segmap_task_131788_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131788_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131787->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131787->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131787->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131787->free_bytes_121961;
    struct memblock ext_mem_123461 = {.desc ="ext_mem_123461", .mem =
                                      futhark_mc_task_131787->free_ext_mem_123461,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123462 = {.desc ="ext_mem_123462", .mem =
                                      futhark_mc_task_131787->free_ext_mem_123462,
                                      .size =0, .references =NULL};
    int64_t ext_123466 = futhark_mc_task_131787->free_ext_123466;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131787->free_mem_123498,
                                  .size =0, .references =NULL};
    int64_t iter_130626;
    struct futhark_mc_segmap_parloop_struct_131789
    futhark_mc_segmap_parloop_struct_131789;
    
    futhark_mc_segmap_parloop_struct_131789.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131789.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131789.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131789.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131789.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131789.free_ext_mem_123461 =
        ext_mem_123461.mem;
    futhark_mc_segmap_parloop_struct_131789.free_ext_mem_123462 =
        ext_mem_123462.mem;
    futhark_mc_segmap_parloop_struct_131789.free_ext_123466 = ext_123466;
    futhark_mc_segmap_parloop_struct_131789.free_mem_123498 = mem_123498.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131790_task;
    
    futhark_mc_segmap_parloop_131790_task.name =
        "futhark_mc_segmap_parloop_131790";
    futhark_mc_segmap_parloop_131790_task.fn = futhark_mc_segmap_parloop_131790;
    futhark_mc_segmap_parloop_131790_task.args =
        &futhark_mc_segmap_parloop_struct_131789;
    futhark_mc_segmap_parloop_131790_task.iterations = iterations;
    futhark_mc_segmap_parloop_131790_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131790_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131790_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131790_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131790_task);
    
    if (futhark_mc_segmap_parloop_131790_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131790_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131790_total_end -
                 futhark_mc_segmap_parloop_131790_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131790_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131790_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131790_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131788_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131788_end -
                 futhark_mc_segmap_task_131788_start;
        
        ctx->futhark_mc_segmap_task_131788_runs[tid]++;
        ctx->futhark_mc_segmap_task_131788_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131788_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131793 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    char *free_ext_mem_123461;
    char *free_ext_mem_123462;
    int64_t free_ext_123466;
    char *free_mem_123498;
};
struct futhark_mc_task_131796 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120956;
    char *free_Y_mem_121917;
    char *free_ext_mem_123461;
    char *free_ext_mem_123462;
    int64_t free_ext_123466;
    char *free_mem_123479;
};
struct futhark_mc_segmap_parloop_struct_131798 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120956;
    char *free_Y_mem_121917;
    char *free_ext_mem_123461;
    char *free_ext_mem_123462;
    int64_t free_ext_123466;
    char *free_mem_123479;
};
static int futhark_mc_segmap_parloop_131799(void *args, int64_t start,
                                            int64_t end, int flat_tid_120957,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131798
    *futhark_mc_segmap_parloop_struct_131798 =
    (struct futhark_mc_segmap_parloop_struct_131798 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131798->ctx;
    uint64_t futhark_mc_segmap_parloop_131799_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131799_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131798->free_n_114518;
    int64_t gtid_120956 =
            futhark_mc_segmap_parloop_struct_131798->free_gtid_120956;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131798->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123461 = {.desc ="ext_mem_123461", .mem =
                                      futhark_mc_segmap_parloop_struct_131798->free_ext_mem_123461,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123462 = {.desc ="ext_mem_123462", .mem =
                                      futhark_mc_segmap_parloop_struct_131798->free_ext_mem_123462,
                                      .size =0, .references =NULL};
    int64_t ext_123466 =
            futhark_mc_segmap_parloop_struct_131798->free_ext_123466;
    struct memblock mem_123479 = {.desc ="mem_123479", .mem =
                                  futhark_mc_segmap_parloop_struct_131798->free_mem_123479,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130653 = start;
    
    for (; iter_130653 < end; iter_130653++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130655 = n_114518;
        int64_t gtid_120958 = iter_130653;
        int64_t remnant_130656 = iter_130653 - gtid_120958;
        float x_130642 = ((float *) Y_mem_121917.mem)[gtid_120956 * n_114518 +
                                                      gtid_120958];
        float x_130643 = ((float *) ext_mem_123462.mem)[gtid_120956 * n_114518 +
                                                        gtid_120958];
        float x_130644 = ((float *) ext_mem_123461.mem)[gtid_120956 *
                                                        ext_123466 +
                                                        gtid_120958];
        float x_130645 = x_130642 - x_130643;
        float defunc_2_f_res_130646 = x_130645 - x_130644;
        bool isnan_res_130647;
        
        isnan_res_130647 = futrts_isnan32(defunc_2_f_res_130646);
        
        float defunc_0_f_res_130648;
        
        if (isnan_res_130647) {
            defunc_0_f_res_130648 = NAN;
        } else {
            float abs_res_130654 = (float) fabs(defunc_2_f_res_130646);
            
            defunc_0_f_res_130648 = abs_res_130654;
        }
        ((float *) mem_123479.mem)[gtid_120958] = defunc_0_f_res_130648;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131799_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131799_end -
                 futhark_mc_segmap_parloop_131799_start;
        
        ctx->futhark_mc_segmap_parloop_131799_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131799_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131799_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131797(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120957 = tid;
    int num_tasks_130652 = info.nsubtasks;
    struct futhark_mc_task_131796 *futhark_mc_task_131796 =
                                  (struct futhark_mc_task_131796 *) args;
    struct futhark_context *ctx = futhark_mc_task_131796->ctx;
    uint64_t futhark_mc_segmap_task_131797_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131797_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131796->free_n_114518;
    int64_t gtid_120956 = futhark_mc_task_131796->free_gtid_120956;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131796->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123461 = {.desc ="ext_mem_123461", .mem =
                                      futhark_mc_task_131796->free_ext_mem_123461,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123462 = {.desc ="ext_mem_123462", .mem =
                                      futhark_mc_task_131796->free_ext_mem_123462,
                                      .size =0, .references =NULL};
    int64_t ext_123466 = futhark_mc_task_131796->free_ext_123466;
    struct memblock mem_123479 = {.desc ="mem_123479", .mem =
                                  futhark_mc_task_131796->free_mem_123479,
                                  .size =0, .references =NULL};
    int64_t iter_130653;
    struct futhark_mc_segmap_parloop_struct_131798
    futhark_mc_segmap_parloop_struct_131798;
    
    futhark_mc_segmap_parloop_struct_131798.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131798.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131798.free_gtid_120956 = gtid_120956;
    futhark_mc_segmap_parloop_struct_131798.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131798.free_ext_mem_123461 =
        ext_mem_123461.mem;
    futhark_mc_segmap_parloop_struct_131798.free_ext_mem_123462 =
        ext_mem_123462.mem;
    futhark_mc_segmap_parloop_struct_131798.free_ext_123466 = ext_123466;
    futhark_mc_segmap_parloop_struct_131798.free_mem_123479 = mem_123479.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131799_task;
    
    futhark_mc_segmap_parloop_131799_task.name =
        "futhark_mc_segmap_parloop_131799";
    futhark_mc_segmap_parloop_131799_task.fn = futhark_mc_segmap_parloop_131799;
    futhark_mc_segmap_parloop_131799_task.args =
        &futhark_mc_segmap_parloop_struct_131798;
    futhark_mc_segmap_parloop_131799_task.iterations = iterations;
    futhark_mc_segmap_parloop_131799_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131799_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131799_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131799_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131799_task);
    
    if (futhark_mc_segmap_parloop_131799_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131799_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131799_total_end -
                 futhark_mc_segmap_parloop_131799_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131799_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131799_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131799_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131797_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131797_end -
                 futhark_mc_segmap_task_131797_start;
        
        ctx->futhark_mc_segmap_task_131797_runs[tid]++;
        ctx->futhark_mc_segmap_task_131797_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131797_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131794(void *args, int64_t start,
                                            int64_t end, int flat_tid_120955,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131793
    *futhark_mc_segmap_parloop_struct_131793 =
    (struct futhark_mc_segmap_parloop_struct_131793 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131793->ctx;
    uint64_t futhark_mc_segmap_parloop_131794_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131794_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131793->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131793->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131793->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131793->free_bytes_121961;
    struct memblock ext_mem_123461 = {.desc ="ext_mem_123461", .mem =
                                      futhark_mc_segmap_parloop_struct_131793->free_ext_mem_123461,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123462 = {.desc ="ext_mem_123462", .mem =
                                      futhark_mc_segmap_parloop_struct_131793->free_ext_mem_123462,
                                      .size =0, .references =NULL};
    int64_t ext_123466 =
            futhark_mc_segmap_parloop_struct_131793->free_ext_123466;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131793->free_mem_123498,
                                  .size =0, .references =NULL};
    size_t mem_123479_cached_sizze_131795 = 0;
    char *mem_123479 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130641 = start;
    
    if (mem_123479_cached_sizze_131795 < (size_t) bytes_121961) {
        mem_123479 = realloc(mem_123479, bytes_121961);
        mem_123479_cached_sizze_131795 = bytes_121961;
    }
    for (; iter_130641 < end; iter_130641++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130650 = m_114517;
        int64_t gtid_120956 = iter_130641;
        int64_t remnant_130651 = iter_130641 - gtid_120956;
        int64_t flat_tid_120957 = (int64_t) 0;
        int32_t num_tasks_130652;
        struct futhark_mc_task_131796 futhark_mc_task_131796;
        
        futhark_mc_task_131796.ctx = ctx;
        futhark_mc_task_131796.free_n_114518 = n_114518;
        futhark_mc_task_131796.free_gtid_120956 = gtid_120956;
        futhark_mc_task_131796.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131796.free_ext_mem_123461 = ext_mem_123461.mem;
        futhark_mc_task_131796.free_ext_mem_123462 = ext_mem_123462.mem;
        futhark_mc_task_131796.free_ext_123466 = ext_123466;
        futhark_mc_task_131796.free_mem_123479 = mem_123479;
        
        struct scheduler_segop futhark_mc_task_131796_task;
        
        futhark_mc_task_131796_task.args = &futhark_mc_task_131796;
        futhark_mc_task_131796_task.top_level_fn =
            futhark_mc_segmap_task_131797;
        futhark_mc_task_131796_task.name = "futhark_mc_segmap_task_131797";
        futhark_mc_task_131796_task.iterations = n_114518;
        futhark_mc_task_131796_task.task_time =
            &ctx->futhark_mc_segmap_task_131797_total_time;
        futhark_mc_task_131796_task.task_iter =
            &ctx->futhark_mc_segmap_task_131797_total_iter;
        futhark_mc_task_131796_task.sched = STATIC;
        futhark_mc_task_131796_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131797_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131796_task);
        
        if (futhark_mc_segmap_task_131797_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123498.mem + gtid_120956 * n_114518 * (int64_t) 4,
                mem_123479 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123479);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131794_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131794_end -
                 futhark_mc_segmap_parloop_131794_start;
        
        ctx->futhark_mc_segmap_parloop_131794_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131794_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131794_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131792(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120955 = tid;
    int num_tasks_130625 = info.nsubtasks;
    struct futhark_mc_task_131787 *futhark_mc_task_131787 =
                                  (struct futhark_mc_task_131787 *) args;
    struct futhark_context *ctx = futhark_mc_task_131787->ctx;
    uint64_t futhark_mc_segmap_nested_task_131792_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131792_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131787->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131787->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131787->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131787->free_bytes_121961;
    struct memblock ext_mem_123461 = {.desc ="ext_mem_123461", .mem =
                                      futhark_mc_task_131787->free_ext_mem_123461,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123462 = {.desc ="ext_mem_123462", .mem =
                                      futhark_mc_task_131787->free_ext_mem_123462,
                                      .size =0, .references =NULL};
    int64_t ext_123466 = futhark_mc_task_131787->free_ext_123466;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131787->free_mem_123498,
                                  .size =0, .references =NULL};
    int64_t iter_130641;
    struct futhark_mc_segmap_parloop_struct_131793
    futhark_mc_segmap_parloop_struct_131793;
    
    futhark_mc_segmap_parloop_struct_131793.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131793.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131793.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131793.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131793.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131793.free_ext_mem_123461 =
        ext_mem_123461.mem;
    futhark_mc_segmap_parloop_struct_131793.free_ext_mem_123462 =
        ext_mem_123462.mem;
    futhark_mc_segmap_parloop_struct_131793.free_ext_123466 = ext_123466;
    futhark_mc_segmap_parloop_struct_131793.free_mem_123498 = mem_123498.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131794_task;
    
    futhark_mc_segmap_parloop_131794_task.name =
        "futhark_mc_segmap_parloop_131794";
    futhark_mc_segmap_parloop_131794_task.fn = futhark_mc_segmap_parloop_131794;
    futhark_mc_segmap_parloop_131794_task.args =
        &futhark_mc_segmap_parloop_struct_131793;
    futhark_mc_segmap_parloop_131794_task.iterations = iterations;
    futhark_mc_segmap_parloop_131794_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131794_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131794_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131794_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131794_task);
    
    if (futhark_mc_segmap_parloop_131794_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131794_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131794_total_end -
                 futhark_mc_segmap_parloop_131794_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131794_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131794_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131794_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131792_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131792_end -
                 futhark_mc_segmap_nested_task_131792_start;
        
        ctx->futhark_mc_segmap_nested_task_131792_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131792_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131792_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131800 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_123498;
    char *free_mem_123520;
};
struct futhark_mc_segmap_parloop_struct_131802 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_123498;
    char *free_mem_123520;
};
static int futhark_mc_segmap_parloop_131803(void *args, int64_t start,
                                            int64_t end, int flat_tid_120971,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131802
    *futhark_mc_segmap_parloop_struct_131802 =
    (struct futhark_mc_segmap_parloop_struct_131802 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131802->ctx;
    uint64_t futhark_mc_segmap_parloop_131803_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131803_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131802->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131802->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131802->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131802->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131802->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_segmap_parloop_struct_131802->free_mem_123520,
                                  .size =0, .references =NULL};
    size_t mem_123504_cached_sizze_131804 = 0;
    char *mem_123504 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130658 = start;
    
    if (mem_123504_cached_sizze_131804 < (size_t) bytes_121961) {
        mem_123504 = realloc(mem_123504, bytes_121961);
        mem_123504_cached_sizze_131804 = bytes_121961;
    }
    for (; iter_130658 < end; iter_130658++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130669 = m_114517;
        int64_t gtid_120972 = iter_130658;
        int64_t remnant_130670 = iter_130658 - gtid_120972;
        
        for (int64_t i_130659 = 0; i_130659 < n_114518; i_130659++) {
            int64_t x_130661 = ((int64_t *) mem_121957.mem)[gtid_120972 *
                                                            n_114518 +
                                                            i_130659];
            bool cond_130662 = sle64((int64_t) 0, x_130661);
            float defunc_0_f_res_130663;
            
            if (cond_130662) {
                bool y_130664 = slt64(x_130661, n_114518);
                bool bounds_check_130665 = cond_130662 && y_130664;
                bool index_certs_130666;
                
                if (!bounds_check_130665) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_130661,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114518, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:330:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:328:13-331:35\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_130667 =
                      ((float *) mem_123498.mem)[gtid_120972 * n_114518 +
                                                 x_130661];
                
                defunc_0_f_res_130663 = defunc_0_f_res_t_res_130667;
            } else {
                defunc_0_f_res_130663 = INFINITY;
            }
            ((float *) mem_123504)[i_130659] = defunc_0_f_res_130663;
        }
        memmove(mem_123520.mem + gtid_120972 * n_114518 * (int64_t) 4,
                mem_123504 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123504);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131803_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131803_end -
                 futhark_mc_segmap_parloop_131803_start;
        
        ctx->futhark_mc_segmap_parloop_131803_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131803_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131803_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131801(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120971 = tid;
    int num_tasks_130657 = info.nsubtasks;
    struct futhark_mc_task_131800 *futhark_mc_task_131800 =
                                  (struct futhark_mc_task_131800 *) args;
    struct futhark_context *ctx = futhark_mc_task_131800->ctx;
    uint64_t futhark_mc_segmap_task_131801_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131801_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131800->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131800->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131800->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131800->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131800->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_task_131800->free_mem_123520,
                                  .size =0, .references =NULL};
    int64_t iter_130658;
    struct futhark_mc_segmap_parloop_struct_131802
    futhark_mc_segmap_parloop_struct_131802;
    
    futhark_mc_segmap_parloop_struct_131802.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131802.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131802.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131802.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131802.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131802.free_mem_123498 = mem_123498.mem;
    futhark_mc_segmap_parloop_struct_131802.free_mem_123520 = mem_123520.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131803_task;
    
    futhark_mc_segmap_parloop_131803_task.name =
        "futhark_mc_segmap_parloop_131803";
    futhark_mc_segmap_parloop_131803_task.fn = futhark_mc_segmap_parloop_131803;
    futhark_mc_segmap_parloop_131803_task.args =
        &futhark_mc_segmap_parloop_struct_131802;
    futhark_mc_segmap_parloop_131803_task.iterations = iterations;
    futhark_mc_segmap_parloop_131803_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131803_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131803_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131803_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131803_task);
    
    if (futhark_mc_segmap_parloop_131803_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131803_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131803_total_end -
                 futhark_mc_segmap_parloop_131803_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131803_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131803_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131803_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131801_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131801_end -
                 futhark_mc_segmap_task_131801_start;
        
        ctx->futhark_mc_segmap_task_131801_runs[tid]++;
        ctx->futhark_mc_segmap_task_131801_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131801_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131806 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_mem_121957;
    int64_t free_bytes_121961;
    char *free_mem_123498;
    char *free_mem_123520;
};
struct futhark_mc_task_131809 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120974;
    char *free_mem_121957;
    char *free_mem_123498;
    char *free_mem_123501;
};
struct futhark_mc_segmap_parloop_struct_131811 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_120974;
    char *free_mem_121957;
    char *free_mem_123498;
    char *free_mem_123501;
};
static int futhark_mc_segmap_parloop_131812(void *args, int64_t start,
                                            int64_t end, int flat_tid_120975,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131811
    *futhark_mc_segmap_parloop_struct_131811 =
    (struct futhark_mc_segmap_parloop_struct_131811 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131811->ctx;
    uint64_t futhark_mc_segmap_parloop_131812_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131812_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131811->free_n_114518;
    int64_t gtid_120974 =
            futhark_mc_segmap_parloop_struct_131811->free_gtid_120974;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131811->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131811->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123501 = {.desc ="mem_123501", .mem =
                                  futhark_mc_segmap_parloop_struct_131811->free_mem_123501,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130683 = start;
    
    for (; iter_130683 < end; iter_130683++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130688 = n_114518;
        int64_t gtid_120976 = iter_130683;
        int64_t remnant_130689 = iter_130683 - gtid_120976;
        int64_t x_130673 = ((int64_t *) mem_121957.mem)[gtid_120974 * n_114518 +
                                                        gtid_120976];
        bool cond_130674 = sle64((int64_t) 0, x_130673);
        float defunc_0_f_res_130675;
        
        if (cond_130674) {
            bool y_130684 = slt64(x_130673, n_114518);
            bool bounds_check_130685 = cond_130674 && y_130684;
            bool index_certs_130686;
            
            if (!bounds_check_130685) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_130673,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:330:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:328:13-331:35\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_130687 =
                  ((float *) mem_123498.mem)[gtid_120974 * n_114518 + x_130673];
            
            defunc_0_f_res_130675 = defunc_0_f_res_t_res_130687;
        } else {
            defunc_0_f_res_130675 = INFINITY;
        }
        ((float *) mem_123501.mem)[gtid_120976] = defunc_0_f_res_130675;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131812_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131812_end -
                 futhark_mc_segmap_parloop_131812_start;
        
        ctx->futhark_mc_segmap_parloop_131812_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131812_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131812_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131810(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120975 = tid;
    int num_tasks_130682 = info.nsubtasks;
    struct futhark_mc_task_131809 *futhark_mc_task_131809 =
                                  (struct futhark_mc_task_131809 *) args;
    struct futhark_context *ctx = futhark_mc_task_131809->ctx;
    uint64_t futhark_mc_segmap_task_131810_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131810_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131809->free_n_114518;
    int64_t gtid_120974 = futhark_mc_task_131809->free_gtid_120974;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131809->free_mem_121957,
                                  .size =0, .references =NULL};
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131809->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123501 = {.desc ="mem_123501", .mem =
                                  futhark_mc_task_131809->free_mem_123501,
                                  .size =0, .references =NULL};
    int64_t iter_130683;
    struct futhark_mc_segmap_parloop_struct_131811
    futhark_mc_segmap_parloop_struct_131811;
    
    futhark_mc_segmap_parloop_struct_131811.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131811.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131811.free_gtid_120974 = gtid_120974;
    futhark_mc_segmap_parloop_struct_131811.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131811.free_mem_123498 = mem_123498.mem;
    futhark_mc_segmap_parloop_struct_131811.free_mem_123501 = mem_123501.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131812_task;
    
    futhark_mc_segmap_parloop_131812_task.name =
        "futhark_mc_segmap_parloop_131812";
    futhark_mc_segmap_parloop_131812_task.fn = futhark_mc_segmap_parloop_131812;
    futhark_mc_segmap_parloop_131812_task.args =
        &futhark_mc_segmap_parloop_struct_131811;
    futhark_mc_segmap_parloop_131812_task.iterations = iterations;
    futhark_mc_segmap_parloop_131812_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131812_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131812_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131812_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131812_task);
    
    if (futhark_mc_segmap_parloop_131812_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131812_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131812_total_end -
                 futhark_mc_segmap_parloop_131812_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131812_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131812_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131812_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131810_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131810_end -
                 futhark_mc_segmap_task_131810_start;
        
        ctx->futhark_mc_segmap_task_131810_runs[tid]++;
        ctx->futhark_mc_segmap_task_131810_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131810_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131807(void *args, int64_t start,
                                            int64_t end, int flat_tid_120973,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131806
    *futhark_mc_segmap_parloop_struct_131806 =
    (struct futhark_mc_segmap_parloop_struct_131806 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131806->ctx;
    uint64_t futhark_mc_segmap_parloop_131807_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131807_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131806->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131806->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_segmap_parloop_struct_131806->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131806->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131806->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_segmap_parloop_struct_131806->free_mem_123520,
                                  .size =0, .references =NULL};
    size_t mem_123501_cached_sizze_131808 = 0;
    char *mem_123501 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130672 = start;
    
    if (mem_123501_cached_sizze_131808 < (size_t) bytes_121961) {
        mem_123501 = realloc(mem_123501, bytes_121961);
        mem_123501_cached_sizze_131808 = bytes_121961;
    }
    for (; iter_130672 < end; iter_130672++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130680 = m_114517;
        int64_t gtid_120974 = iter_130672;
        int64_t remnant_130681 = iter_130672 - gtid_120974;
        int64_t flat_tid_120975 = (int64_t) 0;
        int32_t num_tasks_130682;
        struct futhark_mc_task_131809 futhark_mc_task_131809;
        
        futhark_mc_task_131809.ctx = ctx;
        futhark_mc_task_131809.free_n_114518 = n_114518;
        futhark_mc_task_131809.free_gtid_120974 = gtid_120974;
        futhark_mc_task_131809.free_mem_121957 = mem_121957.mem;
        futhark_mc_task_131809.free_mem_123498 = mem_123498.mem;
        futhark_mc_task_131809.free_mem_123501 = mem_123501;
        
        struct scheduler_segop futhark_mc_task_131809_task;
        
        futhark_mc_task_131809_task.args = &futhark_mc_task_131809;
        futhark_mc_task_131809_task.top_level_fn =
            futhark_mc_segmap_task_131810;
        futhark_mc_task_131809_task.name = "futhark_mc_segmap_task_131810";
        futhark_mc_task_131809_task.iterations = n_114518;
        futhark_mc_task_131809_task.task_time =
            &ctx->futhark_mc_segmap_task_131810_total_time;
        futhark_mc_task_131809_task.task_iter =
            &ctx->futhark_mc_segmap_task_131810_total_iter;
        futhark_mc_task_131809_task.sched = STATIC;
        futhark_mc_task_131809_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131810_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131809_task);
        
        if (futhark_mc_segmap_task_131810_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123520.mem + gtid_120974 * n_114518 * (int64_t) 4,
                mem_123501 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123501);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131807_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131807_end -
                 futhark_mc_segmap_parloop_131807_start;
        
        ctx->futhark_mc_segmap_parloop_131807_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131807_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131807_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131805(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120973 = tid;
    int num_tasks_130657 = info.nsubtasks;
    struct futhark_mc_task_131800 *futhark_mc_task_131800 =
                                  (struct futhark_mc_task_131800 *) args;
    struct futhark_context *ctx = futhark_mc_task_131800->ctx;
    uint64_t futhark_mc_segmap_nested_task_131805_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131805_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131800->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131800->free_n_114518;
    struct memblock mem_121957 = {.desc ="mem_121957", .mem =
                                  futhark_mc_task_131800->free_mem_121957,
                                  .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131800->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131800->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_task_131800->free_mem_123520,
                                  .size =0, .references =NULL};
    int64_t iter_130672;
    struct futhark_mc_segmap_parloop_struct_131806
    futhark_mc_segmap_parloop_struct_131806;
    
    futhark_mc_segmap_parloop_struct_131806.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131806.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131806.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131806.free_mem_121957 = mem_121957.mem;
    futhark_mc_segmap_parloop_struct_131806.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131806.free_mem_123498 = mem_123498.mem;
    futhark_mc_segmap_parloop_struct_131806.free_mem_123520 = mem_123520.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131807_task;
    
    futhark_mc_segmap_parloop_131807_task.name =
        "futhark_mc_segmap_parloop_131807";
    futhark_mc_segmap_parloop_131807_task.fn = futhark_mc_segmap_parloop_131807;
    futhark_mc_segmap_parloop_131807_task.args =
        &futhark_mc_segmap_parloop_struct_131806;
    futhark_mc_segmap_parloop_131807_task.iterations = iterations;
    futhark_mc_segmap_parloop_131807_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131807_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131807_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131807_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131807_task);
    
    if (futhark_mc_segmap_parloop_131807_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131807_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131807_total_end -
                 futhark_mc_segmap_parloop_131807_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131807_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131807_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131807_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131805_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131805_end -
                 futhark_mc_segmap_nested_task_131805_start;
        
        ctx->futhark_mc_segmap_nested_task_131805_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131805_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131805_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131813 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_i_114594;
    int32_t free_iters_116561;
    int64_t free_bytes_121918;
    int64_t free_bytes_121961;
    char *free_mem_123520;
    char *free_mem_123674;
    int64_t free_double_buffer_sizze_123818;
    int64_t free_double_buffer_sizze_123822;
};
struct futhark_mc_segmap_parloop_struct_131815 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_i_114594;
    int32_t free_iters_116561;
    int64_t free_bytes_121918;
    int64_t free_bytes_121961;
    char *free_mem_123520;
    char *free_mem_123674;
    int64_t free_double_buffer_sizze_123822;
};
static int futhark_mc_segmap_parloop_131816(void *args, int64_t start,
                                            int64_t end, int flat_tid_120987,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131815
    *futhark_mc_segmap_parloop_struct_131815 =
    (struct futhark_mc_segmap_parloop_struct_131815 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131815->ctx;
    uint64_t futhark_mc_segmap_parloop_131816_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131816_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131815->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131815->free_n_114518;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131815->free_i_114594;
    int32_t iters_116561 =
            futhark_mc_segmap_parloop_struct_131815->free_iters_116561;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131815->free_bytes_121918;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131815->free_bytes_121961;
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_segmap_parloop_struct_131815->free_mem_123520,
                                  .size =0, .references =NULL};
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_segmap_parloop_struct_131815->free_mem_123674,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123822 =
            futhark_mc_segmap_parloop_struct_131815->free_double_buffer_sizze_123822;
    size_t mem_123578_cached_sizze_131817 = 0;
    char *mem_123578 = NULL;
    size_t mem_123581_cached_sizze_131818 = 0;
    char *mem_123581 = NULL;
    size_t mem_123584_cached_sizze_131819 = 0;
    char *mem_123584 = NULL;
    size_t mem_123587_cached_sizze_131820 = 0;
    char *mem_123587 = NULL;
    size_t mem_123590_cached_sizze_131821 = 0;
    char *mem_123590 = NULL;
    size_t mem_123653_cached_sizze_131822 = 0;
    char *mem_123653 = NULL;
    size_t double_buffer_mem_123820_cached_sizze_131823 = 0;
    char *double_buffer_mem_123820 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130691 = start;
    
    if (mem_123578_cached_sizze_131817 < (size_t) bytes_121918) {
        mem_123578 = realloc(mem_123578, bytes_121918);
        mem_123578_cached_sizze_131817 = bytes_121918;
    }
    if (mem_123581_cached_sizze_131818 < (size_t) bytes_121918) {
        mem_123581 = realloc(mem_123581, bytes_121918);
        mem_123581_cached_sizze_131818 = bytes_121918;
    }
    if (mem_123584_cached_sizze_131819 < (size_t) bytes_121918) {
        mem_123584 = realloc(mem_123584, bytes_121918);
        mem_123584_cached_sizze_131819 = bytes_121918;
    }
    if (mem_123587_cached_sizze_131820 < (size_t) bytes_121918) {
        mem_123587 = realloc(mem_123587, bytes_121918);
        mem_123587_cached_sizze_131820 = bytes_121918;
    }
    if (mem_123590_cached_sizze_131821 < (size_t) bytes_121961) {
        mem_123590 = realloc(mem_123590, bytes_121961);
        mem_123590_cached_sizze_131821 = bytes_121961;
    }
    if (double_buffer_mem_123820_cached_sizze_131823 <
        (size_t) double_buffer_sizze_123822) {
        double_buffer_mem_123820 = realloc(double_buffer_mem_123820,
                                           double_buffer_sizze_123822);
        double_buffer_mem_123820_cached_sizze_131823 =
            double_buffer_sizze_123822;
    }
    if (mem_123653_cached_sizze_131822 < (size_t) bytes_121961) {
        mem_123653 = realloc(mem_123653, bytes_121961);
        mem_123653_cached_sizze_131822 = bytes_121961;
    }
    for (; iter_130691 < end; iter_130691++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130795 = m_114517;
        int64_t gtid_120988 = iter_130691;
        int64_t remnant_130796 = iter_130691 - gtid_120988;
        
        memmove(double_buffer_mem_123820 + (int64_t) 0, mem_123520.mem +
                gtid_120988 * n_114518 * (int64_t) 4, n_114518 * (int64_t) 4);
        for (int32_t i_130692 = 0; i_130692 < iters_116561; i_130692++) {
            int32_t defunc_2_radix_sort_step_arg_130694 = mul32(2, i_130692);
            int32_t defunc_0_get_bit_arg_130695 = add32(1,
                                                        defunc_2_radix_sort_step_arg_130694);
            bool cond_f_res_130696 = defunc_0_get_bit_arg_130695 == 31;
            bool cond_f_res_130697 = defunc_2_radix_sort_step_arg_130694 == 31;
            int64_t discard_130703;
            int64_t discard_130704;
            int64_t discard_130705;
            int64_t discard_130706;
            int64_t scanacc_130713;
            int64_t scanacc_130714;
            int64_t scanacc_130715;
            int64_t scanacc_130716;
            
            scanacc_130713 = (int64_t) 0;
            scanacc_130714 = (int64_t) 0;
            scanacc_130715 = (int64_t) 0;
            scanacc_130716 = (int64_t) 0;
            for (int64_t i_130712 = 0; i_130712 < n_114518; i_130712++) {
                float x_130722 = ((float *) double_buffer_mem_123820)[i_130712];
                int32_t i32_arg_130723;
                
                i32_arg_130723 = futrts_to_bits32(x_130722);
                
                int32_t unsign_arg_130724 = ashr32(i32_arg_130723,
                                                   defunc_0_get_bit_arg_130695);
                int32_t unsign_arg_130725 = 1 & unsign_arg_130724;
                int32_t unsign_arg_130726 = ashr32(i32_arg_130723, 31);
                int32_t unsign_arg_130727 = 1 & unsign_arg_130726;
                bool cond_130728 = unsign_arg_130727 == 1;
                bool x_130729 = !cond_130728;
                bool y_130730 = cond_f_res_130696 && x_130729;
                bool cond_130731 = cond_130728 || y_130730;
                int32_t defunc_1_get_bit_res_130732;
                
                if (cond_130731) {
                    int32_t defunc_1_get_bit_res_t_res_130733 = 1 ^
                            unsign_arg_130725;
                    
                    defunc_1_get_bit_res_130732 =
                        defunc_1_get_bit_res_t_res_130733;
                } else {
                    defunc_1_get_bit_res_130732 = unsign_arg_130725;
                }
                
                int32_t x_130734 = mul32(2, defunc_1_get_bit_res_130732);
                int32_t unsign_arg_130735 = ashr32(i32_arg_130723,
                                                   defunc_2_radix_sort_step_arg_130694);
                int32_t unsign_arg_130736 = 1 & unsign_arg_130735;
                bool y_130737 = cond_f_res_130697 && x_130729;
                bool cond_130738 = cond_130728 || y_130737;
                int32_t defunc_1_get_bit_res_130739;
                
                if (cond_130738) {
                    int32_t defunc_1_get_bit_res_t_res_130740 = 1 ^
                            unsign_arg_130736;
                    
                    defunc_1_get_bit_res_130739 =
                        defunc_1_get_bit_res_t_res_130740;
                } else {
                    defunc_1_get_bit_res_130739 = unsign_arg_130736;
                }
                
                int32_t defunc_0_f_res_130741 = add32(x_130734,
                                                      defunc_1_get_bit_res_130739);
                bool cond_130742 = defunc_0_f_res_130741 == 0;
                int64_t defunc_0_f_res_130743 = btoi_bool_i64(cond_130742);
                int64_t defunc_0_f_res_130744;
                int64_t defunc_0_f_res_130745;
                int64_t defunc_0_f_res_130746;
                
                if (cond_130742) {
                    defunc_0_f_res_130744 = (int64_t) 0;
                    defunc_0_f_res_130745 = (int64_t) 0;
                    defunc_0_f_res_130746 = (int64_t) 0;
                } else {
                    bool cond_130747 = defunc_0_f_res_130741 == 1;
                    int64_t defunc_0_f_res_f_res_130748 =
                            btoi_bool_i64(cond_130747);
                    int64_t defunc_0_f_res_f_res_130749;
                    int64_t defunc_0_f_res_f_res_130750;
                    
                    if (cond_130747) {
                        defunc_0_f_res_f_res_130749 = (int64_t) 0;
                        defunc_0_f_res_f_res_130750 = (int64_t) 0;
                    } else {
                        bool cond_130751 = defunc_0_f_res_130741 == 2;
                        int64_t defunc_0_f_res_f_res_f_res_130752 =
                                btoi_bool_i64(cond_130751);
                        bool cond_neg_130753 = !cond_130751;
                        int64_t defunc_0_f_res_f_res_f_res_130754 =
                                btoi_bool_i64(cond_neg_130753);
                        
                        defunc_0_f_res_f_res_130749 =
                            defunc_0_f_res_f_res_f_res_130752;
                        defunc_0_f_res_f_res_130750 =
                            defunc_0_f_res_f_res_f_res_130754;
                    }
                    defunc_0_f_res_130744 = defunc_0_f_res_f_res_130748;
                    defunc_0_f_res_130745 = defunc_0_f_res_f_res_130749;
                    defunc_0_f_res_130746 = defunc_0_f_res_f_res_130750;
                }
                
                int64_t defunc_1_op_res_130755 = add64(defunc_0_f_res_130743,
                                                       scanacc_130713);
                int64_t defunc_1_op_res_130756 = add64(defunc_0_f_res_130744,
                                                       scanacc_130714);
                int64_t defunc_1_op_res_130757 = add64(defunc_0_f_res_130745,
                                                       scanacc_130715);
                int64_t defunc_1_op_res_130758 = add64(defunc_0_f_res_130746,
                                                       scanacc_130716);
                
                ((int64_t *) mem_123578)[i_130712] = defunc_1_op_res_130755;
                ((int64_t *) mem_123581)[i_130712] = defunc_1_op_res_130756;
                ((int64_t *) mem_123584)[i_130712] = defunc_1_op_res_130757;
                ((int64_t *) mem_123587)[i_130712] = defunc_1_op_res_130758;
                ((int32_t *) mem_123590)[i_130712] = defunc_0_f_res_130741;
                
                int64_t scanacc_tmp_130798 = defunc_1_op_res_130755;
                int64_t scanacc_tmp_130799 = defunc_1_op_res_130756;
                int64_t scanacc_tmp_130800 = defunc_1_op_res_130757;
                int64_t scanacc_tmp_130801 = defunc_1_op_res_130758;
                
                scanacc_130713 = scanacc_tmp_130798;
                scanacc_130714 = scanacc_tmp_130799;
                scanacc_130715 = scanacc_tmp_130800;
                scanacc_130716 = scanacc_tmp_130801;
            }
            discard_130703 = scanacc_130713;
            discard_130704 = scanacc_130714;
            discard_130705 = scanacc_130715;
            discard_130706 = scanacc_130716;
            
            int64_t last_res_130764 = ((int64_t *) mem_123578)[i_114594];
            int64_t last_res_130765 = ((int64_t *) mem_123581)[i_114594];
            int64_t last_res_130766 = ((int64_t *) mem_123584)[i_114594];
            
            memmove(mem_123653 + (int64_t) 0, double_buffer_mem_123820 +
                    (int64_t) 0, n_114518 * (int64_t) 4);
            for (int64_t write_iter_130769 = 0; write_iter_130769 < n_114518;
                 write_iter_130769++) {
                int32_t write_iv_130771 =
                        ((int32_t *) mem_123590)[write_iter_130769];
                bool match_lit_130772 = 0 == write_iv_130771;
                int64_t defunc_1_f_res_130773;
                
                if (match_lit_130772) {
                    int64_t write_iv_130774 =
                            ((int64_t *) mem_123578)[write_iter_130769];
                    int64_t case_res_130775 = sub64(write_iv_130774,
                                                    (int64_t) 1);
                    
                    defunc_1_f_res_130773 = case_res_130775;
                } else {
                    bool match_lit_130776 = 1 == write_iv_130771;
                    int64_t x_130777;
                    
                    if (match_lit_130776) {
                        int64_t write_iv_130778 =
                                ((int64_t *) mem_123581)[write_iter_130769];
                        int64_t x_130779 = add64(last_res_130764,
                                                 write_iv_130778);
                        int64_t case_res_130780 = sub64(x_130779, (int64_t) 1);
                        
                        x_130777 = case_res_130780;
                    } else {
                        bool match_lit_130781 = 2 == write_iv_130771;
                        int64_t x_130782;
                        
                        if (match_lit_130781) {
                            int64_t write_iv_130783 =
                                    ((int64_t *) mem_123584)[write_iter_130769];
                            int64_t x_130784 = add64(last_res_130764,
                                                     last_res_130765);
                            int64_t x_130785 = add64(x_130784, write_iv_130783);
                            int64_t case_res_130786 = sub64(x_130785,
                                                            (int64_t) 1);
                            
                            x_130782 = case_res_130786;
                        } else {
                            int64_t write_iv_130787 =
                                    ((int64_t *) mem_123587)[write_iter_130769];
                            int64_t x_130788 = add64(last_res_130764,
                                                     last_res_130765);
                            int64_t x_130789 = add64(last_res_130766, x_130788);
                            int64_t x_130790 = add64(x_130789, write_iv_130787);
                            int64_t defunc_1_f_res_res_130791 = sub64(x_130790,
                                                                      (int64_t) 1);
                            
                            x_130782 = defunc_1_f_res_res_130791;
                        }
                        x_130777 = x_130782;
                    }
                    defunc_1_f_res_130773 = x_130777;
                }
                if (sle64((int64_t) 0, defunc_1_f_res_130773) &&
                    slt64(defunc_1_f_res_130773, n_114518)) {
                    memmove(mem_123653 + defunc_1_f_res_130773 * (int64_t) 4,
                            double_buffer_mem_123820 + write_iter_130769 *
                            (int64_t) 4, (int64_t) 4);
                }
            }
            memmove(double_buffer_mem_123820 + (int64_t) 0, mem_123653 +
                    (int64_t) 0, n_114518 * (int64_t) 4);
        }
        memmove(mem_123674.mem + gtid_120988 * n_114518 * (int64_t) 4,
                double_buffer_mem_123820 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123578);
    free(mem_123581);
    free(mem_123584);
    free(mem_123587);
    free(mem_123590);
    free(mem_123653);
    free(double_buffer_mem_123820);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131816_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131816_end -
                 futhark_mc_segmap_parloop_131816_start;
        
        ctx->futhark_mc_segmap_parloop_131816_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131816_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131816_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131814(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120987 = tid;
    int num_tasks_130690 = info.nsubtasks;
    struct futhark_mc_task_131813 *futhark_mc_task_131813 =
                                  (struct futhark_mc_task_131813 *) args;
    struct futhark_context *ctx = futhark_mc_task_131813->ctx;
    uint64_t futhark_mc_segmap_task_131814_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131814_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131813->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131813->free_n_114518;
    int64_t i_114594 = futhark_mc_task_131813->free_i_114594;
    int32_t iters_116561 = futhark_mc_task_131813->free_iters_116561;
    int64_t bytes_121918 = futhark_mc_task_131813->free_bytes_121918;
    int64_t bytes_121961 = futhark_mc_task_131813->free_bytes_121961;
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_task_131813->free_mem_123520,
                                  .size =0, .references =NULL};
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_task_131813->free_mem_123674,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123818 =
            futhark_mc_task_131813->free_double_buffer_sizze_123818;
    int64_t double_buffer_sizze_123822 =
            futhark_mc_task_131813->free_double_buffer_sizze_123822;
    int64_t iter_130691;
    struct futhark_mc_segmap_parloop_struct_131815
    futhark_mc_segmap_parloop_struct_131815;
    
    futhark_mc_segmap_parloop_struct_131815.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131815.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131815.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131815.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131815.free_iters_116561 = iters_116561;
    futhark_mc_segmap_parloop_struct_131815.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131815.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131815.free_mem_123520 = mem_123520.mem;
    futhark_mc_segmap_parloop_struct_131815.free_mem_123674 = mem_123674.mem;
    futhark_mc_segmap_parloop_struct_131815.free_double_buffer_sizze_123822 =
        double_buffer_sizze_123822;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131816_task;
    
    futhark_mc_segmap_parloop_131816_task.name =
        "futhark_mc_segmap_parloop_131816";
    futhark_mc_segmap_parloop_131816_task.fn = futhark_mc_segmap_parloop_131816;
    futhark_mc_segmap_parloop_131816_task.args =
        &futhark_mc_segmap_parloop_struct_131815;
    futhark_mc_segmap_parloop_131816_task.iterations = iterations;
    futhark_mc_segmap_parloop_131816_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131816_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131816_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131816_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131816_task);
    
    if (futhark_mc_segmap_parloop_131816_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131816_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131816_total_end -
                 futhark_mc_segmap_parloop_131816_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131816_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131816_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131816_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131814_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131814_end -
                 futhark_mc_segmap_task_131814_start;
        
        ctx->futhark_mc_segmap_task_131814_runs[tid]++;
        ctx->futhark_mc_segmap_task_131814_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131814_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131825 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_i_114594;
    int32_t free_iters_116561;
    int64_t free_bytes_121918;
    int64_t free_bytes_121961;
    char *free_mem_123520;
    char *free_mem_123674;
    int64_t free_double_buffer_sizze_123818;
};
struct futhark_mc_task_131834 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    char *free_mem_123538;
    char *free_mem_123541;
    char *free_mem_123544;
    char *free_mem_123547;
    char *free_mem_123550;
    char *free_double_buffer_mem_123816;
    int32_t free_defunc_2_radix_sort_step_arg_130811;
    int32_t free_defunc_0_get_bit_arg_130812;
    bool free_cond_f_res_130813;
    bool free_cond_f_res_130814;
};
struct futhark_mc_scan_stage_1_parloop_struct_131840 {
    struct futhark_context *ctx;
    char *free_mem_123538;
    char *free_mem_123541;
    char *free_mem_123544;
    char *free_mem_123547;
    char *free_mem_123550;
    char *free_double_buffer_mem_123816;
    int32_t free_defunc_2_radix_sort_step_arg_130811;
    int32_t free_defunc_0_get_bit_arg_130812;
    bool free_cond_f_res_130813;
    bool free_cond_f_res_130814;
};
static int futhark_mc_scan_stage_1_parloop_131841(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_120991, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131840
    *futhark_mc_scan_stage_1_parloop_struct_131840 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131840 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131840->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131841_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131841_start = get_wall_time();
    
    struct memblock mem_123538 = {.desc ="mem_123538", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131840->free_mem_123538,
                                  .size =0, .references =NULL};
    struct memblock mem_123541 = {.desc ="mem_123541", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131840->free_mem_123541,
                                  .size =0, .references =NULL};
    struct memblock mem_123544 = {.desc ="mem_123544", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131840->free_mem_123544,
                                  .size =0, .references =NULL};
    struct memblock mem_123547 = {.desc ="mem_123547", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131840->free_mem_123547,
                                  .size =0, .references =NULL};
    struct memblock mem_123550 = {.desc ="mem_123550", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131840->free_mem_123550,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123816 = {.desc =
                                                "double_buffer_mem_123816",
                                                .mem =
                                                futhark_mc_scan_stage_1_parloop_struct_131840->free_double_buffer_mem_123816,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_130811 =
            futhark_mc_scan_stage_1_parloop_struct_131840->free_defunc_2_radix_sort_step_arg_130811;
    int32_t defunc_0_get_bit_arg_130812 =
            futhark_mc_scan_stage_1_parloop_struct_131840->free_defunc_0_get_bit_arg_130812;
    bool cond_f_res_130813 =
         futhark_mc_scan_stage_1_parloop_struct_131840->free_cond_f_res_130813;
    bool cond_f_res_130814 =
         futhark_mc_scan_stage_1_parloop_struct_131840->free_cond_f_res_130814;
    int64_t iterations = end - start;
    int64_t iter_130897 = start;
    int64_t x_130820;
    int64_t x_130821;
    int64_t x_130822;
    int64_t x_130823;
    int64_t x_130824;
    int64_t x_130825;
    int64_t x_130826;
    int64_t x_130827;
    
    x_130820 = (int64_t) 0;
    x_130821 = (int64_t) 0;
    x_130822 = (int64_t) 0;
    x_130823 = (int64_t) 0;
    for (; iter_130897 < end; iter_130897++) {
        int64_t gtid_120992 = iter_130897;
        
        // stage 1 scan body
        {
            float x_130832 =
                  ((float *) double_buffer_mem_123816.mem)[gtid_120992];
            int32_t i32_arg_130833;
            
            i32_arg_130833 = futrts_to_bits32(x_130832);
            
            int32_t unsign_arg_130834 = ashr32(i32_arg_130833,
                                               defunc_0_get_bit_arg_130812);
            int32_t unsign_arg_130835 = 1 & unsign_arg_130834;
            int32_t unsign_arg_130836 = ashr32(i32_arg_130833, 31);
            int32_t unsign_arg_130837 = 1 & unsign_arg_130836;
            bool cond_130838 = unsign_arg_130837 == 1;
            bool x_130839 = !cond_130838;
            bool y_130840 = cond_f_res_130813 && x_130839;
            bool cond_130841 = cond_130838 || y_130840;
            int32_t defunc_1_get_bit_res_130842;
            
            if (cond_130841) {
                int32_t defunc_1_get_bit_res_t_res_130843 = 1 ^
                        unsign_arg_130835;
                
                defunc_1_get_bit_res_130842 = defunc_1_get_bit_res_t_res_130843;
            } else {
                defunc_1_get_bit_res_130842 = unsign_arg_130835;
            }
            
            int32_t x_130844 = mul32(2, defunc_1_get_bit_res_130842);
            int32_t unsign_arg_130845 = ashr32(i32_arg_130833,
                                               defunc_2_radix_sort_step_arg_130811);
            int32_t unsign_arg_130846 = 1 & unsign_arg_130845;
            bool y_130847 = cond_f_res_130814 && x_130839;
            bool cond_130848 = cond_130838 || y_130847;
            int32_t defunc_1_get_bit_res_130849;
            
            if (cond_130848) {
                int32_t defunc_1_get_bit_res_t_res_130850 = 1 ^
                        unsign_arg_130846;
                
                defunc_1_get_bit_res_130849 = defunc_1_get_bit_res_t_res_130850;
            } else {
                defunc_1_get_bit_res_130849 = unsign_arg_130846;
            }
            
            int32_t defunc_0_f_res_130851 = add32(x_130844,
                                                  defunc_1_get_bit_res_130849);
            bool cond_130852 = defunc_0_f_res_130851 == 0;
            int64_t defunc_0_f_res_130853 = btoi_bool_i64(cond_130852);
            int64_t defunc_0_f_res_130854;
            int64_t defunc_0_f_res_130855;
            int64_t defunc_0_f_res_130856;
            
            if (cond_130852) {
                defunc_0_f_res_130854 = (int64_t) 0;
                defunc_0_f_res_130855 = (int64_t) 0;
                defunc_0_f_res_130856 = (int64_t) 0;
            } else {
                bool cond_130857 = defunc_0_f_res_130851 == 1;
                int64_t defunc_0_f_res_f_res_130858 =
                        btoi_bool_i64(cond_130857);
                int64_t defunc_0_f_res_f_res_130859;
                int64_t defunc_0_f_res_f_res_130860;
                
                if (cond_130857) {
                    defunc_0_f_res_f_res_130859 = (int64_t) 0;
                    defunc_0_f_res_f_res_130860 = (int64_t) 0;
                } else {
                    bool cond_130861 = defunc_0_f_res_130851 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_130862 =
                            btoi_bool_i64(cond_130861);
                    bool cond_neg_130863 = !cond_130861;
                    int64_t defunc_0_f_res_f_res_f_res_130864 =
                            btoi_bool_i64(cond_neg_130863);
                    
                    defunc_0_f_res_f_res_130859 =
                        defunc_0_f_res_f_res_f_res_130862;
                    defunc_0_f_res_f_res_130860 =
                        defunc_0_f_res_f_res_f_res_130864;
                }
                defunc_0_f_res_130854 = defunc_0_f_res_f_res_130858;
                defunc_0_f_res_130855 = defunc_0_f_res_f_res_130859;
                defunc_0_f_res_130856 = defunc_0_f_res_f_res_130860;
            }
            // write mapped values results to memory
            {
                ((int32_t *) mem_123550.mem)[gtid_120992] =
                    defunc_0_f_res_130851;
            }
            x_130820 = x_130820;
            x_130821 = x_130821;
            x_130822 = x_130822;
            x_130823 = x_130823;
            // Read next values
            {
                x_130824 = defunc_0_f_res_130853;
                x_130825 = defunc_0_f_res_130854;
                x_130826 = defunc_0_f_res_130855;
                x_130827 = defunc_0_f_res_130856;
            }
            
            int64_t defunc_1_op_res_130828 = add64(x_130820, x_130824);
            int64_t defunc_1_op_res_130829 = add64(x_130821, x_130825);
            int64_t defunc_1_op_res_130830 = add64(x_130822, x_130826);
            int64_t defunc_1_op_res_130831 = add64(x_130823, x_130827);
            
            ((int64_t *) mem_123538.mem)[gtid_120992] = defunc_1_op_res_130828;
            x_130820 = defunc_1_op_res_130828;
            ((int64_t *) mem_123541.mem)[gtid_120992] = defunc_1_op_res_130829;
            x_130821 = defunc_1_op_res_130829;
            ((int64_t *) mem_123544.mem)[gtid_120992] = defunc_1_op_res_130830;
            x_130822 = defunc_1_op_res_130830;
            ((int64_t *) mem_123547.mem)[gtid_120992] = defunc_1_op_res_130831;
            x_130823 = defunc_1_op_res_130831;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131841_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131841_end -
                 futhark_mc_scan_stage_1_parloop_131841_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131841_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131841_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131841_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131842 {
    struct futhark_context *ctx;
    char *free_mem_123538;
    char *free_mem_123541;
    char *free_mem_123544;
    char *free_mem_123547;
    char *free_double_buffer_mem_123816;
    int32_t free_defunc_2_radix_sort_step_arg_130811;
    int32_t free_defunc_0_get_bit_arg_130812;
    bool free_cond_f_res_130813;
    bool free_cond_f_res_130814;
};
static int futhark_mc_scan_stage_3_parloop_131843(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_120991, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131842
    *futhark_mc_scan_stage_3_parloop_struct_131842 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131842 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131842->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131843_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131843_start = get_wall_time();
    
    struct memblock mem_123538 = {.desc ="mem_123538", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131842->free_mem_123538,
                                  .size =0, .references =NULL};
    struct memblock mem_123541 = {.desc ="mem_123541", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131842->free_mem_123541,
                                  .size =0, .references =NULL};
    struct memblock mem_123544 = {.desc ="mem_123544", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131842->free_mem_123544,
                                  .size =0, .references =NULL};
    struct memblock mem_123547 = {.desc ="mem_123547", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131842->free_mem_123547,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123816 = {.desc =
                                                "double_buffer_mem_123816",
                                                .mem =
                                                futhark_mc_scan_stage_3_parloop_struct_131842->free_double_buffer_mem_123816,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_130811 =
            futhark_mc_scan_stage_3_parloop_struct_131842->free_defunc_2_radix_sort_step_arg_130811;
    int32_t defunc_0_get_bit_arg_130812 =
            futhark_mc_scan_stage_3_parloop_struct_131842->free_defunc_0_get_bit_arg_130812;
    bool cond_f_res_130813 =
         futhark_mc_scan_stage_3_parloop_struct_131842->free_cond_f_res_130813;
    bool cond_f_res_130814 =
         futhark_mc_scan_stage_3_parloop_struct_131842->free_cond_f_res_130814;
    int64_t iterations = end - start;
    int64_t iter_130933 = start;
    int64_t x_130921;
    int64_t x_130922;
    int64_t x_130923;
    int64_t x_130924;
    int64_t x_130925;
    int64_t x_130926;
    int64_t x_130927;
    int64_t x_130928;
    
    if (iter_130933 == (int64_t) 0) {
        x_130921 = (int64_t) 0;
    } else {
        x_130921 = ((int64_t *) mem_123538.mem)[iter_130933 - (int64_t) 1];
    }
    if (iter_130933 == (int64_t) 0) {
        x_130922 = (int64_t) 0;
    } else {
        x_130922 = ((int64_t *) mem_123541.mem)[iter_130933 - (int64_t) 1];
    }
    if (iter_130933 == (int64_t) 0) {
        x_130923 = (int64_t) 0;
    } else {
        x_130923 = ((int64_t *) mem_123544.mem)[iter_130933 - (int64_t) 1];
    }
    if (iter_130933 == (int64_t) 0) {
        x_130924 = (int64_t) 0;
    } else {
        x_130924 = ((int64_t *) mem_123547.mem)[iter_130933 - (int64_t) 1];
    }
    for (; iter_130933 < end; iter_130933++) {
        int64_t gtid_120992 = iter_130933;
        
        // stage 3 scan body
        {
            float x_130832 =
                  ((float *) double_buffer_mem_123816.mem)[gtid_120992];
            int32_t i32_arg_130833;
            
            i32_arg_130833 = futrts_to_bits32(x_130832);
            
            int32_t unsign_arg_130834 = ashr32(i32_arg_130833,
                                               defunc_0_get_bit_arg_130812);
            int32_t unsign_arg_130835 = 1 & unsign_arg_130834;
            int32_t unsign_arg_130836 = ashr32(i32_arg_130833, 31);
            int32_t unsign_arg_130837 = 1 & unsign_arg_130836;
            bool cond_130838 = unsign_arg_130837 == 1;
            bool x_130839 = !cond_130838;
            bool y_130840 = cond_f_res_130813 && x_130839;
            bool cond_130841 = cond_130838 || y_130840;
            int32_t defunc_1_get_bit_res_130842;
            
            if (cond_130841) {
                int32_t defunc_1_get_bit_res_t_res_130843 = 1 ^
                        unsign_arg_130835;
                
                defunc_1_get_bit_res_130842 = defunc_1_get_bit_res_t_res_130843;
            } else {
                defunc_1_get_bit_res_130842 = unsign_arg_130835;
            }
            
            int32_t x_130844 = mul32(2, defunc_1_get_bit_res_130842);
            int32_t unsign_arg_130845 = ashr32(i32_arg_130833,
                                               defunc_2_radix_sort_step_arg_130811);
            int32_t unsign_arg_130846 = 1 & unsign_arg_130845;
            bool y_130847 = cond_f_res_130814 && x_130839;
            bool cond_130848 = cond_130838 || y_130847;
            int32_t defunc_1_get_bit_res_130849;
            
            if (cond_130848) {
                int32_t defunc_1_get_bit_res_t_res_130850 = 1 ^
                        unsign_arg_130846;
                
                defunc_1_get_bit_res_130849 = defunc_1_get_bit_res_t_res_130850;
            } else {
                defunc_1_get_bit_res_130849 = unsign_arg_130846;
            }
            
            int32_t defunc_0_f_res_130851 = add32(x_130844,
                                                  defunc_1_get_bit_res_130849);
            bool cond_130852 = defunc_0_f_res_130851 == 0;
            int64_t defunc_0_f_res_130853 = btoi_bool_i64(cond_130852);
            int64_t defunc_0_f_res_130854;
            int64_t defunc_0_f_res_130855;
            int64_t defunc_0_f_res_130856;
            
            if (cond_130852) {
                defunc_0_f_res_130854 = (int64_t) 0;
                defunc_0_f_res_130855 = (int64_t) 0;
                defunc_0_f_res_130856 = (int64_t) 0;
            } else {
                bool cond_130857 = defunc_0_f_res_130851 == 1;
                int64_t defunc_0_f_res_f_res_130858 =
                        btoi_bool_i64(cond_130857);
                int64_t defunc_0_f_res_f_res_130859;
                int64_t defunc_0_f_res_f_res_130860;
                
                if (cond_130857) {
                    defunc_0_f_res_f_res_130859 = (int64_t) 0;
                    defunc_0_f_res_f_res_130860 = (int64_t) 0;
                } else {
                    bool cond_130861 = defunc_0_f_res_130851 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_130862 =
                            btoi_bool_i64(cond_130861);
                    bool cond_neg_130863 = !cond_130861;
                    int64_t defunc_0_f_res_f_res_f_res_130864 =
                            btoi_bool_i64(cond_neg_130863);
                    
                    defunc_0_f_res_f_res_130859 =
                        defunc_0_f_res_f_res_f_res_130862;
                    defunc_0_f_res_f_res_130860 =
                        defunc_0_f_res_f_res_f_res_130864;
                }
                defunc_0_f_res_130854 = defunc_0_f_res_f_res_130858;
                defunc_0_f_res_130855 = defunc_0_f_res_f_res_130859;
                defunc_0_f_res_130856 = defunc_0_f_res_f_res_130860;
            }
            x_130921 = x_130921;
            x_130922 = x_130922;
            x_130923 = x_130923;
            x_130924 = x_130924;
            x_130925 = defunc_0_f_res_130853;
            x_130926 = defunc_0_f_res_130854;
            x_130927 = defunc_0_f_res_130855;
            x_130928 = defunc_0_f_res_130856;
            
            int64_t defunc_1_op_res_130929 = add64(x_130921, x_130925);
            int64_t defunc_1_op_res_130930 = add64(x_130922, x_130926);
            int64_t defunc_1_op_res_130931 = add64(x_130923, x_130927);
            int64_t defunc_1_op_res_130932 = add64(x_130924, x_130928);
            
            ((int64_t *) mem_123538.mem)[gtid_120992] = defunc_1_op_res_130929;
            x_130921 = defunc_1_op_res_130929;
            ((int64_t *) mem_123541.mem)[gtid_120992] = defunc_1_op_res_130930;
            x_130922 = defunc_1_op_res_130930;
            ((int64_t *) mem_123544.mem)[gtid_120992] = defunc_1_op_res_130931;
            x_130923 = defunc_1_op_res_130931;
            ((int64_t *) mem_123547.mem)[gtid_120992] = defunc_1_op_res_130932;
            x_130924 = defunc_1_op_res_130932;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131843_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131843_end -
                 futhark_mc_scan_stage_3_parloop_131843_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131843_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131843_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131843_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131835(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120991 = tid;
    int num_tasks_130896 = info.nsubtasks;
    struct futhark_mc_task_131834 *futhark_mc_task_131834 =
                                  (struct futhark_mc_task_131834 *) args;
    struct futhark_context *ctx = futhark_mc_task_131834->ctx;
    uint64_t futhark_mc_segscan_task_131835_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131835_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131834->free_n_114518;
    struct memblock mem_123538 = {.desc ="mem_123538", .mem =
                                  futhark_mc_task_131834->free_mem_123538,
                                  .size =0, .references =NULL};
    struct memblock mem_123541 = {.desc ="mem_123541", .mem =
                                  futhark_mc_task_131834->free_mem_123541,
                                  .size =0, .references =NULL};
    struct memblock mem_123544 = {.desc ="mem_123544", .mem =
                                  futhark_mc_task_131834->free_mem_123544,
                                  .size =0, .references =NULL};
    struct memblock mem_123547 = {.desc ="mem_123547", .mem =
                                  futhark_mc_task_131834->free_mem_123547,
                                  .size =0, .references =NULL};
    struct memblock mem_123550 = {.desc ="mem_123550", .mem =
                                  futhark_mc_task_131834->free_mem_123550,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123816 = {.desc =
                                                "double_buffer_mem_123816",
                                                .mem =
                                                futhark_mc_task_131834->free_double_buffer_mem_123816,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_130811 =
            futhark_mc_task_131834->free_defunc_2_radix_sort_step_arg_130811;
    int32_t defunc_0_get_bit_arg_130812 =
            futhark_mc_task_131834->free_defunc_0_get_bit_arg_130812;
    bool cond_f_res_130813 = futhark_mc_task_131834->free_cond_f_res_130813;
    bool cond_f_res_130814 = futhark_mc_task_131834->free_cond_f_res_130814;
    size_t scan_stage_2_accum_mem_130912_cached_sizze_131836 = 0;
    char *scan_stage_2_accum_mem_130912 = NULL;
    size_t scan_stage_2_accum_mem_130914_cached_sizze_131837 = 0;
    char *scan_stage_2_accum_mem_130914 = NULL;
    size_t scan_stage_2_accum_mem_130916_cached_sizze_131838 = 0;
    char *scan_stage_2_accum_mem_130916 = NULL;
    size_t scan_stage_2_accum_mem_130918_cached_sizze_131839 = 0;
    char *scan_stage_2_accum_mem_130918 = NULL;
    int64_t iter_130897;
    struct futhark_mc_scan_stage_1_parloop_struct_131840
    futhark_mc_scan_stage_1_parloop_struct_131840;
    
    futhark_mc_scan_stage_1_parloop_struct_131840.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_mem_123538 =
        mem_123538.mem;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_mem_123541 =
        mem_123541.mem;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_mem_123544 =
        mem_123544.mem;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_mem_123547 =
        mem_123547.mem;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_mem_123550 =
        mem_123550.mem;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_double_buffer_mem_123816 =
        double_buffer_mem_123816.mem;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_defunc_2_radix_sort_step_arg_130811 =
        defunc_2_radix_sort_step_arg_130811;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_defunc_0_get_bit_arg_130812 =
        defunc_0_get_bit_arg_130812;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_cond_f_res_130813 =
        cond_f_res_130813;
    futhark_mc_scan_stage_1_parloop_struct_131840.free_cond_f_res_130814 =
        cond_f_res_130814;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131841_task;
    
    futhark_mc_scan_stage_1_parloop_131841_task.name =
        "futhark_mc_scan_stage_1_parloop_131841";
    futhark_mc_scan_stage_1_parloop_131841_task.fn =
        futhark_mc_scan_stage_1_parloop_131841;
    futhark_mc_scan_stage_1_parloop_131841_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131840;
    futhark_mc_scan_stage_1_parloop_131841_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131841_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131841_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131841_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131841_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131841_task);
    
    if (futhark_mc_scan_stage_1_parloop_131841_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131841_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131841_total_end -
                 futhark_mc_scan_stage_1_parloop_131841_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131841_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131841_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131841_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_130896)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_130898;
        int64_t x_130899;
        int64_t x_130900;
        int64_t x_130901;
        int64_t x_130902;
        int64_t x_130903;
        int64_t x_130904;
        int64_t x_130905;
        int64_t offset_130910 = (int64_t) 0;
        int64_t offset_index_130911 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_130912_cached_sizze_131836 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130912 =
                realloc(scan_stage_2_accum_mem_130912, (int64_t) 8);
            scan_stage_2_accum_mem_130912_cached_sizze_131836 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_130914_cached_sizze_131837 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130914 =
                realloc(scan_stage_2_accum_mem_130914, (int64_t) 8);
            scan_stage_2_accum_mem_130914_cached_sizze_131837 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_130916_cached_sizze_131838 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130916 =
                realloc(scan_stage_2_accum_mem_130916, (int64_t) 8);
            scan_stage_2_accum_mem_130916_cached_sizze_131838 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_130918_cached_sizze_131839 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130918 =
                realloc(scan_stage_2_accum_mem_130918, (int64_t) 8);
            scan_stage_2_accum_mem_130918_cached_sizze_131839 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_130912)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_130914)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_130916)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_130918)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_130920 = 0; i_130920 < num_tasks_130896 - 1;
             i_130920++) {
            offset_130910 = squot64(n_114518, sext_i32_i64(num_tasks_130896));
            if (slt64(sext_i32_i64(i_130920), srem64(n_114518,
                                                     sext_i32_i64(num_tasks_130896)))) {
                offset_130910 += (int64_t) 1;
            }
            offset_index_130911 += offset_130910;
            
            int64_t gtid_120992 = offset_index_130911;
            float x_130832 =
                  ((float *) double_buffer_mem_123816.mem)[gtid_120992];
            int32_t i32_arg_130833;
            
            i32_arg_130833 = futrts_to_bits32(x_130832);
            
            int32_t unsign_arg_130834 = ashr32(i32_arg_130833,
                                               defunc_0_get_bit_arg_130812);
            int32_t unsign_arg_130835 = 1 & unsign_arg_130834;
            int32_t unsign_arg_130836 = ashr32(i32_arg_130833, 31);
            int32_t unsign_arg_130837 = 1 & unsign_arg_130836;
            bool cond_130838 = unsign_arg_130837 == 1;
            bool x_130839 = !cond_130838;
            bool y_130840 = cond_f_res_130813 && x_130839;
            bool cond_130841 = cond_130838 || y_130840;
            int32_t defunc_1_get_bit_res_130842;
            
            if (cond_130841) {
                int32_t defunc_1_get_bit_res_t_res_130843 = 1 ^
                        unsign_arg_130835;
                
                defunc_1_get_bit_res_130842 = defunc_1_get_bit_res_t_res_130843;
            } else {
                defunc_1_get_bit_res_130842 = unsign_arg_130835;
            }
            
            int32_t x_130844 = mul32(2, defunc_1_get_bit_res_130842);
            int32_t unsign_arg_130845 = ashr32(i32_arg_130833,
                                               defunc_2_radix_sort_step_arg_130811);
            int32_t unsign_arg_130846 = 1 & unsign_arg_130845;
            bool y_130847 = cond_f_res_130814 && x_130839;
            bool cond_130848 = cond_130838 || y_130847;
            int32_t defunc_1_get_bit_res_130849;
            
            if (cond_130848) {
                int32_t defunc_1_get_bit_res_t_res_130850 = 1 ^
                        unsign_arg_130846;
                
                defunc_1_get_bit_res_130849 = defunc_1_get_bit_res_t_res_130850;
            } else {
                defunc_1_get_bit_res_130849 = unsign_arg_130846;
            }
            
            int32_t defunc_0_f_res_130851 = add32(x_130844,
                                                  defunc_1_get_bit_res_130849);
            bool cond_130852 = defunc_0_f_res_130851 == 0;
            int64_t defunc_0_f_res_130853 = btoi_bool_i64(cond_130852);
            int64_t defunc_0_f_res_130854;
            int64_t defunc_0_f_res_130855;
            int64_t defunc_0_f_res_130856;
            
            if (cond_130852) {
                defunc_0_f_res_130854 = (int64_t) 0;
                defunc_0_f_res_130855 = (int64_t) 0;
                defunc_0_f_res_130856 = (int64_t) 0;
            } else {
                bool cond_130857 = defunc_0_f_res_130851 == 1;
                int64_t defunc_0_f_res_f_res_130858 =
                        btoi_bool_i64(cond_130857);
                int64_t defunc_0_f_res_f_res_130859;
                int64_t defunc_0_f_res_f_res_130860;
                
                if (cond_130857) {
                    defunc_0_f_res_f_res_130859 = (int64_t) 0;
                    defunc_0_f_res_f_res_130860 = (int64_t) 0;
                } else {
                    bool cond_130861 = defunc_0_f_res_130851 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_130862 =
                            btoi_bool_i64(cond_130861);
                    bool cond_neg_130863 = !cond_130861;
                    int64_t defunc_0_f_res_f_res_f_res_130864 =
                            btoi_bool_i64(cond_neg_130863);
                    
                    defunc_0_f_res_f_res_130859 =
                        defunc_0_f_res_f_res_f_res_130862;
                    defunc_0_f_res_f_res_130860 =
                        defunc_0_f_res_f_res_f_res_130864;
                }
                defunc_0_f_res_130854 = defunc_0_f_res_f_res_130858;
                defunc_0_f_res_130855 = defunc_0_f_res_f_res_130859;
                defunc_0_f_res_130856 = defunc_0_f_res_f_res_130860;
            }
            // Read carry in
            {
                x_130898 =
                    ((int64_t *) scan_stage_2_accum_mem_130912)[(int64_t) 0];
                x_130899 =
                    ((int64_t *) scan_stage_2_accum_mem_130914)[(int64_t) 0];
                x_130900 =
                    ((int64_t *) scan_stage_2_accum_mem_130916)[(int64_t) 0];
                x_130901 =
                    ((int64_t *) scan_stage_2_accum_mem_130918)[(int64_t) 0];
            }
            // Read next values
            {
                x_130902 = ((int64_t *) mem_123538.mem)[offset_index_130911 -
                                                        (int64_t) 1];
                x_130903 = ((int64_t *) mem_123541.mem)[offset_index_130911 -
                                                        (int64_t) 1];
                x_130904 = ((int64_t *) mem_123544.mem)[offset_index_130911 -
                                                        (int64_t) 1];
                x_130905 = ((int64_t *) mem_123547.mem)[offset_index_130911 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_130906 = add64(x_130898, x_130902);
            int64_t defunc_1_op_res_130907 = add64(x_130899, x_130903);
            int64_t defunc_1_op_res_130908 = add64(x_130900, x_130904);
            int64_t defunc_1_op_res_130909 = add64(x_130901, x_130905);
            
            ((int64_t *) mem_123538.mem)[offset_index_130911 - (int64_t) 1] =
                defunc_1_op_res_130906;
            ((int64_t *) scan_stage_2_accum_mem_130912)[(int64_t) 0] =
                defunc_1_op_res_130906;
            ((int64_t *) mem_123541.mem)[offset_index_130911 - (int64_t) 1] =
                defunc_1_op_res_130907;
            ((int64_t *) scan_stage_2_accum_mem_130914)[(int64_t) 0] =
                defunc_1_op_res_130907;
            ((int64_t *) mem_123544.mem)[offset_index_130911 - (int64_t) 1] =
                defunc_1_op_res_130908;
            ((int64_t *) scan_stage_2_accum_mem_130916)[(int64_t) 0] =
                defunc_1_op_res_130908;
            ((int64_t *) mem_123547.mem)[offset_index_130911 - (int64_t) 1] =
                defunc_1_op_res_130909;
            ((int64_t *) scan_stage_2_accum_mem_130918)[(int64_t) 0] =
                defunc_1_op_res_130909;
        }
        
        int64_t iter_130933 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131842
        futhark_mc_scan_stage_3_parloop_struct_131842;
        
        futhark_mc_scan_stage_3_parloop_struct_131842.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_mem_123538 =
            mem_123538.mem;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_mem_123541 =
            mem_123541.mem;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_mem_123544 =
            mem_123544.mem;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_mem_123547 =
            mem_123547.mem;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_double_buffer_mem_123816 =
            double_buffer_mem_123816.mem;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_defunc_2_radix_sort_step_arg_130811 =
            defunc_2_radix_sort_step_arg_130811;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_defunc_0_get_bit_arg_130812 =
            defunc_0_get_bit_arg_130812;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_cond_f_res_130813 =
            cond_f_res_130813;
        futhark_mc_scan_stage_3_parloop_struct_131842.free_cond_f_res_130814 =
            cond_f_res_130814;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131843_task;
        
        futhark_mc_scan_stage_3_parloop_131843_task.name =
            "futhark_mc_scan_stage_3_parloop_131843";
        futhark_mc_scan_stage_3_parloop_131843_task.fn =
            futhark_mc_scan_stage_3_parloop_131843;
        futhark_mc_scan_stage_3_parloop_131843_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131842;
        futhark_mc_scan_stage_3_parloop_131843_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131843_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131843_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131843_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131843_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131843_task);
        
        if (futhark_mc_scan_stage_3_parloop_131843_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131843_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131843_total_end -
                     futhark_mc_scan_stage_3_parloop_131843_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131843_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131843_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131843_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_130912);
    free(scan_stage_2_accum_mem_130914);
    free(scan_stage_2_accum_mem_130916);
    free(scan_stage_2_accum_mem_130918);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131835_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131835_end -
                 futhark_mc_segscan_task_131835_start;
        
        ctx->futhark_mc_segscan_task_131835_runs[tid]++;
        ctx->futhark_mc_segscan_task_131835_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131835_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131844 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    char *free_mem_123538;
    char *free_mem_123541;
    char *free_mem_123544;
    char *free_mem_123547;
    char *free_mem_123550;
    char *free_mem_123553;
    char *free_double_buffer_mem_123816;
    int64_t free_last_res_130865;
    int64_t free_last_res_130866;
    int64_t free_last_res_130867;
};
struct futhark_mc_segmap_parloop_struct_131846 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    char *free_mem_123538;
    char *free_mem_123541;
    char *free_mem_123544;
    char *free_mem_123547;
    char *free_mem_123550;
    char *free_mem_123553;
    char *free_double_buffer_mem_123816;
    int64_t free_last_res_130865;
    int64_t free_last_res_130866;
    int64_t free_last_res_130867;
};
static int futhark_mc_segmap_parloop_131847(void *args, int64_t start,
                                            int64_t end, int flat_tid_120993,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131846
    *futhark_mc_segmap_parloop_struct_131846 =
    (struct futhark_mc_segmap_parloop_struct_131846 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131846->ctx;
    uint64_t futhark_mc_segmap_parloop_131847_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131847_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131846->free_n_114518;
    struct memblock mem_123538 = {.desc ="mem_123538", .mem =
                                  futhark_mc_segmap_parloop_struct_131846->free_mem_123538,
                                  .size =0, .references =NULL};
    struct memblock mem_123541 = {.desc ="mem_123541", .mem =
                                  futhark_mc_segmap_parloop_struct_131846->free_mem_123541,
                                  .size =0, .references =NULL};
    struct memblock mem_123544 = {.desc ="mem_123544", .mem =
                                  futhark_mc_segmap_parloop_struct_131846->free_mem_123544,
                                  .size =0, .references =NULL};
    struct memblock mem_123547 = {.desc ="mem_123547", .mem =
                                  futhark_mc_segmap_parloop_struct_131846->free_mem_123547,
                                  .size =0, .references =NULL};
    struct memblock mem_123550 = {.desc ="mem_123550", .mem =
                                  futhark_mc_segmap_parloop_struct_131846->free_mem_123550,
                                  .size =0, .references =NULL};
    struct memblock mem_123553 = {.desc ="mem_123553", .mem =
                                  futhark_mc_segmap_parloop_struct_131846->free_mem_123553,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123816 = {.desc =
                                                "double_buffer_mem_123816",
                                                .mem =
                                                futhark_mc_segmap_parloop_struct_131846->free_double_buffer_mem_123816,
                                                .size =0, .references =NULL};
    int64_t last_res_130865 =
            futhark_mc_segmap_parloop_struct_131846->free_last_res_130865;
    int64_t last_res_130866 =
            futhark_mc_segmap_parloop_struct_131846->free_last_res_130866;
    int64_t last_res_130867 =
            futhark_mc_segmap_parloop_struct_131846->free_last_res_130867;
    int64_t iterations = end - start;
    int64_t iter_130935 = start;
    
    for (; iter_130935 < end; iter_130935++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130954 = n_114518;
        int64_t gtid_120994 = iter_130935;
        int64_t remnant_130955 = iter_130935 - gtid_120994;
        int32_t x_130870 = ((int32_t *) mem_123550.mem)[gtid_120994];
        float write_value_130871 =
              ((float *) double_buffer_mem_123816.mem)[gtid_120994];
        bool match_lit_130872 = 0 == x_130870;
        int64_t defunc_1_f_res_130873;
        
        if (match_lit_130872) {
            int64_t x_130936 = ((int64_t *) mem_123538.mem)[gtid_120994];
            int64_t case_res_130937 = sub64(x_130936, (int64_t) 1);
            
            defunc_1_f_res_130873 = case_res_130937;
        } else {
            bool match_lit_130938 = 1 == x_130870;
            int64_t x_130939;
            
            if (match_lit_130938) {
                int64_t x_130940 = ((int64_t *) mem_123541.mem)[gtid_120994];
                int64_t x_130941 = add64(last_res_130865, x_130940);
                int64_t case_res_130942 = sub64(x_130941, (int64_t) 1);
                
                x_130939 = case_res_130942;
            } else {
                bool match_lit_130943 = 2 == x_130870;
                int64_t x_130944;
                
                if (match_lit_130943) {
                    int64_t x_130945 =
                            ((int64_t *) mem_123544.mem)[gtid_120994];
                    int64_t x_130946 = add64(last_res_130865, last_res_130866);
                    int64_t x_130947 = add64(x_130945, x_130946);
                    int64_t case_res_130948 = sub64(x_130947, (int64_t) 1);
                    
                    x_130944 = case_res_130948;
                } else {
                    int64_t x_130949 =
                            ((int64_t *) mem_123547.mem)[gtid_120994];
                    int64_t x_130950 = add64(last_res_130865, last_res_130866);
                    int64_t x_130951 = add64(last_res_130867, x_130950);
                    int64_t x_130952 = add64(x_130949, x_130951);
                    int64_t defunc_1_f_res_res_130953 = sub64(x_130952,
                                                              (int64_t) 1);
                    
                    x_130944 = defunc_1_f_res_res_130953;
                }
                x_130939 = x_130944;
            }
            defunc_1_f_res_130873 = x_130939;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_130873) &&
            slt64(defunc_1_f_res_130873, n_114518)) {
            ((float *) mem_123553.mem)[defunc_1_f_res_130873] =
                write_value_130871;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131847_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131847_end -
                 futhark_mc_segmap_parloop_131847_start;
        
        ctx->futhark_mc_segmap_parloop_131847_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131847_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131847_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131845(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120993 = tid;
    int num_tasks_130934 = info.nsubtasks;
    struct futhark_mc_task_131844 *futhark_mc_task_131844 =
                                  (struct futhark_mc_task_131844 *) args;
    struct futhark_context *ctx = futhark_mc_task_131844->ctx;
    uint64_t futhark_mc_segmap_task_131845_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131845_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131844->free_n_114518;
    struct memblock mem_123538 = {.desc ="mem_123538", .mem =
                                  futhark_mc_task_131844->free_mem_123538,
                                  .size =0, .references =NULL};
    struct memblock mem_123541 = {.desc ="mem_123541", .mem =
                                  futhark_mc_task_131844->free_mem_123541,
                                  .size =0, .references =NULL};
    struct memblock mem_123544 = {.desc ="mem_123544", .mem =
                                  futhark_mc_task_131844->free_mem_123544,
                                  .size =0, .references =NULL};
    struct memblock mem_123547 = {.desc ="mem_123547", .mem =
                                  futhark_mc_task_131844->free_mem_123547,
                                  .size =0, .references =NULL};
    struct memblock mem_123550 = {.desc ="mem_123550", .mem =
                                  futhark_mc_task_131844->free_mem_123550,
                                  .size =0, .references =NULL};
    struct memblock mem_123553 = {.desc ="mem_123553", .mem =
                                  futhark_mc_task_131844->free_mem_123553,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123816 = {.desc =
                                                "double_buffer_mem_123816",
                                                .mem =
                                                futhark_mc_task_131844->free_double_buffer_mem_123816,
                                                .size =0, .references =NULL};
    int64_t last_res_130865 = futhark_mc_task_131844->free_last_res_130865;
    int64_t last_res_130866 = futhark_mc_task_131844->free_last_res_130866;
    int64_t last_res_130867 = futhark_mc_task_131844->free_last_res_130867;
    int64_t iter_130935;
    struct futhark_mc_segmap_parloop_struct_131846
    futhark_mc_segmap_parloop_struct_131846;
    
    futhark_mc_segmap_parloop_struct_131846.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131846.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131846.free_mem_123538 = mem_123538.mem;
    futhark_mc_segmap_parloop_struct_131846.free_mem_123541 = mem_123541.mem;
    futhark_mc_segmap_parloop_struct_131846.free_mem_123544 = mem_123544.mem;
    futhark_mc_segmap_parloop_struct_131846.free_mem_123547 = mem_123547.mem;
    futhark_mc_segmap_parloop_struct_131846.free_mem_123550 = mem_123550.mem;
    futhark_mc_segmap_parloop_struct_131846.free_mem_123553 = mem_123553.mem;
    futhark_mc_segmap_parloop_struct_131846.free_double_buffer_mem_123816 =
        double_buffer_mem_123816.mem;
    futhark_mc_segmap_parloop_struct_131846.free_last_res_130865 =
        last_res_130865;
    futhark_mc_segmap_parloop_struct_131846.free_last_res_130866 =
        last_res_130866;
    futhark_mc_segmap_parloop_struct_131846.free_last_res_130867 =
        last_res_130867;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131847_task;
    
    futhark_mc_segmap_parloop_131847_task.name =
        "futhark_mc_segmap_parloop_131847";
    futhark_mc_segmap_parloop_131847_task.fn = futhark_mc_segmap_parloop_131847;
    futhark_mc_segmap_parloop_131847_task.args =
        &futhark_mc_segmap_parloop_struct_131846;
    futhark_mc_segmap_parloop_131847_task.iterations = iterations;
    futhark_mc_segmap_parloop_131847_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131847_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131847_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131847_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131847_task);
    
    if (futhark_mc_segmap_parloop_131847_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131847_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131847_total_end -
                 futhark_mc_segmap_parloop_131847_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131847_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131847_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131847_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131845_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131845_end -
                 futhark_mc_segmap_task_131845_start;
        
        ctx->futhark_mc_segmap_task_131845_runs[tid]++;
        ctx->futhark_mc_segmap_task_131845_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131845_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131826(void *args, int64_t start,
                                            int64_t end, int flat_tid_120989,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131825
    *futhark_mc_segmap_parloop_struct_131825 =
    (struct futhark_mc_segmap_parloop_struct_131825 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131825->ctx;
    uint64_t futhark_mc_segmap_parloop_131826_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131826_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131825->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131825->free_n_114518;
    int64_t i_114594 = futhark_mc_segmap_parloop_struct_131825->free_i_114594;
    int32_t iters_116561 =
            futhark_mc_segmap_parloop_struct_131825->free_iters_116561;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131825->free_bytes_121918;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131825->free_bytes_121961;
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_segmap_parloop_struct_131825->free_mem_123520,
                                  .size =0, .references =NULL};
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_segmap_parloop_struct_131825->free_mem_123674,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123818 =
            futhark_mc_segmap_parloop_struct_131825->free_double_buffer_sizze_123818;
    size_t mem_123538_cached_sizze_131827 = 0;
    char *mem_123538 = NULL;
    size_t mem_123541_cached_sizze_131828 = 0;
    char *mem_123541 = NULL;
    size_t mem_123544_cached_sizze_131829 = 0;
    char *mem_123544 = NULL;
    size_t mem_123547_cached_sizze_131830 = 0;
    char *mem_123547 = NULL;
    size_t mem_123550_cached_sizze_131831 = 0;
    char *mem_123550 = NULL;
    size_t mem_123553_cached_sizze_131832 = 0;
    char *mem_123553 = NULL;
    size_t double_buffer_mem_123816_cached_sizze_131833 = 0;
    char *double_buffer_mem_123816 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130808 = start;
    
    if (mem_123538_cached_sizze_131827 < (size_t) bytes_121918) {
        mem_123538 = realloc(mem_123538, bytes_121918);
        mem_123538_cached_sizze_131827 = bytes_121918;
    }
    if (mem_123541_cached_sizze_131828 < (size_t) bytes_121918) {
        mem_123541 = realloc(mem_123541, bytes_121918);
        mem_123541_cached_sizze_131828 = bytes_121918;
    }
    if (mem_123544_cached_sizze_131829 < (size_t) bytes_121918) {
        mem_123544 = realloc(mem_123544, bytes_121918);
        mem_123544_cached_sizze_131829 = bytes_121918;
    }
    if (mem_123547_cached_sizze_131830 < (size_t) bytes_121918) {
        mem_123547 = realloc(mem_123547, bytes_121918);
        mem_123547_cached_sizze_131830 = bytes_121918;
    }
    if (mem_123550_cached_sizze_131831 < (size_t) bytes_121961) {
        mem_123550 = realloc(mem_123550, bytes_121961);
        mem_123550_cached_sizze_131831 = bytes_121961;
    }
    if (double_buffer_mem_123816_cached_sizze_131833 <
        (size_t) double_buffer_sizze_123818) {
        double_buffer_mem_123816 = realloc(double_buffer_mem_123816,
                                           double_buffer_sizze_123818);
        double_buffer_mem_123816_cached_sizze_131833 =
            double_buffer_sizze_123818;
    }
    if (mem_123553_cached_sizze_131832 < (size_t) bytes_121961) {
        mem_123553 = realloc(mem_123553, bytes_121961);
        mem_123553_cached_sizze_131832 = bytes_121961;
    }
    for (; iter_130808 < end; iter_130808++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130893 = m_114517;
        int64_t gtid_120990 = iter_130808;
        int64_t remnant_130894 = iter_130808 - gtid_120990;
        
        memmove(double_buffer_mem_123816 + (int64_t) 0, mem_123520.mem +
                gtid_120990 * n_114518 * (int64_t) 4, n_114518 * (int64_t) 4);
        for (int32_t i_130809 = 0; i_130809 < iters_116561; i_130809++) {
            int32_t defunc_2_radix_sort_step_arg_130811 = mul32(2, i_130809);
            int32_t defunc_0_get_bit_arg_130812 = add32(1,
                                                        defunc_2_radix_sort_step_arg_130811);
            bool cond_f_res_130813 = defunc_0_get_bit_arg_130812 == 31;
            bool cond_f_res_130814 = defunc_2_radix_sort_step_arg_130811 == 31;
            int64_t flat_tid_120991 = (int64_t) 0;
            int32_t num_tasks_130896;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "nonsegmented segScan");
            
            struct futhark_mc_task_131834 futhark_mc_task_131834;
            
            futhark_mc_task_131834.ctx = ctx;
            futhark_mc_task_131834.free_n_114518 = n_114518;
            futhark_mc_task_131834.free_mem_123538 = mem_123538;
            futhark_mc_task_131834.free_mem_123541 = mem_123541;
            futhark_mc_task_131834.free_mem_123544 = mem_123544;
            futhark_mc_task_131834.free_mem_123547 = mem_123547;
            futhark_mc_task_131834.free_mem_123550 = mem_123550;
            futhark_mc_task_131834.free_double_buffer_mem_123816 =
                double_buffer_mem_123816;
            futhark_mc_task_131834.free_defunc_2_radix_sort_step_arg_130811 =
                defunc_2_radix_sort_step_arg_130811;
            futhark_mc_task_131834.free_defunc_0_get_bit_arg_130812 =
                defunc_0_get_bit_arg_130812;
            futhark_mc_task_131834.free_cond_f_res_130813 = cond_f_res_130813;
            futhark_mc_task_131834.free_cond_f_res_130814 = cond_f_res_130814;
            
            struct scheduler_segop futhark_mc_task_131834_task;
            
            futhark_mc_task_131834_task.args = &futhark_mc_task_131834;
            futhark_mc_task_131834_task.top_level_fn =
                futhark_mc_segscan_task_131835;
            futhark_mc_task_131834_task.name = "futhark_mc_segscan_task_131835";
            futhark_mc_task_131834_task.iterations = n_114518;
            futhark_mc_task_131834_task.task_time =
                &ctx->futhark_mc_segscan_task_131835_total_time;
            futhark_mc_task_131834_task.task_iter =
                &ctx->futhark_mc_segscan_task_131835_total_iter;
            futhark_mc_task_131834_task.sched = STATIC;
            futhark_mc_task_131834_task.nested_fn = NULL;
            
            int futhark_mc_segscan_task_131835_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131834_task);
            
            if (futhark_mc_segscan_task_131835_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t last_res_130865 = ((int64_t *) mem_123538)[i_114594];
            int64_t last_res_130866 = ((int64_t *) mem_123541)[i_114594];
            int64_t last_res_130867 = ((int64_t *) mem_123544)[i_114594];
            
            memmove(mem_123553 + (int64_t) 0, double_buffer_mem_123816 +
                    (int64_t) 0, n_114518 * (int64_t) 4);
            
            int64_t flat_tid_120993 = (int64_t) 0;
            int32_t num_tasks_130934;
            struct futhark_mc_task_131844 futhark_mc_task_131844;
            
            futhark_mc_task_131844.ctx = ctx;
            futhark_mc_task_131844.free_n_114518 = n_114518;
            futhark_mc_task_131844.free_mem_123538 = mem_123538;
            futhark_mc_task_131844.free_mem_123541 = mem_123541;
            futhark_mc_task_131844.free_mem_123544 = mem_123544;
            futhark_mc_task_131844.free_mem_123547 = mem_123547;
            futhark_mc_task_131844.free_mem_123550 = mem_123550;
            futhark_mc_task_131844.free_mem_123553 = mem_123553;
            futhark_mc_task_131844.free_double_buffer_mem_123816 =
                double_buffer_mem_123816;
            futhark_mc_task_131844.free_last_res_130865 = last_res_130865;
            futhark_mc_task_131844.free_last_res_130866 = last_res_130866;
            futhark_mc_task_131844.free_last_res_130867 = last_res_130867;
            
            struct scheduler_segop futhark_mc_task_131844_task;
            
            futhark_mc_task_131844_task.args = &futhark_mc_task_131844;
            futhark_mc_task_131844_task.top_level_fn =
                futhark_mc_segmap_task_131845;
            futhark_mc_task_131844_task.name = "futhark_mc_segmap_task_131845";
            futhark_mc_task_131844_task.iterations = n_114518;
            futhark_mc_task_131844_task.task_time =
                &ctx->futhark_mc_segmap_task_131845_total_time;
            futhark_mc_task_131844_task.task_iter =
                &ctx->futhark_mc_segmap_task_131845_total_iter;
            futhark_mc_task_131844_task.sched = STATIC;
            futhark_mc_task_131844_task.nested_fn = NULL;
            
            int futhark_mc_segmap_task_131845_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131844_task);
            
            if (futhark_mc_segmap_task_131845_err != 0) {
                err = 1;
                goto cleanup;
            }
            memmove(double_buffer_mem_123816 + (int64_t) 0, mem_123553 +
                    (int64_t) 0, n_114518 * (int64_t) 4);
        }
        memmove(mem_123674.mem + gtid_120990 * n_114518 * (int64_t) 4,
                double_buffer_mem_123816 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123538);
    free(mem_123541);
    free(mem_123544);
    free(mem_123547);
    free(mem_123550);
    free(mem_123553);
    free(double_buffer_mem_123816);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131826_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131826_end -
                 futhark_mc_segmap_parloop_131826_start;
        
        ctx->futhark_mc_segmap_parloop_131826_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131826_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131826_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131824(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120989 = tid;
    int num_tasks_130690 = info.nsubtasks;
    struct futhark_mc_task_131813 *futhark_mc_task_131813 =
                                  (struct futhark_mc_task_131813 *) args;
    struct futhark_context *ctx = futhark_mc_task_131813->ctx;
    uint64_t futhark_mc_segmap_nested_task_131824_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131824_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131813->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131813->free_n_114518;
    int64_t i_114594 = futhark_mc_task_131813->free_i_114594;
    int32_t iters_116561 = futhark_mc_task_131813->free_iters_116561;
    int64_t bytes_121918 = futhark_mc_task_131813->free_bytes_121918;
    int64_t bytes_121961 = futhark_mc_task_131813->free_bytes_121961;
    struct memblock mem_123520 = {.desc ="mem_123520", .mem =
                                  futhark_mc_task_131813->free_mem_123520,
                                  .size =0, .references =NULL};
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_task_131813->free_mem_123674,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123818 =
            futhark_mc_task_131813->free_double_buffer_sizze_123818;
    int64_t double_buffer_sizze_123822 =
            futhark_mc_task_131813->free_double_buffer_sizze_123822;
    int64_t iter_130808;
    struct futhark_mc_segmap_parloop_struct_131825
    futhark_mc_segmap_parloop_struct_131825;
    
    futhark_mc_segmap_parloop_struct_131825.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131825.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131825.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131825.free_i_114594 = i_114594;
    futhark_mc_segmap_parloop_struct_131825.free_iters_116561 = iters_116561;
    futhark_mc_segmap_parloop_struct_131825.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131825.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131825.free_mem_123520 = mem_123520.mem;
    futhark_mc_segmap_parloop_struct_131825.free_mem_123674 = mem_123674.mem;
    futhark_mc_segmap_parloop_struct_131825.free_double_buffer_sizze_123818 =
        double_buffer_sizze_123818;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131826_task;
    
    futhark_mc_segmap_parloop_131826_task.name =
        "futhark_mc_segmap_parloop_131826";
    futhark_mc_segmap_parloop_131826_task.fn = futhark_mc_segmap_parloop_131826;
    futhark_mc_segmap_parloop_131826_task.args =
        &futhark_mc_segmap_parloop_struct_131825;
    futhark_mc_segmap_parloop_131826_task.iterations = iterations;
    futhark_mc_segmap_parloop_131826_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131826_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131826_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131826_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131826_task);
    
    if (futhark_mc_segmap_parloop_131826_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131826_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131826_total_end -
                 futhark_mc_segmap_parloop_131826_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131826_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131826_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131826_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131824_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131824_end -
                 futhark_mc_segmap_nested_task_131824_start;
        
        ctx->futhark_mc_segmap_nested_task_131824_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131824_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131824_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131848 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_stl_res_114588;
    int64_t free_j_m_i_114986;
    char *free_mem_123674;
    char *free_mem_123677;
    char *free_mem_123680;
    char *free_mem_123683;
};
struct futhark_mc_segmap_parloop_struct_131850 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_stl_res_114588;
    int64_t free_j_m_i_114986;
    char *free_mem_123674;
    char *free_mem_123677;
    char *free_mem_123680;
    char *free_mem_123683;
};
static int futhark_mc_segmap_parloop_131851(void *args, int64_t start,
                                            int64_t end, int flat_tid_121080,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131850
    *futhark_mc_segmap_parloop_struct_131850 =
    (struct futhark_mc_segmap_parloop_struct_131850 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131850->ctx;
    uint64_t futhark_mc_segmap_parloop_131851_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131851_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131850->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131850->free_n_114518;
    int64_t stl_res_114588 =
            futhark_mc_segmap_parloop_struct_131850->free_stl_res_114588;
    int64_t j_m_i_114986 =
            futhark_mc_segmap_parloop_struct_131850->free_j_m_i_114986;
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_segmap_parloop_struct_131850->free_mem_123674,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_segmap_parloop_struct_131850->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_segmap_parloop_struct_131850->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_segmap_parloop_struct_131850->free_mem_123683,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130957 = start;
    
    for (; iter_130957 < end; iter_130957++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130963 = m_114517;
        int64_t gtid_121081 = iter_130957;
        int64_t remnant_130964 = iter_130957 - gtid_121081;
        float defunc_2_reduce_res_116697;
        float redout_130959 = 0.0F;
        
        for (int64_t i_130958 = 0; i_130958 < j_m_i_114986; i_130958++) {
            int64_t slice_130960 = stl_res_114588 + i_130958;
            float x_130961 = ((float *) mem_123674.mem)[gtid_121081 * n_114518 +
                                                        slice_130960];
            float defunc_1_op_res_130962 = x_130961 + redout_130959;
            float redout_tmp_130965 = defunc_1_op_res_130962;
            
            redout_130959 = redout_tmp_130965;
        }
        defunc_2_reduce_res_116697 = redout_130959;
        
        float h_116702 = 3.0F * defunc_2_reduce_res_116697;
        float h9_116703 = 0.999F * h_116702;
        float h1_116704 = 1.0e-3F * h_116702;
        
        ((float *) mem_123677.mem)[gtid_121081] = h_116702;
        ((float *) mem_123680.mem)[gtid_121081] = h9_116703;
        ((float *) mem_123683.mem)[gtid_121081] = h1_116704;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131851_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131851_end -
                 futhark_mc_segmap_parloop_131851_start;
        
        ctx->futhark_mc_segmap_parloop_131851_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131851_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131851_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131849(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121080 = tid;
    int num_tasks_130956 = info.nsubtasks;
    struct futhark_mc_task_131848 *futhark_mc_task_131848 =
                                  (struct futhark_mc_task_131848 *) args;
    struct futhark_context *ctx = futhark_mc_task_131848->ctx;
    uint64_t futhark_mc_segmap_task_131849_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131849_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131848->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131848->free_n_114518;
    int64_t stl_res_114588 = futhark_mc_task_131848->free_stl_res_114588;
    int64_t j_m_i_114986 = futhark_mc_task_131848->free_j_m_i_114986;
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_task_131848->free_mem_123674,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_task_131848->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_task_131848->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_task_131848->free_mem_123683,
                                  .size =0, .references =NULL};
    int64_t iter_130957;
    struct futhark_mc_segmap_parloop_struct_131850
    futhark_mc_segmap_parloop_struct_131850;
    
    futhark_mc_segmap_parloop_struct_131850.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131850.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131850.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131850.free_stl_res_114588 =
        stl_res_114588;
    futhark_mc_segmap_parloop_struct_131850.free_j_m_i_114986 = j_m_i_114986;
    futhark_mc_segmap_parloop_struct_131850.free_mem_123674 = mem_123674.mem;
    futhark_mc_segmap_parloop_struct_131850.free_mem_123677 = mem_123677.mem;
    futhark_mc_segmap_parloop_struct_131850.free_mem_123680 = mem_123680.mem;
    futhark_mc_segmap_parloop_struct_131850.free_mem_123683 = mem_123683.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131851_task;
    
    futhark_mc_segmap_parloop_131851_task.name =
        "futhark_mc_segmap_parloop_131851";
    futhark_mc_segmap_parloop_131851_task.fn = futhark_mc_segmap_parloop_131851;
    futhark_mc_segmap_parloop_131851_task.args =
        &futhark_mc_segmap_parloop_struct_131850;
    futhark_mc_segmap_parloop_131851_task.iterations = iterations;
    futhark_mc_segmap_parloop_131851_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131851_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131851_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131851_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131851_task);
    
    if (futhark_mc_segmap_parloop_131851_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131851_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131851_total_end -
                 futhark_mc_segmap_parloop_131851_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131851_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131851_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131851_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131849_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131849_end -
                 futhark_mc_segmap_task_131849_start;
        
        ctx->futhark_mc_segmap_task_131849_runs[tid]++;
        ctx->futhark_mc_segmap_task_131849_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131849_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131853 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_stl_res_114588;
    int64_t free_j_m_i_114986;
    char *free_mem_123674;
    char *free_mem_123677;
    char *free_mem_123680;
    char *free_mem_123683;
};
struct futhark_mc_task_131855 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_stl_res_114588;
    int64_t free_gtid_121083;
    char *free_mem_123674;
    float *retval_defunc_2_reduce_res_121087;
};
struct futhark_mc_segred_stage_1_parloop_struct_131858 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_stl_res_114588;
    int64_t free_gtid_121083;
    char *free_mem_123674;
    char *free_reduce_stage_1_tid_res_arr_mem_130975;
};
static int futhark_mc_segred_stage_1_parloop_131859(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_121084,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131858
    *futhark_mc_segred_stage_1_parloop_struct_131858 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131858 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131858->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131859_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131859_start = get_wall_time();
    
    int64_t n_114518 =
            futhark_mc_segred_stage_1_parloop_struct_131858->free_n_114518;
    int64_t stl_res_114588 =
            futhark_mc_segred_stage_1_parloop_struct_131858->free_stl_res_114588;
    int64_t gtid_121083 =
            futhark_mc_segred_stage_1_parloop_struct_131858->free_gtid_121083;
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131858->free_mem_123674,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130975 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130975",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131858->free_reduce_stage_1_tid_res_arr_mem_130975,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130977 = start;
    float x_130967;
    float x_130968;
    float local_acc_130978 = 0.0F;
    
    for (; iter_130977 < end; iter_130977++) {
        int64_t gtid_121085 = iter_130977;
        int64_t slice_130970 = stl_res_114588 + gtid_121085;
        float x_130971 = ((float *) mem_123674.mem)[gtid_121083 * n_114518 +
                                                    slice_130970];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_130967 = local_acc_130978;
        }
        // Load next params
        {
            x_130968 = x_130971;
        }
        // Red body
        {
            float defunc_1_op_res_130969 = x_130967 + x_130968;
            
            local_acc_130978 = defunc_1_op_res_130969;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_130975.mem)[flat_tid_121084] =
        local_acc_130978;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131859_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131859_end -
                 futhark_mc_segred_stage_1_parloop_131859_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131859_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131859_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131859_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131856(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121084 = tid;
    int num_tasks_130974 = info.nsubtasks;
    struct futhark_mc_task_131855 *futhark_mc_task_131855 =
                                  (struct futhark_mc_task_131855 *) args;
    struct futhark_context *ctx = futhark_mc_task_131855->ctx;
    uint64_t futhark_mc_segred_task_131856_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131856_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131855->free_n_114518;
    int64_t stl_res_114588 = futhark_mc_task_131855->free_stl_res_114588;
    int64_t gtid_121083 = futhark_mc_task_131855->free_gtid_121083;
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_task_131855->free_mem_123674,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_121087 =
          *futhark_mc_task_131855->retval_defunc_2_reduce_res_121087;
    size_t reduce_stage_1_tid_res_arr_mem_130975_cached_sizze_131857 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130975 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_130975_cached_sizze_131857 <
        (size_t) ((int64_t) 4 * num_tasks_130974)) {
        reduce_stage_1_tid_res_arr_mem_130975 =
            realloc(reduce_stage_1_tid_res_arr_mem_130975, (int64_t) 4 *
                    num_tasks_130974);
        reduce_stage_1_tid_res_arr_mem_130975_cached_sizze_131857 =
            (int64_t) 4 * num_tasks_130974;
    }
    
    int64_t iter_130977;
    struct futhark_mc_segred_stage_1_parloop_struct_131858
    futhark_mc_segred_stage_1_parloop_struct_131858;
    
    futhark_mc_segred_stage_1_parloop_struct_131858.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131858.free_n_114518 = n_114518;
    futhark_mc_segred_stage_1_parloop_struct_131858.free_stl_res_114588 =
        stl_res_114588;
    futhark_mc_segred_stage_1_parloop_struct_131858.free_gtid_121083 =
        gtid_121083;
    futhark_mc_segred_stage_1_parloop_struct_131858.free_mem_123674 =
        mem_123674.mem;
    futhark_mc_segred_stage_1_parloop_struct_131858.free_reduce_stage_1_tid_res_arr_mem_130975 =
        reduce_stage_1_tid_res_arr_mem_130975;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131859_task;
    
    futhark_mc_segred_stage_1_parloop_131859_task.name =
        "futhark_mc_segred_stage_1_parloop_131859";
    futhark_mc_segred_stage_1_parloop_131859_task.fn =
        futhark_mc_segred_stage_1_parloop_131859;
    futhark_mc_segred_stage_1_parloop_131859_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131858;
    futhark_mc_segred_stage_1_parloop_131859_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131859_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131859_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131859_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131859_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131859_task);
    
    if (futhark_mc_segred_stage_1_parloop_131859_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131859_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131859_total_end -
                 futhark_mc_segred_stage_1_parloop_131859_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131859_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131859_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131859_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_121087 = 0.0F;
    }
    
    float x_130979;
    float x_130980;
    
    for (int32_t i_130982 = 0; i_130982 < num_tasks_130974; i_130982++) {
        flat_tid_121084 = i_130982;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_130979 = defunc_2_reduce_res_121087;
            }
            // load next params
            {
                x_130980 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130975)[flat_tid_121084];
            }
            // red body
            {
                float defunc_1_op_res_130981 = x_130979 + x_130980;
                
                defunc_2_reduce_res_121087 = defunc_1_op_res_130981;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_130975);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131856_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131856_end -
                 futhark_mc_segred_task_131856_start;
        
        ctx->futhark_mc_segred_task_131856_runs[tid]++;
        ctx->futhark_mc_segred_task_131856_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131856_iter[tid] += iterations;
    }
    *futhark_mc_task_131855->retval_defunc_2_reduce_res_121087 =
        defunc_2_reduce_res_121087;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131854(void *args, int64_t start,
                                            int64_t end, int flat_tid_121082,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131853
    *futhark_mc_segmap_parloop_struct_131853 =
    (struct futhark_mc_segmap_parloop_struct_131853 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131853->ctx;
    uint64_t futhark_mc_segmap_parloop_131854_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131854_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131853->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131853->free_n_114518;
    int64_t stl_res_114588 =
            futhark_mc_segmap_parloop_struct_131853->free_stl_res_114588;
    int64_t j_m_i_114986 =
            futhark_mc_segmap_parloop_struct_131853->free_j_m_i_114986;
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_segmap_parloop_struct_131853->free_mem_123674,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_segmap_parloop_struct_131853->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_segmap_parloop_struct_131853->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_segmap_parloop_struct_131853->free_mem_123683,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130966 = start;
    
    for (; iter_130966 < end; iter_130966++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130972 = m_114517;
        int64_t gtid_121083 = iter_130966;
        int64_t remnant_130973 = iter_130966 - gtid_121083;
        float defunc_2_reduce_res_121087;
        int64_t flat_tid_121084 = (int64_t) 0;
        int32_t num_tasks_130974;
        struct futhark_mc_task_131855 futhark_mc_task_131855;
        
        futhark_mc_task_131855.ctx = ctx;
        futhark_mc_task_131855.free_n_114518 = n_114518;
        futhark_mc_task_131855.free_stl_res_114588 = stl_res_114588;
        futhark_mc_task_131855.free_gtid_121083 = gtid_121083;
        futhark_mc_task_131855.free_mem_123674 = mem_123674.mem;
        futhark_mc_task_131855.retval_defunc_2_reduce_res_121087 =
            &defunc_2_reduce_res_121087;
        
        struct scheduler_segop futhark_mc_task_131855_task;
        
        futhark_mc_task_131855_task.args = &futhark_mc_task_131855;
        futhark_mc_task_131855_task.top_level_fn =
            futhark_mc_segred_task_131856;
        futhark_mc_task_131855_task.name = "futhark_mc_segred_task_131856";
        futhark_mc_task_131855_task.iterations = j_m_i_114986;
        futhark_mc_task_131855_task.task_time =
            &ctx->futhark_mc_segred_task_131856_total_time;
        futhark_mc_task_131855_task.task_iter =
            &ctx->futhark_mc_segred_task_131856_total_iter;
        futhark_mc_task_131855_task.sched = STATIC;
        futhark_mc_task_131855_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131856_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131855_task);
        
        if (futhark_mc_segred_task_131856_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float h_121092 = 3.0F * defunc_2_reduce_res_121087;
        float h9_121093 = 0.999F * h_121092;
        float h1_121094 = 1.0e-3F * h_121092;
        
        ((float *) mem_123677.mem)[gtid_121083] = h_121092;
        ((float *) mem_123680.mem)[gtid_121083] = h9_121093;
        ((float *) mem_123683.mem)[gtid_121083] = h1_121094;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131854_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131854_end -
                 futhark_mc_segmap_parloop_131854_start;
        
        ctx->futhark_mc_segmap_parloop_131854_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131854_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131854_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131852(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121082 = tid;
    int num_tasks_130956 = info.nsubtasks;
    struct futhark_mc_task_131848 *futhark_mc_task_131848 =
                                  (struct futhark_mc_task_131848 *) args;
    struct futhark_context *ctx = futhark_mc_task_131848->ctx;
    uint64_t futhark_mc_segmap_nested_task_131852_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131852_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131848->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131848->free_n_114518;
    int64_t stl_res_114588 = futhark_mc_task_131848->free_stl_res_114588;
    int64_t j_m_i_114986 = futhark_mc_task_131848->free_j_m_i_114986;
    struct memblock mem_123674 = {.desc ="mem_123674", .mem =
                                  futhark_mc_task_131848->free_mem_123674,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_task_131848->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_task_131848->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_task_131848->free_mem_123683,
                                  .size =0, .references =NULL};
    int64_t iter_130966;
    struct futhark_mc_segmap_parloop_struct_131853
    futhark_mc_segmap_parloop_struct_131853;
    
    futhark_mc_segmap_parloop_struct_131853.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131853.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131853.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131853.free_stl_res_114588 =
        stl_res_114588;
    futhark_mc_segmap_parloop_struct_131853.free_j_m_i_114986 = j_m_i_114986;
    futhark_mc_segmap_parloop_struct_131853.free_mem_123674 = mem_123674.mem;
    futhark_mc_segmap_parloop_struct_131853.free_mem_123677 = mem_123677.mem;
    futhark_mc_segmap_parloop_struct_131853.free_mem_123680 = mem_123680.mem;
    futhark_mc_segmap_parloop_struct_131853.free_mem_123683 = mem_123683.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131854_task;
    
    futhark_mc_segmap_parloop_131854_task.name =
        "futhark_mc_segmap_parloop_131854";
    futhark_mc_segmap_parloop_131854_task.fn = futhark_mc_segmap_parloop_131854;
    futhark_mc_segmap_parloop_131854_task.args =
        &futhark_mc_segmap_parloop_struct_131853;
    futhark_mc_segmap_parloop_131854_task.iterations = iterations;
    futhark_mc_segmap_parloop_131854_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131854_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131854_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131854_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131854_task);
    
    if (futhark_mc_segmap_parloop_131854_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131854_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131854_total_end -
                 futhark_mc_segmap_parloop_131854_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131854_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131854_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131854_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131852_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131852_end -
                 futhark_mc_segmap_nested_task_131852_start;
        
        ctx->futhark_mc_segmap_nested_task_131852_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131852_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131852_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131860 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_bytes_121961;
    char *free_mem_123498;
    char *free_mem_123677;
    char *free_mem_123680;
    char *free_mem_123683;
    char *free_mem_123705;
};
struct futhark_mc_segmap_parloop_struct_131862 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_bytes_121961;
    char *free_mem_123498;
    char *free_mem_123677;
    char *free_mem_123680;
    char *free_mem_123683;
    char *free_mem_123705;
};
static int futhark_mc_segmap_parloop_131863(void *args, int64_t start,
                                            int64_t end, int flat_tid_121095,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131862
    *futhark_mc_segmap_parloop_struct_131862 =
    (struct futhark_mc_segmap_parloop_struct_131862 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131862->ctx;
    uint64_t futhark_mc_segmap_parloop_131863_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131863_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131862->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131862->free_n_114518;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131862->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131862->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_segmap_parloop_struct_131862->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_segmap_parloop_struct_131862->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_segmap_parloop_struct_131862->free_mem_123683,
                                  .size =0, .references =NULL};
    struct memblock mem_123705 = {.desc ="mem_123705", .mem =
                                  futhark_mc_segmap_parloop_struct_131862->free_mem_123705,
                                  .size =0, .references =NULL};
    size_t mem_123689_cached_sizze_131864 = 0;
    char *mem_123689 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130984 = start;
    
    if (mem_123689_cached_sizze_131864 < (size_t) bytes_121961) {
        mem_123689 = realloc(mem_123689, bytes_121961);
        mem_123689_cached_sizze_131864 = bytes_121961;
    }
    for (; iter_130984 < end; iter_130984++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_131005 = m_114517;
        int64_t gtid_121096 = iter_130984;
        int64_t remnant_131006 = iter_130984 - gtid_121096;
        float x_116710 = ((float *) mem_123677.mem)[gtid_121096];
        float x_116711 = ((float *) mem_123680.mem)[gtid_121096];
        float x_116712 = ((float *) mem_123683.mem)[gtid_121096];
        
        for (int64_t i_130985 = 0; i_130985 < n_114518; i_130985++) {
            float x_130987 = ((float *) mem_123498.mem)[gtid_121096 * n_114518 +
                                                        i_130985];
            float x_130988 = x_130987 / x_116710;
            float y_130989 = fpow32(x_130988, 2.0F);
            float x_130990 = 1.0F - y_130989;
            float bicube_130991 = fpow32(x_130990, 2.0F);
            bool isnan_res_130992;
            
            isnan_res_130992 = futrts_isnan32(x_130987);
            
            bool cond_f_res_130993 = x_130987 <= x_116712;
            bool x_130994 = !isnan_res_130992;
            bool y_130995 = cond_f_res_130993 && x_130994;
            bool cond_130996 = isnan_res_130992 || y_130995;
            float defunc_0_f_res_130997;
            
            if (cond_130996) {
                defunc_0_f_res_130997 = 1.0F;
            } else {
                bool cond_130998 = x_116711 <= x_130987;
                bool cond_f_res_130999 = x_130987 <= 1.0e-6F;
                bool x_131000 = !cond_130998;
                bool y_131001 = cond_f_res_130999 && x_131000;
                bool cond_131002 = cond_130998 || y_131001;
                float defunc_0_f_res_f_res_131003;
                
                if (cond_131002) {
                    defunc_0_f_res_f_res_131003 = 1.0e-6F;
                } else {
                    defunc_0_f_res_f_res_131003 = bicube_130991;
                }
                defunc_0_f_res_130997 = defunc_0_f_res_f_res_131003;
            }
            ((float *) mem_123689)[i_130985] = defunc_0_f_res_130997;
        }
        memmove(mem_123705.mem + gtid_121096 * n_114518 * (int64_t) 4,
                mem_123689 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123689);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131863_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131863_end -
                 futhark_mc_segmap_parloop_131863_start;
        
        ctx->futhark_mc_segmap_parloop_131863_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131863_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131863_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131861(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121095 = tid;
    int num_tasks_130983 = info.nsubtasks;
    struct futhark_mc_task_131860 *futhark_mc_task_131860 =
                                  (struct futhark_mc_task_131860 *) args;
    struct futhark_context *ctx = futhark_mc_task_131860->ctx;
    uint64_t futhark_mc_segmap_task_131861_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131861_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131860->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131860->free_n_114518;
    int64_t bytes_121961 = futhark_mc_task_131860->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131860->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_task_131860->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_task_131860->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_task_131860->free_mem_123683,
                                  .size =0, .references =NULL};
    struct memblock mem_123705 = {.desc ="mem_123705", .mem =
                                  futhark_mc_task_131860->free_mem_123705,
                                  .size =0, .references =NULL};
    int64_t iter_130984;
    struct futhark_mc_segmap_parloop_struct_131862
    futhark_mc_segmap_parloop_struct_131862;
    
    futhark_mc_segmap_parloop_struct_131862.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131862.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131862.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131862.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131862.free_mem_123498 = mem_123498.mem;
    futhark_mc_segmap_parloop_struct_131862.free_mem_123677 = mem_123677.mem;
    futhark_mc_segmap_parloop_struct_131862.free_mem_123680 = mem_123680.mem;
    futhark_mc_segmap_parloop_struct_131862.free_mem_123683 = mem_123683.mem;
    futhark_mc_segmap_parloop_struct_131862.free_mem_123705 = mem_123705.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131863_task;
    
    futhark_mc_segmap_parloop_131863_task.name =
        "futhark_mc_segmap_parloop_131863";
    futhark_mc_segmap_parloop_131863_task.fn = futhark_mc_segmap_parloop_131863;
    futhark_mc_segmap_parloop_131863_task.args =
        &futhark_mc_segmap_parloop_struct_131862;
    futhark_mc_segmap_parloop_131863_task.iterations = iterations;
    futhark_mc_segmap_parloop_131863_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131863_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131863_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131863_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131863_task);
    
    if (futhark_mc_segmap_parloop_131863_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131863_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131863_total_end -
                 futhark_mc_segmap_parloop_131863_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131863_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131863_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131863_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131861_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131861_end -
                 futhark_mc_segmap_task_131861_start;
        
        ctx->futhark_mc_segmap_task_131861_runs[tid]++;
        ctx->futhark_mc_segmap_task_131861_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131861_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131866 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    int64_t free_bytes_121961;
    char *free_mem_123498;
    char *free_mem_123677;
    char *free_mem_123680;
    char *free_mem_123683;
    char *free_mem_123705;
};
struct futhark_mc_task_131869 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_121098;
    float free_x_121102;
    float free_x_121103;
    float free_x_121104;
    char *free_mem_123498;
    char *free_mem_123686;
};
struct futhark_mc_segmap_parloop_struct_131871 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_121098;
    float free_x_121102;
    float free_x_121103;
    float free_x_121104;
    char *free_mem_123498;
    char *free_mem_123686;
};
static int futhark_mc_segmap_parloop_131872(void *args, int64_t start,
                                            int64_t end, int flat_tid_121099,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131871
    *futhark_mc_segmap_parloop_struct_131871 =
    (struct futhark_mc_segmap_parloop_struct_131871 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131871->ctx;
    uint64_t futhark_mc_segmap_parloop_131872_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131872_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131871->free_n_114518;
    int64_t gtid_121098 =
            futhark_mc_segmap_parloop_struct_131871->free_gtid_121098;
    float x_121102 = futhark_mc_segmap_parloop_struct_131871->free_x_121102;
    float x_121103 = futhark_mc_segmap_parloop_struct_131871->free_x_121103;
    float x_121104 = futhark_mc_segmap_parloop_struct_131871->free_x_121104;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131871->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123686 = {.desc ="mem_123686", .mem =
                                  futhark_mc_segmap_parloop_struct_131871->free_mem_123686,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_131029 = start;
    
    for (; iter_131029 < end; iter_131029++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_131036 = n_114518;
        int64_t gtid_121100 = iter_131029;
        int64_t remnant_131037 = iter_131029 - gtid_121100;
        float x_131009 = ((float *) mem_123498.mem)[gtid_121098 * n_114518 +
                                                    gtid_121100];
        float x_131010 = x_131009 / x_121102;
        float y_131011 = fpow32(x_131010, 2.0F);
        float x_131012 = 1.0F - y_131011;
        float bicube_131013 = fpow32(x_131012, 2.0F);
        bool isnan_res_131014;
        
        isnan_res_131014 = futrts_isnan32(x_131009);
        
        bool cond_f_res_131015 = x_131009 <= x_121104;
        bool x_131016 = !isnan_res_131014;
        bool y_131017 = cond_f_res_131015 && x_131016;
        bool cond_131018 = isnan_res_131014 || y_131017;
        float defunc_0_f_res_131019;
        
        if (cond_131018) {
            defunc_0_f_res_131019 = 1.0F;
        } else {
            bool cond_131030 = x_121103 <= x_131009;
            bool cond_f_res_131031 = x_131009 <= 1.0e-6F;
            bool x_131032 = !cond_131030;
            bool y_131033 = cond_f_res_131031 && x_131032;
            bool cond_131034 = cond_131030 || y_131033;
            float defunc_0_f_res_f_res_131035;
            
            if (cond_131034) {
                defunc_0_f_res_f_res_131035 = 1.0e-6F;
            } else {
                defunc_0_f_res_f_res_131035 = bicube_131013;
            }
            defunc_0_f_res_131019 = defunc_0_f_res_f_res_131035;
        }
        ((float *) mem_123686.mem)[gtid_121100] = defunc_0_f_res_131019;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131872_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131872_end -
                 futhark_mc_segmap_parloop_131872_start;
        
        ctx->futhark_mc_segmap_parloop_131872_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131872_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131872_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131870(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121099 = tid;
    int num_tasks_131028 = info.nsubtasks;
    struct futhark_mc_task_131869 *futhark_mc_task_131869 =
                                  (struct futhark_mc_task_131869 *) args;
    struct futhark_context *ctx = futhark_mc_task_131869->ctx;
    uint64_t futhark_mc_segmap_task_131870_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131870_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131869->free_n_114518;
    int64_t gtid_121098 = futhark_mc_task_131869->free_gtid_121098;
    float x_121102 = futhark_mc_task_131869->free_x_121102;
    float x_121103 = futhark_mc_task_131869->free_x_121103;
    float x_121104 = futhark_mc_task_131869->free_x_121104;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131869->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123686 = {.desc ="mem_123686", .mem =
                                  futhark_mc_task_131869->free_mem_123686,
                                  .size =0, .references =NULL};
    int64_t iter_131029;
    struct futhark_mc_segmap_parloop_struct_131871
    futhark_mc_segmap_parloop_struct_131871;
    
    futhark_mc_segmap_parloop_struct_131871.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131871.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131871.free_gtid_121098 = gtid_121098;
    futhark_mc_segmap_parloop_struct_131871.free_x_121102 = x_121102;
    futhark_mc_segmap_parloop_struct_131871.free_x_121103 = x_121103;
    futhark_mc_segmap_parloop_struct_131871.free_x_121104 = x_121104;
    futhark_mc_segmap_parloop_struct_131871.free_mem_123498 = mem_123498.mem;
    futhark_mc_segmap_parloop_struct_131871.free_mem_123686 = mem_123686.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131872_task;
    
    futhark_mc_segmap_parloop_131872_task.name =
        "futhark_mc_segmap_parloop_131872";
    futhark_mc_segmap_parloop_131872_task.fn = futhark_mc_segmap_parloop_131872;
    futhark_mc_segmap_parloop_131872_task.args =
        &futhark_mc_segmap_parloop_struct_131871;
    futhark_mc_segmap_parloop_131872_task.iterations = iterations;
    futhark_mc_segmap_parloop_131872_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131872_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131872_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131872_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131872_task);
    
    if (futhark_mc_segmap_parloop_131872_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131872_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131872_total_end -
                 futhark_mc_segmap_parloop_131872_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131872_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131872_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131872_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131870_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131870_end -
                 futhark_mc_segmap_task_131870_start;
        
        ctx->futhark_mc_segmap_task_131870_runs[tid]++;
        ctx->futhark_mc_segmap_task_131870_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131870_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131867(void *args, int64_t start,
                                            int64_t end, int flat_tid_121097,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131866
    *futhark_mc_segmap_parloop_struct_131866 =
    (struct futhark_mc_segmap_parloop_struct_131866 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131866->ctx;
    uint64_t futhark_mc_segmap_parloop_131867_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131867_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131866->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131866->free_n_114518;
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131866->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_segmap_parloop_struct_131866->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_segmap_parloop_struct_131866->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_segmap_parloop_struct_131866->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_segmap_parloop_struct_131866->free_mem_123683,
                                  .size =0, .references =NULL};
    struct memblock mem_123705 = {.desc ="mem_123705", .mem =
                                  futhark_mc_segmap_parloop_struct_131866->free_mem_123705,
                                  .size =0, .references =NULL};
    size_t mem_123686_cached_sizze_131868 = 0;
    char *mem_123686 = NULL;
    int64_t iterations = end - start;
    int64_t iter_131008 = start;
    
    if (mem_123686_cached_sizze_131868 < (size_t) bytes_121961) {
        mem_123686 = realloc(mem_123686, bytes_121961);
        mem_123686_cached_sizze_131868 = bytes_121961;
    }
    for (; iter_131008 < end; iter_131008++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_131026 = m_114517;
        int64_t gtid_121098 = iter_131008;
        int64_t remnant_131027 = iter_131008 - gtid_121098;
        float x_121102 = ((float *) mem_123677.mem)[gtid_121098];
        float x_121103 = ((float *) mem_123680.mem)[gtid_121098];
        float x_121104 = ((float *) mem_123683.mem)[gtid_121098];
        int64_t flat_tid_121099 = (int64_t) 0;
        int32_t num_tasks_131028;
        struct futhark_mc_task_131869 futhark_mc_task_131869;
        
        futhark_mc_task_131869.ctx = ctx;
        futhark_mc_task_131869.free_n_114518 = n_114518;
        futhark_mc_task_131869.free_gtid_121098 = gtid_121098;
        futhark_mc_task_131869.free_x_121102 = x_121102;
        futhark_mc_task_131869.free_x_121103 = x_121103;
        futhark_mc_task_131869.free_x_121104 = x_121104;
        futhark_mc_task_131869.free_mem_123498 = mem_123498.mem;
        futhark_mc_task_131869.free_mem_123686 = mem_123686;
        
        struct scheduler_segop futhark_mc_task_131869_task;
        
        futhark_mc_task_131869_task.args = &futhark_mc_task_131869;
        futhark_mc_task_131869_task.top_level_fn =
            futhark_mc_segmap_task_131870;
        futhark_mc_task_131869_task.name = "futhark_mc_segmap_task_131870";
        futhark_mc_task_131869_task.iterations = n_114518;
        futhark_mc_task_131869_task.task_time =
            &ctx->futhark_mc_segmap_task_131870_total_time;
        futhark_mc_task_131869_task.task_iter =
            &ctx->futhark_mc_segmap_task_131870_total_iter;
        futhark_mc_task_131869_task.sched = STATIC;
        futhark_mc_task_131869_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131870_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131869_task);
        
        if (futhark_mc_segmap_task_131870_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123705.mem + gtid_121098 * n_114518 * (int64_t) 4,
                mem_123686 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123686);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131867_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131867_end -
                 futhark_mc_segmap_parloop_131867_start;
        
        ctx->futhark_mc_segmap_parloop_131867_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131867_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131867_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131865(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121097 = tid;
    int num_tasks_130983 = info.nsubtasks;
    struct futhark_mc_task_131860 *futhark_mc_task_131860 =
                                  (struct futhark_mc_task_131860 *) args;
    struct futhark_context *ctx = futhark_mc_task_131860->ctx;
    uint64_t futhark_mc_segmap_nested_task_131865_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131865_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131860->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131860->free_n_114518;
    int64_t bytes_121961 = futhark_mc_task_131860->free_bytes_121961;
    struct memblock mem_123498 = {.desc ="mem_123498", .mem =
                                  futhark_mc_task_131860->free_mem_123498,
                                  .size =0, .references =NULL};
    struct memblock mem_123677 = {.desc ="mem_123677", .mem =
                                  futhark_mc_task_131860->free_mem_123677,
                                  .size =0, .references =NULL};
    struct memblock mem_123680 = {.desc ="mem_123680", .mem =
                                  futhark_mc_task_131860->free_mem_123680,
                                  .size =0, .references =NULL};
    struct memblock mem_123683 = {.desc ="mem_123683", .mem =
                                  futhark_mc_task_131860->free_mem_123683,
                                  .size =0, .references =NULL};
    struct memblock mem_123705 = {.desc ="mem_123705", .mem =
                                  futhark_mc_task_131860->free_mem_123705,
                                  .size =0, .references =NULL};
    int64_t iter_131008;
    struct futhark_mc_segmap_parloop_struct_131866
    futhark_mc_segmap_parloop_struct_131866;
    
    futhark_mc_segmap_parloop_struct_131866.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131866.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131866.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131866.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131866.free_mem_123498 = mem_123498.mem;
    futhark_mc_segmap_parloop_struct_131866.free_mem_123677 = mem_123677.mem;
    futhark_mc_segmap_parloop_struct_131866.free_mem_123680 = mem_123680.mem;
    futhark_mc_segmap_parloop_struct_131866.free_mem_123683 = mem_123683.mem;
    futhark_mc_segmap_parloop_struct_131866.free_mem_123705 = mem_123705.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131867_task;
    
    futhark_mc_segmap_parloop_131867_task.name =
        "futhark_mc_segmap_parloop_131867";
    futhark_mc_segmap_parloop_131867_task.fn = futhark_mc_segmap_parloop_131867;
    futhark_mc_segmap_parloop_131867_task.args =
        &futhark_mc_segmap_parloop_struct_131866;
    futhark_mc_segmap_parloop_131867_task.iterations = iterations;
    futhark_mc_segmap_parloop_131867_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131867_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131867_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131867_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131867_task);
    
    if (futhark_mc_segmap_parloop_131867_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131867_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131867_total_end -
                 futhark_mc_segmap_parloop_131867_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131867_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131867_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131867_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131865_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131865_end -
                 futhark_mc_segmap_nested_task_131865_start;
        
        ctx->futhark_mc_segmap_nested_task_131865_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131865_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131865_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131873 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    char *free_ext_mem_123713;
    char *free_ext_mem_123714;
    int64_t free_ext_123725;
    char *free_mem_123757;
};
struct futhark_mc_segmap_parloop_struct_131875 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    char *free_ext_mem_123713;
    char *free_ext_mem_123714;
    int64_t free_ext_123725;
    char *free_mem_123757;
};
static int futhark_mc_segmap_parloop_131876(void *args, int64_t start,
                                            int64_t end, int flat_tid_121123,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131875
    *futhark_mc_segmap_parloop_struct_131875 =
    (struct futhark_mc_segmap_parloop_struct_131875 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131875->ctx;
    uint64_t futhark_mc_segmap_parloop_131876_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131876_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131875->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131875->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131875->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131875->free_bytes_121961;
    struct memblock ext_mem_123713 = {.desc ="ext_mem_123713", .mem =
                                      futhark_mc_segmap_parloop_struct_131875->free_ext_mem_123713,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123714 = {.desc ="ext_mem_123714", .mem =
                                      futhark_mc_segmap_parloop_struct_131875->free_ext_mem_123714,
                                      .size =0, .references =NULL};
    int64_t ext_123725 =
            futhark_mc_segmap_parloop_struct_131875->free_ext_123725;
    struct memblock mem_123757 = {.desc ="mem_123757", .mem =
                                  futhark_mc_segmap_parloop_struct_131875->free_mem_123757,
                                  .size =0, .references =NULL};
    size_t mem_123741_cached_sizze_131877 = 0;
    char *mem_123741 = NULL;
    int64_t iterations = end - start;
    int64_t iter_131039 = start;
    
    if (mem_123741_cached_sizze_131877 < (size_t) bytes_121961) {
        mem_123741 = realloc(mem_123741, bytes_121961);
        mem_123741_cached_sizze_131877 = bytes_121961;
    }
    for (; iter_131039 < end; iter_131039++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_131048 = m_114517;
        int64_t gtid_121124 = iter_131039;
        int64_t remnant_131049 = iter_131039 - gtid_121124;
        
        for (int64_t i_131040 = 0; i_131040 < n_114518; i_131040++) {
            float x_131042 = ((float *) Y_mem_121917.mem)[gtid_121124 *
                                                          n_114518 + i_131040];
            float x_131043 = ((float *) ext_mem_123714.mem)[gtid_121124 *
                                                            n_114518 +
                                                            i_131040];
            float x_131044 = ((float *) ext_mem_123713.mem)[gtid_121124 *
                                                            ext_123725 +
                                                            i_131040];
            float x_131045 = x_131042 - x_131043;
            float defunc_2_f_res_131046 = x_131045 - x_131044;
            
            ((float *) mem_123741)[i_131040] = defunc_2_f_res_131046;
        }
        memmove(mem_123757.mem + gtid_121124 * n_114518 * (int64_t) 4,
                mem_123741 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123741);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131876_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131876_end -
                 futhark_mc_segmap_parloop_131876_start;
        
        ctx->futhark_mc_segmap_parloop_131876_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131876_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131876_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131874(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121123 = tid;
    int num_tasks_131038 = info.nsubtasks;
    struct futhark_mc_task_131873 *futhark_mc_task_131873 =
                                  (struct futhark_mc_task_131873 *) args;
    struct futhark_context *ctx = futhark_mc_task_131873->ctx;
    uint64_t futhark_mc_segmap_task_131874_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131874_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131873->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131873->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131873->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131873->free_bytes_121961;
    struct memblock ext_mem_123713 = {.desc ="ext_mem_123713", .mem =
                                      futhark_mc_task_131873->free_ext_mem_123713,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123714 = {.desc ="ext_mem_123714", .mem =
                                      futhark_mc_task_131873->free_ext_mem_123714,
                                      .size =0, .references =NULL};
    int64_t ext_123725 = futhark_mc_task_131873->free_ext_123725;
    struct memblock mem_123757 = {.desc ="mem_123757", .mem =
                                  futhark_mc_task_131873->free_mem_123757,
                                  .size =0, .references =NULL};
    int64_t iter_131039;
    struct futhark_mc_segmap_parloop_struct_131875
    futhark_mc_segmap_parloop_struct_131875;
    
    futhark_mc_segmap_parloop_struct_131875.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131875.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131875.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131875.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131875.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131875.free_ext_mem_123713 =
        ext_mem_123713.mem;
    futhark_mc_segmap_parloop_struct_131875.free_ext_mem_123714 =
        ext_mem_123714.mem;
    futhark_mc_segmap_parloop_struct_131875.free_ext_123725 = ext_123725;
    futhark_mc_segmap_parloop_struct_131875.free_mem_123757 = mem_123757.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131876_task;
    
    futhark_mc_segmap_parloop_131876_task.name =
        "futhark_mc_segmap_parloop_131876";
    futhark_mc_segmap_parloop_131876_task.fn = futhark_mc_segmap_parloop_131876;
    futhark_mc_segmap_parloop_131876_task.args =
        &futhark_mc_segmap_parloop_struct_131875;
    futhark_mc_segmap_parloop_131876_task.iterations = iterations;
    futhark_mc_segmap_parloop_131876_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131876_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131876_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131876_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131876_task);
    
    if (futhark_mc_segmap_parloop_131876_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131876_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131876_total_end -
                 futhark_mc_segmap_parloop_131876_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131876_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131876_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131876_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131874_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131874_end -
                 futhark_mc_segmap_task_131874_start;
        
        ctx->futhark_mc_segmap_task_131874_runs[tid]++;
        ctx->futhark_mc_segmap_task_131874_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131874_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131879 {
    struct futhark_context *ctx;
    int64_t free_m_114517;
    int64_t free_n_114518;
    char *free_Y_mem_121917;
    int64_t free_bytes_121961;
    char *free_ext_mem_123713;
    char *free_ext_mem_123714;
    int64_t free_ext_123725;
    char *free_mem_123757;
};
struct futhark_mc_task_131882 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_121126;
    char *free_Y_mem_121917;
    char *free_ext_mem_123713;
    char *free_ext_mem_123714;
    int64_t free_ext_123725;
    char *free_mem_123738;
};
struct futhark_mc_segmap_parloop_struct_131884 {
    struct futhark_context *ctx;
    int64_t free_n_114518;
    int64_t free_gtid_121126;
    char *free_Y_mem_121917;
    char *free_ext_mem_123713;
    char *free_ext_mem_123714;
    int64_t free_ext_123725;
    char *free_mem_123738;
};
static int futhark_mc_segmap_parloop_131885(void *args, int64_t start,
                                            int64_t end, int flat_tid_121127,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131884
    *futhark_mc_segmap_parloop_struct_131884 =
    (struct futhark_mc_segmap_parloop_struct_131884 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131884->ctx;
    uint64_t futhark_mc_segmap_parloop_131885_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131885_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131884->free_n_114518;
    int64_t gtid_121126 =
            futhark_mc_segmap_parloop_struct_131884->free_gtid_121126;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131884->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123713 = {.desc ="ext_mem_123713", .mem =
                                      futhark_mc_segmap_parloop_struct_131884->free_ext_mem_123713,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123714 = {.desc ="ext_mem_123714", .mem =
                                      futhark_mc_segmap_parloop_struct_131884->free_ext_mem_123714,
                                      .size =0, .references =NULL};
    int64_t ext_123725 =
            futhark_mc_segmap_parloop_struct_131884->free_ext_123725;
    struct memblock mem_123738 = {.desc ="mem_123738", .mem =
                                  futhark_mc_segmap_parloop_struct_131884->free_mem_123738,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_131060 = start;
    
    for (; iter_131060 < end; iter_131060++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_131061 = n_114518;
        int64_t gtid_121128 = iter_131060;
        int64_t remnant_131062 = iter_131060 - gtid_121128;
        float x_131052 = ((float *) Y_mem_121917.mem)[gtid_121126 * n_114518 +
                                                      gtid_121128];
        float x_131053 = ((float *) ext_mem_123714.mem)[gtid_121126 * n_114518 +
                                                        gtid_121128];
        float x_131054 = ((float *) ext_mem_123713.mem)[gtid_121126 *
                                                        ext_123725 +
                                                        gtid_121128];
        float x_131055 = x_131052 - x_131053;
        float defunc_2_f_res_131056 = x_131055 - x_131054;
        
        ((float *) mem_123738.mem)[gtid_121128] = defunc_2_f_res_131056;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131885_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131885_end -
                 futhark_mc_segmap_parloop_131885_start;
        
        ctx->futhark_mc_segmap_parloop_131885_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131885_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131885_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131883(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121127 = tid;
    int num_tasks_131059 = info.nsubtasks;
    struct futhark_mc_task_131882 *futhark_mc_task_131882 =
                                  (struct futhark_mc_task_131882 *) args;
    struct futhark_context *ctx = futhark_mc_task_131882->ctx;
    uint64_t futhark_mc_segmap_task_131883_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131883_start = get_wall_time();
    
    int64_t n_114518 = futhark_mc_task_131882->free_n_114518;
    int64_t gtid_121126 = futhark_mc_task_131882->free_gtid_121126;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131882->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123713 = {.desc ="ext_mem_123713", .mem =
                                      futhark_mc_task_131882->free_ext_mem_123713,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123714 = {.desc ="ext_mem_123714", .mem =
                                      futhark_mc_task_131882->free_ext_mem_123714,
                                      .size =0, .references =NULL};
    int64_t ext_123725 = futhark_mc_task_131882->free_ext_123725;
    struct memblock mem_123738 = {.desc ="mem_123738", .mem =
                                  futhark_mc_task_131882->free_mem_123738,
                                  .size =0, .references =NULL};
    int64_t iter_131060;
    struct futhark_mc_segmap_parloop_struct_131884
    futhark_mc_segmap_parloop_struct_131884;
    
    futhark_mc_segmap_parloop_struct_131884.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131884.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131884.free_gtid_121126 = gtid_121126;
    futhark_mc_segmap_parloop_struct_131884.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131884.free_ext_mem_123713 =
        ext_mem_123713.mem;
    futhark_mc_segmap_parloop_struct_131884.free_ext_mem_123714 =
        ext_mem_123714.mem;
    futhark_mc_segmap_parloop_struct_131884.free_ext_123725 = ext_123725;
    futhark_mc_segmap_parloop_struct_131884.free_mem_123738 = mem_123738.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131885_task;
    
    futhark_mc_segmap_parloop_131885_task.name =
        "futhark_mc_segmap_parloop_131885";
    futhark_mc_segmap_parloop_131885_task.fn = futhark_mc_segmap_parloop_131885;
    futhark_mc_segmap_parloop_131885_task.args =
        &futhark_mc_segmap_parloop_struct_131884;
    futhark_mc_segmap_parloop_131885_task.iterations = iterations;
    futhark_mc_segmap_parloop_131885_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131885_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131885_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131885_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131885_task);
    
    if (futhark_mc_segmap_parloop_131885_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131885_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131885_total_end -
                 futhark_mc_segmap_parloop_131885_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131885_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131885_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131885_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131883_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131883_end -
                 futhark_mc_segmap_task_131883_start;
        
        ctx->futhark_mc_segmap_task_131883_runs[tid]++;
        ctx->futhark_mc_segmap_task_131883_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131883_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131880(void *args, int64_t start,
                                            int64_t end, int flat_tid_121125,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131879
    *futhark_mc_segmap_parloop_struct_131879 =
    (struct futhark_mc_segmap_parloop_struct_131879 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131879->ctx;
    uint64_t futhark_mc_segmap_parloop_131880_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131880_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_segmap_parloop_struct_131879->free_m_114517;
    int64_t n_114518 = futhark_mc_segmap_parloop_struct_131879->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_segmap_parloop_struct_131879->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 =
            futhark_mc_segmap_parloop_struct_131879->free_bytes_121961;
    struct memblock ext_mem_123713 = {.desc ="ext_mem_123713", .mem =
                                      futhark_mc_segmap_parloop_struct_131879->free_ext_mem_123713,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123714 = {.desc ="ext_mem_123714", .mem =
                                      futhark_mc_segmap_parloop_struct_131879->free_ext_mem_123714,
                                      .size =0, .references =NULL};
    int64_t ext_123725 =
            futhark_mc_segmap_parloop_struct_131879->free_ext_123725;
    struct memblock mem_123757 = {.desc ="mem_123757", .mem =
                                  futhark_mc_segmap_parloop_struct_131879->free_mem_123757,
                                  .size =0, .references =NULL};
    size_t mem_123738_cached_sizze_131881 = 0;
    char *mem_123738 = NULL;
    int64_t iterations = end - start;
    int64_t iter_131051 = start;
    
    if (mem_123738_cached_sizze_131881 < (size_t) bytes_121961) {
        mem_123738 = realloc(mem_123738, bytes_121961);
        mem_123738_cached_sizze_131881 = bytes_121961;
    }
    for (; iter_131051 < end; iter_131051++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_131057 = m_114517;
        int64_t gtid_121126 = iter_131051;
        int64_t remnant_131058 = iter_131051 - gtid_121126;
        int64_t flat_tid_121127 = (int64_t) 0;
        int32_t num_tasks_131059;
        struct futhark_mc_task_131882 futhark_mc_task_131882;
        
        futhark_mc_task_131882.ctx = ctx;
        futhark_mc_task_131882.free_n_114518 = n_114518;
        futhark_mc_task_131882.free_gtid_121126 = gtid_121126;
        futhark_mc_task_131882.free_Y_mem_121917 = Y_mem_121917.mem;
        futhark_mc_task_131882.free_ext_mem_123713 = ext_mem_123713.mem;
        futhark_mc_task_131882.free_ext_mem_123714 = ext_mem_123714.mem;
        futhark_mc_task_131882.free_ext_123725 = ext_123725;
        futhark_mc_task_131882.free_mem_123738 = mem_123738;
        
        struct scheduler_segop futhark_mc_task_131882_task;
        
        futhark_mc_task_131882_task.args = &futhark_mc_task_131882;
        futhark_mc_task_131882_task.top_level_fn =
            futhark_mc_segmap_task_131883;
        futhark_mc_task_131882_task.name = "futhark_mc_segmap_task_131883";
        futhark_mc_task_131882_task.iterations = n_114518;
        futhark_mc_task_131882_task.task_time =
            &ctx->futhark_mc_segmap_task_131883_total_time;
        futhark_mc_task_131882_task.task_iter =
            &ctx->futhark_mc_segmap_task_131883_total_iter;
        futhark_mc_task_131882_task.sched = STATIC;
        futhark_mc_task_131882_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131883_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131882_task);
        
        if (futhark_mc_segmap_task_131883_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123757.mem + gtid_121126 * n_114518 * (int64_t) 4,
                mem_123738 + (int64_t) 0, n_114518 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123738);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131880_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131880_end -
                 futhark_mc_segmap_parloop_131880_start;
        
        ctx->futhark_mc_segmap_parloop_131880_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131880_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131880_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131878(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121125 = tid;
    int num_tasks_131038 = info.nsubtasks;
    struct futhark_mc_task_131873 *futhark_mc_task_131873 =
                                  (struct futhark_mc_task_131873 *) args;
    struct futhark_context *ctx = futhark_mc_task_131873->ctx;
    uint64_t futhark_mc_segmap_nested_task_131878_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131878_start = get_wall_time();
    
    int64_t m_114517 = futhark_mc_task_131873->free_m_114517;
    int64_t n_114518 = futhark_mc_task_131873->free_n_114518;
    struct memblock Y_mem_121917 = {.desc ="Y_mem_121917", .mem =
                                    futhark_mc_task_131873->free_Y_mem_121917,
                                    .size =0, .references =NULL};
    int64_t bytes_121961 = futhark_mc_task_131873->free_bytes_121961;
    struct memblock ext_mem_123713 = {.desc ="ext_mem_123713", .mem =
                                      futhark_mc_task_131873->free_ext_mem_123713,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123714 = {.desc ="ext_mem_123714", .mem =
                                      futhark_mc_task_131873->free_ext_mem_123714,
                                      .size =0, .references =NULL};
    int64_t ext_123725 = futhark_mc_task_131873->free_ext_123725;
    struct memblock mem_123757 = {.desc ="mem_123757", .mem =
                                  futhark_mc_task_131873->free_mem_123757,
                                  .size =0, .references =NULL};
    int64_t iter_131051;
    struct futhark_mc_segmap_parloop_struct_131879
    futhark_mc_segmap_parloop_struct_131879;
    
    futhark_mc_segmap_parloop_struct_131879.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131879.free_m_114517 = m_114517;
    futhark_mc_segmap_parloop_struct_131879.free_n_114518 = n_114518;
    futhark_mc_segmap_parloop_struct_131879.free_Y_mem_121917 =
        Y_mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131879.free_bytes_121961 = bytes_121961;
    futhark_mc_segmap_parloop_struct_131879.free_ext_mem_123713 =
        ext_mem_123713.mem;
    futhark_mc_segmap_parloop_struct_131879.free_ext_mem_123714 =
        ext_mem_123714.mem;
    futhark_mc_segmap_parloop_struct_131879.free_ext_123725 = ext_123725;
    futhark_mc_segmap_parloop_struct_131879.free_mem_123757 = mem_123757.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131880_task;
    
    futhark_mc_segmap_parloop_131880_task.name =
        "futhark_mc_segmap_parloop_131880";
    futhark_mc_segmap_parloop_131880_task.fn = futhark_mc_segmap_parloop_131880;
    futhark_mc_segmap_parloop_131880_task.args =
        &futhark_mc_segmap_parloop_struct_131879;
    futhark_mc_segmap_parloop_131880_task.iterations = iterations;
    futhark_mc_segmap_parloop_131880_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131880_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131880_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131880_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131880_task);
    
    if (futhark_mc_segmap_parloop_131880_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131880_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131880_total_end -
                 futhark_mc_segmap_parloop_131880_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131880_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131880_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131880_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131878_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131878_end -
                 futhark_mc_segmap_nested_task_131878_start;
        
        ctx->futhark_mc_segmap_nested_task_131878_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131878_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131878_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_131063,
                             struct memblock *mem_out_p_131064,
                             struct memblock *mem_out_p_131065,
                             struct memblock Y_mem_121917, int64_t m_114517,
                             int64_t n_114518, int64_t n_p_114520,
                             int64_t t_window_114521, int64_t l_window_114522,
                             int64_t t_degree_114523, int64_t l_degree_114524,
                             int64_t t_jump_114525, int64_t l_jump_114526,
                             int64_t inner_114527, int64_t outer_114528,
                             int64_t jump_threshold_114529,
                             int64_t max_group_sizze_114530)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_121957_cached_sizze_131066 = 0;
    char *mem_121957 = NULL;
    size_t mem_121960_cached_sizze_131067 = 0;
    char *mem_121960 = NULL;
    size_t mem_121982_cached_sizze_131068 = 0;
    char *mem_121982 = NULL;
    size_t mem_122004_cached_sizze_131069 = 0;
    char *mem_122004 = NULL;
    size_t mem_122026_cached_sizze_131070 = 0;
    char *mem_122026 = NULL;
    size_t mem_122102_cached_sizze_131071 = 0;
    char *mem_122102 = NULL;
    size_t mem_122106_cached_sizze_131072 = 0;
    char *mem_122106 = NULL;
    size_t mem_122182_cached_sizze_131073 = 0;
    char *mem_122182 = NULL;
    size_t mem_122186_cached_sizze_131074 = 0;
    char *mem_122186 = NULL;
    size_t mem_122262_cached_sizze_131075 = 0;
    char *mem_122262 = NULL;
    size_t mem_122284_cached_sizze_131076 = 0;
    char *mem_122284 = NULL;
    size_t mem_122306_cached_sizze_131077 = 0;
    char *mem_122306 = NULL;
    size_t mem_122364_cached_sizze_131078 = 0;
    char *mem_122364 = NULL;
    size_t mem_122404_cached_sizze_131079 = 0;
    char *mem_122404 = NULL;
    size_t mem_122408_cached_sizze_131080 = 0;
    char *mem_122408 = NULL;
    size_t mem_122959_cached_sizze_131081 = 0;
    char *mem_122959 = NULL;
    size_t mem_123498_cached_sizze_131082 = 0;
    char *mem_123498 = NULL;
    size_t mem_123520_cached_sizze_131083 = 0;
    char *mem_123520 = NULL;
    size_t mem_123674_cached_sizze_131084 = 0;
    char *mem_123674 = NULL;
    size_t mem_123677_cached_sizze_131085 = 0;
    char *mem_123677 = NULL;
    size_t mem_123680_cached_sizze_131086 = 0;
    char *mem_123680 = NULL;
    size_t mem_123683_cached_sizze_131087 = 0;
    char *mem_123683 = NULL;
    struct memblock mem_out_123828;
    
    mem_out_123828.references = NULL;
    
    struct memblock mem_out_123829;
    
    mem_out_123829.references = NULL;
    
    struct memblock mem_out_123830;
    
    mem_out_123830.references = NULL;
    
    bool assert_cond_114531 = sle64((int64_t) 4, n_p_114520);
    bool assert_c_114532;
    
    if (!assert_cond_114531) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:90:13-33\n   #1  stl.fut:394:3-405:33\n   #2  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_114533 = smod64(t_window_114521, (int64_t) 2);
    bool assert_cond_114534 = x_114533 == (int64_t) 1;
    bool assert_c_114535;
    
    if (!assert_cond_114534) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:92:18-35\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114536 = slt64((int64_t) 0, t_window_114521);
    bool assert_c_114537;
    
    if (!assert_cond_114536) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:92:18-35\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_114538 = smod64(l_window_114522, (int64_t) 2);
    bool assert_cond_114539 = x_114538 == (int64_t) 1;
    bool assert_c_114540;
    
    if (!assert_cond_114539) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:93:18-35\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114541 = slt64((int64_t) 0, l_window_114522);
    bool assert_c_114542;
    
    if (!assert_cond_114541) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:93:18-35\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool cond_114543 = sle64((int64_t) 0, t_degree_114523);
    bool assert_cond_t_res_114544 = sle64(t_degree_114523, (int64_t) 2);
    bool x_114545 = cond_114543 && assert_cond_t_res_114544;
    bool assert_c_114546;
    
    if (!x_114545) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:95:18-35\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool cond_114547 = sle64((int64_t) 0, l_degree_114524);
    bool assert_cond_t_res_114548 = sle64(l_degree_114524, (int64_t) 2);
    bool x_114549 = cond_114547 && assert_cond_t_res_114548;
    bool assert_c_114550;
    
    if (!x_114549) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:96:18-35\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114551 = sle64((int64_t) 0, t_jump_114525);
    bool assert_c_114552;
    
    if (!assert_cond_114551) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:98:16-34\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114553 = sle64((int64_t) 0, l_jump_114526);
    bool assert_c_114554;
    
    if (!assert_cond_114553) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:99:16-34\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114555 = slt64((int64_t) 0, inner_114527);
    bool assert_c_114556;
    
    if (!assert_cond_114555) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  stl.fut:101:15-29\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114557 = sle64((int64_t) 0, outer_114528);
    bool assert_c_114558;
    
    if (!assert_cond_114557) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:102:15-32\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    float i64_res_114559 = sitofp_i64_f32(n_114518);
    float i64_res_114560 = sitofp_i64_f32(n_p_114520);
    float binop_p_114561 = i64_res_114559 / i64_res_114560;
    float defunc_0_f_res_114562;
    
    defunc_0_f_res_114562 = futrts_ceil32(binop_p_114561);
    
    int64_t defunc_0_f_res_114563 = fptosi_f32_i64(defunc_0_f_res_114562);
    int64_t css_chunk_len_114564 = add64((int64_t) 2, defunc_0_f_res_114563);
    int64_t y_114565 = mul64((int64_t) 2, n_p_114520);
    int64_t C_len_114566 = add64(n_114518, y_114565);
    bool cond_114567 = l_jump_114526 == (int64_t) 1;
    int64_t l_n_m_114568;
    
    if (cond_114567) {
        l_n_m_114568 = n_114518;
    } else {
        bool zzero_114569 = l_jump_114526 == (int64_t) 0;
        bool nonzzero_114570 = !zzero_114569;
        bool nonzzero_cert_114571;
        
        if (!nonzzero_114570) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:110:42-51\n   #1  stl.fut:394:3-405:33\n   #2  stl.fut:381:1-405:33\n");
            if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_114572 = sdiv64(n_114518, l_jump_114526);
        int64_t l_n_m_f_res_114573 = add64((int64_t) 1, x_114572);
        
        l_n_m_114568 = l_n_m_f_res_114573;
    }
    
    bool cond_114574 = t_jump_114525 == (int64_t) 1;
    int64_t t_n_m_114575;
    
    if (cond_114574) {
        t_n_m_114575 = n_114518;
    } else {
        bool zzero_114576 = t_jump_114525 == (int64_t) 0;
        bool nonzzero_114577 = !zzero_114576;
        bool nonzzero_cert_114578;
        
        if (!nonzzero_114577) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:114:42-51\n   #1  stl.fut:394:3-405:33\n   #2  stl.fut:381:1-405:33\n");
            if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_114579 = sdiv64(n_114518, t_jump_114525);
        int64_t t_n_m_f_res_114580 = add64((int64_t) 1, x_114579);
        
        t_n_m_114575 = t_n_m_f_res_114580;
    }
    
    float x_114581 = i64_res_114559 / 2.0F;
    float floor_arg_114582 = 1.0F + x_114581;
    float floor_res_114583;
    
    floor_res_114583 = futrts_floor32(floor_arg_114582);
    
    int64_t defunc_0_f_res_114584 = fptosi_f32_i64(floor_res_114583);
    int64_t x_114585 = sub64(n_114518, defunc_0_f_res_114584);
    int64_t mid2_114586 = add64((int64_t) 1, x_114585);
    bool cond_114587 = defunc_0_f_res_114584 == mid2_114586;
    int64_t stl_res_114588;
    int64_t stl_res_114589;
    
    if (cond_114587) {
        int64_t stl_res_t_res_114590 = sub64(defunc_0_f_res_114584,
                                             (int64_t) 1);
        
        stl_res_114588 = stl_res_t_res_114590;
        stl_res_114589 = defunc_0_f_res_114584;
    } else {
        int64_t min_res_114591 = smin64(defunc_0_f_res_114584, mid2_114586);
        int64_t stl_res_f_res_114592 = sub64(min_res_114591, (int64_t) 1);
        int64_t max_res_114593 = smax64(defunc_0_f_res_114584, mid2_114586);
        
        stl_res_114588 = stl_res_f_res_114592;
        stl_res_114589 = max_res_114593;
    }
    
    int64_t i_114594 = sub64(n_114518, (int64_t) 1);
    bool x_114595 = sle64((int64_t) 0, i_114594);
    bool y_114596 = slt64(i_114594, n_114518);
    bool bounds_check_114597 = x_114595 && y_114596;
    bool index_certs_114598;
    
    if (!bounds_check_114597) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_114594,
                               "] out of bounds for array of shape [",
                               (long long) n_114518, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  stl.fut:128:31-49\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_121955 = m_114517 * n_114518;
    int64_t binop_y_121956 = (int64_t) 8 * binop_x_121955;
    int64_t bytes_121954 = smax64((int64_t) 0, binop_y_121956);
    
    if (mem_121957_cached_sizze_131066 < (size_t) bytes_121954) {
        mem_121957 = realloc(mem_121957, bytes_121954);
        mem_121957_cached_sizze_131066 = bytes_121954;
    }
    
    int64_t binop_y_121959 = (int64_t) 8 * m_114517;
    int64_t bytes_121958 = smax64((int64_t) 0, binop_y_121959);
    
    if (mem_121960_cached_sizze_131067 < (size_t) bytes_121958) {
        mem_121960 = realloc(mem_121960, bytes_121958);
        mem_121960_cached_sizze_131067 = bytes_121958;
    }
    
    int64_t binop_y_121919 = (int64_t) 8 * n_114518;
    int64_t bytes_121918 = smax64((int64_t) 0, binop_y_121919);
    int64_t flat_tid_116745 = (int64_t) 0;
    int32_t num_tasks_123831;
    int64_t flat_tid_116747 = (int64_t) 0;
    struct futhark_mc_task_131088 futhark_mc_task_131088;
    
    futhark_mc_task_131088.ctx = ctx;
    futhark_mc_task_131088.free_m_114517 = m_114517;
    futhark_mc_task_131088.free_n_114518 = n_114518;
    futhark_mc_task_131088.free_i_114594 = i_114594;
    futhark_mc_task_131088.free_Y_mem_121917 = Y_mem_121917.mem;
    futhark_mc_task_131088.free_bytes_121918 = bytes_121918;
    futhark_mc_task_131088.free_mem_121957 = mem_121957;
    futhark_mc_task_131088.free_mem_121960 = mem_121960;
    
    struct scheduler_segop futhark_mc_task_131088_task;
    
    futhark_mc_task_131088_task.args = &futhark_mc_task_131088;
    futhark_mc_task_131088_task.top_level_fn = futhark_mc_segmap_task_131089;
    futhark_mc_task_131088_task.name = "futhark_mc_segmap_task_131089";
    futhark_mc_task_131088_task.iterations = m_114517;
    futhark_mc_task_131088_task.task_time =
        &ctx->futhark_mc_segmap_task_131089_total_time;
    futhark_mc_task_131088_task.task_iter =
        &ctx->futhark_mc_segmap_task_131089_total_iter;
    futhark_mc_task_131088_task.sched = STATIC;
    futhark_mc_task_131088_task.nested_fn =
        futhark_mc_segmap_nested_task_131094;
    
    int futhark_mc_segmap_task_131089_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131088_task);
    
    if (futhark_mc_segmap_task_131089_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_121981 = (int64_t) 4 * binop_x_121955;
    int64_t bytes_121979 = smax64((int64_t) 0, binop_y_121981);
    
    if (mem_121982_cached_sizze_131068 < (size_t) bytes_121979) {
        mem_121982 = realloc(mem_121982, bytes_121979);
        mem_121982_cached_sizze_131068 = bytes_121979;
    }
    
    int64_t binop_y_121962 = (int64_t) 4 * n_114518;
    int64_t bytes_121961 = smax64((int64_t) 0, binop_y_121962);
    int64_t flat_tid_116772 = (int64_t) 0;
    int32_t num_tasks_123894;
    int64_t flat_tid_116774 = (int64_t) 0;
    struct futhark_mc_task_131110 futhark_mc_task_131110;
    
    futhark_mc_task_131110.ctx = ctx;
    futhark_mc_task_131110.free_m_114517 = m_114517;
    futhark_mc_task_131110.free_n_114518 = n_114518;
    futhark_mc_task_131110.free_mem_121957 = mem_121957;
    futhark_mc_task_131110.free_bytes_121961 = bytes_121961;
    futhark_mc_task_131110.free_mem_121982 = mem_121982;
    
    struct scheduler_segop futhark_mc_task_131110_task;
    
    futhark_mc_task_131110_task.args = &futhark_mc_task_131110;
    futhark_mc_task_131110_task.top_level_fn = futhark_mc_segmap_task_131111;
    futhark_mc_task_131110_task.name = "futhark_mc_segmap_task_131111";
    futhark_mc_task_131110_task.iterations = m_114517;
    futhark_mc_task_131110_task.task_time =
        &ctx->futhark_mc_segmap_task_131111_total_time;
    futhark_mc_task_131110_task.task_iter =
        &ctx->futhark_mc_segmap_task_131111_total_iter;
    futhark_mc_task_131110_task.sched = STATIC;
    futhark_mc_task_131110_task.nested_fn =
        futhark_mc_segmap_nested_task_131115;
    
    int futhark_mc_segmap_task_131111_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131110_task);
    
    if (futhark_mc_segmap_task_131111_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_114629 = slt64(n_p_114520, (int64_t) 0);
    bool valid_114630 = !bounds_invalid_upwards_114629;
    bool range_valid_c_114631;
    
    if (!valid_114630) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_114520, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:134:5-144:14\n   #3  stl.fut:394:3-405:33\n   #4  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_114633 = slt64(css_chunk_len_114564,
                                               (int64_t) 0);
    bool valid_114634 = !bounds_invalid_upwards_114633;
    bool range_valid_c_114635;
    
    if (!valid_114634) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) css_chunk_len_114564, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:137:16-143:39\n   #3  /prelude/soacs.fut:59:3-10\n   #4  /prelude/array.fut:195:3-17\n   #5  stl.fut:134:5-144:14\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_122002 = n_p_114520 * css_chunk_len_114564;
    int64_t binop_y_122003 = (int64_t) 8 * binop_x_122002;
    int64_t bytes_122001 = smax64((int64_t) 0, binop_y_122003);
    
    if (mem_122004_cached_sizze_131069 < (size_t) bytes_122001) {
        mem_122004 = realloc(mem_122004, bytes_122001);
        mem_122004_cached_sizze_131069 = bytes_122001;
    }
    
    int64_t binop_y_121984 = (int64_t) 8 * css_chunk_len_114564;
    int64_t bytes_121983 = smax64((int64_t) 0, binop_y_121984);
    int64_t flat_tid_116782 = (int64_t) 0;
    int32_t num_tasks_123913;
    int64_t flat_tid_116784 = (int64_t) 0;
    struct futhark_mc_task_131123 futhark_mc_task_131123;
    
    futhark_mc_task_131123.ctx = ctx;
    futhark_mc_task_131123.free_n_p_114520 = n_p_114520;
    futhark_mc_task_131123.free_css_chunk_len_114564 = css_chunk_len_114564;
    futhark_mc_task_131123.free_i_114594 = i_114594;
    futhark_mc_task_131123.free_bytes_121983 = bytes_121983;
    futhark_mc_task_131123.free_mem_122004 = mem_122004;
    
    struct scheduler_segop futhark_mc_task_131123_task;
    
    futhark_mc_task_131123_task.args = &futhark_mc_task_131123;
    futhark_mc_task_131123_task.top_level_fn = futhark_mc_segmap_task_131124;
    futhark_mc_task_131123_task.name = "futhark_mc_segmap_task_131124";
    futhark_mc_task_131123_task.iterations = n_p_114520;
    futhark_mc_task_131123_task.task_time =
        &ctx->futhark_mc_segmap_task_131124_total_time;
    futhark_mc_task_131123_task.task_iter =
        &ctx->futhark_mc_segmap_task_131124_total_iter;
    futhark_mc_task_131123_task.sched = STATIC;
    futhark_mc_task_131123_task.nested_fn =
        futhark_mc_segmap_nested_task_131128;
    
    int futhark_mc_segmap_task_131124_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131123_task);
    
    if (futhark_mc_segmap_task_131124_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_x_122024 = m_114517 * n_p_114520;
    int64_t binop_y_122025 = (int64_t) 4 * binop_x_122024;
    int64_t bytes_122023 = smax64((int64_t) 0, binop_y_122025);
    
    if (mem_122026_cached_sizze_131070 < (size_t) bytes_122023) {
        mem_122026 = realloc(mem_122026, bytes_122023);
        mem_122026_cached_sizze_131070 = bytes_122023;
    }
    
    int64_t binop_y_122006 = (int64_t) 4 * n_p_114520;
    int64_t bytes_122005 = smax64((int64_t) 0, binop_y_122006);
    int64_t flat_tid_116795 = (int64_t) 0;
    int32_t num_tasks_123936;
    int64_t flat_tid_116797 = (int64_t) 0;
    struct futhark_mc_task_131136 futhark_mc_task_131136;
    
    futhark_mc_task_131136.ctx = ctx;
    futhark_mc_task_131136.free_m_114517 = m_114517;
    futhark_mc_task_131136.free_n_114518 = n_114518;
    futhark_mc_task_131136.free_n_p_114520 = n_p_114520;
    futhark_mc_task_131136.free_css_chunk_len_114564 = css_chunk_len_114564;
    futhark_mc_task_131136.free_Y_mem_121917 = Y_mem_121917.mem;
    futhark_mc_task_131136.free_mem_122004 = mem_122004;
    futhark_mc_task_131136.free_bytes_122005 = bytes_122005;
    futhark_mc_task_131136.free_mem_122026 = mem_122026;
    
    struct scheduler_segop futhark_mc_task_131136_task;
    
    futhark_mc_task_131136_task.args = &futhark_mc_task_131136;
    futhark_mc_task_131136_task.top_level_fn = futhark_mc_segmap_task_131137;
    futhark_mc_task_131136_task.name = "futhark_mc_segmap_task_131137";
    futhark_mc_task_131136_task.iterations = m_114517;
    futhark_mc_task_131136_task.task_time =
        &ctx->futhark_mc_segmap_task_131137_total_time;
    futhark_mc_task_131136_task.task_iter =
        &ctx->futhark_mc_segmap_task_131137_total_iter;
    futhark_mc_task_131136_task.sched = STATIC;
    futhark_mc_task_131136_task.nested_fn =
        futhark_mc_segmap_nested_task_131141;
    
    int futhark_mc_segmap_task_131137_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131136_task);
    
    if (futhark_mc_segmap_task_131137_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_114666 = smin64(n_114518, l_window_114522);
    bool bounds_invalid_upwards_114667 = slt64(l_n_m_114568, (int64_t) 0);
    bool valid_114668 = !bounds_invalid_upwards_114667;
    bool range_valid_c_114669;
    
    if (!valid_114668) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_114568, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:335:3-373:7\n   #3  loess.fut:400:15-58\n   #4  stl.fut:166:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:164:5-167:26\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_114671 = min_res_114666 == (int64_t) 0;
    int64_t m_114672 = sub64(min_res_114666, (int64_t) 1);
    float i64_res_114673 = sitofp_i64_f32(l_window_114522);
    int64_t binop_x_122100 = m_114517 * l_n_m_114568;
    int64_t binop_y_122101 = (int64_t) 8 * binop_x_122100;
    int64_t bytes_122099 = smax64((int64_t) 0, binop_y_122101);
    
    if (mem_122102_cached_sizze_131071 < (size_t) bytes_122099) {
        mem_122102 = realloc(mem_122102, bytes_122099);
        mem_122102_cached_sizze_131071 = bytes_122099;
    }
    
    int64_t binop_y_122105 = (int64_t) 4 * binop_x_122100;
    int64_t bytes_122103 = smax64((int64_t) 0, binop_y_122105);
    
    if (mem_122106_cached_sizze_131072 < (size_t) bytes_122103) {
        mem_122106 = realloc(mem_122106, bytes_122103);
        mem_122106_cached_sizze_131072 = bytes_122103;
    }
    
    int64_t binop_y_122034 = (int64_t) 4 * l_n_m_114568;
    int64_t bytes_122033 = smax64((int64_t) 0, binop_y_122034);
    int64_t binop_y_122037 = (int64_t) 8 * l_n_m_114568;
    int64_t bytes_122036 = smax64((int64_t) 0, binop_y_122037);
    int64_t flat_tid_116855 = (int64_t) 0;
    int32_t num_tasks_124034;
    int64_t flat_tid_116857 = (int64_t) 0;
    struct futhark_mc_task_131157 futhark_mc_task_131157;
    
    futhark_mc_task_131157.ctx = ctx;
    futhark_mc_task_131157.free_m_114517 = m_114517;
    futhark_mc_task_131157.free_n_114518 = n_114518;
    futhark_mc_task_131157.free_l_jump_114526 = l_jump_114526;
    futhark_mc_task_131157.free_l_n_m_114568 = l_n_m_114568;
    futhark_mc_task_131157.free_i_114594 = i_114594;
    futhark_mc_task_131157.free_x_114595 = x_114595;
    futhark_mc_task_131157.free_min_res_114666 = min_res_114666;
    futhark_mc_task_131157.free_empty_slice_114671 = empty_slice_114671;
    futhark_mc_task_131157.free_m_114672 = m_114672;
    futhark_mc_task_131157.free_i64_res_114673 = i64_res_114673;
    futhark_mc_task_131157.free_bytes_121918 = bytes_121918;
    futhark_mc_task_131157.free_mem_121957 = mem_121957;
    futhark_mc_task_131157.free_mem_121960 = mem_121960;
    futhark_mc_task_131157.free_bytes_122033 = bytes_122033;
    futhark_mc_task_131157.free_bytes_122036 = bytes_122036;
    futhark_mc_task_131157.free_mem_122102 = mem_122102;
    futhark_mc_task_131157.free_mem_122106 = mem_122106;
    
    struct scheduler_segop futhark_mc_task_131157_task;
    
    futhark_mc_task_131157_task.args = &futhark_mc_task_131157;
    futhark_mc_task_131157_task.top_level_fn = futhark_mc_segmap_task_131158;
    futhark_mc_task_131157_task.name = "futhark_mc_segmap_task_131158";
    futhark_mc_task_131157_task.iterations = m_114517;
    futhark_mc_task_131157_task.task_time =
        &ctx->futhark_mc_segmap_task_131158_total_time;
    futhark_mc_task_131157_task.task_iter =
        &ctx->futhark_mc_segmap_task_131158_total_iter;
    futhark_mc_task_131157_task.sched = DYNAMIC;
    futhark_mc_task_131157_task.nested_fn =
        futhark_mc_segmap_nested_task_131165;
    
    int futhark_mc_segmap_task_131158_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131157_task);
    
    if (futhark_mc_segmap_task_131158_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_114792 = smin64(n_114518, t_window_114521);
    bool bounds_invalid_upwards_114793 = slt64(t_n_m_114575, (int64_t) 0);
    bool valid_114794 = !bounds_invalid_upwards_114793;
    bool range_valid_c_114795;
    
    if (!valid_114794) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_114575, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:335:3-373:7\n   #3  loess.fut:400:15-58\n   #4  stl.fut:173:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:171:5-174:26\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_114797 = min_res_114792 == (int64_t) 0;
    int64_t m_114798 = sub64(min_res_114792, (int64_t) 1);
    float i64_res_114799 = sitofp_i64_f32(t_window_114521);
    int64_t binop_x_122180 = m_114517 * t_n_m_114575;
    int64_t binop_y_122181 = (int64_t) 8 * binop_x_122180;
    int64_t bytes_122179 = smax64((int64_t) 0, binop_y_122181);
    
    if (mem_122182_cached_sizze_131073 < (size_t) bytes_122179) {
        mem_122182 = realloc(mem_122182, bytes_122179);
        mem_122182_cached_sizze_131073 = bytes_122179;
    }
    
    int64_t binop_y_122185 = (int64_t) 4 * binop_x_122180;
    int64_t bytes_122183 = smax64((int64_t) 0, binop_y_122185);
    
    if (mem_122186_cached_sizze_131074 < (size_t) bytes_122183) {
        mem_122186 = realloc(mem_122186, bytes_122183);
        mem_122186_cached_sizze_131074 = bytes_122183;
    }
    
    int64_t binop_y_122114 = (int64_t) 4 * t_n_m_114575;
    int64_t bytes_122113 = smax64((int64_t) 0, binop_y_122114);
    int64_t binop_y_122117 = (int64_t) 8 * t_n_m_114575;
    int64_t bytes_122116 = smax64((int64_t) 0, binop_y_122117);
    int64_t flat_tid_117179 = (int64_t) 0;
    int32_t num_tasks_124506;
    int64_t flat_tid_117181 = (int64_t) 0;
    struct futhark_mc_task_131188 futhark_mc_task_131188;
    
    futhark_mc_task_131188.ctx = ctx;
    futhark_mc_task_131188.free_m_114517 = m_114517;
    futhark_mc_task_131188.free_n_114518 = n_114518;
    futhark_mc_task_131188.free_t_jump_114525 = t_jump_114525;
    futhark_mc_task_131188.free_t_n_m_114575 = t_n_m_114575;
    futhark_mc_task_131188.free_i_114594 = i_114594;
    futhark_mc_task_131188.free_x_114595 = x_114595;
    futhark_mc_task_131188.free_min_res_114792 = min_res_114792;
    futhark_mc_task_131188.free_empty_slice_114797 = empty_slice_114797;
    futhark_mc_task_131188.free_m_114798 = m_114798;
    futhark_mc_task_131188.free_i64_res_114799 = i64_res_114799;
    futhark_mc_task_131188.free_bytes_121918 = bytes_121918;
    futhark_mc_task_131188.free_mem_121957 = mem_121957;
    futhark_mc_task_131188.free_mem_121960 = mem_121960;
    futhark_mc_task_131188.free_bytes_122113 = bytes_122113;
    futhark_mc_task_131188.free_bytes_122116 = bytes_122116;
    futhark_mc_task_131188.free_mem_122182 = mem_122182;
    futhark_mc_task_131188.free_mem_122186 = mem_122186;
    
    struct scheduler_segop futhark_mc_task_131188_task;
    
    futhark_mc_task_131188_task.args = &futhark_mc_task_131188;
    futhark_mc_task_131188_task.top_level_fn = futhark_mc_segmap_task_131189;
    futhark_mc_task_131188_task.name = "futhark_mc_segmap_task_131189";
    futhark_mc_task_131188_task.iterations = m_114517;
    futhark_mc_task_131188_task.task_time =
        &ctx->futhark_mc_segmap_task_131189_total_time;
    futhark_mc_task_131188_task.task_iter =
        &ctx->futhark_mc_segmap_task_131189_total_iter;
    futhark_mc_task_131188_task.sched = DYNAMIC;
    futhark_mc_task_131188_task.nested_fn =
        futhark_mc_segmap_nested_task_131196;
    
    int futhark_mc_segmap_task_131189_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131188_task);
    
    if (futhark_mc_segmap_task_131189_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_122190;
    
    mem_122190.references = NULL;
    if (memblock_alloc(ctx, &mem_122190, bytes_121979, "mem_122190")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_124978 = 0; i_124978 < m_114517; i_124978++) {
        for (int64_t i_124979 = 0; i_124979 < n_114518; i_124979++) {
            ((float *) mem_122190.mem)[i_124978 * n_114518 + i_124979] = 0.0F;
        }
    }
    
    struct memblock mem_122194;
    
    mem_122194.references = NULL;
    if (memblock_alloc(ctx, &mem_122194, bytes_121979, "mem_122194")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_124980 = 0; i_124980 < m_114517; i_124980++) {
        for (int64_t i_124981 = 0; i_124981 < n_114518; i_124981++) {
            ((float *) mem_122194.mem)[i_124980 * n_114518 + i_124981] = 1.0F;
        }
    }
    
    bool cond_114920 = slt64((int64_t) 1, l_jump_114526);
    bool cond_114921 = slt64((int64_t) 1, t_jump_114525);
    int64_t y_114922 = sub64(outer_114528, (int64_t) 1);
    bool loop_nonempty_114923 = slt64((int64_t) 0, outer_114528);
    bool bounds_invalid_upwards_114924 = slt64(C_len_114566, (int64_t) 0);
    bool valid_114925 = !bounds_invalid_upwards_114924;
    bool loop_not_taken_114926 = !assert_cond_114555;
    bool protect_assert_disj_114927 = valid_114925 || loop_not_taken_114926;
    bool loop_not_taken_114928 = !loop_nonempty_114923;
    bool protect_assert_disj_114929 = protect_assert_disj_114927 ||
         loop_not_taken_114928;
    bool range_valid_c_114930;
    
    if (!protect_assert_disj_114929) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_114566, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:217:21-60\n   #3  stl.fut:215:13-218:24\n   #4  stl.fut:394:3-405:33\n   #5  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool zzero_114932 = n_p_114520 == (int64_t) 0;
    bool nonzzero_114933 = !zzero_114932;
    bool protect_assert_disj_114934 = loop_not_taken_114926 || nonzzero_114933;
    bool protect_assert_disj_114935 = loop_not_taken_114928 ||
         protect_assert_disj_114934;
    bool nonzzero_cert_114936;
    
    if (!protect_assert_disj_114935) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:217:52-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:217:21-60\n   #4  stl.fut:215:13-218:24\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_114937 = add64(n_114518, n_p_114520);
    int64_t lifted_single_ma_arg_114938 = add64((int64_t) 1, x_114937);
    int64_t m_114939 = sub64(n_p_114520, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_114940 = sle64((int64_t) 0, m_114939);
    bool i_p_m_t_s_leq_w_114941 = slt64(m_114939, C_len_114566);
    bool i_lte_j_114942 = sle64((int64_t) 0, n_p_114520);
    bool y_114943 = zzero_leq_i_p_m_t_s_114940 && i_p_m_t_s_leq_w_114941;
    bool y_114944 = i_lte_j_114942 && y_114943;
    bool ok_or_empty_114945 = zzero_114932 || y_114944;
    bool protect_assert_disj_114946 = loop_not_taken_114926 ||
         ok_or_empty_114945;
    bool protect_assert_disj_114947 = loop_not_taken_114928 ||
         protect_assert_disj_114946;
    bool index_certs_114948;
    
    if (!protect_assert_disj_114947) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_114520,
                               "] out of bounds for array of shape [",
                               (long long) C_len_114566, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  stl.fut:43:3-32\n   #2  stl.fut:223:30-50\n   #3  stl.fut:222:23-224:31\n   #4  stl.fut:394:3-405:33\n   #5  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_114949 = slt64(lifted_single_ma_arg_114938,
                                               (int64_t) 0);
    bool valid_114950 = !bounds_invalid_upwards_114949;
    bool protect_assert_disj_114951 = loop_not_taken_114926 || valid_114950;
    bool protect_assert_disj_114952 = loop_not_taken_114928 ||
         protect_assert_disj_114951;
    bool range_valid_c_114953;
    
    if (!protect_assert_disj_114952) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_114938,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  stl.fut:43:3-32\n   #4  stl.fut:223:30-50\n   #5  stl.fut:222:23-224:31\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t lifted_single_ma_arg_114955 = add64((int64_t) 2, n_114518);
    bool i_p_m_t_s_leq_w_114956 = slt64(m_114939, lifted_single_ma_arg_114938);
    bool y_114957 = zzero_leq_i_p_m_t_s_114940 && i_p_m_t_s_leq_w_114956;
    bool y_114958 = i_lte_j_114942 && y_114957;
    bool ok_or_empty_114959 = zzero_114932 || y_114958;
    bool protect_assert_disj_114960 = loop_not_taken_114926 ||
         ok_or_empty_114959;
    bool protect_assert_disj_114961 = loop_not_taken_114928 ||
         protect_assert_disj_114960;
    bool index_certs_114962;
    
    if (!protect_assert_disj_114961) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_114520,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_114938, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-58\n   #3  stl.fut:223:30-50\n   #4  stl.fut:222:23-224:31\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_114963 = slt64(lifted_single_ma_arg_114955,
                                               (int64_t) 0);
    bool valid_114964 = !bounds_invalid_upwards_114963;
    bool protect_assert_disj_114965 = loop_not_taken_114926 || valid_114964;
    bool protect_assert_disj_114966 = loop_not_taken_114928 ||
         protect_assert_disj_114965;
    bool range_valid_c_114967;
    
    if (!protect_assert_disj_114966) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_114955,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  /prelude/functional.fut:9:42-44\n   #4  stl.fut:43:3-58\n   #5  stl.fut:223:30-50\n   #6  stl.fut:222:23-224:31\n   #7  stl.fut:394:3-405:33\n   #8  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool i_p_m_t_s_leq_w_114969 = slt64((int64_t) 2,
                                        lifted_single_ma_arg_114955);
    bool protect_assert_disj_114970 = loop_not_taken_114926 ||
         i_p_m_t_s_leq_w_114969;
    bool protect_assert_disj_114971 = loop_not_taken_114928 ||
         protect_assert_disj_114970;
    bool index_certs_114972;
    
    if (!protect_assert_disj_114971) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_114955, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-76\n   #3  stl.fut:223:30-50\n   #4  stl.fut:222:23-224:31\n   #5  stl.fut:394:3-405:33\n   #6  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_114973 = n_114518 == (int64_t) 0;
    int64_t i_p_m_t_s_114974 = add64(n_p_114520, i_114594);
    bool zzero_leq_i_p_m_t_s_114975 = sle64((int64_t) 0, i_p_m_t_s_114974);
    bool i_p_m_t_s_leq_w_114976 = slt64(i_p_m_t_s_114974, C_len_114566);
    bool i_lte_j_114977 = sle64(n_p_114520, x_114937);
    bool y_114978 = i_lte_j_114942 && i_p_m_t_s_leq_w_114976;
    bool y_114979 = zzero_leq_i_p_m_t_s_114975 && y_114978;
    bool y_114980 = i_lte_j_114977 && y_114979;
    bool forwards_ok_114981 = i_lte_j_114942 && y_114980;
    bool ok_or_empty_114982 = empty_slice_114973 || forwards_ok_114981;
    bool protect_assert_disj_114983 = loop_not_taken_114926 ||
         ok_or_empty_114982;
    bool protect_assert_disj_114984 = loop_not_taken_114928 ||
         protect_assert_disj_114983;
    bool index_certs_114985;
    
    if (!protect_assert_disj_114984) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_114520, ":",
                               (long long) x_114937,
                               "] out of bounds for array of shape [",
                               (long long) C_len_114566, "].",
                               "-> #0  stl.fut:262:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:260:13-265:26\n   #4  stl.fut:394:3-405:33\n   #5  stl.fut:381:1-405:33\n");
        if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
            return 1;
        return 1;
    }
    
    int64_t j_m_i_114986 = sub64(stl_res_114589, stl_res_114588);
    bool cond_114987 = slt64(l_jump_114526, jump_threshold_114529);
    bool cond_f_res_114988 = slt64(max_group_sizze_114530, l_window_114522);
    bool x_114989 = !cond_114987;
    bool y_114990 = cond_f_res_114988 && x_114989;
    bool cond_114991 = cond_114987 || y_114990;
    bool cond_114992 = slt64(t_jump_114525, jump_threshold_114529);
    bool cond_f_res_114993 = slt64(max_group_sizze_114530, t_window_114521);
    bool x_114994 = !cond_114992;
    bool y_114995 = cond_f_res_114993 && x_114994;
    bool cond_114996 = cond_114992 || y_114995;
    
    if (mem_122262_cached_sizze_131075 < (size_t) bytes_121979) {
        mem_122262 = realloc(mem_122262, bytes_121979);
        mem_122262_cached_sizze_131075 = bytes_121979;
    }
    if (mem_122284_cached_sizze_131076 < (size_t) bytes_122023) {
        mem_122284 = realloc(mem_122284, bytes_122023);
        mem_122284_cached_sizze_131076 = bytes_122023;
    }
    
    int64_t binop_x_122304 = m_114517 * C_len_114566;
    int64_t binop_y_122305 = (int64_t) 4 * binop_x_122304;
    int64_t bytes_122303 = smax64((int64_t) 0, binop_y_122305);
    
    if (mem_122306_cached_sizze_131077 < (size_t) bytes_122303) {
        mem_122306 = realloc(mem_122306, bytes_122303);
        mem_122306_cached_sizze_131077 = bytes_122303;
    }
    
    int64_t binop_y_122286 = (int64_t) 4 * C_len_114566;
    int64_t bytes_122285 = smax64((int64_t) 0, binop_y_122286);
    
    if (mem_122364_cached_sizze_131078 < (size_t) bytes_121979) {
        mem_122364 = realloc(mem_122364, bytes_121979);
        mem_122364_cached_sizze_131078 = bytes_121979;
    }
    
    int64_t binop_y_122308 = (int64_t) 4 * lifted_single_ma_arg_114938;
    int64_t bytes_122307 = smax64((int64_t) 0, binop_y_122308);
    int64_t binop_y_122311 = (int64_t) 4 * lifted_single_ma_arg_114955;
    int64_t bytes_122310 = smax64((int64_t) 0, binop_y_122311);
    
    if (mem_122404_cached_sizze_131079 < (size_t) bytes_121979) {
        mem_122404 = realloc(mem_122404, bytes_121979);
        mem_122404_cached_sizze_131079 = bytes_121979;
    }
    if (mem_122408_cached_sizze_131080 < (size_t) bytes_121979) {
        mem_122408 = realloc(mem_122408, bytes_121979);
        mem_122408_cached_sizze_131080 = bytes_121979;
    }
    
    int64_t ext_122901;
    
    if (cond_114920) {
        ext_122901 = n_114518;
    } else {
        ext_122901 = l_n_m_114568;
    }
    if (mem_122959_cached_sizze_131081 < (size_t) bytes_121979) {
        mem_122959 = realloc(mem_122959, bytes_121979);
        mem_122959_cached_sizze_131081 = bytes_121979;
    }
    
    int64_t ext_123456;
    
    if (cond_114921) {
        ext_123456 = n_114518;
    } else {
        ext_123456 = t_n_m_114575;
    }
    
    int64_t ext_123727;
    int64_t ext_123725;
    int64_t ext_123721;
    int64_t ext_123720;
    int64_t ext_123719;
    int64_t ext_123718;
    int64_t ext_123716;
    int64_t ext_123715;
    struct memblock ext_mem_123714;
    
    ext_mem_123714.references = NULL;
    
    struct memblock ext_mem_123713;
    
    ext_mem_123713.references = NULL;
    
    struct memblock ext_mem_123712;
    
    ext_mem_123712.references = NULL;
    
    int64_t stl_res_114997;
    int64_t loopz2081Uz2085Uz2089U_115002;
    struct memblock mem_param_122202;
    
    mem_param_122202.references = NULL;
    
    int64_t ctx_param_ext_122204;
    int64_t ctx_param_ext_122206;
    struct memblock mem_param_122210;
    
    mem_param_122210.references = NULL;
    
    int64_t ctx_param_ext_122211;
    int64_t ctx_param_ext_122212;
    int64_t ctx_param_ext_122213;
    int64_t ctx_param_ext_122214;
    int64_t ctx_param_ext_122216;
    int64_t ctx_param_ext_122217;
    struct memblock mem_param_122218;
    
    mem_param_122218.references = NULL;
    ctx_param_ext_122204 = n_114518;
    ctx_param_ext_122206 = n_114518;
    ctx_param_ext_122211 = m_114517;
    ctx_param_ext_122212 = n_114518;
    ctx_param_ext_122213 = (int64_t) 0;
    ctx_param_ext_122214 = n_114518;
    ctx_param_ext_122216 = (int64_t) 1;
    ctx_param_ext_122217 = n_114518;
    if (memblock_set(ctx, &mem_param_122202, &mem_122190, "mem_122190") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_122210, &mem_122190, "mem_122190") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_122218, &mem_122194, "mem_122194") != 0)
        return 1;
    loopz2081Uz2085Uz2089U_115002 = n_114518;
    for (int64_t i_outer_115001 = 0; i_outer_115001 < outer_114528;
         i_outer_115001++) {
        int64_t ext_123468;
        int64_t ext_123466;
        struct memblock ext_mem_123462;
        
        ext_mem_123462.references = NULL;
        
        struct memblock ext_mem_123461;
        
        ext_mem_123461.references = NULL;
        
        struct memblock mem_param_122232;
        
        mem_param_122232.references = NULL;
        
        int64_t ctx_param_ext_122234;
        int64_t ctx_param_ext_122236;
        struct memblock mem_param_122240;
        
        mem_param_122240.references = NULL;
        ctx_param_ext_122234 = ctx_param_ext_122204;
        ctx_param_ext_122236 = ctx_param_ext_122206;
        if (memblock_set(ctx, &mem_param_122232, &mem_param_122202,
                         "mem_param_122202") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_122240, &mem_param_122210,
                         "mem_param_122210") != 0)
            return 1;
        for (int64_t _i_inner_115008 = 0; _i_inner_115008 < inner_114527;
             _i_inner_115008++) {
            int64_t flat_tid_117503 = (int64_t) 0;
            int32_t num_tasks_125003;
            int64_t flat_tid_117505 = (int64_t) 0;
            struct futhark_mc_task_131219 futhark_mc_task_131219;
            
            futhark_mc_task_131219.ctx = ctx;
            futhark_mc_task_131219.free_m_114517 = m_114517;
            futhark_mc_task_131219.free_n_114518 = n_114518;
            futhark_mc_task_131219.free_Y_mem_121917 = Y_mem_121917.mem;
            futhark_mc_task_131219.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131219.free_ctx_param_ext_122236 =
                ctx_param_ext_122236;
            futhark_mc_task_131219.free_mem_param_122240 = mem_param_122240.mem;
            futhark_mc_task_131219.free_mem_122262 = mem_122262;
            
            struct scheduler_segop futhark_mc_task_131219_task;
            
            futhark_mc_task_131219_task.args = &futhark_mc_task_131219;
            futhark_mc_task_131219_task.top_level_fn =
                futhark_mc_segmap_task_131220;
            futhark_mc_task_131219_task.name = "futhark_mc_segmap_task_131220";
            futhark_mc_task_131219_task.iterations = m_114517;
            futhark_mc_task_131219_task.task_time =
                &ctx->futhark_mc_segmap_task_131220_total_time;
            futhark_mc_task_131219_task.task_iter =
                &ctx->futhark_mc_segmap_task_131220_total_iter;
            futhark_mc_task_131219_task.sched = STATIC;
            futhark_mc_task_131219_task.nested_fn =
                futhark_mc_segmap_nested_task_131224;
            
            int futhark_mc_segmap_task_131220_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131219_task);
            
            if (futhark_mc_segmap_task_131220_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117515 = (int64_t) 0;
            int32_t num_tasks_125024;
            int64_t flat_tid_117517 = (int64_t) 0;
            struct futhark_mc_task_131232 futhark_mc_task_131232;
            
            futhark_mc_task_131232.ctx = ctx;
            futhark_mc_task_131232.free_m_114517 = m_114517;
            futhark_mc_task_131232.free_n_114518 = n_114518;
            futhark_mc_task_131232.free_n_p_114520 = n_p_114520;
            futhark_mc_task_131232.free_css_chunk_len_114564 =
                css_chunk_len_114564;
            futhark_mc_task_131232.free_mem_122004 = mem_122004;
            futhark_mc_task_131232.free_bytes_122005 = bytes_122005;
            futhark_mc_task_131232.free_mem_122026 = mem_122026;
            futhark_mc_task_131232.free_mem_122262 = mem_122262;
            futhark_mc_task_131232.free_mem_122284 = mem_122284;
            
            struct scheduler_segop futhark_mc_task_131232_task;
            
            futhark_mc_task_131232_task.args = &futhark_mc_task_131232;
            futhark_mc_task_131232_task.top_level_fn =
                futhark_mc_segmap_task_131233;
            futhark_mc_task_131232_task.name = "futhark_mc_segmap_task_131233";
            futhark_mc_task_131232_task.iterations = m_114517;
            futhark_mc_task_131232_task.task_time =
                &ctx->futhark_mc_segmap_task_131233_total_time;
            futhark_mc_task_131232_task.task_iter =
                &ctx->futhark_mc_segmap_task_131233_total_iter;
            futhark_mc_task_131232_task.sched = STATIC;
            futhark_mc_task_131232_task.nested_fn =
                futhark_mc_segmap_nested_task_131237;
            
            int futhark_mc_segmap_task_131233_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131232_task);
            
            if (futhark_mc_segmap_task_131233_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117576 = (int64_t) 0;
            int32_t num_tasks_125122;
            int64_t flat_tid_117578 = (int64_t) 0;
            struct futhark_mc_task_131253 futhark_mc_task_131253;
            
            futhark_mc_task_131253.ctx = ctx;
            futhark_mc_task_131253.free_m_114517 = m_114517;
            futhark_mc_task_131253.free_n_p_114520 = n_p_114520;
            futhark_mc_task_131253.free_C_len_114566 = C_len_114566;
            futhark_mc_task_131253.free_mem_122284 = mem_122284;
            futhark_mc_task_131253.free_bytes_122285 = bytes_122285;
            futhark_mc_task_131253.free_mem_122306 = mem_122306;
            
            struct scheduler_segop futhark_mc_task_131253_task;
            
            futhark_mc_task_131253_task.args = &futhark_mc_task_131253;
            futhark_mc_task_131253_task.top_level_fn =
                futhark_mc_segmap_task_131254;
            futhark_mc_task_131253_task.name = "futhark_mc_segmap_task_131254";
            futhark_mc_task_131253_task.iterations = m_114517;
            futhark_mc_task_131253_task.task_time =
                &ctx->futhark_mc_segmap_task_131254_total_time;
            futhark_mc_task_131253_task.task_iter =
                &ctx->futhark_mc_segmap_task_131254_total_iter;
            futhark_mc_task_131253_task.sched = STATIC;
            futhark_mc_task_131253_task.nested_fn =
                futhark_mc_segmap_nested_task_131258;
            
            int futhark_mc_segmap_task_131254_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131253_task);
            
            if (futhark_mc_segmap_task_131254_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117591 = (int64_t) 0;
            int32_t num_tasks_125149;
            int64_t flat_tid_117593 = (int64_t) 0;
            struct futhark_mc_task_131266 futhark_mc_task_131266;
            
            futhark_mc_task_131266.ctx = ctx;
            futhark_mc_task_131266.free_m_114517 = m_114517;
            futhark_mc_task_131266.free_n_114518 = n_114518;
            futhark_mc_task_131266.free_n_p_114520 = n_p_114520;
            futhark_mc_task_131266.free_i64_res_114560 = i64_res_114560;
            futhark_mc_task_131266.free_C_len_114566 = C_len_114566;
            futhark_mc_task_131266.free_lifted_single_ma_arg_114938 =
                lifted_single_ma_arg_114938;
            futhark_mc_task_131266.free_lifted_single_ma_arg_114955 =
                lifted_single_ma_arg_114955;
            futhark_mc_task_131266.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131266.free_mem_122306 = mem_122306;
            futhark_mc_task_131266.free_bytes_122307 = bytes_122307;
            futhark_mc_task_131266.free_bytes_122310 = bytes_122310;
            futhark_mc_task_131266.free_mem_122364 = mem_122364;
            
            struct scheduler_segop futhark_mc_task_131266_task;
            
            futhark_mc_task_131266_task.args = &futhark_mc_task_131266;
            futhark_mc_task_131266_task.top_level_fn =
                futhark_mc_segmap_task_131267;
            futhark_mc_task_131266_task.name = "futhark_mc_segmap_task_131267";
            futhark_mc_task_131266_task.iterations = m_114517;
            futhark_mc_task_131266_task.task_time =
                &ctx->futhark_mc_segmap_task_131267_total_time;
            futhark_mc_task_131266_task.task_iter =
                &ctx->futhark_mc_segmap_task_131267_total_iter;
            futhark_mc_task_131266_task.sched = STATIC;
            futhark_mc_task_131266_task.nested_fn =
                futhark_mc_segmap_nested_task_131273;
            
            int futhark_mc_segmap_task_131267_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131266_task);
            
            if (futhark_mc_segmap_task_131267_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117695 = (int64_t) 0;
            int32_t num_tasks_125391;
            int64_t flat_tid_117697 = (int64_t) 0;
            struct futhark_mc_task_131315 futhark_mc_task_131315;
            
            futhark_mc_task_131315.ctx = ctx;
            futhark_mc_task_131315.free_m_114517 = m_114517;
            futhark_mc_task_131315.free_n_114518 = n_114518;
            futhark_mc_task_131315.free_loopz2081Uz2085Uz2089U_115002 =
                loopz2081Uz2085Uz2089U_115002;
            futhark_mc_task_131315.free_mem_121957 = mem_121957;
            futhark_mc_task_131315.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131315.free_ctx_param_ext_122213 =
                ctx_param_ext_122213;
            futhark_mc_task_131315.free_ctx_param_ext_122214 =
                ctx_param_ext_122214;
            futhark_mc_task_131315.free_ctx_param_ext_122216 =
                ctx_param_ext_122216;
            futhark_mc_task_131315.free_mem_param_122218 = mem_param_122218.mem;
            futhark_mc_task_131315.free_mem_122364 = mem_122364;
            futhark_mc_task_131315.free_mem_122404 = mem_122404;
            futhark_mc_task_131315.free_mem_122408 = mem_122408;
            
            struct scheduler_segop futhark_mc_task_131315_task;
            
            futhark_mc_task_131315_task.args = &futhark_mc_task_131315;
            futhark_mc_task_131315_task.top_level_fn =
                futhark_mc_segmap_task_131316;
            futhark_mc_task_131315_task.name = "futhark_mc_segmap_task_131316";
            futhark_mc_task_131315_task.iterations = m_114517;
            futhark_mc_task_131315_task.task_time =
                &ctx->futhark_mc_segmap_task_131316_total_time;
            futhark_mc_task_131315_task.task_iter =
                &ctx->futhark_mc_segmap_task_131316_total_iter;
            futhark_mc_task_131315_task.sched = STATIC;
            futhark_mc_task_131315_task.nested_fn =
                futhark_mc_segmap_nested_task_131321;
            
            int futhark_mc_segmap_task_131316_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131315_task);
            
            if (futhark_mc_segmap_task_131316_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock ext_mem_122877;
            
            ext_mem_122877.references = NULL;
            
            struct memblock ext_mem_122876;
            
            ext_mem_122876.references = NULL;
            if (cond_114991) {
                bool match_lit_115165 = (int64_t) 0 == l_degree_114524;
                struct memblock ext_mem_122526;
                
                ext_mem_122526.references = NULL;
                
                struct memblock ext_mem_122525;
                
                ext_mem_122525.references = NULL;
                if (match_lit_115165) {
                    struct memblock mem_122412;
                    
                    mem_122412.references = NULL;
                    if (memblock_alloc(ctx, &mem_122412, bytes_122103,
                                       "mem_122412")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_125441 = 0; i_125441 < m_114517;
                         i_125441++) {
                        for (int64_t i_125442 = 0; i_125442 < l_n_m_114568;
                             i_125442++) {
                            ((float *) mem_122412.mem)[i_125441 * l_n_m_114568 +
                                                       i_125442] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_122434;
                    
                    mem_122434.references = NULL;
                    if (memblock_alloc(ctx, &mem_122434, bytes_122103,
                                       "mem_122434")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_117718 = (int64_t) 0;
                    int32_t num_tasks_125443;
                    int64_t flat_tid_117720 = (int64_t) 0;
                    struct futhark_mc_task_131330 futhark_mc_task_131330;
                    
                    futhark_mc_task_131330.ctx = ctx;
                    futhark_mc_task_131330.free_m_114517 = m_114517;
                    futhark_mc_task_131330.free_n_114518 = n_114518;
                    futhark_mc_task_131330.free_l_window_114522 =
                        l_window_114522;
                    futhark_mc_task_131330.free_t_jump_114525 = t_jump_114525;
                    futhark_mc_task_131330.free_l_n_m_114568 = l_n_m_114568;
                    futhark_mc_task_131330.free_i_114594 = i_114594;
                    futhark_mc_task_131330.free_mem_121960 = mem_121960;
                    futhark_mc_task_131330.free_mem_121982 = mem_121982;
                    futhark_mc_task_131330.free_bytes_122033 = bytes_122033;
                    futhark_mc_task_131330.free_mem_122102 = mem_122102;
                    futhark_mc_task_131330.free_mem_122106 = mem_122106;
                    futhark_mc_task_131330.free_mem_122404 = mem_122404;
                    futhark_mc_task_131330.free_mem_122408 = mem_122408;
                    futhark_mc_task_131330.free_mem_122434 = mem_122434.mem;
                    
                    struct scheduler_segop futhark_mc_task_131330_task;
                    
                    futhark_mc_task_131330_task.args = &futhark_mc_task_131330;
                    futhark_mc_task_131330_task.top_level_fn =
                        futhark_mc_segmap_task_131331;
                    futhark_mc_task_131330_task.name =
                        "futhark_mc_segmap_task_131331";
                    futhark_mc_task_131330_task.iterations = m_114517;
                    futhark_mc_task_131330_task.task_time =
                        &ctx->futhark_mc_segmap_task_131331_total_time;
                    futhark_mc_task_131330_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131331_total_iter;
                    futhark_mc_task_131330_task.sched = STATIC;
                    futhark_mc_task_131330_task.nested_fn =
                        futhark_mc_segmap_nested_task_131335;
                    
                    int futhark_mc_segmap_task_131331_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131330_task);
                    
                    if (futhark_mc_segmap_task_131331_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_122526, &mem_122434,
                                     "mem_122434") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122525, &mem_122412,
                                     "mem_122412") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122434, "mem_122434") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122412, "mem_122412") != 0)
                        return 1;
                } else {
                    bool match_lit_115236 = (int64_t) 1 == l_degree_114524;
                    struct memblock ext_mem_122524;
                    
                    ext_mem_122524.references = NULL;
                    
                    struct memblock ext_mem_122523;
                    
                    ext_mem_122523.references = NULL;
                    if (match_lit_115236) {
                        struct memblock mem_122474;
                        
                        mem_122474.references = NULL;
                        if (memblock_alloc(ctx, &mem_122474, bytes_122103,
                                           "mem_122474")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122478;
                        
                        mem_122478.references = NULL;
                        if (memblock_alloc(ctx, &mem_122478, bytes_122103,
                                           "mem_122478")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_117905 = (int64_t) 0;
                        int32_t num_tasks_125732;
                        int64_t flat_tid_117907 = (int64_t) 0;
                        struct futhark_mc_task_131356 futhark_mc_task_131356;
                        
                        futhark_mc_task_131356.ctx = ctx;
                        futhark_mc_task_131356.free_m_114517 = m_114517;
                        futhark_mc_task_131356.free_n_114518 = n_114518;
                        futhark_mc_task_131356.free_l_window_114522 =
                            l_window_114522;
                        futhark_mc_task_131356.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131356.free_l_n_m_114568 = l_n_m_114568;
                        futhark_mc_task_131356.free_i_114594 = i_114594;
                        futhark_mc_task_131356.free_mem_121960 = mem_121960;
                        futhark_mc_task_131356.free_mem_121982 = mem_121982;
                        futhark_mc_task_131356.free_bytes_122033 = bytes_122033;
                        futhark_mc_task_131356.free_mem_122102 = mem_122102;
                        futhark_mc_task_131356.free_mem_122106 = mem_122106;
                        futhark_mc_task_131356.free_mem_122404 = mem_122404;
                        futhark_mc_task_131356.free_mem_122408 = mem_122408;
                        futhark_mc_task_131356.free_mem_122474 = mem_122474.mem;
                        futhark_mc_task_131356.free_mem_122478 = mem_122478.mem;
                        
                        struct scheduler_segop futhark_mc_task_131356_task;
                        
                        futhark_mc_task_131356_task.args =
                            &futhark_mc_task_131356;
                        futhark_mc_task_131356_task.top_level_fn =
                            futhark_mc_segmap_task_131357;
                        futhark_mc_task_131356_task.name =
                            "futhark_mc_segmap_task_131357";
                        futhark_mc_task_131356_task.iterations = m_114517;
                        futhark_mc_task_131356_task.task_time =
                            &ctx->futhark_mc_segmap_task_131357_total_time;
                        futhark_mc_task_131356_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131357_total_iter;
                        futhark_mc_task_131356_task.sched = STATIC;
                        futhark_mc_task_131356_task.nested_fn =
                            futhark_mc_segmap_nested_task_131362;
                        
                        int futhark_mc_segmap_task_131357_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131356_task);
                        
                        if (futhark_mc_segmap_task_131357_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122524, &mem_122474,
                                         "mem_122474") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122523, &mem_122478,
                                         "mem_122478") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122478, "mem_122478") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122474, "mem_122474") != 0)
                            return 1;
                    } else {
                        struct memblock mem_122518;
                        
                        mem_122518.references = NULL;
                        if (memblock_alloc(ctx, &mem_122518, bytes_122103,
                                           "mem_122518")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122522;
                        
                        mem_122522.references = NULL;
                        if (memblock_alloc(ctx, &mem_122522, bytes_122103,
                                           "mem_122522")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_118177 = (int64_t) 0;
                        int32_t num_tasks_126159;
                        int64_t flat_tid_118179 = (int64_t) 0;
                        struct futhark_mc_task_131387 futhark_mc_task_131387;
                        
                        futhark_mc_task_131387.ctx = ctx;
                        futhark_mc_task_131387.free_m_114517 = m_114517;
                        futhark_mc_task_131387.free_n_114518 = n_114518;
                        futhark_mc_task_131387.free_l_window_114522 =
                            l_window_114522;
                        futhark_mc_task_131387.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131387.free_l_n_m_114568 = l_n_m_114568;
                        futhark_mc_task_131387.free_i_114594 = i_114594;
                        futhark_mc_task_131387.free_mem_121960 = mem_121960;
                        futhark_mc_task_131387.free_mem_121982 = mem_121982;
                        futhark_mc_task_131387.free_bytes_122033 = bytes_122033;
                        futhark_mc_task_131387.free_mem_122102 = mem_122102;
                        futhark_mc_task_131387.free_mem_122106 = mem_122106;
                        futhark_mc_task_131387.free_mem_122404 = mem_122404;
                        futhark_mc_task_131387.free_mem_122408 = mem_122408;
                        futhark_mc_task_131387.free_mem_122518 = mem_122518.mem;
                        futhark_mc_task_131387.free_mem_122522 = mem_122522.mem;
                        
                        struct scheduler_segop futhark_mc_task_131387_task;
                        
                        futhark_mc_task_131387_task.args =
                            &futhark_mc_task_131387;
                        futhark_mc_task_131387_task.top_level_fn =
                            futhark_mc_segmap_task_131388;
                        futhark_mc_task_131387_task.name =
                            "futhark_mc_segmap_task_131388";
                        futhark_mc_task_131387_task.iterations = m_114517;
                        futhark_mc_task_131387_task.task_time =
                            &ctx->futhark_mc_segmap_task_131388_total_time;
                        futhark_mc_task_131387_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131388_total_iter;
                        futhark_mc_task_131387_task.sched = STATIC;
                        futhark_mc_task_131387_task.nested_fn =
                            futhark_mc_segmap_nested_task_131393;
                        
                        int futhark_mc_segmap_task_131388_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131387_task);
                        
                        if (futhark_mc_segmap_task_131388_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122524, &mem_122518,
                                         "mem_122518") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122523, &mem_122522,
                                         "mem_122522") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122522, "mem_122522") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122518, "mem_122518") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_122526, &ext_mem_122524,
                                     "ext_mem_122524") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122525, &ext_mem_122523,
                                     "ext_mem_122523") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122523,
                                       "ext_mem_122523") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122524,
                                       "ext_mem_122524") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_122877, &ext_mem_122526,
                                 "ext_mem_122526") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_122876, &ext_mem_122525,
                                 "ext_mem_122525") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122525, "ext_mem_122525") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122526, "ext_mem_122526") != 0)
                    return 1;
            } else {
                bool match_lit_115465 = (int64_t) 0 == l_degree_114524;
                struct memblock ext_mem_122875;
                
                ext_mem_122875.references = NULL;
                
                struct memblock ext_mem_122874;
                
                ext_mem_122874.references = NULL;
                if (match_lit_115465) {
                    struct memblock mem_122530;
                    
                    mem_122530.references = NULL;
                    if (memblock_alloc(ctx, &mem_122530, bytes_122103,
                                       "mem_122530")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_126718 = 0; i_126718 < m_114517;
                         i_126718++) {
                        for (int64_t i_126719 = 0; i_126719 < l_n_m_114568;
                             i_126719++) {
                            ((float *) mem_122530.mem)[i_126718 * l_n_m_114568 +
                                                       i_126719] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_122585;
                    
                    mem_122585.references = NULL;
                    if (memblock_alloc(ctx, &mem_122585, bytes_122103,
                                       "mem_122585")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_122532 = (int64_t) 4 * l_window_114522;
                    int64_t bytes_122531 = smax64((int64_t) 0, binop_y_122532);
                    int64_t flat_tid_118545 = (int64_t) 0;
                    int32_t num_tasks_126720;
                    int64_t flat_tid_118547 = (int64_t) 0;
                    struct futhark_mc_task_131420 futhark_mc_task_131420;
                    
                    futhark_mc_task_131420.ctx = ctx;
                    futhark_mc_task_131420.free_m_114517 = m_114517;
                    futhark_mc_task_131420.free_n_114518 = n_114518;
                    futhark_mc_task_131420.free_l_window_114522 =
                        l_window_114522;
                    futhark_mc_task_131420.free_t_jump_114525 = t_jump_114525;
                    futhark_mc_task_131420.free_l_n_m_114568 = l_n_m_114568;
                    futhark_mc_task_131420.free_i_114594 = i_114594;
                    futhark_mc_task_131420.free_mem_121960 = mem_121960;
                    futhark_mc_task_131420.free_mem_121982 = mem_121982;
                    futhark_mc_task_131420.free_bytes_122033 = bytes_122033;
                    futhark_mc_task_131420.free_mem_122102 = mem_122102;
                    futhark_mc_task_131420.free_mem_122106 = mem_122106;
                    futhark_mc_task_131420.free_mem_122404 = mem_122404;
                    futhark_mc_task_131420.free_mem_122408 = mem_122408;
                    futhark_mc_task_131420.free_bytes_122531 = bytes_122531;
                    futhark_mc_task_131420.free_mem_122585 = mem_122585.mem;
                    
                    struct scheduler_segop futhark_mc_task_131420_task;
                    
                    futhark_mc_task_131420_task.args = &futhark_mc_task_131420;
                    futhark_mc_task_131420_task.top_level_fn =
                        futhark_mc_segmap_task_131421;
                    futhark_mc_task_131420_task.name =
                        "futhark_mc_segmap_task_131421";
                    futhark_mc_task_131420_task.iterations = m_114517;
                    futhark_mc_task_131420_task.task_time =
                        &ctx->futhark_mc_segmap_task_131421_total_time;
                    futhark_mc_task_131420_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131421_total_iter;
                    futhark_mc_task_131420_task.sched = STATIC;
                    futhark_mc_task_131420_task.nested_fn =
                        futhark_mc_segmap_nested_task_131426;
                    
                    int futhark_mc_segmap_task_131421_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131420_task);
                    
                    if (futhark_mc_segmap_task_131421_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_122875, &mem_122585,
                                     "mem_122585") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122874, &mem_122530,
                                     "mem_122530") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122585, "mem_122585") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122530, "mem_122530") != 0)
                        return 1;
                } else {
                    bool match_lit_115522 = (int64_t) 1 == l_degree_114524;
                    struct memblock ext_mem_122873;
                    
                    ext_mem_122873.references = NULL;
                    
                    struct memblock ext_mem_122872;
                    
                    ext_mem_122872.references = NULL;
                    if (match_lit_115522) {
                        struct memblock mem_122691;
                        
                        mem_122691.references = NULL;
                        if (memblock_alloc(ctx, &mem_122691, bytes_122103,
                                           "mem_122691")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122695;
                        
                        mem_122695.references = NULL;
                        if (memblock_alloc(ctx, &mem_122695, bytes_122103,
                                           "mem_122695")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_122587 = (int64_t) 4 * l_window_114522;
                        int64_t bytes_122586 = smax64((int64_t) 0,
                                                      binop_y_122587);
                        int64_t flat_tid_118690 = (int64_t) 0;
                        int32_t num_tasks_126949;
                        int64_t flat_tid_118692 = (int64_t) 0;
                        struct futhark_mc_task_131449 futhark_mc_task_131449;
                        
                        futhark_mc_task_131449.ctx = ctx;
                        futhark_mc_task_131449.free_m_114517 = m_114517;
                        futhark_mc_task_131449.free_n_114518 = n_114518;
                        futhark_mc_task_131449.free_l_window_114522 =
                            l_window_114522;
                        futhark_mc_task_131449.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131449.free_l_n_m_114568 = l_n_m_114568;
                        futhark_mc_task_131449.free_i_114594 = i_114594;
                        futhark_mc_task_131449.free_mem_121960 = mem_121960;
                        futhark_mc_task_131449.free_mem_121982 = mem_121982;
                        futhark_mc_task_131449.free_bytes_122033 = bytes_122033;
                        futhark_mc_task_131449.free_mem_122102 = mem_122102;
                        futhark_mc_task_131449.free_mem_122106 = mem_122106;
                        futhark_mc_task_131449.free_mem_122404 = mem_122404;
                        futhark_mc_task_131449.free_mem_122408 = mem_122408;
                        futhark_mc_task_131449.free_bytes_122586 = bytes_122586;
                        futhark_mc_task_131449.free_mem_122691 = mem_122691.mem;
                        futhark_mc_task_131449.free_mem_122695 = mem_122695.mem;
                        
                        struct scheduler_segop futhark_mc_task_131449_task;
                        
                        futhark_mc_task_131449_task.args =
                            &futhark_mc_task_131449;
                        futhark_mc_task_131449_task.top_level_fn =
                            futhark_mc_segmap_task_131450;
                        futhark_mc_task_131449_task.name =
                            "futhark_mc_segmap_task_131450";
                        futhark_mc_task_131449_task.iterations = m_114517;
                        futhark_mc_task_131449_task.task_time =
                            &ctx->futhark_mc_segmap_task_131450_total_time;
                        futhark_mc_task_131449_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131450_total_iter;
                        futhark_mc_task_131449_task.sched = STATIC;
                        futhark_mc_task_131449_task.nested_fn =
                            futhark_mc_segmap_nested_task_131457;
                        
                        int futhark_mc_segmap_task_131450_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131449_task);
                        
                        if (futhark_mc_segmap_task_131450_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122873, &mem_122691,
                                         "mem_122691") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122872, &mem_122695,
                                         "mem_122695") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122695, "mem_122695") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122691, "mem_122691") != 0)
                            return 1;
                    } else {
                        struct memblock mem_122867;
                        
                        mem_122867.references = NULL;
                        if (memblock_alloc(ctx, &mem_122867, bytes_122103,
                                           "mem_122867")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122871;
                        
                        mem_122871.references = NULL;
                        if (memblock_alloc(ctx, &mem_122871, bytes_122103,
                                           "mem_122871")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_122697 = (int64_t) 4 * l_window_114522;
                        int64_t bytes_122696 = smax64((int64_t) 0,
                                                      binop_y_122697);
                        int64_t flat_tid_118923 = (int64_t) 0;
                        int32_t num_tasks_127331;
                        int64_t flat_tid_118925 = (int64_t) 0;
                        struct futhark_mc_task_131486 futhark_mc_task_131486;
                        
                        futhark_mc_task_131486.ctx = ctx;
                        futhark_mc_task_131486.free_m_114517 = m_114517;
                        futhark_mc_task_131486.free_n_114518 = n_114518;
                        futhark_mc_task_131486.free_l_window_114522 =
                            l_window_114522;
                        futhark_mc_task_131486.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131486.free_l_n_m_114568 = l_n_m_114568;
                        futhark_mc_task_131486.free_i_114594 = i_114594;
                        futhark_mc_task_131486.free_mem_121960 = mem_121960;
                        futhark_mc_task_131486.free_mem_121982 = mem_121982;
                        futhark_mc_task_131486.free_bytes_122033 = bytes_122033;
                        futhark_mc_task_131486.free_mem_122102 = mem_122102;
                        futhark_mc_task_131486.free_mem_122106 = mem_122106;
                        futhark_mc_task_131486.free_mem_122404 = mem_122404;
                        futhark_mc_task_131486.free_mem_122408 = mem_122408;
                        futhark_mc_task_131486.free_bytes_122696 = bytes_122696;
                        futhark_mc_task_131486.free_mem_122867 = mem_122867.mem;
                        futhark_mc_task_131486.free_mem_122871 = mem_122871.mem;
                        
                        struct scheduler_segop futhark_mc_task_131486_task;
                        
                        futhark_mc_task_131486_task.args =
                            &futhark_mc_task_131486;
                        futhark_mc_task_131486_task.top_level_fn =
                            futhark_mc_segmap_task_131487;
                        futhark_mc_task_131486_task.name =
                            "futhark_mc_segmap_task_131487";
                        futhark_mc_task_131486_task.iterations = m_114517;
                        futhark_mc_task_131486_task.task_time =
                            &ctx->futhark_mc_segmap_task_131487_total_time;
                        futhark_mc_task_131486_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131487_total_iter;
                        futhark_mc_task_131486_task.sched = STATIC;
                        futhark_mc_task_131486_task.nested_fn =
                            futhark_mc_segmap_nested_task_131496;
                        
                        int futhark_mc_segmap_task_131487_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131486_task);
                        
                        if (futhark_mc_segmap_task_131487_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122873, &mem_122867,
                                         "mem_122867") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122872, &mem_122871,
                                         "mem_122871") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122871, "mem_122871") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122867, "mem_122867") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_122875, &ext_mem_122873,
                                     "ext_mem_122873") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122874, &ext_mem_122872,
                                     "ext_mem_122872") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122872,
                                       "ext_mem_122872") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122873,
                                       "ext_mem_122873") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_122877, &ext_mem_122875,
                                 "ext_mem_122875") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_122876, &ext_mem_122874,
                                 "ext_mem_122874") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122874, "ext_mem_122874") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122875, "ext_mem_122875") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_122900;
            
            ext_mem_122900.references = NULL;
            if (cond_114920) {
                bool zzero_115770 = l_jump_114526 == (int64_t) 0;
                bool nonzzero_115771 = !zzero_115770;
                bool nonzzero_cert_115772;
                
                if (!nonzzero_115771) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  stl.fut:55:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:252:21-67\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:250:15-253:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    if (memblock_unref(ctx, &ext_mem_122900,
                                       "ext_mem_122900") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122876,
                                       "ext_mem_122876") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122877,
                                       "ext_mem_122877") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122240,
                                       "mem_param_122240") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122232,
                                       "mem_param_122232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123461,
                                       "ext_mem_123461") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123462,
                                       "ext_mem_123462") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122218,
                                       "mem_param_122218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122210,
                                       "mem_param_122210") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122202,
                                       "mem_param_122202") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123712,
                                       "ext_mem_123712") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123713,
                                       "ext_mem_123713") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123714,
                                       "ext_mem_123714") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123830,
                                       "mem_out_123830") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123829,
                                       "mem_out_123829") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123828,
                                       "mem_out_123828") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_115773 = sub64(l_n_m_114568, (int64_t) 1);
                struct memblock mem_122899;
                
                mem_122899.references = NULL;
                if (memblock_alloc(ctx, &mem_122899, bytes_121979,
                                   "mem_122899")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_119266 = (int64_t) 0;
                int32_t num_tasks_127897;
                int64_t flat_tid_119268 = (int64_t) 0;
                struct futhark_mc_task_131535 futhark_mc_task_131535;
                
                futhark_mc_task_131535.ctx = ctx;
                futhark_mc_task_131535.free_m_114517 = m_114517;
                futhark_mc_task_131535.free_n_114518 = n_114518;
                futhark_mc_task_131535.free_l_jump_114526 = l_jump_114526;
                futhark_mc_task_131535.free_l_n_m_114568 = l_n_m_114568;
                futhark_mc_task_131535.free_i_114594 = i_114594;
                futhark_mc_task_131535.free_y_115773 = y_115773;
                futhark_mc_task_131535.free_bytes_121961 = bytes_121961;
                futhark_mc_task_131535.free_ext_mem_122876 = ext_mem_122876.mem;
                futhark_mc_task_131535.free_ext_mem_122877 = ext_mem_122877.mem;
                futhark_mc_task_131535.free_mem_122899 = mem_122899.mem;
                
                struct scheduler_segop futhark_mc_task_131535_task;
                
                futhark_mc_task_131535_task.args = &futhark_mc_task_131535;
                futhark_mc_task_131535_task.top_level_fn =
                    futhark_mc_segmap_task_131536;
                futhark_mc_task_131535_task.name =
                    "futhark_mc_segmap_task_131536";
                futhark_mc_task_131535_task.iterations = m_114517;
                futhark_mc_task_131535_task.task_time =
                    &ctx->futhark_mc_segmap_task_131536_total_time;
                futhark_mc_task_131535_task.task_iter =
                    &ctx->futhark_mc_segmap_task_131536_total_iter;
                futhark_mc_task_131535_task.sched = STATIC;
                futhark_mc_task_131535_task.nested_fn =
                    futhark_mc_segmap_nested_task_131540;
                
                int futhark_mc_segmap_task_131536_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_131535_task);
                
                if (futhark_mc_segmap_task_131536_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_122900, &mem_122899,
                                 "mem_122899") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122899, "mem_122899") != 0)
                    return 1;
            } else {
                bool dim_match_115825 = n_114518 == l_n_m_114568;
                bool empty_or_match_cert_115826;
                
                if (!dim_match_115825) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_114517, ", ",
                                  (long long) l_n_m_114568,
                                  ") cannot match shape of type `[",
                                  (long long) m_114517, "][",
                                  (long long) n_114518, "]t`.",
                                  "-> #0  stl.fut:255:15-36\n   #1  stl.fut:394:3-405:33\n   #2  stl.fut:381:1-405:33\n");
                    if (memblock_unref(ctx, &ext_mem_122900,
                                       "ext_mem_122900") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122876,
                                       "ext_mem_122876") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122877,
                                       "ext_mem_122877") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122240,
                                       "mem_param_122240") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122232,
                                       "mem_param_122232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123461,
                                       "ext_mem_123461") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123462,
                                       "ext_mem_123462") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122218,
                                       "mem_param_122218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122210,
                                       "mem_param_122210") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122202,
                                       "mem_param_122202") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123712,
                                       "ext_mem_123712") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123713,
                                       "ext_mem_123713") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123714,
                                       "ext_mem_123714") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123830,
                                       "mem_out_123830") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123829,
                                       "mem_out_123829") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123828,
                                       "mem_out_123828") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_122900, &ext_mem_122877,
                                 "ext_mem_122877") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_122876, "ext_mem_122876") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122877, "ext_mem_122877") != 0)
                return 1;
            
            struct memblock mem_122963;
            
            mem_122963.references = NULL;
            if (memblock_alloc(ctx, &mem_122963, bytes_121979, "mem_122963")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_119322 = (int64_t) 0;
            int32_t num_tasks_128005;
            int64_t flat_tid_119324 = (int64_t) 0;
            struct futhark_mc_task_131548 futhark_mc_task_131548;
            
            futhark_mc_task_131548.ctx = ctx;
            futhark_mc_task_131548.free_m_114517 = m_114517;
            futhark_mc_task_131548.free_n_114518 = n_114518;
            futhark_mc_task_131548.free_n_p_114520 = n_p_114520;
            futhark_mc_task_131548.free_C_len_114566 = C_len_114566;
            futhark_mc_task_131548.free_Y_mem_121917 = Y_mem_121917.mem;
            futhark_mc_task_131548.free_mem_121957 = mem_121957;
            futhark_mc_task_131548.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131548.free_mem_122306 = mem_122306;
            futhark_mc_task_131548.free_ext_mem_122900 = ext_mem_122900.mem;
            futhark_mc_task_131548.free_ext_122901 = ext_122901;
            futhark_mc_task_131548.free_mem_122959 = mem_122959;
            futhark_mc_task_131548.free_mem_122963 = mem_122963.mem;
            
            struct scheduler_segop futhark_mc_task_131548_task;
            
            futhark_mc_task_131548_task.args = &futhark_mc_task_131548;
            futhark_mc_task_131548_task.top_level_fn =
                futhark_mc_segmap_task_131549;
            futhark_mc_task_131548_task.name = "futhark_mc_segmap_task_131549";
            futhark_mc_task_131548_task.iterations = m_114517;
            futhark_mc_task_131548_task.task_time =
                &ctx->futhark_mc_segmap_task_131549_total_time;
            futhark_mc_task_131548_task.task_iter =
                &ctx->futhark_mc_segmap_task_131549_total_iter;
            futhark_mc_task_131548_task.sched = STATIC;
            futhark_mc_task_131548_task.nested_fn =
                futhark_mc_segmap_nested_task_131555;
            
            int futhark_mc_segmap_task_131549_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131548_task);
            
            if (futhark_mc_segmap_task_131549_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &ext_mem_122900, "ext_mem_122900") != 0)
                return 1;
            
            struct memblock ext_mem_123432;
            
            ext_mem_123432.references = NULL;
            
            struct memblock ext_mem_123431;
            
            ext_mem_123431.references = NULL;
            if (cond_114996) {
                bool match_lit_115868 = (int64_t) 0 == t_degree_114523;
                struct memblock ext_mem_123081;
                
                ext_mem_123081.references = NULL;
                
                struct memblock ext_mem_123080;
                
                ext_mem_123080.references = NULL;
                if (match_lit_115868) {
                    struct memblock mem_122967;
                    
                    mem_122967.references = NULL;
                    if (memblock_alloc(ctx, &mem_122967, bytes_122183,
                                       "mem_122967")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_128061 = 0; i_128061 < m_114517;
                         i_128061++) {
                        for (int64_t i_128062 = 0; i_128062 < t_n_m_114575;
                             i_128062++) {
                            ((float *) mem_122967.mem)[i_128061 * t_n_m_114575 +
                                                       i_128062] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_122989;
                    
                    mem_122989.references = NULL;
                    if (memblock_alloc(ctx, &mem_122989, bytes_122183,
                                       "mem_122989")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_119349 = (int64_t) 0;
                    int32_t num_tasks_128063;
                    int64_t flat_tid_119351 = (int64_t) 0;
                    struct futhark_mc_task_131569 futhark_mc_task_131569;
                    
                    futhark_mc_task_131569.ctx = ctx;
                    futhark_mc_task_131569.free_m_114517 = m_114517;
                    futhark_mc_task_131569.free_n_114518 = n_114518;
                    futhark_mc_task_131569.free_t_window_114521 =
                        t_window_114521;
                    futhark_mc_task_131569.free_t_jump_114525 = t_jump_114525;
                    futhark_mc_task_131569.free_t_n_m_114575 = t_n_m_114575;
                    futhark_mc_task_131569.free_i_114594 = i_114594;
                    futhark_mc_task_131569.free_mem_121960 = mem_121960;
                    futhark_mc_task_131569.free_mem_121982 = mem_121982;
                    futhark_mc_task_131569.free_bytes_122113 = bytes_122113;
                    futhark_mc_task_131569.free_mem_122182 = mem_122182;
                    futhark_mc_task_131569.free_mem_122186 = mem_122186;
                    futhark_mc_task_131569.free_mem_122408 = mem_122408;
                    futhark_mc_task_131569.free_mem_122959 = mem_122959;
                    futhark_mc_task_131569.free_mem_122989 = mem_122989.mem;
                    
                    struct scheduler_segop futhark_mc_task_131569_task;
                    
                    futhark_mc_task_131569_task.args = &futhark_mc_task_131569;
                    futhark_mc_task_131569_task.top_level_fn =
                        futhark_mc_segmap_task_131570;
                    futhark_mc_task_131569_task.name =
                        "futhark_mc_segmap_task_131570";
                    futhark_mc_task_131569_task.iterations = m_114517;
                    futhark_mc_task_131569_task.task_time =
                        &ctx->futhark_mc_segmap_task_131570_total_time;
                    futhark_mc_task_131569_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131570_total_iter;
                    futhark_mc_task_131569_task.sched = STATIC;
                    futhark_mc_task_131569_task.nested_fn =
                        futhark_mc_segmap_nested_task_131574;
                    
                    int futhark_mc_segmap_task_131570_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131569_task);
                    
                    if (futhark_mc_segmap_task_131570_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_123081, &mem_122989,
                                     "mem_122989") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_123080, &mem_122967,
                                     "mem_122967") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122989, "mem_122989") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122967, "mem_122967") != 0)
                        return 1;
                } else {
                    bool match_lit_115939 = (int64_t) 1 == t_degree_114523;
                    struct memblock ext_mem_123079;
                    
                    ext_mem_123079.references = NULL;
                    
                    struct memblock ext_mem_123078;
                    
                    ext_mem_123078.references = NULL;
                    if (match_lit_115939) {
                        struct memblock mem_123029;
                        
                        mem_123029.references = NULL;
                        if (memblock_alloc(ctx, &mem_123029, bytes_122183,
                                           "mem_123029")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_123033;
                        
                        mem_123033.references = NULL;
                        if (memblock_alloc(ctx, &mem_123033, bytes_122183,
                                           "mem_123033")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_119536 = (int64_t) 0;
                        int32_t num_tasks_128352;
                        int64_t flat_tid_119538 = (int64_t) 0;
                        struct futhark_mc_task_131595 futhark_mc_task_131595;
                        
                        futhark_mc_task_131595.ctx = ctx;
                        futhark_mc_task_131595.free_m_114517 = m_114517;
                        futhark_mc_task_131595.free_n_114518 = n_114518;
                        futhark_mc_task_131595.free_t_window_114521 =
                            t_window_114521;
                        futhark_mc_task_131595.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131595.free_t_n_m_114575 = t_n_m_114575;
                        futhark_mc_task_131595.free_i_114594 = i_114594;
                        futhark_mc_task_131595.free_mem_121960 = mem_121960;
                        futhark_mc_task_131595.free_mem_121982 = mem_121982;
                        futhark_mc_task_131595.free_bytes_122113 = bytes_122113;
                        futhark_mc_task_131595.free_mem_122182 = mem_122182;
                        futhark_mc_task_131595.free_mem_122186 = mem_122186;
                        futhark_mc_task_131595.free_mem_122408 = mem_122408;
                        futhark_mc_task_131595.free_mem_122959 = mem_122959;
                        futhark_mc_task_131595.free_mem_123029 = mem_123029.mem;
                        futhark_mc_task_131595.free_mem_123033 = mem_123033.mem;
                        
                        struct scheduler_segop futhark_mc_task_131595_task;
                        
                        futhark_mc_task_131595_task.args =
                            &futhark_mc_task_131595;
                        futhark_mc_task_131595_task.top_level_fn =
                            futhark_mc_segmap_task_131596;
                        futhark_mc_task_131595_task.name =
                            "futhark_mc_segmap_task_131596";
                        futhark_mc_task_131595_task.iterations = m_114517;
                        futhark_mc_task_131595_task.task_time =
                            &ctx->futhark_mc_segmap_task_131596_total_time;
                        futhark_mc_task_131595_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131596_total_iter;
                        futhark_mc_task_131595_task.sched = STATIC;
                        futhark_mc_task_131595_task.nested_fn =
                            futhark_mc_segmap_nested_task_131601;
                        
                        int futhark_mc_segmap_task_131596_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131595_task);
                        
                        if (futhark_mc_segmap_task_131596_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_123079, &mem_123029,
                                         "mem_123029") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_123078, &mem_123033,
                                         "mem_123033") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123033, "mem_123033") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123029, "mem_123029") != 0)
                            return 1;
                    } else {
                        struct memblock mem_123073;
                        
                        mem_123073.references = NULL;
                        if (memblock_alloc(ctx, &mem_123073, bytes_122183,
                                           "mem_123073")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_123077;
                        
                        mem_123077.references = NULL;
                        if (memblock_alloc(ctx, &mem_123077, bytes_122183,
                                           "mem_123077")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_119808 = (int64_t) 0;
                        int32_t num_tasks_128779;
                        int64_t flat_tid_119810 = (int64_t) 0;
                        struct futhark_mc_task_131626 futhark_mc_task_131626;
                        
                        futhark_mc_task_131626.ctx = ctx;
                        futhark_mc_task_131626.free_m_114517 = m_114517;
                        futhark_mc_task_131626.free_n_114518 = n_114518;
                        futhark_mc_task_131626.free_t_window_114521 =
                            t_window_114521;
                        futhark_mc_task_131626.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131626.free_t_n_m_114575 = t_n_m_114575;
                        futhark_mc_task_131626.free_i_114594 = i_114594;
                        futhark_mc_task_131626.free_mem_121960 = mem_121960;
                        futhark_mc_task_131626.free_mem_121982 = mem_121982;
                        futhark_mc_task_131626.free_bytes_122113 = bytes_122113;
                        futhark_mc_task_131626.free_mem_122182 = mem_122182;
                        futhark_mc_task_131626.free_mem_122186 = mem_122186;
                        futhark_mc_task_131626.free_mem_122408 = mem_122408;
                        futhark_mc_task_131626.free_mem_122959 = mem_122959;
                        futhark_mc_task_131626.free_mem_123073 = mem_123073.mem;
                        futhark_mc_task_131626.free_mem_123077 = mem_123077.mem;
                        
                        struct scheduler_segop futhark_mc_task_131626_task;
                        
                        futhark_mc_task_131626_task.args =
                            &futhark_mc_task_131626;
                        futhark_mc_task_131626_task.top_level_fn =
                            futhark_mc_segmap_task_131627;
                        futhark_mc_task_131626_task.name =
                            "futhark_mc_segmap_task_131627";
                        futhark_mc_task_131626_task.iterations = m_114517;
                        futhark_mc_task_131626_task.task_time =
                            &ctx->futhark_mc_segmap_task_131627_total_time;
                        futhark_mc_task_131626_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131627_total_iter;
                        futhark_mc_task_131626_task.sched = STATIC;
                        futhark_mc_task_131626_task.nested_fn =
                            futhark_mc_segmap_nested_task_131632;
                        
                        int futhark_mc_segmap_task_131627_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131626_task);
                        
                        if (futhark_mc_segmap_task_131627_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_123079, &mem_123073,
                                         "mem_123073") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_123078, &mem_123077,
                                         "mem_123077") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123077, "mem_123077") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123073, "mem_123073") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_123081, &ext_mem_123079,
                                     "ext_mem_123079") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_123080, &ext_mem_123078,
                                     "ext_mem_123078") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123078,
                                       "ext_mem_123078") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123079,
                                       "ext_mem_123079") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_123432, &ext_mem_123081,
                                 "ext_mem_123081") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_123431, &ext_mem_123080,
                                 "ext_mem_123080") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123080, "ext_mem_123080") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123081, "ext_mem_123081") != 0)
                    return 1;
            } else {
                bool match_lit_116168 = (int64_t) 0 == t_degree_114523;
                struct memblock ext_mem_123430;
                
                ext_mem_123430.references = NULL;
                
                struct memblock ext_mem_123429;
                
                ext_mem_123429.references = NULL;
                if (match_lit_116168) {
                    struct memblock mem_123085;
                    
                    mem_123085.references = NULL;
                    if (memblock_alloc(ctx, &mem_123085, bytes_122183,
                                       "mem_123085")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_129338 = 0; i_129338 < m_114517;
                         i_129338++) {
                        for (int64_t i_129339 = 0; i_129339 < t_n_m_114575;
                             i_129339++) {
                            ((float *) mem_123085.mem)[i_129338 * t_n_m_114575 +
                                                       i_129339] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_123140;
                    
                    mem_123140.references = NULL;
                    if (memblock_alloc(ctx, &mem_123140, bytes_122183,
                                       "mem_123140")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_123087 = (int64_t) 4 * t_window_114521;
                    int64_t bytes_123086 = smax64((int64_t) 0, binop_y_123087);
                    int64_t flat_tid_120176 = (int64_t) 0;
                    int32_t num_tasks_129340;
                    int64_t flat_tid_120178 = (int64_t) 0;
                    struct futhark_mc_task_131659 futhark_mc_task_131659;
                    
                    futhark_mc_task_131659.ctx = ctx;
                    futhark_mc_task_131659.free_m_114517 = m_114517;
                    futhark_mc_task_131659.free_n_114518 = n_114518;
                    futhark_mc_task_131659.free_t_window_114521 =
                        t_window_114521;
                    futhark_mc_task_131659.free_t_jump_114525 = t_jump_114525;
                    futhark_mc_task_131659.free_t_n_m_114575 = t_n_m_114575;
                    futhark_mc_task_131659.free_i_114594 = i_114594;
                    futhark_mc_task_131659.free_mem_121960 = mem_121960;
                    futhark_mc_task_131659.free_mem_121982 = mem_121982;
                    futhark_mc_task_131659.free_bytes_122113 = bytes_122113;
                    futhark_mc_task_131659.free_mem_122182 = mem_122182;
                    futhark_mc_task_131659.free_mem_122186 = mem_122186;
                    futhark_mc_task_131659.free_mem_122408 = mem_122408;
                    futhark_mc_task_131659.free_mem_122959 = mem_122959;
                    futhark_mc_task_131659.free_bytes_123086 = bytes_123086;
                    futhark_mc_task_131659.free_mem_123140 = mem_123140.mem;
                    
                    struct scheduler_segop futhark_mc_task_131659_task;
                    
                    futhark_mc_task_131659_task.args = &futhark_mc_task_131659;
                    futhark_mc_task_131659_task.top_level_fn =
                        futhark_mc_segmap_task_131660;
                    futhark_mc_task_131659_task.name =
                        "futhark_mc_segmap_task_131660";
                    futhark_mc_task_131659_task.iterations = m_114517;
                    futhark_mc_task_131659_task.task_time =
                        &ctx->futhark_mc_segmap_task_131660_total_time;
                    futhark_mc_task_131659_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131660_total_iter;
                    futhark_mc_task_131659_task.sched = STATIC;
                    futhark_mc_task_131659_task.nested_fn =
                        futhark_mc_segmap_nested_task_131665;
                    
                    int futhark_mc_segmap_task_131660_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131659_task);
                    
                    if (futhark_mc_segmap_task_131660_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_123430, &mem_123140,
                                     "mem_123140") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_123429, &mem_123085,
                                     "mem_123085") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_123140, "mem_123140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_123085, "mem_123085") != 0)
                        return 1;
                } else {
                    bool match_lit_116225 = (int64_t) 1 == t_degree_114523;
                    struct memblock ext_mem_123428;
                    
                    ext_mem_123428.references = NULL;
                    
                    struct memblock ext_mem_123427;
                    
                    ext_mem_123427.references = NULL;
                    if (match_lit_116225) {
                        struct memblock mem_123246;
                        
                        mem_123246.references = NULL;
                        if (memblock_alloc(ctx, &mem_123246, bytes_122183,
                                           "mem_123246")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_123250;
                        
                        mem_123250.references = NULL;
                        if (memblock_alloc(ctx, &mem_123250, bytes_122183,
                                           "mem_123250")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_123142 = (int64_t) 4 * t_window_114521;
                        int64_t bytes_123141 = smax64((int64_t) 0,
                                                      binop_y_123142);
                        int64_t flat_tid_120321 = (int64_t) 0;
                        int32_t num_tasks_129569;
                        int64_t flat_tid_120323 = (int64_t) 0;
                        struct futhark_mc_task_131688 futhark_mc_task_131688;
                        
                        futhark_mc_task_131688.ctx = ctx;
                        futhark_mc_task_131688.free_m_114517 = m_114517;
                        futhark_mc_task_131688.free_n_114518 = n_114518;
                        futhark_mc_task_131688.free_t_window_114521 =
                            t_window_114521;
                        futhark_mc_task_131688.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131688.free_t_n_m_114575 = t_n_m_114575;
                        futhark_mc_task_131688.free_i_114594 = i_114594;
                        futhark_mc_task_131688.free_mem_121960 = mem_121960;
                        futhark_mc_task_131688.free_mem_121982 = mem_121982;
                        futhark_mc_task_131688.free_bytes_122113 = bytes_122113;
                        futhark_mc_task_131688.free_mem_122182 = mem_122182;
                        futhark_mc_task_131688.free_mem_122186 = mem_122186;
                        futhark_mc_task_131688.free_mem_122408 = mem_122408;
                        futhark_mc_task_131688.free_mem_122959 = mem_122959;
                        futhark_mc_task_131688.free_bytes_123141 = bytes_123141;
                        futhark_mc_task_131688.free_mem_123246 = mem_123246.mem;
                        futhark_mc_task_131688.free_mem_123250 = mem_123250.mem;
                        
                        struct scheduler_segop futhark_mc_task_131688_task;
                        
                        futhark_mc_task_131688_task.args =
                            &futhark_mc_task_131688;
                        futhark_mc_task_131688_task.top_level_fn =
                            futhark_mc_segmap_task_131689;
                        futhark_mc_task_131688_task.name =
                            "futhark_mc_segmap_task_131689";
                        futhark_mc_task_131688_task.iterations = m_114517;
                        futhark_mc_task_131688_task.task_time =
                            &ctx->futhark_mc_segmap_task_131689_total_time;
                        futhark_mc_task_131688_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131689_total_iter;
                        futhark_mc_task_131688_task.sched = STATIC;
                        futhark_mc_task_131688_task.nested_fn =
                            futhark_mc_segmap_nested_task_131696;
                        
                        int futhark_mc_segmap_task_131689_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131688_task);
                        
                        if (futhark_mc_segmap_task_131689_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_123428, &mem_123246,
                                         "mem_123246") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_123427, &mem_123250,
                                         "mem_123250") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123250, "mem_123250") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123246, "mem_123246") != 0)
                            return 1;
                    } else {
                        struct memblock mem_123422;
                        
                        mem_123422.references = NULL;
                        if (memblock_alloc(ctx, &mem_123422, bytes_122183,
                                           "mem_123422")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_123426;
                        
                        mem_123426.references = NULL;
                        if (memblock_alloc(ctx, &mem_123426, bytes_122183,
                                           "mem_123426")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_123252 = (int64_t) 4 * t_window_114521;
                        int64_t bytes_123251 = smax64((int64_t) 0,
                                                      binop_y_123252);
                        int64_t flat_tid_120554 = (int64_t) 0;
                        int32_t num_tasks_129951;
                        int64_t flat_tid_120556 = (int64_t) 0;
                        struct futhark_mc_task_131725 futhark_mc_task_131725;
                        
                        futhark_mc_task_131725.ctx = ctx;
                        futhark_mc_task_131725.free_m_114517 = m_114517;
                        futhark_mc_task_131725.free_n_114518 = n_114518;
                        futhark_mc_task_131725.free_t_window_114521 =
                            t_window_114521;
                        futhark_mc_task_131725.free_t_jump_114525 =
                            t_jump_114525;
                        futhark_mc_task_131725.free_t_n_m_114575 = t_n_m_114575;
                        futhark_mc_task_131725.free_i_114594 = i_114594;
                        futhark_mc_task_131725.free_mem_121960 = mem_121960;
                        futhark_mc_task_131725.free_mem_121982 = mem_121982;
                        futhark_mc_task_131725.free_bytes_122113 = bytes_122113;
                        futhark_mc_task_131725.free_mem_122182 = mem_122182;
                        futhark_mc_task_131725.free_mem_122186 = mem_122186;
                        futhark_mc_task_131725.free_mem_122408 = mem_122408;
                        futhark_mc_task_131725.free_mem_122959 = mem_122959;
                        futhark_mc_task_131725.free_bytes_123251 = bytes_123251;
                        futhark_mc_task_131725.free_mem_123422 = mem_123422.mem;
                        futhark_mc_task_131725.free_mem_123426 = mem_123426.mem;
                        
                        struct scheduler_segop futhark_mc_task_131725_task;
                        
                        futhark_mc_task_131725_task.args =
                            &futhark_mc_task_131725;
                        futhark_mc_task_131725_task.top_level_fn =
                            futhark_mc_segmap_task_131726;
                        futhark_mc_task_131725_task.name =
                            "futhark_mc_segmap_task_131726";
                        futhark_mc_task_131725_task.iterations = m_114517;
                        futhark_mc_task_131725_task.task_time =
                            &ctx->futhark_mc_segmap_task_131726_total_time;
                        futhark_mc_task_131725_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131726_total_iter;
                        futhark_mc_task_131725_task.sched = STATIC;
                        futhark_mc_task_131725_task.nested_fn =
                            futhark_mc_segmap_nested_task_131735;
                        
                        int futhark_mc_segmap_task_131726_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131725_task);
                        
                        if (futhark_mc_segmap_task_131726_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_123428, &mem_123422,
                                         "mem_123422") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_123427, &mem_123426,
                                         "mem_123426") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123426, "mem_123426") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123422, "mem_123422") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_123430, &ext_mem_123428,
                                     "ext_mem_123428") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_123429, &ext_mem_123427,
                                     "ext_mem_123427") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123427,
                                       "ext_mem_123427") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123428,
                                       "ext_mem_123428") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_123432, &ext_mem_123430,
                                 "ext_mem_123430") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_123431, &ext_mem_123429,
                                 "ext_mem_123429") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123429, "ext_mem_123429") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123430, "ext_mem_123430") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_123455;
            
            ext_mem_123455.references = NULL;
            if (cond_114921) {
                bool zzero_116473 = t_jump_114525 == (int64_t) 0;
                bool nonzzero_116474 = !zzero_116473;
                bool nonzzero_cert_116475;
                
                if (!nonzzero_116474) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  stl.fut:55:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:54:3-67:14\n   #4  stl.fut:300:23-69\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:299:15-301:43\n   #8  stl.fut:394:3-405:33\n   #9  stl.fut:381:1-405:33\n");
                    if (memblock_unref(ctx, &ext_mem_123455,
                                       "ext_mem_123455") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123431,
                                       "ext_mem_123431") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123432,
                                       "ext_mem_123432") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122963, "mem_122963") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122900,
                                       "ext_mem_122900") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122876,
                                       "ext_mem_122876") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122877,
                                       "ext_mem_122877") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122240,
                                       "mem_param_122240") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122232,
                                       "mem_param_122232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123461,
                                       "ext_mem_123461") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123462,
                                       "ext_mem_123462") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122218,
                                       "mem_param_122218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122210,
                                       "mem_param_122210") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122202,
                                       "mem_param_122202") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123712,
                                       "ext_mem_123712") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123713,
                                       "ext_mem_123713") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123714,
                                       "ext_mem_123714") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123830,
                                       "mem_out_123830") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123829,
                                       "mem_out_123829") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123828,
                                       "mem_out_123828") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_116476 = sub64(t_n_m_114575, (int64_t) 1);
                struct memblock mem_123454;
                
                mem_123454.references = NULL;
                if (memblock_alloc(ctx, &mem_123454, bytes_121979,
                                   "mem_123454")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_120897 = (int64_t) 0;
                int32_t num_tasks_130517;
                int64_t flat_tid_120899 = (int64_t) 0;
                struct futhark_mc_task_131774 futhark_mc_task_131774;
                
                futhark_mc_task_131774.ctx = ctx;
                futhark_mc_task_131774.free_m_114517 = m_114517;
                futhark_mc_task_131774.free_n_114518 = n_114518;
                futhark_mc_task_131774.free_t_jump_114525 = t_jump_114525;
                futhark_mc_task_131774.free_t_n_m_114575 = t_n_m_114575;
                futhark_mc_task_131774.free_i_114594 = i_114594;
                futhark_mc_task_131774.free_y_116476 = y_116476;
                futhark_mc_task_131774.free_bytes_121961 = bytes_121961;
                futhark_mc_task_131774.free_ext_mem_123431 = ext_mem_123431.mem;
                futhark_mc_task_131774.free_ext_mem_123432 = ext_mem_123432.mem;
                futhark_mc_task_131774.free_mem_123454 = mem_123454.mem;
                
                struct scheduler_segop futhark_mc_task_131774_task;
                
                futhark_mc_task_131774_task.args = &futhark_mc_task_131774;
                futhark_mc_task_131774_task.top_level_fn =
                    futhark_mc_segmap_task_131775;
                futhark_mc_task_131774_task.name =
                    "futhark_mc_segmap_task_131775";
                futhark_mc_task_131774_task.iterations = m_114517;
                futhark_mc_task_131774_task.task_time =
                    &ctx->futhark_mc_segmap_task_131775_total_time;
                futhark_mc_task_131774_task.task_iter =
                    &ctx->futhark_mc_segmap_task_131775_total_iter;
                futhark_mc_task_131774_task.sched = STATIC;
                futhark_mc_task_131774_task.nested_fn =
                    futhark_mc_segmap_nested_task_131779;
                
                int futhark_mc_segmap_task_131775_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_131774_task);
                
                if (futhark_mc_segmap_task_131775_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_123455, &mem_123454,
                                 "mem_123454") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_123454, "mem_123454") != 0)
                    return 1;
            } else {
                bool dim_match_116529 = n_114518 == t_n_m_114575;
                bool empty_or_match_cert_116530;
                
                if (!dim_match_116529) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_114517, ", ",
                                  (long long) t_n_m_114575,
                                  ") cannot match shape of type `[",
                                  (long long) m_114517, "][",
                                  (long long) n_114518, "]t`.",
                                  "-> #0  stl.fut:303:15-36\n   #1  stl.fut:394:3-405:33\n   #2  stl.fut:381:1-405:33\n");
                    if (memblock_unref(ctx, &ext_mem_123455,
                                       "ext_mem_123455") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123431,
                                       "ext_mem_123431") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123432,
                                       "ext_mem_123432") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122963, "mem_122963") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122900,
                                       "ext_mem_122900") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122876,
                                       "ext_mem_122876") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122877,
                                       "ext_mem_122877") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122240,
                                       "mem_param_122240") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122232,
                                       "mem_param_122232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123461,
                                       "ext_mem_123461") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123462,
                                       "ext_mem_123462") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122218,
                                       "mem_param_122218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122210,
                                       "mem_param_122210") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122202,
                                       "mem_param_122202") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123712,
                                       "ext_mem_123712") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123713,
                                       "ext_mem_123713") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123714,
                                       "ext_mem_123714") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123830,
                                       "mem_out_123830") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123829,
                                       "mem_out_123829") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123828,
                                       "mem_out_123828") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_123455, &ext_mem_123432,
                                 "ext_mem_123432") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_123431, "ext_mem_123431") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123432, "ext_mem_123432") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_124997 = ext_123456;
            int64_t ctx_param_ext_tmp_124998 = ext_123456;
            struct memblock mem_param_tmp_124999;
            
            mem_param_tmp_124999.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_124999, &mem_122963,
                             "mem_122963") != 0)
                return 1;
            
            struct memblock mem_param_tmp_125000;
            
            mem_param_tmp_125000.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_125000, &ext_mem_123455,
                             "ext_mem_123455") != 0)
                return 1;
            ctx_param_ext_122234 = ctx_param_ext_tmp_124997;
            ctx_param_ext_122236 = ctx_param_ext_tmp_124998;
            if (memblock_set(ctx, &mem_param_122232, &mem_param_tmp_124999,
                             "mem_param_tmp_124999") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_122240, &mem_param_tmp_125000,
                             "mem_param_tmp_125000") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_125000,
                               "mem_param_tmp_125000") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_124999,
                               "mem_param_tmp_124999") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123455, "ext_mem_123455") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123431, "ext_mem_123431") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123432, "ext_mem_123432") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_122963, "mem_122963") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122900, "ext_mem_122900") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122876, "ext_mem_122876") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122877, "ext_mem_122877") != 0)
                return 1;
        }
        ext_123468 = ctx_param_ext_122234;
        ext_123466 = ctx_param_ext_122236;
        if (memblock_set(ctx, &ext_mem_123462, &mem_param_122232,
                         "mem_param_122232") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_123461, &mem_param_122240,
                         "mem_param_122240") != 0)
            return 1;
        
        bool cond_116532 = slt64(i_outer_115001, y_114922);
        int64_t weights_l_116533;
        
        if (cond_116532) {
            weights_l_116533 = n_114518;
        } else {
            weights_l_116533 = loopz2081Uz2085Uz2089U_115002;
        }
        
        int64_t ext_123711;
        
        if (cond_116532) {
            ext_123711 = m_114517;
        } else {
            ext_123711 = ctx_param_ext_122211;
        }
        
        int64_t ext_123710;
        
        if (cond_116532) {
            ext_123710 = n_114518;
        } else {
            ext_123710 = ctx_param_ext_122212;
        }
        
        int64_t ext_123709;
        
        if (cond_116532) {
            ext_123709 = n_114518;
        } else {
            ext_123709 = ctx_param_ext_122214;
        }
        
        int64_t ext_123708;
        
        if (cond_116532) {
            ext_123708 = (int64_t) 1;
        } else {
            ext_123708 = ctx_param_ext_122216;
        }
        
        int64_t ext_123707;
        
        if (cond_116532) {
            ext_123707 = (int64_t) 0;
        } else {
            ext_123707 = ctx_param_ext_122213;
        }
        
        struct memblock ext_mem_123706;
        
        ext_mem_123706.references = NULL;
        if (cond_116532) {
            if (mem_123498_cached_sizze_131082 < (size_t) bytes_121979) {
                mem_123498 = realloc(mem_123498, bytes_121979);
                mem_123498_cached_sizze_131082 = bytes_121979;
            }
            
            int64_t flat_tid_120953 = (int64_t) 0;
            int32_t num_tasks_130625;
            int64_t flat_tid_120955 = (int64_t) 0;
            struct futhark_mc_task_131787 futhark_mc_task_131787;
            
            futhark_mc_task_131787.ctx = ctx;
            futhark_mc_task_131787.free_m_114517 = m_114517;
            futhark_mc_task_131787.free_n_114518 = n_114518;
            futhark_mc_task_131787.free_Y_mem_121917 = Y_mem_121917.mem;
            futhark_mc_task_131787.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131787.free_ext_mem_123461 = ext_mem_123461.mem;
            futhark_mc_task_131787.free_ext_mem_123462 = ext_mem_123462.mem;
            futhark_mc_task_131787.free_ext_123466 = ext_123466;
            futhark_mc_task_131787.free_mem_123498 = mem_123498;
            
            struct scheduler_segop futhark_mc_task_131787_task;
            
            futhark_mc_task_131787_task.args = &futhark_mc_task_131787;
            futhark_mc_task_131787_task.top_level_fn =
                futhark_mc_segmap_task_131788;
            futhark_mc_task_131787_task.name = "futhark_mc_segmap_task_131788";
            futhark_mc_task_131787_task.iterations = m_114517;
            futhark_mc_task_131787_task.task_time =
                &ctx->futhark_mc_segmap_task_131788_total_time;
            futhark_mc_task_131787_task.task_iter =
                &ctx->futhark_mc_segmap_task_131788_total_iter;
            futhark_mc_task_131787_task.sched = STATIC;
            futhark_mc_task_131787_task.nested_fn =
                futhark_mc_segmap_nested_task_131792;
            
            int futhark_mc_segmap_task_131788_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131787_task);
            
            if (futhark_mc_segmap_task_131788_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (mem_123520_cached_sizze_131083 < (size_t) bytes_121979) {
                mem_123520 = realloc(mem_123520, bytes_121979);
                mem_123520_cached_sizze_131083 = bytes_121979;
            }
            
            int64_t flat_tid_120971 = (int64_t) 0;
            int32_t num_tasks_130657;
            int64_t flat_tid_120973 = (int64_t) 0;
            struct futhark_mc_task_131800 futhark_mc_task_131800;
            
            futhark_mc_task_131800.ctx = ctx;
            futhark_mc_task_131800.free_m_114517 = m_114517;
            futhark_mc_task_131800.free_n_114518 = n_114518;
            futhark_mc_task_131800.free_mem_121957 = mem_121957;
            futhark_mc_task_131800.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131800.free_mem_123498 = mem_123498;
            futhark_mc_task_131800.free_mem_123520 = mem_123520;
            
            struct scheduler_segop futhark_mc_task_131800_task;
            
            futhark_mc_task_131800_task.args = &futhark_mc_task_131800;
            futhark_mc_task_131800_task.top_level_fn =
                futhark_mc_segmap_task_131801;
            futhark_mc_task_131800_task.name = "futhark_mc_segmap_task_131801";
            futhark_mc_task_131800_task.iterations = m_114517;
            futhark_mc_task_131800_task.task_time =
                &ctx->futhark_mc_segmap_task_131801_total_time;
            futhark_mc_task_131800_task.task_iter =
                &ctx->futhark_mc_segmap_task_131801_total_iter;
            futhark_mc_task_131800_task.sched = STATIC;
            futhark_mc_task_131800_task.nested_fn =
                futhark_mc_segmap_nested_task_131805;
            
            int futhark_mc_segmap_task_131801_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131800_task);
            
            if (futhark_mc_segmap_task_131801_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t iters_116561;
            
            if (empty_slice_114973) {
                iters_116561 = 0;
            } else {
                iters_116561 = 16;
            }
            
            bool loop_nonempty_116562 = slt32(0, iters_116561);
            bool loop_not_taken_116563 = !loop_nonempty_116562;
            bool protect_assert_disj_116564 = bounds_check_114597 ||
                 loop_not_taken_116563;
            bool index_certs_116565;
            
            if (!protect_assert_disj_116564) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_114594,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:104:6-36\n   #4  stl.fut:334:35-77\n   #5  stl.fut:333:28-335:40\n   #6  stl.fut:394:3-405:33\n   #7  stl.fut:381:1-405:33\n");
                if (memblock_unref(ctx, &ext_mem_123706, "ext_mem_123706") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122240,
                                   "mem_param_122240") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122232,
                                   "mem_param_122232") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123461, "ext_mem_123461") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123462, "ext_mem_123462") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122218,
                                   "mem_param_122218") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122210,
                                   "mem_param_122210") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122202,
                                   "mem_param_122202") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123712, "ext_mem_123712") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123713, "ext_mem_123713") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123714, "ext_mem_123714") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
                    return 1;
                return 1;
            }
            if (mem_123674_cached_sizze_131084 < (size_t) bytes_121979) {
                mem_123674 = realloc(mem_123674, bytes_121979);
                mem_123674_cached_sizze_131084 = bytes_121979;
            }
            
            int64_t double_buffer_sizze_123818 = (int64_t) 4 * n_114518;
            int64_t double_buffer_sizze_123822 = (int64_t) 4 * n_114518;
            int64_t flat_tid_120987 = (int64_t) 0;
            int32_t num_tasks_130690;
            int64_t flat_tid_120989 = (int64_t) 0;
            struct futhark_mc_task_131813 futhark_mc_task_131813;
            
            futhark_mc_task_131813.ctx = ctx;
            futhark_mc_task_131813.free_m_114517 = m_114517;
            futhark_mc_task_131813.free_n_114518 = n_114518;
            futhark_mc_task_131813.free_i_114594 = i_114594;
            futhark_mc_task_131813.free_iters_116561 = iters_116561;
            futhark_mc_task_131813.free_bytes_121918 = bytes_121918;
            futhark_mc_task_131813.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131813.free_mem_123520 = mem_123520;
            futhark_mc_task_131813.free_mem_123674 = mem_123674;
            futhark_mc_task_131813.free_double_buffer_sizze_123818 =
                double_buffer_sizze_123818;
            futhark_mc_task_131813.free_double_buffer_sizze_123822 =
                double_buffer_sizze_123822;
            
            struct scheduler_segop futhark_mc_task_131813_task;
            
            futhark_mc_task_131813_task.args = &futhark_mc_task_131813;
            futhark_mc_task_131813_task.top_level_fn =
                futhark_mc_segmap_task_131814;
            futhark_mc_task_131813_task.name = "futhark_mc_segmap_task_131814";
            futhark_mc_task_131813_task.iterations = m_114517;
            futhark_mc_task_131813_task.task_time =
                &ctx->futhark_mc_segmap_task_131814_total_time;
            futhark_mc_task_131813_task.task_iter =
                &ctx->futhark_mc_segmap_task_131814_total_iter;
            futhark_mc_task_131813_task.sched = STATIC;
            futhark_mc_task_131813_task.nested_fn =
                futhark_mc_segmap_nested_task_131824;
            
            int futhark_mc_segmap_task_131814_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131813_task);
            
            if (futhark_mc_segmap_task_131814_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            bool empty_slice_116679 = j_m_i_114986 == (int64_t) 0;
            int64_t m_116680 = sub64(j_m_i_114986, (int64_t) 1);
            int64_t i_p_m_t_s_116681 = add64(stl_res_114588, m_116680);
            bool zzero_leq_i_p_m_t_s_116682 = sle64((int64_t) 0,
                                                    i_p_m_t_s_116681);
            bool i_p_m_t_s_leq_w_116683 = slt64(i_p_m_t_s_116681, n_114518);
            bool zzero_lte_i_116684 = sle64((int64_t) 0, stl_res_114588);
            bool i_lte_j_116685 = sle64(stl_res_114588, stl_res_114589);
            bool y_116686 = i_p_m_t_s_leq_w_116683 && zzero_lte_i_116684;
            bool y_116687 = zzero_leq_i_p_m_t_s_116682 && y_116686;
            bool y_116688 = i_lte_j_116685 && y_116687;
            bool forwards_ok_116689 = zzero_lte_i_116684 && y_116688;
            bool ok_or_empty_116690 = empty_slice_116679 || forwards_ok_116689;
            bool index_certs_116691;
            
            if (!ok_or_empty_116690) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) stl_res_114588, ":",
                              (long long) stl_res_114589,
                              "] out of bounds for array of shape [",
                              (long long) n_114518, "].",
                              "-> #0  stl.fut:340:33-51\n   #1  stl.fut:338:13-345:28\n   #2  stl.fut:394:3-405:33\n   #3  stl.fut:381:1-405:33\n");
                if (memblock_unref(ctx, &ext_mem_123706, "ext_mem_123706") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122240,
                                   "mem_param_122240") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122232,
                                   "mem_param_122232") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123461, "ext_mem_123461") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123462, "ext_mem_123462") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122218,
                                   "mem_param_122218") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122210,
                                   "mem_param_122210") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122202,
                                   "mem_param_122202") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123712, "ext_mem_123712") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123713, "ext_mem_123713") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123714, "ext_mem_123714") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
                    return 1;
                return 1;
            }
            
            int64_t binop_y_123676 = (int64_t) 4 * m_114517;
            int64_t bytes_123675 = smax64((int64_t) 0, binop_y_123676);
            
            if (mem_123677_cached_sizze_131085 < (size_t) bytes_123675) {
                mem_123677 = realloc(mem_123677, bytes_123675);
                mem_123677_cached_sizze_131085 = bytes_123675;
            }
            if (mem_123680_cached_sizze_131086 < (size_t) bytes_123675) {
                mem_123680 = realloc(mem_123680, bytes_123675);
                mem_123680_cached_sizze_131086 = bytes_123675;
            }
            if (mem_123683_cached_sizze_131087 < (size_t) bytes_123675) {
                mem_123683 = realloc(mem_123683, bytes_123675);
                mem_123683_cached_sizze_131087 = bytes_123675;
            }
            
            int64_t flat_tid_121080 = (int64_t) 0;
            int32_t num_tasks_130956;
            int64_t flat_tid_121082 = (int64_t) 0;
            struct futhark_mc_task_131848 futhark_mc_task_131848;
            
            futhark_mc_task_131848.ctx = ctx;
            futhark_mc_task_131848.free_m_114517 = m_114517;
            futhark_mc_task_131848.free_n_114518 = n_114518;
            futhark_mc_task_131848.free_stl_res_114588 = stl_res_114588;
            futhark_mc_task_131848.free_j_m_i_114986 = j_m_i_114986;
            futhark_mc_task_131848.free_mem_123674 = mem_123674;
            futhark_mc_task_131848.free_mem_123677 = mem_123677;
            futhark_mc_task_131848.free_mem_123680 = mem_123680;
            futhark_mc_task_131848.free_mem_123683 = mem_123683;
            
            struct scheduler_segop futhark_mc_task_131848_task;
            
            futhark_mc_task_131848_task.args = &futhark_mc_task_131848;
            futhark_mc_task_131848_task.top_level_fn =
                futhark_mc_segmap_task_131849;
            futhark_mc_task_131848_task.name = "futhark_mc_segmap_task_131849";
            futhark_mc_task_131848_task.iterations = m_114517;
            futhark_mc_task_131848_task.task_time =
                &ctx->futhark_mc_segmap_task_131849_total_time;
            futhark_mc_task_131848_task.task_iter =
                &ctx->futhark_mc_segmap_task_131849_total_iter;
            futhark_mc_task_131848_task.sched = STATIC;
            futhark_mc_task_131848_task.nested_fn =
                futhark_mc_segmap_nested_task_131852;
            
            int futhark_mc_segmap_task_131849_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131848_task);
            
            if (futhark_mc_segmap_task_131849_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock mem_123705;
            
            mem_123705.references = NULL;
            if (memblock_alloc(ctx, &mem_123705, bytes_121979, "mem_123705")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_121095 = (int64_t) 0;
            int32_t num_tasks_130983;
            int64_t flat_tid_121097 = (int64_t) 0;
            struct futhark_mc_task_131860 futhark_mc_task_131860;
            
            futhark_mc_task_131860.ctx = ctx;
            futhark_mc_task_131860.free_m_114517 = m_114517;
            futhark_mc_task_131860.free_n_114518 = n_114518;
            futhark_mc_task_131860.free_bytes_121961 = bytes_121961;
            futhark_mc_task_131860.free_mem_123498 = mem_123498;
            futhark_mc_task_131860.free_mem_123677 = mem_123677;
            futhark_mc_task_131860.free_mem_123680 = mem_123680;
            futhark_mc_task_131860.free_mem_123683 = mem_123683;
            futhark_mc_task_131860.free_mem_123705 = mem_123705.mem;
            
            struct scheduler_segop futhark_mc_task_131860_task;
            
            futhark_mc_task_131860_task.args = &futhark_mc_task_131860;
            futhark_mc_task_131860_task.top_level_fn =
                futhark_mc_segmap_task_131861;
            futhark_mc_task_131860_task.name = "futhark_mc_segmap_task_131861";
            futhark_mc_task_131860_task.iterations = m_114517;
            futhark_mc_task_131860_task.task_time =
                &ctx->futhark_mc_segmap_task_131861_total_time;
            futhark_mc_task_131860_task.task_iter =
                &ctx->futhark_mc_segmap_task_131861_total_iter;
            futhark_mc_task_131860_task.sched = STATIC;
            futhark_mc_task_131860_task.nested_fn =
                futhark_mc_segmap_nested_task_131865;
            
            int futhark_mc_segmap_task_131861_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131860_task);
            
            if (futhark_mc_segmap_task_131861_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_123706, &mem_123705, "mem_123705") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_123705, "mem_123705") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_123706, &mem_param_122218,
                             "mem_param_122218") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_124982 = ext_123468;
        int64_t ctx_param_ext_tmp_124983 = ext_123466;
        int64_t ctx_param_ext_tmp_124984 = ext_123711;
        int64_t ctx_param_ext_tmp_124985 = ext_123710;
        int64_t ctx_param_ext_tmp_124986 = ext_123707;
        int64_t ctx_param_ext_tmp_124987 = ext_123709;
        int64_t ctx_param_ext_tmp_124988 = ext_123708;
        int64_t ctx_param_ext_tmp_124989 = weights_l_116533;
        struct memblock mem_param_tmp_124990;
        
        mem_param_tmp_124990.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_124990, &ext_mem_123462,
                         "ext_mem_123462") != 0)
            return 1;
        
        struct memblock mem_param_tmp_124991;
        
        mem_param_tmp_124991.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_124991, &ext_mem_123461,
                         "ext_mem_123461") != 0)
            return 1;
        
        struct memblock mem_param_tmp_124992;
        
        mem_param_tmp_124992.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_124992, &ext_mem_123706,
                         "ext_mem_123706") != 0)
            return 1;
        
        int64_t loopz2081Uz2085Uz2089U_tmp_124993 = weights_l_116533;
        
        ctx_param_ext_122204 = ctx_param_ext_tmp_124982;
        ctx_param_ext_122206 = ctx_param_ext_tmp_124983;
        ctx_param_ext_122211 = ctx_param_ext_tmp_124984;
        ctx_param_ext_122212 = ctx_param_ext_tmp_124985;
        ctx_param_ext_122213 = ctx_param_ext_tmp_124986;
        ctx_param_ext_122214 = ctx_param_ext_tmp_124987;
        ctx_param_ext_122216 = ctx_param_ext_tmp_124988;
        ctx_param_ext_122217 = ctx_param_ext_tmp_124989;
        if (memblock_set(ctx, &mem_param_122202, &mem_param_tmp_124990,
                         "mem_param_tmp_124990") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_122210, &mem_param_tmp_124991,
                         "mem_param_tmp_124991") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_122218, &mem_param_tmp_124992,
                         "mem_param_tmp_124992") != 0)
            return 1;
        loopz2081Uz2085Uz2089U_115002 = loopz2081Uz2085Uz2089U_tmp_124993;
        if (memblock_unref(ctx, &mem_param_tmp_124992,
                           "mem_param_tmp_124992") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_124991,
                           "mem_param_tmp_124991") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_124990,
                           "mem_param_tmp_124990") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_123706, "ext_mem_123706") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_122240, "mem_param_122240") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_122232, "mem_param_122232") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_123461, "ext_mem_123461") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_123462, "ext_mem_123462") != 0)
            return 1;
    }
    ext_123727 = ctx_param_ext_122204;
    ext_123725 = ctx_param_ext_122206;
    ext_123721 = ctx_param_ext_122211;
    ext_123720 = ctx_param_ext_122212;
    ext_123719 = ctx_param_ext_122213;
    ext_123718 = ctx_param_ext_122214;
    ext_123716 = ctx_param_ext_122216;
    ext_123715 = ctx_param_ext_122217;
    if (memblock_set(ctx, &ext_mem_123714, &mem_param_122202,
                     "mem_param_122202") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_123713, &mem_param_122210,
                     "mem_param_122210") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_123712, &mem_param_122218,
                     "mem_param_122218") != 0)
        return 1;
    stl_res_114997 = loopz2081Uz2085Uz2089U_115002;
    if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
        return 1;
    
    struct memblock mem_123757;
    
    mem_123757.references = NULL;
    if (memblock_alloc(ctx, &mem_123757, bytes_121979, "mem_123757")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t flat_tid_121123 = (int64_t) 0;
    int32_t num_tasks_131038;
    int64_t flat_tid_121125 = (int64_t) 0;
    struct futhark_mc_task_131873 futhark_mc_task_131873;
    
    futhark_mc_task_131873.ctx = ctx;
    futhark_mc_task_131873.free_m_114517 = m_114517;
    futhark_mc_task_131873.free_n_114518 = n_114518;
    futhark_mc_task_131873.free_Y_mem_121917 = Y_mem_121917.mem;
    futhark_mc_task_131873.free_bytes_121961 = bytes_121961;
    futhark_mc_task_131873.free_ext_mem_123713 = ext_mem_123713.mem;
    futhark_mc_task_131873.free_ext_mem_123714 = ext_mem_123714.mem;
    futhark_mc_task_131873.free_ext_123725 = ext_123725;
    futhark_mc_task_131873.free_mem_123757 = mem_123757.mem;
    
    struct scheduler_segop futhark_mc_task_131873_task;
    
    futhark_mc_task_131873_task.args = &futhark_mc_task_131873;
    futhark_mc_task_131873_task.top_level_fn = futhark_mc_segmap_task_131874;
    futhark_mc_task_131873_task.name = "futhark_mc_segmap_task_131874";
    futhark_mc_task_131873_task.iterations = m_114517;
    futhark_mc_task_131873_task.task_time =
        &ctx->futhark_mc_segmap_task_131874_total_time;
    futhark_mc_task_131873_task.task_iter =
        &ctx->futhark_mc_segmap_task_131874_total_iter;
    futhark_mc_task_131873_task.sched = STATIC;
    futhark_mc_task_131873_task.nested_fn =
        futhark_mc_segmap_nested_task_131878;
    
    int futhark_mc_segmap_task_131874_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131873_task);
    
    if (futhark_mc_segmap_task_131874_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_123761;
    
    mem_123761.references = NULL;
    if (memblock_alloc(ctx, &mem_123761, bytes_121979, "mem_123761")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_123761.mem + (int64_t) 0, ext_mem_123714.mem + (int64_t) 0,
            m_114517 * n_114518 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_123714, "ext_mem_123714") != 0)
        return 1;
    
    struct memblock mem_123766;
    
    mem_123766.references = NULL;
    if (memblock_alloc(ctx, &mem_123766, bytes_121979, "mem_123766")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_123766.mem + (int64_t) 0, ext_mem_123713.mem + (int64_t) 0,
            m_114517 * n_114518 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_123713, "ext_mem_123713") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_123828, &mem_123761, "mem_123761") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_123829, &mem_123766, "mem_123766") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_123830, &mem_123757, "mem_123757") != 0)
        return 1;
    (*mem_out_p_131063).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_131063, &mem_out_123828,
                     "mem_out_123828") != 0)
        return 1;
    (*mem_out_p_131064).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_131064, &mem_out_123829,
                     "mem_out_123829") != 0)
        return 1;
    (*mem_out_p_131065).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_131065, &mem_out_123830,
                     "mem_out_123830") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_123766, "mem_123766") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_123761, "mem_123761") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_123757, "mem_123757") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_122218, "mem_param_122218") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_122210, "mem_param_122210") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_122202, "mem_param_122202") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_123712, "ext_mem_123712") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_123713, "ext_mem_123713") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_123714, "ext_mem_123714") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122194, "mem_122194") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122190, "mem_122190") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_123830, "mem_out_123830") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_123829, "mem_out_123829") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_123828, "mem_out_123828") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_121957);
    free(mem_121960);
    free(mem_121982);
    free(mem_122004);
    free(mem_122026);
    free(mem_122102);
    free(mem_122106);
    free(mem_122182);
    free(mem_122186);
    free(mem_122262);
    free(mem_122284);
    free(mem_122306);
    free(mem_122364);
    free(mem_122404);
    free(mem_122408);
    free(mem_122959);
    free(mem_123498);
    free(mem_123520);
    free(mem_123674);
    free(mem_123677);
    free(mem_123680);
    free(mem_123683);
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11)
{
    struct memblock Y_mem_121917;
    
    Y_mem_121917.references = NULL;
    
    int64_t m_114517;
    int64_t n_114518;
    int64_t n_p_114520;
    int64_t t_window_114521;
    int64_t l_window_114522;
    int64_t t_degree_114523;
    int64_t l_degree_114524;
    int64_t t_jump_114525;
    int64_t l_jump_114526;
    int64_t inner_114527;
    int64_t outer_114528;
    int64_t jump_threshold_114529;
    int64_t max_group_sizze_114530;
    struct memblock mem_out_123828;
    
    mem_out_123828.references = NULL;
    
    struct memblock mem_out_123829;
    
    mem_out_123829.references = NULL;
    
    struct memblock mem_out_123830;
    
    mem_out_123830.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_121917 = in0->mem;
    m_114517 = in0->shape[0];
    n_114518 = in0->shape[1];
    n_p_114520 = in1;
    t_window_114521 = in2;
    l_window_114522 = in3;
    t_degree_114523 = in4;
    l_degree_114524 = in5;
    t_jump_114525 = in6;
    l_jump_114526 = in7;
    inner_114527 = in8;
    outer_114528 = in9;
    jump_threshold_114529 = in10;
    max_group_sizze_114530 = in11;
    if (!(m_114517 == in0->shape[0] && n_114518 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_123828, &mem_out_123829,
                                &mem_out_123830, Y_mem_121917, m_114517,
                                n_114518, n_p_114520, t_window_114521,
                                l_window_114522, t_degree_114523,
                                l_degree_114524, t_jump_114525, l_jump_114526,
                                inner_114527, outer_114528,
                                jump_threshold_114529, max_group_sizze_114530);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_123828;
            (*out0)->shape[0] = m_114517;
            (*out0)->shape[1] = n_114518;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_123829;
            (*out1)->shape[0] = m_114517;
            (*out1)->shape[1] = n_114518;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_123830;
            (*out2)->shape[0] = m_114517;
            (*out2)->shape[1] = n_114518;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
