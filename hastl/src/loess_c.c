// Generated by Futhark 0.22.0
// git: ed22762 (Sat Jan 15 01:09:59 2022 +0100)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f64_2d;
struct futhark_f64_2d *futhark_new_f64_2d(struct futhark_context *ctx, const
                                          double *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f64_2d *futhark_new_raw_f64_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f64_2d(struct futhark_context *ctx,
                        struct futhark_f64_2d *arr);
int futhark_values_f64_2d(struct futhark_context *ctx,
                          struct futhark_f64_2d *arr, double *data);
unsigned char *futhark_values_raw_f64_2d(struct futhark_context *ctx,
                                         struct futhark_f64_2d *arr);
const int64_t *futhark_shape_f64_2d(struct futhark_context *ctx,
                                    struct futhark_f64_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f64_2d **out0, const
                       struct futhark_f64_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_96905,
                             struct memblock Y_mem_94966, int64_t m_92398,
                             int64_t n_92399, int64_t q_92401,
                             int64_t degree_92402, int64_t jump_92403,
                             int64_t jump_threshold_1_92404,
                             int64_t jump_threshold_2_92405,
                             int64_t q_threshold_1_92406,
                             int64_t q_threshold_2_92407);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f64_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f64_2d *futhark_new_f64_2d(struct futhark_context *ctx, const
                                          double *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f64_2d *bad = NULL;
    struct futhark_f64_2d *arr =
                          (struct futhark_f64_2d *) malloc(sizeof(struct futhark_f64_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 8, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 8 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 8);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f64_2d *futhark_new_raw_f64_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f64_2d *bad = NULL;
    struct futhark_f64_2d *arr =
                          (struct futhark_f64_2d *) malloc(sizeof(struct futhark_f64_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 8, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 8 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 8);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f64_2d(struct futhark_context *ctx, struct futhark_f64_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f64_2d(struct futhark_context *ctx,
                          struct futhark_f64_2d *arr, double *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 8 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 8);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f64_2d(struct futhark_context *ctx,
                                         struct futhark_f64_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f64_2d(struct futhark_context *ctx,
                                    struct futhark_f64_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_96905,
                             struct memblock Y_mem_94966, int64_t m_92398,
                             int64_t n_92399, int64_t q_92401,
                             int64_t degree_92402, int64_t jump_92403,
                             int64_t jump_threshold_1_92404,
                             int64_t jump_threshold_2_92405,
                             int64_t q_threshold_1_92406,
                             int64_t q_threshold_2_92407)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_94987_cached_sizze_96906 = 0;
    unsigned char *mem_94987 = NULL;
    size_t mem_95002_cached_sizze_96907 = 0;
    unsigned char *mem_95002 = NULL;
    size_t mem_95005_cached_sizze_96908 = 0;
    unsigned char *mem_95005 = NULL;
    size_t mem_95032_cached_sizze_96909 = 0;
    unsigned char *mem_95032 = NULL;
    size_t mem_95047_cached_sizze_96910 = 0;
    unsigned char *mem_95047 = NULL;
    size_t mem_95120_cached_sizze_96911 = 0;
    unsigned char *mem_95120 = NULL;
    size_t mem_95135_cached_sizze_96912 = 0;
    unsigned char *mem_95135 = NULL;
    size_t mem_95138_cached_sizze_96913 = 0;
    unsigned char *mem_95138 = NULL;
    size_t mem_95165_cached_sizze_96914 = 0;
    unsigned char *mem_95165 = NULL;
    size_t mem_95180_cached_sizze_96915 = 0;
    unsigned char *mem_95180 = NULL;
    size_t mem_95283_cached_sizze_96916 = 0;
    unsigned char *mem_95283 = NULL;
    size_t mem_95298_cached_sizze_96917 = 0;
    unsigned char *mem_95298 = NULL;
    size_t mem_95301_cached_sizze_96918 = 0;
    unsigned char *mem_95301 = NULL;
    size_t mem_95328_cached_sizze_96919 = 0;
    unsigned char *mem_95328 = NULL;
    size_t mem_95343_cached_sizze_96920 = 0;
    unsigned char *mem_95343 = NULL;
    size_t mem_95468_cached_sizze_96921 = 0;
    unsigned char *mem_95468 = NULL;
    size_t mem_95483_cached_sizze_96922 = 0;
    unsigned char *mem_95483 = NULL;
    size_t mem_95486_cached_sizze_96923 = 0;
    unsigned char *mem_95486 = NULL;
    size_t mem_95513_cached_sizze_96924 = 0;
    unsigned char *mem_95513 = NULL;
    size_t mem_95528_cached_sizze_96925 = 0;
    unsigned char *mem_95528 = NULL;
    size_t mem_95554_cached_sizze_96926 = 0;
    unsigned char *mem_95554 = NULL;
    size_t mem_95616_cached_sizze_96927 = 0;
    unsigned char *mem_95616 = NULL;
    size_t mem_95631_cached_sizze_96928 = 0;
    unsigned char *mem_95631 = NULL;
    size_t mem_95634_cached_sizze_96929 = 0;
    unsigned char *mem_95634 = NULL;
    size_t mem_95661_cached_sizze_96930 = 0;
    unsigned char *mem_95661 = NULL;
    size_t mem_95676_cached_sizze_96931 = 0;
    unsigned char *mem_95676 = NULL;
    size_t mem_95713_cached_sizze_96932 = 0;
    unsigned char *mem_95713 = NULL;
    size_t mem_95716_cached_sizze_96933 = 0;
    unsigned char *mem_95716 = NULL;
    size_t mem_95809_cached_sizze_96934 = 0;
    unsigned char *mem_95809 = NULL;
    size_t mem_95824_cached_sizze_96935 = 0;
    unsigned char *mem_95824 = NULL;
    size_t mem_95827_cached_sizze_96936 = 0;
    unsigned char *mem_95827 = NULL;
    size_t mem_95854_cached_sizze_96937 = 0;
    unsigned char *mem_95854 = NULL;
    size_t mem_95869_cached_sizze_96938 = 0;
    unsigned char *mem_95869 = NULL;
    size_t mem_95906_cached_sizze_96939 = 0;
    unsigned char *mem_95906 = NULL;
    size_t mem_95909_cached_sizze_96940 = 0;
    unsigned char *mem_95909 = NULL;
    size_t mem_95936_cached_sizze_96941 = 0;
    unsigned char *mem_95936 = NULL;
    size_t mem_95939_cached_sizze_96942 = 0;
    unsigned char *mem_95939 = NULL;
    size_t mem_96054_cached_sizze_96943 = 0;
    unsigned char *mem_96054 = NULL;
    size_t mem_96069_cached_sizze_96944 = 0;
    unsigned char *mem_96069 = NULL;
    size_t mem_96072_cached_sizze_96945 = 0;
    unsigned char *mem_96072 = NULL;
    size_t mem_96099_cached_sizze_96946 = 0;
    unsigned char *mem_96099 = NULL;
    size_t mem_96114_cached_sizze_96947 = 0;
    unsigned char *mem_96114 = NULL;
    size_t mem_96187_cached_sizze_96948 = 0;
    unsigned char *mem_96187 = NULL;
    size_t mem_96202_cached_sizze_96949 = 0;
    unsigned char *mem_96202 = NULL;
    size_t mem_96205_cached_sizze_96950 = 0;
    unsigned char *mem_96205 = NULL;
    size_t mem_96232_cached_sizze_96951 = 0;
    unsigned char *mem_96232 = NULL;
    size_t mem_96247_cached_sizze_96952 = 0;
    unsigned char *mem_96247 = NULL;
    size_t mem_96350_cached_sizze_96953 = 0;
    unsigned char *mem_96350 = NULL;
    size_t mem_96365_cached_sizze_96954 = 0;
    unsigned char *mem_96365 = NULL;
    size_t mem_96368_cached_sizze_96955 = 0;
    unsigned char *mem_96368 = NULL;
    size_t mem_96395_cached_sizze_96956 = 0;
    unsigned char *mem_96395 = NULL;
    size_t mem_96410_cached_sizze_96957 = 0;
    unsigned char *mem_96410 = NULL;
    struct memblock mem_out_96682;
    
    mem_out_96682.references = NULL;
    
    bool cond_92408 = jump_92403 == (int64_t) 1;
    int64_t n_m_92409;
    
    if (cond_92408) {
        n_m_92409 = n_92399;
    } else {
        bool zzero_92410 = jump_92403 == (int64_t) 0;
        bool nonzzero_92411 = !zzero_92410;
        bool nonzzero_cert_92412;
        
        if (!nonzzero_92411) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:759:38-45\n   #1  loess.fut:750:1-793:26\n");
            if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        int64_t x_92413 = sdiv64(n_92399, jump_92403);
        int64_t n_m_f_res_92414 = add64((int64_t) 1, x_92413);
        
        n_m_92409 = n_m_f_res_92414;
    }
    
    int64_t i_92415 = sub64(n_92399, (int64_t) 1);
    bool x_92416 = sle64((int64_t) 0, i_92415);
    bool y_92417 = slt64(i_92415, n_92399);
    bool bounds_check_92418 = x_92416 && y_92417;
    bool index_certs_92419;
    
    if (!bounds_check_92418) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_92415,
                               "] out of bounds for array of shape [",
                               (long long) n_92399, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  loess.fut:764:5-54\n   #3  loess.fut:750:1-793:26\n");
        if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") != 0)
            return 1;
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_92421 = smin64(n_92399, q_92401);
    bool bounds_invalid_upwards_92422 = slt64(n_m_92409, (int64_t) 0);
    bool valid_92423 = !bounds_invalid_upwards_92422;
    bool range_valid_c_92424;
    
    if (!valid_92423) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_92409, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:620:3-647:10\n   #4  loess.fut:680:15-61\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
        if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") != 0)
            return 1;
        err = 1;
        goto cleanup;
    }
    
    bool loop_cond_92426 = slt64((int64_t) 1, min_res_92421);
    double i64_res_92427 = sitofp_i64_f64(q_92401);
    bool cond_92428 = slt64(jump_92403, jump_threshold_1_92404);
    bool cond_92429 = slt64(jump_92403, jump_threshold_2_92405);
    bool cond_f_res_t_res_92430 = slt64(q_92401, q_threshold_2_92407);
    bool x_92431 = cond_92429 && cond_f_res_t_res_92430;
    bool x_92432 = !cond_92428;
    bool y_92433 = x_92431 && x_92432;
    bool cond_92434 = cond_92428 || y_92433;
    struct memblock ext_mem_96539;
    
    ext_mem_96539.references = NULL;
    
    struct memblock ext_mem_96531;
    
    ext_mem_96531.references = NULL;
    if (cond_92434) {
        bool match_lit_92437 = (int64_t) 0 == degree_92402;
        int64_t binop_x_94967 = m_92398 * n_m_92409;
        int64_t binop_y_94968 = (int64_t) 8 * binop_x_94967;
        int64_t bytes_94969 = smax64((int64_t) 0, binop_y_94968);
        int64_t binop_y_94985 = (int64_t) 8 * n_92399;
        int64_t bytes_94986 = smax64((int64_t) 0, binop_y_94985);
        int64_t binop_y_95045 = (int64_t) 8 * q_92401;
        int64_t bytes_95046 = smax64((int64_t) 0, binop_y_95045);
        struct memblock ext_mem_95440;
        
        ext_mem_95440.references = NULL;
        
        struct memblock ext_mem_95432;
        
        ext_mem_95432.references = NULL;
        if (match_lit_92437) {
            struct memblock mem_94970;
            
            mem_94970.references = NULL;
            if (memblock_alloc(ctx, &mem_94970, bytes_94969, "mem_94970")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_96683 = 0; i_96683 < m_92398; i_96683++) {
                for (int64_t i_96684 = 0; i_96684 < n_m_92409; i_96684++) {
                    ((double *) mem_94970.mem)[i_96683 * n_m_92409 + i_96684] =
                        0.0;
                }
            }
            
            struct memblock mem_94974;
            
            mem_94974.references = NULL;
            if (memblock_alloc(ctx, &mem_94974, bytes_94969, "mem_94974")) {
                err = 1;
                goto cleanup;
            }
            if (mem_94987_cached_sizze_96906 < (size_t) bytes_94986) {
                mem_94987 = realloc(mem_94987, bytes_94986);
                mem_94987_cached_sizze_96906 = bytes_94986;
            }
            if (mem_95002_cached_sizze_96907 < (size_t) bytes_94986) {
                mem_95002 = realloc(mem_95002, bytes_94986);
                mem_95002_cached_sizze_96907 = bytes_94986;
            }
            if (mem_95005_cached_sizze_96908 < (size_t) bytes_94986) {
                mem_95005 = realloc(mem_95005, bytes_94986);
                mem_95005_cached_sizze_96908 = bytes_94986;
            }
            if (mem_95032_cached_sizze_96909 < (size_t) bytes_94986) {
                mem_95032 = realloc(mem_95032, bytes_94986);
                mem_95032_cached_sizze_96909 = bytes_94986;
            }
            if (mem_95047_cached_sizze_96910 < (size_t) bytes_95046) {
                mem_95047 = realloc(mem_95047, bytes_95046);
                mem_95047_cached_sizze_96910 = bytes_95046;
            }
            for (int64_t i_94412 = 0; i_94412 < m_92398; i_94412++) {
                int64_t discard_94385;
                int64_t scanacc_94381 = (int64_t) 0;
                
                for (int64_t i_94383 = 0; i_94383 < n_92399; i_94383++) {
                    double x_92448;
                    
                    x_92448 = ((double *) Y_mem_94966.mem)[i_94412 * n_92399 +
                                                           i_94383];
                    
                    bool isnan_res_92449;
                    
                    isnan_res_92449 = futrts_isnan64(x_92448);
                    
                    bool defunc_0_p_res_92450 = !isnan_res_92449;
                    int64_t defunc_0_f_res_92451 =
                            btoi_bool_i64(defunc_0_p_res_92450);
                    int64_t defunc_1_op_res_92447 = add64(defunc_0_f_res_92451,
                                                          scanacc_94381);
                    
                    ((int64_t *) mem_94987)[i_94383] = defunc_1_op_res_92447;
                    
                    int64_t scanacc_tmp_96686 = defunc_1_op_res_92447;
                    
                    scanacc_94381 = scanacc_tmp_96686;
                }
                discard_94385 = scanacc_94381;
                
                int64_t last_res_92452;
                
                last_res_92452 = ((int64_t *) mem_94987)[i_92415];
                for (int64_t i_96688 = 0; i_96688 < n_92399; i_96688++) {
                    ((double *) mem_95002)[i_96688] = 0.0;
                }
                for (int64_t i_96689 = 0; i_96689 < n_92399; i_96689++) {
                    ((int64_t *) mem_95005)[i_96689] = (int64_t) -1;
                }
                for (int64_t write_iter_94386 = 0; write_iter_94386 < n_92399;
                     write_iter_94386++) {
                    double write_iv_94389;
                    
                    write_iv_94389 = ((double *) Y_mem_94966.mem)[i_94412 *
                                                                  n_92399 +
                                                                  write_iter_94386];
                    
                    int64_t write_iv_94390;
                    
                    write_iv_94390 = ((int64_t *) mem_94987)[write_iter_94386];
                    
                    bool isnan_res_92460;
                    
                    isnan_res_92460 = futrts_isnan64(write_iv_94389);
                    
                    bool defunc_0_p_res_92461 = !isnan_res_92460;
                    int64_t defunc_1_f_res_92462;
                    
                    if (defunc_0_p_res_92461) {
                        int64_t defunc_1_f_res_t_res_92463 =
                                sub64(write_iv_94390, (int64_t) 1);
                        
                        defunc_1_f_res_92462 = defunc_1_f_res_t_res_92463;
                    } else {
                        defunc_1_f_res_92462 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_92462) &&
                        slt64(defunc_1_f_res_92462, n_92399)) {
                        ((int64_t *) mem_95005)[defunc_1_f_res_92462] =
                            write_iter_94386;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_92462) &&
                        slt64(defunc_1_f_res_92462, n_92399)) {
                        if ((int64_t) 8 > 0)
                            memmove(mem_95002 + defunc_1_f_res_92462 *
                                    (int64_t) 8, Y_mem_94966.mem + (i_94412 *
                                                                    n_92399 +
                                                                    write_iter_94386) *
                                    (int64_t) 8, (int64_t) 8);
                    }
                }
                for (int64_t i_94396 = 0; i_94396 < n_92399; i_94396++) {
                    int64_t x_92465;
                    
                    x_92465 = ((int64_t *) mem_95005)[i_94396];
                    
                    int64_t defunc_0_f_res_92466 = add64((int64_t) 1, x_92465);
                    
                    ((int64_t *) mem_95032)[i_94396] = defunc_0_f_res_92466;
                }
                
                int64_t min_arg_92467 = sub64(last_res_92452, (int64_t) 1);
                int64_t min_arg_92468 = sub64(last_res_92452, min_res_92421);
                int64_t min_res_92469 = smin64(q_92401, last_res_92452);
                double i64_res_92470 = sitofp_i64_f64(last_res_92452);
                double x_92471 = i64_res_92427 - i64_res_92470;
                double max_arg_92472 = x_92471 / 2.0;
                double max_res_92473 = fmax64(0.0, max_arg_92472);
                
                for (int64_t i_94400 = 0; i_94400 < q_92401; i_94400++) {
                    bool cond_92476 = sle64(last_res_92452, i_94400);
                    double defunc_0_f_res_92477;
                    
                    if (cond_92476) {
                        defunc_0_f_res_92477 = 0.0;
                    } else {
                        defunc_0_f_res_92477 = 1.0;
                    }
                    ((double *) mem_95047)[i_94400] = defunc_0_f_res_92477;
                }
                for (int64_t i_94408 = 0; i_94408 < n_m_92409; i_94408++) {
                    int64_t min_arg_92480 = mul64(jump_92403, i_94408);
                    int64_t min_res_92481 = smin64(i_92415, min_arg_92480);
                    int64_t defunc_0_g_res_92482 = add64((int64_t) 1,
                                                         min_res_92481);
                    bool init_idx_92483;
                    int64_t init_idx_92484;
                    int64_t init_idx_92485;
                    bool loop_while_92486;
                    int64_t low_92487;
                    int64_t high_92488;
                    
                    loop_while_92486 = x_92416;
                    low_92487 = (int64_t) 0;
                    high_92488 = i_92415;
                    while (loop_while_92486) {
                        int64_t x_92489 = add64(low_92487, high_92488);
                        int64_t mid_92490 = sdiv64(x_92489, (int64_t) 2);
                        bool x_92491 = sle64((int64_t) 0, mid_92490);
                        bool y_92492 = slt64(mid_92490, n_92399);
                        bool bounds_check_92493 = x_92491 && y_92492;
                        bool index_certs_92494;
                        
                        if (!bounds_check_92493) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) mid_92490,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_94974, "mem_94974") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_94970, "mem_94970") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t mid_id_92495;
                        
                        mid_id_92495 = ((int64_t *) mem_95032)[mid_92490];
                        
                        bool cond_92496 = slt64(mid_id_92495, (int64_t) 0);
                        int64_t mid_idx_92497;
                        
                        if (cond_92496) {
                            mid_idx_92497 = (int64_t) 9223372036854775807;
                        } else {
                            mid_idx_92497 = mid_id_92495;
                        }
                        
                        bool cond_92498 = sle64(defunc_0_g_res_92482,
                                                mid_idx_92497);
                        int64_t loopres_92499;
                        int64_t loopres_92500;
                        
                        if (cond_92498) {
                            int64_t loopres_t_res_92501 = sub64(mid_92490,
                                                                (int64_t) 1);
                            
                            loopres_92499 = low_92487;
                            loopres_92500 = loopres_t_res_92501;
                        } else {
                            int64_t loopres_f_res_92502 = add64((int64_t) 1,
                                                                mid_92490);
                            
                            loopres_92499 = loopres_f_res_92502;
                            loopres_92500 = high_92488;
                        }
                        
                        bool loop_cond_92503 = sle64(loopres_92499,
                                                     loopres_92500);
                        bool loop_while_tmp_96695 = loop_cond_92503;
                        int64_t low_tmp_96696 = loopres_92499;
                        int64_t high_tmp_96697 = loopres_92500;
                        
                        loop_while_92486 = loop_while_tmp_96695;
                        low_92487 = low_tmp_96696;
                        high_92488 = high_tmp_96697;
                    }
                    init_idx_92483 = loop_while_92486;
                    init_idx_92484 = low_92487;
                    init_idx_92485 = high_92488;
                    
                    bool idx_92504;
                    int64_t idx_92505;
                    int64_t idx_92506;
                    int64_t idx_92507;
                    bool loop_while_92508;
                    int64_t l_idx_92509;
                    int64_t r_idx_92510;
                    int64_t span_92511;
                    
                    loop_while_92508 = loop_cond_92426;
                    l_idx_92509 = init_idx_92484;
                    r_idx_92510 = init_idx_92484;
                    span_92511 = (int64_t) 1;
                    while (loop_while_92508) {
                        int64_t max_arg_92512 = sub64(l_idx_92509, (int64_t) 1);
                        int64_t max_res_92513 = smax64((int64_t) 0,
                                                       max_arg_92512);
                        int64_t min_arg_92514 = add64((int64_t) 1, r_idx_92510);
                        int64_t min_res_92515 = smin64(min_arg_92467,
                                                       min_arg_92514);
                        bool x_92516 = sle64((int64_t) 0, max_res_92513);
                        bool y_92517 = slt64(max_res_92513, n_92399);
                        bool bounds_check_92518 = x_92516 && y_92517;
                        bool index_certs_92519;
                        
                        if (!bounds_check_92518) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_92513,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_94974, "mem_94974") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_94970, "mem_94970") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_92520;
                        
                        x_92520 = ((int64_t *) mem_95032)[max_res_92513];
                        
                        int64_t abs_arg_92521 = sub64(x_92520,
                                                      defunc_0_g_res_92482);
                        int64_t abs_res_92522 = abs64(abs_arg_92521);
                        bool x_92523 = sle64((int64_t) 0, min_res_92515);
                        bool y_92524 = slt64(min_res_92515, n_92399);
                        bool bounds_check_92525 = x_92523 && y_92524;
                        bool index_certs_92526;
                        
                        if (!bounds_check_92525) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_92515,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_94974, "mem_94974") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_94970, "mem_94970") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_92527;
                        
                        x_92527 = ((int64_t *) mem_95032)[min_res_92515];
                        
                        int64_t abs_arg_92528 = sub64(x_92527,
                                                      defunc_0_g_res_92482);
                        int64_t abs_res_92529 = abs64(abs_arg_92528);
                        bool cond_92530 = max_res_92513 == l_idx_92509;
                        int64_t loopres_92531;
                        int64_t loopres_92532;
                        int64_t loopres_92533;
                        
                        if (cond_92530) {
                            loopres_92531 = l_idx_92509;
                            loopres_92532 = r_idx_92510;
                            loopres_92533 = min_res_92421;
                        } else {
                            bool cond_92534 = slt64(abs_res_92522,
                                                    abs_res_92529);
                            bool cond_f_res_92535 = min_res_92515 ==
                                 r_idx_92510;
                            bool x_92536 = !cond_92534;
                            bool y_92537 = cond_f_res_92535 && x_92536;
                            bool cond_92538 = cond_92534 || y_92537;
                            int64_t loopres_f_res_92539;
                            
                            if (cond_92538) {
                                loopres_f_res_92539 = max_res_92513;
                            } else {
                                loopres_f_res_92539 = l_idx_92509;
                            }
                            
                            int64_t loopres_f_res_92540;
                            
                            if (cond_92538) {
                                loopres_f_res_92540 = r_idx_92510;
                            } else {
                                loopres_f_res_92540 = min_res_92515;
                            }
                            
                            int64_t loopres_f_res_92541;
                            
                            if (cond_92538) {
                                int64_t loopres_f_res_t_res_92542 =
                                        add64((int64_t) 1, span_92511);
                                
                                loopres_f_res_92541 = loopres_f_res_t_res_92542;
                            } else {
                                int64_t loopres_f_res_f_res_92543 =
                                        add64((int64_t) 1, span_92511);
                                
                                loopres_f_res_92541 = loopres_f_res_f_res_92543;
                            }
                            loopres_92531 = loopres_f_res_92539;
                            loopres_92532 = loopres_f_res_92540;
                            loopres_92533 = loopres_f_res_92541;
                        }
                        
                        bool loop_cond_92544 = slt64(loopres_92533,
                                                     min_res_92421);
                        bool loop_while_tmp_96698 = loop_cond_92544;
                        int64_t l_idx_tmp_96699 = loopres_92531;
                        int64_t r_idx_tmp_96700 = loopres_92532;
                        int64_t span_tmp_96701 = loopres_92533;
                        
                        loop_while_92508 = loop_while_tmp_96698;
                        l_idx_92509 = l_idx_tmp_96699;
                        r_idx_92510 = r_idx_tmp_96700;
                        span_92511 = span_tmp_96701;
                    }
                    idx_92504 = loop_while_92508;
                    idx_92505 = l_idx_92509;
                    idx_92506 = r_idx_92510;
                    idx_92507 = span_92511;
                    
                    int64_t min_res_92545 = smin64(min_arg_92468, idx_92505);
                    int64_t max_res_92546 = smax64((int64_t) 0, min_res_92545);
                    int64_t x_92547 = add64(min_res_92469, max_res_92546);
                    int64_t r_92548 = sub64(x_92547, (int64_t) 1);
                    bool x_92549 = sle64((int64_t) 0, r_92548);
                    bool y_92550 = slt64(r_92548, n_92399);
                    bool bounds_check_92551 = x_92549 && y_92550;
                    bool index_certs_92552;
                    
                    if (!bounds_check_92551) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) r_92548,
                                      "] out of bounds for array of shape [",
                                      (long long) n_92399, "].",
                                      "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                        if (memblock_unref(ctx, &mem_94974, "mem_94974") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_94970, "mem_94970") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_95432,
                                           "ext_mem_95432") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_95440,
                                           "ext_mem_95440") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_96531,
                                           "ext_mem_96531") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_96539,
                                           "ext_mem_96539") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_96682,
                                           "mem_out_96682") != 0)
                            return 1;
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t x_92553;
                    
                    x_92553 = ((int64_t *) mem_95005)[r_92548];
                    
                    int64_t abs_arg_92554 = sub64(x_92553, min_res_92481);
                    int64_t abs_res_92555 = abs64(abs_arg_92554);
                    bool x_92556 = sle64((int64_t) 0, max_res_92546);
                    bool y_92557 = slt64(max_res_92546, n_92399);
                    bool bounds_check_92558 = x_92556 && y_92557;
                    bool index_certs_92559;
                    
                    if (!bounds_check_92558) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_92546,
                                      "] out of bounds for array of shape [",
                                      (long long) n_92399, "].",
                                      "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                        if (memblock_unref(ctx, &mem_94974, "mem_94974") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_94970, "mem_94970") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_95432,
                                           "ext_mem_95432") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_95440,
                                           "ext_mem_95440") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_96531,
                                           "ext_mem_96531") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_96539,
                                           "ext_mem_96539") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_96682,
                                           "mem_out_96682") != 0)
                            return 1;
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t x_92560;
                    
                    x_92560 = ((int64_t *) mem_95005)[max_res_92546];
                    
                    int64_t abs_arg_92561 = sub64(x_92560, min_res_92481);
                    int64_t abs_res_92562 = abs64(abs_arg_92561);
                    int64_t max_res_92563 = smax64(abs_res_92555,
                                                   abs_res_92562);
                    double defunc_0_f_res_92564 = sitofp_i64_f64(max_res_92563);
                    double defunc_1_f_res_92565 = max_res_92473 +
                           defunc_0_f_res_92564;
                    double defunc_2_reduce_res_92566;
                    double redout_94402 = 0.0;
                    
                    for (int64_t i_94403 = 0; i_94403 < q_92401; i_94403++) {
                        double x_92571;
                        
                        x_92571 = ((double *) mem_95047)[i_94403];
                        
                        bool cond_92572 = sle64(last_res_92452, i_94403);
                        int64_t defunc_0_f_res_92573;
                        
                        if (cond_92572) {
                            defunc_0_f_res_92573 = (int64_t) 0;
                        } else {
                            int64_t i_92574 = add64(max_res_92546, i_94403);
                            int64_t defunc_0_add_arg_92575;
                            
                            defunc_0_add_arg_92575 =
                                ((int64_t *) mem_95005)[i_92574];
                            
                            int64_t defunc_1_add_res_92576 = add64((int64_t) 1,
                                                                   defunc_0_add_arg_92575);
                            
                            defunc_0_f_res_92573 = defunc_1_add_res_92576;
                        }
                        
                        int64_t binop_p_92577 = sub64(defunc_0_f_res_92573,
                                                      min_res_92481);
                        double defunc_0_f_res_92578 =
                               sitofp_i64_f64(binop_p_92577);
                        double abs_res_92579 = fabs(defunc_0_f_res_92578);
                        double tmp1_92580 = abs_res_92579 /
                               defunc_1_f_res_92565;
                        double x_92581 = tmp1_92580 * tmp1_92580;
                        double y_92582 = tmp1_92580 * x_92581;
                        double tmp2_92583 = 1.0 - y_92582;
                        double x_92584 = tmp2_92583 * tmp2_92583;
                        double tmp3_92585 = tmp2_92583 * x_92584;
                        double w_j_92586 = x_92571 * tmp3_92585;
                        double defunc_1_op_res_92569 = w_j_92586 + redout_94402;
                        double redout_tmp_96702 = defunc_1_op_res_92569;
                        
                        redout_94402 = redout_tmp_96702;
                    }
                    defunc_2_reduce_res_92566 = redout_94402;
                    
                    double a0_92587 = 1.0 / defunc_2_reduce_res_92566;
                    double defunc_2_reduce_res_92588;
                    double redout_94404 = 0.0;
                    
                    for (int64_t i_94405 = 0; i_94405 < q_92401; i_94405++) {
                        double x_92593;
                        
                        x_92593 = ((double *) mem_95047)[i_94405];
                        
                        bool cond_92594 = sle64(last_res_92452, i_94405);
                        int64_t defunc_0_f_res_92595;
                        
                        if (cond_92594) {
                            defunc_0_f_res_92595 = (int64_t) 0;
                        } else {
                            int64_t i_92596 = add64(max_res_92546, i_94405);
                            int64_t defunc_0_add_arg_92597;
                            
                            defunc_0_add_arg_92597 =
                                ((int64_t *) mem_95005)[i_92596];
                            
                            int64_t defunc_1_add_res_92598 = add64((int64_t) 1,
                                                                   defunc_0_add_arg_92597);
                            
                            defunc_0_f_res_92595 = defunc_1_add_res_92598;
                        }
                        
                        int64_t binop_p_92599 = sub64(defunc_0_f_res_92595,
                                                      min_res_92481);
                        double defunc_0_f_res_92600 =
                               sitofp_i64_f64(binop_p_92599);
                        double abs_res_92601 = fabs(defunc_0_f_res_92600);
                        double tmp1_92602 = abs_res_92601 /
                               defunc_1_f_res_92565;
                        double x_92603 = tmp1_92602 * tmp1_92602;
                        double y_92604 = tmp1_92602 * x_92603;
                        double tmp2_92605 = 1.0 - y_92604;
                        double x_92606 = tmp2_92605 * tmp2_92605;
                        double tmp3_92607 = tmp2_92605 * x_92606;
                        double tmp4_92608 = x_92593 * tmp3_92607;
                        double defunc_0_f_res_92609;
                        
                        if (cond_92594) {
                            defunc_0_f_res_92609 = 0.0;
                        } else {
                            int64_t i_92610 = add64(max_res_92546, i_94405);
                            double defunc_0_add_arg_92611;
                            
                            defunc_0_add_arg_92611 =
                                ((double *) mem_95002)[i_92610];
                            defunc_0_f_res_92609 = defunc_0_add_arg_92611;
                        }
                        
                        double x_92612 = a0_92587 * tmp4_92608;
                        double defunc_9_fit_fun_res_92613 =
                               defunc_0_f_res_92609 * x_92612;
                        double defunc_1_op_res_92591 =
                               defunc_9_fit_fun_res_92613 + redout_94404;
                        double redout_tmp_96703 = defunc_1_op_res_92591;
                        
                        redout_94404 = redout_tmp_96703;
                    }
                    defunc_2_reduce_res_92588 = redout_94404;
                    ((double *) mem_94974.mem)[i_94412 * n_m_92409 + i_94408] =
                        defunc_2_reduce_res_92588;
                }
            }
            if (memblock_set(ctx, &ext_mem_95440, &mem_94974, "mem_94974") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_95432, &mem_94970, "mem_94970") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_94974, "mem_94974") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_94970, "mem_94970") != 0)
                return 1;
        } else {
            bool match_lit_92616 = (int64_t) 1 == degree_92402;
            int64_t binop_x_95090 = m_92398 * n_m_92409;
            int64_t binop_y_95091 = (int64_t) 8 * binop_x_95090;
            int64_t bytes_95092 = smax64((int64_t) 0, binop_y_95091);
            int64_t binop_y_95118 = (int64_t) 8 * n_92399;
            int64_t bytes_95119 = smax64((int64_t) 0, binop_y_95118);
            int64_t binop_y_95178 = (int64_t) 8 * q_92401;
            int64_t bytes_95179 = smax64((int64_t) 0, binop_y_95178);
            int64_t binop_x_95253 = m_92398 * n_m_92409;
            int64_t binop_y_95254 = (int64_t) 8 * binop_x_95253;
            int64_t bytes_95255 = smax64((int64_t) 0, binop_y_95254);
            int64_t binop_y_95281 = (int64_t) 8 * n_92399;
            int64_t bytes_95282 = smax64((int64_t) 0, binop_y_95281);
            int64_t binop_y_95341 = (int64_t) 8 * q_92401;
            int64_t bytes_95342 = smax64((int64_t) 0, binop_y_95341);
            struct memblock ext_mem_95424;
            
            ext_mem_95424.references = NULL;
            
            struct memblock ext_mem_95416;
            
            ext_mem_95416.references = NULL;
            if (match_lit_92616) {
                struct memblock mem_95093;
                
                mem_95093.references = NULL;
                if (memblock_alloc(ctx, &mem_95093, bytes_95092, "mem_95093")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_95097;
                
                mem_95097.references = NULL;
                if (memblock_alloc(ctx, &mem_95097, bytes_95092, "mem_95097")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_95120_cached_sizze_96911 < (size_t) bytes_95119) {
                    mem_95120 = realloc(mem_95120, bytes_95119);
                    mem_95120_cached_sizze_96911 = bytes_95119;
                }
                if (mem_95135_cached_sizze_96912 < (size_t) bytes_95119) {
                    mem_95135 = realloc(mem_95135, bytes_95119);
                    mem_95135_cached_sizze_96912 = bytes_95119;
                }
                if (mem_95138_cached_sizze_96913 < (size_t) bytes_95119) {
                    mem_95138 = realloc(mem_95138, bytes_95119);
                    mem_95138_cached_sizze_96913 = bytes_95119;
                }
                if (mem_95165_cached_sizze_96914 < (size_t) bytes_95119) {
                    mem_95165 = realloc(mem_95165, bytes_95119);
                    mem_95165_cached_sizze_96914 = bytes_95119;
                }
                if (mem_95180_cached_sizze_96915 < (size_t) bytes_95179) {
                    mem_95180 = realloc(mem_95180, bytes_95179);
                    mem_95180_cached_sizze_96915 = bytes_95179;
                }
                for (int64_t i_94454 = 0; i_94454 < m_92398; i_94454++) {
                    int64_t discard_94419;
                    int64_t scanacc_94415 = (int64_t) 0;
                    
                    for (int64_t i_94417 = 0; i_94417 < n_92399; i_94417++) {
                        double x_92627;
                        
                        x_92627 = ((double *) Y_mem_94966.mem)[i_94454 *
                                                               n_92399 +
                                                               i_94417];
                        
                        bool isnan_res_92628;
                        
                        isnan_res_92628 = futrts_isnan64(x_92627);
                        
                        bool defunc_0_p_res_92629 = !isnan_res_92628;
                        int64_t defunc_0_f_res_92630 =
                                btoi_bool_i64(defunc_0_p_res_92629);
                        int64_t defunc_1_op_res_92626 =
                                add64(defunc_0_f_res_92630, scanacc_94415);
                        
                        ((int64_t *) mem_95120)[i_94417] =
                            defunc_1_op_res_92626;
                        
                        int64_t scanacc_tmp_96706 = defunc_1_op_res_92626;
                        
                        scanacc_94415 = scanacc_tmp_96706;
                    }
                    discard_94419 = scanacc_94415;
                    
                    int64_t last_res_92631;
                    
                    last_res_92631 = ((int64_t *) mem_95120)[i_92415];
                    for (int64_t i_96708 = 0; i_96708 < n_92399; i_96708++) {
                        ((double *) mem_95135)[i_96708] = 0.0;
                    }
                    for (int64_t i_96709 = 0; i_96709 < n_92399; i_96709++) {
                        ((int64_t *) mem_95138)[i_96709] = (int64_t) -1;
                    }
                    for (int64_t write_iter_94420 = 0; write_iter_94420 <
                         n_92399; write_iter_94420++) {
                        double write_iv_94423;
                        
                        write_iv_94423 = ((double *) Y_mem_94966.mem)[i_94454 *
                                                                      n_92399 +
                                                                      write_iter_94420];
                        
                        int64_t write_iv_94424;
                        
                        write_iv_94424 =
                            ((int64_t *) mem_95120)[write_iter_94420];
                        
                        bool isnan_res_92639;
                        
                        isnan_res_92639 = futrts_isnan64(write_iv_94423);
                        
                        bool defunc_0_p_res_92640 = !isnan_res_92639;
                        int64_t defunc_1_f_res_92641;
                        
                        if (defunc_0_p_res_92640) {
                            int64_t defunc_1_f_res_t_res_92642 =
                                    sub64(write_iv_94424, (int64_t) 1);
                            
                            defunc_1_f_res_92641 = defunc_1_f_res_t_res_92642;
                        } else {
                            defunc_1_f_res_92641 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_92641) &&
                            slt64(defunc_1_f_res_92641, n_92399)) {
                            ((int64_t *) mem_95138)[defunc_1_f_res_92641] =
                                write_iter_94420;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_92641) &&
                            slt64(defunc_1_f_res_92641, n_92399)) {
                            if ((int64_t) 8 > 0)
                                memmove(mem_95135 + defunc_1_f_res_92641 *
                                        (int64_t) 8, Y_mem_94966.mem +
                                        (i_94454 * n_92399 + write_iter_94420) *
                                        (int64_t) 8, (int64_t) 8);
                        }
                    }
                    for (int64_t i_94430 = 0; i_94430 < n_92399; i_94430++) {
                        int64_t x_92644;
                        
                        x_92644 = ((int64_t *) mem_95138)[i_94430];
                        
                        int64_t defunc_0_f_res_92645 = add64((int64_t) 1,
                                                             x_92644);
                        
                        ((int64_t *) mem_95165)[i_94430] = defunc_0_f_res_92645;
                    }
                    
                    int64_t min_arg_92646 = sub64(last_res_92631, (int64_t) 1);
                    int64_t min_arg_92647 = sub64(last_res_92631,
                                                  min_res_92421);
                    int64_t min_res_92648 = smin64(q_92401, last_res_92631);
                    double i64_res_92649 = sitofp_i64_f64(last_res_92631);
                    double x_92650 = i64_res_92427 - i64_res_92649;
                    double max_arg_92651 = x_92650 / 2.0;
                    double max_res_92652 = fmax64(0.0, max_arg_92651);
                    
                    for (int64_t i_94434 = 0; i_94434 < q_92401; i_94434++) {
                        bool cond_92655 = sle64(last_res_92631, i_94434);
                        double defunc_0_f_res_92656;
                        
                        if (cond_92655) {
                            defunc_0_f_res_92656 = 0.0;
                        } else {
                            defunc_0_f_res_92656 = 1.0;
                        }
                        ((double *) mem_95180)[i_94434] = defunc_0_f_res_92656;
                    }
                    for (int64_t i_94447 = 0; i_94447 < n_m_92409; i_94447++) {
                        int64_t min_arg_92660 = mul64(jump_92403, i_94447);
                        int64_t min_res_92661 = smin64(i_92415, min_arg_92660);
                        int64_t defunc_0_g_res_92662 = add64((int64_t) 1,
                                                             min_res_92661);
                        bool init_idx_92663;
                        int64_t init_idx_92664;
                        int64_t init_idx_92665;
                        bool loop_while_92666;
                        int64_t low_92667;
                        int64_t high_92668;
                        
                        loop_while_92666 = x_92416;
                        low_92667 = (int64_t) 0;
                        high_92668 = i_92415;
                        while (loop_while_92666) {
                            int64_t x_92669 = add64(low_92667, high_92668);
                            int64_t mid_92670 = sdiv64(x_92669, (int64_t) 2);
                            bool x_92671 = sle64((int64_t) 0, mid_92670);
                            bool y_92672 = slt64(mid_92670, n_92399);
                            bool bounds_check_92673 = x_92671 && y_92672;
                            bool index_certs_92674;
                            
                            if (!bounds_check_92673) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_92670,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95097,
                                                   "mem_95097") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95093,
                                                   "mem_95093") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95416,
                                                   "ext_mem_95416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95424,
                                                   "ext_mem_95424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95432,
                                                   "ext_mem_95432") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95440,
                                                   "ext_mem_95440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t mid_id_92675;
                            
                            mid_id_92675 = ((int64_t *) mem_95165)[mid_92670];
                            
                            bool cond_92676 = slt64(mid_id_92675, (int64_t) 0);
                            int64_t mid_idx_92677;
                            
                            if (cond_92676) {
                                mid_idx_92677 = (int64_t) 9223372036854775807;
                            } else {
                                mid_idx_92677 = mid_id_92675;
                            }
                            
                            bool cond_92678 = sle64(defunc_0_g_res_92662,
                                                    mid_idx_92677);
                            int64_t loopres_92679;
                            int64_t loopres_92680;
                            
                            if (cond_92678) {
                                int64_t loopres_t_res_92681 = sub64(mid_92670,
                                                                    (int64_t) 1);
                                
                                loopres_92679 = low_92667;
                                loopres_92680 = loopres_t_res_92681;
                            } else {
                                int64_t loopres_f_res_92682 = add64((int64_t) 1,
                                                                    mid_92670);
                                
                                loopres_92679 = loopres_f_res_92682;
                                loopres_92680 = high_92668;
                            }
                            
                            bool loop_cond_92683 = sle64(loopres_92679,
                                                         loopres_92680);
                            bool loop_while_tmp_96716 = loop_cond_92683;
                            int64_t low_tmp_96717 = loopres_92679;
                            int64_t high_tmp_96718 = loopres_92680;
                            
                            loop_while_92666 = loop_while_tmp_96716;
                            low_92667 = low_tmp_96717;
                            high_92668 = high_tmp_96718;
                        }
                        init_idx_92663 = loop_while_92666;
                        init_idx_92664 = low_92667;
                        init_idx_92665 = high_92668;
                        
                        bool idx_92684;
                        int64_t idx_92685;
                        int64_t idx_92686;
                        int64_t idx_92687;
                        bool loop_while_92688;
                        int64_t l_idx_92689;
                        int64_t r_idx_92690;
                        int64_t span_92691;
                        
                        loop_while_92688 = loop_cond_92426;
                        l_idx_92689 = init_idx_92664;
                        r_idx_92690 = init_idx_92664;
                        span_92691 = (int64_t) 1;
                        while (loop_while_92688) {
                            int64_t max_arg_92692 = sub64(l_idx_92689,
                                                          (int64_t) 1);
                            int64_t max_res_92693 = smax64((int64_t) 0,
                                                           max_arg_92692);
                            int64_t min_arg_92694 = add64((int64_t) 1,
                                                          r_idx_92690);
                            int64_t min_res_92695 = smin64(min_arg_92646,
                                                           min_arg_92694);
                            bool x_92696 = sle64((int64_t) 0, max_res_92693);
                            bool y_92697 = slt64(max_res_92693, n_92399);
                            bool bounds_check_92698 = x_92696 && y_92697;
                            bool index_certs_92699;
                            
                            if (!bounds_check_92698) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_92693,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95097,
                                                   "mem_95097") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95093,
                                                   "mem_95093") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95416,
                                                   "ext_mem_95416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95424,
                                                   "ext_mem_95424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95432,
                                                   "ext_mem_95432") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95440,
                                                   "ext_mem_95440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_92700;
                            
                            x_92700 = ((int64_t *) mem_95165)[max_res_92693];
                            
                            int64_t abs_arg_92701 = sub64(x_92700,
                                                          defunc_0_g_res_92662);
                            int64_t abs_res_92702 = abs64(abs_arg_92701);
                            bool x_92703 = sle64((int64_t) 0, min_res_92695);
                            bool y_92704 = slt64(min_res_92695, n_92399);
                            bool bounds_check_92705 = x_92703 && y_92704;
                            bool index_certs_92706;
                            
                            if (!bounds_check_92705) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_92695,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95097,
                                                   "mem_95097") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95093,
                                                   "mem_95093") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95416,
                                                   "ext_mem_95416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95424,
                                                   "ext_mem_95424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95432,
                                                   "ext_mem_95432") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95440,
                                                   "ext_mem_95440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_92707;
                            
                            x_92707 = ((int64_t *) mem_95165)[min_res_92695];
                            
                            int64_t abs_arg_92708 = sub64(x_92707,
                                                          defunc_0_g_res_92662);
                            int64_t abs_res_92709 = abs64(abs_arg_92708);
                            bool cond_92710 = max_res_92693 == l_idx_92689;
                            int64_t loopres_92711;
                            int64_t loopres_92712;
                            int64_t loopres_92713;
                            
                            if (cond_92710) {
                                loopres_92711 = l_idx_92689;
                                loopres_92712 = r_idx_92690;
                                loopres_92713 = min_res_92421;
                            } else {
                                bool cond_92714 = slt64(abs_res_92702,
                                                        abs_res_92709);
                                bool cond_f_res_92715 = min_res_92695 ==
                                     r_idx_92690;
                                bool x_92716 = !cond_92714;
                                bool y_92717 = cond_f_res_92715 && x_92716;
                                bool cond_92718 = cond_92714 || y_92717;
                                int64_t loopres_f_res_92719;
                                
                                if (cond_92718) {
                                    loopres_f_res_92719 = max_res_92693;
                                } else {
                                    loopres_f_res_92719 = l_idx_92689;
                                }
                                
                                int64_t loopres_f_res_92720;
                                
                                if (cond_92718) {
                                    loopres_f_res_92720 = r_idx_92690;
                                } else {
                                    loopres_f_res_92720 = min_res_92695;
                                }
                                
                                int64_t loopres_f_res_92721;
                                
                                if (cond_92718) {
                                    int64_t loopres_f_res_t_res_92722 =
                                            add64((int64_t) 1, span_92691);
                                    
                                    loopres_f_res_92721 =
                                        loopres_f_res_t_res_92722;
                                } else {
                                    int64_t loopres_f_res_f_res_92723 =
                                            add64((int64_t) 1, span_92691);
                                    
                                    loopres_f_res_92721 =
                                        loopres_f_res_f_res_92723;
                                }
                                loopres_92711 = loopres_f_res_92719;
                                loopres_92712 = loopres_f_res_92720;
                                loopres_92713 = loopres_f_res_92721;
                            }
                            
                            bool loop_cond_92724 = slt64(loopres_92713,
                                                         min_res_92421);
                            bool loop_while_tmp_96719 = loop_cond_92724;
                            int64_t l_idx_tmp_96720 = loopres_92711;
                            int64_t r_idx_tmp_96721 = loopres_92712;
                            int64_t span_tmp_96722 = loopres_92713;
                            
                            loop_while_92688 = loop_while_tmp_96719;
                            l_idx_92689 = l_idx_tmp_96720;
                            r_idx_92690 = r_idx_tmp_96721;
                            span_92691 = span_tmp_96722;
                        }
                        idx_92684 = loop_while_92688;
                        idx_92685 = l_idx_92689;
                        idx_92686 = r_idx_92690;
                        idx_92687 = span_92691;
                        
                        int64_t min_res_92725 = smin64(min_arg_92647,
                                                       idx_92685);
                        int64_t max_res_92726 = smax64((int64_t) 0,
                                                       min_res_92725);
                        int64_t x_92727 = add64(min_res_92648, max_res_92726);
                        int64_t r_92728 = sub64(x_92727, (int64_t) 1);
                        bool x_92729 = sle64((int64_t) 0, r_92728);
                        bool y_92730 = slt64(r_92728, n_92399);
                        bool bounds_check_92731 = x_92729 && y_92730;
                        bool index_certs_92732;
                        
                        if (!bounds_check_92731) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_92728,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_95097, "mem_95097") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_95093, "mem_95093") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95416,
                                               "ext_mem_95416") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95424,
                                               "ext_mem_95424") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_92733;
                        
                        x_92733 = ((int64_t *) mem_95138)[r_92728];
                        
                        int64_t abs_arg_92734 = sub64(x_92733, min_res_92661);
                        int64_t abs_res_92735 = abs64(abs_arg_92734);
                        bool x_92736 = sle64((int64_t) 0, max_res_92726);
                        bool y_92737 = slt64(max_res_92726, n_92399);
                        bool bounds_check_92738 = x_92736 && y_92737;
                        bool index_certs_92739;
                        
                        if (!bounds_check_92738) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_92726,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_95097, "mem_95097") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_95093, "mem_95093") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95416,
                                               "ext_mem_95416") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95424,
                                               "ext_mem_95424") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_92740;
                        
                        x_92740 = ((int64_t *) mem_95138)[max_res_92726];
                        
                        int64_t abs_arg_92741 = sub64(x_92740, min_res_92661);
                        int64_t abs_res_92742 = abs64(abs_arg_92741);
                        int64_t max_res_92743 = smax64(abs_res_92735,
                                                       abs_res_92742);
                        double defunc_0_f_res_92744 =
                               sitofp_i64_f64(max_res_92743);
                        double defunc_1_f_res_92745 = max_res_92652 +
                               defunc_0_f_res_92744;
                        double defunc_2_reduce_res_92746;
                        double defunc_2_reduce_res_92747;
                        double defunc_2_reduce_res_92748;
                        double redout_94436;
                        double redout_94437;
                        double redout_94438;
                        
                        redout_94436 = 0.0;
                        redout_94437 = 0.0;
                        redout_94438 = 0.0;
                        for (int64_t i_94439 = 0; i_94439 < q_92401;
                             i_94439++) {
                            double x_92759;
                            
                            x_92759 = ((double *) mem_95180)[i_94439];
                            
                            bool cond_92760 = sle64(last_res_92631, i_94439);
                            int64_t defunc_0_f_res_92761;
                            
                            if (cond_92760) {
                                defunc_0_f_res_92761 = (int64_t) 0;
                            } else {
                                int64_t i_92762 = add64(max_res_92726, i_94439);
                                int64_t defunc_0_add_arg_92763;
                                
                                defunc_0_add_arg_92763 =
                                    ((int64_t *) mem_95138)[i_92762];
                                
                                int64_t defunc_1_add_res_92764 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_92763);
                                
                                defunc_0_f_res_92761 = defunc_1_add_res_92764;
                            }
                            
                            int64_t binop_p_92765 = sub64(defunc_0_f_res_92761,
                                                          min_res_92661);
                            double defunc_0_f_res_92766 =
                                   sitofp_i64_f64(binop_p_92765);
                            double abs_res_92767 = fabs(defunc_0_f_res_92766);
                            double tmp1_92768 = abs_res_92767 /
                                   defunc_1_f_res_92745;
                            double x_92769 = tmp1_92768 * tmp1_92768;
                            double y_92770 = tmp1_92768 * x_92769;
                            double tmp2_92771 = 1.0 - y_92770;
                            double x_92772 = tmp2_92771 * tmp2_92771;
                            double tmp3_92773 = tmp2_92771 * x_92772;
                            double w_j_92774 = x_92759 * tmp3_92773;
                            double xw_j_92775 = defunc_0_f_res_92766 *
                                   w_j_92774;
                            double x2w_j_92776 = defunc_0_f_res_92766 *
                                   xw_j_92775;
                            double defunc_1_op_res_92751 = w_j_92774 +
                                   redout_94436;
                            double defunc_1_op_res_92754 = xw_j_92775 +
                                   redout_94437;
                            double defunc_1_op_res_92757 = x2w_j_92776 +
                                   redout_94438;
                            double redout_tmp_96723 = defunc_1_op_res_92751;
                            double redout_tmp_96724 = defunc_1_op_res_92754;
                            double redout_tmp_96725 = defunc_1_op_res_92757;
                            
                            redout_94436 = redout_tmp_96723;
                            redout_94437 = redout_tmp_96724;
                            redout_94438 = redout_tmp_96725;
                        }
                        defunc_2_reduce_res_92746 = redout_94436;
                        defunc_2_reduce_res_92747 = redout_94437;
                        defunc_2_reduce_res_92748 = redout_94438;
                        
                        double x_92777 = defunc_2_reduce_res_92746 *
                               defunc_2_reduce_res_92748;
                        double y_92778 = defunc_2_reduce_res_92747 *
                               defunc_2_reduce_res_92747;
                        double y_92779 = x_92777 - y_92778;
                        double det1_92780 = 1.0 / y_92779;
                        double a11_92781 = defunc_2_reduce_res_92748 *
                               det1_92780;
                        double x_92782 = 0.0 - defunc_2_reduce_res_92747;
                        double b11_92783 = det1_92780 * x_92782;
                        double c11_92784 = defunc_2_reduce_res_92746 *
                               det1_92780;
                        double defunc_2_reduce_res_92785;
                        double defunc_2_reduce_res_92786;
                        double redout_94440;
                        double redout_94441;
                        
                        redout_94440 = 0.0;
                        redout_94441 = 0.0;
                        for (int64_t i_94442 = 0; i_94442 < q_92401;
                             i_94442++) {
                            double x_92794;
                            
                            x_92794 = ((double *) mem_95180)[i_94442];
                            
                            bool cond_92795 = sle64(last_res_92631, i_94442);
                            int64_t defunc_0_f_res_92796;
                            
                            if (cond_92795) {
                                defunc_0_f_res_92796 = (int64_t) 0;
                            } else {
                                int64_t i_92797 = add64(max_res_92726, i_94442);
                                int64_t defunc_0_add_arg_92798;
                                
                                defunc_0_add_arg_92798 =
                                    ((int64_t *) mem_95138)[i_92797];
                                
                                int64_t defunc_1_add_res_92799 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_92798);
                                
                                defunc_0_f_res_92796 = defunc_1_add_res_92799;
                            }
                            
                            int64_t binop_p_92800 = sub64(defunc_0_f_res_92796,
                                                          min_res_92661);
                            double defunc_0_f_res_92801 =
                                   sitofp_i64_f64(binop_p_92800);
                            double abs_res_92802 = fabs(defunc_0_f_res_92801);
                            double tmp1_92803 = abs_res_92802 /
                                   defunc_1_f_res_92745;
                            double x_92804 = tmp1_92803 * tmp1_92803;
                            double y_92805 = tmp1_92803 * x_92804;
                            double tmp2_92806 = 1.0 - y_92805;
                            double x_92807 = tmp2_92806 * tmp2_92806;
                            double tmp3_92808 = tmp2_92806 * x_92807;
                            double tmp4_92809 = x_92794 * tmp3_92808;
                            double defunc_1_f_res_92810 = defunc_0_f_res_92801 *
                                   tmp4_92809;
                            double defunc_0_f_res_92811;
                            
                            if (cond_92795) {
                                defunc_0_f_res_92811 = 0.0;
                            } else {
                                int64_t i_92812 = add64(max_res_92726, i_94442);
                                double defunc_0_add_arg_92813;
                                
                                defunc_0_add_arg_92813 =
                                    ((double *) mem_95135)[i_92812];
                                defunc_0_f_res_92811 = defunc_0_add_arg_92813;
                            }
                            
                            double x_92814 = a11_92781 * tmp4_92809;
                            double y_92815 = b11_92783 * defunc_1_f_res_92810;
                            double x_92816 = x_92814 + y_92815;
                            double defunc_9_fit_fun_res_92817 =
                                   defunc_0_f_res_92811 * x_92816;
                            double x_92818 = b11_92783 * tmp4_92809;
                            double y_92819 = c11_92784 * defunc_1_f_res_92810;
                            double x_92820 = x_92818 + y_92819;
                            double defunc_9_slope_fun_res_92821 =
                                   defunc_0_f_res_92811 * x_92820;
                            double defunc_1_op_res_92789 =
                                   defunc_9_fit_fun_res_92817 + redout_94440;
                            double defunc_1_op_res_92792 =
                                   defunc_9_slope_fun_res_92821 + redout_94441;
                            double redout_tmp_96726 = defunc_1_op_res_92789;
                            double redout_tmp_96727 = defunc_1_op_res_92792;
                            
                            redout_94440 = redout_tmp_96726;
                            redout_94441 = redout_tmp_96727;
                        }
                        defunc_2_reduce_res_92785 = redout_94440;
                        defunc_2_reduce_res_92786 = redout_94441;
                        ((double *) mem_95093.mem)[i_94454 * n_m_92409 +
                                                   i_94447] =
                            defunc_2_reduce_res_92785;
                        ((double *) mem_95097.mem)[i_94454 * n_m_92409 +
                                                   i_94447] =
                            defunc_2_reduce_res_92786;
                    }
                }
                if (memblock_set(ctx, &ext_mem_95424, &mem_95093,
                                 "mem_95093") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_95416, &mem_95097,
                                 "mem_95097") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_95097, "mem_95097") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_95093, "mem_95093") != 0)
                    return 1;
            } else {
                struct memblock mem_95256;
                
                mem_95256.references = NULL;
                if (memblock_alloc(ctx, &mem_95256, bytes_95255, "mem_95256")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_95260;
                
                mem_95260.references = NULL;
                if (memblock_alloc(ctx, &mem_95260, bytes_95255, "mem_95260")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_95283_cached_sizze_96916 < (size_t) bytes_95282) {
                    mem_95283 = realloc(mem_95283, bytes_95282);
                    mem_95283_cached_sizze_96916 = bytes_95282;
                }
                if (mem_95298_cached_sizze_96917 < (size_t) bytes_95282) {
                    mem_95298 = realloc(mem_95298, bytes_95282);
                    mem_95298_cached_sizze_96917 = bytes_95282;
                }
                if (mem_95301_cached_sizze_96918 < (size_t) bytes_95282) {
                    mem_95301 = realloc(mem_95301, bytes_95282);
                    mem_95301_cached_sizze_96918 = bytes_95282;
                }
                if (mem_95328_cached_sizze_96919 < (size_t) bytes_95282) {
                    mem_95328 = realloc(mem_95328, bytes_95282);
                    mem_95328_cached_sizze_96919 = bytes_95282;
                }
                if (mem_95343_cached_sizze_96920 < (size_t) bytes_95342) {
                    mem_95343 = realloc(mem_95343, bytes_95342);
                    mem_95343_cached_sizze_96920 = bytes_95342;
                }
                for (int64_t i_94499 = 0; i_94499 < m_92398; i_94499++) {
                    int64_t discard_94462;
                    int64_t scanacc_94458 = (int64_t) 0;
                    
                    for (int64_t i_94460 = 0; i_94460 < n_92399; i_94460++) {
                        double x_92832;
                        
                        x_92832 = ((double *) Y_mem_94966.mem)[i_94499 *
                                                               n_92399 +
                                                               i_94460];
                        
                        bool isnan_res_92833;
                        
                        isnan_res_92833 = futrts_isnan64(x_92832);
                        
                        bool defunc_0_p_res_92834 = !isnan_res_92833;
                        int64_t defunc_0_f_res_92835 =
                                btoi_bool_i64(defunc_0_p_res_92834);
                        int64_t defunc_1_op_res_92831 =
                                add64(defunc_0_f_res_92835, scanacc_94458);
                        
                        ((int64_t *) mem_95283)[i_94460] =
                            defunc_1_op_res_92831;
                        
                        int64_t scanacc_tmp_96730 = defunc_1_op_res_92831;
                        
                        scanacc_94458 = scanacc_tmp_96730;
                    }
                    discard_94462 = scanacc_94458;
                    
                    int64_t last_res_92836;
                    
                    last_res_92836 = ((int64_t *) mem_95283)[i_92415];
                    for (int64_t i_96732 = 0; i_96732 < n_92399; i_96732++) {
                        ((double *) mem_95298)[i_96732] = 0.0;
                    }
                    for (int64_t i_96733 = 0; i_96733 < n_92399; i_96733++) {
                        ((int64_t *) mem_95301)[i_96733] = (int64_t) -1;
                    }
                    for (int64_t write_iter_94463 = 0; write_iter_94463 <
                         n_92399; write_iter_94463++) {
                        double write_iv_94466;
                        
                        write_iv_94466 = ((double *) Y_mem_94966.mem)[i_94499 *
                                                                      n_92399 +
                                                                      write_iter_94463];
                        
                        int64_t write_iv_94467;
                        
                        write_iv_94467 =
                            ((int64_t *) mem_95283)[write_iter_94463];
                        
                        bool isnan_res_92844;
                        
                        isnan_res_92844 = futrts_isnan64(write_iv_94466);
                        
                        bool defunc_0_p_res_92845 = !isnan_res_92844;
                        int64_t defunc_1_f_res_92846;
                        
                        if (defunc_0_p_res_92845) {
                            int64_t defunc_1_f_res_t_res_92847 =
                                    sub64(write_iv_94467, (int64_t) 1);
                            
                            defunc_1_f_res_92846 = defunc_1_f_res_t_res_92847;
                        } else {
                            defunc_1_f_res_92846 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_92846) &&
                            slt64(defunc_1_f_res_92846, n_92399)) {
                            ((int64_t *) mem_95301)[defunc_1_f_res_92846] =
                                write_iter_94463;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_92846) &&
                            slt64(defunc_1_f_res_92846, n_92399)) {
                            if ((int64_t) 8 > 0)
                                memmove(mem_95298 + defunc_1_f_res_92846 *
                                        (int64_t) 8, Y_mem_94966.mem +
                                        (i_94499 * n_92399 + write_iter_94463) *
                                        (int64_t) 8, (int64_t) 8);
                        }
                    }
                    for (int64_t i_94473 = 0; i_94473 < n_92399; i_94473++) {
                        int64_t x_92849;
                        
                        x_92849 = ((int64_t *) mem_95301)[i_94473];
                        
                        int64_t defunc_0_f_res_92850 = add64((int64_t) 1,
                                                             x_92849);
                        
                        ((int64_t *) mem_95328)[i_94473] = defunc_0_f_res_92850;
                    }
                    
                    int64_t min_arg_92851 = sub64(last_res_92836, (int64_t) 1);
                    int64_t min_arg_92852 = sub64(last_res_92836,
                                                  min_res_92421);
                    int64_t min_res_92853 = smin64(q_92401, last_res_92836);
                    double i64_res_92854 = sitofp_i64_f64(last_res_92836);
                    double x_92855 = i64_res_92427 - i64_res_92854;
                    double max_arg_92856 = x_92855 / 2.0;
                    double max_res_92857 = fmax64(0.0, max_arg_92856);
                    
                    for (int64_t i_94477 = 0; i_94477 < q_92401; i_94477++) {
                        bool cond_92860 = sle64(last_res_92836, i_94477);
                        double defunc_0_f_res_92861;
                        
                        if (cond_92860) {
                            defunc_0_f_res_92861 = 0.0;
                        } else {
                            defunc_0_f_res_92861 = 1.0;
                        }
                        ((double *) mem_95343)[i_94477] = defunc_0_f_res_92861;
                    }
                    for (int64_t i_94492 = 0; i_94492 < n_m_92409; i_94492++) {
                        int64_t min_arg_92865 = mul64(jump_92403, i_94492);
                        int64_t min_res_92866 = smin64(i_92415, min_arg_92865);
                        int64_t defunc_0_g_res_92867 = add64((int64_t) 1,
                                                             min_res_92866);
                        bool init_idx_92868;
                        int64_t init_idx_92869;
                        int64_t init_idx_92870;
                        bool loop_while_92871;
                        int64_t low_92872;
                        int64_t high_92873;
                        
                        loop_while_92871 = x_92416;
                        low_92872 = (int64_t) 0;
                        high_92873 = i_92415;
                        while (loop_while_92871) {
                            int64_t x_92874 = add64(low_92872, high_92873);
                            int64_t mid_92875 = sdiv64(x_92874, (int64_t) 2);
                            bool x_92876 = sle64((int64_t) 0, mid_92875);
                            bool y_92877 = slt64(mid_92875, n_92399);
                            bool bounds_check_92878 = x_92876 && y_92877;
                            bool index_certs_92879;
                            
                            if (!bounds_check_92878) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_92875,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95260,
                                                   "mem_95260") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95256,
                                                   "mem_95256") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95416,
                                                   "ext_mem_95416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95424,
                                                   "ext_mem_95424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95432,
                                                   "ext_mem_95432") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95440,
                                                   "ext_mem_95440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t mid_id_92880;
                            
                            mid_id_92880 = ((int64_t *) mem_95328)[mid_92875];
                            
                            bool cond_92881 = slt64(mid_id_92880, (int64_t) 0);
                            int64_t mid_idx_92882;
                            
                            if (cond_92881) {
                                mid_idx_92882 = (int64_t) 9223372036854775807;
                            } else {
                                mid_idx_92882 = mid_id_92880;
                            }
                            
                            bool cond_92883 = sle64(defunc_0_g_res_92867,
                                                    mid_idx_92882);
                            int64_t loopres_92884;
                            int64_t loopres_92885;
                            
                            if (cond_92883) {
                                int64_t loopres_t_res_92886 = sub64(mid_92875,
                                                                    (int64_t) 1);
                                
                                loopres_92884 = low_92872;
                                loopres_92885 = loopres_t_res_92886;
                            } else {
                                int64_t loopres_f_res_92887 = add64((int64_t) 1,
                                                                    mid_92875);
                                
                                loopres_92884 = loopres_f_res_92887;
                                loopres_92885 = high_92873;
                            }
                            
                            bool loop_cond_92888 = sle64(loopres_92884,
                                                         loopres_92885);
                            bool loop_while_tmp_96740 = loop_cond_92888;
                            int64_t low_tmp_96741 = loopres_92884;
                            int64_t high_tmp_96742 = loopres_92885;
                            
                            loop_while_92871 = loop_while_tmp_96740;
                            low_92872 = low_tmp_96741;
                            high_92873 = high_tmp_96742;
                        }
                        init_idx_92868 = loop_while_92871;
                        init_idx_92869 = low_92872;
                        init_idx_92870 = high_92873;
                        
                        bool idx_92889;
                        int64_t idx_92890;
                        int64_t idx_92891;
                        int64_t idx_92892;
                        bool loop_while_92893;
                        int64_t l_idx_92894;
                        int64_t r_idx_92895;
                        int64_t span_92896;
                        
                        loop_while_92893 = loop_cond_92426;
                        l_idx_92894 = init_idx_92869;
                        r_idx_92895 = init_idx_92869;
                        span_92896 = (int64_t) 1;
                        while (loop_while_92893) {
                            int64_t max_arg_92897 = sub64(l_idx_92894,
                                                          (int64_t) 1);
                            int64_t max_res_92898 = smax64((int64_t) 0,
                                                           max_arg_92897);
                            int64_t min_arg_92899 = add64((int64_t) 1,
                                                          r_idx_92895);
                            int64_t min_res_92900 = smin64(min_arg_92851,
                                                           min_arg_92899);
                            bool x_92901 = sle64((int64_t) 0, max_res_92898);
                            bool y_92902 = slt64(max_res_92898, n_92399);
                            bool bounds_check_92903 = x_92901 && y_92902;
                            bool index_certs_92904;
                            
                            if (!bounds_check_92903) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_92898,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95260,
                                                   "mem_95260") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95256,
                                                   "mem_95256") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95416,
                                                   "ext_mem_95416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95424,
                                                   "ext_mem_95424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95432,
                                                   "ext_mem_95432") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95440,
                                                   "ext_mem_95440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_92905;
                            
                            x_92905 = ((int64_t *) mem_95328)[max_res_92898];
                            
                            int64_t abs_arg_92906 = sub64(x_92905,
                                                          defunc_0_g_res_92867);
                            int64_t abs_res_92907 = abs64(abs_arg_92906);
                            bool x_92908 = sle64((int64_t) 0, min_res_92900);
                            bool y_92909 = slt64(min_res_92900, n_92399);
                            bool bounds_check_92910 = x_92908 && y_92909;
                            bool index_certs_92911;
                            
                            if (!bounds_check_92910) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_92900,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95260,
                                                   "mem_95260") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95256,
                                                   "mem_95256") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95416,
                                                   "ext_mem_95416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95424,
                                                   "ext_mem_95424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95432,
                                                   "ext_mem_95432") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_95440,
                                                   "ext_mem_95440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_92912;
                            
                            x_92912 = ((int64_t *) mem_95328)[min_res_92900];
                            
                            int64_t abs_arg_92913 = sub64(x_92912,
                                                          defunc_0_g_res_92867);
                            int64_t abs_res_92914 = abs64(abs_arg_92913);
                            bool cond_92915 = max_res_92898 == l_idx_92894;
                            int64_t loopres_92916;
                            int64_t loopres_92917;
                            int64_t loopres_92918;
                            
                            if (cond_92915) {
                                loopres_92916 = l_idx_92894;
                                loopres_92917 = r_idx_92895;
                                loopres_92918 = min_res_92421;
                            } else {
                                bool cond_92919 = slt64(abs_res_92907,
                                                        abs_res_92914);
                                bool cond_f_res_92920 = min_res_92900 ==
                                     r_idx_92895;
                                bool x_92921 = !cond_92919;
                                bool y_92922 = cond_f_res_92920 && x_92921;
                                bool cond_92923 = cond_92919 || y_92922;
                                int64_t loopres_f_res_92924;
                                
                                if (cond_92923) {
                                    loopres_f_res_92924 = max_res_92898;
                                } else {
                                    loopres_f_res_92924 = l_idx_92894;
                                }
                                
                                int64_t loopres_f_res_92925;
                                
                                if (cond_92923) {
                                    loopres_f_res_92925 = r_idx_92895;
                                } else {
                                    loopres_f_res_92925 = min_res_92900;
                                }
                                
                                int64_t loopres_f_res_92926;
                                
                                if (cond_92923) {
                                    int64_t loopres_f_res_t_res_92927 =
                                            add64((int64_t) 1, span_92896);
                                    
                                    loopres_f_res_92926 =
                                        loopres_f_res_t_res_92927;
                                } else {
                                    int64_t loopres_f_res_f_res_92928 =
                                            add64((int64_t) 1, span_92896);
                                    
                                    loopres_f_res_92926 =
                                        loopres_f_res_f_res_92928;
                                }
                                loopres_92916 = loopres_f_res_92924;
                                loopres_92917 = loopres_f_res_92925;
                                loopres_92918 = loopres_f_res_92926;
                            }
                            
                            bool loop_cond_92929 = slt64(loopres_92918,
                                                         min_res_92421);
                            bool loop_while_tmp_96743 = loop_cond_92929;
                            int64_t l_idx_tmp_96744 = loopres_92916;
                            int64_t r_idx_tmp_96745 = loopres_92917;
                            int64_t span_tmp_96746 = loopres_92918;
                            
                            loop_while_92893 = loop_while_tmp_96743;
                            l_idx_92894 = l_idx_tmp_96744;
                            r_idx_92895 = r_idx_tmp_96745;
                            span_92896 = span_tmp_96746;
                        }
                        idx_92889 = loop_while_92893;
                        idx_92890 = l_idx_92894;
                        idx_92891 = r_idx_92895;
                        idx_92892 = span_92896;
                        
                        int64_t min_res_92930 = smin64(min_arg_92852,
                                                       idx_92890);
                        int64_t max_res_92931 = smax64((int64_t) 0,
                                                       min_res_92930);
                        int64_t x_92932 = add64(min_res_92853, max_res_92931);
                        int64_t r_92933 = sub64(x_92932, (int64_t) 1);
                        bool x_92934 = sle64((int64_t) 0, r_92933);
                        bool y_92935 = slt64(r_92933, n_92399);
                        bool bounds_check_92936 = x_92934 && y_92935;
                        bool index_certs_92937;
                        
                        if (!bounds_check_92936) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_92933,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_95260, "mem_95260") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_95256, "mem_95256") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95416,
                                               "ext_mem_95416") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95424,
                                               "ext_mem_95424") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_92938;
                        
                        x_92938 = ((int64_t *) mem_95301)[r_92933];
                        
                        int64_t abs_arg_92939 = sub64(x_92938, min_res_92866);
                        int64_t abs_res_92940 = abs64(abs_arg_92939);
                        bool x_92941 = sle64((int64_t) 0, max_res_92931);
                        bool y_92942 = slt64(max_res_92931, n_92399);
                        bool bounds_check_92943 = x_92941 && y_92942;
                        bool index_certs_92944;
                        
                        if (!bounds_check_92943) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_92931,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_95260, "mem_95260") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_95256, "mem_95256") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95416,
                                               "ext_mem_95416") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95424,
                                               "ext_mem_95424") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95432,
                                               "ext_mem_95432") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_95440,
                                               "ext_mem_95440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_92945;
                        
                        x_92945 = ((int64_t *) mem_95301)[max_res_92931];
                        
                        int64_t abs_arg_92946 = sub64(x_92945, min_res_92866);
                        int64_t abs_res_92947 = abs64(abs_arg_92946);
                        int64_t max_res_92948 = smax64(abs_res_92940,
                                                       abs_res_92947);
                        double defunc_0_f_res_92949 =
                               sitofp_i64_f64(max_res_92948);
                        double defunc_1_f_res_92950 = max_res_92857 +
                               defunc_0_f_res_92949;
                        double defunc_2_reduce_res_92951;
                        double defunc_2_reduce_res_92952;
                        double defunc_2_reduce_res_92953;
                        double defunc_2_reduce_res_92954;
                        double defunc_2_reduce_res_92955;
                        double redout_94479;
                        double redout_94480;
                        double redout_94481;
                        double redout_94482;
                        double redout_94483;
                        
                        redout_94479 = 0.0;
                        redout_94480 = 0.0;
                        redout_94481 = 0.0;
                        redout_94482 = 0.0;
                        redout_94483 = 0.0;
                        for (int64_t i_94484 = 0; i_94484 < q_92401;
                             i_94484++) {
                            double x_92972;
                            
                            x_92972 = ((double *) mem_95343)[i_94484];
                            
                            bool cond_92973 = sle64(last_res_92836, i_94484);
                            int64_t defunc_0_f_res_92974;
                            
                            if (cond_92973) {
                                defunc_0_f_res_92974 = (int64_t) 0;
                            } else {
                                int64_t i_92975 = add64(max_res_92931, i_94484);
                                int64_t defunc_0_add_arg_92976;
                                
                                defunc_0_add_arg_92976 =
                                    ((int64_t *) mem_95301)[i_92975];
                                
                                int64_t defunc_1_add_res_92977 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_92976);
                                
                                defunc_0_f_res_92974 = defunc_1_add_res_92977;
                            }
                            
                            int64_t binop_p_92978 = sub64(defunc_0_f_res_92974,
                                                          min_res_92866);
                            double defunc_0_f_res_92979 =
                                   sitofp_i64_f64(binop_p_92978);
                            double abs_res_92980 = fabs(defunc_0_f_res_92979);
                            double tmp1_92981 = abs_res_92980 /
                                   defunc_1_f_res_92950;
                            double x_92982 = tmp1_92981 * tmp1_92981;
                            double y_92983 = tmp1_92981 * x_92982;
                            double tmp2_92984 = 1.0 - y_92983;
                            double x_92985 = tmp2_92984 * tmp2_92984;
                            double tmp3_92986 = tmp2_92984 * x_92985;
                            double w_j_92987 = x_92972 * tmp3_92986;
                            double xw_j_92988 = defunc_0_f_res_92979 *
                                   w_j_92987;
                            double x2w_j_92989 = defunc_0_f_res_92979 *
                                   xw_j_92988;
                            double x3w_j_92990 = defunc_0_f_res_92979 *
                                   x2w_j_92989;
                            double x4w_j_92991 = defunc_0_f_res_92979 *
                                   x3w_j_92990;
                            double defunc_1_op_res_92958 = w_j_92987 +
                                   redout_94479;
                            double defunc_1_op_res_92961 = xw_j_92988 +
                                   redout_94480;
                            double defunc_1_op_res_92964 = x2w_j_92989 +
                                   redout_94481;
                            double defunc_1_op_res_92967 = x3w_j_92990 +
                                   redout_94482;
                            double defunc_1_op_res_92970 = x4w_j_92991 +
                                   redout_94483;
                            double redout_tmp_96747 = defunc_1_op_res_92958;
                            double redout_tmp_96748 = defunc_1_op_res_92961;
                            double redout_tmp_96749 = defunc_1_op_res_92964;
                            double redout_tmp_96750 = defunc_1_op_res_92967;
                            double redout_tmp_96751 = defunc_1_op_res_92970;
                            
                            redout_94479 = redout_tmp_96747;
                            redout_94480 = redout_tmp_96748;
                            redout_94481 = redout_tmp_96749;
                            redout_94482 = redout_tmp_96750;
                            redout_94483 = redout_tmp_96751;
                        }
                        defunc_2_reduce_res_92951 = redout_94479;
                        defunc_2_reduce_res_92952 = redout_94480;
                        defunc_2_reduce_res_92953 = redout_94481;
                        defunc_2_reduce_res_92954 = redout_94482;
                        defunc_2_reduce_res_92955 = redout_94483;
                        
                        double x_92992 = defunc_2_reduce_res_92953 *
                               defunc_2_reduce_res_92955;
                        double y_92993 = defunc_2_reduce_res_92954 *
                               defunc_2_reduce_res_92954;
                        double a12_92994 = x_92992 - y_92993;
                        double x_92995 = defunc_2_reduce_res_92953 *
                               defunc_2_reduce_res_92954;
                        double y_92996 = defunc_2_reduce_res_92952 *
                               defunc_2_reduce_res_92955;
                        double b12_92997 = x_92995 - y_92996;
                        double x_92998 = defunc_2_reduce_res_92952 *
                               defunc_2_reduce_res_92954;
                        double y_92999 = defunc_2_reduce_res_92953 *
                               defunc_2_reduce_res_92953;
                        double c12_93000 = x_92998 - y_92999;
                        double x_93001 = defunc_2_reduce_res_92951 *
                               defunc_2_reduce_res_92955;
                        double b2_93002 = x_93001 - y_92999;
                        double x_93003 = defunc_2_reduce_res_92952 *
                               defunc_2_reduce_res_92953;
                        double y_93004 = defunc_2_reduce_res_92951 *
                               defunc_2_reduce_res_92954;
                        double c2_93005 = x_93003 - y_93004;
                        double x_93006 = defunc_2_reduce_res_92951 * a12_92994;
                        double y_93007 = defunc_2_reduce_res_92952 * b12_92997;
                        double x_93008 = x_93006 + y_93007;
                        double y_93009 = defunc_2_reduce_res_92953 * c12_93000;
                        double y_93010 = x_93008 + y_93009;
                        double det_93011 = 1.0 / y_93010;
                        double a12_93012 = a12_92994 * det_93011;
                        double b12_93013 = b12_92997 * det_93011;
                        double c12_93014 = c12_93000 * det_93011;
                        double b2_93015 = b2_93002 * det_93011;
                        double c2_93016 = c2_93005 * det_93011;
                        double defunc_2_reduce_res_93017;
                        double defunc_2_reduce_res_93018;
                        double redout_94485;
                        double redout_94486;
                        
                        redout_94485 = 0.0;
                        redout_94486 = 0.0;
                        for (int64_t i_94487 = 0; i_94487 < q_92401;
                             i_94487++) {
                            double x_93026;
                            
                            x_93026 = ((double *) mem_95343)[i_94487];
                            
                            bool cond_93027 = sle64(last_res_92836, i_94487);
                            int64_t defunc_0_f_res_93028;
                            
                            if (cond_93027) {
                                defunc_0_f_res_93028 = (int64_t) 0;
                            } else {
                                int64_t i_93029 = add64(max_res_92931, i_94487);
                                int64_t defunc_0_add_arg_93030;
                                
                                defunc_0_add_arg_93030 =
                                    ((int64_t *) mem_95301)[i_93029];
                                
                                int64_t defunc_1_add_res_93031 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_93030);
                                
                                defunc_0_f_res_93028 = defunc_1_add_res_93031;
                            }
                            
                            int64_t binop_p_93032 = sub64(defunc_0_f_res_93028,
                                                          min_res_92866);
                            double defunc_0_f_res_93033 =
                                   sitofp_i64_f64(binop_p_93032);
                            double abs_res_93034 = fabs(defunc_0_f_res_93033);
                            double tmp1_93035 = abs_res_93034 /
                                   defunc_1_f_res_92950;
                            double x_93036 = tmp1_93035 * tmp1_93035;
                            double y_93037 = tmp1_93035 * x_93036;
                            double tmp2_93038 = 1.0 - y_93037;
                            double x_93039 = tmp2_93038 * tmp2_93038;
                            double tmp3_93040 = tmp2_93038 * x_93039;
                            double tmp4_93041 = x_93026 * tmp3_93040;
                            double defunc_1_f_res_93042 = defunc_0_f_res_93033 *
                                   tmp4_93041;
                            double defunc_1_f_res_93043 = defunc_0_f_res_93033 *
                                   defunc_1_f_res_93042;
                            double defunc_0_f_res_93044;
                            
                            if (cond_93027) {
                                defunc_0_f_res_93044 = 0.0;
                            } else {
                                int64_t i_93045 = add64(max_res_92931, i_94487);
                                double defunc_0_add_arg_93046;
                                
                                defunc_0_add_arg_93046 =
                                    ((double *) mem_95298)[i_93045];
                                defunc_0_f_res_93044 = defunc_0_add_arg_93046;
                            }
                            
                            double x_93047 = a12_93012 * tmp4_93041;
                            double y_93048 = b12_93013 * defunc_1_f_res_93042;
                            double x_93049 = x_93047 + y_93048;
                            double y_93050 = c12_93014 * defunc_1_f_res_93043;
                            double x_93051 = x_93049 + y_93050;
                            double defunc_9_fit_fun_res_93052 =
                                   defunc_0_f_res_93044 * x_93051;
                            double x_93053 = b12_93013 * tmp4_93041;
                            double y_93054 = b2_93015 * defunc_1_f_res_93042;
                            double x_93055 = x_93053 + y_93054;
                            double y_93056 = c2_93016 * defunc_1_f_res_93043;
                            double x_93057 = x_93055 + y_93056;
                            double defunc_9_slope_fun_res_93058 =
                                   defunc_0_f_res_93044 * x_93057;
                            double defunc_1_op_res_93021 =
                                   defunc_9_fit_fun_res_93052 + redout_94485;
                            double defunc_1_op_res_93024 =
                                   defunc_9_slope_fun_res_93058 + redout_94486;
                            double redout_tmp_96752 = defunc_1_op_res_93021;
                            double redout_tmp_96753 = defunc_1_op_res_93024;
                            
                            redout_94485 = redout_tmp_96752;
                            redout_94486 = redout_tmp_96753;
                        }
                        defunc_2_reduce_res_93017 = redout_94485;
                        defunc_2_reduce_res_93018 = redout_94486;
                        ((double *) mem_95256.mem)[i_94499 * n_m_92409 +
                                                   i_94492] =
                            defunc_2_reduce_res_93017;
                        ((double *) mem_95260.mem)[i_94499 * n_m_92409 +
                                                   i_94492] =
                            defunc_2_reduce_res_93018;
                    }
                }
                if (memblock_set(ctx, &ext_mem_95424, &mem_95256,
                                 "mem_95256") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_95416, &mem_95260,
                                 "mem_95260") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_95260, "mem_95260") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_95256, "mem_95256") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_95440, &ext_mem_95424,
                             "ext_mem_95424") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_95432, &ext_mem_95416,
                             "ext_mem_95416") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_95416, "ext_mem_95416") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_95424, "ext_mem_95424") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_96539, &ext_mem_95440,
                         "ext_mem_95440") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_96531, &ext_mem_95432,
                         "ext_mem_95432") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_95432, "ext_mem_95432") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_95440, "ext_mem_95440") != 0)
            return 1;
    } else {
        bool cond_93061 = sle64(jump_threshold_2_92405, jump_92403);
        bool cond_t_res_93062 = slt64(q_92401, q_threshold_1_92406);
        bool x_93063 = cond_93061 && cond_t_res_93062;
        struct memblock ext_mem_96523;
        
        ext_mem_96523.references = NULL;
        
        struct memblock ext_mem_96515;
        
        ext_mem_96515.references = NULL;
        if (x_93063) {
            bool match_lit_93066 = (int64_t) 0 == degree_92402;
            int64_t binop_x_95448 = m_92398 * n_m_92409;
            int64_t binop_y_95449 = (int64_t) 8 * binop_x_95448;
            int64_t bytes_95450 = smax64((int64_t) 0, binop_y_95449);
            int64_t binop_y_95466 = (int64_t) 8 * n_92399;
            int64_t bytes_95467 = smax64((int64_t) 0, binop_y_95466);
            int64_t binop_y_95526 = (int64_t) 8 * q_92401;
            int64_t bytes_95527 = smax64((int64_t) 0, binop_y_95526);
            struct memblock ext_mem_96026;
            
            ext_mem_96026.references = NULL;
            
            struct memblock ext_mem_96018;
            
            ext_mem_96018.references = NULL;
            if (match_lit_93066) {
                struct memblock mem_95451;
                
                mem_95451.references = NULL;
                if (memblock_alloc(ctx, &mem_95451, bytes_95450, "mem_95451")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_96754 = 0; i_96754 < m_92398; i_96754++) {
                    for (int64_t i_96755 = 0; i_96755 < n_m_92409; i_96755++) {
                        ((double *) mem_95451.mem)[i_96754 * n_m_92409 +
                                                   i_96755] = 0.0;
                    }
                }
                
                struct memblock mem_95455;
                
                mem_95455.references = NULL;
                if (memblock_alloc(ctx, &mem_95455, bytes_95450, "mem_95455")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_95468_cached_sizze_96921 < (size_t) bytes_95467) {
                    mem_95468 = realloc(mem_95468, bytes_95467);
                    mem_95468_cached_sizze_96921 = bytes_95467;
                }
                if (mem_95483_cached_sizze_96922 < (size_t) bytes_95467) {
                    mem_95483 = realloc(mem_95483, bytes_95467);
                    mem_95483_cached_sizze_96922 = bytes_95467;
                }
                if (mem_95486_cached_sizze_96923 < (size_t) bytes_95467) {
                    mem_95486 = realloc(mem_95486, bytes_95467);
                    mem_95486_cached_sizze_96923 = bytes_95467;
                }
                if (mem_95513_cached_sizze_96924 < (size_t) bytes_95467) {
                    mem_95513 = realloc(mem_95513, bytes_95467);
                    mem_95513_cached_sizze_96924 = bytes_95467;
                }
                if (mem_95528_cached_sizze_96925 < (size_t) bytes_95527) {
                    mem_95528 = realloc(mem_95528, bytes_95527);
                    mem_95528_cached_sizze_96925 = bytes_95527;
                }
                if (mem_95554_cached_sizze_96926 < (size_t) bytes_95527) {
                    mem_95554 = realloc(mem_95554, bytes_95527);
                    mem_95554_cached_sizze_96926 = bytes_95527;
                }
                for (int64_t i_94537 = 0; i_94537 < m_92398; i_94537++) {
                    int64_t discard_94507;
                    int64_t scanacc_94503 = (int64_t) 0;
                    
                    for (int64_t i_94505 = 0; i_94505 < n_92399; i_94505++) {
                        double x_93077;
                        
                        x_93077 = ((double *) Y_mem_94966.mem)[i_94537 *
                                                               n_92399 +
                                                               i_94505];
                        
                        bool isnan_res_93078;
                        
                        isnan_res_93078 = futrts_isnan64(x_93077);
                        
                        bool defunc_0_p_res_93079 = !isnan_res_93078;
                        int64_t defunc_0_f_res_93080 =
                                btoi_bool_i64(defunc_0_p_res_93079);
                        int64_t defunc_1_op_res_93076 =
                                add64(defunc_0_f_res_93080, scanacc_94503);
                        
                        ((int64_t *) mem_95468)[i_94505] =
                            defunc_1_op_res_93076;
                        
                        int64_t scanacc_tmp_96757 = defunc_1_op_res_93076;
                        
                        scanacc_94503 = scanacc_tmp_96757;
                    }
                    discard_94507 = scanacc_94503;
                    
                    int64_t last_res_93081;
                    
                    last_res_93081 = ((int64_t *) mem_95468)[i_92415];
                    for (int64_t i_96759 = 0; i_96759 < n_92399; i_96759++) {
                        ((double *) mem_95483)[i_96759] = 0.0;
                    }
                    for (int64_t i_96760 = 0; i_96760 < n_92399; i_96760++) {
                        ((int64_t *) mem_95486)[i_96760] = (int64_t) -1;
                    }
                    for (int64_t write_iter_94508 = 0; write_iter_94508 <
                         n_92399; write_iter_94508++) {
                        double write_iv_94511;
                        
                        write_iv_94511 = ((double *) Y_mem_94966.mem)[i_94537 *
                                                                      n_92399 +
                                                                      write_iter_94508];
                        
                        int64_t write_iv_94512;
                        
                        write_iv_94512 =
                            ((int64_t *) mem_95468)[write_iter_94508];
                        
                        bool isnan_res_93089;
                        
                        isnan_res_93089 = futrts_isnan64(write_iv_94511);
                        
                        bool defunc_0_p_res_93090 = !isnan_res_93089;
                        int64_t defunc_1_f_res_93091;
                        
                        if (defunc_0_p_res_93090) {
                            int64_t defunc_1_f_res_t_res_93092 =
                                    sub64(write_iv_94512, (int64_t) 1);
                            
                            defunc_1_f_res_93091 = defunc_1_f_res_t_res_93092;
                        } else {
                            defunc_1_f_res_93091 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_93091) &&
                            slt64(defunc_1_f_res_93091, n_92399)) {
                            ((int64_t *) mem_95486)[defunc_1_f_res_93091] =
                                write_iter_94508;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_93091) &&
                            slt64(defunc_1_f_res_93091, n_92399)) {
                            if ((int64_t) 8 > 0)
                                memmove(mem_95483 + defunc_1_f_res_93091 *
                                        (int64_t) 8, Y_mem_94966.mem +
                                        (i_94537 * n_92399 + write_iter_94508) *
                                        (int64_t) 8, (int64_t) 8);
                        }
                    }
                    for (int64_t i_94518 = 0; i_94518 < n_92399; i_94518++) {
                        int64_t x_93094;
                        
                        x_93094 = ((int64_t *) mem_95486)[i_94518];
                        
                        int64_t defunc_0_f_res_93095 = add64((int64_t) 1,
                                                             x_93094);
                        
                        ((int64_t *) mem_95513)[i_94518] = defunc_0_f_res_93095;
                    }
                    
                    int64_t min_arg_93096 = sub64(last_res_93081, (int64_t) 1);
                    int64_t min_arg_93097 = sub64(last_res_93081,
                                                  min_res_92421);
                    int64_t min_res_93098 = smin64(q_92401, last_res_93081);
                    double i64_res_93099 = sitofp_i64_f64(last_res_93081);
                    double x_93100 = i64_res_92427 - i64_res_93099;
                    double max_arg_93101 = x_93100 / 2.0;
                    double max_res_93102 = fmax64(0.0, max_arg_93101);
                    
                    for (int64_t i_94522 = 0; i_94522 < q_92401; i_94522++) {
                        bool cond_93105 = sle64(last_res_93081, i_94522);
                        double defunc_0_f_res_93106;
                        
                        if (cond_93105) {
                            defunc_0_f_res_93106 = 0.0;
                        } else {
                            defunc_0_f_res_93106 = 1.0;
                        }
                        ((double *) mem_95528)[i_94522] = defunc_0_f_res_93106;
                    }
                    for (int64_t i_94533 = 0; i_94533 < n_m_92409; i_94533++) {
                        int64_t min_arg_93109 = mul64(jump_92403, i_94533);
                        int64_t min_res_93110 = smin64(i_92415, min_arg_93109);
                        int64_t defunc_0_g_res_93111 = add64((int64_t) 1,
                                                             min_res_93110);
                        bool init_idx_93112;
                        int64_t init_idx_93113;
                        int64_t init_idx_93114;
                        bool loop_while_93115;
                        int64_t low_93116;
                        int64_t high_93117;
                        
                        loop_while_93115 = x_92416;
                        low_93116 = (int64_t) 0;
                        high_93117 = i_92415;
                        while (loop_while_93115) {
                            int64_t x_93118 = add64(low_93116, high_93117);
                            int64_t mid_93119 = sdiv64(x_93118, (int64_t) 2);
                            bool x_93120 = sle64((int64_t) 0, mid_93119);
                            bool y_93121 = slt64(mid_93119, n_92399);
                            bool bounds_check_93122 = x_93120 && y_93121;
                            bool index_certs_93123;
                            
                            if (!bounds_check_93122) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_93119,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95455,
                                                   "mem_95455") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95451,
                                                   "mem_95451") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t mid_id_93124;
                            
                            mid_id_93124 = ((int64_t *) mem_95513)[mid_93119];
                            
                            bool cond_93125 = slt64(mid_id_93124, (int64_t) 0);
                            int64_t mid_idx_93126;
                            
                            if (cond_93125) {
                                mid_idx_93126 = (int64_t) 9223372036854775807;
                            } else {
                                mid_idx_93126 = mid_id_93124;
                            }
                            
                            bool cond_93127 = sle64(defunc_0_g_res_93111,
                                                    mid_idx_93126);
                            int64_t loopres_93128;
                            int64_t loopres_93129;
                            
                            if (cond_93127) {
                                int64_t loopres_t_res_93130 = sub64(mid_93119,
                                                                    (int64_t) 1);
                                
                                loopres_93128 = low_93116;
                                loopres_93129 = loopres_t_res_93130;
                            } else {
                                int64_t loopres_f_res_93131 = add64((int64_t) 1,
                                                                    mid_93119);
                                
                                loopres_93128 = loopres_f_res_93131;
                                loopres_93129 = high_93117;
                            }
                            
                            bool loop_cond_93132 = sle64(loopres_93128,
                                                         loopres_93129);
                            bool loop_while_tmp_96766 = loop_cond_93132;
                            int64_t low_tmp_96767 = loopres_93128;
                            int64_t high_tmp_96768 = loopres_93129;
                            
                            loop_while_93115 = loop_while_tmp_96766;
                            low_93116 = low_tmp_96767;
                            high_93117 = high_tmp_96768;
                        }
                        init_idx_93112 = loop_while_93115;
                        init_idx_93113 = low_93116;
                        init_idx_93114 = high_93117;
                        
                        bool idx_93133;
                        int64_t idx_93134;
                        int64_t idx_93135;
                        int64_t idx_93136;
                        bool loop_while_93137;
                        int64_t l_idx_93138;
                        int64_t r_idx_93139;
                        int64_t span_93140;
                        
                        loop_while_93137 = loop_cond_92426;
                        l_idx_93138 = init_idx_93113;
                        r_idx_93139 = init_idx_93113;
                        span_93140 = (int64_t) 1;
                        while (loop_while_93137) {
                            int64_t max_arg_93141 = sub64(l_idx_93138,
                                                          (int64_t) 1);
                            int64_t max_res_93142 = smax64((int64_t) 0,
                                                           max_arg_93141);
                            int64_t min_arg_93143 = add64((int64_t) 1,
                                                          r_idx_93139);
                            int64_t min_res_93144 = smin64(min_arg_93096,
                                                           min_arg_93143);
                            bool x_93145 = sle64((int64_t) 0, max_res_93142);
                            bool y_93146 = slt64(max_res_93142, n_92399);
                            bool bounds_check_93147 = x_93145 && y_93146;
                            bool index_certs_93148;
                            
                            if (!bounds_check_93147) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_93142,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95455,
                                                   "mem_95455") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95451,
                                                   "mem_95451") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93149;
                            
                            x_93149 = ((int64_t *) mem_95513)[max_res_93142];
                            
                            int64_t abs_arg_93150 = sub64(x_93149,
                                                          defunc_0_g_res_93111);
                            int64_t abs_res_93151 = abs64(abs_arg_93150);
                            bool x_93152 = sle64((int64_t) 0, min_res_93144);
                            bool y_93153 = slt64(min_res_93144, n_92399);
                            bool bounds_check_93154 = x_93152 && y_93153;
                            bool index_certs_93155;
                            
                            if (!bounds_check_93154) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_93144,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95455,
                                                   "mem_95455") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95451,
                                                   "mem_95451") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93156;
                            
                            x_93156 = ((int64_t *) mem_95513)[min_res_93144];
                            
                            int64_t abs_arg_93157 = sub64(x_93156,
                                                          defunc_0_g_res_93111);
                            int64_t abs_res_93158 = abs64(abs_arg_93157);
                            bool cond_93159 = max_res_93142 == l_idx_93138;
                            int64_t loopres_93160;
                            int64_t loopres_93161;
                            int64_t loopres_93162;
                            
                            if (cond_93159) {
                                loopres_93160 = l_idx_93138;
                                loopres_93161 = r_idx_93139;
                                loopres_93162 = min_res_92421;
                            } else {
                                bool cond_93163 = slt64(abs_res_93151,
                                                        abs_res_93158);
                                bool cond_f_res_93164 = min_res_93144 ==
                                     r_idx_93139;
                                bool x_93165 = !cond_93163;
                                bool y_93166 = cond_f_res_93164 && x_93165;
                                bool cond_93167 = cond_93163 || y_93166;
                                int64_t loopres_f_res_93168;
                                
                                if (cond_93167) {
                                    loopres_f_res_93168 = max_res_93142;
                                } else {
                                    loopres_f_res_93168 = l_idx_93138;
                                }
                                
                                int64_t loopres_f_res_93169;
                                
                                if (cond_93167) {
                                    loopres_f_res_93169 = r_idx_93139;
                                } else {
                                    loopres_f_res_93169 = min_res_93144;
                                }
                                
                                int64_t loopres_f_res_93170;
                                
                                if (cond_93167) {
                                    int64_t loopres_f_res_t_res_93171 =
                                            add64((int64_t) 1, span_93140);
                                    
                                    loopres_f_res_93170 =
                                        loopres_f_res_t_res_93171;
                                } else {
                                    int64_t loopres_f_res_f_res_93172 =
                                            add64((int64_t) 1, span_93140);
                                    
                                    loopres_f_res_93170 =
                                        loopres_f_res_f_res_93172;
                                }
                                loopres_93160 = loopres_f_res_93168;
                                loopres_93161 = loopres_f_res_93169;
                                loopres_93162 = loopres_f_res_93170;
                            }
                            
                            bool loop_cond_93173 = slt64(loopres_93162,
                                                         min_res_92421);
                            bool loop_while_tmp_96769 = loop_cond_93173;
                            int64_t l_idx_tmp_96770 = loopres_93160;
                            int64_t r_idx_tmp_96771 = loopres_93161;
                            int64_t span_tmp_96772 = loopres_93162;
                            
                            loop_while_93137 = loop_while_tmp_96769;
                            l_idx_93138 = l_idx_tmp_96770;
                            r_idx_93139 = r_idx_tmp_96771;
                            span_93140 = span_tmp_96772;
                        }
                        idx_93133 = loop_while_93137;
                        idx_93134 = l_idx_93138;
                        idx_93135 = r_idx_93139;
                        idx_93136 = span_93140;
                        
                        int64_t min_res_93174 = smin64(min_arg_93097,
                                                       idx_93134);
                        int64_t max_res_93175 = smax64((int64_t) 0,
                                                       min_res_93174);
                        int64_t x_93176 = add64(min_res_93098, max_res_93175);
                        int64_t r_93177 = sub64(x_93176, (int64_t) 1);
                        bool x_93178 = sle64((int64_t) 0, r_93177);
                        bool y_93179 = slt64(r_93177, n_92399);
                        bool bounds_check_93180 = x_93178 && y_93179;
                        bool index_certs_93181;
                        
                        if (!bounds_check_93180) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_93177,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_95455, "mem_95455") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_95451, "mem_95451") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96018,
                                               "ext_mem_96018") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96026,
                                               "ext_mem_96026") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96515,
                                               "ext_mem_96515") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96523,
                                               "ext_mem_96523") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_93182;
                        
                        x_93182 = ((int64_t *) mem_95486)[r_93177];
                        
                        int64_t abs_arg_93183 = sub64(x_93182, min_res_93110);
                        int64_t abs_res_93184 = abs64(abs_arg_93183);
                        bool x_93185 = sle64((int64_t) 0, max_res_93175);
                        bool y_93186 = slt64(max_res_93175, n_92399);
                        bool bounds_check_93187 = x_93185 && y_93186;
                        bool index_certs_93188;
                        
                        if (!bounds_check_93187) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_93175,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_95455, "mem_95455") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_95451, "mem_95451") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96018,
                                               "ext_mem_96018") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96026,
                                               "ext_mem_96026") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96515,
                                               "ext_mem_96515") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96523,
                                               "ext_mem_96523") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_93189;
                        
                        x_93189 = ((int64_t *) mem_95486)[max_res_93175];
                        
                        int64_t abs_arg_93190 = sub64(x_93189, min_res_93110);
                        int64_t abs_res_93191 = abs64(abs_arg_93190);
                        int64_t max_res_93192 = smax64(abs_res_93184,
                                                       abs_res_93191);
                        double defunc_0_f_res_93193 =
                               sitofp_i64_f64(max_res_93192);
                        double defunc_1_f_res_93194 = max_res_93102 +
                               defunc_0_f_res_93193;
                        double defunc_2_reduce_res_93195;
                        double redout_94525 = 0.0;
                        
                        for (int64_t i_94527 = 0; i_94527 < q_92401;
                             i_94527++) {
                            double x_93201;
                            
                            x_93201 = ((double *) mem_95528)[i_94527];
                            
                            bool cond_93202 = sle64(last_res_93081, i_94527);
                            int64_t defunc_0_f_res_93203;
                            
                            if (cond_93202) {
                                defunc_0_f_res_93203 = (int64_t) 0;
                            } else {
                                int64_t i_93204 = add64(max_res_93175, i_94527);
                                int64_t defunc_0_add_arg_93205;
                                
                                defunc_0_add_arg_93205 =
                                    ((int64_t *) mem_95486)[i_93204];
                                
                                int64_t defunc_1_add_res_93206 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_93205);
                                
                                defunc_0_f_res_93203 = defunc_1_add_res_93206;
                            }
                            
                            int64_t binop_p_93207 = sub64(defunc_0_f_res_93203,
                                                          min_res_93110);
                            double defunc_0_f_res_93208 =
                                   sitofp_i64_f64(binop_p_93207);
                            double abs_res_93209 = fabs(defunc_0_f_res_93208);
                            double tmp1_93210 = abs_res_93209 /
                                   defunc_1_f_res_93194;
                            double x_93211 = tmp1_93210 * tmp1_93210;
                            double y_93212 = tmp1_93210 * x_93211;
                            double tmp2_93213 = 1.0 - y_93212;
                            double x_93214 = tmp2_93213 * tmp2_93213;
                            double tmp3_93215 = tmp2_93213 * x_93214;
                            double tmp4_93216 = x_93201 * tmp3_93215;
                            double defunc_1_op_res_93199 = tmp4_93216 +
                                   redout_94525;
                            
                            ((double *) mem_95554)[i_94527] = tmp4_93216;
                            
                            double redout_tmp_96773 = defunc_1_op_res_93199;
                            
                            redout_94525 = redout_tmp_96773;
                        }
                        defunc_2_reduce_res_93195 = redout_94525;
                        
                        double a0_93217 = 1.0 / defunc_2_reduce_res_93195;
                        double defunc_2_reduce_res_93218;
                        double redout_94529 = 0.0;
                        
                        for (int64_t i_94530 = 0; i_94530 < q_92401;
                             i_94530++) {
                            double x_93223;
                            
                            x_93223 = ((double *) mem_95554)[i_94530];
                            
                            bool cond_93224 = sle64(last_res_93081, i_94530);
                            double defunc_0_f_res_93225;
                            
                            if (cond_93224) {
                                defunc_0_f_res_93225 = 0.0;
                            } else {
                                int64_t i_93226 = add64(max_res_93175, i_94530);
                                double defunc_0_add_arg_93227;
                                
                                defunc_0_add_arg_93227 =
                                    ((double *) mem_95483)[i_93226];
                                defunc_0_f_res_93225 = defunc_0_add_arg_93227;
                            }
                            
                            double x_93228 = a0_93217 * x_93223;
                            double defunc_9_fit_fun_res_93229 =
                                   defunc_0_f_res_93225 * x_93228;
                            double defunc_1_op_res_93221 =
                                   defunc_9_fit_fun_res_93229 + redout_94529;
                            double redout_tmp_96775 = defunc_1_op_res_93221;
                            
                            redout_94529 = redout_tmp_96775;
                        }
                        defunc_2_reduce_res_93218 = redout_94529;
                        ((double *) mem_95455.mem)[i_94537 * n_m_92409 +
                                                   i_94533] =
                            defunc_2_reduce_res_93218;
                    }
                }
                if (memblock_set(ctx, &ext_mem_96026, &mem_95455,
                                 "mem_95455") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_96018, &mem_95451,
                                 "mem_95451") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_95455, "mem_95455") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_95451, "mem_95451") != 0)
                    return 1;
            } else {
                bool match_lit_93232 = (int64_t) 1 == degree_92402;
                int64_t binop_x_95586 = m_92398 * n_m_92409;
                int64_t binop_y_95587 = (int64_t) 8 * binop_x_95586;
                int64_t bytes_95588 = smax64((int64_t) 0, binop_y_95587);
                int64_t binop_y_95614 = (int64_t) 8 * n_92399;
                int64_t bytes_95615 = smax64((int64_t) 0, binop_y_95614);
                int64_t binop_y_95674 = (int64_t) 8 * q_92401;
                int64_t bytes_95675 = smax64((int64_t) 0, binop_y_95674);
                int64_t binop_x_95779 = m_92398 * n_m_92409;
                int64_t binop_y_95780 = (int64_t) 8 * binop_x_95779;
                int64_t bytes_95781 = smax64((int64_t) 0, binop_y_95780);
                int64_t binop_y_95807 = (int64_t) 8 * n_92399;
                int64_t bytes_95808 = smax64((int64_t) 0, binop_y_95807);
                int64_t binop_y_95867 = (int64_t) 8 * q_92401;
                int64_t bytes_95868 = smax64((int64_t) 0, binop_y_95867);
                struct memblock ext_mem_96010;
                
                ext_mem_96010.references = NULL;
                
                struct memblock ext_mem_96002;
                
                ext_mem_96002.references = NULL;
                if (match_lit_93232) {
                    struct memblock mem_95589;
                    
                    mem_95589.references = NULL;
                    if (memblock_alloc(ctx, &mem_95589, bytes_95588,
                                       "mem_95589")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_95593;
                    
                    mem_95593.references = NULL;
                    if (memblock_alloc(ctx, &mem_95593, bytes_95588,
                                       "mem_95593")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_95616_cached_sizze_96927 < (size_t) bytes_95615) {
                        mem_95616 = realloc(mem_95616, bytes_95615);
                        mem_95616_cached_sizze_96927 = bytes_95615;
                    }
                    if (mem_95631_cached_sizze_96928 < (size_t) bytes_95615) {
                        mem_95631 = realloc(mem_95631, bytes_95615);
                        mem_95631_cached_sizze_96928 = bytes_95615;
                    }
                    if (mem_95634_cached_sizze_96929 < (size_t) bytes_95615) {
                        mem_95634 = realloc(mem_95634, bytes_95615);
                        mem_95634_cached_sizze_96929 = bytes_95615;
                    }
                    if (mem_95661_cached_sizze_96930 < (size_t) bytes_95615) {
                        mem_95661 = realloc(mem_95661, bytes_95615);
                        mem_95661_cached_sizze_96930 = bytes_95615;
                    }
                    if (mem_95676_cached_sizze_96931 < (size_t) bytes_95675) {
                        mem_95676 = realloc(mem_95676, bytes_95675);
                        mem_95676_cached_sizze_96931 = bytes_95675;
                    }
                    if (mem_95713_cached_sizze_96932 < (size_t) bytes_95675) {
                        mem_95713 = realloc(mem_95713, bytes_95675);
                        mem_95713_cached_sizze_96932 = bytes_95675;
                    }
                    if (mem_95716_cached_sizze_96933 < (size_t) bytes_95675) {
                        mem_95716 = realloc(mem_95716, bytes_95675);
                        mem_95716_cached_sizze_96933 = bytes_95675;
                    }
                    for (int64_t i_94585 = 0; i_94585 < m_92398; i_94585++) {
                        int64_t discard_94544;
                        int64_t scanacc_94540 = (int64_t) 0;
                        
                        for (int64_t i_94542 = 0; i_94542 < n_92399;
                             i_94542++) {
                            double x_93243;
                            
                            x_93243 = ((double *) Y_mem_94966.mem)[i_94585 *
                                                                   n_92399 +
                                                                   i_94542];
                            
                            bool isnan_res_93244;
                            
                            isnan_res_93244 = futrts_isnan64(x_93243);
                            
                            bool defunc_0_p_res_93245 = !isnan_res_93244;
                            int64_t defunc_0_f_res_93246 =
                                    btoi_bool_i64(defunc_0_p_res_93245);
                            int64_t defunc_1_op_res_93242 =
                                    add64(defunc_0_f_res_93246, scanacc_94540);
                            
                            ((int64_t *) mem_95616)[i_94542] =
                                defunc_1_op_res_93242;
                            
                            int64_t scanacc_tmp_96778 = defunc_1_op_res_93242;
                            
                            scanacc_94540 = scanacc_tmp_96778;
                        }
                        discard_94544 = scanacc_94540;
                        
                        int64_t last_res_93247;
                        
                        last_res_93247 = ((int64_t *) mem_95616)[i_92415];
                        for (int64_t i_96780 = 0; i_96780 < n_92399;
                             i_96780++) {
                            ((double *) mem_95631)[i_96780] = 0.0;
                        }
                        for (int64_t i_96781 = 0; i_96781 < n_92399;
                             i_96781++) {
                            ((int64_t *) mem_95634)[i_96781] = (int64_t) -1;
                        }
                        for (int64_t write_iter_94545 = 0; write_iter_94545 <
                             n_92399; write_iter_94545++) {
                            double write_iv_94548;
                            
                            write_iv_94548 =
                                ((double *) Y_mem_94966.mem)[i_94585 * n_92399 +
                                                             write_iter_94545];
                            
                            int64_t write_iv_94549;
                            
                            write_iv_94549 =
                                ((int64_t *) mem_95616)[write_iter_94545];
                            
                            bool isnan_res_93255;
                            
                            isnan_res_93255 = futrts_isnan64(write_iv_94548);
                            
                            bool defunc_0_p_res_93256 = !isnan_res_93255;
                            int64_t defunc_1_f_res_93257;
                            
                            if (defunc_0_p_res_93256) {
                                int64_t defunc_1_f_res_t_res_93258 =
                                        sub64(write_iv_94549, (int64_t) 1);
                                
                                defunc_1_f_res_93257 =
                                    defunc_1_f_res_t_res_93258;
                            } else {
                                defunc_1_f_res_93257 = (int64_t) -1;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_93257) &&
                                slt64(defunc_1_f_res_93257, n_92399)) {
                                ((int64_t *) mem_95634)[defunc_1_f_res_93257] =
                                    write_iter_94545;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_93257) &&
                                slt64(defunc_1_f_res_93257, n_92399)) {
                                if ((int64_t) 8 > 0)
                                    memmove(mem_95631 + defunc_1_f_res_93257 *
                                            (int64_t) 8, Y_mem_94966.mem +
                                            (i_94585 * n_92399 +
                                             write_iter_94545) * (int64_t) 8,
                                            (int64_t) 8);
                            }
                        }
                        for (int64_t i_94555 = 0; i_94555 < n_92399;
                             i_94555++) {
                            int64_t x_93260;
                            
                            x_93260 = ((int64_t *) mem_95634)[i_94555];
                            
                            int64_t defunc_0_f_res_93261 = add64((int64_t) 1,
                                                                 x_93260);
                            
                            ((int64_t *) mem_95661)[i_94555] =
                                defunc_0_f_res_93261;
                        }
                        
                        int64_t min_arg_93262 = sub64(last_res_93247,
                                                      (int64_t) 1);
                        int64_t min_arg_93263 = sub64(last_res_93247,
                                                      min_res_92421);
                        int64_t min_res_93264 = smin64(q_92401, last_res_93247);
                        double i64_res_93265 = sitofp_i64_f64(last_res_93247);
                        double x_93266 = i64_res_92427 - i64_res_93265;
                        double max_arg_93267 = x_93266 / 2.0;
                        double max_res_93268 = fmax64(0.0, max_arg_93267);
                        
                        for (int64_t i_94559 = 0; i_94559 < q_92401;
                             i_94559++) {
                            bool cond_93271 = sle64(last_res_93247, i_94559);
                            double defunc_0_f_res_93272;
                            
                            if (cond_93271) {
                                defunc_0_f_res_93272 = 0.0;
                            } else {
                                defunc_0_f_res_93272 = 1.0;
                            }
                            ((double *) mem_95676)[i_94559] =
                                defunc_0_f_res_93272;
                        }
                        for (int64_t i_94578 = 0; i_94578 < n_m_92409;
                             i_94578++) {
                            int64_t min_arg_93276 = mul64(jump_92403, i_94578);
                            int64_t min_res_93277 = smin64(i_92415,
                                                           min_arg_93276);
                            int64_t defunc_0_g_res_93278 = add64((int64_t) 1,
                                                                 min_res_93277);
                            bool init_idx_93279;
                            int64_t init_idx_93280;
                            int64_t init_idx_93281;
                            bool loop_while_93282;
                            int64_t low_93283;
                            int64_t high_93284;
                            
                            loop_while_93282 = x_92416;
                            low_93283 = (int64_t) 0;
                            high_93284 = i_92415;
                            while (loop_while_93282) {
                                int64_t x_93285 = add64(low_93283, high_93284);
                                int64_t mid_93286 = sdiv64(x_93285,
                                                           (int64_t) 2);
                                bool x_93287 = sle64((int64_t) 0, mid_93286);
                                bool y_93288 = slt64(mid_93286, n_92399);
                                bool bounds_check_93289 = x_93287 && y_93288;
                                bool index_certs_93290;
                                
                                if (!bounds_check_93289) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) mid_93286,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_95593,
                                                       "mem_95593") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_95589,
                                                       "mem_95589") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96002,
                                                       "ext_mem_96002") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96010,
                                                       "ext_mem_96010") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96018,
                                                       "ext_mem_96018") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96026,
                                                       "ext_mem_96026") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t mid_id_93291;
                                
                                mid_id_93291 =
                                    ((int64_t *) mem_95661)[mid_93286];
                                
                                bool cond_93292 = slt64(mid_id_93291,
                                                        (int64_t) 0);
                                int64_t mid_idx_93293;
                                
                                if (cond_93292) {
                                    mid_idx_93293 =
                                        (int64_t) 9223372036854775807;
                                } else {
                                    mid_idx_93293 = mid_id_93291;
                                }
                                
                                bool cond_93294 = sle64(defunc_0_g_res_93278,
                                                        mid_idx_93293);
                                int64_t loopres_93295;
                                int64_t loopres_93296;
                                
                                if (cond_93294) {
                                    int64_t loopres_t_res_93297 =
                                            sub64(mid_93286, (int64_t) 1);
                                    
                                    loopres_93295 = low_93283;
                                    loopres_93296 = loopres_t_res_93297;
                                } else {
                                    int64_t loopres_f_res_93298 =
                                            add64((int64_t) 1, mid_93286);
                                    
                                    loopres_93295 = loopres_f_res_93298;
                                    loopres_93296 = high_93284;
                                }
                                
                                bool loop_cond_93299 = sle64(loopres_93295,
                                                             loopres_93296);
                                bool loop_while_tmp_96788 = loop_cond_93299;
                                int64_t low_tmp_96789 = loopres_93295;
                                int64_t high_tmp_96790 = loopres_93296;
                                
                                loop_while_93282 = loop_while_tmp_96788;
                                low_93283 = low_tmp_96789;
                                high_93284 = high_tmp_96790;
                            }
                            init_idx_93279 = loop_while_93282;
                            init_idx_93280 = low_93283;
                            init_idx_93281 = high_93284;
                            
                            bool idx_93300;
                            int64_t idx_93301;
                            int64_t idx_93302;
                            int64_t idx_93303;
                            bool loop_while_93304;
                            int64_t l_idx_93305;
                            int64_t r_idx_93306;
                            int64_t span_93307;
                            
                            loop_while_93304 = loop_cond_92426;
                            l_idx_93305 = init_idx_93280;
                            r_idx_93306 = init_idx_93280;
                            span_93307 = (int64_t) 1;
                            while (loop_while_93304) {
                                int64_t max_arg_93308 = sub64(l_idx_93305,
                                                              (int64_t) 1);
                                int64_t max_res_93309 = smax64((int64_t) 0,
                                                               max_arg_93308);
                                int64_t min_arg_93310 = add64((int64_t) 1,
                                                              r_idx_93306);
                                int64_t min_res_93311 = smin64(min_arg_93262,
                                                               min_arg_93310);
                                bool x_93312 = sle64((int64_t) 0,
                                                     max_res_93309);
                                bool y_93313 = slt64(max_res_93309, n_92399);
                                bool bounds_check_93314 = x_93312 && y_93313;
                                bool index_certs_93315;
                                
                                if (!bounds_check_93314) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) max_res_93309,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_95593,
                                                       "mem_95593") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_95589,
                                                       "mem_95589") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96002,
                                                       "ext_mem_96002") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96010,
                                                       "ext_mem_96010") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96018,
                                                       "ext_mem_96018") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96026,
                                                       "ext_mem_96026") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_93316;
                                
                                x_93316 =
                                    ((int64_t *) mem_95661)[max_res_93309];
                                
                                int64_t abs_arg_93317 = sub64(x_93316,
                                                              defunc_0_g_res_93278);
                                int64_t abs_res_93318 = abs64(abs_arg_93317);
                                bool x_93319 = sle64((int64_t) 0,
                                                     min_res_93311);
                                bool y_93320 = slt64(min_res_93311, n_92399);
                                bool bounds_check_93321 = x_93319 && y_93320;
                                bool index_certs_93322;
                                
                                if (!bounds_check_93321) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_93311,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_95593,
                                                       "mem_95593") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_95589,
                                                       "mem_95589") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96002,
                                                       "ext_mem_96002") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96010,
                                                       "ext_mem_96010") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96018,
                                                       "ext_mem_96018") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96026,
                                                       "ext_mem_96026") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_93323;
                                
                                x_93323 =
                                    ((int64_t *) mem_95661)[min_res_93311];
                                
                                int64_t abs_arg_93324 = sub64(x_93323,
                                                              defunc_0_g_res_93278);
                                int64_t abs_res_93325 = abs64(abs_arg_93324);
                                bool cond_93326 = max_res_93309 == l_idx_93305;
                                int64_t loopres_93327;
                                int64_t loopres_93328;
                                int64_t loopres_93329;
                                
                                if (cond_93326) {
                                    loopres_93327 = l_idx_93305;
                                    loopres_93328 = r_idx_93306;
                                    loopres_93329 = min_res_92421;
                                } else {
                                    bool cond_93330 = slt64(abs_res_93318,
                                                            abs_res_93325);
                                    bool cond_f_res_93331 = min_res_93311 ==
                                         r_idx_93306;
                                    bool x_93332 = !cond_93330;
                                    bool y_93333 = cond_f_res_93331 && x_93332;
                                    bool cond_93334 = cond_93330 || y_93333;
                                    int64_t loopres_f_res_93335;
                                    
                                    if (cond_93334) {
                                        loopres_f_res_93335 = max_res_93309;
                                    } else {
                                        loopres_f_res_93335 = l_idx_93305;
                                    }
                                    
                                    int64_t loopres_f_res_93336;
                                    
                                    if (cond_93334) {
                                        loopres_f_res_93336 = r_idx_93306;
                                    } else {
                                        loopres_f_res_93336 = min_res_93311;
                                    }
                                    
                                    int64_t loopres_f_res_93337;
                                    
                                    if (cond_93334) {
                                        int64_t loopres_f_res_t_res_93338 =
                                                add64((int64_t) 1, span_93307);
                                        
                                        loopres_f_res_93337 =
                                            loopres_f_res_t_res_93338;
                                    } else {
                                        int64_t loopres_f_res_f_res_93339 =
                                                add64((int64_t) 1, span_93307);
                                        
                                        loopres_f_res_93337 =
                                            loopres_f_res_f_res_93339;
                                    }
                                    loopres_93327 = loopres_f_res_93335;
                                    loopres_93328 = loopres_f_res_93336;
                                    loopres_93329 = loopres_f_res_93337;
                                }
                                
                                bool loop_cond_93340 = slt64(loopres_93329,
                                                             min_res_92421);
                                bool loop_while_tmp_96791 = loop_cond_93340;
                                int64_t l_idx_tmp_96792 = loopres_93327;
                                int64_t r_idx_tmp_96793 = loopres_93328;
                                int64_t span_tmp_96794 = loopres_93329;
                                
                                loop_while_93304 = loop_while_tmp_96791;
                                l_idx_93305 = l_idx_tmp_96792;
                                r_idx_93306 = r_idx_tmp_96793;
                                span_93307 = span_tmp_96794;
                            }
                            idx_93300 = loop_while_93304;
                            idx_93301 = l_idx_93305;
                            idx_93302 = r_idx_93306;
                            idx_93303 = span_93307;
                            
                            int64_t min_res_93341 = smin64(min_arg_93263,
                                                           idx_93301);
                            int64_t max_res_93342 = smax64((int64_t) 0,
                                                           min_res_93341);
                            int64_t x_93343 = add64(min_res_93264,
                                                    max_res_93342);
                            int64_t r_93344 = sub64(x_93343, (int64_t) 1);
                            bool x_93345 = sle64((int64_t) 0, r_93344);
                            bool y_93346 = slt64(r_93344, n_92399);
                            bool bounds_check_93347 = x_93345 && y_93346;
                            bool index_certs_93348;
                            
                            if (!bounds_check_93347) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) r_93344,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95593,
                                                   "mem_95593") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95589,
                                                   "mem_95589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96002,
                                                   "ext_mem_96002") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96010,
                                                   "ext_mem_96010") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93349;
                            
                            x_93349 = ((int64_t *) mem_95634)[r_93344];
                            
                            int64_t abs_arg_93350 = sub64(x_93349,
                                                          min_res_93277);
                            int64_t abs_res_93351 = abs64(abs_arg_93350);
                            bool x_93352 = sle64((int64_t) 0, max_res_93342);
                            bool y_93353 = slt64(max_res_93342, n_92399);
                            bool bounds_check_93354 = x_93352 && y_93353;
                            bool index_certs_93355;
                            
                            if (!bounds_check_93354) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_93342,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95593,
                                                   "mem_95593") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95589,
                                                   "mem_95589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96002,
                                                   "ext_mem_96002") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96010,
                                                   "ext_mem_96010") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93356;
                            
                            x_93356 = ((int64_t *) mem_95634)[max_res_93342];
                            
                            int64_t abs_arg_93357 = sub64(x_93356,
                                                          min_res_93277);
                            int64_t abs_res_93358 = abs64(abs_arg_93357);
                            int64_t max_res_93359 = smax64(abs_res_93351,
                                                           abs_res_93358);
                            double defunc_0_f_res_93360 =
                                   sitofp_i64_f64(max_res_93359);
                            double defunc_1_f_res_93361 = max_res_93268 +
                                   defunc_0_f_res_93360;
                            double defunc_2_reduce_res_93383;
                            double defunc_2_reduce_res_93384;
                            double defunc_2_reduce_res_93385;
                            double redout_94563;
                            double redout_94564;
                            double redout_94565;
                            
                            redout_94563 = 0.0;
                            redout_94564 = 0.0;
                            redout_94565 = 0.0;
                            for (int64_t i_94568 = 0; i_94568 < q_92401;
                                 i_94568++) {
                                double x_93398;
                                
                                x_93398 = ((double *) mem_95676)[i_94568];
                                
                                bool cond_93399 = sle64(last_res_93247,
                                                        i_94568);
                                int64_t defunc_0_f_res_93400;
                                
                                if (cond_93399) {
                                    defunc_0_f_res_93400 = (int64_t) 0;
                                } else {
                                    int64_t i_93401 = add64(max_res_93342,
                                                            i_94568);
                                    int64_t defunc_0_add_arg_93402;
                                    
                                    defunc_0_add_arg_93402 =
                                        ((int64_t *) mem_95634)[i_93401];
                                    
                                    int64_t defunc_1_add_res_93403 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_93402);
                                    
                                    defunc_0_f_res_93400 =
                                        defunc_1_add_res_93403;
                                }
                                
                                int64_t binop_p_93404 =
                                        sub64(defunc_0_f_res_93400,
                                              min_res_93277);
                                double defunc_0_f_res_93405 =
                                       sitofp_i64_f64(binop_p_93404);
                                double abs_res_93406 =
                                       fabs(defunc_0_f_res_93405);
                                double tmp1_93407 = abs_res_93406 /
                                       defunc_1_f_res_93361;
                                double x_93408 = tmp1_93407 * tmp1_93407;
                                double y_93409 = tmp1_93407 * x_93408;
                                double tmp2_93410 = 1.0 - y_93409;
                                double x_93411 = tmp2_93410 * tmp2_93410;
                                double tmp3_93412 = tmp2_93410 * x_93411;
                                double tmp4_93413 = x_93398 * tmp3_93412;
                                double defunc_1_f_res_93414 =
                                       defunc_0_f_res_93405 * tmp4_93413;
                                double defunc_1_f_res_93415 =
                                       defunc_0_f_res_93405 *
                                       defunc_1_f_res_93414;
                                double defunc_1_op_res_93390 = tmp4_93413 +
                                       redout_94563;
                                double defunc_1_op_res_93393 =
                                       defunc_1_f_res_93414 + redout_94564;
                                double defunc_1_op_res_93396 =
                                       defunc_1_f_res_93415 + redout_94565;
                                
                                ((double *) mem_95713)[i_94568] =
                                    defunc_1_f_res_93414;
                                ((double *) mem_95716)[i_94568] = tmp4_93413;
                                
                                double redout_tmp_96795 = defunc_1_op_res_93390;
                                double redout_tmp_96796 = defunc_1_op_res_93393;
                                double redout_tmp_96797 = defunc_1_op_res_93396;
                                
                                redout_94563 = redout_tmp_96795;
                                redout_94564 = redout_tmp_96796;
                                redout_94565 = redout_tmp_96797;
                            }
                            defunc_2_reduce_res_93383 = redout_94563;
                            defunc_2_reduce_res_93384 = redout_94564;
                            defunc_2_reduce_res_93385 = redout_94565;
                            
                            double x_93421 = defunc_2_reduce_res_93383 *
                                   defunc_2_reduce_res_93385;
                            double y_93422 = defunc_2_reduce_res_93384 *
                                   defunc_2_reduce_res_93384;
                            double y_93423 = x_93421 - y_93422;
                            double det1_93424 = 1.0 / y_93423;
                            double a11_93425 = defunc_2_reduce_res_93385 *
                                   det1_93424;
                            double x_93426 = 0.0 - defunc_2_reduce_res_93384;
                            double b11_93427 = det1_93424 * x_93426;
                            double c11_93428 = defunc_2_reduce_res_93383 *
                                   det1_93424;
                            double defunc_2_reduce_res_93429;
                            double defunc_2_reduce_res_93430;
                            double redout_94571;
                            double redout_94572;
                            
                            redout_94571 = 0.0;
                            redout_94572 = 0.0;
                            for (int64_t i_94573 = 0; i_94573 < q_92401;
                                 i_94573++) {
                                double x_93438;
                                
                                x_93438 = ((double *) mem_95716)[i_94573];
                                
                                double x_93439;
                                
                                x_93439 = ((double *) mem_95713)[i_94573];
                                
                                bool cond_93440 = sle64(last_res_93247,
                                                        i_94573);
                                double defunc_0_f_res_93441;
                                
                                if (cond_93440) {
                                    defunc_0_f_res_93441 = 0.0;
                                } else {
                                    int64_t i_93442 = add64(max_res_93342,
                                                            i_94573);
                                    double defunc_0_add_arg_93443;
                                    
                                    defunc_0_add_arg_93443 =
                                        ((double *) mem_95631)[i_93442];
                                    defunc_0_f_res_93441 =
                                        defunc_0_add_arg_93443;
                                }
                                
                                double x_93444 = a11_93425 * x_93438;
                                double y_93445 = b11_93427 * x_93439;
                                double x_93446 = x_93444 + y_93445;
                                double defunc_9_fit_fun_res_93447 =
                                       defunc_0_f_res_93441 * x_93446;
                                double x_93448 = b11_93427 * x_93438;
                                double y_93449 = c11_93428 * x_93439;
                                double x_93450 = x_93448 + y_93449;
                                double defunc_9_slope_fun_res_93451 =
                                       defunc_0_f_res_93441 * x_93450;
                                double defunc_1_op_res_93433 =
                                       defunc_9_fit_fun_res_93447 +
                                       redout_94571;
                                double defunc_1_op_res_93436 =
                                       defunc_9_slope_fun_res_93451 +
                                       redout_94572;
                                double redout_tmp_96800 = defunc_1_op_res_93433;
                                double redout_tmp_96801 = defunc_1_op_res_93436;
                                
                                redout_94571 = redout_tmp_96800;
                                redout_94572 = redout_tmp_96801;
                            }
                            defunc_2_reduce_res_93429 = redout_94571;
                            defunc_2_reduce_res_93430 = redout_94572;
                            ((double *) mem_95589.mem)[i_94585 * n_m_92409 +
                                                       i_94578] =
                                defunc_2_reduce_res_93429;
                            ((double *) mem_95593.mem)[i_94585 * n_m_92409 +
                                                       i_94578] =
                                defunc_2_reduce_res_93430;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_96010, &mem_95589,
                                     "mem_95589") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_96002, &mem_95593,
                                     "mem_95593") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_95593, "mem_95593") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_95589, "mem_95589") != 0)
                        return 1;
                } else {
                    struct memblock mem_95782;
                    
                    mem_95782.references = NULL;
                    if (memblock_alloc(ctx, &mem_95782, bytes_95781,
                                       "mem_95782")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_95786;
                    
                    mem_95786.references = NULL;
                    if (memblock_alloc(ctx, &mem_95786, bytes_95781,
                                       "mem_95786")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_95809_cached_sizze_96934 < (size_t) bytes_95808) {
                        mem_95809 = realloc(mem_95809, bytes_95808);
                        mem_95809_cached_sizze_96934 = bytes_95808;
                    }
                    if (mem_95824_cached_sizze_96935 < (size_t) bytes_95808) {
                        mem_95824 = realloc(mem_95824, bytes_95808);
                        mem_95824_cached_sizze_96935 = bytes_95808;
                    }
                    if (mem_95827_cached_sizze_96936 < (size_t) bytes_95808) {
                        mem_95827 = realloc(mem_95827, bytes_95808);
                        mem_95827_cached_sizze_96936 = bytes_95808;
                    }
                    if (mem_95854_cached_sizze_96937 < (size_t) bytes_95808) {
                        mem_95854 = realloc(mem_95854, bytes_95808);
                        mem_95854_cached_sizze_96937 = bytes_95808;
                    }
                    if (mem_95869_cached_sizze_96938 < (size_t) bytes_95868) {
                        mem_95869 = realloc(mem_95869, bytes_95868);
                        mem_95869_cached_sizze_96938 = bytes_95868;
                    }
                    if (mem_95906_cached_sizze_96939 < (size_t) bytes_95868) {
                        mem_95906 = realloc(mem_95906, bytes_95868);
                        mem_95906_cached_sizze_96939 = bytes_95868;
                    }
                    if (mem_95909_cached_sizze_96940 < (size_t) bytes_95868) {
                        mem_95909 = realloc(mem_95909, bytes_95868);
                        mem_95909_cached_sizze_96940 = bytes_95868;
                    }
                    if (mem_95936_cached_sizze_96941 < (size_t) bytes_95868) {
                        mem_95936 = realloc(mem_95936, bytes_95868);
                        mem_95936_cached_sizze_96941 = bytes_95868;
                    }
                    if (mem_95939_cached_sizze_96942 < (size_t) bytes_95868) {
                        mem_95939 = realloc(mem_95939, bytes_95868);
                        mem_95939_cached_sizze_96942 = bytes_95868;
                    }
                    for (int64_t i_94643 = 0; i_94643 < m_92398; i_94643++) {
                        int64_t discard_94593;
                        int64_t scanacc_94589 = (int64_t) 0;
                        
                        for (int64_t i_94591 = 0; i_94591 < n_92399;
                             i_94591++) {
                            double x_93462;
                            
                            x_93462 = ((double *) Y_mem_94966.mem)[i_94643 *
                                                                   n_92399 +
                                                                   i_94591];
                            
                            bool isnan_res_93463;
                            
                            isnan_res_93463 = futrts_isnan64(x_93462);
                            
                            bool defunc_0_p_res_93464 = !isnan_res_93463;
                            int64_t defunc_0_f_res_93465 =
                                    btoi_bool_i64(defunc_0_p_res_93464);
                            int64_t defunc_1_op_res_93461 =
                                    add64(defunc_0_f_res_93465, scanacc_94589);
                            
                            ((int64_t *) mem_95809)[i_94591] =
                                defunc_1_op_res_93461;
                            
                            int64_t scanacc_tmp_96804 = defunc_1_op_res_93461;
                            
                            scanacc_94589 = scanacc_tmp_96804;
                        }
                        discard_94593 = scanacc_94589;
                        
                        int64_t last_res_93466;
                        
                        last_res_93466 = ((int64_t *) mem_95809)[i_92415];
                        for (int64_t i_96806 = 0; i_96806 < n_92399;
                             i_96806++) {
                            ((double *) mem_95824)[i_96806] = 0.0;
                        }
                        for (int64_t i_96807 = 0; i_96807 < n_92399;
                             i_96807++) {
                            ((int64_t *) mem_95827)[i_96807] = (int64_t) -1;
                        }
                        for (int64_t write_iter_94594 = 0; write_iter_94594 <
                             n_92399; write_iter_94594++) {
                            double write_iv_94597;
                            
                            write_iv_94597 =
                                ((double *) Y_mem_94966.mem)[i_94643 * n_92399 +
                                                             write_iter_94594];
                            
                            int64_t write_iv_94598;
                            
                            write_iv_94598 =
                                ((int64_t *) mem_95809)[write_iter_94594];
                            
                            bool isnan_res_93474;
                            
                            isnan_res_93474 = futrts_isnan64(write_iv_94597);
                            
                            bool defunc_0_p_res_93475 = !isnan_res_93474;
                            int64_t defunc_1_f_res_93476;
                            
                            if (defunc_0_p_res_93475) {
                                int64_t defunc_1_f_res_t_res_93477 =
                                        sub64(write_iv_94598, (int64_t) 1);
                                
                                defunc_1_f_res_93476 =
                                    defunc_1_f_res_t_res_93477;
                            } else {
                                defunc_1_f_res_93476 = (int64_t) -1;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_93476) &&
                                slt64(defunc_1_f_res_93476, n_92399)) {
                                ((int64_t *) mem_95827)[defunc_1_f_res_93476] =
                                    write_iter_94594;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_93476) &&
                                slt64(defunc_1_f_res_93476, n_92399)) {
                                if ((int64_t) 8 > 0)
                                    memmove(mem_95824 + defunc_1_f_res_93476 *
                                            (int64_t) 8, Y_mem_94966.mem +
                                            (i_94643 * n_92399 +
                                             write_iter_94594) * (int64_t) 8,
                                            (int64_t) 8);
                            }
                        }
                        for (int64_t i_94604 = 0; i_94604 < n_92399;
                             i_94604++) {
                            int64_t x_93479;
                            
                            x_93479 = ((int64_t *) mem_95827)[i_94604];
                            
                            int64_t defunc_0_f_res_93480 = add64((int64_t) 1,
                                                                 x_93479);
                            
                            ((int64_t *) mem_95854)[i_94604] =
                                defunc_0_f_res_93480;
                        }
                        
                        int64_t min_arg_93481 = sub64(last_res_93466,
                                                      (int64_t) 1);
                        int64_t min_arg_93482 = sub64(last_res_93466,
                                                      min_res_92421);
                        int64_t min_res_93483 = smin64(q_92401, last_res_93466);
                        double i64_res_93484 = sitofp_i64_f64(last_res_93466);
                        double x_93485 = i64_res_92427 - i64_res_93484;
                        double max_arg_93486 = x_93485 / 2.0;
                        double max_res_93487 = fmax64(0.0, max_arg_93486);
                        
                        for (int64_t i_94608 = 0; i_94608 < q_92401;
                             i_94608++) {
                            bool cond_93490 = sle64(last_res_93466, i_94608);
                            double defunc_0_f_res_93491;
                            
                            if (cond_93490) {
                                defunc_0_f_res_93491 = 0.0;
                            } else {
                                defunc_0_f_res_93491 = 1.0;
                            }
                            ((double *) mem_95869)[i_94608] =
                                defunc_0_f_res_93491;
                        }
                        for (int64_t i_94636 = 0; i_94636 < n_m_92409;
                             i_94636++) {
                            int64_t min_arg_93495 = mul64(jump_92403, i_94636);
                            int64_t min_res_93496 = smin64(i_92415,
                                                           min_arg_93495);
                            int64_t defunc_0_g_res_93497 = add64((int64_t) 1,
                                                                 min_res_93496);
                            bool init_idx_93498;
                            int64_t init_idx_93499;
                            int64_t init_idx_93500;
                            bool loop_while_93501;
                            int64_t low_93502;
                            int64_t high_93503;
                            
                            loop_while_93501 = x_92416;
                            low_93502 = (int64_t) 0;
                            high_93503 = i_92415;
                            while (loop_while_93501) {
                                int64_t x_93504 = add64(low_93502, high_93503);
                                int64_t mid_93505 = sdiv64(x_93504,
                                                           (int64_t) 2);
                                bool x_93506 = sle64((int64_t) 0, mid_93505);
                                bool y_93507 = slt64(mid_93505, n_92399);
                                bool bounds_check_93508 = x_93506 && y_93507;
                                bool index_certs_93509;
                                
                                if (!bounds_check_93508) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) mid_93505,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_95786,
                                                       "mem_95786") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_95782,
                                                       "mem_95782") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96002,
                                                       "ext_mem_96002") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96010,
                                                       "ext_mem_96010") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96018,
                                                       "ext_mem_96018") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96026,
                                                       "ext_mem_96026") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t mid_id_93510;
                                
                                mid_id_93510 =
                                    ((int64_t *) mem_95854)[mid_93505];
                                
                                bool cond_93511 = slt64(mid_id_93510,
                                                        (int64_t) 0);
                                int64_t mid_idx_93512;
                                
                                if (cond_93511) {
                                    mid_idx_93512 =
                                        (int64_t) 9223372036854775807;
                                } else {
                                    mid_idx_93512 = mid_id_93510;
                                }
                                
                                bool cond_93513 = sle64(defunc_0_g_res_93497,
                                                        mid_idx_93512);
                                int64_t loopres_93514;
                                int64_t loopres_93515;
                                
                                if (cond_93513) {
                                    int64_t loopres_t_res_93516 =
                                            sub64(mid_93505, (int64_t) 1);
                                    
                                    loopres_93514 = low_93502;
                                    loopres_93515 = loopres_t_res_93516;
                                } else {
                                    int64_t loopres_f_res_93517 =
                                            add64((int64_t) 1, mid_93505);
                                    
                                    loopres_93514 = loopres_f_res_93517;
                                    loopres_93515 = high_93503;
                                }
                                
                                bool loop_cond_93518 = sle64(loopres_93514,
                                                             loopres_93515);
                                bool loop_while_tmp_96814 = loop_cond_93518;
                                int64_t low_tmp_96815 = loopres_93514;
                                int64_t high_tmp_96816 = loopres_93515;
                                
                                loop_while_93501 = loop_while_tmp_96814;
                                low_93502 = low_tmp_96815;
                                high_93503 = high_tmp_96816;
                            }
                            init_idx_93498 = loop_while_93501;
                            init_idx_93499 = low_93502;
                            init_idx_93500 = high_93503;
                            
                            bool idx_93519;
                            int64_t idx_93520;
                            int64_t idx_93521;
                            int64_t idx_93522;
                            bool loop_while_93523;
                            int64_t l_idx_93524;
                            int64_t r_idx_93525;
                            int64_t span_93526;
                            
                            loop_while_93523 = loop_cond_92426;
                            l_idx_93524 = init_idx_93499;
                            r_idx_93525 = init_idx_93499;
                            span_93526 = (int64_t) 1;
                            while (loop_while_93523) {
                                int64_t max_arg_93527 = sub64(l_idx_93524,
                                                              (int64_t) 1);
                                int64_t max_res_93528 = smax64((int64_t) 0,
                                                               max_arg_93527);
                                int64_t min_arg_93529 = add64((int64_t) 1,
                                                              r_idx_93525);
                                int64_t min_res_93530 = smin64(min_arg_93481,
                                                               min_arg_93529);
                                bool x_93531 = sle64((int64_t) 0,
                                                     max_res_93528);
                                bool y_93532 = slt64(max_res_93528, n_92399);
                                bool bounds_check_93533 = x_93531 && y_93532;
                                bool index_certs_93534;
                                
                                if (!bounds_check_93533) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) max_res_93528,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_95786,
                                                       "mem_95786") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_95782,
                                                       "mem_95782") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96002,
                                                       "ext_mem_96002") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96010,
                                                       "ext_mem_96010") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96018,
                                                       "ext_mem_96018") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96026,
                                                       "ext_mem_96026") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_93535;
                                
                                x_93535 =
                                    ((int64_t *) mem_95854)[max_res_93528];
                                
                                int64_t abs_arg_93536 = sub64(x_93535,
                                                              defunc_0_g_res_93497);
                                int64_t abs_res_93537 = abs64(abs_arg_93536);
                                bool x_93538 = sle64((int64_t) 0,
                                                     min_res_93530);
                                bool y_93539 = slt64(min_res_93530, n_92399);
                                bool bounds_check_93540 = x_93538 && y_93539;
                                bool index_certs_93541;
                                
                                if (!bounds_check_93540) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_93530,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_95786,
                                                       "mem_95786") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_95782,
                                                       "mem_95782") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96002,
                                                       "ext_mem_96002") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96010,
                                                       "ext_mem_96010") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96018,
                                                       "ext_mem_96018") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96026,
                                                       "ext_mem_96026") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_93542;
                                
                                x_93542 =
                                    ((int64_t *) mem_95854)[min_res_93530];
                                
                                int64_t abs_arg_93543 = sub64(x_93542,
                                                              defunc_0_g_res_93497);
                                int64_t abs_res_93544 = abs64(abs_arg_93543);
                                bool cond_93545 = max_res_93528 == l_idx_93524;
                                int64_t loopres_93546;
                                int64_t loopres_93547;
                                int64_t loopres_93548;
                                
                                if (cond_93545) {
                                    loopres_93546 = l_idx_93524;
                                    loopres_93547 = r_idx_93525;
                                    loopres_93548 = min_res_92421;
                                } else {
                                    bool cond_93549 = slt64(abs_res_93537,
                                                            abs_res_93544);
                                    bool cond_f_res_93550 = min_res_93530 ==
                                         r_idx_93525;
                                    bool x_93551 = !cond_93549;
                                    bool y_93552 = cond_f_res_93550 && x_93551;
                                    bool cond_93553 = cond_93549 || y_93552;
                                    int64_t loopres_f_res_93554;
                                    
                                    if (cond_93553) {
                                        loopres_f_res_93554 = max_res_93528;
                                    } else {
                                        loopres_f_res_93554 = l_idx_93524;
                                    }
                                    
                                    int64_t loopres_f_res_93555;
                                    
                                    if (cond_93553) {
                                        loopres_f_res_93555 = r_idx_93525;
                                    } else {
                                        loopres_f_res_93555 = min_res_93530;
                                    }
                                    
                                    int64_t loopres_f_res_93556;
                                    
                                    if (cond_93553) {
                                        int64_t loopres_f_res_t_res_93557 =
                                                add64((int64_t) 1, span_93526);
                                        
                                        loopres_f_res_93556 =
                                            loopres_f_res_t_res_93557;
                                    } else {
                                        int64_t loopres_f_res_f_res_93558 =
                                                add64((int64_t) 1, span_93526);
                                        
                                        loopres_f_res_93556 =
                                            loopres_f_res_f_res_93558;
                                    }
                                    loopres_93546 = loopres_f_res_93554;
                                    loopres_93547 = loopres_f_res_93555;
                                    loopres_93548 = loopres_f_res_93556;
                                }
                                
                                bool loop_cond_93559 = slt64(loopres_93548,
                                                             min_res_92421);
                                bool loop_while_tmp_96817 = loop_cond_93559;
                                int64_t l_idx_tmp_96818 = loopres_93546;
                                int64_t r_idx_tmp_96819 = loopres_93547;
                                int64_t span_tmp_96820 = loopres_93548;
                                
                                loop_while_93523 = loop_while_tmp_96817;
                                l_idx_93524 = l_idx_tmp_96818;
                                r_idx_93525 = r_idx_tmp_96819;
                                span_93526 = span_tmp_96820;
                            }
                            idx_93519 = loop_while_93523;
                            idx_93520 = l_idx_93524;
                            idx_93521 = r_idx_93525;
                            idx_93522 = span_93526;
                            
                            int64_t min_res_93560 = smin64(min_arg_93482,
                                                           idx_93520);
                            int64_t max_res_93561 = smax64((int64_t) 0,
                                                           min_res_93560);
                            int64_t x_93562 = add64(min_res_93483,
                                                    max_res_93561);
                            int64_t r_93563 = sub64(x_93562, (int64_t) 1);
                            bool x_93564 = sle64((int64_t) 0, r_93563);
                            bool y_93565 = slt64(r_93563, n_92399);
                            bool bounds_check_93566 = x_93564 && y_93565;
                            bool index_certs_93567;
                            
                            if (!bounds_check_93566) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) r_93563,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95786,
                                                   "mem_95786") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95782,
                                                   "mem_95782") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96002,
                                                   "ext_mem_96002") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96010,
                                                   "ext_mem_96010") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93568;
                            
                            x_93568 = ((int64_t *) mem_95827)[r_93563];
                            
                            int64_t abs_arg_93569 = sub64(x_93568,
                                                          min_res_93496);
                            int64_t abs_res_93570 = abs64(abs_arg_93569);
                            bool x_93571 = sle64((int64_t) 0, max_res_93561);
                            bool y_93572 = slt64(max_res_93561, n_92399);
                            bool bounds_check_93573 = x_93571 && y_93572;
                            bool index_certs_93574;
                            
                            if (!bounds_check_93573) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_93561,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_95786,
                                                   "mem_95786") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_95782,
                                                   "mem_95782") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96002,
                                                   "ext_mem_96002") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96010,
                                                   "ext_mem_96010") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96018,
                                                   "ext_mem_96018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96026,
                                                   "ext_mem_96026") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93575;
                            
                            x_93575 = ((int64_t *) mem_95827)[max_res_93561];
                            
                            int64_t abs_arg_93576 = sub64(x_93575,
                                                          min_res_93496);
                            int64_t abs_res_93577 = abs64(abs_arg_93576);
                            int64_t max_res_93578 = smax64(abs_res_93570,
                                                           abs_res_93577);
                            double defunc_0_f_res_93579 =
                                   sitofp_i64_f64(max_res_93578);
                            double defunc_1_f_res_93580 = max_res_93487 +
                                   defunc_0_f_res_93579;
                            
                            for (int64_t i_94614 = 0; i_94614 < q_92401;
                                 i_94614++) {
                                double x_93584;
                                
                                x_93584 = ((double *) mem_95869)[i_94614];
                                
                                bool cond_93585 = sle64(last_res_93466,
                                                        i_94614);
                                int64_t defunc_0_f_res_93586;
                                
                                if (cond_93585) {
                                    defunc_0_f_res_93586 = (int64_t) 0;
                                } else {
                                    int64_t i_93587 = add64(max_res_93561,
                                                            i_94614);
                                    int64_t defunc_0_add_arg_93588;
                                    
                                    defunc_0_add_arg_93588 =
                                        ((int64_t *) mem_95827)[i_93587];
                                    
                                    int64_t defunc_1_add_res_93589 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_93588);
                                    
                                    defunc_0_f_res_93586 =
                                        defunc_1_add_res_93589;
                                }
                                
                                int64_t binop_p_93590 =
                                        sub64(defunc_0_f_res_93586,
                                              min_res_93496);
                                double defunc_0_f_res_93591 =
                                       sitofp_i64_f64(binop_p_93590);
                                double abs_res_93592 =
                                       fabs(defunc_0_f_res_93591);
                                double tmp1_93593 = abs_res_93592 /
                                       defunc_1_f_res_93580;
                                double x_93594 = tmp1_93593 * tmp1_93593;
                                double y_93595 = tmp1_93593 * x_93594;
                                double tmp2_93596 = 1.0 - y_93595;
                                double x_93597 = tmp2_93596 * tmp2_93596;
                                double tmp3_93598 = tmp2_93596 * x_93597;
                                double tmp4_93599 = x_93584 * tmp3_93598;
                                
                                ((double *) mem_95906)[i_94614] =
                                    defunc_0_f_res_93591;
                                ((double *) mem_95909)[i_94614] = tmp4_93599;
                            }
                            
                            double defunc_2_reduce_res_93606;
                            double defunc_2_reduce_res_93607;
                            double defunc_2_reduce_res_93608;
                            double defunc_2_reduce_res_93609;
                            double defunc_2_reduce_res_93610;
                            double redout_94619;
                            double redout_94620;
                            double redout_94621;
                            double redout_94622;
                            double redout_94623;
                            
                            redout_94619 = 0.0;
                            redout_94620 = 0.0;
                            redout_94621 = 0.0;
                            redout_94622 = 0.0;
                            redout_94623 = 0.0;
                            for (int64_t i_94626 = 0; i_94626 < q_92401;
                                 i_94626++) {
                                double x_93628;
                                
                                x_93628 = ((double *) mem_95906)[i_94626];
                                
                                double x_93629;
                                
                                x_93629 = ((double *) mem_95909)[i_94626];
                                
                                double defunc_1_f_res_93630 = x_93628 * x_93629;
                                double defunc_1_f_res_93631 = x_93628 *
                                       defunc_1_f_res_93630;
                                double defunc_1_f_res_93632 = x_93628 *
                                       defunc_1_f_res_93631;
                                double defunc_1_f_res_93633 = x_93628 *
                                       defunc_1_f_res_93632;
                                double defunc_1_op_res_93615 = x_93629 +
                                       redout_94619;
                                double defunc_1_op_res_93618 =
                                       defunc_1_f_res_93630 + redout_94620;
                                double defunc_1_op_res_93621 =
                                       defunc_1_f_res_93631 + redout_94621;
                                double defunc_1_op_res_93624 =
                                       defunc_1_f_res_93632 + redout_94622;
                                double defunc_1_op_res_93627 =
                                       defunc_1_f_res_93633 + redout_94623;
                                
                                ((double *) mem_95936)[i_94626] =
                                    defunc_1_f_res_93631;
                                ((double *) mem_95939)[i_94626] =
                                    defunc_1_f_res_93630;
                                
                                double redout_tmp_96823 = defunc_1_op_res_93615;
                                double redout_tmp_96824 = defunc_1_op_res_93618;
                                double redout_tmp_96825 = defunc_1_op_res_93621;
                                double redout_tmp_96826 = defunc_1_op_res_93624;
                                double redout_tmp_96827 = defunc_1_op_res_93627;
                                
                                redout_94619 = redout_tmp_96823;
                                redout_94620 = redout_tmp_96824;
                                redout_94621 = redout_tmp_96825;
                                redout_94622 = redout_tmp_96826;
                                redout_94623 = redout_tmp_96827;
                            }
                            defunc_2_reduce_res_93606 = redout_94619;
                            defunc_2_reduce_res_93607 = redout_94620;
                            defunc_2_reduce_res_93608 = redout_94621;
                            defunc_2_reduce_res_93609 = redout_94622;
                            defunc_2_reduce_res_93610 = redout_94623;
                            
                            double x_93641 = defunc_2_reduce_res_93608 *
                                   defunc_2_reduce_res_93610;
                            double y_93642 = defunc_2_reduce_res_93609 *
                                   defunc_2_reduce_res_93609;
                            double a12_93643 = x_93641 - y_93642;
                            double x_93644 = defunc_2_reduce_res_93608 *
                                   defunc_2_reduce_res_93609;
                            double y_93645 = defunc_2_reduce_res_93607 *
                                   defunc_2_reduce_res_93610;
                            double b12_93646 = x_93644 - y_93645;
                            double x_93647 = defunc_2_reduce_res_93607 *
                                   defunc_2_reduce_res_93609;
                            double y_93648 = defunc_2_reduce_res_93608 *
                                   defunc_2_reduce_res_93608;
                            double c12_93649 = x_93647 - y_93648;
                            double x_93650 = defunc_2_reduce_res_93606 *
                                   defunc_2_reduce_res_93610;
                            double b2_93651 = x_93650 - y_93648;
                            double x_93652 = defunc_2_reduce_res_93607 *
                                   defunc_2_reduce_res_93608;
                            double y_93653 = defunc_2_reduce_res_93606 *
                                   defunc_2_reduce_res_93609;
                            double c2_93654 = x_93652 - y_93653;
                            double x_93655 = defunc_2_reduce_res_93606 *
                                   a12_93643;
                            double y_93656 = defunc_2_reduce_res_93607 *
                                   b12_93646;
                            double x_93657 = x_93655 + y_93656;
                            double y_93658 = defunc_2_reduce_res_93608 *
                                   c12_93649;
                            double y_93659 = x_93657 + y_93658;
                            double det_93660 = 1.0 / y_93659;
                            double a12_93661 = a12_93643 * det_93660;
                            double b12_93662 = b12_93646 * det_93660;
                            double c12_93663 = c12_93649 * det_93660;
                            double b2_93664 = b2_93651 * det_93660;
                            double c2_93665 = c2_93654 * det_93660;
                            double defunc_2_reduce_res_93666;
                            double defunc_2_reduce_res_93667;
                            double redout_94629;
                            double redout_94630;
                            
                            redout_94629 = 0.0;
                            redout_94630 = 0.0;
                            for (int64_t i_94631 = 0; i_94631 < q_92401;
                                 i_94631++) {
                                double x_93675;
                                
                                x_93675 = ((double *) mem_95909)[i_94631];
                                
                                double x_93676;
                                
                                x_93676 = ((double *) mem_95939)[i_94631];
                                
                                double x_93677;
                                
                                x_93677 = ((double *) mem_95936)[i_94631];
                                
                                bool cond_93678 = sle64(last_res_93466,
                                                        i_94631);
                                double defunc_0_f_res_93679;
                                
                                if (cond_93678) {
                                    defunc_0_f_res_93679 = 0.0;
                                } else {
                                    int64_t i_93680 = add64(max_res_93561,
                                                            i_94631);
                                    double defunc_0_add_arg_93681;
                                    
                                    defunc_0_add_arg_93681 =
                                        ((double *) mem_95824)[i_93680];
                                    defunc_0_f_res_93679 =
                                        defunc_0_add_arg_93681;
                                }
                                
                                double x_93682 = a12_93661 * x_93675;
                                double y_93683 = b12_93662 * x_93676;
                                double x_93684 = x_93682 + y_93683;
                                double y_93685 = c12_93663 * x_93677;
                                double x_93686 = x_93684 + y_93685;
                                double defunc_9_fit_fun_res_93687 =
                                       defunc_0_f_res_93679 * x_93686;
                                double x_93688 = b12_93662 * x_93675;
                                double y_93689 = b2_93664 * x_93676;
                                double x_93690 = x_93688 + y_93689;
                                double y_93691 = c2_93665 * x_93677;
                                double x_93692 = x_93690 + y_93691;
                                double defunc_9_slope_fun_res_93693 =
                                       defunc_0_f_res_93679 * x_93692;
                                double defunc_1_op_res_93670 =
                                       defunc_9_fit_fun_res_93687 +
                                       redout_94629;
                                double defunc_1_op_res_93673 =
                                       defunc_9_slope_fun_res_93693 +
                                       redout_94630;
                                double redout_tmp_96830 = defunc_1_op_res_93670;
                                double redout_tmp_96831 = defunc_1_op_res_93673;
                                
                                redout_94629 = redout_tmp_96830;
                                redout_94630 = redout_tmp_96831;
                            }
                            defunc_2_reduce_res_93666 = redout_94629;
                            defunc_2_reduce_res_93667 = redout_94630;
                            ((double *) mem_95782.mem)[i_94643 * n_m_92409 +
                                                       i_94636] =
                                defunc_2_reduce_res_93666;
                            ((double *) mem_95786.mem)[i_94643 * n_m_92409 +
                                                       i_94636] =
                                defunc_2_reduce_res_93667;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_96010, &mem_95782,
                                     "mem_95782") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_96002, &mem_95786,
                                     "mem_95786") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_95786, "mem_95786") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_95782, "mem_95782") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_96026, &ext_mem_96010,
                                 "ext_mem_96010") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_96018, &ext_mem_96002,
                                 "ext_mem_96002") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_96002, "ext_mem_96002") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_96010, "ext_mem_96010") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_96523, &ext_mem_96026,
                             "ext_mem_96026") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_96515, &ext_mem_96018,
                             "ext_mem_96018") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96018, "ext_mem_96018") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96026, "ext_mem_96026") != 0)
                return 1;
        } else {
            bool match_lit_93696 = (int64_t) 0 == degree_92402;
            int64_t binop_x_96034 = m_92398 * n_m_92409;
            int64_t binop_y_96035 = (int64_t) 8 * binop_x_96034;
            int64_t bytes_96036 = smax64((int64_t) 0, binop_y_96035);
            int64_t binop_y_96052 = (int64_t) 8 * n_92399;
            int64_t bytes_96053 = smax64((int64_t) 0, binop_y_96052);
            int64_t binop_y_96112 = (int64_t) 8 * q_92401;
            int64_t bytes_96113 = smax64((int64_t) 0, binop_y_96112);
            struct memblock ext_mem_96507;
            
            ext_mem_96507.references = NULL;
            
            struct memblock ext_mem_96499;
            
            ext_mem_96499.references = NULL;
            if (match_lit_93696) {
                struct memblock mem_96037;
                
                mem_96037.references = NULL;
                if (memblock_alloc(ctx, &mem_96037, bytes_96036, "mem_96037")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_96832 = 0; i_96832 < m_92398; i_96832++) {
                    for (int64_t i_96833 = 0; i_96833 < n_m_92409; i_96833++) {
                        ((double *) mem_96037.mem)[i_96832 * n_m_92409 +
                                                   i_96833] = 0.0;
                    }
                }
                
                struct memblock mem_96041;
                
                mem_96041.references = NULL;
                if (memblock_alloc(ctx, &mem_96041, bytes_96036, "mem_96041")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_96054_cached_sizze_96943 < (size_t) bytes_96053) {
                    mem_96054 = realloc(mem_96054, bytes_96053);
                    mem_96054_cached_sizze_96943 = bytes_96053;
                }
                if (mem_96069_cached_sizze_96944 < (size_t) bytes_96053) {
                    mem_96069 = realloc(mem_96069, bytes_96053);
                    mem_96069_cached_sizze_96944 = bytes_96053;
                }
                if (mem_96072_cached_sizze_96945 < (size_t) bytes_96053) {
                    mem_96072 = realloc(mem_96072, bytes_96053);
                    mem_96072_cached_sizze_96945 = bytes_96053;
                }
                if (mem_96099_cached_sizze_96946 < (size_t) bytes_96053) {
                    mem_96099 = realloc(mem_96099, bytes_96053);
                    mem_96099_cached_sizze_96946 = bytes_96053;
                }
                if (mem_96114_cached_sizze_96947 < (size_t) bytes_96113) {
                    mem_96114 = realloc(mem_96114, bytes_96113);
                    mem_96114_cached_sizze_96947 = bytes_96113;
                }
                for (int64_t i_94678 = 0; i_94678 < m_92398; i_94678++) {
                    int64_t discard_94651;
                    int64_t scanacc_94647 = (int64_t) 0;
                    
                    for (int64_t i_94649 = 0; i_94649 < n_92399; i_94649++) {
                        double x_93707;
                        
                        x_93707 = ((double *) Y_mem_94966.mem)[i_94678 *
                                                               n_92399 +
                                                               i_94649];
                        
                        bool isnan_res_93708;
                        
                        isnan_res_93708 = futrts_isnan64(x_93707);
                        
                        bool defunc_0_p_res_93709 = !isnan_res_93708;
                        int64_t defunc_0_f_res_93710 =
                                btoi_bool_i64(defunc_0_p_res_93709);
                        int64_t defunc_1_op_res_93706 =
                                add64(defunc_0_f_res_93710, scanacc_94647);
                        
                        ((int64_t *) mem_96054)[i_94649] =
                            defunc_1_op_res_93706;
                        
                        int64_t scanacc_tmp_96835 = defunc_1_op_res_93706;
                        
                        scanacc_94647 = scanacc_tmp_96835;
                    }
                    discard_94651 = scanacc_94647;
                    
                    int64_t last_res_93711;
                    
                    last_res_93711 = ((int64_t *) mem_96054)[i_92415];
                    for (int64_t i_96837 = 0; i_96837 < n_92399; i_96837++) {
                        ((double *) mem_96069)[i_96837] = 0.0;
                    }
                    for (int64_t i_96838 = 0; i_96838 < n_92399; i_96838++) {
                        ((int64_t *) mem_96072)[i_96838] = (int64_t) -1;
                    }
                    for (int64_t write_iter_94652 = 0; write_iter_94652 <
                         n_92399; write_iter_94652++) {
                        double write_iv_94655;
                        
                        write_iv_94655 = ((double *) Y_mem_94966.mem)[i_94678 *
                                                                      n_92399 +
                                                                      write_iter_94652];
                        
                        int64_t write_iv_94656;
                        
                        write_iv_94656 =
                            ((int64_t *) mem_96054)[write_iter_94652];
                        
                        bool isnan_res_93719;
                        
                        isnan_res_93719 = futrts_isnan64(write_iv_94655);
                        
                        bool defunc_0_p_res_93720 = !isnan_res_93719;
                        int64_t defunc_1_f_res_93721;
                        
                        if (defunc_0_p_res_93720) {
                            int64_t defunc_1_f_res_t_res_93722 =
                                    sub64(write_iv_94656, (int64_t) 1);
                            
                            defunc_1_f_res_93721 = defunc_1_f_res_t_res_93722;
                        } else {
                            defunc_1_f_res_93721 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_93721) &&
                            slt64(defunc_1_f_res_93721, n_92399)) {
                            ((int64_t *) mem_96072)[defunc_1_f_res_93721] =
                                write_iter_94652;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_93721) &&
                            slt64(defunc_1_f_res_93721, n_92399)) {
                            if ((int64_t) 8 > 0)
                                memmove(mem_96069 + defunc_1_f_res_93721 *
                                        (int64_t) 8, Y_mem_94966.mem +
                                        (i_94678 * n_92399 + write_iter_94652) *
                                        (int64_t) 8, (int64_t) 8);
                        }
                    }
                    for (int64_t i_94662 = 0; i_94662 < n_92399; i_94662++) {
                        int64_t x_93724;
                        
                        x_93724 = ((int64_t *) mem_96072)[i_94662];
                        
                        int64_t defunc_0_f_res_93725 = add64((int64_t) 1,
                                                             x_93724);
                        
                        ((int64_t *) mem_96099)[i_94662] = defunc_0_f_res_93725;
                    }
                    
                    int64_t min_arg_93726 = sub64(last_res_93711, (int64_t) 1);
                    int64_t min_arg_93727 = sub64(last_res_93711,
                                                  min_res_92421);
                    int64_t min_res_93728 = smin64(q_92401, last_res_93711);
                    double i64_res_93729 = sitofp_i64_f64(last_res_93711);
                    double x_93730 = i64_res_92427 - i64_res_93729;
                    double max_arg_93731 = x_93730 / 2.0;
                    double max_res_93732 = fmax64(0.0, max_arg_93731);
                    
                    for (int64_t i_94666 = 0; i_94666 < q_92401; i_94666++) {
                        bool cond_93735 = sle64(last_res_93711, i_94666);
                        double defunc_0_f_res_93736;
                        
                        if (cond_93735) {
                            defunc_0_f_res_93736 = 0.0;
                        } else {
                            defunc_0_f_res_93736 = 1.0;
                        }
                        ((double *) mem_96114)[i_94666] = defunc_0_f_res_93736;
                    }
                    for (int64_t i_94674 = 0; i_94674 < n_m_92409; i_94674++) {
                        int64_t min_arg_93739 = mul64(jump_92403, i_94674);
                        int64_t min_res_93740 = smin64(i_92415, min_arg_93739);
                        int64_t defunc_0_g_res_93741 = add64((int64_t) 1,
                                                             min_res_93740);
                        bool init_idx_93742;
                        int64_t init_idx_93743;
                        int64_t init_idx_93744;
                        bool loop_while_93745;
                        int64_t low_93746;
                        int64_t high_93747;
                        
                        loop_while_93745 = x_92416;
                        low_93746 = (int64_t) 0;
                        high_93747 = i_92415;
                        while (loop_while_93745) {
                            int64_t x_93748 = add64(low_93746, high_93747);
                            int64_t mid_93749 = sdiv64(x_93748, (int64_t) 2);
                            bool x_93750 = sle64((int64_t) 0, mid_93749);
                            bool y_93751 = slt64(mid_93749, n_92399);
                            bool bounds_check_93752 = x_93750 && y_93751;
                            bool index_certs_93753;
                            
                            if (!bounds_check_93752) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_93749,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96041,
                                                   "mem_96041") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96037,
                                                   "mem_96037") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t mid_id_93754;
                            
                            mid_id_93754 = ((int64_t *) mem_96099)[mid_93749];
                            
                            bool cond_93755 = slt64(mid_id_93754, (int64_t) 0);
                            int64_t mid_idx_93756;
                            
                            if (cond_93755) {
                                mid_idx_93756 = (int64_t) 9223372036854775807;
                            } else {
                                mid_idx_93756 = mid_id_93754;
                            }
                            
                            bool cond_93757 = sle64(defunc_0_g_res_93741,
                                                    mid_idx_93756);
                            int64_t loopres_93758;
                            int64_t loopres_93759;
                            
                            if (cond_93757) {
                                int64_t loopres_t_res_93760 = sub64(mid_93749,
                                                                    (int64_t) 1);
                                
                                loopres_93758 = low_93746;
                                loopres_93759 = loopres_t_res_93760;
                            } else {
                                int64_t loopres_f_res_93761 = add64((int64_t) 1,
                                                                    mid_93749);
                                
                                loopres_93758 = loopres_f_res_93761;
                                loopres_93759 = high_93747;
                            }
                            
                            bool loop_cond_93762 = sle64(loopres_93758,
                                                         loopres_93759);
                            bool loop_while_tmp_96844 = loop_cond_93762;
                            int64_t low_tmp_96845 = loopres_93758;
                            int64_t high_tmp_96846 = loopres_93759;
                            
                            loop_while_93745 = loop_while_tmp_96844;
                            low_93746 = low_tmp_96845;
                            high_93747 = high_tmp_96846;
                        }
                        init_idx_93742 = loop_while_93745;
                        init_idx_93743 = low_93746;
                        init_idx_93744 = high_93747;
                        
                        bool idx_93763;
                        int64_t idx_93764;
                        int64_t idx_93765;
                        int64_t idx_93766;
                        bool loop_while_93767;
                        int64_t l_idx_93768;
                        int64_t r_idx_93769;
                        int64_t span_93770;
                        
                        loop_while_93767 = loop_cond_92426;
                        l_idx_93768 = init_idx_93743;
                        r_idx_93769 = init_idx_93743;
                        span_93770 = (int64_t) 1;
                        while (loop_while_93767) {
                            int64_t max_arg_93771 = sub64(l_idx_93768,
                                                          (int64_t) 1);
                            int64_t max_res_93772 = smax64((int64_t) 0,
                                                           max_arg_93771);
                            int64_t min_arg_93773 = add64((int64_t) 1,
                                                          r_idx_93769);
                            int64_t min_res_93774 = smin64(min_arg_93726,
                                                           min_arg_93773);
                            bool x_93775 = sle64((int64_t) 0, max_res_93772);
                            bool y_93776 = slt64(max_res_93772, n_92399);
                            bool bounds_check_93777 = x_93775 && y_93776;
                            bool index_certs_93778;
                            
                            if (!bounds_check_93777) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_93772,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96041,
                                                   "mem_96041") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96037,
                                                   "mem_96037") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93779;
                            
                            x_93779 = ((int64_t *) mem_96099)[max_res_93772];
                            
                            int64_t abs_arg_93780 = sub64(x_93779,
                                                          defunc_0_g_res_93741);
                            int64_t abs_res_93781 = abs64(abs_arg_93780);
                            bool x_93782 = sle64((int64_t) 0, min_res_93774);
                            bool y_93783 = slt64(min_res_93774, n_92399);
                            bool bounds_check_93784 = x_93782 && y_93783;
                            bool index_certs_93785;
                            
                            if (!bounds_check_93784) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_93774,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96041,
                                                   "mem_96041") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96037,
                                                   "mem_96037") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93786;
                            
                            x_93786 = ((int64_t *) mem_96099)[min_res_93774];
                            
                            int64_t abs_arg_93787 = sub64(x_93786,
                                                          defunc_0_g_res_93741);
                            int64_t abs_res_93788 = abs64(abs_arg_93787);
                            bool cond_93789 = max_res_93772 == l_idx_93768;
                            int64_t loopres_93790;
                            int64_t loopres_93791;
                            int64_t loopres_93792;
                            
                            if (cond_93789) {
                                loopres_93790 = l_idx_93768;
                                loopres_93791 = r_idx_93769;
                                loopres_93792 = min_res_92421;
                            } else {
                                bool cond_93793 = slt64(abs_res_93781,
                                                        abs_res_93788);
                                bool cond_f_res_93794 = min_res_93774 ==
                                     r_idx_93769;
                                bool x_93795 = !cond_93793;
                                bool y_93796 = cond_f_res_93794 && x_93795;
                                bool cond_93797 = cond_93793 || y_93796;
                                int64_t loopres_f_res_93798;
                                
                                if (cond_93797) {
                                    loopres_f_res_93798 = max_res_93772;
                                } else {
                                    loopres_f_res_93798 = l_idx_93768;
                                }
                                
                                int64_t loopres_f_res_93799;
                                
                                if (cond_93797) {
                                    loopres_f_res_93799 = r_idx_93769;
                                } else {
                                    loopres_f_res_93799 = min_res_93774;
                                }
                                
                                int64_t loopres_f_res_93800;
                                
                                if (cond_93797) {
                                    int64_t loopres_f_res_t_res_93801 =
                                            add64((int64_t) 1, span_93770);
                                    
                                    loopres_f_res_93800 =
                                        loopres_f_res_t_res_93801;
                                } else {
                                    int64_t loopres_f_res_f_res_93802 =
                                            add64((int64_t) 1, span_93770);
                                    
                                    loopres_f_res_93800 =
                                        loopres_f_res_f_res_93802;
                                }
                                loopres_93790 = loopres_f_res_93798;
                                loopres_93791 = loopres_f_res_93799;
                                loopres_93792 = loopres_f_res_93800;
                            }
                            
                            bool loop_cond_93803 = slt64(loopres_93792,
                                                         min_res_92421);
                            bool loop_while_tmp_96847 = loop_cond_93803;
                            int64_t l_idx_tmp_96848 = loopres_93790;
                            int64_t r_idx_tmp_96849 = loopres_93791;
                            int64_t span_tmp_96850 = loopres_93792;
                            
                            loop_while_93767 = loop_while_tmp_96847;
                            l_idx_93768 = l_idx_tmp_96848;
                            r_idx_93769 = r_idx_tmp_96849;
                            span_93770 = span_tmp_96850;
                        }
                        idx_93763 = loop_while_93767;
                        idx_93764 = l_idx_93768;
                        idx_93765 = r_idx_93769;
                        idx_93766 = span_93770;
                        
                        int64_t min_res_93804 = smin64(min_arg_93727,
                                                       idx_93764);
                        int64_t max_res_93805 = smax64((int64_t) 0,
                                                       min_res_93804);
                        int64_t x_93806 = add64(min_res_93728, max_res_93805);
                        int64_t r_93807 = sub64(x_93806, (int64_t) 1);
                        bool x_93808 = sle64((int64_t) 0, r_93807);
                        bool y_93809 = slt64(r_93807, n_92399);
                        bool bounds_check_93810 = x_93808 && y_93809;
                        bool index_certs_93811;
                        
                        if (!bounds_check_93810) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_93807,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_96041, "mem_96041") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_96037, "mem_96037") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96499,
                                               "ext_mem_96499") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96507,
                                               "ext_mem_96507") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96515,
                                               "ext_mem_96515") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96523,
                                               "ext_mem_96523") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_93812;
                        
                        x_93812 = ((int64_t *) mem_96072)[r_93807];
                        
                        int64_t abs_arg_93813 = sub64(x_93812, min_res_93740);
                        int64_t abs_res_93814 = abs64(abs_arg_93813);
                        bool x_93815 = sle64((int64_t) 0, max_res_93805);
                        bool y_93816 = slt64(max_res_93805, n_92399);
                        bool bounds_check_93817 = x_93815 && y_93816;
                        bool index_certs_93818;
                        
                        if (!bounds_check_93817) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_93805,
                                          "] out of bounds for array of shape [",
                                          (long long) n_92399, "].",
                                          "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                            if (memblock_unref(ctx, &mem_96041, "mem_96041") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_96037, "mem_96037") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96499,
                                               "ext_mem_96499") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96507,
                                               "ext_mem_96507") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96515,
                                               "ext_mem_96515") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96523,
                                               "ext_mem_96523") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96531,
                                               "ext_mem_96531") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_96539,
                                               "ext_mem_96539") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_96682,
                                               "mem_out_96682") != 0)
                                return 1;
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t x_93819;
                        
                        x_93819 = ((int64_t *) mem_96072)[max_res_93805];
                        
                        int64_t abs_arg_93820 = sub64(x_93819, min_res_93740);
                        int64_t abs_res_93821 = abs64(abs_arg_93820);
                        int64_t max_res_93822 = smax64(abs_res_93814,
                                                       abs_res_93821);
                        double defunc_0_f_res_93823 =
                               sitofp_i64_f64(max_res_93822);
                        double defunc_1_f_res_93824 = max_res_93732 +
                               defunc_0_f_res_93823;
                        double defunc_2_reduce_res_93825;
                        double redout_94668 = 0.0;
                        
                        for (int64_t i_94669 = 0; i_94669 < q_92401;
                             i_94669++) {
                            double x_93830;
                            
                            x_93830 = ((double *) mem_96114)[i_94669];
                            
                            bool cond_93831 = sle64(last_res_93711, i_94669);
                            int64_t defunc_0_f_res_93832;
                            
                            if (cond_93831) {
                                defunc_0_f_res_93832 = (int64_t) 0;
                            } else {
                                int64_t i_93833 = add64(max_res_93805, i_94669);
                                int64_t defunc_0_add_arg_93834;
                                
                                defunc_0_add_arg_93834 =
                                    ((int64_t *) mem_96072)[i_93833];
                                
                                int64_t defunc_1_add_res_93835 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_93834);
                                
                                defunc_0_f_res_93832 = defunc_1_add_res_93835;
                            }
                            
                            int64_t binop_p_93836 = sub64(defunc_0_f_res_93832,
                                                          min_res_93740);
                            double defunc_0_f_res_93837 =
                                   sitofp_i64_f64(binop_p_93836);
                            double abs_res_93838 = fabs(defunc_0_f_res_93837);
                            double tmp1_93839 = abs_res_93838 /
                                   defunc_1_f_res_93824;
                            double x_93840 = tmp1_93839 * tmp1_93839;
                            double y_93841 = tmp1_93839 * x_93840;
                            double tmp2_93842 = 1.0 - y_93841;
                            double x_93843 = tmp2_93842 * tmp2_93842;
                            double tmp3_93844 = tmp2_93842 * x_93843;
                            double w_j_93845 = x_93830 * tmp3_93844;
                            double defunc_1_op_res_93828 = w_j_93845 +
                                   redout_94668;
                            double redout_tmp_96851 = defunc_1_op_res_93828;
                            
                            redout_94668 = redout_tmp_96851;
                        }
                        defunc_2_reduce_res_93825 = redout_94668;
                        
                        double a0_93846 = 1.0 / defunc_2_reduce_res_93825;
                        double defunc_2_reduce_res_93847;
                        double redout_94670 = 0.0;
                        
                        for (int64_t i_94671 = 0; i_94671 < q_92401;
                             i_94671++) {
                            double x_93852;
                            
                            x_93852 = ((double *) mem_96114)[i_94671];
                            
                            bool cond_93853 = sle64(last_res_93711, i_94671);
                            int64_t defunc_0_f_res_93854;
                            
                            if (cond_93853) {
                                defunc_0_f_res_93854 = (int64_t) 0;
                            } else {
                                int64_t i_93855 = add64(max_res_93805, i_94671);
                                int64_t defunc_0_add_arg_93856;
                                
                                defunc_0_add_arg_93856 =
                                    ((int64_t *) mem_96072)[i_93855];
                                
                                int64_t defunc_1_add_res_93857 =
                                        add64((int64_t) 1,
                                              defunc_0_add_arg_93856);
                                
                                defunc_0_f_res_93854 = defunc_1_add_res_93857;
                            }
                            
                            int64_t binop_p_93858 = sub64(defunc_0_f_res_93854,
                                                          min_res_93740);
                            double defunc_0_f_res_93859 =
                                   sitofp_i64_f64(binop_p_93858);
                            double abs_res_93860 = fabs(defunc_0_f_res_93859);
                            double tmp1_93861 = abs_res_93860 /
                                   defunc_1_f_res_93824;
                            double x_93862 = tmp1_93861 * tmp1_93861;
                            double y_93863 = tmp1_93861 * x_93862;
                            double tmp2_93864 = 1.0 - y_93863;
                            double x_93865 = tmp2_93864 * tmp2_93864;
                            double tmp3_93866 = tmp2_93864 * x_93865;
                            double tmp4_93867 = x_93852 * tmp3_93866;
                            double defunc_0_f_res_93868;
                            
                            if (cond_93853) {
                                defunc_0_f_res_93868 = 0.0;
                            } else {
                                int64_t i_93869 = add64(max_res_93805, i_94671);
                                double defunc_0_add_arg_93870;
                                
                                defunc_0_add_arg_93870 =
                                    ((double *) mem_96069)[i_93869];
                                defunc_0_f_res_93868 = defunc_0_add_arg_93870;
                            }
                            
                            double x_93871 = a0_93846 * tmp4_93867;
                            double defunc_9_fit_fun_res_93872 =
                                   defunc_0_f_res_93868 * x_93871;
                            double defunc_1_op_res_93850 =
                                   defunc_9_fit_fun_res_93872 + redout_94670;
                            double redout_tmp_96852 = defunc_1_op_res_93850;
                            
                            redout_94670 = redout_tmp_96852;
                        }
                        defunc_2_reduce_res_93847 = redout_94670;
                        ((double *) mem_96041.mem)[i_94678 * n_m_92409 +
                                                   i_94674] =
                            defunc_2_reduce_res_93847;
                    }
                }
                if (memblock_set(ctx, &ext_mem_96507, &mem_96041,
                                 "mem_96041") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_96499, &mem_96037,
                                 "mem_96037") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_96041, "mem_96041") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_96037, "mem_96037") != 0)
                    return 1;
            } else {
                bool match_lit_93875 = (int64_t) 1 == degree_92402;
                int64_t binop_x_96157 = m_92398 * n_m_92409;
                int64_t binop_y_96158 = (int64_t) 8 * binop_x_96157;
                int64_t bytes_96159 = smax64((int64_t) 0, binop_y_96158);
                int64_t binop_y_96185 = (int64_t) 8 * n_92399;
                int64_t bytes_96186 = smax64((int64_t) 0, binop_y_96185);
                int64_t binop_y_96245 = (int64_t) 8 * q_92401;
                int64_t bytes_96246 = smax64((int64_t) 0, binop_y_96245);
                int64_t binop_x_96320 = m_92398 * n_m_92409;
                int64_t binop_y_96321 = (int64_t) 8 * binop_x_96320;
                int64_t bytes_96322 = smax64((int64_t) 0, binop_y_96321);
                int64_t binop_y_96348 = (int64_t) 8 * n_92399;
                int64_t bytes_96349 = smax64((int64_t) 0, binop_y_96348);
                int64_t binop_y_96408 = (int64_t) 8 * q_92401;
                int64_t bytes_96409 = smax64((int64_t) 0, binop_y_96408);
                struct memblock ext_mem_96491;
                
                ext_mem_96491.references = NULL;
                
                struct memblock ext_mem_96483;
                
                ext_mem_96483.references = NULL;
                if (match_lit_93875) {
                    struct memblock mem_96160;
                    
                    mem_96160.references = NULL;
                    if (memblock_alloc(ctx, &mem_96160, bytes_96159,
                                       "mem_96160")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_96164;
                    
                    mem_96164.references = NULL;
                    if (memblock_alloc(ctx, &mem_96164, bytes_96159,
                                       "mem_96164")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_96187_cached_sizze_96948 < (size_t) bytes_96186) {
                        mem_96187 = realloc(mem_96187, bytes_96186);
                        mem_96187_cached_sizze_96948 = bytes_96186;
                    }
                    if (mem_96202_cached_sizze_96949 < (size_t) bytes_96186) {
                        mem_96202 = realloc(mem_96202, bytes_96186);
                        mem_96202_cached_sizze_96949 = bytes_96186;
                    }
                    if (mem_96205_cached_sizze_96950 < (size_t) bytes_96186) {
                        mem_96205 = realloc(mem_96205, bytes_96186);
                        mem_96205_cached_sizze_96950 = bytes_96186;
                    }
                    if (mem_96232_cached_sizze_96951 < (size_t) bytes_96186) {
                        mem_96232 = realloc(mem_96232, bytes_96186);
                        mem_96232_cached_sizze_96951 = bytes_96186;
                    }
                    if (mem_96247_cached_sizze_96952 < (size_t) bytes_96246) {
                        mem_96247 = realloc(mem_96247, bytes_96246);
                        mem_96247_cached_sizze_96952 = bytes_96246;
                    }
                    for (int64_t i_94720 = 0; i_94720 < m_92398; i_94720++) {
                        int64_t discard_94685;
                        int64_t scanacc_94681 = (int64_t) 0;
                        
                        for (int64_t i_94683 = 0; i_94683 < n_92399;
                             i_94683++) {
                            double x_93886;
                            
                            x_93886 = ((double *) Y_mem_94966.mem)[i_94720 *
                                                                   n_92399 +
                                                                   i_94683];
                            
                            bool isnan_res_93887;
                            
                            isnan_res_93887 = futrts_isnan64(x_93886);
                            
                            bool defunc_0_p_res_93888 = !isnan_res_93887;
                            int64_t defunc_0_f_res_93889 =
                                    btoi_bool_i64(defunc_0_p_res_93888);
                            int64_t defunc_1_op_res_93885 =
                                    add64(defunc_0_f_res_93889, scanacc_94681);
                            
                            ((int64_t *) mem_96187)[i_94683] =
                                defunc_1_op_res_93885;
                            
                            int64_t scanacc_tmp_96855 = defunc_1_op_res_93885;
                            
                            scanacc_94681 = scanacc_tmp_96855;
                        }
                        discard_94685 = scanacc_94681;
                        
                        int64_t last_res_93890;
                        
                        last_res_93890 = ((int64_t *) mem_96187)[i_92415];
                        for (int64_t i_96857 = 0; i_96857 < n_92399;
                             i_96857++) {
                            ((double *) mem_96202)[i_96857] = 0.0;
                        }
                        for (int64_t i_96858 = 0; i_96858 < n_92399;
                             i_96858++) {
                            ((int64_t *) mem_96205)[i_96858] = (int64_t) -1;
                        }
                        for (int64_t write_iter_94686 = 0; write_iter_94686 <
                             n_92399; write_iter_94686++) {
                            double write_iv_94689;
                            
                            write_iv_94689 =
                                ((double *) Y_mem_94966.mem)[i_94720 * n_92399 +
                                                             write_iter_94686];
                            
                            int64_t write_iv_94690;
                            
                            write_iv_94690 =
                                ((int64_t *) mem_96187)[write_iter_94686];
                            
                            bool isnan_res_93898;
                            
                            isnan_res_93898 = futrts_isnan64(write_iv_94689);
                            
                            bool defunc_0_p_res_93899 = !isnan_res_93898;
                            int64_t defunc_1_f_res_93900;
                            
                            if (defunc_0_p_res_93899) {
                                int64_t defunc_1_f_res_t_res_93901 =
                                        sub64(write_iv_94690, (int64_t) 1);
                                
                                defunc_1_f_res_93900 =
                                    defunc_1_f_res_t_res_93901;
                            } else {
                                defunc_1_f_res_93900 = (int64_t) -1;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_93900) &&
                                slt64(defunc_1_f_res_93900, n_92399)) {
                                ((int64_t *) mem_96205)[defunc_1_f_res_93900] =
                                    write_iter_94686;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_93900) &&
                                slt64(defunc_1_f_res_93900, n_92399)) {
                                if ((int64_t) 8 > 0)
                                    memmove(mem_96202 + defunc_1_f_res_93900 *
                                            (int64_t) 8, Y_mem_94966.mem +
                                            (i_94720 * n_92399 +
                                             write_iter_94686) * (int64_t) 8,
                                            (int64_t) 8);
                            }
                        }
                        for (int64_t i_94696 = 0; i_94696 < n_92399;
                             i_94696++) {
                            int64_t x_93903;
                            
                            x_93903 = ((int64_t *) mem_96205)[i_94696];
                            
                            int64_t defunc_0_f_res_93904 = add64((int64_t) 1,
                                                                 x_93903);
                            
                            ((int64_t *) mem_96232)[i_94696] =
                                defunc_0_f_res_93904;
                        }
                        
                        int64_t min_arg_93905 = sub64(last_res_93890,
                                                      (int64_t) 1);
                        int64_t min_arg_93906 = sub64(last_res_93890,
                                                      min_res_92421);
                        int64_t min_res_93907 = smin64(q_92401, last_res_93890);
                        double i64_res_93908 = sitofp_i64_f64(last_res_93890);
                        double x_93909 = i64_res_92427 - i64_res_93908;
                        double max_arg_93910 = x_93909 / 2.0;
                        double max_res_93911 = fmax64(0.0, max_arg_93910);
                        
                        for (int64_t i_94700 = 0; i_94700 < q_92401;
                             i_94700++) {
                            bool cond_93914 = sle64(last_res_93890, i_94700);
                            double defunc_0_f_res_93915;
                            
                            if (cond_93914) {
                                defunc_0_f_res_93915 = 0.0;
                            } else {
                                defunc_0_f_res_93915 = 1.0;
                            }
                            ((double *) mem_96247)[i_94700] =
                                defunc_0_f_res_93915;
                        }
                        for (int64_t i_94713 = 0; i_94713 < n_m_92409;
                             i_94713++) {
                            int64_t min_arg_93919 = mul64(jump_92403, i_94713);
                            int64_t min_res_93920 = smin64(i_92415,
                                                           min_arg_93919);
                            int64_t defunc_0_g_res_93921 = add64((int64_t) 1,
                                                                 min_res_93920);
                            bool init_idx_93922;
                            int64_t init_idx_93923;
                            int64_t init_idx_93924;
                            bool loop_while_93925;
                            int64_t low_93926;
                            int64_t high_93927;
                            
                            loop_while_93925 = x_92416;
                            low_93926 = (int64_t) 0;
                            high_93927 = i_92415;
                            while (loop_while_93925) {
                                int64_t x_93928 = add64(low_93926, high_93927);
                                int64_t mid_93929 = sdiv64(x_93928,
                                                           (int64_t) 2);
                                bool x_93930 = sle64((int64_t) 0, mid_93929);
                                bool y_93931 = slt64(mid_93929, n_92399);
                                bool bounds_check_93932 = x_93930 && y_93931;
                                bool index_certs_93933;
                                
                                if (!bounds_check_93932) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) mid_93929,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_96164,
                                                       "mem_96164") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_96160,
                                                       "mem_96160") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96483,
                                                       "ext_mem_96483") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96491,
                                                       "ext_mem_96491") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96499,
                                                       "ext_mem_96499") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96507,
                                                       "ext_mem_96507") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t mid_id_93934;
                                
                                mid_id_93934 =
                                    ((int64_t *) mem_96232)[mid_93929];
                                
                                bool cond_93935 = slt64(mid_id_93934,
                                                        (int64_t) 0);
                                int64_t mid_idx_93936;
                                
                                if (cond_93935) {
                                    mid_idx_93936 =
                                        (int64_t) 9223372036854775807;
                                } else {
                                    mid_idx_93936 = mid_id_93934;
                                }
                                
                                bool cond_93937 = sle64(defunc_0_g_res_93921,
                                                        mid_idx_93936);
                                int64_t loopres_93938;
                                int64_t loopres_93939;
                                
                                if (cond_93937) {
                                    int64_t loopres_t_res_93940 =
                                            sub64(mid_93929, (int64_t) 1);
                                    
                                    loopres_93938 = low_93926;
                                    loopres_93939 = loopres_t_res_93940;
                                } else {
                                    int64_t loopres_f_res_93941 =
                                            add64((int64_t) 1, mid_93929);
                                    
                                    loopres_93938 = loopres_f_res_93941;
                                    loopres_93939 = high_93927;
                                }
                                
                                bool loop_cond_93942 = sle64(loopres_93938,
                                                             loopres_93939);
                                bool loop_while_tmp_96865 = loop_cond_93942;
                                int64_t low_tmp_96866 = loopres_93938;
                                int64_t high_tmp_96867 = loopres_93939;
                                
                                loop_while_93925 = loop_while_tmp_96865;
                                low_93926 = low_tmp_96866;
                                high_93927 = high_tmp_96867;
                            }
                            init_idx_93922 = loop_while_93925;
                            init_idx_93923 = low_93926;
                            init_idx_93924 = high_93927;
                            
                            bool idx_93943;
                            int64_t idx_93944;
                            int64_t idx_93945;
                            int64_t idx_93946;
                            bool loop_while_93947;
                            int64_t l_idx_93948;
                            int64_t r_idx_93949;
                            int64_t span_93950;
                            
                            loop_while_93947 = loop_cond_92426;
                            l_idx_93948 = init_idx_93923;
                            r_idx_93949 = init_idx_93923;
                            span_93950 = (int64_t) 1;
                            while (loop_while_93947) {
                                int64_t max_arg_93951 = sub64(l_idx_93948,
                                                              (int64_t) 1);
                                int64_t max_res_93952 = smax64((int64_t) 0,
                                                               max_arg_93951);
                                int64_t min_arg_93953 = add64((int64_t) 1,
                                                              r_idx_93949);
                                int64_t min_res_93954 = smin64(min_arg_93905,
                                                               min_arg_93953);
                                bool x_93955 = sle64((int64_t) 0,
                                                     max_res_93952);
                                bool y_93956 = slt64(max_res_93952, n_92399);
                                bool bounds_check_93957 = x_93955 && y_93956;
                                bool index_certs_93958;
                                
                                if (!bounds_check_93957) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) max_res_93952,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_96164,
                                                       "mem_96164") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_96160,
                                                       "mem_96160") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96483,
                                                       "ext_mem_96483") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96491,
                                                       "ext_mem_96491") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96499,
                                                       "ext_mem_96499") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96507,
                                                       "ext_mem_96507") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_93959;
                                
                                x_93959 =
                                    ((int64_t *) mem_96232)[max_res_93952];
                                
                                int64_t abs_arg_93960 = sub64(x_93959,
                                                              defunc_0_g_res_93921);
                                int64_t abs_res_93961 = abs64(abs_arg_93960);
                                bool x_93962 = sle64((int64_t) 0,
                                                     min_res_93954);
                                bool y_93963 = slt64(min_res_93954, n_92399);
                                bool bounds_check_93964 = x_93962 && y_93963;
                                bool index_certs_93965;
                                
                                if (!bounds_check_93964) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_93954,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_96164,
                                                       "mem_96164") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_96160,
                                                       "mem_96160") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96483,
                                                       "ext_mem_96483") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96491,
                                                       "ext_mem_96491") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96499,
                                                       "ext_mem_96499") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96507,
                                                       "ext_mem_96507") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_93966;
                                
                                x_93966 =
                                    ((int64_t *) mem_96232)[min_res_93954];
                                
                                int64_t abs_arg_93967 = sub64(x_93966,
                                                              defunc_0_g_res_93921);
                                int64_t abs_res_93968 = abs64(abs_arg_93967);
                                bool cond_93969 = max_res_93952 == l_idx_93948;
                                int64_t loopres_93970;
                                int64_t loopres_93971;
                                int64_t loopres_93972;
                                
                                if (cond_93969) {
                                    loopres_93970 = l_idx_93948;
                                    loopres_93971 = r_idx_93949;
                                    loopres_93972 = min_res_92421;
                                } else {
                                    bool cond_93973 = slt64(abs_res_93961,
                                                            abs_res_93968);
                                    bool cond_f_res_93974 = min_res_93954 ==
                                         r_idx_93949;
                                    bool x_93975 = !cond_93973;
                                    bool y_93976 = cond_f_res_93974 && x_93975;
                                    bool cond_93977 = cond_93973 || y_93976;
                                    int64_t loopres_f_res_93978;
                                    
                                    if (cond_93977) {
                                        loopres_f_res_93978 = max_res_93952;
                                    } else {
                                        loopres_f_res_93978 = l_idx_93948;
                                    }
                                    
                                    int64_t loopres_f_res_93979;
                                    
                                    if (cond_93977) {
                                        loopres_f_res_93979 = r_idx_93949;
                                    } else {
                                        loopres_f_res_93979 = min_res_93954;
                                    }
                                    
                                    int64_t loopres_f_res_93980;
                                    
                                    if (cond_93977) {
                                        int64_t loopres_f_res_t_res_93981 =
                                                add64((int64_t) 1, span_93950);
                                        
                                        loopres_f_res_93980 =
                                            loopres_f_res_t_res_93981;
                                    } else {
                                        int64_t loopres_f_res_f_res_93982 =
                                                add64((int64_t) 1, span_93950);
                                        
                                        loopres_f_res_93980 =
                                            loopres_f_res_f_res_93982;
                                    }
                                    loopres_93970 = loopres_f_res_93978;
                                    loopres_93971 = loopres_f_res_93979;
                                    loopres_93972 = loopres_f_res_93980;
                                }
                                
                                bool loop_cond_93983 = slt64(loopres_93972,
                                                             min_res_92421);
                                bool loop_while_tmp_96868 = loop_cond_93983;
                                int64_t l_idx_tmp_96869 = loopres_93970;
                                int64_t r_idx_tmp_96870 = loopres_93971;
                                int64_t span_tmp_96871 = loopres_93972;
                                
                                loop_while_93947 = loop_while_tmp_96868;
                                l_idx_93948 = l_idx_tmp_96869;
                                r_idx_93949 = r_idx_tmp_96870;
                                span_93950 = span_tmp_96871;
                            }
                            idx_93943 = loop_while_93947;
                            idx_93944 = l_idx_93948;
                            idx_93945 = r_idx_93949;
                            idx_93946 = span_93950;
                            
                            int64_t min_res_93984 = smin64(min_arg_93906,
                                                           idx_93944);
                            int64_t max_res_93985 = smax64((int64_t) 0,
                                                           min_res_93984);
                            int64_t x_93986 = add64(min_res_93907,
                                                    max_res_93985);
                            int64_t r_93987 = sub64(x_93986, (int64_t) 1);
                            bool x_93988 = sle64((int64_t) 0, r_93987);
                            bool y_93989 = slt64(r_93987, n_92399);
                            bool bounds_check_93990 = x_93988 && y_93989;
                            bool index_certs_93991;
                            
                            if (!bounds_check_93990) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) r_93987,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96164,
                                                   "mem_96164") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96160,
                                                   "mem_96160") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96483,
                                                   "ext_mem_96483") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96491,
                                                   "ext_mem_96491") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93992;
                            
                            x_93992 = ((int64_t *) mem_96205)[r_93987];
                            
                            int64_t abs_arg_93993 = sub64(x_93992,
                                                          min_res_93920);
                            int64_t abs_res_93994 = abs64(abs_arg_93993);
                            bool x_93995 = sle64((int64_t) 0, max_res_93985);
                            bool y_93996 = slt64(max_res_93985, n_92399);
                            bool bounds_check_93997 = x_93995 && y_93996;
                            bool index_certs_93998;
                            
                            if (!bounds_check_93997) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_93985,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96164,
                                                   "mem_96164") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96160,
                                                   "mem_96160") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96483,
                                                   "ext_mem_96483") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96491,
                                                   "ext_mem_96491") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_93999;
                            
                            x_93999 = ((int64_t *) mem_96205)[max_res_93985];
                            
                            int64_t abs_arg_94000 = sub64(x_93999,
                                                          min_res_93920);
                            int64_t abs_res_94001 = abs64(abs_arg_94000);
                            int64_t max_res_94002 = smax64(abs_res_93994,
                                                           abs_res_94001);
                            double defunc_0_f_res_94003 =
                                   sitofp_i64_f64(max_res_94002);
                            double defunc_1_f_res_94004 = max_res_93911 +
                                   defunc_0_f_res_94003;
                            double defunc_2_reduce_res_94005;
                            double defunc_2_reduce_res_94006;
                            double defunc_2_reduce_res_94007;
                            double redout_94702;
                            double redout_94703;
                            double redout_94704;
                            
                            redout_94702 = 0.0;
                            redout_94703 = 0.0;
                            redout_94704 = 0.0;
                            for (int64_t i_94705 = 0; i_94705 < q_92401;
                                 i_94705++) {
                                double x_94018;
                                
                                x_94018 = ((double *) mem_96247)[i_94705];
                                
                                bool cond_94019 = sle64(last_res_93890,
                                                        i_94705);
                                int64_t defunc_0_f_res_94020;
                                
                                if (cond_94019) {
                                    defunc_0_f_res_94020 = (int64_t) 0;
                                } else {
                                    int64_t i_94021 = add64(max_res_93985,
                                                            i_94705);
                                    int64_t defunc_0_add_arg_94022;
                                    
                                    defunc_0_add_arg_94022 =
                                        ((int64_t *) mem_96205)[i_94021];
                                    
                                    int64_t defunc_1_add_res_94023 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_94022);
                                    
                                    defunc_0_f_res_94020 =
                                        defunc_1_add_res_94023;
                                }
                                
                                int64_t binop_p_94024 =
                                        sub64(defunc_0_f_res_94020,
                                              min_res_93920);
                                double defunc_0_f_res_94025 =
                                       sitofp_i64_f64(binop_p_94024);
                                double abs_res_94026 =
                                       fabs(defunc_0_f_res_94025);
                                double tmp1_94027 = abs_res_94026 /
                                       defunc_1_f_res_94004;
                                double x_94028 = tmp1_94027 * tmp1_94027;
                                double y_94029 = tmp1_94027 * x_94028;
                                double tmp2_94030 = 1.0 - y_94029;
                                double x_94031 = tmp2_94030 * tmp2_94030;
                                double tmp3_94032 = tmp2_94030 * x_94031;
                                double w_j_94033 = x_94018 * tmp3_94032;
                                double xw_j_94034 = defunc_0_f_res_94025 *
                                       w_j_94033;
                                double x2w_j_94035 = defunc_0_f_res_94025 *
                                       xw_j_94034;
                                double defunc_1_op_res_94010 = w_j_94033 +
                                       redout_94702;
                                double defunc_1_op_res_94013 = xw_j_94034 +
                                       redout_94703;
                                double defunc_1_op_res_94016 = x2w_j_94035 +
                                       redout_94704;
                                double redout_tmp_96872 = defunc_1_op_res_94010;
                                double redout_tmp_96873 = defunc_1_op_res_94013;
                                double redout_tmp_96874 = defunc_1_op_res_94016;
                                
                                redout_94702 = redout_tmp_96872;
                                redout_94703 = redout_tmp_96873;
                                redout_94704 = redout_tmp_96874;
                            }
                            defunc_2_reduce_res_94005 = redout_94702;
                            defunc_2_reduce_res_94006 = redout_94703;
                            defunc_2_reduce_res_94007 = redout_94704;
                            
                            double x_94036 = defunc_2_reduce_res_94005 *
                                   defunc_2_reduce_res_94007;
                            double y_94037 = defunc_2_reduce_res_94006 *
                                   defunc_2_reduce_res_94006;
                            double y_94038 = x_94036 - y_94037;
                            double det1_94039 = 1.0 / y_94038;
                            double a11_94040 = defunc_2_reduce_res_94007 *
                                   det1_94039;
                            double x_94041 = 0.0 - defunc_2_reduce_res_94006;
                            double b11_94042 = det1_94039 * x_94041;
                            double c11_94043 = defunc_2_reduce_res_94005 *
                                   det1_94039;
                            double defunc_2_reduce_res_94044;
                            double defunc_2_reduce_res_94045;
                            double redout_94706;
                            double redout_94707;
                            
                            redout_94706 = 0.0;
                            redout_94707 = 0.0;
                            for (int64_t i_94708 = 0; i_94708 < q_92401;
                                 i_94708++) {
                                double x_94053;
                                
                                x_94053 = ((double *) mem_96247)[i_94708];
                                
                                bool cond_94054 = sle64(last_res_93890,
                                                        i_94708);
                                int64_t defunc_0_f_res_94055;
                                
                                if (cond_94054) {
                                    defunc_0_f_res_94055 = (int64_t) 0;
                                } else {
                                    int64_t i_94056 = add64(max_res_93985,
                                                            i_94708);
                                    int64_t defunc_0_add_arg_94057;
                                    
                                    defunc_0_add_arg_94057 =
                                        ((int64_t *) mem_96205)[i_94056];
                                    
                                    int64_t defunc_1_add_res_94058 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_94057);
                                    
                                    defunc_0_f_res_94055 =
                                        defunc_1_add_res_94058;
                                }
                                
                                int64_t binop_p_94059 =
                                        sub64(defunc_0_f_res_94055,
                                              min_res_93920);
                                double defunc_0_f_res_94060 =
                                       sitofp_i64_f64(binop_p_94059);
                                double abs_res_94061 =
                                       fabs(defunc_0_f_res_94060);
                                double tmp1_94062 = abs_res_94061 /
                                       defunc_1_f_res_94004;
                                double x_94063 = tmp1_94062 * tmp1_94062;
                                double y_94064 = tmp1_94062 * x_94063;
                                double tmp2_94065 = 1.0 - y_94064;
                                double x_94066 = tmp2_94065 * tmp2_94065;
                                double tmp3_94067 = tmp2_94065 * x_94066;
                                double tmp4_94068 = x_94053 * tmp3_94067;
                                double defunc_1_f_res_94069 =
                                       defunc_0_f_res_94060 * tmp4_94068;
                                double defunc_0_f_res_94070;
                                
                                if (cond_94054) {
                                    defunc_0_f_res_94070 = 0.0;
                                } else {
                                    int64_t i_94071 = add64(max_res_93985,
                                                            i_94708);
                                    double defunc_0_add_arg_94072;
                                    
                                    defunc_0_add_arg_94072 =
                                        ((double *) mem_96202)[i_94071];
                                    defunc_0_f_res_94070 =
                                        defunc_0_add_arg_94072;
                                }
                                
                                double x_94073 = a11_94040 * tmp4_94068;
                                double y_94074 = b11_94042 *
                                       defunc_1_f_res_94069;
                                double x_94075 = x_94073 + y_94074;
                                double defunc_9_fit_fun_res_94076 =
                                       defunc_0_f_res_94070 * x_94075;
                                double x_94077 = b11_94042 * tmp4_94068;
                                double y_94078 = c11_94043 *
                                       defunc_1_f_res_94069;
                                double x_94079 = x_94077 + y_94078;
                                double defunc_9_slope_fun_res_94080 =
                                       defunc_0_f_res_94070 * x_94079;
                                double defunc_1_op_res_94048 =
                                       defunc_9_fit_fun_res_94076 +
                                       redout_94706;
                                double defunc_1_op_res_94051 =
                                       defunc_9_slope_fun_res_94080 +
                                       redout_94707;
                                double redout_tmp_96875 = defunc_1_op_res_94048;
                                double redout_tmp_96876 = defunc_1_op_res_94051;
                                
                                redout_94706 = redout_tmp_96875;
                                redout_94707 = redout_tmp_96876;
                            }
                            defunc_2_reduce_res_94044 = redout_94706;
                            defunc_2_reduce_res_94045 = redout_94707;
                            ((double *) mem_96160.mem)[i_94720 * n_m_92409 +
                                                       i_94713] =
                                defunc_2_reduce_res_94044;
                            ((double *) mem_96164.mem)[i_94720 * n_m_92409 +
                                                       i_94713] =
                                defunc_2_reduce_res_94045;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_96491, &mem_96160,
                                     "mem_96160") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_96483, &mem_96164,
                                     "mem_96164") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_96164, "mem_96164") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_96160, "mem_96160") != 0)
                        return 1;
                } else {
                    struct memblock mem_96323;
                    
                    mem_96323.references = NULL;
                    if (memblock_alloc(ctx, &mem_96323, bytes_96322,
                                       "mem_96323")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock mem_96327;
                    
                    mem_96327.references = NULL;
                    if (memblock_alloc(ctx, &mem_96327, bytes_96322,
                                       "mem_96327")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_96350_cached_sizze_96953 < (size_t) bytes_96349) {
                        mem_96350 = realloc(mem_96350, bytes_96349);
                        mem_96350_cached_sizze_96953 = bytes_96349;
                    }
                    if (mem_96365_cached_sizze_96954 < (size_t) bytes_96349) {
                        mem_96365 = realloc(mem_96365, bytes_96349);
                        mem_96365_cached_sizze_96954 = bytes_96349;
                    }
                    if (mem_96368_cached_sizze_96955 < (size_t) bytes_96349) {
                        mem_96368 = realloc(mem_96368, bytes_96349);
                        mem_96368_cached_sizze_96955 = bytes_96349;
                    }
                    if (mem_96395_cached_sizze_96956 < (size_t) bytes_96349) {
                        mem_96395 = realloc(mem_96395, bytes_96349);
                        mem_96395_cached_sizze_96956 = bytes_96349;
                    }
                    if (mem_96410_cached_sizze_96957 < (size_t) bytes_96409) {
                        mem_96410 = realloc(mem_96410, bytes_96409);
                        mem_96410_cached_sizze_96957 = bytes_96409;
                    }
                    for (int64_t i_94765 = 0; i_94765 < m_92398; i_94765++) {
                        int64_t discard_94728;
                        int64_t scanacc_94724 = (int64_t) 0;
                        
                        for (int64_t i_94726 = 0; i_94726 < n_92399;
                             i_94726++) {
                            double x_94091;
                            
                            x_94091 = ((double *) Y_mem_94966.mem)[i_94765 *
                                                                   n_92399 +
                                                                   i_94726];
                            
                            bool isnan_res_94092;
                            
                            isnan_res_94092 = futrts_isnan64(x_94091);
                            
                            bool defunc_0_p_res_94093 = !isnan_res_94092;
                            int64_t defunc_0_f_res_94094 =
                                    btoi_bool_i64(defunc_0_p_res_94093);
                            int64_t defunc_1_op_res_94090 =
                                    add64(defunc_0_f_res_94094, scanacc_94724);
                            
                            ((int64_t *) mem_96350)[i_94726] =
                                defunc_1_op_res_94090;
                            
                            int64_t scanacc_tmp_96879 = defunc_1_op_res_94090;
                            
                            scanacc_94724 = scanacc_tmp_96879;
                        }
                        discard_94728 = scanacc_94724;
                        
                        int64_t last_res_94095;
                        
                        last_res_94095 = ((int64_t *) mem_96350)[i_92415];
                        for (int64_t i_96881 = 0; i_96881 < n_92399;
                             i_96881++) {
                            ((double *) mem_96365)[i_96881] = 0.0;
                        }
                        for (int64_t i_96882 = 0; i_96882 < n_92399;
                             i_96882++) {
                            ((int64_t *) mem_96368)[i_96882] = (int64_t) -1;
                        }
                        for (int64_t write_iter_94729 = 0; write_iter_94729 <
                             n_92399; write_iter_94729++) {
                            double write_iv_94732;
                            
                            write_iv_94732 =
                                ((double *) Y_mem_94966.mem)[i_94765 * n_92399 +
                                                             write_iter_94729];
                            
                            int64_t write_iv_94733;
                            
                            write_iv_94733 =
                                ((int64_t *) mem_96350)[write_iter_94729];
                            
                            bool isnan_res_94103;
                            
                            isnan_res_94103 = futrts_isnan64(write_iv_94732);
                            
                            bool defunc_0_p_res_94104 = !isnan_res_94103;
                            int64_t defunc_1_f_res_94105;
                            
                            if (defunc_0_p_res_94104) {
                                int64_t defunc_1_f_res_t_res_94106 =
                                        sub64(write_iv_94733, (int64_t) 1);
                                
                                defunc_1_f_res_94105 =
                                    defunc_1_f_res_t_res_94106;
                            } else {
                                defunc_1_f_res_94105 = (int64_t) -1;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_94105) &&
                                slt64(defunc_1_f_res_94105, n_92399)) {
                                ((int64_t *) mem_96368)[defunc_1_f_res_94105] =
                                    write_iter_94729;
                            }
                            if (sle64((int64_t) 0, defunc_1_f_res_94105) &&
                                slt64(defunc_1_f_res_94105, n_92399)) {
                                if ((int64_t) 8 > 0)
                                    memmove(mem_96365 + defunc_1_f_res_94105 *
                                            (int64_t) 8, Y_mem_94966.mem +
                                            (i_94765 * n_92399 +
                                             write_iter_94729) * (int64_t) 8,
                                            (int64_t) 8);
                            }
                        }
                        for (int64_t i_94739 = 0; i_94739 < n_92399;
                             i_94739++) {
                            int64_t x_94108;
                            
                            x_94108 = ((int64_t *) mem_96368)[i_94739];
                            
                            int64_t defunc_0_f_res_94109 = add64((int64_t) 1,
                                                                 x_94108);
                            
                            ((int64_t *) mem_96395)[i_94739] =
                                defunc_0_f_res_94109;
                        }
                        
                        int64_t min_arg_94110 = sub64(last_res_94095,
                                                      (int64_t) 1);
                        int64_t min_arg_94111 = sub64(last_res_94095,
                                                      min_res_92421);
                        int64_t min_res_94112 = smin64(q_92401, last_res_94095);
                        double i64_res_94113 = sitofp_i64_f64(last_res_94095);
                        double x_94114 = i64_res_92427 - i64_res_94113;
                        double max_arg_94115 = x_94114 / 2.0;
                        double max_res_94116 = fmax64(0.0, max_arg_94115);
                        
                        for (int64_t i_94743 = 0; i_94743 < q_92401;
                             i_94743++) {
                            bool cond_94119 = sle64(last_res_94095, i_94743);
                            double defunc_0_f_res_94120;
                            
                            if (cond_94119) {
                                defunc_0_f_res_94120 = 0.0;
                            } else {
                                defunc_0_f_res_94120 = 1.0;
                            }
                            ((double *) mem_96410)[i_94743] =
                                defunc_0_f_res_94120;
                        }
                        for (int64_t i_94758 = 0; i_94758 < n_m_92409;
                             i_94758++) {
                            int64_t min_arg_94124 = mul64(jump_92403, i_94758);
                            int64_t min_res_94125 = smin64(i_92415,
                                                           min_arg_94124);
                            int64_t defunc_0_g_res_94126 = add64((int64_t) 1,
                                                                 min_res_94125);
                            bool init_idx_94127;
                            int64_t init_idx_94128;
                            int64_t init_idx_94129;
                            bool loop_while_94130;
                            int64_t low_94131;
                            int64_t high_94132;
                            
                            loop_while_94130 = x_92416;
                            low_94131 = (int64_t) 0;
                            high_94132 = i_92415;
                            while (loop_while_94130) {
                                int64_t x_94133 = add64(low_94131, high_94132);
                                int64_t mid_94134 = sdiv64(x_94133,
                                                           (int64_t) 2);
                                bool x_94135 = sle64((int64_t) 0, mid_94134);
                                bool y_94136 = slt64(mid_94134, n_92399);
                                bool bounds_check_94137 = x_94135 && y_94136;
                                bool index_certs_94138;
                                
                                if (!bounds_check_94137) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) mid_94134,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_96327,
                                                       "mem_96327") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_96323,
                                                       "mem_96323") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96483,
                                                       "ext_mem_96483") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96491,
                                                       "ext_mem_96491") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96499,
                                                       "ext_mem_96499") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96507,
                                                       "ext_mem_96507") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t mid_id_94139;
                                
                                mid_id_94139 =
                                    ((int64_t *) mem_96395)[mid_94134];
                                
                                bool cond_94140 = slt64(mid_id_94139,
                                                        (int64_t) 0);
                                int64_t mid_idx_94141;
                                
                                if (cond_94140) {
                                    mid_idx_94141 =
                                        (int64_t) 9223372036854775807;
                                } else {
                                    mid_idx_94141 = mid_id_94139;
                                }
                                
                                bool cond_94142 = sle64(defunc_0_g_res_94126,
                                                        mid_idx_94141);
                                int64_t loopres_94143;
                                int64_t loopres_94144;
                                
                                if (cond_94142) {
                                    int64_t loopres_t_res_94145 =
                                            sub64(mid_94134, (int64_t) 1);
                                    
                                    loopres_94143 = low_94131;
                                    loopres_94144 = loopres_t_res_94145;
                                } else {
                                    int64_t loopres_f_res_94146 =
                                            add64((int64_t) 1, mid_94134);
                                    
                                    loopres_94143 = loopres_f_res_94146;
                                    loopres_94144 = high_94132;
                                }
                                
                                bool loop_cond_94147 = sle64(loopres_94143,
                                                             loopres_94144);
                                bool loop_while_tmp_96889 = loop_cond_94147;
                                int64_t low_tmp_96890 = loopres_94143;
                                int64_t high_tmp_96891 = loopres_94144;
                                
                                loop_while_94130 = loop_while_tmp_96889;
                                low_94131 = low_tmp_96890;
                                high_94132 = high_tmp_96891;
                            }
                            init_idx_94127 = loop_while_94130;
                            init_idx_94128 = low_94131;
                            init_idx_94129 = high_94132;
                            
                            bool idx_94148;
                            int64_t idx_94149;
                            int64_t idx_94150;
                            int64_t idx_94151;
                            bool loop_while_94152;
                            int64_t l_idx_94153;
                            int64_t r_idx_94154;
                            int64_t span_94155;
                            
                            loop_while_94152 = loop_cond_92426;
                            l_idx_94153 = init_idx_94128;
                            r_idx_94154 = init_idx_94128;
                            span_94155 = (int64_t) 1;
                            while (loop_while_94152) {
                                int64_t max_arg_94156 = sub64(l_idx_94153,
                                                              (int64_t) 1);
                                int64_t max_res_94157 = smax64((int64_t) 0,
                                                               max_arg_94156);
                                int64_t min_arg_94158 = add64((int64_t) 1,
                                                              r_idx_94154);
                                int64_t min_res_94159 = smin64(min_arg_94110,
                                                               min_arg_94158);
                                bool x_94160 = sle64((int64_t) 0,
                                                     max_res_94157);
                                bool y_94161 = slt64(max_res_94157, n_92399);
                                bool bounds_check_94162 = x_94160 && y_94161;
                                bool index_certs_94163;
                                
                                if (!bounds_check_94162) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) max_res_94157,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_96327,
                                                       "mem_96327") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_96323,
                                                       "mem_96323") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96483,
                                                       "ext_mem_96483") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96491,
                                                       "ext_mem_96491") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96499,
                                                       "ext_mem_96499") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96507,
                                                       "ext_mem_96507") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_94164;
                                
                                x_94164 =
                                    ((int64_t *) mem_96395)[max_res_94157];
                                
                                int64_t abs_arg_94165 = sub64(x_94164,
                                                              defunc_0_g_res_94126);
                                int64_t abs_res_94166 = abs64(abs_arg_94165);
                                bool x_94167 = sle64((int64_t) 0,
                                                     min_res_94159);
                                bool y_94168 = slt64(min_res_94159, n_92399);
                                bool bounds_check_94169 = x_94167 && y_94168;
                                bool index_certs_94170;
                                
                                if (!bounds_check_94169) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_94159,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_92399, "].",
                                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  loess.fut:769:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:768:5-770:26\n   #10 loess.fut:750:1-793:26\n");
                                    if (memblock_unref(ctx, &mem_96327,
                                                       "mem_96327") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_96323,
                                                       "mem_96323") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96483,
                                                       "ext_mem_96483") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96491,
                                                       "ext_mem_96491") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96499,
                                                       "ext_mem_96499") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96507,
                                                       "ext_mem_96507") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96515,
                                                       "ext_mem_96515") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96523,
                                                       "ext_mem_96523") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96531,
                                                       "ext_mem_96531") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_96539,
                                                       "ext_mem_96539") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_96682,
                                                       "mem_out_96682") != 0)
                                        return 1;
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                int64_t x_94171;
                                
                                x_94171 =
                                    ((int64_t *) mem_96395)[min_res_94159];
                                
                                int64_t abs_arg_94172 = sub64(x_94171,
                                                              defunc_0_g_res_94126);
                                int64_t abs_res_94173 = abs64(abs_arg_94172);
                                bool cond_94174 = max_res_94157 == l_idx_94153;
                                int64_t loopres_94175;
                                int64_t loopres_94176;
                                int64_t loopres_94177;
                                
                                if (cond_94174) {
                                    loopres_94175 = l_idx_94153;
                                    loopres_94176 = r_idx_94154;
                                    loopres_94177 = min_res_92421;
                                } else {
                                    bool cond_94178 = slt64(abs_res_94166,
                                                            abs_res_94173);
                                    bool cond_f_res_94179 = min_res_94159 ==
                                         r_idx_94154;
                                    bool x_94180 = !cond_94178;
                                    bool y_94181 = cond_f_res_94179 && x_94180;
                                    bool cond_94182 = cond_94178 || y_94181;
                                    int64_t loopres_f_res_94183;
                                    
                                    if (cond_94182) {
                                        loopres_f_res_94183 = max_res_94157;
                                    } else {
                                        loopres_f_res_94183 = l_idx_94153;
                                    }
                                    
                                    int64_t loopres_f_res_94184;
                                    
                                    if (cond_94182) {
                                        loopres_f_res_94184 = r_idx_94154;
                                    } else {
                                        loopres_f_res_94184 = min_res_94159;
                                    }
                                    
                                    int64_t loopres_f_res_94185;
                                    
                                    if (cond_94182) {
                                        int64_t loopres_f_res_t_res_94186 =
                                                add64((int64_t) 1, span_94155);
                                        
                                        loopres_f_res_94185 =
                                            loopres_f_res_t_res_94186;
                                    } else {
                                        int64_t loopres_f_res_f_res_94187 =
                                                add64((int64_t) 1, span_94155);
                                        
                                        loopres_f_res_94185 =
                                            loopres_f_res_f_res_94187;
                                    }
                                    loopres_94175 = loopres_f_res_94183;
                                    loopres_94176 = loopres_f_res_94184;
                                    loopres_94177 = loopres_f_res_94185;
                                }
                                
                                bool loop_cond_94188 = slt64(loopres_94177,
                                                             min_res_92421);
                                bool loop_while_tmp_96892 = loop_cond_94188;
                                int64_t l_idx_tmp_96893 = loopres_94175;
                                int64_t r_idx_tmp_96894 = loopres_94176;
                                int64_t span_tmp_96895 = loopres_94177;
                                
                                loop_while_94152 = loop_while_tmp_96892;
                                l_idx_94153 = l_idx_tmp_96893;
                                r_idx_94154 = r_idx_tmp_96894;
                                span_94155 = span_tmp_96895;
                            }
                            idx_94148 = loop_while_94152;
                            idx_94149 = l_idx_94153;
                            idx_94150 = r_idx_94154;
                            idx_94151 = span_94155;
                            
                            int64_t min_res_94189 = smin64(min_arg_94111,
                                                           idx_94149);
                            int64_t max_res_94190 = smax64((int64_t) 0,
                                                           min_res_94189);
                            int64_t x_94191 = add64(min_res_94112,
                                                    max_res_94190);
                            int64_t r_94192 = sub64(x_94191, (int64_t) 1);
                            bool x_94193 = sle64((int64_t) 0, r_94192);
                            bool y_94194 = slt64(r_94192, n_92399);
                            bool bounds_check_94195 = x_94193 && y_94194;
                            bool index_certs_94196;
                            
                            if (!bounds_check_94195) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) r_94192,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96327,
                                                   "mem_96327") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96323,
                                                   "mem_96323") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96483,
                                                   "ext_mem_96483") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96491,
                                                   "ext_mem_96491") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_94197;
                            
                            x_94197 = ((int64_t *) mem_96368)[r_94192];
                            
                            int64_t abs_arg_94198 = sub64(x_94197,
                                                          min_res_94125);
                            int64_t abs_res_94199 = abs64(abs_arg_94198);
                            bool x_94200 = sle64((int64_t) 0, max_res_94190);
                            bool y_94201 = slt64(max_res_94190, n_92399);
                            bool bounds_check_94202 = x_94200 && y_94201;
                            bool index_certs_94203;
                            
                            if (!bounds_check_94202) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) max_res_94190,
                                              "] out of bounds for array of shape [",
                                              (long long) n_92399, "].",
                                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  loess.fut:769:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:768:5-770:26\n   #9  loess.fut:750:1-793:26\n");
                                if (memblock_unref(ctx, &mem_96327,
                                                   "mem_96327") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_96323,
                                                   "mem_96323") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96483,
                                                   "ext_mem_96483") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96491,
                                                   "ext_mem_96491") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96499,
                                                   "ext_mem_96499") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96507,
                                                   "ext_mem_96507") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96515,
                                                   "ext_mem_96515") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96523,
                                                   "ext_mem_96523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96531,
                                                   "ext_mem_96531") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_96539,
                                                   "ext_mem_96539") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_96682,
                                                   "mem_out_96682") != 0)
                                    return 1;
                                err = 1;
                                goto cleanup;
                            }
                            
                            int64_t x_94204;
                            
                            x_94204 = ((int64_t *) mem_96368)[max_res_94190];
                            
                            int64_t abs_arg_94205 = sub64(x_94204,
                                                          min_res_94125);
                            int64_t abs_res_94206 = abs64(abs_arg_94205);
                            int64_t max_res_94207 = smax64(abs_res_94199,
                                                           abs_res_94206);
                            double defunc_0_f_res_94208 =
                                   sitofp_i64_f64(max_res_94207);
                            double defunc_1_f_res_94209 = max_res_94116 +
                                   defunc_0_f_res_94208;
                            double defunc_2_reduce_res_94210;
                            double defunc_2_reduce_res_94211;
                            double defunc_2_reduce_res_94212;
                            double defunc_2_reduce_res_94213;
                            double defunc_2_reduce_res_94214;
                            double redout_94745;
                            double redout_94746;
                            double redout_94747;
                            double redout_94748;
                            double redout_94749;
                            
                            redout_94745 = 0.0;
                            redout_94746 = 0.0;
                            redout_94747 = 0.0;
                            redout_94748 = 0.0;
                            redout_94749 = 0.0;
                            for (int64_t i_94750 = 0; i_94750 < q_92401;
                                 i_94750++) {
                                double x_94231;
                                
                                x_94231 = ((double *) mem_96410)[i_94750];
                                
                                bool cond_94232 = sle64(last_res_94095,
                                                        i_94750);
                                int64_t defunc_0_f_res_94233;
                                
                                if (cond_94232) {
                                    defunc_0_f_res_94233 = (int64_t) 0;
                                } else {
                                    int64_t i_94234 = add64(max_res_94190,
                                                            i_94750);
                                    int64_t defunc_0_add_arg_94235;
                                    
                                    defunc_0_add_arg_94235 =
                                        ((int64_t *) mem_96368)[i_94234];
                                    
                                    int64_t defunc_1_add_res_94236 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_94235);
                                    
                                    defunc_0_f_res_94233 =
                                        defunc_1_add_res_94236;
                                }
                                
                                int64_t binop_p_94237 =
                                        sub64(defunc_0_f_res_94233,
                                              min_res_94125);
                                double defunc_0_f_res_94238 =
                                       sitofp_i64_f64(binop_p_94237);
                                double abs_res_94239 =
                                       fabs(defunc_0_f_res_94238);
                                double tmp1_94240 = abs_res_94239 /
                                       defunc_1_f_res_94209;
                                double x_94241 = tmp1_94240 * tmp1_94240;
                                double y_94242 = tmp1_94240 * x_94241;
                                double tmp2_94243 = 1.0 - y_94242;
                                double x_94244 = tmp2_94243 * tmp2_94243;
                                double tmp3_94245 = tmp2_94243 * x_94244;
                                double w_j_94246 = x_94231 * tmp3_94245;
                                double xw_j_94247 = defunc_0_f_res_94238 *
                                       w_j_94246;
                                double x2w_j_94248 = defunc_0_f_res_94238 *
                                       xw_j_94247;
                                double x3w_j_94249 = defunc_0_f_res_94238 *
                                       x2w_j_94248;
                                double x4w_j_94250 = defunc_0_f_res_94238 *
                                       x3w_j_94249;
                                double defunc_1_op_res_94217 = w_j_94246 +
                                       redout_94745;
                                double defunc_1_op_res_94220 = xw_j_94247 +
                                       redout_94746;
                                double defunc_1_op_res_94223 = x2w_j_94248 +
                                       redout_94747;
                                double defunc_1_op_res_94226 = x3w_j_94249 +
                                       redout_94748;
                                double defunc_1_op_res_94229 = x4w_j_94250 +
                                       redout_94749;
                                double redout_tmp_96896 = defunc_1_op_res_94217;
                                double redout_tmp_96897 = defunc_1_op_res_94220;
                                double redout_tmp_96898 = defunc_1_op_res_94223;
                                double redout_tmp_96899 = defunc_1_op_res_94226;
                                double redout_tmp_96900 = defunc_1_op_res_94229;
                                
                                redout_94745 = redout_tmp_96896;
                                redout_94746 = redout_tmp_96897;
                                redout_94747 = redout_tmp_96898;
                                redout_94748 = redout_tmp_96899;
                                redout_94749 = redout_tmp_96900;
                            }
                            defunc_2_reduce_res_94210 = redout_94745;
                            defunc_2_reduce_res_94211 = redout_94746;
                            defunc_2_reduce_res_94212 = redout_94747;
                            defunc_2_reduce_res_94213 = redout_94748;
                            defunc_2_reduce_res_94214 = redout_94749;
                            
                            double x_94251 = defunc_2_reduce_res_94212 *
                                   defunc_2_reduce_res_94214;
                            double y_94252 = defunc_2_reduce_res_94213 *
                                   defunc_2_reduce_res_94213;
                            double a12_94253 = x_94251 - y_94252;
                            double x_94254 = defunc_2_reduce_res_94212 *
                                   defunc_2_reduce_res_94213;
                            double y_94255 = defunc_2_reduce_res_94211 *
                                   defunc_2_reduce_res_94214;
                            double b12_94256 = x_94254 - y_94255;
                            double x_94257 = defunc_2_reduce_res_94211 *
                                   defunc_2_reduce_res_94213;
                            double y_94258 = defunc_2_reduce_res_94212 *
                                   defunc_2_reduce_res_94212;
                            double c12_94259 = x_94257 - y_94258;
                            double x_94260 = defunc_2_reduce_res_94210 *
                                   defunc_2_reduce_res_94214;
                            double b2_94261 = x_94260 - y_94258;
                            double x_94262 = defunc_2_reduce_res_94211 *
                                   defunc_2_reduce_res_94212;
                            double y_94263 = defunc_2_reduce_res_94210 *
                                   defunc_2_reduce_res_94213;
                            double c2_94264 = x_94262 - y_94263;
                            double x_94265 = defunc_2_reduce_res_94210 *
                                   a12_94253;
                            double y_94266 = defunc_2_reduce_res_94211 *
                                   b12_94256;
                            double x_94267 = x_94265 + y_94266;
                            double y_94268 = defunc_2_reduce_res_94212 *
                                   c12_94259;
                            double y_94269 = x_94267 + y_94268;
                            double det_94270 = 1.0 / y_94269;
                            double a12_94271 = a12_94253 * det_94270;
                            double b12_94272 = b12_94256 * det_94270;
                            double c12_94273 = c12_94259 * det_94270;
                            double b2_94274 = b2_94261 * det_94270;
                            double c2_94275 = c2_94264 * det_94270;
                            double defunc_2_reduce_res_94276;
                            double defunc_2_reduce_res_94277;
                            double redout_94751;
                            double redout_94752;
                            
                            redout_94751 = 0.0;
                            redout_94752 = 0.0;
                            for (int64_t i_94753 = 0; i_94753 < q_92401;
                                 i_94753++) {
                                double x_94285;
                                
                                x_94285 = ((double *) mem_96410)[i_94753];
                                
                                bool cond_94286 = sle64(last_res_94095,
                                                        i_94753);
                                int64_t defunc_0_f_res_94287;
                                
                                if (cond_94286) {
                                    defunc_0_f_res_94287 = (int64_t) 0;
                                } else {
                                    int64_t i_94288 = add64(max_res_94190,
                                                            i_94753);
                                    int64_t defunc_0_add_arg_94289;
                                    
                                    defunc_0_add_arg_94289 =
                                        ((int64_t *) mem_96368)[i_94288];
                                    
                                    int64_t defunc_1_add_res_94290 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_94289);
                                    
                                    defunc_0_f_res_94287 =
                                        defunc_1_add_res_94290;
                                }
                                
                                int64_t binop_p_94291 =
                                        sub64(defunc_0_f_res_94287,
                                              min_res_94125);
                                double defunc_0_f_res_94292 =
                                       sitofp_i64_f64(binop_p_94291);
                                double abs_res_94293 =
                                       fabs(defunc_0_f_res_94292);
                                double tmp1_94294 = abs_res_94293 /
                                       defunc_1_f_res_94209;
                                double x_94295 = tmp1_94294 * tmp1_94294;
                                double y_94296 = tmp1_94294 * x_94295;
                                double tmp2_94297 = 1.0 - y_94296;
                                double x_94298 = tmp2_94297 * tmp2_94297;
                                double tmp3_94299 = tmp2_94297 * x_94298;
                                double tmp4_94300 = x_94285 * tmp3_94299;
                                double defunc_1_f_res_94301 =
                                       defunc_0_f_res_94292 * tmp4_94300;
                                double defunc_1_f_res_94302 =
                                       defunc_0_f_res_94292 *
                                       defunc_1_f_res_94301;
                                double defunc_0_f_res_94303;
                                
                                if (cond_94286) {
                                    defunc_0_f_res_94303 = 0.0;
                                } else {
                                    int64_t i_94304 = add64(max_res_94190,
                                                            i_94753);
                                    double defunc_0_add_arg_94305;
                                    
                                    defunc_0_add_arg_94305 =
                                        ((double *) mem_96365)[i_94304];
                                    defunc_0_f_res_94303 =
                                        defunc_0_add_arg_94305;
                                }
                                
                                double x_94306 = a12_94271 * tmp4_94300;
                                double y_94307 = b12_94272 *
                                       defunc_1_f_res_94301;
                                double x_94308 = x_94306 + y_94307;
                                double y_94309 = c12_94273 *
                                       defunc_1_f_res_94302;
                                double x_94310 = x_94308 + y_94309;
                                double defunc_9_fit_fun_res_94311 =
                                       defunc_0_f_res_94303 * x_94310;
                                double x_94312 = b12_94272 * tmp4_94300;
                                double y_94313 = b2_94274 *
                                       defunc_1_f_res_94301;
                                double x_94314 = x_94312 + y_94313;
                                double y_94315 = c2_94275 *
                                       defunc_1_f_res_94302;
                                double x_94316 = x_94314 + y_94315;
                                double defunc_9_slope_fun_res_94317 =
                                       defunc_0_f_res_94303 * x_94316;
                                double defunc_1_op_res_94280 =
                                       defunc_9_fit_fun_res_94311 +
                                       redout_94751;
                                double defunc_1_op_res_94283 =
                                       defunc_9_slope_fun_res_94317 +
                                       redout_94752;
                                double redout_tmp_96901 = defunc_1_op_res_94280;
                                double redout_tmp_96902 = defunc_1_op_res_94283;
                                
                                redout_94751 = redout_tmp_96901;
                                redout_94752 = redout_tmp_96902;
                            }
                            defunc_2_reduce_res_94276 = redout_94751;
                            defunc_2_reduce_res_94277 = redout_94752;
                            ((double *) mem_96323.mem)[i_94765 * n_m_92409 +
                                                       i_94758] =
                                defunc_2_reduce_res_94276;
                            ((double *) mem_96327.mem)[i_94765 * n_m_92409 +
                                                       i_94758] =
                                defunc_2_reduce_res_94277;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_96491, &mem_96323,
                                     "mem_96323") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_96483, &mem_96327,
                                     "mem_96327") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_96327, "mem_96327") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_96323, "mem_96323") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_96507, &ext_mem_96491,
                                 "ext_mem_96491") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_96499, &ext_mem_96483,
                                 "ext_mem_96483") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_96483, "ext_mem_96483") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_96491, "ext_mem_96491") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_96523, &ext_mem_96507,
                             "ext_mem_96507") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_96515, &ext_mem_96499,
                             "ext_mem_96499") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96499, "ext_mem_96499") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96507, "ext_mem_96507") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_96539, &ext_mem_96523,
                         "ext_mem_96523") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_96531, &ext_mem_96515,
                         "ext_mem_96515") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_96515, "ext_mem_96515") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_96523, "ext_mem_96523") != 0)
            return 1;
    }
    
    bool cond_94320 = slt64((int64_t) 1, jump_92403);
    int64_t binop_x_96547 = m_92398 * n_92399;
    int64_t binop_y_96548 = (int64_t) 8 * binop_x_96547;
    int64_t bytes_96549 = smax64((int64_t) 0, binop_y_96548);
    int64_t ext_96595;
    
    if (cond_94320) {
        ext_96595 = n_92399;
    } else {
        ext_96595 = n_m_92409;
    }
    
    int64_t ext_96594;
    
    if (cond_94320) {
        ext_96594 = n_92399;
    } else {
        ext_96594 = n_m_92409;
    }
    
    struct memblock ext_mem_96591;
    
    ext_mem_96591.references = NULL;
    if (cond_94320) {
        bool zzero_94322 = jump_92403 == (int64_t) 0;
        bool nonzzero_94323 = !zzero_94322;
        bool nonzzero_cert_94324;
        
        if (!nonzzero_94323) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:724:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:723:3-727:9\n   #5  loess.fut:790:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:789:5-791:29\n   #9  loess.fut:750:1-793:26\n");
            if (memblock_unref(ctx, &ext_mem_96591, "ext_mem_96591") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96531, "ext_mem_96531") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96539, "ext_mem_96539") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        int64_t y_94325 = sub64(n_m_92409, (int64_t) 1);
        struct memblock mem_96550;
        
        mem_96550.references = NULL;
        if (memblock_alloc(ctx, &mem_96550, bytes_96549, "mem_96550")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_94774 = 0; i_94774 < m_92398; i_94774++) {
            for (int64_t i_94770 = 0; i_94770 < n_92399; i_94770++) {
                int64_t m_v_94331 = sdiv64(i_94770, jump_92403);
                bool cond_94332 = m_v_94331 == y_94325;
                int64_t j_94333;
                
                if (cond_94332) {
                    int64_t j_t_res_94334 = sub64(m_v_94331, (int64_t) 1);
                    
                    j_94333 = j_t_res_94334;
                } else {
                    j_94333 = m_v_94331;
                }
                
                int64_t min_arg_94335 = mul64(jump_92403, j_94333);
                int64_t min_res_94336 = smin64(i_92415, min_arg_94335);
                int64_t defunc_0_m_fun_arg_94337 = add64((int64_t) 1, j_94333);
                int64_t min_arg_94338 = mul64(jump_92403,
                                              defunc_0_m_fun_arg_94337);
                int64_t min_res_94339 = smin64(i_92415, min_arg_94338);
                int64_t i64_arg_94340 = sub64(min_res_94339, min_res_94336);
                double i64_res_94341 = sitofp_i64_f64(i64_arg_94340);
                int64_t i64_arg_94342 = sub64(i_94770, min_res_94336);
                double i64_res_94343 = sitofp_i64_f64(i64_arg_94342);
                double u_94344 = i64_res_94343 / i64_res_94341;
                double u2_94345 = u_94344 * u_94344;
                double u3_94346 = u_94344 * u2_94345;
                double x_94347 = 2.0 * u3_94346;
                double y_94348 = 3.0 * u2_94345;
                double x_94349 = x_94347 - y_94348;
                double x_94350 = 1.0 + x_94349;
                bool x_94351 = sle64((int64_t) 0, j_94333);
                bool y_94352 = slt64(j_94333, n_m_92409);
                bool bounds_check_94353 = x_94351 && y_94352;
                bool index_certs_94354;
                
                if (!bounds_check_94353) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_94333,
                                  "] out of bounds for array of shape [",
                                  (long long) n_m_92409, "].",
                                  "-> #0  loess.fut:713:27-33\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  loess.fut:790:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:789:5-791:29\n   #10 loess.fut:750:1-793:26\n");
                    if (memblock_unref(ctx, &mem_96550, "mem_96550") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_96591, "ext_mem_96591") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_96531, "ext_mem_96531") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_96539, "ext_mem_96539") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") !=
                        0)
                        return 1;
                    err = 1;
                    goto cleanup;
                }
                
                double y_94355;
                
                y_94355 = ((double *) ext_mem_96539.mem)[i_94774 * n_m_92409 +
                                                         j_94333];
                
                double x_94356 = x_94350 * y_94355;
                double x_94357 = y_94348 - x_94347;
                bool x_94358 = sle64((int64_t) 0, defunc_0_m_fun_arg_94337);
                bool y_94359 = slt64(defunc_0_m_fun_arg_94337, n_m_92409);
                bool bounds_check_94360 = x_94358 && y_94359;
                bool index_certs_94361;
                
                if (!bounds_check_94360) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [",
                                  (long long) defunc_0_m_fun_arg_94337,
                                  "] out of bounds for array of shape [",
                                  (long long) n_m_92409, "].",
                                  "-> #0  loess.fut:714:27-37\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  loess.fut:790:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:789:5-791:29\n   #10 loess.fut:750:1-793:26\n");
                    if (memblock_unref(ctx, &mem_96550, "mem_96550") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_96591, "ext_mem_96591") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_96531, "ext_mem_96531") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_96539, "ext_mem_96539") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") !=
                        0)
                        return 1;
                    err = 1;
                    goto cleanup;
                }
                
                double y_94362;
                
                y_94362 = ((double *) ext_mem_96539.mem)[i_94774 * n_m_92409 +
                                                         defunc_0_m_fun_arg_94337];
                
                double y_94363 = x_94357 * y_94362;
                double x_94364 = x_94356 + y_94363;
                double y_94365 = 2.0 * u2_94345;
                double x_94366 = u3_94346 - y_94365;
                double x_94367 = u_94344 + x_94366;
                double y_94368;
                
                y_94368 = ((double *) ext_mem_96531.mem)[i_94774 * n_m_92409 +
                                                         j_94333];
                
                double x_94369 = x_94367 * y_94368;
                double y_94370 = i64_res_94341 * x_94369;
                double x_94371 = x_94364 + y_94370;
                double x_94372 = u3_94346 - u2_94345;
                double y_94373;
                
                y_94373 = ((double *) ext_mem_96531.mem)[i_94774 * n_m_92409 +
                                                         defunc_0_m_fun_arg_94337];
                
                double x_94374 = x_94372 * y_94373;
                double y_94375 = i64_res_94341 * x_94374;
                double defunc_4_interpolate_proc_res_94376 = x_94371 + y_94375;
                
                ((double *) mem_96550.mem)[i_94774 * n_92399 + i_94770] =
                    defunc_4_interpolate_proc_res_94376;
            }
        }
        if (memblock_set(ctx, &ext_mem_96591, &mem_96550, "mem_96550") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_96550, "mem_96550") != 0)
            return 1;
    } else {
        bool dim_match_94377 = n_92399 == n_m_92409;
        bool empty_or_match_cert_94378;
        
        if (!dim_match_94377) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_92398, ", ", (long long) n_m_92409,
                          ") cannot match shape of type `[",
                          (long long) m_92398, "][", (long long) n_92399,
                          "]f64`.",
                          "-> #0  loess.fut:793:5-26\n   #1  loess.fut:750:1-793:26\n");
            if (memblock_unref(ctx, &ext_mem_96591, "ext_mem_96591") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96531, "ext_mem_96531") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_96539, "ext_mem_96539") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_96591, &ext_mem_96539,
                         "ext_mem_96539") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_96531, "ext_mem_96531") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_96539, "ext_mem_96539") != 0)
        return 1;
    
    int64_t binop_x_96599 = m_92398 * n_92399;
    int64_t binop_y_96600 = (int64_t) 8 * binop_x_96599;
    int64_t bytes_96601 = smax64((int64_t) 0, binop_y_96600);
    struct memblock mem_96602;
    
    mem_96602.references = NULL;
    if (memblock_alloc(ctx, &mem_96602, bytes_96601, "mem_96602")) {
        err = 1;
        goto cleanup;
    }
    if (m_92398 * n_92399 * (int64_t) 8 > 0)
        memmove(mem_96602.mem + (int64_t) 0, ext_mem_96591.mem + (int64_t) 0,
                m_92398 * n_92399 * (int64_t) 8);
    if (memblock_unref(ctx, &ext_mem_96591, "ext_mem_96591") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_96682, &mem_96602, "mem_96602") != 0)
        return 1;
    (*mem_out_p_96905).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_96905, &mem_out_96682, "mem_out_96682") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_96602, "mem_96602") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_96591, "ext_mem_96591") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_96531, "ext_mem_96531") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_96539, "ext_mem_96539") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_96682, "mem_out_96682") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_94987);
    free(mem_95002);
    free(mem_95005);
    free(mem_95032);
    free(mem_95047);
    free(mem_95120);
    free(mem_95135);
    free(mem_95138);
    free(mem_95165);
    free(mem_95180);
    free(mem_95283);
    free(mem_95298);
    free(mem_95301);
    free(mem_95328);
    free(mem_95343);
    free(mem_95468);
    free(mem_95483);
    free(mem_95486);
    free(mem_95513);
    free(mem_95528);
    free(mem_95554);
    free(mem_95616);
    free(mem_95631);
    free(mem_95634);
    free(mem_95661);
    free(mem_95676);
    free(mem_95713);
    free(mem_95716);
    free(mem_95809);
    free(mem_95824);
    free(mem_95827);
    free(mem_95854);
    free(mem_95869);
    free(mem_95906);
    free(mem_95909);
    free(mem_95936);
    free(mem_95939);
    free(mem_96054);
    free(mem_96069);
    free(mem_96072);
    free(mem_96099);
    free(mem_96114);
    free(mem_96187);
    free(mem_96202);
    free(mem_96205);
    free(mem_96232);
    free(mem_96247);
    free(mem_96350);
    free(mem_96365);
    free(mem_96368);
    free(mem_96395);
    free(mem_96410);
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f64_2d **out0, const
                       struct futhark_f64_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7)
{
    struct memblock Y_mem_94966;
    
    Y_mem_94966.references = NULL;
    
    int64_t m_92398;
    int64_t n_92399;
    int64_t q_92401;
    int64_t degree_92402;
    int64_t jump_92403;
    int64_t jump_threshold_1_92404;
    int64_t jump_threshold_2_92405;
    int64_t q_threshold_1_92406;
    int64_t q_threshold_2_92407;
    struct memblock mem_out_96682;
    
    mem_out_96682.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    Y_mem_94966 = in0->mem;
    m_92398 = in0->shape[0];
    n_92399 = in0->shape[1];
    q_92401 = in1;
    degree_92402 = in2;
    jump_92403 = in3;
    jump_threshold_1_92404 = in4;
    jump_threshold_2_92405 = in5;
    q_threshold_1_92406 = in6;
    q_threshold_2_92407 = in7;
    if (!(m_92398 == in0->shape[0] && n_92399 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_96682, Y_mem_94966, m_92398,
                                n_92399, q_92401, degree_92402, jump_92403,
                                jump_threshold_1_92404, jump_threshold_2_92405,
                                q_threshold_1_92406, q_threshold_2_92407);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f64_2d *) malloc(sizeof(struct futhark_f64_2d))) !=
                NULL);
            (*out0)->mem = mem_out_96682;
            (*out0)->shape[0] = m_92398;
            (*out0)->shape[1] = n_92399;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
