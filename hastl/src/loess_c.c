// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous

int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_67525,
                             struct memblock Y_mem_65969, int64_t m_64027,
                             int64_t n_64028, int64_t q_64030,
                             int64_t degree_64031, int64_t jump_64032,
                             int64_t jump_threshold_64033,
                             int64_t q_threshold_64034);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_67525,
                             struct memblock Y_mem_65969, int64_t m_64027,
                             int64_t n_64028, int64_t q_64030,
                             int64_t degree_64031, int64_t jump_64032,
                             int64_t jump_threshold_64033,
                             int64_t q_threshold_64034)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_65990_cached_sizze_67526 = 0;
    char *mem_65990 = NULL;
    size_t mem_66005_cached_sizze_67527 = 0;
    char *mem_66005 = NULL;
    size_t mem_66008_cached_sizze_67528 = 0;
    char *mem_66008 = NULL;
    size_t mem_66035_cached_sizze_67529 = 0;
    char *mem_66035 = NULL;
    size_t mem_66038_cached_sizze_67530 = 0;
    char *mem_66038 = NULL;
    size_t mem_66041_cached_sizze_67531 = 0;
    char *mem_66041 = NULL;
    size_t mem_66080_cached_sizze_67532 = 0;
    char *mem_66080 = NULL;
    size_t mem_66153_cached_sizze_67533 = 0;
    char *mem_66153 = NULL;
    size_t mem_66168_cached_sizze_67534 = 0;
    char *mem_66168 = NULL;
    size_t mem_66171_cached_sizze_67535 = 0;
    char *mem_66171 = NULL;
    size_t mem_66198_cached_sizze_67536 = 0;
    char *mem_66198 = NULL;
    size_t mem_66201_cached_sizze_67537 = 0;
    char *mem_66201 = NULL;
    size_t mem_66204_cached_sizze_67538 = 0;
    char *mem_66204 = NULL;
    size_t mem_66243_cached_sizze_67539 = 0;
    char *mem_66243 = NULL;
    size_t mem_66346_cached_sizze_67540 = 0;
    char *mem_66346 = NULL;
    size_t mem_66361_cached_sizze_67541 = 0;
    char *mem_66361 = NULL;
    size_t mem_66364_cached_sizze_67542 = 0;
    char *mem_66364 = NULL;
    size_t mem_66391_cached_sizze_67543 = 0;
    char *mem_66391 = NULL;
    size_t mem_66394_cached_sizze_67544 = 0;
    char *mem_66394 = NULL;
    size_t mem_66397_cached_sizze_67545 = 0;
    char *mem_66397 = NULL;
    size_t mem_66436_cached_sizze_67546 = 0;
    char *mem_66436 = NULL;
    size_t mem_66561_cached_sizze_67547 = 0;
    char *mem_66561 = NULL;
    size_t mem_66576_cached_sizze_67548 = 0;
    char *mem_66576 = NULL;
    size_t mem_66579_cached_sizze_67549 = 0;
    char *mem_66579 = NULL;
    size_t mem_66606_cached_sizze_67550 = 0;
    char *mem_66606 = NULL;
    size_t mem_66609_cached_sizze_67551 = 0;
    char *mem_66609 = NULL;
    size_t mem_66612_cached_sizze_67552 = 0;
    char *mem_66612 = NULL;
    size_t mem_66651_cached_sizze_67553 = 0;
    char *mem_66651 = NULL;
    size_t mem_66677_cached_sizze_67554 = 0;
    char *mem_66677 = NULL;
    size_t mem_66739_cached_sizze_67555 = 0;
    char *mem_66739 = NULL;
    size_t mem_66754_cached_sizze_67556 = 0;
    char *mem_66754 = NULL;
    size_t mem_66757_cached_sizze_67557 = 0;
    char *mem_66757 = NULL;
    size_t mem_66784_cached_sizze_67558 = 0;
    char *mem_66784 = NULL;
    size_t mem_66787_cached_sizze_67559 = 0;
    char *mem_66787 = NULL;
    size_t mem_66790_cached_sizze_67560 = 0;
    char *mem_66790 = NULL;
    size_t mem_66829_cached_sizze_67561 = 0;
    char *mem_66829 = NULL;
    size_t mem_66866_cached_sizze_67562 = 0;
    char *mem_66866 = NULL;
    size_t mem_66869_cached_sizze_67563 = 0;
    char *mem_66869 = NULL;
    size_t mem_66962_cached_sizze_67564 = 0;
    char *mem_66962 = NULL;
    size_t mem_66977_cached_sizze_67565 = 0;
    char *mem_66977 = NULL;
    size_t mem_66980_cached_sizze_67566 = 0;
    char *mem_66980 = NULL;
    size_t mem_67007_cached_sizze_67567 = 0;
    char *mem_67007 = NULL;
    size_t mem_67010_cached_sizze_67568 = 0;
    char *mem_67010 = NULL;
    size_t mem_67013_cached_sizze_67569 = 0;
    char *mem_67013 = NULL;
    size_t mem_67052_cached_sizze_67570 = 0;
    char *mem_67052 = NULL;
    size_t mem_67089_cached_sizze_67571 = 0;
    char *mem_67089 = NULL;
    size_t mem_67092_cached_sizze_67572 = 0;
    char *mem_67092 = NULL;
    size_t mem_67119_cached_sizze_67573 = 0;
    char *mem_67119 = NULL;
    size_t mem_67122_cached_sizze_67574 = 0;
    char *mem_67122 = NULL;
    struct memblock mem_out_67355;
    
    mem_out_67355.references = NULL;
    
    bool zzero_64035 = jump_64032 == (int64_t) 0;
    bool nonzzero_64036 = !zzero_64035;
    bool nonzzero_cert_64037;
    
    if (!nonzzero_64036) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  loess.fut:437:13-20\n   #1  loess.fut:430:1-469:26\n");
        if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_64038 = sdiv64(n_64028, jump_64032);
    int64_t n_m_64039 = add64((int64_t) 1, x_64038);
    int64_t i_64040 = sub64(n_64028, (int64_t) 1);
    bool x_64041 = sle64((int64_t) 0, i_64040);
    bool y_64042 = slt64(i_64040, n_64028);
    bool bounds_check_64043 = x_64041 && y_64042;
    bool index_certs_64044;
    
    if (!bounds_check_64043) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_64040,
                               "] out of bounds for array of shape [",
                               (long long) n_64028, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  loess.fut:441:36-85\n   #3  loess.fut:430:1-469:26\n");
        if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_64046 = smin64(n_64028, q_64030);
    bool bounds_invalid_upwards_64047 = slt64(n_m_64039, (int64_t) 0);
    bool valid_64048 = !bounds_invalid_upwards_64047;
    bool range_valid_c_64049;
    
    if (!valid_64048) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_64039, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:335:3-373:7\n   #3  loess.fut:402:15-58\n   #4  loess.fut:446:13-56\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:445:5-447:26\n   #8  loess.fut:430:1-469:26\n");
        if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_64051 = min_res_64046 == (int64_t) 0;
    int64_t m_64052 = sub64(min_res_64046, (int64_t) 1);
    float i64_res_64053 = sitofp_i64_f32(q_64030);
    bool cond_64054 = slt64(jump_64032, jump_threshold_64033);
    bool cond_f_res_64055 = slt64(q_threshold_64034, q_64030);
    bool x_64056 = !cond_64054;
    bool y_64057 = cond_f_res_64055 && x_64056;
    bool cond_64058 = cond_64054 || y_64057;
    struct memblock ext_mem_67225;
    
    ext_mem_67225.references = NULL;
    
    struct memblock ext_mem_67217;
    
    ext_mem_67217.references = NULL;
    if (cond_64058) {
        bool match_lit_64061 = (int64_t) 0 == degree_64031;
        int64_t binop_x_65971 = m_64027 * n_m_64039;
        int64_t binop_y_65972 = (int64_t) 4 * binop_x_65971;
        int64_t bytes_65970 = smax64((int64_t) 0, binop_y_65972);
        int64_t binop_y_65989 = (int64_t) 8 * n_64028;
        int64_t bytes_65988 = smax64((int64_t) 0, binop_y_65989);
        int64_t binop_y_66004 = (int64_t) 4 * n_64028;
        int64_t bytes_66003 = smax64((int64_t) 0, binop_y_66004);
        int64_t binop_y_66079 = (int64_t) 4 * q_64030;
        int64_t bytes_66078 = smax64((int64_t) 0, binop_y_66079);
        struct memblock ext_mem_66533;
        
        ext_mem_66533.references = NULL;
        
        struct memblock ext_mem_66525;
        
        ext_mem_66525.references = NULL;
        if (match_lit_64061) {
            struct memblock mem_65973;
            
            mem_65973.references = NULL;
            if (memblock_alloc(ctx, &mem_65973, bytes_65970, "mem_65973")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_67356 = 0; i_67356 < m_64027; i_67356++) {
                for (int64_t i_67357 = 0; i_67357 < n_m_64039; i_67357++) {
                    ((float *) mem_65973.mem)[i_67356 * n_m_64039 + i_67357] =
                        0.0F;
                }
            }
            
            struct memblock mem_65977;
            
            mem_65977.references = NULL;
            if (memblock_alloc(ctx, &mem_65977, bytes_65970, "mem_65977")) {
                err = 1;
                goto cleanup;
            }
            if (mem_65990_cached_sizze_67526 < (size_t) bytes_65988) {
                mem_65990 = realloc(mem_65990, bytes_65988);
                mem_65990_cached_sizze_67526 = bytes_65988;
            }
            if (mem_66005_cached_sizze_67527 < (size_t) bytes_66003) {
                mem_66005 = realloc(mem_66005, bytes_66003);
                mem_66005_cached_sizze_67527 = bytes_66003;
            }
            if (mem_66008_cached_sizze_67528 < (size_t) bytes_65988) {
                mem_66008 = realloc(mem_66008, bytes_65988);
                mem_66008_cached_sizze_67528 = bytes_65988;
            }
            if (mem_66035_cached_sizze_67529 < (size_t) bytes_66003) {
                mem_66035 = realloc(mem_66035, bytes_66003);
                mem_66035_cached_sizze_67529 = bytes_66003;
            }
            if (mem_66038_cached_sizze_67530 < (size_t) bytes_65988) {
                mem_66038 = realloc(mem_66038, bytes_65988);
                mem_66038_cached_sizze_67530 = bytes_65988;
            }
            if (mem_66041_cached_sizze_67531 < (size_t) bytes_65988) {
                mem_66041 = realloc(mem_66041, bytes_65988);
                mem_66041_cached_sizze_67531 = bytes_65988;
            }
            if (mem_66080_cached_sizze_67532 < (size_t) bytes_66078) {
                mem_66080 = realloc(mem_66080, bytes_66078);
                mem_66080_cached_sizze_67532 = bytes_66078;
            }
            for (int64_t i_65552 = 0; i_65552 < m_64027; i_65552++) {
                int64_t discard_65517;
                int64_t scanacc_65513 = (int64_t) 0;
                
                for (int64_t i_65515 = 0; i_65515 < n_64028; i_65515++) {
                    float x_64072 = ((float *) Y_mem_65969.mem)[i_65552 *
                                                                n_64028 +
                                                                i_65515];
                    bool isnan_res_64073;
                    
                    isnan_res_64073 = futrts_isnan32(x_64072);
                    
                    bool defunc_0_p_res_64074 = !isnan_res_64073;
                    int64_t defunc_0_f_res_64075 =
                            btoi_bool_i64(defunc_0_p_res_64074);
                    int64_t defunc_1_op_res_64071 = add64(defunc_0_f_res_64075,
                                                          scanacc_65513);
                    
                    ((int64_t *) mem_65990)[i_65515] = defunc_1_op_res_64071;
                    
                    int64_t scanacc_tmp_67359 = defunc_1_op_res_64071;
                    
                    scanacc_65513 = scanacc_tmp_67359;
                }
                discard_65517 = scanacc_65513;
                
                int64_t last_res_64076 = ((int64_t *) mem_65990)[i_64040];
                
                for (int64_t i_67361 = 0; i_67361 < n_64028; i_67361++) {
                    ((float *) mem_66005)[i_67361] = 0.0F;
                }
                for (int64_t i_67362 = 0; i_67362 < n_64028; i_67362++) {
                    ((int64_t *) mem_66008)[i_67362] = (int64_t) -1;
                }
                for (int64_t write_iter_65518 = 0; write_iter_65518 < n_64028;
                     write_iter_65518++) {
                    float write_iv_65521 = ((float *) Y_mem_65969.mem)[i_65552 *
                                                                       n_64028 +
                                                                       write_iter_65518];
                    int64_t write_iv_65522 =
                            ((int64_t *) mem_65990)[write_iter_65518];
                    bool isnan_res_64084;
                    
                    isnan_res_64084 = futrts_isnan32(write_iv_65521);
                    
                    bool defunc_0_p_res_64085 = !isnan_res_64084;
                    int64_t defunc_1_f_res_64086;
                    
                    if (defunc_0_p_res_64085) {
                        int64_t defunc_1_f_res_t_res_64087 =
                                sub64(write_iv_65522, (int64_t) 1);
                        
                        defunc_1_f_res_64086 = defunc_1_f_res_t_res_64087;
                    } else {
                        defunc_1_f_res_64086 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64086) &&
                        slt64(defunc_1_f_res_64086, n_64028)) {
                        ((int64_t *) mem_66008)[defunc_1_f_res_64086] =
                            write_iter_65518;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64086) &&
                        slt64(defunc_1_f_res_64086, n_64028)) {
                        memmove(mem_66005 + defunc_1_f_res_64086 * (int64_t) 4,
                                Y_mem_65969.mem + (i_65552 * n_64028 +
                                                   write_iter_65518) *
                                (int64_t) 4, (int64_t) 4);
                    }
                }
                
                int64_t min_arg_64094 = sub64(last_res_64076, min_res_64046);
                float i64_res_64095 = sitofp_i64_f32(last_res_64076);
                float x_64096 = i64_res_64053 - i64_res_64095;
                float max_arg_64097 = x_64096 / 2.0F;
                float max_res_64098 = fmax32(0.0F, max_arg_64097);
                
                for (int64_t i_65532 = 0; i_65532 < n_64028; i_65532++) {
                    int64_t x_64102 = ((int64_t *) mem_66008)[i_65532];
                    int64_t defunc_0_f_res_64103 = add64((int64_t) 1, x_64102);
                    bool cond_64104 = slt64(defunc_0_f_res_64103, (int64_t) 0);
                    int64_t defunc_0_f_res_64105;
                    
                    if (cond_64104) {
                        defunc_0_f_res_64105 = (int64_t) 9223372036854775807;
                    } else {
                        defunc_0_f_res_64105 = defunc_0_f_res_64103;
                    }
                    
                    float defunc_0_f_res_64106 = sitofp_i64_f32(x_64102);
                    
                    ((float *) mem_66035)[i_65532] = defunc_0_f_res_64106;
                    ((int64_t *) mem_66038)[i_65532] = defunc_0_f_res_64105;
                    ((int64_t *) mem_66041)[i_65532] = defunc_0_f_res_64103;
                }
                for (int64_t i_65538 = 0; i_65538 < q_64030; i_65538++) {
                    bool cond_64112 = sle64(last_res_64076, i_65538);
                    float defunc_0_f_res_64113;
                    
                    if (cond_64112) {
                        defunc_0_f_res_64113 = 0.0F;
                    } else {
                        defunc_0_f_res_64113 = 1.0F;
                    }
                    ((float *) mem_66080)[i_65538] = defunc_0_f_res_64113;
                }
                for (int64_t i_65548 = 0; i_65548 < n_m_64039; i_65548++) {
                    int64_t min_arg_64116 = mul64(jump_64032, i_65548);
                    int64_t min_res_64117 = smin64(i_64040, min_arg_64116);
                    int64_t defunc_0_g_res_64118 = add64((int64_t) 1,
                                                         min_res_64117);
                    bool nearest_idx_64119;
                    int64_t nearest_idx_64120;
                    int64_t nearest_idx_64121;
                    bool loop_while_64122;
                    int64_t low_64123;
                    int64_t high_64124;
                    
                    loop_while_64122 = x_64041;
                    low_64123 = (int64_t) 0;
                    high_64124 = i_64040;
                    while (loop_while_64122) {
                        int64_t x_64125 = add64(low_64123, high_64124);
                        int64_t mid_64126 = sdiv64(x_64125, (int64_t) 2);
                        bool x_64127 = sle64((int64_t) 0, mid_64126);
                        bool y_64128 = slt64(mid_64126, n_64028);
                        bool bounds_check_64129 = x_64127 && y_64128;
                        bool index_certs_64130;
                        
                        if (!bounds_check_64129) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) mid_64126,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_65977, "mem_65977") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_65973, "mem_65973") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64131 = ((int64_t *) mem_66038)[mid_64126];
                        bool cond_64132 = sle64(defunc_0_g_res_64118, x_64131);
                        int64_t loopres_64133;
                        int64_t loopres_64134;
                        
                        if (cond_64132) {
                            int64_t loopres_t_res_64135 = sub64(mid_64126,
                                                                (int64_t) 1);
                            
                            loopres_64133 = low_64123;
                            loopres_64134 = loopres_t_res_64135;
                        } else {
                            int64_t loopres_f_res_64136 = add64((int64_t) 1,
                                                                mid_64126);
                            
                            loopres_64133 = loopres_f_res_64136;
                            loopres_64134 = high_64124;
                        }
                        
                        bool loop_cond_64137 = sle64(loopres_64133,
                                                     loopres_64134);
                        bool loop_while_tmp_67370 = loop_cond_64137;
                        int64_t low_tmp_67371 = loopres_64133;
                        int64_t high_tmp_67372 = loopres_64134;
                        
                        loop_while_64122 = loop_while_tmp_67370;
                        low_64123 = low_tmp_67371;
                        high_64124 = high_tmp_67372;
                    }
                    nearest_idx_64119 = loop_while_64122;
                    nearest_idx_64120 = low_64123;
                    nearest_idx_64121 = high_64124;
                    
                    int64_t max_arg_64138 = sub64(nearest_idx_64120,
                                                  min_res_64046);
                    int64_t max_res_64139 = smax64((int64_t) 0, max_arg_64138);
                    int64_t j_64140 = add64(min_res_64046, max_res_64139);
                    int64_t i_p_m_t_s_64141 = add64(m_64052, max_res_64139);
                    bool zzero_leq_i_p_m_t_s_64142 = sle64((int64_t) 0,
                                                           i_p_m_t_s_64141);
                    bool i_p_m_t_s_leq_w_64143 = slt64(i_p_m_t_s_64141,
                                                       n_64028);
                    bool zzero_lte_i_64144 = sle64((int64_t) 0, max_res_64139);
                    bool i_lte_j_64145 = sle64(max_res_64139, j_64140);
                    bool y_64146 = i_p_m_t_s_leq_w_64143 && zzero_lte_i_64144;
                    bool y_64147 = zzero_leq_i_p_m_t_s_64142 && y_64146;
                    bool y_64148 = i_lte_j_64145 && y_64147;
                    bool forwards_ok_64149 = zzero_lte_i_64144 && y_64148;
                    bool ok_or_empty_64150 = empty_slice_64051 ||
                         forwards_ok_64149;
                    bool index_certs_64151;
                    
                    if (!ok_or_empty_64150) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_64139, ":",
                                      (long long) j_64140,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        if (memblock_unref(ctx, &mem_65977, "mem_65977") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_65973, "mem_65973") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66525,
                                           "ext_mem_66525") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66533,
                                           "ext_mem_66533") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67217,
                                           "ext_mem_67217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67225,
                                           "ext_mem_67225") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67355,
                                           "mem_out_67355") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t defunc_2_reduce_res_64153;
                    int64_t redout_65540 = (int64_t) 0;
                    
                    for (int64_t i_65541 = 0; i_65541 < min_res_64046;
                         i_65541++) {
                        int64_t slice_65840 = max_res_64139 + i_65541;
                        int64_t x_64157 = ((int64_t *) mem_66041)[slice_65840];
                        int64_t abs_arg_64158 = sub64(x_64157,
                                                      defunc_0_g_res_64118);
                        int64_t abs_res_64159 = abs64(abs_arg_64158);
                        int64_t defunc_1_op_res_64156 = add64(abs_res_64159,
                                                              redout_65540);
                        int64_t redout_tmp_67373 = defunc_1_op_res_64156;
                        
                        redout_65540 = redout_tmp_67373;
                    }
                    defunc_2_reduce_res_64153 = redout_65540;
                    
                    int64_t idx_64160;
                    int64_t idx_64161;
                    int64_t idx_64162;
                    int64_t idx_64163;
                    int64_t best_idx_64165;
                    int64_t last_idx_64166;
                    int64_t best_sum_64167;
                    int64_t curr_sum_64168;
                    
                    best_idx_64165 = max_res_64139;
                    last_idx_64166 = max_res_64139;
                    best_sum_64167 = defunc_2_reduce_res_64153;
                    curr_sum_64168 = defunc_2_reduce_res_64153;
                    for (int64_t j_64164 = 0; j_64164 < min_res_64046;
                         j_64164++) {
                        int64_t new_idx_64169 = add64(max_res_64139, j_64164);
                        int64_t x_64170 = add64(min_res_64046, new_idx_64169);
                        bool cond_64171 = slt64(last_res_64076, x_64170);
                        int64_t new_sum_64172;
                        
                        if (cond_64171) {
                            new_sum_64172 = (int64_t) 9223372036854775807;
                        } else {
                            bool x_64173 = sle64((int64_t) 0, last_idx_64166);
                            bool y_64174 = slt64(last_idx_64166, n_64028);
                            bool bounds_check_64175 = x_64173 && y_64174;
                            bool index_certs_64176;
                            
                            if (!bounds_check_64175) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) last_idx_64166,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_65977,
                                                   "mem_65977") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_65973,
                                                   "mem_65973") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66525,
                                                   "ext_mem_66525") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66533,
                                                   "ext_mem_66533") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64177 =
                                    ((int64_t *) mem_66041)[last_idx_64166];
                            int64_t binop_p_64178 = sub64(defunc_0_g_res_64118,
                                                          y_64177);
                            int64_t defunc_0_f_res_64179 = abs64(binop_p_64178);
                            int64_t x_64180 = sub64(curr_sum_64168,
                                                    defunc_0_f_res_64179);
                            int64_t min_arg_64181 = add64(min_res_64046,
                                                          last_idx_64166);
                            int64_t min_res_64182 = smin64(i_64040,
                                                           min_arg_64181);
                            bool x_64183 = sle64((int64_t) 0, min_res_64182);
                            bool y_64184 = slt64(min_res_64182, n_64028);
                            bool bounds_check_64185 = x_64183 && y_64184;
                            bool index_certs_64186;
                            
                            if (!bounds_check_64185) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_64182,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_65977,
                                                   "mem_65977") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_65973,
                                                   "mem_65973") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66525,
                                                   "ext_mem_66525") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66533,
                                                   "ext_mem_66533") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64187 =
                                    ((int64_t *) mem_66041)[min_res_64182];
                            int64_t binop_p_64188 = sub64(defunc_0_g_res_64118,
                                                          y_64187);
                            int64_t defunc_0_f_res_64189 = abs64(binop_p_64188);
                            int64_t new_sum_f_res_64190 = add64(x_64180,
                                                                defunc_0_f_res_64189);
                            
                            new_sum_64172 = new_sum_f_res_64190;
                        }
                        
                        bool cond_64191 = sle64(new_sum_64172, best_sum_64167);
                        int64_t loopres_64192;
                        
                        if (cond_64191) {
                            loopres_64192 = new_idx_64169;
                        } else {
                            loopres_64192 = best_idx_64165;
                        }
                        
                        int64_t loopres_64193;
                        
                        if (cond_64191) {
                            loopres_64193 = new_sum_64172;
                        } else {
                            loopres_64193 = best_sum_64167;
                        }
                        
                        int64_t best_idx_tmp_67374 = loopres_64192;
                        int64_t last_idx_tmp_67375 = new_idx_64169;
                        int64_t best_sum_tmp_67376 = loopres_64193;
                        int64_t curr_sum_tmp_67377 = new_sum_64172;
                        
                        best_idx_64165 = best_idx_tmp_67374;
                        last_idx_64166 = last_idx_tmp_67375;
                        best_sum_64167 = best_sum_tmp_67376;
                        curr_sum_64168 = curr_sum_tmp_67377;
                    }
                    idx_64160 = best_idx_64165;
                    idx_64161 = last_idx_64166;
                    idx_64162 = best_sum_64167;
                    idx_64163 = curr_sum_64168;
                    
                    int64_t min_res_64194 = smin64(min_arg_64094, idx_64160);
                    int64_t x_64195 = add64(min_res_64046, min_res_64194);
                    int64_t r_64196 = sub64(x_64195, (int64_t) 1);
                    bool x_64197 = sle64((int64_t) 0, r_64196);
                    bool y_64198 = slt64(r_64196, n_64028);
                    bool bounds_check_64199 = x_64197 && y_64198;
                    bool index_certs_64200;
                    
                    if (!bounds_check_64199) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) r_64196,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        if (memblock_unref(ctx, &mem_65977, "mem_65977") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_65973, "mem_65973") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66525,
                                           "ext_mem_66525") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66533,
                                           "ext_mem_66533") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67217,
                                           "ext_mem_67217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67225,
                                           "ext_mem_67225") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67355,
                                           "mem_out_67355") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64201 = ((int64_t *) mem_66008)[r_64196];
                    int64_t abs_arg_64202 = sub64(x_64201, min_res_64117);
                    int64_t abs_res_64203 = abs64(abs_arg_64202);
                    bool x_64204 = sle64((int64_t) 0, min_res_64194);
                    bool y_64205 = slt64(min_res_64194, n_64028);
                    bool bounds_check_64206 = x_64204 && y_64205;
                    bool index_certs_64207;
                    
                    if (!bounds_check_64206) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_64194,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        if (memblock_unref(ctx, &mem_65977, "mem_65977") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_65973, "mem_65973") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66525,
                                           "ext_mem_66525") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66533,
                                           "ext_mem_66533") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67217,
                                           "ext_mem_67217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67225,
                                           "ext_mem_67225") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67355,
                                           "mem_out_67355") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64208 = ((int64_t *) mem_66008)[min_res_64194];
                    int64_t abs_arg_64209 = sub64(x_64208, min_res_64117);
                    int64_t abs_res_64210 = abs64(abs_arg_64209);
                    int64_t max_res_64211 = smax64(abs_res_64203,
                                                   abs_res_64210);
                    float defunc_0_f_res_64212 = sitofp_i64_f32(max_res_64211);
                    float defunc_1_f_res_64213 = max_res_64098 +
                          defunc_0_f_res_64212;
                    float defunc_0_f_res_64214 = sitofp_i64_f32(min_res_64117);
                    float defunc_2_reduce_res_64215;
                    float redout_65542 = 0.0F;
                    
                    for (int64_t i_65543 = 0; i_65543 < q_64030; i_65543++) {
                        float x_64220 = ((float *) mem_66080)[i_65543];
                        bool cond_64221 = sle64(last_res_64076, i_65543);
                        float defunc_0_f_res_64222;
                        
                        if (cond_64221) {
                            defunc_0_f_res_64222 = 0.0F;
                        } else {
                            int64_t i_64223 = add64(min_res_64194, i_65543);
                            float x_64224 = ((float *) mem_66035)[i_64223];
                            float defunc_0_f_res_f_res_64225 = 1.0F + x_64224;
                            
                            defunc_0_f_res_64222 = defunc_0_f_res_f_res_64225;
                        }
                        
                        float x_j_64226 = defunc_0_f_res_64222 -
                              defunc_0_f_res_64214;
                        float abs_res_64227 = (float) fabs(x_j_64226);
                        float tmp1_64228 = abs_res_64227 / defunc_1_f_res_64213;
                        float x_64229 = tmp1_64228 * tmp1_64228;
                        float y_64230 = tmp1_64228 * x_64229;
                        float tmp2_64231 = 1.0F - y_64230;
                        float x_64232 = tmp2_64231 * tmp2_64231;
                        float tmp3_64233 = tmp2_64231 * x_64232;
                        float w_j_64234 = x_64220 * tmp3_64233;
                        float defunc_1_op_res_64218 = w_j_64234 + redout_65542;
                        float redout_tmp_67378 = defunc_1_op_res_64218;
                        
                        redout_65542 = redout_tmp_67378;
                    }
                    defunc_2_reduce_res_64215 = redout_65542;
                    
                    float a0_64235 = 1.0F / defunc_2_reduce_res_64215;
                    float defunc_2_reduce_res_64236;
                    float redout_65544 = 0.0F;
                    
                    for (int64_t i_65545 = 0; i_65545 < q_64030; i_65545++) {
                        float x_64241 = ((float *) mem_66080)[i_65545];
                        bool cond_64242 = sle64(last_res_64076, i_65545);
                        float defunc_0_f_res_64243;
                        
                        if (cond_64242) {
                            defunc_0_f_res_64243 = 0.0F;
                        } else {
                            int64_t i_64244 = add64(min_res_64194, i_65545);
                            float x_64245 = ((float *) mem_66035)[i_64244];
                            float defunc_0_f_res_f_res_64246 = 1.0F + x_64245;
                            
                            defunc_0_f_res_64243 = defunc_0_f_res_f_res_64246;
                        }
                        
                        float x_j_64247 = defunc_0_f_res_64243 -
                              defunc_0_f_res_64214;
                        float abs_res_64248 = (float) fabs(x_j_64247);
                        float tmp1_64249 = abs_res_64248 / defunc_1_f_res_64213;
                        float x_64250 = tmp1_64249 * tmp1_64249;
                        float y_64251 = tmp1_64249 * x_64250;
                        float tmp2_64252 = 1.0F - y_64251;
                        float x_64253 = tmp2_64252 * tmp2_64252;
                        float tmp3_64254 = tmp2_64252 * x_64253;
                        float tmp4_64255 = x_64241 * tmp3_64254;
                        float defunc_0_f_res_64256;
                        
                        if (cond_64242) {
                            defunc_0_f_res_64256 = 0.0F;
                        } else {
                            int64_t i_64257 = add64(min_res_64194, i_65545);
                            float x_64258 = ((float *) mem_66005)[i_64257];
                            
                            defunc_0_f_res_64256 = x_64258;
                        }
                        
                        float x_64259 = a0_64235 * tmp4_64255;
                        float defunc_9_fit_fun_res_64260 =
                              defunc_0_f_res_64256 * x_64259;
                        float defunc_1_op_res_64239 =
                              defunc_9_fit_fun_res_64260 + redout_65544;
                        float redout_tmp_67379 = defunc_1_op_res_64239;
                        
                        redout_65544 = redout_tmp_67379;
                    }
                    defunc_2_reduce_res_64236 = redout_65544;
                    ((float *) mem_65977.mem)[i_65552 * n_m_64039 + i_65548] =
                        defunc_2_reduce_res_64236;
                }
            }
            if (memblock_set(ctx, &ext_mem_66533, &mem_65977, "mem_65977") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_66525, &mem_65973, "mem_65973") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_65977, "mem_65977") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_65973, "mem_65973") != 0)
                return 1;
        } else {
            bool match_lit_64263 = (int64_t) 1 == degree_64031;
            int64_t binop_x_66124 = m_64027 * n_m_64039;
            int64_t binop_y_66125 = (int64_t) 4 * binop_x_66124;
            int64_t bytes_66123 = smax64((int64_t) 0, binop_y_66125);
            int64_t binop_y_66152 = (int64_t) 8 * n_64028;
            int64_t bytes_66151 = smax64((int64_t) 0, binop_y_66152);
            int64_t binop_y_66167 = (int64_t) 4 * n_64028;
            int64_t bytes_66166 = smax64((int64_t) 0, binop_y_66167);
            int64_t binop_y_66242 = (int64_t) 4 * q_64030;
            int64_t bytes_66241 = smax64((int64_t) 0, binop_y_66242);
            int64_t binop_x_66317 = m_64027 * n_m_64039;
            int64_t binop_y_66318 = (int64_t) 4 * binop_x_66317;
            int64_t bytes_66316 = smax64((int64_t) 0, binop_y_66318);
            int64_t binop_y_66345 = (int64_t) 8 * n_64028;
            int64_t bytes_66344 = smax64((int64_t) 0, binop_y_66345);
            int64_t binop_y_66360 = (int64_t) 4 * n_64028;
            int64_t bytes_66359 = smax64((int64_t) 0, binop_y_66360);
            int64_t binop_y_66435 = (int64_t) 4 * q_64030;
            int64_t bytes_66434 = smax64((int64_t) 0, binop_y_66435);
            struct memblock ext_mem_66517;
            
            ext_mem_66517.references = NULL;
            
            struct memblock ext_mem_66509;
            
            ext_mem_66509.references = NULL;
            if (match_lit_64263) {
                struct memblock mem_66126;
                
                mem_66126.references = NULL;
                if (memblock_alloc(ctx, &mem_66126, bytes_66123, "mem_66126")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66130;
                
                mem_66130.references = NULL;
                if (memblock_alloc(ctx, &mem_66130, bytes_66123, "mem_66130")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66153_cached_sizze_67533 < (size_t) bytes_66151) {
                    mem_66153 = realloc(mem_66153, bytes_66151);
                    mem_66153_cached_sizze_67533 = bytes_66151;
                }
                if (mem_66168_cached_sizze_67534 < (size_t) bytes_66166) {
                    mem_66168 = realloc(mem_66168, bytes_66166);
                    mem_66168_cached_sizze_67534 = bytes_66166;
                }
                if (mem_66171_cached_sizze_67535 < (size_t) bytes_66151) {
                    mem_66171 = realloc(mem_66171, bytes_66151);
                    mem_66171_cached_sizze_67535 = bytes_66151;
                }
                if (mem_66198_cached_sizze_67536 < (size_t) bytes_66166) {
                    mem_66198 = realloc(mem_66198, bytes_66166);
                    mem_66198_cached_sizze_67536 = bytes_66166;
                }
                if (mem_66201_cached_sizze_67537 < (size_t) bytes_66151) {
                    mem_66201 = realloc(mem_66201, bytes_66151);
                    mem_66201_cached_sizze_67537 = bytes_66151;
                }
                if (mem_66204_cached_sizze_67538 < (size_t) bytes_66151) {
                    mem_66204 = realloc(mem_66204, bytes_66151);
                    mem_66204_cached_sizze_67538 = bytes_66151;
                }
                if (mem_66243_cached_sizze_67539 < (size_t) bytes_66241) {
                    mem_66243 = realloc(mem_66243, bytes_66241);
                    mem_66243_cached_sizze_67539 = bytes_66241;
                }
                for (int64_t i_65602 = 0; i_65602 < m_64027; i_65602++) {
                    int64_t discard_65559;
                    int64_t scanacc_65555 = (int64_t) 0;
                    
                    for (int64_t i_65557 = 0; i_65557 < n_64028; i_65557++) {
                        float x_64274 = ((float *) Y_mem_65969.mem)[i_65602 *
                                                                    n_64028 +
                                                                    i_65557];
                        bool isnan_res_64275;
                        
                        isnan_res_64275 = futrts_isnan32(x_64274);
                        
                        bool defunc_0_p_res_64276 = !isnan_res_64275;
                        int64_t defunc_0_f_res_64277 =
                                btoi_bool_i64(defunc_0_p_res_64276);
                        int64_t defunc_1_op_res_64273 =
                                add64(defunc_0_f_res_64277, scanacc_65555);
                        
                        ((int64_t *) mem_66153)[i_65557] =
                            defunc_1_op_res_64273;
                        
                        int64_t scanacc_tmp_67382 = defunc_1_op_res_64273;
                        
                        scanacc_65555 = scanacc_tmp_67382;
                    }
                    discard_65559 = scanacc_65555;
                    
                    int64_t last_res_64278 = ((int64_t *) mem_66153)[i_64040];
                    
                    for (int64_t i_67384 = 0; i_67384 < n_64028; i_67384++) {
                        ((float *) mem_66168)[i_67384] = 0.0F;
                    }
                    for (int64_t i_67385 = 0; i_67385 < n_64028; i_67385++) {
                        ((int64_t *) mem_66171)[i_67385] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65560 = 0; write_iter_65560 <
                         n_64028; write_iter_65560++) {
                        float write_iv_65563 =
                              ((float *) Y_mem_65969.mem)[i_65602 * n_64028 +
                                                          write_iter_65560];
                        int64_t write_iv_65564 =
                                ((int64_t *) mem_66153)[write_iter_65560];
                        bool isnan_res_64286;
                        
                        isnan_res_64286 = futrts_isnan32(write_iv_65563);
                        
                        bool defunc_0_p_res_64287 = !isnan_res_64286;
                        int64_t defunc_1_f_res_64288;
                        
                        if (defunc_0_p_res_64287) {
                            int64_t defunc_1_f_res_t_res_64289 =
                                    sub64(write_iv_65564, (int64_t) 1);
                            
                            defunc_1_f_res_64288 = defunc_1_f_res_t_res_64289;
                        } else {
                            defunc_1_f_res_64288 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64288) &&
                            slt64(defunc_1_f_res_64288, n_64028)) {
                            ((int64_t *) mem_66171)[defunc_1_f_res_64288] =
                                write_iter_65560;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64288) &&
                            slt64(defunc_1_f_res_64288, n_64028)) {
                            memmove(mem_66168 + defunc_1_f_res_64288 *
                                    (int64_t) 4, Y_mem_65969.mem + (i_65602 *
                                                                    n_64028 +
                                                                    write_iter_65560) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_64296 = sub64(last_res_64278,
                                                  min_res_64046);
                    float i64_res_64297 = sitofp_i64_f32(last_res_64278);
                    float x_64298 = i64_res_64053 - i64_res_64297;
                    float max_arg_64299 = x_64298 / 2.0F;
                    float max_res_64300 = fmax32(0.0F, max_arg_64299);
                    
                    for (int64_t i_65574 = 0; i_65574 < n_64028; i_65574++) {
                        int64_t x_64304 = ((int64_t *) mem_66171)[i_65574];
                        int64_t defunc_0_f_res_64305 = add64((int64_t) 1,
                                                             x_64304);
                        bool cond_64306 = slt64(defunc_0_f_res_64305,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_64307;
                        
                        if (cond_64306) {
                            defunc_0_f_res_64307 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_64307 = defunc_0_f_res_64305;
                        }
                        
                        float defunc_0_f_res_64308 = sitofp_i64_f32(x_64304);
                        
                        ((float *) mem_66198)[i_65574] = defunc_0_f_res_64308;
                        ((int64_t *) mem_66201)[i_65574] = defunc_0_f_res_64307;
                        ((int64_t *) mem_66204)[i_65574] = defunc_0_f_res_64305;
                    }
                    for (int64_t i_65580 = 0; i_65580 < q_64030; i_65580++) {
                        bool cond_64314 = sle64(last_res_64278, i_65580);
                        float defunc_0_f_res_64315;
                        
                        if (cond_64314) {
                            defunc_0_f_res_64315 = 0.0F;
                        } else {
                            defunc_0_f_res_64315 = 1.0F;
                        }
                        ((float *) mem_66243)[i_65580] = defunc_0_f_res_64315;
                    }
                    for (int64_t i_65595 = 0; i_65595 < n_m_64039; i_65595++) {
                        int64_t min_arg_64319 = mul64(jump_64032, i_65595);
                        int64_t min_res_64320 = smin64(i_64040, min_arg_64319);
                        int64_t defunc_0_g_res_64321 = add64((int64_t) 1,
                                                             min_res_64320);
                        bool nearest_idx_64322;
                        int64_t nearest_idx_64323;
                        int64_t nearest_idx_64324;
                        bool loop_while_64325;
                        int64_t low_64326;
                        int64_t high_64327;
                        
                        loop_while_64325 = x_64041;
                        low_64326 = (int64_t) 0;
                        high_64327 = i_64040;
                        while (loop_while_64325) {
                            int64_t x_64328 = add64(low_64326, high_64327);
                            int64_t mid_64329 = sdiv64(x_64328, (int64_t) 2);
                            bool x_64330 = sle64((int64_t) 0, mid_64329);
                            bool y_64331 = slt64(mid_64329, n_64028);
                            bool bounds_check_64332 = x_64330 && y_64331;
                            bool index_certs_64333;
                            
                            if (!bounds_check_64332) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_64329,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_66130,
                                                   "mem_66130") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66126,
                                                   "mem_66126") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66509,
                                                   "ext_mem_66509") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66517,
                                                   "ext_mem_66517") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66525,
                                                   "ext_mem_66525") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66533,
                                                   "ext_mem_66533") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_64334 =
                                    ((int64_t *) mem_66201)[mid_64329];
                            bool cond_64335 = sle64(defunc_0_g_res_64321,
                                                    x_64334);
                            int64_t loopres_64336;
                            int64_t loopres_64337;
                            
                            if (cond_64335) {
                                int64_t loopres_t_res_64338 = sub64(mid_64329,
                                                                    (int64_t) 1);
                                
                                loopres_64336 = low_64326;
                                loopres_64337 = loopres_t_res_64338;
                            } else {
                                int64_t loopres_f_res_64339 = add64((int64_t) 1,
                                                                    mid_64329);
                                
                                loopres_64336 = loopres_f_res_64339;
                                loopres_64337 = high_64327;
                            }
                            
                            bool loop_cond_64340 = sle64(loopres_64336,
                                                         loopres_64337);
                            bool loop_while_tmp_67394 = loop_cond_64340;
                            int64_t low_tmp_67395 = loopres_64336;
                            int64_t high_tmp_67396 = loopres_64337;
                            
                            loop_while_64325 = loop_while_tmp_67394;
                            low_64326 = low_tmp_67395;
                            high_64327 = high_tmp_67396;
                        }
                        nearest_idx_64322 = loop_while_64325;
                        nearest_idx_64323 = low_64326;
                        nearest_idx_64324 = high_64327;
                        
                        int64_t max_arg_64341 = sub64(nearest_idx_64323,
                                                      min_res_64046);
                        int64_t max_res_64342 = smax64((int64_t) 0,
                                                       max_arg_64341);
                        int64_t j_64343 = add64(min_res_64046, max_res_64342);
                        int64_t i_p_m_t_s_64344 = add64(m_64052, max_res_64342);
                        bool zzero_leq_i_p_m_t_s_64345 = sle64((int64_t) 0,
                                                               i_p_m_t_s_64344);
                        bool i_p_m_t_s_leq_w_64346 = slt64(i_p_m_t_s_64344,
                                                           n_64028);
                        bool zzero_lte_i_64347 = sle64((int64_t) 0,
                                                       max_res_64342);
                        bool i_lte_j_64348 = sle64(max_res_64342, j_64343);
                        bool y_64349 = i_p_m_t_s_leq_w_64346 &&
                             zzero_lte_i_64347;
                        bool y_64350 = zzero_leq_i_p_m_t_s_64345 && y_64349;
                        bool y_64351 = i_lte_j_64348 && y_64350;
                        bool forwards_ok_64352 = zzero_lte_i_64347 && y_64351;
                        bool ok_or_empty_64353 = empty_slice_64051 ||
                             forwards_ok_64352;
                        bool index_certs_64354;
                        
                        if (!ok_or_empty_64353) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_64342,
                                          ":", (long long) j_64343,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66130, "mem_66130") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66126, "mem_66126") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66509,
                                               "ext_mem_66509") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66517,
                                               "ext_mem_66517") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_64356;
                        int64_t redout_65582 = (int64_t) 0;
                        
                        for (int64_t i_65583 = 0; i_65583 < min_res_64046;
                             i_65583++) {
                            int64_t slice_65853 = max_res_64342 + i_65583;
                            int64_t x_64360 =
                                    ((int64_t *) mem_66204)[slice_65853];
                            int64_t abs_arg_64361 = sub64(x_64360,
                                                          defunc_0_g_res_64321);
                            int64_t abs_res_64362 = abs64(abs_arg_64361);
                            int64_t defunc_1_op_res_64359 = add64(abs_res_64362,
                                                                  redout_65582);
                            int64_t redout_tmp_67397 = defunc_1_op_res_64359;
                            
                            redout_65582 = redout_tmp_67397;
                        }
                        defunc_2_reduce_res_64356 = redout_65582;
                        
                        int64_t idx_64363;
                        int64_t idx_64364;
                        int64_t idx_64365;
                        int64_t idx_64366;
                        int64_t best_idx_64368;
                        int64_t last_idx_64369;
                        int64_t best_sum_64370;
                        int64_t curr_sum_64371;
                        
                        best_idx_64368 = max_res_64342;
                        last_idx_64369 = max_res_64342;
                        best_sum_64370 = defunc_2_reduce_res_64356;
                        curr_sum_64371 = defunc_2_reduce_res_64356;
                        for (int64_t j_64367 = 0; j_64367 < min_res_64046;
                             j_64367++) {
                            int64_t new_idx_64372 = add64(max_res_64342,
                                                          j_64367);
                            int64_t x_64373 = add64(min_res_64046,
                                                    new_idx_64372);
                            bool cond_64374 = slt64(last_res_64278, x_64373);
                            int64_t new_sum_64375;
                            
                            if (cond_64374) {
                                new_sum_64375 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_64376 = sle64((int64_t) 0,
                                                     last_idx_64369);
                                bool y_64377 = slt64(last_idx_64369, n_64028);
                                bool bounds_check_64378 = x_64376 && y_64377;
                                bool index_certs_64379;
                                
                                if (!bounds_check_64378) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_64369,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66130,
                                                       "mem_66130") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66126,
                                                       "mem_66126") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66509,
                                                       "ext_mem_66509") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66517,
                                                       "ext_mem_66517") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66525,
                                                       "ext_mem_66525") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66533,
                                                       "ext_mem_66533") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64380 =
                                        ((int64_t *) mem_66204)[last_idx_64369];
                                int64_t binop_p_64381 =
                                        sub64(defunc_0_g_res_64321, y_64380);
                                int64_t defunc_0_f_res_64382 =
                                        abs64(binop_p_64381);
                                int64_t x_64383 = sub64(curr_sum_64371,
                                                        defunc_0_f_res_64382);
                                int64_t min_arg_64384 = add64(min_res_64046,
                                                              last_idx_64369);
                                int64_t min_res_64385 = smin64(i_64040,
                                                               min_arg_64384);
                                bool x_64386 = sle64((int64_t) 0,
                                                     min_res_64385);
                                bool y_64387 = slt64(min_res_64385, n_64028);
                                bool bounds_check_64388 = x_64386 && y_64387;
                                bool index_certs_64389;
                                
                                if (!bounds_check_64388) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_64385,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66130,
                                                       "mem_66130") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66126,
                                                       "mem_66126") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66509,
                                                       "ext_mem_66509") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66517,
                                                       "ext_mem_66517") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66525,
                                                       "ext_mem_66525") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66533,
                                                       "ext_mem_66533") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64390 =
                                        ((int64_t *) mem_66204)[min_res_64385];
                                int64_t binop_p_64391 =
                                        sub64(defunc_0_g_res_64321, y_64390);
                                int64_t defunc_0_f_res_64392 =
                                        abs64(binop_p_64391);
                                int64_t new_sum_f_res_64393 = add64(x_64383,
                                                                    defunc_0_f_res_64392);
                                
                                new_sum_64375 = new_sum_f_res_64393;
                            }
                            
                            bool cond_64394 = sle64(new_sum_64375,
                                                    best_sum_64370);
                            int64_t loopres_64395;
                            
                            if (cond_64394) {
                                loopres_64395 = new_idx_64372;
                            } else {
                                loopres_64395 = best_idx_64368;
                            }
                            
                            int64_t loopres_64396;
                            
                            if (cond_64394) {
                                loopres_64396 = new_sum_64375;
                            } else {
                                loopres_64396 = best_sum_64370;
                            }
                            
                            int64_t best_idx_tmp_67398 = loopres_64395;
                            int64_t last_idx_tmp_67399 = new_idx_64372;
                            int64_t best_sum_tmp_67400 = loopres_64396;
                            int64_t curr_sum_tmp_67401 = new_sum_64375;
                            
                            best_idx_64368 = best_idx_tmp_67398;
                            last_idx_64369 = last_idx_tmp_67399;
                            best_sum_64370 = best_sum_tmp_67400;
                            curr_sum_64371 = curr_sum_tmp_67401;
                        }
                        idx_64363 = best_idx_64368;
                        idx_64364 = last_idx_64369;
                        idx_64365 = best_sum_64370;
                        idx_64366 = curr_sum_64371;
                        
                        int64_t min_res_64397 = smin64(min_arg_64296,
                                                       idx_64363);
                        int64_t x_64398 = add64(min_res_64046, min_res_64397);
                        int64_t r_64399 = sub64(x_64398, (int64_t) 1);
                        bool x_64400 = sle64((int64_t) 0, r_64399);
                        bool y_64401 = slt64(r_64399, n_64028);
                        bool bounds_check_64402 = x_64400 && y_64401;
                        bool index_certs_64403;
                        
                        if (!bounds_check_64402) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_64399,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66130, "mem_66130") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66126, "mem_66126") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66509,
                                               "ext_mem_66509") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66517,
                                               "ext_mem_66517") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64404 = ((int64_t *) mem_66171)[r_64399];
                        int64_t abs_arg_64405 = sub64(x_64404, min_res_64320);
                        int64_t abs_res_64406 = abs64(abs_arg_64405);
                        bool x_64407 = sle64((int64_t) 0, min_res_64397);
                        bool y_64408 = slt64(min_res_64397, n_64028);
                        bool bounds_check_64409 = x_64407 && y_64408;
                        bool index_certs_64410;
                        
                        if (!bounds_check_64409) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_64397,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66130, "mem_66130") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66126, "mem_66126") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66509,
                                               "ext_mem_66509") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66517,
                                               "ext_mem_66517") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64411 =
                                ((int64_t *) mem_66171)[min_res_64397];
                        int64_t abs_arg_64412 = sub64(x_64411, min_res_64320);
                        int64_t abs_res_64413 = abs64(abs_arg_64412);
                        int64_t max_res_64414 = smax64(abs_res_64406,
                                                       abs_res_64413);
                        float defunc_0_f_res_64415 =
                              sitofp_i64_f32(max_res_64414);
                        float defunc_1_f_res_64416 = max_res_64300 +
                              defunc_0_f_res_64415;
                        float defunc_0_f_res_64417 =
                              sitofp_i64_f32(min_res_64320);
                        float defunc_2_reduce_res_64418;
                        float defunc_2_reduce_res_64419;
                        float defunc_2_reduce_res_64420;
                        float redout_65584;
                        float redout_65585;
                        float redout_65586;
                        
                        redout_65584 = 0.0F;
                        redout_65585 = 0.0F;
                        redout_65586 = 0.0F;
                        for (int64_t i_65587 = 0; i_65587 < q_64030;
                             i_65587++) {
                            float x_64431 = ((float *) mem_66243)[i_65587];
                            bool cond_64432 = sle64(last_res_64278, i_65587);
                            float defunc_0_f_res_64433;
                            
                            if (cond_64432) {
                                defunc_0_f_res_64433 = 0.0F;
                            } else {
                                int64_t i_64434 = add64(min_res_64397, i_65587);
                                float x_64435 = ((float *) mem_66198)[i_64434];
                                float defunc_0_f_res_f_res_64436 = 1.0F +
                                      x_64435;
                                
                                defunc_0_f_res_64433 =
                                    defunc_0_f_res_f_res_64436;
                            }
                            
                            float x_j_64437 = defunc_0_f_res_64433 -
                                  defunc_0_f_res_64417;
                            float abs_res_64438 = (float) fabs(x_j_64437);
                            float tmp1_64439 = abs_res_64438 /
                                  defunc_1_f_res_64416;
                            float x_64440 = tmp1_64439 * tmp1_64439;
                            float y_64441 = tmp1_64439 * x_64440;
                            float tmp2_64442 = 1.0F - y_64441;
                            float x_64443 = tmp2_64442 * tmp2_64442;
                            float tmp3_64444 = tmp2_64442 * x_64443;
                            float w_j_64445 = x_64431 * tmp3_64444;
                            float xw_j_64446 = x_j_64437 * w_j_64445;
                            float x2w_j_64447 = x_j_64437 * xw_j_64446;
                            float defunc_1_op_res_64423 = w_j_64445 +
                                  redout_65584;
                            float defunc_1_op_res_64426 = xw_j_64446 +
                                  redout_65585;
                            float defunc_1_op_res_64429 = x2w_j_64447 +
                                  redout_65586;
                            float redout_tmp_67402 = defunc_1_op_res_64423;
                            float redout_tmp_67403 = defunc_1_op_res_64426;
                            float redout_tmp_67404 = defunc_1_op_res_64429;
                            
                            redout_65584 = redout_tmp_67402;
                            redout_65585 = redout_tmp_67403;
                            redout_65586 = redout_tmp_67404;
                        }
                        defunc_2_reduce_res_64418 = redout_65584;
                        defunc_2_reduce_res_64419 = redout_65585;
                        defunc_2_reduce_res_64420 = redout_65586;
                        
                        float x_64448 = defunc_2_reduce_res_64418 *
                              defunc_2_reduce_res_64420;
                        float y_64449 = defunc_2_reduce_res_64419 *
                              defunc_2_reduce_res_64419;
                        float y_64450 = x_64448 - y_64449;
                        float det1_64451 = 1.0F / y_64450;
                        float a11_64452 = defunc_2_reduce_res_64420 *
                              det1_64451;
                        float negate_arg_64453 = defunc_2_reduce_res_64419 *
                              det1_64451;
                        float b11_64454 = 0.0F - negate_arg_64453;
                        float c11_64455 = defunc_2_reduce_res_64418 *
                              det1_64451;
                        float defunc_2_reduce_res_64456;
                        float defunc_2_reduce_res_64457;
                        float redout_65588;
                        float redout_65589;
                        
                        redout_65588 = 0.0F;
                        redout_65589 = 0.0F;
                        for (int64_t i_65590 = 0; i_65590 < q_64030;
                             i_65590++) {
                            float x_64465 = ((float *) mem_66243)[i_65590];
                            bool cond_64466 = sle64(last_res_64278, i_65590);
                            float defunc_0_f_res_64467;
                            
                            if (cond_64466) {
                                defunc_0_f_res_64467 = 0.0F;
                            } else {
                                int64_t i_64468 = add64(min_res_64397, i_65590);
                                float x_64469 = ((float *) mem_66198)[i_64468];
                                float defunc_0_f_res_f_res_64470 = 1.0F +
                                      x_64469;
                                
                                defunc_0_f_res_64467 =
                                    defunc_0_f_res_f_res_64470;
                            }
                            
                            float x_j_64471 = defunc_0_f_res_64467 -
                                  defunc_0_f_res_64417;
                            float abs_res_64472 = (float) fabs(x_j_64471);
                            float tmp1_64473 = abs_res_64472 /
                                  defunc_1_f_res_64416;
                            float x_64474 = tmp1_64473 * tmp1_64473;
                            float y_64475 = tmp1_64473 * x_64474;
                            float tmp2_64476 = 1.0F - y_64475;
                            float x_64477 = tmp2_64476 * tmp2_64476;
                            float tmp3_64478 = tmp2_64476 * x_64477;
                            float tmp4_64479 = x_64465 * tmp3_64478;
                            float defunc_1_f_res_64480 = x_j_64471 * tmp4_64479;
                            float defunc_0_f_res_64481;
                            
                            if (cond_64466) {
                                defunc_0_f_res_64481 = 0.0F;
                            } else {
                                int64_t i_64482 = add64(min_res_64397, i_65590);
                                float x_64483 = ((float *) mem_66168)[i_64482];
                                
                                defunc_0_f_res_64481 = x_64483;
                            }
                            
                            float x_64484 = a11_64452 * tmp4_64479;
                            float y_64485 = b11_64454 * defunc_1_f_res_64480;
                            float x_64486 = x_64484 + y_64485;
                            float defunc_9_fit_fun_res_64487 =
                                  defunc_0_f_res_64481 * x_64486;
                            float x_64488 = b11_64454 * tmp4_64479;
                            float y_64489 = c11_64455 * defunc_1_f_res_64480;
                            float x_64490 = x_64488 + y_64489;
                            float defunc_9_slope_fun_res_64491 =
                                  defunc_0_f_res_64481 * x_64490;
                            float defunc_1_op_res_64460 =
                                  defunc_9_fit_fun_res_64487 + redout_65588;
                            float defunc_1_op_res_64463 =
                                  defunc_9_slope_fun_res_64491 + redout_65589;
                            float redout_tmp_67405 = defunc_1_op_res_64460;
                            float redout_tmp_67406 = defunc_1_op_res_64463;
                            
                            redout_65588 = redout_tmp_67405;
                            redout_65589 = redout_tmp_67406;
                        }
                        defunc_2_reduce_res_64456 = redout_65588;
                        defunc_2_reduce_res_64457 = redout_65589;
                        ((float *) mem_66126.mem)[i_65602 * n_m_64039 +
                                                  i_65595] =
                            defunc_2_reduce_res_64456;
                        ((float *) mem_66130.mem)[i_65602 * n_m_64039 +
                                                  i_65595] =
                            defunc_2_reduce_res_64457;
                    }
                }
                if (memblock_set(ctx, &ext_mem_66517, &mem_66126,
                                 "mem_66126") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_66509, &mem_66130,
                                 "mem_66130") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66130, "mem_66130") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66126, "mem_66126") != 0)
                    return 1;
            } else {
                struct memblock mem_66319;
                
                mem_66319.references = NULL;
                if (memblock_alloc(ctx, &mem_66319, bytes_66316, "mem_66319")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66323;
                
                mem_66323.references = NULL;
                if (memblock_alloc(ctx, &mem_66323, bytes_66316, "mem_66323")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66346_cached_sizze_67540 < (size_t) bytes_66344) {
                    mem_66346 = realloc(mem_66346, bytes_66344);
                    mem_66346_cached_sizze_67540 = bytes_66344;
                }
                if (mem_66361_cached_sizze_67541 < (size_t) bytes_66359) {
                    mem_66361 = realloc(mem_66361, bytes_66359);
                    mem_66361_cached_sizze_67541 = bytes_66359;
                }
                if (mem_66364_cached_sizze_67542 < (size_t) bytes_66344) {
                    mem_66364 = realloc(mem_66364, bytes_66344);
                    mem_66364_cached_sizze_67542 = bytes_66344;
                }
                if (mem_66391_cached_sizze_67543 < (size_t) bytes_66359) {
                    mem_66391 = realloc(mem_66391, bytes_66359);
                    mem_66391_cached_sizze_67543 = bytes_66359;
                }
                if (mem_66394_cached_sizze_67544 < (size_t) bytes_66344) {
                    mem_66394 = realloc(mem_66394, bytes_66344);
                    mem_66394_cached_sizze_67544 = bytes_66344;
                }
                if (mem_66397_cached_sizze_67545 < (size_t) bytes_66344) {
                    mem_66397 = realloc(mem_66397, bytes_66344);
                    mem_66397_cached_sizze_67545 = bytes_66344;
                }
                if (mem_66436_cached_sizze_67546 < (size_t) bytes_66434) {
                    mem_66436 = realloc(mem_66436, bytes_66434);
                    mem_66436_cached_sizze_67546 = bytes_66434;
                }
                for (int64_t i_65655 = 0; i_65655 < m_64027; i_65655++) {
                    int64_t discard_65610;
                    int64_t scanacc_65606 = (int64_t) 0;
                    
                    for (int64_t i_65608 = 0; i_65608 < n_64028; i_65608++) {
                        float x_64502 = ((float *) Y_mem_65969.mem)[i_65655 *
                                                                    n_64028 +
                                                                    i_65608];
                        bool isnan_res_64503;
                        
                        isnan_res_64503 = futrts_isnan32(x_64502);
                        
                        bool defunc_0_p_res_64504 = !isnan_res_64503;
                        int64_t defunc_0_f_res_64505 =
                                btoi_bool_i64(defunc_0_p_res_64504);
                        int64_t defunc_1_op_res_64501 =
                                add64(defunc_0_f_res_64505, scanacc_65606);
                        
                        ((int64_t *) mem_66346)[i_65608] =
                            defunc_1_op_res_64501;
                        
                        int64_t scanacc_tmp_67409 = defunc_1_op_res_64501;
                        
                        scanacc_65606 = scanacc_tmp_67409;
                    }
                    discard_65610 = scanacc_65606;
                    
                    int64_t last_res_64506 = ((int64_t *) mem_66346)[i_64040];
                    
                    for (int64_t i_67411 = 0; i_67411 < n_64028; i_67411++) {
                        ((float *) mem_66361)[i_67411] = 0.0F;
                    }
                    for (int64_t i_67412 = 0; i_67412 < n_64028; i_67412++) {
                        ((int64_t *) mem_66364)[i_67412] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65611 = 0; write_iter_65611 <
                         n_64028; write_iter_65611++) {
                        float write_iv_65614 =
                              ((float *) Y_mem_65969.mem)[i_65655 * n_64028 +
                                                          write_iter_65611];
                        int64_t write_iv_65615 =
                                ((int64_t *) mem_66346)[write_iter_65611];
                        bool isnan_res_64514;
                        
                        isnan_res_64514 = futrts_isnan32(write_iv_65614);
                        
                        bool defunc_0_p_res_64515 = !isnan_res_64514;
                        int64_t defunc_1_f_res_64516;
                        
                        if (defunc_0_p_res_64515) {
                            int64_t defunc_1_f_res_t_res_64517 =
                                    sub64(write_iv_65615, (int64_t) 1);
                            
                            defunc_1_f_res_64516 = defunc_1_f_res_t_res_64517;
                        } else {
                            defunc_1_f_res_64516 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64516) &&
                            slt64(defunc_1_f_res_64516, n_64028)) {
                            ((int64_t *) mem_66364)[defunc_1_f_res_64516] =
                                write_iter_65611;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64516) &&
                            slt64(defunc_1_f_res_64516, n_64028)) {
                            memmove(mem_66361 + defunc_1_f_res_64516 *
                                    (int64_t) 4, Y_mem_65969.mem + (i_65655 *
                                                                    n_64028 +
                                                                    write_iter_65611) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_64524 = sub64(last_res_64506,
                                                  min_res_64046);
                    float i64_res_64525 = sitofp_i64_f32(last_res_64506);
                    float x_64526 = i64_res_64053 - i64_res_64525;
                    float max_arg_64527 = x_64526 / 2.0F;
                    float max_res_64528 = fmax32(0.0F, max_arg_64527);
                    
                    for (int64_t i_65625 = 0; i_65625 < n_64028; i_65625++) {
                        int64_t x_64532 = ((int64_t *) mem_66364)[i_65625];
                        int64_t defunc_0_f_res_64533 = add64((int64_t) 1,
                                                             x_64532);
                        bool cond_64534 = slt64(defunc_0_f_res_64533,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_64535;
                        
                        if (cond_64534) {
                            defunc_0_f_res_64535 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_64535 = defunc_0_f_res_64533;
                        }
                        
                        float defunc_0_f_res_64536 = sitofp_i64_f32(x_64532);
                        
                        ((float *) mem_66391)[i_65625] = defunc_0_f_res_64536;
                        ((int64_t *) mem_66394)[i_65625] = defunc_0_f_res_64535;
                        ((int64_t *) mem_66397)[i_65625] = defunc_0_f_res_64533;
                    }
                    for (int64_t i_65631 = 0; i_65631 < q_64030; i_65631++) {
                        bool cond_64542 = sle64(last_res_64506, i_65631);
                        float defunc_0_f_res_64543;
                        
                        if (cond_64542) {
                            defunc_0_f_res_64543 = 0.0F;
                        } else {
                            defunc_0_f_res_64543 = 1.0F;
                        }
                        ((float *) mem_66436)[i_65631] = defunc_0_f_res_64543;
                    }
                    for (int64_t i_65648 = 0; i_65648 < n_m_64039; i_65648++) {
                        int64_t min_arg_64547 = mul64(jump_64032, i_65648);
                        int64_t min_res_64548 = smin64(i_64040, min_arg_64547);
                        int64_t defunc_0_g_res_64549 = add64((int64_t) 1,
                                                             min_res_64548);
                        bool nearest_idx_64550;
                        int64_t nearest_idx_64551;
                        int64_t nearest_idx_64552;
                        bool loop_while_64553;
                        int64_t low_64554;
                        int64_t high_64555;
                        
                        loop_while_64553 = x_64041;
                        low_64554 = (int64_t) 0;
                        high_64555 = i_64040;
                        while (loop_while_64553) {
                            int64_t x_64556 = add64(low_64554, high_64555);
                            int64_t mid_64557 = sdiv64(x_64556, (int64_t) 2);
                            bool x_64558 = sle64((int64_t) 0, mid_64557);
                            bool y_64559 = slt64(mid_64557, n_64028);
                            bool bounds_check_64560 = x_64558 && y_64559;
                            bool index_certs_64561;
                            
                            if (!bounds_check_64560) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_64557,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_66323,
                                                   "mem_66323") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66319,
                                                   "mem_66319") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66509,
                                                   "ext_mem_66509") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66517,
                                                   "ext_mem_66517") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66525,
                                                   "ext_mem_66525") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66533,
                                                   "ext_mem_66533") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_64562 =
                                    ((int64_t *) mem_66394)[mid_64557];
                            bool cond_64563 = sle64(defunc_0_g_res_64549,
                                                    x_64562);
                            int64_t loopres_64564;
                            int64_t loopres_64565;
                            
                            if (cond_64563) {
                                int64_t loopres_t_res_64566 = sub64(mid_64557,
                                                                    (int64_t) 1);
                                
                                loopres_64564 = low_64554;
                                loopres_64565 = loopres_t_res_64566;
                            } else {
                                int64_t loopres_f_res_64567 = add64((int64_t) 1,
                                                                    mid_64557);
                                
                                loopres_64564 = loopres_f_res_64567;
                                loopres_64565 = high_64555;
                            }
                            
                            bool loop_cond_64568 = sle64(loopres_64564,
                                                         loopres_64565);
                            bool loop_while_tmp_67421 = loop_cond_64568;
                            int64_t low_tmp_67422 = loopres_64564;
                            int64_t high_tmp_67423 = loopres_64565;
                            
                            loop_while_64553 = loop_while_tmp_67421;
                            low_64554 = low_tmp_67422;
                            high_64555 = high_tmp_67423;
                        }
                        nearest_idx_64550 = loop_while_64553;
                        nearest_idx_64551 = low_64554;
                        nearest_idx_64552 = high_64555;
                        
                        int64_t max_arg_64569 = sub64(nearest_idx_64551,
                                                      min_res_64046);
                        int64_t max_res_64570 = smax64((int64_t) 0,
                                                       max_arg_64569);
                        int64_t j_64571 = add64(min_res_64046, max_res_64570);
                        int64_t i_p_m_t_s_64572 = add64(m_64052, max_res_64570);
                        bool zzero_leq_i_p_m_t_s_64573 = sle64((int64_t) 0,
                                                               i_p_m_t_s_64572);
                        bool i_p_m_t_s_leq_w_64574 = slt64(i_p_m_t_s_64572,
                                                           n_64028);
                        bool zzero_lte_i_64575 = sle64((int64_t) 0,
                                                       max_res_64570);
                        bool i_lte_j_64576 = sle64(max_res_64570, j_64571);
                        bool y_64577 = i_p_m_t_s_leq_w_64574 &&
                             zzero_lte_i_64575;
                        bool y_64578 = zzero_leq_i_p_m_t_s_64573 && y_64577;
                        bool y_64579 = i_lte_j_64576 && y_64578;
                        bool forwards_ok_64580 = zzero_lte_i_64575 && y_64579;
                        bool ok_or_empty_64581 = empty_slice_64051 ||
                             forwards_ok_64580;
                        bool index_certs_64582;
                        
                        if (!ok_or_empty_64581) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_64570,
                                          ":", (long long) j_64571,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66323, "mem_66323") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66319, "mem_66319") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66509,
                                               "ext_mem_66509") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66517,
                                               "ext_mem_66517") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_64584;
                        int64_t redout_65633 = (int64_t) 0;
                        
                        for (int64_t i_65634 = 0; i_65634 < min_res_64046;
                             i_65634++) {
                            int64_t slice_65866 = max_res_64570 + i_65634;
                            int64_t x_64588 =
                                    ((int64_t *) mem_66397)[slice_65866];
                            int64_t abs_arg_64589 = sub64(x_64588,
                                                          defunc_0_g_res_64549);
                            int64_t abs_res_64590 = abs64(abs_arg_64589);
                            int64_t defunc_1_op_res_64587 = add64(abs_res_64590,
                                                                  redout_65633);
                            int64_t redout_tmp_67424 = defunc_1_op_res_64587;
                            
                            redout_65633 = redout_tmp_67424;
                        }
                        defunc_2_reduce_res_64584 = redout_65633;
                        
                        int64_t idx_64591;
                        int64_t idx_64592;
                        int64_t idx_64593;
                        int64_t idx_64594;
                        int64_t best_idx_64596;
                        int64_t last_idx_64597;
                        int64_t best_sum_64598;
                        int64_t curr_sum_64599;
                        
                        best_idx_64596 = max_res_64570;
                        last_idx_64597 = max_res_64570;
                        best_sum_64598 = defunc_2_reduce_res_64584;
                        curr_sum_64599 = defunc_2_reduce_res_64584;
                        for (int64_t j_64595 = 0; j_64595 < min_res_64046;
                             j_64595++) {
                            int64_t new_idx_64600 = add64(max_res_64570,
                                                          j_64595);
                            int64_t x_64601 = add64(min_res_64046,
                                                    new_idx_64600);
                            bool cond_64602 = slt64(last_res_64506, x_64601);
                            int64_t new_sum_64603;
                            
                            if (cond_64602) {
                                new_sum_64603 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_64604 = sle64((int64_t) 0,
                                                     last_idx_64597);
                                bool y_64605 = slt64(last_idx_64597, n_64028);
                                bool bounds_check_64606 = x_64604 && y_64605;
                                bool index_certs_64607;
                                
                                if (!bounds_check_64606) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_64597,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66323,
                                                       "mem_66323") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66319,
                                                       "mem_66319") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66509,
                                                       "ext_mem_66509") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66517,
                                                       "ext_mem_66517") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66525,
                                                       "ext_mem_66525") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66533,
                                                       "ext_mem_66533") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64608 =
                                        ((int64_t *) mem_66397)[last_idx_64597];
                                int64_t binop_p_64609 =
                                        sub64(defunc_0_g_res_64549, y_64608);
                                int64_t defunc_0_f_res_64610 =
                                        abs64(binop_p_64609);
                                int64_t x_64611 = sub64(curr_sum_64599,
                                                        defunc_0_f_res_64610);
                                int64_t min_arg_64612 = add64(min_res_64046,
                                                              last_idx_64597);
                                int64_t min_res_64613 = smin64(i_64040,
                                                               min_arg_64612);
                                bool x_64614 = sle64((int64_t) 0,
                                                     min_res_64613);
                                bool y_64615 = slt64(min_res_64613, n_64028);
                                bool bounds_check_64616 = x_64614 && y_64615;
                                bool index_certs_64617;
                                
                                if (!bounds_check_64616) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_64613,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66323,
                                                       "mem_66323") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66319,
                                                       "mem_66319") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66509,
                                                       "ext_mem_66509") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66517,
                                                       "ext_mem_66517") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66525,
                                                       "ext_mem_66525") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66533,
                                                       "ext_mem_66533") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64618 =
                                        ((int64_t *) mem_66397)[min_res_64613];
                                int64_t binop_p_64619 =
                                        sub64(defunc_0_g_res_64549, y_64618);
                                int64_t defunc_0_f_res_64620 =
                                        abs64(binop_p_64619);
                                int64_t new_sum_f_res_64621 = add64(x_64611,
                                                                    defunc_0_f_res_64620);
                                
                                new_sum_64603 = new_sum_f_res_64621;
                            }
                            
                            bool cond_64622 = sle64(new_sum_64603,
                                                    best_sum_64598);
                            int64_t loopres_64623;
                            
                            if (cond_64622) {
                                loopres_64623 = new_idx_64600;
                            } else {
                                loopres_64623 = best_idx_64596;
                            }
                            
                            int64_t loopres_64624;
                            
                            if (cond_64622) {
                                loopres_64624 = new_sum_64603;
                            } else {
                                loopres_64624 = best_sum_64598;
                            }
                            
                            int64_t best_idx_tmp_67425 = loopres_64623;
                            int64_t last_idx_tmp_67426 = new_idx_64600;
                            int64_t best_sum_tmp_67427 = loopres_64624;
                            int64_t curr_sum_tmp_67428 = new_sum_64603;
                            
                            best_idx_64596 = best_idx_tmp_67425;
                            last_idx_64597 = last_idx_tmp_67426;
                            best_sum_64598 = best_sum_tmp_67427;
                            curr_sum_64599 = curr_sum_tmp_67428;
                        }
                        idx_64591 = best_idx_64596;
                        idx_64592 = last_idx_64597;
                        idx_64593 = best_sum_64598;
                        idx_64594 = curr_sum_64599;
                        
                        int64_t min_res_64625 = smin64(min_arg_64524,
                                                       idx_64591);
                        int64_t x_64626 = add64(min_res_64046, min_res_64625);
                        int64_t r_64627 = sub64(x_64626, (int64_t) 1);
                        bool x_64628 = sle64((int64_t) 0, r_64627);
                        bool y_64629 = slt64(r_64627, n_64028);
                        bool bounds_check_64630 = x_64628 && y_64629;
                        bool index_certs_64631;
                        
                        if (!bounds_check_64630) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_64627,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66323, "mem_66323") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66319, "mem_66319") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66509,
                                               "ext_mem_66509") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66517,
                                               "ext_mem_66517") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64632 = ((int64_t *) mem_66364)[r_64627];
                        int64_t abs_arg_64633 = sub64(x_64632, min_res_64548);
                        int64_t abs_res_64634 = abs64(abs_arg_64633);
                        bool x_64635 = sle64((int64_t) 0, min_res_64625);
                        bool y_64636 = slt64(min_res_64625, n_64028);
                        bool bounds_check_64637 = x_64635 && y_64636;
                        bool index_certs_64638;
                        
                        if (!bounds_check_64637) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_64625,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66323, "mem_66323") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66319, "mem_66319") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66509,
                                               "ext_mem_66509") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66517,
                                               "ext_mem_66517") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66525,
                                               "ext_mem_66525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66533,
                                               "ext_mem_66533") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64639 =
                                ((int64_t *) mem_66364)[min_res_64625];
                        int64_t abs_arg_64640 = sub64(x_64639, min_res_64548);
                        int64_t abs_res_64641 = abs64(abs_arg_64640);
                        int64_t max_res_64642 = smax64(abs_res_64634,
                                                       abs_res_64641);
                        float defunc_0_f_res_64643 =
                              sitofp_i64_f32(max_res_64642);
                        float defunc_1_f_res_64644 = max_res_64528 +
                              defunc_0_f_res_64643;
                        float defunc_0_f_res_64645 =
                              sitofp_i64_f32(min_res_64548);
                        float defunc_2_reduce_res_64646;
                        float defunc_2_reduce_res_64647;
                        float defunc_2_reduce_res_64648;
                        float defunc_2_reduce_res_64649;
                        float defunc_2_reduce_res_64650;
                        float redout_65635;
                        float redout_65636;
                        float redout_65637;
                        float redout_65638;
                        float redout_65639;
                        
                        redout_65635 = 0.0F;
                        redout_65636 = 0.0F;
                        redout_65637 = 0.0F;
                        redout_65638 = 0.0F;
                        redout_65639 = 0.0F;
                        for (int64_t i_65640 = 0; i_65640 < q_64030;
                             i_65640++) {
                            float x_64667 = ((float *) mem_66436)[i_65640];
                            bool cond_64668 = sle64(last_res_64506, i_65640);
                            float defunc_0_f_res_64669;
                            
                            if (cond_64668) {
                                defunc_0_f_res_64669 = 0.0F;
                            } else {
                                int64_t i_64670 = add64(min_res_64625, i_65640);
                                float x_64671 = ((float *) mem_66391)[i_64670];
                                float defunc_0_f_res_f_res_64672 = 1.0F +
                                      x_64671;
                                
                                defunc_0_f_res_64669 =
                                    defunc_0_f_res_f_res_64672;
                            }
                            
                            float x_j_64673 = defunc_0_f_res_64669 -
                                  defunc_0_f_res_64645;
                            float abs_res_64674 = (float) fabs(x_j_64673);
                            float tmp1_64675 = abs_res_64674 /
                                  defunc_1_f_res_64644;
                            float x_64676 = tmp1_64675 * tmp1_64675;
                            float y_64677 = tmp1_64675 * x_64676;
                            float tmp2_64678 = 1.0F - y_64677;
                            float x_64679 = tmp2_64678 * tmp2_64678;
                            float tmp3_64680 = tmp2_64678 * x_64679;
                            float w_j_64681 = x_64667 * tmp3_64680;
                            float xw_j_64682 = x_j_64673 * w_j_64681;
                            float x2w_j_64683 = x_j_64673 * xw_j_64682;
                            float x3w_j_64684 = x_j_64673 * x2w_j_64683;
                            float x4w_j_64685 = x_j_64673 * x3w_j_64684;
                            float defunc_1_op_res_64653 = w_j_64681 +
                                  redout_65635;
                            float defunc_1_op_res_64656 = xw_j_64682 +
                                  redout_65636;
                            float defunc_1_op_res_64659 = x2w_j_64683 +
                                  redout_65637;
                            float defunc_1_op_res_64662 = x3w_j_64684 +
                                  redout_65638;
                            float defunc_1_op_res_64665 = x4w_j_64685 +
                                  redout_65639;
                            float redout_tmp_67429 = defunc_1_op_res_64653;
                            float redout_tmp_67430 = defunc_1_op_res_64656;
                            float redout_tmp_67431 = defunc_1_op_res_64659;
                            float redout_tmp_67432 = defunc_1_op_res_64662;
                            float redout_tmp_67433 = defunc_1_op_res_64665;
                            
                            redout_65635 = redout_tmp_67429;
                            redout_65636 = redout_tmp_67430;
                            redout_65637 = redout_tmp_67431;
                            redout_65638 = redout_tmp_67432;
                            redout_65639 = redout_tmp_67433;
                        }
                        defunc_2_reduce_res_64646 = redout_65635;
                        defunc_2_reduce_res_64647 = redout_65636;
                        defunc_2_reduce_res_64648 = redout_65637;
                        defunc_2_reduce_res_64649 = redout_65638;
                        defunc_2_reduce_res_64650 = redout_65639;
                        
                        float x_64686 = defunc_2_reduce_res_64648 *
                              defunc_2_reduce_res_64650;
                        float y_64687 = defunc_2_reduce_res_64649 *
                              defunc_2_reduce_res_64649;
                        float a12_64688 = x_64686 - y_64687;
                        float x_64689 = defunc_2_reduce_res_64648 *
                              defunc_2_reduce_res_64649;
                        float y_64690 = defunc_2_reduce_res_64647 *
                              defunc_2_reduce_res_64650;
                        float b12_64691 = x_64689 - y_64690;
                        float x_64692 = defunc_2_reduce_res_64647 *
                              defunc_2_reduce_res_64649;
                        float y_64693 = defunc_2_reduce_res_64648 *
                              defunc_2_reduce_res_64648;
                        float c12_64694 = x_64692 - y_64693;
                        float x_64695 = defunc_2_reduce_res_64646 *
                              defunc_2_reduce_res_64650;
                        float b2_64696 = x_64695 - y_64693;
                        float x_64697 = defunc_2_reduce_res_64647 *
                              defunc_2_reduce_res_64648;
                        float y_64698 = defunc_2_reduce_res_64646 *
                              defunc_2_reduce_res_64649;
                        float c2_64699 = x_64697 - y_64698;
                        float x_64700 = defunc_2_reduce_res_64646 * a12_64688;
                        float y_64701 = defunc_2_reduce_res_64647 * b12_64691;
                        float x_64702 = x_64700 + y_64701;
                        float y_64703 = defunc_2_reduce_res_64648 * c12_64694;
                        float y_64704 = x_64702 + y_64703;
                        float det_64705 = 1.0F / y_64704;
                        float a12_64706 = a12_64688 * det_64705;
                        float b12_64707 = b12_64691 * det_64705;
                        float c12_64708 = c12_64694 * det_64705;
                        float b2_64709 = b2_64696 * det_64705;
                        float c2_64710 = c2_64699 * det_64705;
                        float defunc_2_reduce_res_64711;
                        float defunc_2_reduce_res_64712;
                        float redout_65641;
                        float redout_65642;
                        
                        redout_65641 = 0.0F;
                        redout_65642 = 0.0F;
                        for (int64_t i_65643 = 0; i_65643 < q_64030;
                             i_65643++) {
                            float x_64720 = ((float *) mem_66436)[i_65643];
                            bool cond_64721 = sle64(last_res_64506, i_65643);
                            float defunc_0_f_res_64722;
                            
                            if (cond_64721) {
                                defunc_0_f_res_64722 = 0.0F;
                            } else {
                                int64_t i_64723 = add64(min_res_64625, i_65643);
                                float x_64724 = ((float *) mem_66391)[i_64723];
                                float defunc_0_f_res_f_res_64725 = 1.0F +
                                      x_64724;
                                
                                defunc_0_f_res_64722 =
                                    defunc_0_f_res_f_res_64725;
                            }
                            
                            float x_j_64726 = defunc_0_f_res_64722 -
                                  defunc_0_f_res_64645;
                            float abs_res_64727 = (float) fabs(x_j_64726);
                            float tmp1_64728 = abs_res_64727 /
                                  defunc_1_f_res_64644;
                            float x_64729 = tmp1_64728 * tmp1_64728;
                            float y_64730 = tmp1_64728 * x_64729;
                            float tmp2_64731 = 1.0F - y_64730;
                            float x_64732 = tmp2_64731 * tmp2_64731;
                            float tmp3_64733 = tmp2_64731 * x_64732;
                            float tmp4_64734 = x_64720 * tmp3_64733;
                            float defunc_1_f_res_64735 = x_j_64726 * tmp4_64734;
                            float defunc_1_f_res_64736 = x_j_64726 *
                                  defunc_1_f_res_64735;
                            float defunc_0_f_res_64737;
                            
                            if (cond_64721) {
                                defunc_0_f_res_64737 = 0.0F;
                            } else {
                                int64_t i_64738 = add64(min_res_64625, i_65643);
                                float x_64739 = ((float *) mem_66361)[i_64738];
                                
                                defunc_0_f_res_64737 = x_64739;
                            }
                            
                            float x_64740 = a12_64706 * tmp4_64734;
                            float y_64741 = b12_64707 * defunc_1_f_res_64735;
                            float x_64742 = x_64740 + y_64741;
                            float y_64743 = c12_64708 * defunc_1_f_res_64736;
                            float x_64744 = x_64742 + y_64743;
                            float defunc_9_fit_fun_res_64745 =
                                  defunc_0_f_res_64737 * x_64744;
                            float x_64746 = b12_64707 * tmp4_64734;
                            float y_64747 = b2_64709 * defunc_1_f_res_64735;
                            float x_64748 = x_64746 + y_64747;
                            float y_64749 = c2_64710 * defunc_1_f_res_64736;
                            float x_64750 = x_64748 + y_64749;
                            float defunc_9_slope_fun_res_64751 =
                                  defunc_0_f_res_64737 * x_64750;
                            float defunc_1_op_res_64715 =
                                  defunc_9_fit_fun_res_64745 + redout_65641;
                            float defunc_1_op_res_64718 =
                                  defunc_9_slope_fun_res_64751 + redout_65642;
                            float redout_tmp_67434 = defunc_1_op_res_64715;
                            float redout_tmp_67435 = defunc_1_op_res_64718;
                            
                            redout_65641 = redout_tmp_67434;
                            redout_65642 = redout_tmp_67435;
                        }
                        defunc_2_reduce_res_64711 = redout_65641;
                        defunc_2_reduce_res_64712 = redout_65642;
                        ((float *) mem_66319.mem)[i_65655 * n_m_64039 +
                                                  i_65648] =
                            defunc_2_reduce_res_64711;
                        ((float *) mem_66323.mem)[i_65655 * n_m_64039 +
                                                  i_65648] =
                            defunc_2_reduce_res_64712;
                    }
                }
                if (memblock_set(ctx, &ext_mem_66517, &mem_66319,
                                 "mem_66319") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_66509, &mem_66323,
                                 "mem_66323") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66323, "mem_66323") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66319, "mem_66319") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_66533, &ext_mem_66517,
                             "ext_mem_66517") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_66525, &ext_mem_66509,
                             "ext_mem_66509") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_66509, "ext_mem_66509") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_66517, "ext_mem_66517") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_67225, &ext_mem_66533,
                         "ext_mem_66533") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_67217, &ext_mem_66525,
                         "ext_mem_66525") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_66525, "ext_mem_66525") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_66533, "ext_mem_66533") != 0)
            return 1;
    } else {
        bool match_lit_64754 = (int64_t) 0 == degree_64031;
        int64_t binop_x_66542 = m_64027 * n_m_64039;
        int64_t binop_y_66543 = (int64_t) 4 * binop_x_66542;
        int64_t bytes_66541 = smax64((int64_t) 0, binop_y_66543);
        int64_t binop_y_66560 = (int64_t) 8 * n_64028;
        int64_t bytes_66559 = smax64((int64_t) 0, binop_y_66560);
        int64_t binop_y_66575 = (int64_t) 4 * n_64028;
        int64_t bytes_66574 = smax64((int64_t) 0, binop_y_66575);
        int64_t binop_y_66650 = (int64_t) 4 * q_64030;
        int64_t bytes_66649 = smax64((int64_t) 0, binop_y_66650);
        struct memblock ext_mem_67209;
        
        ext_mem_67209.references = NULL;
        
        struct memblock ext_mem_67201;
        
        ext_mem_67201.references = NULL;
        if (match_lit_64754) {
            struct memblock mem_66544;
            
            mem_66544.references = NULL;
            if (memblock_alloc(ctx, &mem_66544, bytes_66541, "mem_66544")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_67436 = 0; i_67436 < m_64027; i_67436++) {
                for (int64_t i_67437 = 0; i_67437 < n_m_64039; i_67437++) {
                    ((float *) mem_66544.mem)[i_67436 * n_m_64039 + i_67437] =
                        0.0F;
                }
            }
            
            struct memblock mem_66548;
            
            mem_66548.references = NULL;
            if (memblock_alloc(ctx, &mem_66548, bytes_66541, "mem_66548")) {
                err = 1;
                goto cleanup;
            }
            if (mem_66561_cached_sizze_67547 < (size_t) bytes_66559) {
                mem_66561 = realloc(mem_66561, bytes_66559);
                mem_66561_cached_sizze_67547 = bytes_66559;
            }
            if (mem_66576_cached_sizze_67548 < (size_t) bytes_66574) {
                mem_66576 = realloc(mem_66576, bytes_66574);
                mem_66576_cached_sizze_67548 = bytes_66574;
            }
            if (mem_66579_cached_sizze_67549 < (size_t) bytes_66559) {
                mem_66579 = realloc(mem_66579, bytes_66559);
                mem_66579_cached_sizze_67549 = bytes_66559;
            }
            if (mem_66606_cached_sizze_67550 < (size_t) bytes_66574) {
                mem_66606 = realloc(mem_66606, bytes_66574);
                mem_66606_cached_sizze_67550 = bytes_66574;
            }
            if (mem_66609_cached_sizze_67551 < (size_t) bytes_66559) {
                mem_66609 = realloc(mem_66609, bytes_66559);
                mem_66609_cached_sizze_67551 = bytes_66559;
            }
            if (mem_66612_cached_sizze_67552 < (size_t) bytes_66559) {
                mem_66612 = realloc(mem_66612, bytes_66559);
                mem_66612_cached_sizze_67552 = bytes_66559;
            }
            if (mem_66651_cached_sizze_67553 < (size_t) bytes_66649) {
                mem_66651 = realloc(mem_66651, bytes_66649);
                mem_66651_cached_sizze_67553 = bytes_66649;
            }
            if (mem_66677_cached_sizze_67554 < (size_t) bytes_66649) {
                mem_66677 = realloc(mem_66677, bytes_66649);
                mem_66677_cached_sizze_67554 = bytes_66649;
            }
            for (int64_t i_65701 = 0; i_65701 < m_64027; i_65701++) {
                int64_t discard_65663;
                int64_t scanacc_65659 = (int64_t) 0;
                
                for (int64_t i_65661 = 0; i_65661 < n_64028; i_65661++) {
                    float x_64765 = ((float *) Y_mem_65969.mem)[i_65701 *
                                                                n_64028 +
                                                                i_65661];
                    bool isnan_res_64766;
                    
                    isnan_res_64766 = futrts_isnan32(x_64765);
                    
                    bool defunc_0_p_res_64767 = !isnan_res_64766;
                    int64_t defunc_0_f_res_64768 =
                            btoi_bool_i64(defunc_0_p_res_64767);
                    int64_t defunc_1_op_res_64764 = add64(defunc_0_f_res_64768,
                                                          scanacc_65659);
                    
                    ((int64_t *) mem_66561)[i_65661] = defunc_1_op_res_64764;
                    
                    int64_t scanacc_tmp_67439 = defunc_1_op_res_64764;
                    
                    scanacc_65659 = scanacc_tmp_67439;
                }
                discard_65663 = scanacc_65659;
                
                int64_t last_res_64769 = ((int64_t *) mem_66561)[i_64040];
                
                for (int64_t i_67441 = 0; i_67441 < n_64028; i_67441++) {
                    ((float *) mem_66576)[i_67441] = 0.0F;
                }
                for (int64_t i_67442 = 0; i_67442 < n_64028; i_67442++) {
                    ((int64_t *) mem_66579)[i_67442] = (int64_t) -1;
                }
                for (int64_t write_iter_65664 = 0; write_iter_65664 < n_64028;
                     write_iter_65664++) {
                    float write_iv_65667 = ((float *) Y_mem_65969.mem)[i_65701 *
                                                                       n_64028 +
                                                                       write_iter_65664];
                    int64_t write_iv_65668 =
                            ((int64_t *) mem_66561)[write_iter_65664];
                    bool isnan_res_64777;
                    
                    isnan_res_64777 = futrts_isnan32(write_iv_65667);
                    
                    bool defunc_0_p_res_64778 = !isnan_res_64777;
                    int64_t defunc_1_f_res_64779;
                    
                    if (defunc_0_p_res_64778) {
                        int64_t defunc_1_f_res_t_res_64780 =
                                sub64(write_iv_65668, (int64_t) 1);
                        
                        defunc_1_f_res_64779 = defunc_1_f_res_t_res_64780;
                    } else {
                        defunc_1_f_res_64779 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64779) &&
                        slt64(defunc_1_f_res_64779, n_64028)) {
                        ((int64_t *) mem_66579)[defunc_1_f_res_64779] =
                            write_iter_65664;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64779) &&
                        slt64(defunc_1_f_res_64779, n_64028)) {
                        memmove(mem_66576 + defunc_1_f_res_64779 * (int64_t) 4,
                                Y_mem_65969.mem + (i_65701 * n_64028 +
                                                   write_iter_65664) *
                                (int64_t) 4, (int64_t) 4);
                    }
                }
                
                int64_t min_arg_64787 = sub64(last_res_64769, min_res_64046);
                float i64_res_64788 = sitofp_i64_f32(last_res_64769);
                float x_64789 = i64_res_64053 - i64_res_64788;
                float max_arg_64790 = x_64789 / 2.0F;
                float max_res_64791 = fmax32(0.0F, max_arg_64790);
                
                for (int64_t i_65678 = 0; i_65678 < n_64028; i_65678++) {
                    int64_t x_64795 = ((int64_t *) mem_66579)[i_65678];
                    int64_t defunc_0_f_res_64796 = add64((int64_t) 1, x_64795);
                    bool cond_64797 = slt64(defunc_0_f_res_64796, (int64_t) 0);
                    int64_t defunc_0_f_res_64798;
                    
                    if (cond_64797) {
                        defunc_0_f_res_64798 = (int64_t) 9223372036854775807;
                    } else {
                        defunc_0_f_res_64798 = defunc_0_f_res_64796;
                    }
                    
                    float defunc_0_f_res_64799 = sitofp_i64_f32(x_64795);
                    
                    ((float *) mem_66606)[i_65678] = defunc_0_f_res_64799;
                    ((int64_t *) mem_66609)[i_65678] = defunc_0_f_res_64798;
                    ((int64_t *) mem_66612)[i_65678] = defunc_0_f_res_64796;
                }
                for (int64_t i_65684 = 0; i_65684 < q_64030; i_65684++) {
                    bool cond_64805 = sle64(last_res_64769, i_65684);
                    float defunc_0_f_res_64806;
                    
                    if (cond_64805) {
                        defunc_0_f_res_64806 = 0.0F;
                    } else {
                        defunc_0_f_res_64806 = 1.0F;
                    }
                    ((float *) mem_66651)[i_65684] = defunc_0_f_res_64806;
                }
                for (int64_t i_65697 = 0; i_65697 < n_m_64039; i_65697++) {
                    int64_t min_arg_64809 = mul64(jump_64032, i_65697);
                    int64_t min_res_64810 = smin64(i_64040, min_arg_64809);
                    int64_t defunc_0_g_res_64811 = add64((int64_t) 1,
                                                         min_res_64810);
                    bool nearest_idx_64812;
                    int64_t nearest_idx_64813;
                    int64_t nearest_idx_64814;
                    bool loop_while_64815;
                    int64_t low_64816;
                    int64_t high_64817;
                    
                    loop_while_64815 = x_64041;
                    low_64816 = (int64_t) 0;
                    high_64817 = i_64040;
                    while (loop_while_64815) {
                        int64_t x_64818 = add64(low_64816, high_64817);
                        int64_t mid_64819 = sdiv64(x_64818, (int64_t) 2);
                        bool x_64820 = sle64((int64_t) 0, mid_64819);
                        bool y_64821 = slt64(mid_64819, n_64028);
                        bool bounds_check_64822 = x_64820 && y_64821;
                        bool index_certs_64823;
                        
                        if (!bounds_check_64822) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) mid_64819,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66548, "mem_66548") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66544, "mem_66544") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64824 = ((int64_t *) mem_66609)[mid_64819];
                        bool cond_64825 = sle64(defunc_0_g_res_64811, x_64824);
                        int64_t loopres_64826;
                        int64_t loopres_64827;
                        
                        if (cond_64825) {
                            int64_t loopres_t_res_64828 = sub64(mid_64819,
                                                                (int64_t) 1);
                            
                            loopres_64826 = low_64816;
                            loopres_64827 = loopres_t_res_64828;
                        } else {
                            int64_t loopres_f_res_64829 = add64((int64_t) 1,
                                                                mid_64819);
                            
                            loopres_64826 = loopres_f_res_64829;
                            loopres_64827 = high_64817;
                        }
                        
                        bool loop_cond_64830 = sle64(loopres_64826,
                                                     loopres_64827);
                        bool loop_while_tmp_67450 = loop_cond_64830;
                        int64_t low_tmp_67451 = loopres_64826;
                        int64_t high_tmp_67452 = loopres_64827;
                        
                        loop_while_64815 = loop_while_tmp_67450;
                        low_64816 = low_tmp_67451;
                        high_64817 = high_tmp_67452;
                    }
                    nearest_idx_64812 = loop_while_64815;
                    nearest_idx_64813 = low_64816;
                    nearest_idx_64814 = high_64817;
                    
                    int64_t max_arg_64831 = sub64(nearest_idx_64813,
                                                  min_res_64046);
                    int64_t max_res_64832 = smax64((int64_t) 0, max_arg_64831);
                    int64_t j_64833 = add64(min_res_64046, max_res_64832);
                    int64_t i_p_m_t_s_64834 = add64(m_64052, max_res_64832);
                    bool zzero_leq_i_p_m_t_s_64835 = sle64((int64_t) 0,
                                                           i_p_m_t_s_64834);
                    bool i_p_m_t_s_leq_w_64836 = slt64(i_p_m_t_s_64834,
                                                       n_64028);
                    bool zzero_lte_i_64837 = sle64((int64_t) 0, max_res_64832);
                    bool i_lte_j_64838 = sle64(max_res_64832, j_64833);
                    bool y_64839 = i_p_m_t_s_leq_w_64836 && zzero_lte_i_64837;
                    bool y_64840 = zzero_leq_i_p_m_t_s_64835 && y_64839;
                    bool y_64841 = i_lte_j_64838 && y_64840;
                    bool forwards_ok_64842 = zzero_lte_i_64837 && y_64841;
                    bool ok_or_empty_64843 = empty_slice_64051 ||
                         forwards_ok_64842;
                    bool index_certs_64844;
                    
                    if (!ok_or_empty_64843) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_64832, ":",
                                      (long long) j_64833,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        if (memblock_unref(ctx, &mem_66548, "mem_66548") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66544, "mem_66544") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67201,
                                           "ext_mem_67201") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67209,
                                           "ext_mem_67209") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67217,
                                           "ext_mem_67217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67225,
                                           "ext_mem_67225") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67355,
                                           "mem_out_67355") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t defunc_2_reduce_res_64846;
                    int64_t redout_65686 = (int64_t) 0;
                    
                    for (int64_t i_65687 = 0; i_65687 < min_res_64046;
                         i_65687++) {
                        int64_t slice_65879 = max_res_64832 + i_65687;
                        int64_t x_64850 = ((int64_t *) mem_66612)[slice_65879];
                        int64_t abs_arg_64851 = sub64(x_64850,
                                                      defunc_0_g_res_64811);
                        int64_t abs_res_64852 = abs64(abs_arg_64851);
                        int64_t defunc_1_op_res_64849 = add64(abs_res_64852,
                                                              redout_65686);
                        int64_t redout_tmp_67453 = defunc_1_op_res_64849;
                        
                        redout_65686 = redout_tmp_67453;
                    }
                    defunc_2_reduce_res_64846 = redout_65686;
                    
                    int64_t idx_64853;
                    int64_t idx_64854;
                    int64_t idx_64855;
                    int64_t idx_64856;
                    int64_t best_idx_64858;
                    int64_t last_idx_64859;
                    int64_t best_sum_64860;
                    int64_t curr_sum_64861;
                    
                    best_idx_64858 = max_res_64832;
                    last_idx_64859 = max_res_64832;
                    best_sum_64860 = defunc_2_reduce_res_64846;
                    curr_sum_64861 = defunc_2_reduce_res_64846;
                    for (int64_t j_64857 = 0; j_64857 < min_res_64046;
                         j_64857++) {
                        int64_t new_idx_64862 = add64(max_res_64832, j_64857);
                        int64_t x_64863 = add64(min_res_64046, new_idx_64862);
                        bool cond_64864 = slt64(last_res_64769, x_64863);
                        int64_t new_sum_64865;
                        
                        if (cond_64864) {
                            new_sum_64865 = (int64_t) 9223372036854775807;
                        } else {
                            bool x_64866 = sle64((int64_t) 0, last_idx_64859);
                            bool y_64867 = slt64(last_idx_64859, n_64028);
                            bool bounds_check_64868 = x_64866 && y_64867;
                            bool index_certs_64869;
                            
                            if (!bounds_check_64868) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) last_idx_64859,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_66548,
                                                   "mem_66548") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66544,
                                                   "mem_66544") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67201,
                                                   "ext_mem_67201") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67209,
                                                   "ext_mem_67209") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64870 =
                                    ((int64_t *) mem_66612)[last_idx_64859];
                            int64_t binop_p_64871 = sub64(defunc_0_g_res_64811,
                                                          y_64870);
                            int64_t defunc_0_f_res_64872 = abs64(binop_p_64871);
                            int64_t x_64873 = sub64(curr_sum_64861,
                                                    defunc_0_f_res_64872);
                            int64_t min_arg_64874 = add64(min_res_64046,
                                                          last_idx_64859);
                            int64_t min_res_64875 = smin64(i_64040,
                                                           min_arg_64874);
                            bool x_64876 = sle64((int64_t) 0, min_res_64875);
                            bool y_64877 = slt64(min_res_64875, n_64028);
                            bool bounds_check_64878 = x_64876 && y_64877;
                            bool index_certs_64879;
                            
                            if (!bounds_check_64878) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_64875,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_66548,
                                                   "mem_66548") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66544,
                                                   "mem_66544") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67201,
                                                   "ext_mem_67201") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67209,
                                                   "ext_mem_67209") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64880 =
                                    ((int64_t *) mem_66612)[min_res_64875];
                            int64_t binop_p_64881 = sub64(defunc_0_g_res_64811,
                                                          y_64880);
                            int64_t defunc_0_f_res_64882 = abs64(binop_p_64881);
                            int64_t new_sum_f_res_64883 = add64(x_64873,
                                                                defunc_0_f_res_64882);
                            
                            new_sum_64865 = new_sum_f_res_64883;
                        }
                        
                        bool cond_64884 = sle64(new_sum_64865, best_sum_64860);
                        int64_t loopres_64885;
                        
                        if (cond_64884) {
                            loopres_64885 = new_idx_64862;
                        } else {
                            loopres_64885 = best_idx_64858;
                        }
                        
                        int64_t loopres_64886;
                        
                        if (cond_64884) {
                            loopres_64886 = new_sum_64865;
                        } else {
                            loopres_64886 = best_sum_64860;
                        }
                        
                        int64_t best_idx_tmp_67454 = loopres_64885;
                        int64_t last_idx_tmp_67455 = new_idx_64862;
                        int64_t best_sum_tmp_67456 = loopres_64886;
                        int64_t curr_sum_tmp_67457 = new_sum_64865;
                        
                        best_idx_64858 = best_idx_tmp_67454;
                        last_idx_64859 = last_idx_tmp_67455;
                        best_sum_64860 = best_sum_tmp_67456;
                        curr_sum_64861 = curr_sum_tmp_67457;
                    }
                    idx_64853 = best_idx_64858;
                    idx_64854 = last_idx_64859;
                    idx_64855 = best_sum_64860;
                    idx_64856 = curr_sum_64861;
                    
                    int64_t min_res_64887 = smin64(min_arg_64787, idx_64853);
                    int64_t x_64888 = add64(min_res_64046, min_res_64887);
                    int64_t r_64889 = sub64(x_64888, (int64_t) 1);
                    bool x_64890 = sle64((int64_t) 0, r_64889);
                    bool y_64891 = slt64(r_64889, n_64028);
                    bool bounds_check_64892 = x_64890 && y_64891;
                    bool index_certs_64893;
                    
                    if (!bounds_check_64892) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) r_64889,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        if (memblock_unref(ctx, &mem_66548, "mem_66548") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66544, "mem_66544") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67201,
                                           "ext_mem_67201") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67209,
                                           "ext_mem_67209") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67217,
                                           "ext_mem_67217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67225,
                                           "ext_mem_67225") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67355,
                                           "mem_out_67355") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64894 = ((int64_t *) mem_66579)[r_64889];
                    int64_t abs_arg_64895 = sub64(x_64894, min_res_64810);
                    int64_t abs_res_64896 = abs64(abs_arg_64895);
                    bool x_64897 = sle64((int64_t) 0, min_res_64887);
                    bool y_64898 = slt64(min_res_64887, n_64028);
                    bool bounds_check_64899 = x_64897 && y_64898;
                    bool index_certs_64900;
                    
                    if (!bounds_check_64899) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_64887,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        if (memblock_unref(ctx, &mem_66548, "mem_66548") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66544, "mem_66544") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67201,
                                           "ext_mem_67201") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67209,
                                           "ext_mem_67209") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67217,
                                           "ext_mem_67217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67225,
                                           "ext_mem_67225") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67355,
                                           "mem_out_67355") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64901 = ((int64_t *) mem_66579)[min_res_64887];
                    int64_t abs_arg_64902 = sub64(x_64901, min_res_64810);
                    int64_t abs_res_64903 = abs64(abs_arg_64902);
                    int64_t max_res_64904 = smax64(abs_res_64896,
                                                   abs_res_64903);
                    float defunc_0_f_res_64905 = sitofp_i64_f32(max_res_64904);
                    float defunc_1_f_res_64906 = max_res_64791 +
                          defunc_0_f_res_64905;
                    float defunc_0_f_res_64907 = sitofp_i64_f32(min_res_64810);
                    float defunc_2_reduce_res_64908;
                    float redout_65689 = 0.0F;
                    
                    for (int64_t i_65691 = 0; i_65691 < q_64030; i_65691++) {
                        float x_64914 = ((float *) mem_66651)[i_65691];
                        bool cond_64915 = sle64(last_res_64769, i_65691);
                        float defunc_0_f_res_64916;
                        
                        if (cond_64915) {
                            defunc_0_f_res_64916 = 0.0F;
                        } else {
                            int64_t i_64917 = add64(min_res_64887, i_65691);
                            float x_64918 = ((float *) mem_66606)[i_64917];
                            float defunc_0_f_res_f_res_64919 = 1.0F + x_64918;
                            
                            defunc_0_f_res_64916 = defunc_0_f_res_f_res_64919;
                        }
                        
                        float x_j_64920 = defunc_0_f_res_64916 -
                              defunc_0_f_res_64907;
                        float abs_res_64921 = (float) fabs(x_j_64920);
                        float tmp1_64922 = abs_res_64921 / defunc_1_f_res_64906;
                        float x_64923 = tmp1_64922 * tmp1_64922;
                        float y_64924 = tmp1_64922 * x_64923;
                        float tmp2_64925 = 1.0F - y_64924;
                        float x_64926 = tmp2_64925 * tmp2_64925;
                        float tmp3_64927 = tmp2_64925 * x_64926;
                        float tmp4_64928 = x_64914 * tmp3_64927;
                        float defunc_1_op_res_64912 = tmp4_64928 + redout_65689;
                        
                        ((float *) mem_66677)[i_65691] = tmp4_64928;
                        
                        float redout_tmp_67458 = defunc_1_op_res_64912;
                        
                        redout_65689 = redout_tmp_67458;
                    }
                    defunc_2_reduce_res_64908 = redout_65689;
                    
                    float a0_64929 = 1.0F / defunc_2_reduce_res_64908;
                    float defunc_2_reduce_res_64930;
                    float redout_65693 = 0.0F;
                    
                    for (int64_t i_65694 = 0; i_65694 < q_64030; i_65694++) {
                        float x_64935 = ((float *) mem_66677)[i_65694];
                        bool cond_64936 = sle64(last_res_64769, i_65694);
                        float defunc_0_f_res_64937;
                        
                        if (cond_64936) {
                            defunc_0_f_res_64937 = 0.0F;
                        } else {
                            int64_t i_64938 = add64(min_res_64887, i_65694);
                            float x_64939 = ((float *) mem_66576)[i_64938];
                            
                            defunc_0_f_res_64937 = x_64939;
                        }
                        
                        float x_64940 = a0_64929 * x_64935;
                        float defunc_9_fit_fun_res_64941 =
                              defunc_0_f_res_64937 * x_64940;
                        float defunc_1_op_res_64933 =
                              defunc_9_fit_fun_res_64941 + redout_65693;
                        float redout_tmp_67460 = defunc_1_op_res_64933;
                        
                        redout_65693 = redout_tmp_67460;
                    }
                    defunc_2_reduce_res_64930 = redout_65693;
                    ((float *) mem_66548.mem)[i_65701 * n_m_64039 + i_65697] =
                        defunc_2_reduce_res_64930;
                }
            }
            if (memblock_set(ctx, &ext_mem_67209, &mem_66548, "mem_66548") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67201, &mem_66544, "mem_66544") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_66548, "mem_66548") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_66544, "mem_66544") != 0)
                return 1;
        } else {
            bool match_lit_64944 = (int64_t) 1 == degree_64031;
            int64_t binop_x_66710 = m_64027 * n_m_64039;
            int64_t binop_y_66711 = (int64_t) 4 * binop_x_66710;
            int64_t bytes_66709 = smax64((int64_t) 0, binop_y_66711);
            int64_t binop_y_66738 = (int64_t) 8 * n_64028;
            int64_t bytes_66737 = smax64((int64_t) 0, binop_y_66738);
            int64_t binop_y_66753 = (int64_t) 4 * n_64028;
            int64_t bytes_66752 = smax64((int64_t) 0, binop_y_66753);
            int64_t binop_y_66828 = (int64_t) 4 * q_64030;
            int64_t bytes_66827 = smax64((int64_t) 0, binop_y_66828);
            int64_t binop_x_66933 = m_64027 * n_m_64039;
            int64_t binop_y_66934 = (int64_t) 4 * binop_x_66933;
            int64_t bytes_66932 = smax64((int64_t) 0, binop_y_66934);
            int64_t binop_y_66961 = (int64_t) 8 * n_64028;
            int64_t bytes_66960 = smax64((int64_t) 0, binop_y_66961);
            int64_t binop_y_66976 = (int64_t) 4 * n_64028;
            int64_t bytes_66975 = smax64((int64_t) 0, binop_y_66976);
            int64_t binop_y_67051 = (int64_t) 4 * q_64030;
            int64_t bytes_67050 = smax64((int64_t) 0, binop_y_67051);
            struct memblock ext_mem_67193;
            
            ext_mem_67193.references = NULL;
            
            struct memblock ext_mem_67185;
            
            ext_mem_67185.references = NULL;
            if (match_lit_64944) {
                struct memblock mem_66712;
                
                mem_66712.references = NULL;
                if (memblock_alloc(ctx, &mem_66712, bytes_66709, "mem_66712")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66716;
                
                mem_66716.references = NULL;
                if (memblock_alloc(ctx, &mem_66716, bytes_66709, "mem_66716")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66739_cached_sizze_67555 < (size_t) bytes_66737) {
                    mem_66739 = realloc(mem_66739, bytes_66737);
                    mem_66739_cached_sizze_67555 = bytes_66737;
                }
                if (mem_66754_cached_sizze_67556 < (size_t) bytes_66752) {
                    mem_66754 = realloc(mem_66754, bytes_66752);
                    mem_66754_cached_sizze_67556 = bytes_66752;
                }
                if (mem_66757_cached_sizze_67557 < (size_t) bytes_66737) {
                    mem_66757 = realloc(mem_66757, bytes_66737);
                    mem_66757_cached_sizze_67557 = bytes_66737;
                }
                if (mem_66784_cached_sizze_67558 < (size_t) bytes_66752) {
                    mem_66784 = realloc(mem_66784, bytes_66752);
                    mem_66784_cached_sizze_67558 = bytes_66752;
                }
                if (mem_66787_cached_sizze_67559 < (size_t) bytes_66737) {
                    mem_66787 = realloc(mem_66787, bytes_66737);
                    mem_66787_cached_sizze_67559 = bytes_66737;
                }
                if (mem_66790_cached_sizze_67560 < (size_t) bytes_66737) {
                    mem_66790 = realloc(mem_66790, bytes_66737);
                    mem_66790_cached_sizze_67560 = bytes_66737;
                }
                if (mem_66829_cached_sizze_67561 < (size_t) bytes_66827) {
                    mem_66829 = realloc(mem_66829, bytes_66827);
                    mem_66829_cached_sizze_67561 = bytes_66827;
                }
                if (mem_66866_cached_sizze_67562 < (size_t) bytes_66827) {
                    mem_66866 = realloc(mem_66866, bytes_66827);
                    mem_66866_cached_sizze_67562 = bytes_66827;
                }
                if (mem_66869_cached_sizze_67563 < (size_t) bytes_66827) {
                    mem_66869 = realloc(mem_66869, bytes_66827);
                    mem_66869_cached_sizze_67563 = bytes_66827;
                }
                for (int64_t i_65757 = 0; i_65757 < m_64027; i_65757++) {
                    int64_t discard_65708;
                    int64_t scanacc_65704 = (int64_t) 0;
                    
                    for (int64_t i_65706 = 0; i_65706 < n_64028; i_65706++) {
                        float x_64955 = ((float *) Y_mem_65969.mem)[i_65757 *
                                                                    n_64028 +
                                                                    i_65706];
                        bool isnan_res_64956;
                        
                        isnan_res_64956 = futrts_isnan32(x_64955);
                        
                        bool defunc_0_p_res_64957 = !isnan_res_64956;
                        int64_t defunc_0_f_res_64958 =
                                btoi_bool_i64(defunc_0_p_res_64957);
                        int64_t defunc_1_op_res_64954 =
                                add64(defunc_0_f_res_64958, scanacc_65704);
                        
                        ((int64_t *) mem_66739)[i_65706] =
                            defunc_1_op_res_64954;
                        
                        int64_t scanacc_tmp_67463 = defunc_1_op_res_64954;
                        
                        scanacc_65704 = scanacc_tmp_67463;
                    }
                    discard_65708 = scanacc_65704;
                    
                    int64_t last_res_64959 = ((int64_t *) mem_66739)[i_64040];
                    
                    for (int64_t i_67465 = 0; i_67465 < n_64028; i_67465++) {
                        ((float *) mem_66754)[i_67465] = 0.0F;
                    }
                    for (int64_t i_67466 = 0; i_67466 < n_64028; i_67466++) {
                        ((int64_t *) mem_66757)[i_67466] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65709 = 0; write_iter_65709 <
                         n_64028; write_iter_65709++) {
                        float write_iv_65712 =
                              ((float *) Y_mem_65969.mem)[i_65757 * n_64028 +
                                                          write_iter_65709];
                        int64_t write_iv_65713 =
                                ((int64_t *) mem_66739)[write_iter_65709];
                        bool isnan_res_64967;
                        
                        isnan_res_64967 = futrts_isnan32(write_iv_65712);
                        
                        bool defunc_0_p_res_64968 = !isnan_res_64967;
                        int64_t defunc_1_f_res_64969;
                        
                        if (defunc_0_p_res_64968) {
                            int64_t defunc_1_f_res_t_res_64970 =
                                    sub64(write_iv_65713, (int64_t) 1);
                            
                            defunc_1_f_res_64969 = defunc_1_f_res_t_res_64970;
                        } else {
                            defunc_1_f_res_64969 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64969) &&
                            slt64(defunc_1_f_res_64969, n_64028)) {
                            ((int64_t *) mem_66757)[defunc_1_f_res_64969] =
                                write_iter_65709;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64969) &&
                            slt64(defunc_1_f_res_64969, n_64028)) {
                            memmove(mem_66754 + defunc_1_f_res_64969 *
                                    (int64_t) 4, Y_mem_65969.mem + (i_65757 *
                                                                    n_64028 +
                                                                    write_iter_65709) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_64977 = sub64(last_res_64959,
                                                  min_res_64046);
                    float i64_res_64978 = sitofp_i64_f32(last_res_64959);
                    float x_64979 = i64_res_64053 - i64_res_64978;
                    float max_arg_64980 = x_64979 / 2.0F;
                    float max_res_64981 = fmax32(0.0F, max_arg_64980);
                    
                    for (int64_t i_65723 = 0; i_65723 < n_64028; i_65723++) {
                        int64_t x_64985 = ((int64_t *) mem_66757)[i_65723];
                        int64_t defunc_0_f_res_64986 = add64((int64_t) 1,
                                                             x_64985);
                        bool cond_64987 = slt64(defunc_0_f_res_64986,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_64988;
                        
                        if (cond_64987) {
                            defunc_0_f_res_64988 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_64988 = defunc_0_f_res_64986;
                        }
                        
                        float defunc_0_f_res_64989 = sitofp_i64_f32(x_64985);
                        
                        ((float *) mem_66784)[i_65723] = defunc_0_f_res_64989;
                        ((int64_t *) mem_66787)[i_65723] = defunc_0_f_res_64988;
                        ((int64_t *) mem_66790)[i_65723] = defunc_0_f_res_64986;
                    }
                    for (int64_t i_65729 = 0; i_65729 < q_64030; i_65729++) {
                        bool cond_64995 = sle64(last_res_64959, i_65729);
                        float defunc_0_f_res_64996;
                        
                        if (cond_64995) {
                            defunc_0_f_res_64996 = 0.0F;
                        } else {
                            defunc_0_f_res_64996 = 1.0F;
                        }
                        ((float *) mem_66829)[i_65729] = defunc_0_f_res_64996;
                    }
                    for (int64_t i_65750 = 0; i_65750 < n_m_64039; i_65750++) {
                        int64_t min_arg_65000 = mul64(jump_64032, i_65750);
                        int64_t min_res_65001 = smin64(i_64040, min_arg_65000);
                        int64_t defunc_0_g_res_65002 = add64((int64_t) 1,
                                                             min_res_65001);
                        bool nearest_idx_65003;
                        int64_t nearest_idx_65004;
                        int64_t nearest_idx_65005;
                        bool loop_while_65006;
                        int64_t low_65007;
                        int64_t high_65008;
                        
                        loop_while_65006 = x_64041;
                        low_65007 = (int64_t) 0;
                        high_65008 = i_64040;
                        while (loop_while_65006) {
                            int64_t x_65009 = add64(low_65007, high_65008);
                            int64_t mid_65010 = sdiv64(x_65009, (int64_t) 2);
                            bool x_65011 = sle64((int64_t) 0, mid_65010);
                            bool y_65012 = slt64(mid_65010, n_64028);
                            bool bounds_check_65013 = x_65011 && y_65012;
                            bool index_certs_65014;
                            
                            if (!bounds_check_65013) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_65010,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_66716,
                                                   "mem_66716") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66712,
                                                   "mem_66712") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67185,
                                                   "ext_mem_67185") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67193,
                                                   "ext_mem_67193") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67201,
                                                   "ext_mem_67201") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67209,
                                                   "ext_mem_67209") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_65015 =
                                    ((int64_t *) mem_66787)[mid_65010];
                            bool cond_65016 = sle64(defunc_0_g_res_65002,
                                                    x_65015);
                            int64_t loopres_65017;
                            int64_t loopres_65018;
                            
                            if (cond_65016) {
                                int64_t loopres_t_res_65019 = sub64(mid_65010,
                                                                    (int64_t) 1);
                                
                                loopres_65017 = low_65007;
                                loopres_65018 = loopres_t_res_65019;
                            } else {
                                int64_t loopres_f_res_65020 = add64((int64_t) 1,
                                                                    mid_65010);
                                
                                loopres_65017 = loopres_f_res_65020;
                                loopres_65018 = high_65008;
                            }
                            
                            bool loop_cond_65021 = sle64(loopres_65017,
                                                         loopres_65018);
                            bool loop_while_tmp_67475 = loop_cond_65021;
                            int64_t low_tmp_67476 = loopres_65017;
                            int64_t high_tmp_67477 = loopres_65018;
                            
                            loop_while_65006 = loop_while_tmp_67475;
                            low_65007 = low_tmp_67476;
                            high_65008 = high_tmp_67477;
                        }
                        nearest_idx_65003 = loop_while_65006;
                        nearest_idx_65004 = low_65007;
                        nearest_idx_65005 = high_65008;
                        
                        int64_t max_arg_65022 = sub64(nearest_idx_65004,
                                                      min_res_64046);
                        int64_t max_res_65023 = smax64((int64_t) 0,
                                                       max_arg_65022);
                        int64_t j_65024 = add64(min_res_64046, max_res_65023);
                        int64_t i_p_m_t_s_65025 = add64(m_64052, max_res_65023);
                        bool zzero_leq_i_p_m_t_s_65026 = sle64((int64_t) 0,
                                                               i_p_m_t_s_65025);
                        bool i_p_m_t_s_leq_w_65027 = slt64(i_p_m_t_s_65025,
                                                           n_64028);
                        bool zzero_lte_i_65028 = sle64((int64_t) 0,
                                                       max_res_65023);
                        bool i_lte_j_65029 = sle64(max_res_65023, j_65024);
                        bool y_65030 = i_p_m_t_s_leq_w_65027 &&
                             zzero_lte_i_65028;
                        bool y_65031 = zzero_leq_i_p_m_t_s_65026 && y_65030;
                        bool y_65032 = i_lte_j_65029 && y_65031;
                        bool forwards_ok_65033 = zzero_lte_i_65028 && y_65032;
                        bool ok_or_empty_65034 = empty_slice_64051 ||
                             forwards_ok_65033;
                        bool index_certs_65035;
                        
                        if (!ok_or_empty_65034) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_65023,
                                          ":", (long long) j_65024,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66716, "mem_66716") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66712, "mem_66712") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67185,
                                               "ext_mem_67185") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67193,
                                               "ext_mem_67193") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_65037;
                        int64_t redout_65731 = (int64_t) 0;
                        
                        for (int64_t i_65732 = 0; i_65732 < min_res_64046;
                             i_65732++) {
                            int64_t slice_65892 = max_res_65023 + i_65732;
                            int64_t x_65041 =
                                    ((int64_t *) mem_66790)[slice_65892];
                            int64_t abs_arg_65042 = sub64(x_65041,
                                                          defunc_0_g_res_65002);
                            int64_t abs_res_65043 = abs64(abs_arg_65042);
                            int64_t defunc_1_op_res_65040 = add64(abs_res_65043,
                                                                  redout_65731);
                            int64_t redout_tmp_67478 = defunc_1_op_res_65040;
                            
                            redout_65731 = redout_tmp_67478;
                        }
                        defunc_2_reduce_res_65037 = redout_65731;
                        
                        int64_t idx_65044;
                        int64_t idx_65045;
                        int64_t idx_65046;
                        int64_t idx_65047;
                        int64_t best_idx_65049;
                        int64_t last_idx_65050;
                        int64_t best_sum_65051;
                        int64_t curr_sum_65052;
                        
                        best_idx_65049 = max_res_65023;
                        last_idx_65050 = max_res_65023;
                        best_sum_65051 = defunc_2_reduce_res_65037;
                        curr_sum_65052 = defunc_2_reduce_res_65037;
                        for (int64_t j_65048 = 0; j_65048 < min_res_64046;
                             j_65048++) {
                            int64_t new_idx_65053 = add64(max_res_65023,
                                                          j_65048);
                            int64_t x_65054 = add64(min_res_64046,
                                                    new_idx_65053);
                            bool cond_65055 = slt64(last_res_64959, x_65054);
                            int64_t new_sum_65056;
                            
                            if (cond_65055) {
                                new_sum_65056 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_65057 = sle64((int64_t) 0,
                                                     last_idx_65050);
                                bool y_65058 = slt64(last_idx_65050, n_64028);
                                bool bounds_check_65059 = x_65057 && y_65058;
                                bool index_certs_65060;
                                
                                if (!bounds_check_65059) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_65050,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66716,
                                                       "mem_66716") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66712,
                                                       "mem_66712") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67185,
                                                       "ext_mem_67185") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67193,
                                                       "ext_mem_67193") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67201,
                                                       "ext_mem_67201") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67209,
                                                       "ext_mem_67209") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65061 =
                                        ((int64_t *) mem_66790)[last_idx_65050];
                                int64_t binop_p_65062 =
                                        sub64(defunc_0_g_res_65002, y_65061);
                                int64_t defunc_0_f_res_65063 =
                                        abs64(binop_p_65062);
                                int64_t x_65064 = sub64(curr_sum_65052,
                                                        defunc_0_f_res_65063);
                                int64_t min_arg_65065 = add64(min_res_64046,
                                                              last_idx_65050);
                                int64_t min_res_65066 = smin64(i_64040,
                                                               min_arg_65065);
                                bool x_65067 = sle64((int64_t) 0,
                                                     min_res_65066);
                                bool y_65068 = slt64(min_res_65066, n_64028);
                                bool bounds_check_65069 = x_65067 && y_65068;
                                bool index_certs_65070;
                                
                                if (!bounds_check_65069) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_65066,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66716,
                                                       "mem_66716") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66712,
                                                       "mem_66712") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67185,
                                                       "ext_mem_67185") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67193,
                                                       "ext_mem_67193") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67201,
                                                       "ext_mem_67201") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67209,
                                                       "ext_mem_67209") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65071 =
                                        ((int64_t *) mem_66790)[min_res_65066];
                                int64_t binop_p_65072 =
                                        sub64(defunc_0_g_res_65002, y_65071);
                                int64_t defunc_0_f_res_65073 =
                                        abs64(binop_p_65072);
                                int64_t new_sum_f_res_65074 = add64(x_65064,
                                                                    defunc_0_f_res_65073);
                                
                                new_sum_65056 = new_sum_f_res_65074;
                            }
                            
                            bool cond_65075 = sle64(new_sum_65056,
                                                    best_sum_65051);
                            int64_t loopres_65076;
                            
                            if (cond_65075) {
                                loopres_65076 = new_idx_65053;
                            } else {
                                loopres_65076 = best_idx_65049;
                            }
                            
                            int64_t loopres_65077;
                            
                            if (cond_65075) {
                                loopres_65077 = new_sum_65056;
                            } else {
                                loopres_65077 = best_sum_65051;
                            }
                            
                            int64_t best_idx_tmp_67479 = loopres_65076;
                            int64_t last_idx_tmp_67480 = new_idx_65053;
                            int64_t best_sum_tmp_67481 = loopres_65077;
                            int64_t curr_sum_tmp_67482 = new_sum_65056;
                            
                            best_idx_65049 = best_idx_tmp_67479;
                            last_idx_65050 = last_idx_tmp_67480;
                            best_sum_65051 = best_sum_tmp_67481;
                            curr_sum_65052 = curr_sum_tmp_67482;
                        }
                        idx_65044 = best_idx_65049;
                        idx_65045 = last_idx_65050;
                        idx_65046 = best_sum_65051;
                        idx_65047 = curr_sum_65052;
                        
                        int64_t min_res_65078 = smin64(min_arg_64977,
                                                       idx_65044);
                        int64_t x_65079 = add64(min_res_64046, min_res_65078);
                        int64_t r_65080 = sub64(x_65079, (int64_t) 1);
                        bool x_65081 = sle64((int64_t) 0, r_65080);
                        bool y_65082 = slt64(r_65080, n_64028);
                        bool bounds_check_65083 = x_65081 && y_65082;
                        bool index_certs_65084;
                        
                        if (!bounds_check_65083) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_65080,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66716, "mem_66716") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66712, "mem_66712") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67185,
                                               "ext_mem_67185") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67193,
                                               "ext_mem_67193") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65085 = ((int64_t *) mem_66757)[r_65080];
                        int64_t abs_arg_65086 = sub64(x_65085, min_res_65001);
                        int64_t abs_res_65087 = abs64(abs_arg_65086);
                        bool x_65088 = sle64((int64_t) 0, min_res_65078);
                        bool y_65089 = slt64(min_res_65078, n_64028);
                        bool bounds_check_65090 = x_65088 && y_65089;
                        bool index_certs_65091;
                        
                        if (!bounds_check_65090) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_65078,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66716, "mem_66716") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66712, "mem_66712") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67185,
                                               "ext_mem_67185") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67193,
                                               "ext_mem_67193") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65092 =
                                ((int64_t *) mem_66757)[min_res_65078];
                        int64_t abs_arg_65093 = sub64(x_65092, min_res_65001);
                        int64_t abs_res_65094 = abs64(abs_arg_65093);
                        int64_t max_res_65095 = smax64(abs_res_65087,
                                                       abs_res_65094);
                        float defunc_0_f_res_65096 =
                              sitofp_i64_f32(max_res_65095);
                        float defunc_1_f_res_65097 = max_res_64981 +
                              defunc_0_f_res_65096;
                        float defunc_0_f_res_65098 =
                              sitofp_i64_f32(min_res_65001);
                        float defunc_2_reduce_res_65119;
                        float defunc_2_reduce_res_65120;
                        float defunc_2_reduce_res_65121;
                        float redout_65735;
                        float redout_65736;
                        float redout_65737;
                        
                        redout_65735 = 0.0F;
                        redout_65736 = 0.0F;
                        redout_65737 = 0.0F;
                        for (int64_t i_65740 = 0; i_65740 < q_64030;
                             i_65740++) {
                            float x_65134 = ((float *) mem_66829)[i_65740];
                            bool cond_65135 = sle64(last_res_64959, i_65740);
                            float defunc_0_f_res_65136;
                            
                            if (cond_65135) {
                                defunc_0_f_res_65136 = 0.0F;
                            } else {
                                int64_t i_65137 = add64(min_res_65078, i_65740);
                                float x_65138 = ((float *) mem_66784)[i_65137];
                                float defunc_0_f_res_f_res_65139 = 1.0F +
                                      x_65138;
                                
                                defunc_0_f_res_65136 =
                                    defunc_0_f_res_f_res_65139;
                            }
                            
                            float x_j_65140 = defunc_0_f_res_65136 -
                                  defunc_0_f_res_65098;
                            float abs_res_65141 = (float) fabs(x_j_65140);
                            float tmp1_65142 = abs_res_65141 /
                                  defunc_1_f_res_65097;
                            float x_65143 = tmp1_65142 * tmp1_65142;
                            float y_65144 = tmp1_65142 * x_65143;
                            float tmp2_65145 = 1.0F - y_65144;
                            float x_65146 = tmp2_65145 * tmp2_65145;
                            float tmp3_65147 = tmp2_65145 * x_65146;
                            float tmp4_65148 = x_65134 * tmp3_65147;
                            float defunc_1_f_res_65149 = x_j_65140 * tmp4_65148;
                            float defunc_1_f_res_65150 = x_j_65140 *
                                  defunc_1_f_res_65149;
                            float defunc_1_op_res_65126 = tmp4_65148 +
                                  redout_65735;
                            float defunc_1_op_res_65129 = defunc_1_f_res_65149 +
                                  redout_65736;
                            float defunc_1_op_res_65132 = defunc_1_f_res_65150 +
                                  redout_65737;
                            
                            ((float *) mem_66866)[i_65740] =
                                defunc_1_f_res_65149;
                            ((float *) mem_66869)[i_65740] = tmp4_65148;
                            
                            float redout_tmp_67483 = defunc_1_op_res_65126;
                            float redout_tmp_67484 = defunc_1_op_res_65129;
                            float redout_tmp_67485 = defunc_1_op_res_65132;
                            
                            redout_65735 = redout_tmp_67483;
                            redout_65736 = redout_tmp_67484;
                            redout_65737 = redout_tmp_67485;
                        }
                        defunc_2_reduce_res_65119 = redout_65735;
                        defunc_2_reduce_res_65120 = redout_65736;
                        defunc_2_reduce_res_65121 = redout_65737;
                        
                        float x_65156 = defunc_2_reduce_res_65119 *
                              defunc_2_reduce_res_65121;
                        float y_65157 = defunc_2_reduce_res_65120 *
                              defunc_2_reduce_res_65120;
                        float y_65158 = x_65156 - y_65157;
                        float det1_65159 = 1.0F / y_65158;
                        float a11_65160 = defunc_2_reduce_res_65121 *
                              det1_65159;
                        float negate_arg_65161 = defunc_2_reduce_res_65120 *
                              det1_65159;
                        float b11_65162 = 0.0F - negate_arg_65161;
                        float c11_65163 = defunc_2_reduce_res_65119 *
                              det1_65159;
                        float defunc_2_reduce_res_65164;
                        float defunc_2_reduce_res_65165;
                        float redout_65743;
                        float redout_65744;
                        
                        redout_65743 = 0.0F;
                        redout_65744 = 0.0F;
                        for (int64_t i_65745 = 0; i_65745 < q_64030;
                             i_65745++) {
                            float x_65173 = ((float *) mem_66869)[i_65745];
                            float x_65174 = ((float *) mem_66866)[i_65745];
                            bool cond_65175 = sle64(last_res_64959, i_65745);
                            float defunc_0_f_res_65176;
                            
                            if (cond_65175) {
                                defunc_0_f_res_65176 = 0.0F;
                            } else {
                                int64_t i_65177 = add64(min_res_65078, i_65745);
                                float x_65178 = ((float *) mem_66754)[i_65177];
                                
                                defunc_0_f_res_65176 = x_65178;
                            }
                            
                            float x_65179 = a11_65160 * x_65173;
                            float y_65180 = b11_65162 * x_65174;
                            float x_65181 = x_65179 + y_65180;
                            float defunc_9_fit_fun_res_65182 =
                                  defunc_0_f_res_65176 * x_65181;
                            float x_65183 = b11_65162 * x_65173;
                            float y_65184 = c11_65163 * x_65174;
                            float x_65185 = x_65183 + y_65184;
                            float defunc_9_slope_fun_res_65186 =
                                  defunc_0_f_res_65176 * x_65185;
                            float defunc_1_op_res_65168 =
                                  defunc_9_fit_fun_res_65182 + redout_65743;
                            float defunc_1_op_res_65171 =
                                  defunc_9_slope_fun_res_65186 + redout_65744;
                            float redout_tmp_67488 = defunc_1_op_res_65168;
                            float redout_tmp_67489 = defunc_1_op_res_65171;
                            
                            redout_65743 = redout_tmp_67488;
                            redout_65744 = redout_tmp_67489;
                        }
                        defunc_2_reduce_res_65164 = redout_65743;
                        defunc_2_reduce_res_65165 = redout_65744;
                        ((float *) mem_66712.mem)[i_65757 * n_m_64039 +
                                                  i_65750] =
                            defunc_2_reduce_res_65164;
                        ((float *) mem_66716.mem)[i_65757 * n_m_64039 +
                                                  i_65750] =
                            defunc_2_reduce_res_65165;
                    }
                }
                if (memblock_set(ctx, &ext_mem_67193, &mem_66712,
                                 "mem_66712") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67185, &mem_66716,
                                 "mem_66716") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66716, "mem_66716") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66712, "mem_66712") != 0)
                    return 1;
            } else {
                struct memblock mem_66935;
                
                mem_66935.references = NULL;
                if (memblock_alloc(ctx, &mem_66935, bytes_66932, "mem_66935")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66939;
                
                mem_66939.references = NULL;
                if (memblock_alloc(ctx, &mem_66939, bytes_66932, "mem_66939")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66962_cached_sizze_67564 < (size_t) bytes_66960) {
                    mem_66962 = realloc(mem_66962, bytes_66960);
                    mem_66962_cached_sizze_67564 = bytes_66960;
                }
                if (mem_66977_cached_sizze_67565 < (size_t) bytes_66975) {
                    mem_66977 = realloc(mem_66977, bytes_66975);
                    mem_66977_cached_sizze_67565 = bytes_66975;
                }
                if (mem_66980_cached_sizze_67566 < (size_t) bytes_66960) {
                    mem_66980 = realloc(mem_66980, bytes_66960);
                    mem_66980_cached_sizze_67566 = bytes_66960;
                }
                if (mem_67007_cached_sizze_67567 < (size_t) bytes_66975) {
                    mem_67007 = realloc(mem_67007, bytes_66975);
                    mem_67007_cached_sizze_67567 = bytes_66975;
                }
                if (mem_67010_cached_sizze_67568 < (size_t) bytes_66960) {
                    mem_67010 = realloc(mem_67010, bytes_66960);
                    mem_67010_cached_sizze_67568 = bytes_66960;
                }
                if (mem_67013_cached_sizze_67569 < (size_t) bytes_66960) {
                    mem_67013 = realloc(mem_67013, bytes_66960);
                    mem_67013_cached_sizze_67569 = bytes_66960;
                }
                if (mem_67052_cached_sizze_67570 < (size_t) bytes_67050) {
                    mem_67052 = realloc(mem_67052, bytes_67050);
                    mem_67052_cached_sizze_67570 = bytes_67050;
                }
                if (mem_67089_cached_sizze_67571 < (size_t) bytes_67050) {
                    mem_67089 = realloc(mem_67089, bytes_67050);
                    mem_67089_cached_sizze_67571 = bytes_67050;
                }
                if (mem_67092_cached_sizze_67572 < (size_t) bytes_67050) {
                    mem_67092 = realloc(mem_67092, bytes_67050);
                    mem_67092_cached_sizze_67572 = bytes_67050;
                }
                if (mem_67119_cached_sizze_67573 < (size_t) bytes_67050) {
                    mem_67119 = realloc(mem_67119, bytes_67050);
                    mem_67119_cached_sizze_67573 = bytes_67050;
                }
                if (mem_67122_cached_sizze_67574 < (size_t) bytes_67050) {
                    mem_67122 = realloc(mem_67122, bytes_67050);
                    mem_67122_cached_sizze_67574 = bytes_67050;
                }
                for (int64_t i_65823 = 0; i_65823 < m_64027; i_65823++) {
                    int64_t discard_65765;
                    int64_t scanacc_65761 = (int64_t) 0;
                    
                    for (int64_t i_65763 = 0; i_65763 < n_64028; i_65763++) {
                        float x_65197 = ((float *) Y_mem_65969.mem)[i_65823 *
                                                                    n_64028 +
                                                                    i_65763];
                        bool isnan_res_65198;
                        
                        isnan_res_65198 = futrts_isnan32(x_65197);
                        
                        bool defunc_0_p_res_65199 = !isnan_res_65198;
                        int64_t defunc_0_f_res_65200 =
                                btoi_bool_i64(defunc_0_p_res_65199);
                        int64_t defunc_1_op_res_65196 =
                                add64(defunc_0_f_res_65200, scanacc_65761);
                        
                        ((int64_t *) mem_66962)[i_65763] =
                            defunc_1_op_res_65196;
                        
                        int64_t scanacc_tmp_67492 = defunc_1_op_res_65196;
                        
                        scanacc_65761 = scanacc_tmp_67492;
                    }
                    discard_65765 = scanacc_65761;
                    
                    int64_t last_res_65201 = ((int64_t *) mem_66962)[i_64040];
                    
                    for (int64_t i_67494 = 0; i_67494 < n_64028; i_67494++) {
                        ((float *) mem_66977)[i_67494] = 0.0F;
                    }
                    for (int64_t i_67495 = 0; i_67495 < n_64028; i_67495++) {
                        ((int64_t *) mem_66980)[i_67495] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65766 = 0; write_iter_65766 <
                         n_64028; write_iter_65766++) {
                        float write_iv_65769 =
                              ((float *) Y_mem_65969.mem)[i_65823 * n_64028 +
                                                          write_iter_65766];
                        int64_t write_iv_65770 =
                                ((int64_t *) mem_66962)[write_iter_65766];
                        bool isnan_res_65209;
                        
                        isnan_res_65209 = futrts_isnan32(write_iv_65769);
                        
                        bool defunc_0_p_res_65210 = !isnan_res_65209;
                        int64_t defunc_1_f_res_65211;
                        
                        if (defunc_0_p_res_65210) {
                            int64_t defunc_1_f_res_t_res_65212 =
                                    sub64(write_iv_65770, (int64_t) 1);
                            
                            defunc_1_f_res_65211 = defunc_1_f_res_t_res_65212;
                        } else {
                            defunc_1_f_res_65211 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_65211) &&
                            slt64(defunc_1_f_res_65211, n_64028)) {
                            ((int64_t *) mem_66980)[defunc_1_f_res_65211] =
                                write_iter_65766;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_65211) &&
                            slt64(defunc_1_f_res_65211, n_64028)) {
                            memmove(mem_66977 + defunc_1_f_res_65211 *
                                    (int64_t) 4, Y_mem_65969.mem + (i_65823 *
                                                                    n_64028 +
                                                                    write_iter_65766) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_65219 = sub64(last_res_65201,
                                                  min_res_64046);
                    float i64_res_65220 = sitofp_i64_f32(last_res_65201);
                    float x_65221 = i64_res_64053 - i64_res_65220;
                    float max_arg_65222 = x_65221 / 2.0F;
                    float max_res_65223 = fmax32(0.0F, max_arg_65222);
                    
                    for (int64_t i_65780 = 0; i_65780 < n_64028; i_65780++) {
                        int64_t x_65227 = ((int64_t *) mem_66980)[i_65780];
                        int64_t defunc_0_f_res_65228 = add64((int64_t) 1,
                                                             x_65227);
                        bool cond_65229 = slt64(defunc_0_f_res_65228,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_65230;
                        
                        if (cond_65229) {
                            defunc_0_f_res_65230 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_65230 = defunc_0_f_res_65228;
                        }
                        
                        float defunc_0_f_res_65231 = sitofp_i64_f32(x_65227);
                        
                        ((float *) mem_67007)[i_65780] = defunc_0_f_res_65231;
                        ((int64_t *) mem_67010)[i_65780] = defunc_0_f_res_65230;
                        ((int64_t *) mem_67013)[i_65780] = defunc_0_f_res_65228;
                    }
                    for (int64_t i_65786 = 0; i_65786 < q_64030; i_65786++) {
                        bool cond_65237 = sle64(last_res_65201, i_65786);
                        float defunc_0_f_res_65238;
                        
                        if (cond_65237) {
                            defunc_0_f_res_65238 = 0.0F;
                        } else {
                            defunc_0_f_res_65238 = 1.0F;
                        }
                        ((float *) mem_67052)[i_65786] = defunc_0_f_res_65238;
                    }
                    for (int64_t i_65816 = 0; i_65816 < n_m_64039; i_65816++) {
                        int64_t min_arg_65242 = mul64(jump_64032, i_65816);
                        int64_t min_res_65243 = smin64(i_64040, min_arg_65242);
                        int64_t defunc_0_g_res_65244 = add64((int64_t) 1,
                                                             min_res_65243);
                        bool nearest_idx_65245;
                        int64_t nearest_idx_65246;
                        int64_t nearest_idx_65247;
                        bool loop_while_65248;
                        int64_t low_65249;
                        int64_t high_65250;
                        
                        loop_while_65248 = x_64041;
                        low_65249 = (int64_t) 0;
                        high_65250 = i_64040;
                        while (loop_while_65248) {
                            int64_t x_65251 = add64(low_65249, high_65250);
                            int64_t mid_65252 = sdiv64(x_65251, (int64_t) 2);
                            bool x_65253 = sle64((int64_t) 0, mid_65252);
                            bool y_65254 = slt64(mid_65252, n_64028);
                            bool bounds_check_65255 = x_65253 && y_65254;
                            bool index_certs_65256;
                            
                            if (!bounds_check_65255) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_65252,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64028, "].",
                                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                if (memblock_unref(ctx, &mem_66939,
                                                   "mem_66939") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66935,
                                                   "mem_66935") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67185,
                                                   "ext_mem_67185") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67193,
                                                   "ext_mem_67193") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67201,
                                                   "ext_mem_67201") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67209,
                                                   "ext_mem_67209") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67217,
                                                   "ext_mem_67217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67225,
                                                   "ext_mem_67225") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67355,
                                                   "mem_out_67355") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_65257 =
                                    ((int64_t *) mem_67010)[mid_65252];
                            bool cond_65258 = sle64(defunc_0_g_res_65244,
                                                    x_65257);
                            int64_t loopres_65259;
                            int64_t loopres_65260;
                            
                            if (cond_65258) {
                                int64_t loopres_t_res_65261 = sub64(mid_65252,
                                                                    (int64_t) 1);
                                
                                loopres_65259 = low_65249;
                                loopres_65260 = loopres_t_res_65261;
                            } else {
                                int64_t loopres_f_res_65262 = add64((int64_t) 1,
                                                                    mid_65252);
                                
                                loopres_65259 = loopres_f_res_65262;
                                loopres_65260 = high_65250;
                            }
                            
                            bool loop_cond_65263 = sle64(loopres_65259,
                                                         loopres_65260);
                            bool loop_while_tmp_67504 = loop_cond_65263;
                            int64_t low_tmp_67505 = loopres_65259;
                            int64_t high_tmp_67506 = loopres_65260;
                            
                            loop_while_65248 = loop_while_tmp_67504;
                            low_65249 = low_tmp_67505;
                            high_65250 = high_tmp_67506;
                        }
                        nearest_idx_65245 = loop_while_65248;
                        nearest_idx_65246 = low_65249;
                        nearest_idx_65247 = high_65250;
                        
                        int64_t max_arg_65264 = sub64(nearest_idx_65246,
                                                      min_res_64046);
                        int64_t max_res_65265 = smax64((int64_t) 0,
                                                       max_arg_65264);
                        int64_t j_65266 = add64(min_res_64046, max_res_65265);
                        int64_t i_p_m_t_s_65267 = add64(m_64052, max_res_65265);
                        bool zzero_leq_i_p_m_t_s_65268 = sle64((int64_t) 0,
                                                               i_p_m_t_s_65267);
                        bool i_p_m_t_s_leq_w_65269 = slt64(i_p_m_t_s_65267,
                                                           n_64028);
                        bool zzero_lte_i_65270 = sle64((int64_t) 0,
                                                       max_res_65265);
                        bool i_lte_j_65271 = sle64(max_res_65265, j_65266);
                        bool y_65272 = i_p_m_t_s_leq_w_65269 &&
                             zzero_lte_i_65270;
                        bool y_65273 = zzero_leq_i_p_m_t_s_65268 && y_65272;
                        bool y_65274 = i_lte_j_65271 && y_65273;
                        bool forwards_ok_65275 = zzero_lte_i_65270 && y_65274;
                        bool ok_or_empty_65276 = empty_slice_64051 ||
                             forwards_ok_65275;
                        bool index_certs_65277;
                        
                        if (!ok_or_empty_65276) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_65265,
                                          ":", (long long) j_65266,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66939, "mem_66939") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66935, "mem_66935") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67185,
                                               "ext_mem_67185") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67193,
                                               "ext_mem_67193") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_65279;
                        int64_t redout_65788 = (int64_t) 0;
                        
                        for (int64_t i_65789 = 0; i_65789 < min_res_64046;
                             i_65789++) {
                            int64_t slice_65905 = max_res_65265 + i_65789;
                            int64_t x_65283 =
                                    ((int64_t *) mem_67013)[slice_65905];
                            int64_t abs_arg_65284 = sub64(x_65283,
                                                          defunc_0_g_res_65244);
                            int64_t abs_res_65285 = abs64(abs_arg_65284);
                            int64_t defunc_1_op_res_65282 = add64(abs_res_65285,
                                                                  redout_65788);
                            int64_t redout_tmp_67507 = defunc_1_op_res_65282;
                            
                            redout_65788 = redout_tmp_67507;
                        }
                        defunc_2_reduce_res_65279 = redout_65788;
                        
                        int64_t idx_65286;
                        int64_t idx_65287;
                        int64_t idx_65288;
                        int64_t idx_65289;
                        int64_t best_idx_65291;
                        int64_t last_idx_65292;
                        int64_t best_sum_65293;
                        int64_t curr_sum_65294;
                        
                        best_idx_65291 = max_res_65265;
                        last_idx_65292 = max_res_65265;
                        best_sum_65293 = defunc_2_reduce_res_65279;
                        curr_sum_65294 = defunc_2_reduce_res_65279;
                        for (int64_t j_65290 = 0; j_65290 < min_res_64046;
                             j_65290++) {
                            int64_t new_idx_65295 = add64(max_res_65265,
                                                          j_65290);
                            int64_t x_65296 = add64(min_res_64046,
                                                    new_idx_65295);
                            bool cond_65297 = slt64(last_res_65201, x_65296);
                            int64_t new_sum_65298;
                            
                            if (cond_65297) {
                                new_sum_65298 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_65299 = sle64((int64_t) 0,
                                                     last_idx_65292);
                                bool y_65300 = slt64(last_idx_65292, n_64028);
                                bool bounds_check_65301 = x_65299 && y_65300;
                                bool index_certs_65302;
                                
                                if (!bounds_check_65301) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_65292,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66939,
                                                       "mem_66939") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66935,
                                                       "mem_66935") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67185,
                                                       "ext_mem_67185") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67193,
                                                       "ext_mem_67193") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67201,
                                                       "ext_mem_67201") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67209,
                                                       "ext_mem_67209") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65303 =
                                        ((int64_t *) mem_67013)[last_idx_65292];
                                int64_t binop_p_65304 =
                                        sub64(defunc_0_g_res_65244, y_65303);
                                int64_t defunc_0_f_res_65305 =
                                        abs64(binop_p_65304);
                                int64_t x_65306 = sub64(curr_sum_65294,
                                                        defunc_0_f_res_65305);
                                int64_t min_arg_65307 = add64(min_res_64046,
                                                              last_idx_65292);
                                int64_t min_res_65308 = smin64(i_64040,
                                                               min_arg_65307);
                                bool x_65309 = sle64((int64_t) 0,
                                                     min_res_65308);
                                bool y_65310 = slt64(min_res_65308, n_64028);
                                bool bounds_check_65311 = x_65309 && y_65310;
                                bool index_certs_65312;
                                
                                if (!bounds_check_65311) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_65308,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64028, "].",
                                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                                    if (memblock_unref(ctx, &mem_66939,
                                                       "mem_66939") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66935,
                                                       "mem_66935") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67185,
                                                       "ext_mem_67185") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67193,
                                                       "ext_mem_67193") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67201,
                                                       "ext_mem_67201") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67209,
                                                       "ext_mem_67209") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67217,
                                                       "ext_mem_67217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67225,
                                                       "ext_mem_67225") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67355,
                                                       "mem_out_67355") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65313 =
                                        ((int64_t *) mem_67013)[min_res_65308];
                                int64_t binop_p_65314 =
                                        sub64(defunc_0_g_res_65244, y_65313);
                                int64_t defunc_0_f_res_65315 =
                                        abs64(binop_p_65314);
                                int64_t new_sum_f_res_65316 = add64(x_65306,
                                                                    defunc_0_f_res_65315);
                                
                                new_sum_65298 = new_sum_f_res_65316;
                            }
                            
                            bool cond_65317 = sle64(new_sum_65298,
                                                    best_sum_65293);
                            int64_t loopres_65318;
                            
                            if (cond_65317) {
                                loopres_65318 = new_idx_65295;
                            } else {
                                loopres_65318 = best_idx_65291;
                            }
                            
                            int64_t loopres_65319;
                            
                            if (cond_65317) {
                                loopres_65319 = new_sum_65298;
                            } else {
                                loopres_65319 = best_sum_65293;
                            }
                            
                            int64_t best_idx_tmp_67508 = loopres_65318;
                            int64_t last_idx_tmp_67509 = new_idx_65295;
                            int64_t best_sum_tmp_67510 = loopres_65319;
                            int64_t curr_sum_tmp_67511 = new_sum_65298;
                            
                            best_idx_65291 = best_idx_tmp_67508;
                            last_idx_65292 = last_idx_tmp_67509;
                            best_sum_65293 = best_sum_tmp_67510;
                            curr_sum_65294 = curr_sum_tmp_67511;
                        }
                        idx_65286 = best_idx_65291;
                        idx_65287 = last_idx_65292;
                        idx_65288 = best_sum_65293;
                        idx_65289 = curr_sum_65294;
                        
                        int64_t min_res_65320 = smin64(min_arg_65219,
                                                       idx_65286);
                        int64_t x_65321 = add64(min_res_64046, min_res_65320);
                        int64_t r_65322 = sub64(x_65321, (int64_t) 1);
                        bool x_65323 = sle64((int64_t) 0, r_65322);
                        bool y_65324 = slt64(r_65322, n_64028);
                        bool bounds_check_65325 = x_65323 && y_65324;
                        bool index_certs_65326;
                        
                        if (!bounds_check_65325) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_65322,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66939, "mem_66939") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66935, "mem_66935") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67185,
                                               "ext_mem_67185") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67193,
                                               "ext_mem_67193") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65327 = ((int64_t *) mem_66980)[r_65322];
                        int64_t abs_arg_65328 = sub64(x_65327, min_res_65243);
                        int64_t abs_res_65329 = abs64(abs_arg_65328);
                        bool x_65330 = sle64((int64_t) 0, min_res_65320);
                        bool y_65331 = slt64(min_res_65320, n_64028);
                        bool bounds_check_65332 = x_65330 && y_65331;
                        bool index_certs_65333;
                        
                        if (!bounds_check_65332) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_65320,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64028, "].",
                                          "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                            if (memblock_unref(ctx, &mem_66939, "mem_66939") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66935, "mem_66935") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67185,
                                               "ext_mem_67185") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67193,
                                               "ext_mem_67193") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67201,
                                               "ext_mem_67201") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67209,
                                               "ext_mem_67209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67217,
                                               "ext_mem_67217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67225,
                                               "ext_mem_67225") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67355,
                                               "mem_out_67355") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65334 =
                                ((int64_t *) mem_66980)[min_res_65320];
                        int64_t abs_arg_65335 = sub64(x_65334, min_res_65243);
                        int64_t abs_res_65336 = abs64(abs_arg_65335);
                        int64_t max_res_65337 = smax64(abs_res_65329,
                                                       abs_res_65336);
                        float defunc_0_f_res_65338 =
                              sitofp_i64_f32(max_res_65337);
                        float defunc_1_f_res_65339 = max_res_65223 +
                              defunc_0_f_res_65338;
                        float defunc_0_f_res_65340 =
                              sitofp_i64_f32(min_res_65243);
                        
                        for (int64_t i_65794 = 0; i_65794 < q_64030;
                             i_65794++) {
                            float x_65344 = ((float *) mem_67052)[i_65794];
                            bool cond_65345 = sle64(last_res_65201, i_65794);
                            float defunc_0_f_res_65346;
                            
                            if (cond_65345) {
                                defunc_0_f_res_65346 = 0.0F;
                            } else {
                                int64_t i_65347 = add64(min_res_65320, i_65794);
                                float x_65348 = ((float *) mem_67007)[i_65347];
                                float defunc_0_f_res_f_res_65349 = 1.0F +
                                      x_65348;
                                
                                defunc_0_f_res_65346 =
                                    defunc_0_f_res_f_res_65349;
                            }
                            
                            float x_j_65350 = defunc_0_f_res_65346 -
                                  defunc_0_f_res_65340;
                            float abs_res_65351 = (float) fabs(x_j_65350);
                            float tmp1_65352 = abs_res_65351 /
                                  defunc_1_f_res_65339;
                            float x_65353 = tmp1_65352 * tmp1_65352;
                            float y_65354 = tmp1_65352 * x_65353;
                            float tmp2_65355 = 1.0F - y_65354;
                            float x_65356 = tmp2_65355 * tmp2_65355;
                            float tmp3_65357 = tmp2_65355 * x_65356;
                            float tmp4_65358 = x_65344 * tmp3_65357;
                            
                            ((float *) mem_67089)[i_65794] = x_j_65350;
                            ((float *) mem_67092)[i_65794] = tmp4_65358;
                        }
                        
                        float defunc_2_reduce_res_65365;
                        float defunc_2_reduce_res_65366;
                        float defunc_2_reduce_res_65367;
                        float defunc_2_reduce_res_65368;
                        float defunc_2_reduce_res_65369;
                        float redout_65799;
                        float redout_65800;
                        float redout_65801;
                        float redout_65802;
                        float redout_65803;
                        
                        redout_65799 = 0.0F;
                        redout_65800 = 0.0F;
                        redout_65801 = 0.0F;
                        redout_65802 = 0.0F;
                        redout_65803 = 0.0F;
                        for (int64_t i_65806 = 0; i_65806 < q_64030;
                             i_65806++) {
                            float x_65387 = ((float *) mem_67089)[i_65806];
                            float x_65388 = ((float *) mem_67092)[i_65806];
                            float defunc_1_f_res_65389 = x_65387 * x_65388;
                            float defunc_1_f_res_65390 = x_65387 *
                                  defunc_1_f_res_65389;
                            float defunc_1_f_res_65391 = x_65387 *
                                  defunc_1_f_res_65390;
                            float defunc_1_f_res_65392 = x_65387 *
                                  defunc_1_f_res_65391;
                            float defunc_1_op_res_65374 = x_65388 +
                                  redout_65799;
                            float defunc_1_op_res_65377 = defunc_1_f_res_65389 +
                                  redout_65800;
                            float defunc_1_op_res_65380 = defunc_1_f_res_65390 +
                                  redout_65801;
                            float defunc_1_op_res_65383 = defunc_1_f_res_65391 +
                                  redout_65802;
                            float defunc_1_op_res_65386 = defunc_1_f_res_65392 +
                                  redout_65803;
                            
                            ((float *) mem_67119)[i_65806] =
                                defunc_1_f_res_65390;
                            ((float *) mem_67122)[i_65806] =
                                defunc_1_f_res_65389;
                            
                            float redout_tmp_67514 = defunc_1_op_res_65374;
                            float redout_tmp_67515 = defunc_1_op_res_65377;
                            float redout_tmp_67516 = defunc_1_op_res_65380;
                            float redout_tmp_67517 = defunc_1_op_res_65383;
                            float redout_tmp_67518 = defunc_1_op_res_65386;
                            
                            redout_65799 = redout_tmp_67514;
                            redout_65800 = redout_tmp_67515;
                            redout_65801 = redout_tmp_67516;
                            redout_65802 = redout_tmp_67517;
                            redout_65803 = redout_tmp_67518;
                        }
                        defunc_2_reduce_res_65365 = redout_65799;
                        defunc_2_reduce_res_65366 = redout_65800;
                        defunc_2_reduce_res_65367 = redout_65801;
                        defunc_2_reduce_res_65368 = redout_65802;
                        defunc_2_reduce_res_65369 = redout_65803;
                        
                        float x_65400 = defunc_2_reduce_res_65367 *
                              defunc_2_reduce_res_65369;
                        float y_65401 = defunc_2_reduce_res_65368 *
                              defunc_2_reduce_res_65368;
                        float a12_65402 = x_65400 - y_65401;
                        float x_65403 = defunc_2_reduce_res_65367 *
                              defunc_2_reduce_res_65368;
                        float y_65404 = defunc_2_reduce_res_65366 *
                              defunc_2_reduce_res_65369;
                        float b12_65405 = x_65403 - y_65404;
                        float x_65406 = defunc_2_reduce_res_65366 *
                              defunc_2_reduce_res_65368;
                        float y_65407 = defunc_2_reduce_res_65367 *
                              defunc_2_reduce_res_65367;
                        float c12_65408 = x_65406 - y_65407;
                        float x_65409 = defunc_2_reduce_res_65365 *
                              defunc_2_reduce_res_65369;
                        float b2_65410 = x_65409 - y_65407;
                        float x_65411 = defunc_2_reduce_res_65366 *
                              defunc_2_reduce_res_65367;
                        float y_65412 = defunc_2_reduce_res_65365 *
                              defunc_2_reduce_res_65368;
                        float c2_65413 = x_65411 - y_65412;
                        float x_65414 = defunc_2_reduce_res_65365 * a12_65402;
                        float y_65415 = defunc_2_reduce_res_65366 * b12_65405;
                        float x_65416 = x_65414 + y_65415;
                        float y_65417 = defunc_2_reduce_res_65367 * c12_65408;
                        float y_65418 = x_65416 + y_65417;
                        float det_65419 = 1.0F / y_65418;
                        float a12_65420 = a12_65402 * det_65419;
                        float b12_65421 = b12_65405 * det_65419;
                        float c12_65422 = c12_65408 * det_65419;
                        float b2_65423 = b2_65410 * det_65419;
                        float c2_65424 = c2_65413 * det_65419;
                        float defunc_2_reduce_res_65425;
                        float defunc_2_reduce_res_65426;
                        float redout_65809;
                        float redout_65810;
                        
                        redout_65809 = 0.0F;
                        redout_65810 = 0.0F;
                        for (int64_t i_65811 = 0; i_65811 < q_64030;
                             i_65811++) {
                            float x_65434 = ((float *) mem_67092)[i_65811];
                            float x_65435 = ((float *) mem_67122)[i_65811];
                            float x_65436 = ((float *) mem_67119)[i_65811];
                            bool cond_65437 = sle64(last_res_65201, i_65811);
                            float defunc_0_f_res_65438;
                            
                            if (cond_65437) {
                                defunc_0_f_res_65438 = 0.0F;
                            } else {
                                int64_t i_65439 = add64(min_res_65320, i_65811);
                                float x_65440 = ((float *) mem_66977)[i_65439];
                                
                                defunc_0_f_res_65438 = x_65440;
                            }
                            
                            float x_65441 = a12_65420 * x_65434;
                            float y_65442 = b12_65421 * x_65435;
                            float x_65443 = x_65441 + y_65442;
                            float y_65444 = c12_65422 * x_65436;
                            float x_65445 = x_65443 + y_65444;
                            float defunc_9_fit_fun_res_65446 =
                                  defunc_0_f_res_65438 * x_65445;
                            float x_65447 = b12_65421 * x_65434;
                            float y_65448 = b2_65423 * x_65435;
                            float x_65449 = x_65447 + y_65448;
                            float y_65450 = c2_65424 * x_65436;
                            float x_65451 = x_65449 + y_65450;
                            float defunc_9_slope_fun_res_65452 =
                                  defunc_0_f_res_65438 * x_65451;
                            float defunc_1_op_res_65429 =
                                  defunc_9_fit_fun_res_65446 + redout_65809;
                            float defunc_1_op_res_65432 =
                                  defunc_9_slope_fun_res_65452 + redout_65810;
                            float redout_tmp_67521 = defunc_1_op_res_65429;
                            float redout_tmp_67522 = defunc_1_op_res_65432;
                            
                            redout_65809 = redout_tmp_67521;
                            redout_65810 = redout_tmp_67522;
                        }
                        defunc_2_reduce_res_65425 = redout_65809;
                        defunc_2_reduce_res_65426 = redout_65810;
                        ((float *) mem_66935.mem)[i_65823 * n_m_64039 +
                                                  i_65816] =
                            defunc_2_reduce_res_65425;
                        ((float *) mem_66939.mem)[i_65823 * n_m_64039 +
                                                  i_65816] =
                            defunc_2_reduce_res_65426;
                    }
                }
                if (memblock_set(ctx, &ext_mem_67193, &mem_66935,
                                 "mem_66935") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67185, &mem_66939,
                                 "mem_66939") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66939, "mem_66939") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66935, "mem_66935") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_67209, &ext_mem_67193,
                             "ext_mem_67193") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67201, &ext_mem_67185,
                             "ext_mem_67185") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67185, "ext_mem_67185") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67193, "ext_mem_67193") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_67225, &ext_mem_67209,
                         "ext_mem_67209") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_67217, &ext_mem_67201,
                         "ext_mem_67201") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67201, "ext_mem_67201") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67209, "ext_mem_67209") != 0)
            return 1;
    }
    
    bool cond_65455 = slt64((int64_t) 1, jump_64032);
    int64_t binop_x_67234 = m_64027 * n_64028;
    int64_t binop_y_67235 = (int64_t) 4 * binop_x_67234;
    int64_t bytes_67233 = smax64((int64_t) 0, binop_y_67235);
    int64_t ext_67281;
    
    if (cond_65455) {
        ext_67281 = n_64028;
    } else {
        ext_67281 = n_m_64039;
    }
    
    int64_t ext_67280;
    
    if (cond_65455) {
        ext_67280 = n_64028;
    } else {
        ext_67280 = n_m_64039;
    }
    
    struct memblock ext_mem_67277;
    
    ext_mem_67277.references = NULL;
    if (cond_65455) {
        bool nonzzero_cert_65457;
        
        if (!nonzzero_64036) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:415:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
            if (memblock_unref(ctx, &ext_mem_67277, "ext_mem_67277") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67217, "ext_mem_67217") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67225, "ext_mem_67225") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") != 0)
                return 1;
            return 1;
        }
        
        struct memblock mem_67236;
        
        mem_67236.references = NULL;
        if (memblock_alloc(ctx, &mem_67236, bytes_67233, "mem_67236")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_65832 = 0; i_65832 < m_64027; i_65832++) {
            for (int64_t i_65828 = 0; i_65828 < n_64028; i_65828++) {
                int64_t m_v_65463 = sdiv64(i_65828, jump_64032);
                bool cond_65464 = m_v_65463 == x_64038;
                int64_t j_65465;
                
                if (cond_65464) {
                    int64_t j_t_res_65466 = sub64(m_v_65463, (int64_t) 1);
                    
                    j_65465 = j_t_res_65466;
                } else {
                    j_65465 = m_v_65463;
                }
                
                int64_t min_arg_65467 = mul64(jump_64032, j_65465);
                int64_t min_res_65468 = smin64(i_64040, min_arg_65467);
                int64_t defunc_0_m_fun_arg_65469 = add64((int64_t) 1, j_65465);
                int64_t min_arg_65470 = mul64(jump_64032,
                                              defunc_0_m_fun_arg_65469);
                int64_t min_res_65471 = smin64(i_64040, min_arg_65470);
                int64_t i64_arg_65472 = sub64(min_res_65471, min_res_65468);
                float i64_res_65473 = sitofp_i64_f32(i64_arg_65472);
                int64_t i64_arg_65474 = sub64(i_65828, min_res_65468);
                float i64_res_65475 = sitofp_i64_f32(i64_arg_65474);
                float u_65476 = i64_res_65475 / i64_res_65473;
                float u2_65477 = u_65476 * u_65476;
                float u3_65478 = u_65476 * u2_65477;
                float x_65479 = 2.0F * u3_65478;
                float y_65480 = 3.0F * u2_65477;
                float x_65481 = x_65479 - y_65480;
                float x_65482 = 1.0F + x_65481;
                bool x_65483 = sle64((int64_t) 0, j_65465);
                bool y_65484 = slt64(j_65465, n_m_64039);
                bool bounds_check_65485 = x_65483 && y_65484;
                bool index_certs_65486;
                
                if (!bounds_check_65485) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_65465,
                                  "] out of bounds for array of shape [",
                                  (long long) n_m_64039, "].",
                                  "-> #0  loess.fut:423:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
                    if (memblock_unref(ctx, &mem_67236, "mem_67236") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67277, "ext_mem_67277") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67217, "ext_mem_67217") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67225, "ext_mem_67225") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") !=
                        0)
                        return 1;
                    return 1;
                }
                
                float y_65487 = ((float *) ext_mem_67225.mem)[i_65832 *
                                                              n_m_64039 +
                                                              j_65465];
                float x_65488 = x_65482 * y_65487;
                float x_65489 = y_65480 - x_65479;
                bool x_65490 = sle64((int64_t) 0, defunc_0_m_fun_arg_65469);
                bool y_65491 = slt64(defunc_0_m_fun_arg_65469, n_m_64039);
                bool bounds_check_65492 = x_65490 && y_65491;
                bool index_certs_65493;
                
                if (!bounds_check_65492) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [",
                                  (long long) defunc_0_m_fun_arg_65469,
                                  "] out of bounds for array of shape [",
                                  (long long) n_m_64039, "].",
                                  "-> #0  loess.fut:424:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
                    if (memblock_unref(ctx, &mem_67236, "mem_67236") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67277, "ext_mem_67277") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67217, "ext_mem_67217") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67225, "ext_mem_67225") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") !=
                        0)
                        return 1;
                    return 1;
                }
                
                float y_65494 = ((float *) ext_mem_67225.mem)[i_65832 *
                                                              n_m_64039 +
                                                              defunc_0_m_fun_arg_65469];
                float y_65495 = x_65489 * y_65494;
                float x_65496 = x_65488 + y_65495;
                float y_65497 = 2.0F * u2_65477;
                float x_65498 = u3_65478 - y_65497;
                float x_65499 = u_65476 + x_65498;
                float y_65500 = ((float *) ext_mem_67217.mem)[i_65832 *
                                                              n_m_64039 +
                                                              j_65465];
                float x_65501 = x_65499 * y_65500;
                float y_65502 = i64_res_65473 * x_65501;
                float x_65503 = x_65496 + y_65502;
                float x_65504 = u3_65478 - u2_65477;
                float y_65505 = ((float *) ext_mem_67217.mem)[i_65832 *
                                                              n_m_64039 +
                                                              defunc_0_m_fun_arg_65469];
                float x_65506 = x_65504 * y_65505;
                float y_65507 = i64_res_65473 * x_65506;
                float defunc_0_f_res_65508 = x_65503 + y_65507;
                
                ((float *) mem_67236.mem)[i_65832 * n_64028 + i_65828] =
                    defunc_0_f_res_65508;
            }
        }
        if (memblock_set(ctx, &ext_mem_67277, &mem_67236, "mem_67236") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_67236, "mem_67236") != 0)
            return 1;
    } else {
        bool dim_match_65509 = n_64028 == n_m_64039;
        bool empty_or_match_cert_65510;
        
        if (!dim_match_65509) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_64027, ", ", (long long) n_m_64039,
                          ") cannot match shape of type `[",
                          (long long) m_64027, "][", (long long) n_64028,
                          "]f32`.",
                          "-> #0  loess.fut:469:5-26\n   #1  loess.fut:430:1-469:26\n");
            if (memblock_unref(ctx, &ext_mem_67277, "ext_mem_67277") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67217, "ext_mem_67217") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67225, "ext_mem_67225") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_67277, &ext_mem_67225,
                         "ext_mem_67225") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_67217, "ext_mem_67217") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67225, "ext_mem_67225") != 0)
        return 1;
    
    int64_t binop_x_67286 = m_64027 * n_64028;
    int64_t binop_y_67287 = (int64_t) 4 * binop_x_67286;
    int64_t bytes_67285 = smax64((int64_t) 0, binop_y_67287);
    struct memblock mem_67288;
    
    mem_67288.references = NULL;
    if (memblock_alloc(ctx, &mem_67288, bytes_67285, "mem_67288")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_67288.mem + (int64_t) 0, ext_mem_67277.mem + (int64_t) 0,
            m_64027 * n_64028 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_67277, "ext_mem_67277") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_67355, &mem_67288, "mem_67288") != 0)
        return 1;
    (*mem_out_p_67525).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_67525, &mem_out_67355, "mem_out_67355") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_67288, "mem_67288") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67277, "ext_mem_67277") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67217, "ext_mem_67217") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67225, "ext_mem_67225") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_67355, "mem_out_67355") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_65990);
    free(mem_66005);
    free(mem_66008);
    free(mem_66035);
    free(mem_66038);
    free(mem_66041);
    free(mem_66080);
    free(mem_66153);
    free(mem_66168);
    free(mem_66171);
    free(mem_66198);
    free(mem_66201);
    free(mem_66204);
    free(mem_66243);
    free(mem_66346);
    free(mem_66361);
    free(mem_66364);
    free(mem_66391);
    free(mem_66394);
    free(mem_66397);
    free(mem_66436);
    free(mem_66561);
    free(mem_66576);
    free(mem_66579);
    free(mem_66606);
    free(mem_66609);
    free(mem_66612);
    free(mem_66651);
    free(mem_66677);
    free(mem_66739);
    free(mem_66754);
    free(mem_66757);
    free(mem_66784);
    free(mem_66787);
    free(mem_66790);
    free(mem_66829);
    free(mem_66866);
    free(mem_66869);
    free(mem_66962);
    free(mem_66977);
    free(mem_66980);
    free(mem_67007);
    free(mem_67010);
    free(mem_67013);
    free(mem_67052);
    free(mem_67089);
    free(mem_67092);
    free(mem_67119);
    free(mem_67122);
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_65969;
    
    Y_mem_65969.references = NULL;
    
    int64_t m_64027;
    int64_t n_64028;
    int64_t q_64030;
    int64_t degree_64031;
    int64_t jump_64032;
    int64_t jump_threshold_64033;
    int64_t q_threshold_64034;
    struct memblock mem_out_67355;
    
    mem_out_67355.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    Y_mem_65969 = in0->mem;
    m_64027 = in0->shape[0];
    n_64028 = in0->shape[1];
    q_64030 = in1;
    degree_64031 = in2;
    jump_64032 = in3;
    jump_threshold_64033 = in4;
    q_threshold_64034 = in5;
    if (!(m_64027 == in0->shape[0] && n_64028 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_67355, Y_mem_65969, m_64027,
                                n_64028, q_64030, degree_64031, jump_64032,
                                jump_threshold_64033, q_threshold_64034);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_67355;
            (*out0)->shape[0] = m_64027;
            (*out0)->shape[1] = n_64028;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
