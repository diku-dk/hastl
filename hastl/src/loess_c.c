// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous

int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_67566,
                             struct memblock Y_mem_66010, int64_t m_64063,
                             int64_t n_64064, int64_t q_64066,
                             int64_t degree_64067, int64_t jump_64068,
                             int64_t jump_threshold_64069,
                             int64_t q_threshold_64070);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_67566,
                             struct memblock Y_mem_66010, int64_t m_64063,
                             int64_t n_64064, int64_t q_64066,
                             int64_t degree_64067, int64_t jump_64068,
                             int64_t jump_threshold_64069,
                             int64_t q_threshold_64070)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_66031_cached_sizze_67567 = 0;
    char *mem_66031 = NULL;
    size_t mem_66046_cached_sizze_67568 = 0;
    char *mem_66046 = NULL;
    size_t mem_66049_cached_sizze_67569 = 0;
    char *mem_66049 = NULL;
    size_t mem_66076_cached_sizze_67570 = 0;
    char *mem_66076 = NULL;
    size_t mem_66079_cached_sizze_67571 = 0;
    char *mem_66079 = NULL;
    size_t mem_66082_cached_sizze_67572 = 0;
    char *mem_66082 = NULL;
    size_t mem_66121_cached_sizze_67573 = 0;
    char *mem_66121 = NULL;
    size_t mem_66194_cached_sizze_67574 = 0;
    char *mem_66194 = NULL;
    size_t mem_66209_cached_sizze_67575 = 0;
    char *mem_66209 = NULL;
    size_t mem_66212_cached_sizze_67576 = 0;
    char *mem_66212 = NULL;
    size_t mem_66239_cached_sizze_67577 = 0;
    char *mem_66239 = NULL;
    size_t mem_66242_cached_sizze_67578 = 0;
    char *mem_66242 = NULL;
    size_t mem_66245_cached_sizze_67579 = 0;
    char *mem_66245 = NULL;
    size_t mem_66284_cached_sizze_67580 = 0;
    char *mem_66284 = NULL;
    size_t mem_66387_cached_sizze_67581 = 0;
    char *mem_66387 = NULL;
    size_t mem_66402_cached_sizze_67582 = 0;
    char *mem_66402 = NULL;
    size_t mem_66405_cached_sizze_67583 = 0;
    char *mem_66405 = NULL;
    size_t mem_66432_cached_sizze_67584 = 0;
    char *mem_66432 = NULL;
    size_t mem_66435_cached_sizze_67585 = 0;
    char *mem_66435 = NULL;
    size_t mem_66438_cached_sizze_67586 = 0;
    char *mem_66438 = NULL;
    size_t mem_66477_cached_sizze_67587 = 0;
    char *mem_66477 = NULL;
    size_t mem_66602_cached_sizze_67588 = 0;
    char *mem_66602 = NULL;
    size_t mem_66617_cached_sizze_67589 = 0;
    char *mem_66617 = NULL;
    size_t mem_66620_cached_sizze_67590 = 0;
    char *mem_66620 = NULL;
    size_t mem_66647_cached_sizze_67591 = 0;
    char *mem_66647 = NULL;
    size_t mem_66650_cached_sizze_67592 = 0;
    char *mem_66650 = NULL;
    size_t mem_66653_cached_sizze_67593 = 0;
    char *mem_66653 = NULL;
    size_t mem_66692_cached_sizze_67594 = 0;
    char *mem_66692 = NULL;
    size_t mem_66718_cached_sizze_67595 = 0;
    char *mem_66718 = NULL;
    size_t mem_66780_cached_sizze_67596 = 0;
    char *mem_66780 = NULL;
    size_t mem_66795_cached_sizze_67597 = 0;
    char *mem_66795 = NULL;
    size_t mem_66798_cached_sizze_67598 = 0;
    char *mem_66798 = NULL;
    size_t mem_66825_cached_sizze_67599 = 0;
    char *mem_66825 = NULL;
    size_t mem_66828_cached_sizze_67600 = 0;
    char *mem_66828 = NULL;
    size_t mem_66831_cached_sizze_67601 = 0;
    char *mem_66831 = NULL;
    size_t mem_66870_cached_sizze_67602 = 0;
    char *mem_66870 = NULL;
    size_t mem_66907_cached_sizze_67603 = 0;
    char *mem_66907 = NULL;
    size_t mem_66910_cached_sizze_67604 = 0;
    char *mem_66910 = NULL;
    size_t mem_67003_cached_sizze_67605 = 0;
    char *mem_67003 = NULL;
    size_t mem_67018_cached_sizze_67606 = 0;
    char *mem_67018 = NULL;
    size_t mem_67021_cached_sizze_67607 = 0;
    char *mem_67021 = NULL;
    size_t mem_67048_cached_sizze_67608 = 0;
    char *mem_67048 = NULL;
    size_t mem_67051_cached_sizze_67609 = 0;
    char *mem_67051 = NULL;
    size_t mem_67054_cached_sizze_67610 = 0;
    char *mem_67054 = NULL;
    size_t mem_67093_cached_sizze_67611 = 0;
    char *mem_67093 = NULL;
    size_t mem_67130_cached_sizze_67612 = 0;
    char *mem_67130 = NULL;
    size_t mem_67133_cached_sizze_67613 = 0;
    char *mem_67133 = NULL;
    size_t mem_67160_cached_sizze_67614 = 0;
    char *mem_67160 = NULL;
    size_t mem_67163_cached_sizze_67615 = 0;
    char *mem_67163 = NULL;
    struct memblock mem_out_67396;
    
    mem_out_67396.references = NULL;
    
    bool cond_64071 = jump_64068 == (int64_t) 1;
    int64_t n_m_64072;
    
    if (cond_64071) {
        n_m_64072 = n_64064;
    } else {
        bool zzero_64073 = jump_64068 == (int64_t) 0;
        bool nonzzero_64074 = !zzero_64073;
        bool nonzzero_cert_64075;
        
        if (!nonzzero_64074) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:461:38-45\n   #1  loess.fut:454:1-494:26\n");
            if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_64076 = sdiv64(n_64064, jump_64068);
        int64_t n_m_f_res_64077 = add64((int64_t) 1, x_64076);
        
        n_m_64072 = n_m_f_res_64077;
    }
    
    int64_t i_64078 = sub64(n_64064, (int64_t) 1);
    bool x_64079 = sle64((int64_t) 0, i_64078);
    bool y_64080 = slt64(i_64078, n_64064);
    bool bounds_check_64081 = x_64079 && y_64080;
    bool index_certs_64082;
    
    if (!bounds_check_64081) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_64078,
                               "] out of bounds for array of shape [",
                               (long long) n_64064, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  loess.fut:466:5-54\n   #3  loess.fut:454:1-494:26\n");
        if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_64084 = smin64(n_64064, q_64066);
    bool bounds_invalid_upwards_64085 = slt64(n_m_64072, (int64_t) 0);
    bool valid_64086 = !bounds_invalid_upwards_64085;
    bool range_valid_c_64087;
    
    if (!valid_64086) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_64072, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:348:3-389:7\n   #3  loess.fut:424:15-58\n   #4  loess.fut:471:13-56\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:470:5-472:26\n   #8  loess.fut:454:1-494:26\n");
        if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_64089 = min_res_64084 == (int64_t) 0;
    int64_t m_64090 = sub64(min_res_64084, (int64_t) 1);
    float i64_res_64091 = sitofp_i64_f32(q_64066);
    bool cond_64092 = slt64(jump_64068, jump_threshold_64069);
    bool cond_f_res_64093 = slt64(q_threshold_64070, q_64066);
    bool x_64094 = !cond_64092;
    bool y_64095 = cond_f_res_64093 && x_64094;
    bool cond_64096 = cond_64092 || y_64095;
    struct memblock ext_mem_67266;
    
    ext_mem_67266.references = NULL;
    
    struct memblock ext_mem_67258;
    
    ext_mem_67258.references = NULL;
    if (cond_64096) {
        bool match_lit_64099 = (int64_t) 0 == degree_64067;
        int64_t binop_x_66012 = m_64063 * n_m_64072;
        int64_t binop_y_66013 = (int64_t) 4 * binop_x_66012;
        int64_t bytes_66011 = smax64((int64_t) 0, binop_y_66013);
        int64_t binop_y_66030 = (int64_t) 8 * n_64064;
        int64_t bytes_66029 = smax64((int64_t) 0, binop_y_66030);
        int64_t binop_y_66045 = (int64_t) 4 * n_64064;
        int64_t bytes_66044 = smax64((int64_t) 0, binop_y_66045);
        int64_t binop_y_66120 = (int64_t) 4 * q_64066;
        int64_t bytes_66119 = smax64((int64_t) 0, binop_y_66120);
        struct memblock ext_mem_66574;
        
        ext_mem_66574.references = NULL;
        
        struct memblock ext_mem_66566;
        
        ext_mem_66566.references = NULL;
        if (match_lit_64099) {
            struct memblock mem_66014;
            
            mem_66014.references = NULL;
            if (memblock_alloc(ctx, &mem_66014, bytes_66011, "mem_66014")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_67397 = 0; i_67397 < m_64063; i_67397++) {
                for (int64_t i_67398 = 0; i_67398 < n_m_64072; i_67398++) {
                    ((float *) mem_66014.mem)[i_67397 * n_m_64072 + i_67398] =
                        0.0F;
                }
            }
            
            struct memblock mem_66018;
            
            mem_66018.references = NULL;
            if (memblock_alloc(ctx, &mem_66018, bytes_66011, "mem_66018")) {
                err = 1;
                goto cleanup;
            }
            if (mem_66031_cached_sizze_67567 < (size_t) bytes_66029) {
                mem_66031 = realloc(mem_66031, bytes_66029);
                mem_66031_cached_sizze_67567 = bytes_66029;
            }
            if (mem_66046_cached_sizze_67568 < (size_t) bytes_66044) {
                mem_66046 = realloc(mem_66046, bytes_66044);
                mem_66046_cached_sizze_67568 = bytes_66044;
            }
            if (mem_66049_cached_sizze_67569 < (size_t) bytes_66029) {
                mem_66049 = realloc(mem_66049, bytes_66029);
                mem_66049_cached_sizze_67569 = bytes_66029;
            }
            if (mem_66076_cached_sizze_67570 < (size_t) bytes_66044) {
                mem_66076 = realloc(mem_66076, bytes_66044);
                mem_66076_cached_sizze_67570 = bytes_66044;
            }
            if (mem_66079_cached_sizze_67571 < (size_t) bytes_66029) {
                mem_66079 = realloc(mem_66079, bytes_66029);
                mem_66079_cached_sizze_67571 = bytes_66029;
            }
            if (mem_66082_cached_sizze_67572 < (size_t) bytes_66029) {
                mem_66082 = realloc(mem_66082, bytes_66029);
                mem_66082_cached_sizze_67572 = bytes_66029;
            }
            if (mem_66121_cached_sizze_67573 < (size_t) bytes_66119) {
                mem_66121 = realloc(mem_66121, bytes_66119);
                mem_66121_cached_sizze_67573 = bytes_66119;
            }
            for (int64_t i_65593 = 0; i_65593 < m_64063; i_65593++) {
                int64_t discard_65558;
                int64_t scanacc_65554 = (int64_t) 0;
                
                for (int64_t i_65556 = 0; i_65556 < n_64064; i_65556++) {
                    float x_64110 = ((float *) Y_mem_66010.mem)[i_65593 *
                                                                n_64064 +
                                                                i_65556];
                    bool isnan_res_64111;
                    
                    isnan_res_64111 = futrts_isnan32(x_64110);
                    
                    bool defunc_0_p_res_64112 = !isnan_res_64111;
                    int64_t defunc_0_f_res_64113 =
                            btoi_bool_i64(defunc_0_p_res_64112);
                    int64_t defunc_1_op_res_64109 = add64(defunc_0_f_res_64113,
                                                          scanacc_65554);
                    
                    ((int64_t *) mem_66031)[i_65556] = defunc_1_op_res_64109;
                    
                    int64_t scanacc_tmp_67400 = defunc_1_op_res_64109;
                    
                    scanacc_65554 = scanacc_tmp_67400;
                }
                discard_65558 = scanacc_65554;
                
                int64_t last_res_64114 = ((int64_t *) mem_66031)[i_64078];
                
                for (int64_t i_67402 = 0; i_67402 < n_64064; i_67402++) {
                    ((float *) mem_66046)[i_67402] = 0.0F;
                }
                for (int64_t i_67403 = 0; i_67403 < n_64064; i_67403++) {
                    ((int64_t *) mem_66049)[i_67403] = (int64_t) -1;
                }
                for (int64_t write_iter_65559 = 0; write_iter_65559 < n_64064;
                     write_iter_65559++) {
                    float write_iv_65562 = ((float *) Y_mem_66010.mem)[i_65593 *
                                                                       n_64064 +
                                                                       write_iter_65559];
                    int64_t write_iv_65563 =
                            ((int64_t *) mem_66031)[write_iter_65559];
                    bool isnan_res_64122;
                    
                    isnan_res_64122 = futrts_isnan32(write_iv_65562);
                    
                    bool defunc_0_p_res_64123 = !isnan_res_64122;
                    int64_t defunc_1_f_res_64124;
                    
                    if (defunc_0_p_res_64123) {
                        int64_t defunc_1_f_res_t_res_64125 =
                                sub64(write_iv_65563, (int64_t) 1);
                        
                        defunc_1_f_res_64124 = defunc_1_f_res_t_res_64125;
                    } else {
                        defunc_1_f_res_64124 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64124) &&
                        slt64(defunc_1_f_res_64124, n_64064)) {
                        ((int64_t *) mem_66049)[defunc_1_f_res_64124] =
                            write_iter_65559;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64124) &&
                        slt64(defunc_1_f_res_64124, n_64064)) {
                        memmove(mem_66046 + defunc_1_f_res_64124 * (int64_t) 4,
                                Y_mem_66010.mem + (i_65593 * n_64064 +
                                                   write_iter_65559) *
                                (int64_t) 4, (int64_t) 4);
                    }
                }
                
                int64_t min_arg_64132 = sub64(last_res_64114, min_res_64084);
                float i64_res_64133 = sitofp_i64_f32(last_res_64114);
                float x_64134 = i64_res_64091 - i64_res_64133;
                float max_arg_64135 = x_64134 / 2.0F;
                float max_res_64136 = fmax32(0.0F, max_arg_64135);
                
                for (int64_t i_65573 = 0; i_65573 < n_64064; i_65573++) {
                    int64_t x_64140 = ((int64_t *) mem_66049)[i_65573];
                    int64_t defunc_0_f_res_64141 = add64((int64_t) 1, x_64140);
                    bool cond_64142 = slt64(defunc_0_f_res_64141, (int64_t) 0);
                    int64_t defunc_0_f_res_64143;
                    
                    if (cond_64142) {
                        defunc_0_f_res_64143 = (int64_t) 9223372036854775807;
                    } else {
                        defunc_0_f_res_64143 = defunc_0_f_res_64141;
                    }
                    
                    float defunc_0_f_res_64144 = sitofp_i64_f32(x_64140);
                    
                    ((float *) mem_66076)[i_65573] = defunc_0_f_res_64144;
                    ((int64_t *) mem_66079)[i_65573] = defunc_0_f_res_64143;
                    ((int64_t *) mem_66082)[i_65573] = defunc_0_f_res_64141;
                }
                for (int64_t i_65579 = 0; i_65579 < q_64066; i_65579++) {
                    bool cond_64150 = sle64(last_res_64114, i_65579);
                    float defunc_0_f_res_64151;
                    
                    if (cond_64150) {
                        defunc_0_f_res_64151 = 0.0F;
                    } else {
                        defunc_0_f_res_64151 = 1.0F;
                    }
                    ((float *) mem_66121)[i_65579] = defunc_0_f_res_64151;
                }
                for (int64_t i_65589 = 0; i_65589 < n_m_64072; i_65589++) {
                    int64_t min_arg_64154 = mul64(jump_64068, i_65589);
                    int64_t min_res_64155 = smin64(i_64078, min_arg_64154);
                    int64_t defunc_0_g_res_64156 = add64((int64_t) 1,
                                                         min_res_64155);
                    bool nearest_idx_64157;
                    int64_t nearest_idx_64158;
                    int64_t nearest_idx_64159;
                    bool loop_while_64160;
                    int64_t low_64161;
                    int64_t high_64162;
                    
                    loop_while_64160 = x_64079;
                    low_64161 = (int64_t) 0;
                    high_64162 = i_64078;
                    while (loop_while_64160) {
                        int64_t x_64163 = add64(low_64161, high_64162);
                        int64_t mid_64164 = sdiv64(x_64163, (int64_t) 2);
                        bool x_64165 = sle64((int64_t) 0, mid_64164);
                        bool y_64166 = slt64(mid_64164, n_64064);
                        bool bounds_check_64167 = x_64165 && y_64166;
                        bool index_certs_64168;
                        
                        if (!bounds_check_64167) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) mid_64164,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66018, "mem_66018") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66014, "mem_66014") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64169 = ((int64_t *) mem_66079)[mid_64164];
                        bool cond_64170 = sle64(defunc_0_g_res_64156, x_64169);
                        int64_t loopres_64171;
                        int64_t loopres_64172;
                        
                        if (cond_64170) {
                            int64_t loopres_t_res_64173 = sub64(mid_64164,
                                                                (int64_t) 1);
                            
                            loopres_64171 = low_64161;
                            loopres_64172 = loopres_t_res_64173;
                        } else {
                            int64_t loopres_f_res_64174 = add64((int64_t) 1,
                                                                mid_64164);
                            
                            loopres_64171 = loopres_f_res_64174;
                            loopres_64172 = high_64162;
                        }
                        
                        bool loop_cond_64175 = sle64(loopres_64171,
                                                     loopres_64172);
                        bool loop_while_tmp_67411 = loop_cond_64175;
                        int64_t low_tmp_67412 = loopres_64171;
                        int64_t high_tmp_67413 = loopres_64172;
                        
                        loop_while_64160 = loop_while_tmp_67411;
                        low_64161 = low_tmp_67412;
                        high_64162 = high_tmp_67413;
                    }
                    nearest_idx_64157 = loop_while_64160;
                    nearest_idx_64158 = low_64161;
                    nearest_idx_64159 = high_64162;
                    
                    int64_t max_arg_64176 = sub64(nearest_idx_64158,
                                                  min_res_64084);
                    int64_t max_res_64177 = smax64((int64_t) 0, max_arg_64176);
                    int64_t j_64178 = add64(min_res_64084, max_res_64177);
                    int64_t i_p_m_t_s_64179 = add64(m_64090, max_res_64177);
                    bool zzero_leq_i_p_m_t_s_64180 = sle64((int64_t) 0,
                                                           i_p_m_t_s_64179);
                    bool i_p_m_t_s_leq_w_64181 = slt64(i_p_m_t_s_64179,
                                                       n_64064);
                    bool zzero_lte_i_64182 = sle64((int64_t) 0, max_res_64177);
                    bool i_lte_j_64183 = sle64(max_res_64177, j_64178);
                    bool y_64184 = i_p_m_t_s_leq_w_64181 && zzero_lte_i_64182;
                    bool y_64185 = zzero_leq_i_p_m_t_s_64180 && y_64184;
                    bool y_64186 = i_lte_j_64183 && y_64185;
                    bool forwards_ok_64187 = zzero_lte_i_64182 && y_64186;
                    bool ok_or_empty_64188 = empty_slice_64089 ||
                         forwards_ok_64187;
                    bool index_certs_64189;
                    
                    if (!ok_or_empty_64188) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_64177, ":",
                                      (long long) j_64178,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        if (memblock_unref(ctx, &mem_66018, "mem_66018") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66014, "mem_66014") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66566,
                                           "ext_mem_66566") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66574,
                                           "ext_mem_66574") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67258,
                                           "ext_mem_67258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67266,
                                           "ext_mem_67266") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67396,
                                           "mem_out_67396") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t defunc_2_reduce_res_64191;
                    int64_t redout_65581 = (int64_t) 0;
                    
                    for (int64_t i_65582 = 0; i_65582 < min_res_64084;
                         i_65582++) {
                        int64_t slice_65881 = max_res_64177 + i_65582;
                        int64_t x_64195 = ((int64_t *) mem_66082)[slice_65881];
                        int64_t abs_arg_64196 = sub64(x_64195,
                                                      defunc_0_g_res_64156);
                        int64_t abs_res_64197 = abs64(abs_arg_64196);
                        int64_t defunc_1_op_res_64194 = add64(abs_res_64197,
                                                              redout_65581);
                        int64_t redout_tmp_67414 = defunc_1_op_res_64194;
                        
                        redout_65581 = redout_tmp_67414;
                    }
                    defunc_2_reduce_res_64191 = redout_65581;
                    
                    int64_t idx_64198;
                    int64_t idx_64199;
                    int64_t idx_64200;
                    int64_t idx_64201;
                    int64_t best_idx_64203;
                    int64_t last_idx_64204;
                    int64_t best_sum_64205;
                    int64_t curr_sum_64206;
                    
                    best_idx_64203 = max_res_64177;
                    last_idx_64204 = max_res_64177;
                    best_sum_64205 = defunc_2_reduce_res_64191;
                    curr_sum_64206 = defunc_2_reduce_res_64191;
                    for (int64_t j_64202 = 0; j_64202 < min_res_64084;
                         j_64202++) {
                        int64_t new_idx_64207 = add64(max_res_64177, j_64202);
                        int64_t x_64208 = add64(min_res_64084, new_idx_64207);
                        bool cond_64209 = slt64(last_res_64114, x_64208);
                        int64_t new_sum_64210;
                        
                        if (cond_64209) {
                            new_sum_64210 = (int64_t) 9223372036854775807;
                        } else {
                            bool x_64211 = sle64((int64_t) 0, last_idx_64204);
                            bool y_64212 = slt64(last_idx_64204, n_64064);
                            bool bounds_check_64213 = x_64211 && y_64212;
                            bool index_certs_64214;
                            
                            if (!bounds_check_64213) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) last_idx_64204,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66018,
                                                   "mem_66018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66014,
                                                   "mem_66014") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66566,
                                                   "ext_mem_66566") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66574,
                                                   "ext_mem_66574") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64215 =
                                    ((int64_t *) mem_66082)[last_idx_64204];
                            int64_t binop_p_64216 = sub64(defunc_0_g_res_64156,
                                                          y_64215);
                            int64_t defunc_0_f_res_64217 = abs64(binop_p_64216);
                            int64_t x_64218 = sub64(curr_sum_64206,
                                                    defunc_0_f_res_64217);
                            int64_t min_arg_64219 = add64(min_res_64084,
                                                          last_idx_64204);
                            int64_t min_res_64220 = smin64(i_64078,
                                                           min_arg_64219);
                            bool x_64221 = sle64((int64_t) 0, min_res_64220);
                            bool y_64222 = slt64(min_res_64220, n_64064);
                            bool bounds_check_64223 = x_64221 && y_64222;
                            bool index_certs_64224;
                            
                            if (!bounds_check_64223) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_64220,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66018,
                                                   "mem_66018") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66014,
                                                   "mem_66014") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66566,
                                                   "ext_mem_66566") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66574,
                                                   "ext_mem_66574") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64225 =
                                    ((int64_t *) mem_66082)[min_res_64220];
                            int64_t binop_p_64226 = sub64(defunc_0_g_res_64156,
                                                          y_64225);
                            int64_t defunc_0_f_res_64227 = abs64(binop_p_64226);
                            int64_t new_sum_f_res_64228 = add64(x_64218,
                                                                defunc_0_f_res_64227);
                            
                            new_sum_64210 = new_sum_f_res_64228;
                        }
                        
                        bool cond_64229 = sle64(new_sum_64210, best_sum_64205);
                        int64_t loopres_64230;
                        
                        if (cond_64229) {
                            loopres_64230 = new_idx_64207;
                        } else {
                            loopres_64230 = best_idx_64203;
                        }
                        
                        int64_t loopres_64231;
                        
                        if (cond_64229) {
                            loopres_64231 = new_sum_64210;
                        } else {
                            loopres_64231 = best_sum_64205;
                        }
                        
                        int64_t best_idx_tmp_67415 = loopres_64230;
                        int64_t last_idx_tmp_67416 = new_idx_64207;
                        int64_t best_sum_tmp_67417 = loopres_64231;
                        int64_t curr_sum_tmp_67418 = new_sum_64210;
                        
                        best_idx_64203 = best_idx_tmp_67415;
                        last_idx_64204 = last_idx_tmp_67416;
                        best_sum_64205 = best_sum_tmp_67417;
                        curr_sum_64206 = curr_sum_tmp_67418;
                    }
                    idx_64198 = best_idx_64203;
                    idx_64199 = last_idx_64204;
                    idx_64200 = best_sum_64205;
                    idx_64201 = curr_sum_64206;
                    
                    int64_t min_res_64232 = smin64(min_arg_64132, idx_64198);
                    int64_t x_64233 = add64(min_res_64084, min_res_64232);
                    int64_t r_64234 = sub64(x_64233, (int64_t) 1);
                    bool x_64235 = sle64((int64_t) 0, r_64234);
                    bool y_64236 = slt64(r_64234, n_64064);
                    bool bounds_check_64237 = x_64235 && y_64236;
                    bool index_certs_64238;
                    
                    if (!bounds_check_64237) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) r_64234,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        if (memblock_unref(ctx, &mem_66018, "mem_66018") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66014, "mem_66014") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66566,
                                           "ext_mem_66566") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66574,
                                           "ext_mem_66574") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67258,
                                           "ext_mem_67258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67266,
                                           "ext_mem_67266") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67396,
                                           "mem_out_67396") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64239 = ((int64_t *) mem_66049)[r_64234];
                    int64_t abs_arg_64240 = sub64(x_64239, min_res_64155);
                    int64_t abs_res_64241 = abs64(abs_arg_64240);
                    bool x_64242 = sle64((int64_t) 0, min_res_64232);
                    bool y_64243 = slt64(min_res_64232, n_64064);
                    bool bounds_check_64244 = x_64242 && y_64243;
                    bool index_certs_64245;
                    
                    if (!bounds_check_64244) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_64232,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        if (memblock_unref(ctx, &mem_66018, "mem_66018") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66014, "mem_66014") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66566,
                                           "ext_mem_66566") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_66574,
                                           "ext_mem_66574") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67258,
                                           "ext_mem_67258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67266,
                                           "ext_mem_67266") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67396,
                                           "mem_out_67396") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64246 = ((int64_t *) mem_66049)[min_res_64232];
                    int64_t abs_arg_64247 = sub64(x_64246, min_res_64155);
                    int64_t abs_res_64248 = abs64(abs_arg_64247);
                    int64_t max_res_64249 = smax64(abs_res_64241,
                                                   abs_res_64248);
                    float defunc_0_f_res_64250 = sitofp_i64_f32(max_res_64249);
                    float defunc_1_f_res_64251 = max_res_64136 +
                          defunc_0_f_res_64250;
                    float defunc_0_f_res_64252 = sitofp_i64_f32(min_res_64155);
                    float defunc_2_reduce_res_64253;
                    float redout_65583 = 0.0F;
                    
                    for (int64_t i_65584 = 0; i_65584 < q_64066; i_65584++) {
                        float x_64258 = ((float *) mem_66121)[i_65584];
                        bool cond_64259 = sle64(last_res_64114, i_65584);
                        float defunc_0_f_res_64260;
                        
                        if (cond_64259) {
                            defunc_0_f_res_64260 = 0.0F;
                        } else {
                            int64_t i_64261 = add64(min_res_64232, i_65584);
                            float x_64262 = ((float *) mem_66076)[i_64261];
                            float defunc_0_f_res_f_res_64263 = 1.0F + x_64262;
                            
                            defunc_0_f_res_64260 = defunc_0_f_res_f_res_64263;
                        }
                        
                        float x_j_64264 = defunc_0_f_res_64260 -
                              defunc_0_f_res_64252;
                        float abs_res_64265 = (float) fabs(x_j_64264);
                        float tmp1_64266 = abs_res_64265 / defunc_1_f_res_64251;
                        float x_64267 = tmp1_64266 * tmp1_64266;
                        float y_64268 = tmp1_64266 * x_64267;
                        float tmp2_64269 = 1.0F - y_64268;
                        float x_64270 = tmp2_64269 * tmp2_64269;
                        float tmp3_64271 = tmp2_64269 * x_64270;
                        float w_j_64272 = x_64258 * tmp3_64271;
                        float defunc_1_op_res_64256 = w_j_64272 + redout_65583;
                        float redout_tmp_67419 = defunc_1_op_res_64256;
                        
                        redout_65583 = redout_tmp_67419;
                    }
                    defunc_2_reduce_res_64253 = redout_65583;
                    
                    float a0_64273 = 1.0F / defunc_2_reduce_res_64253;
                    float defunc_2_reduce_res_64274;
                    float redout_65585 = 0.0F;
                    
                    for (int64_t i_65586 = 0; i_65586 < q_64066; i_65586++) {
                        float x_64279 = ((float *) mem_66121)[i_65586];
                        bool cond_64280 = sle64(last_res_64114, i_65586);
                        float defunc_0_f_res_64281;
                        
                        if (cond_64280) {
                            defunc_0_f_res_64281 = 0.0F;
                        } else {
                            int64_t i_64282 = add64(min_res_64232, i_65586);
                            float x_64283 = ((float *) mem_66076)[i_64282];
                            float defunc_0_f_res_f_res_64284 = 1.0F + x_64283;
                            
                            defunc_0_f_res_64281 = defunc_0_f_res_f_res_64284;
                        }
                        
                        float x_j_64285 = defunc_0_f_res_64281 -
                              defunc_0_f_res_64252;
                        float abs_res_64286 = (float) fabs(x_j_64285);
                        float tmp1_64287 = abs_res_64286 / defunc_1_f_res_64251;
                        float x_64288 = tmp1_64287 * tmp1_64287;
                        float y_64289 = tmp1_64287 * x_64288;
                        float tmp2_64290 = 1.0F - y_64289;
                        float x_64291 = tmp2_64290 * tmp2_64290;
                        float tmp3_64292 = tmp2_64290 * x_64291;
                        float tmp4_64293 = x_64279 * tmp3_64292;
                        float defunc_0_f_res_64294;
                        
                        if (cond_64280) {
                            defunc_0_f_res_64294 = 0.0F;
                        } else {
                            int64_t i_64295 = add64(min_res_64232, i_65586);
                            float x_64296 = ((float *) mem_66046)[i_64295];
                            
                            defunc_0_f_res_64294 = x_64296;
                        }
                        
                        float x_64297 = a0_64273 * tmp4_64293;
                        float defunc_9_fit_fun_res_64298 =
                              defunc_0_f_res_64294 * x_64297;
                        float defunc_1_op_res_64277 =
                              defunc_9_fit_fun_res_64298 + redout_65585;
                        float redout_tmp_67420 = defunc_1_op_res_64277;
                        
                        redout_65585 = redout_tmp_67420;
                    }
                    defunc_2_reduce_res_64274 = redout_65585;
                    ((float *) mem_66018.mem)[i_65593 * n_m_64072 + i_65589] =
                        defunc_2_reduce_res_64274;
                }
            }
            if (memblock_set(ctx, &ext_mem_66574, &mem_66018, "mem_66018") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_66566, &mem_66014, "mem_66014") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_66018, "mem_66018") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_66014, "mem_66014") != 0)
                return 1;
        } else {
            bool match_lit_64301 = (int64_t) 1 == degree_64067;
            int64_t binop_x_66165 = m_64063 * n_m_64072;
            int64_t binop_y_66166 = (int64_t) 4 * binop_x_66165;
            int64_t bytes_66164 = smax64((int64_t) 0, binop_y_66166);
            int64_t binop_y_66193 = (int64_t) 8 * n_64064;
            int64_t bytes_66192 = smax64((int64_t) 0, binop_y_66193);
            int64_t binop_y_66208 = (int64_t) 4 * n_64064;
            int64_t bytes_66207 = smax64((int64_t) 0, binop_y_66208);
            int64_t binop_y_66283 = (int64_t) 4 * q_64066;
            int64_t bytes_66282 = smax64((int64_t) 0, binop_y_66283);
            int64_t binop_x_66358 = m_64063 * n_m_64072;
            int64_t binop_y_66359 = (int64_t) 4 * binop_x_66358;
            int64_t bytes_66357 = smax64((int64_t) 0, binop_y_66359);
            int64_t binop_y_66386 = (int64_t) 8 * n_64064;
            int64_t bytes_66385 = smax64((int64_t) 0, binop_y_66386);
            int64_t binop_y_66401 = (int64_t) 4 * n_64064;
            int64_t bytes_66400 = smax64((int64_t) 0, binop_y_66401);
            int64_t binop_y_66476 = (int64_t) 4 * q_64066;
            int64_t bytes_66475 = smax64((int64_t) 0, binop_y_66476);
            struct memblock ext_mem_66558;
            
            ext_mem_66558.references = NULL;
            
            struct memblock ext_mem_66550;
            
            ext_mem_66550.references = NULL;
            if (match_lit_64301) {
                struct memblock mem_66167;
                
                mem_66167.references = NULL;
                if (memblock_alloc(ctx, &mem_66167, bytes_66164, "mem_66167")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66171;
                
                mem_66171.references = NULL;
                if (memblock_alloc(ctx, &mem_66171, bytes_66164, "mem_66171")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66194_cached_sizze_67574 < (size_t) bytes_66192) {
                    mem_66194 = realloc(mem_66194, bytes_66192);
                    mem_66194_cached_sizze_67574 = bytes_66192;
                }
                if (mem_66209_cached_sizze_67575 < (size_t) bytes_66207) {
                    mem_66209 = realloc(mem_66209, bytes_66207);
                    mem_66209_cached_sizze_67575 = bytes_66207;
                }
                if (mem_66212_cached_sizze_67576 < (size_t) bytes_66192) {
                    mem_66212 = realloc(mem_66212, bytes_66192);
                    mem_66212_cached_sizze_67576 = bytes_66192;
                }
                if (mem_66239_cached_sizze_67577 < (size_t) bytes_66207) {
                    mem_66239 = realloc(mem_66239, bytes_66207);
                    mem_66239_cached_sizze_67577 = bytes_66207;
                }
                if (mem_66242_cached_sizze_67578 < (size_t) bytes_66192) {
                    mem_66242 = realloc(mem_66242, bytes_66192);
                    mem_66242_cached_sizze_67578 = bytes_66192;
                }
                if (mem_66245_cached_sizze_67579 < (size_t) bytes_66192) {
                    mem_66245 = realloc(mem_66245, bytes_66192);
                    mem_66245_cached_sizze_67579 = bytes_66192;
                }
                if (mem_66284_cached_sizze_67580 < (size_t) bytes_66282) {
                    mem_66284 = realloc(mem_66284, bytes_66282);
                    mem_66284_cached_sizze_67580 = bytes_66282;
                }
                for (int64_t i_65643 = 0; i_65643 < m_64063; i_65643++) {
                    int64_t discard_65600;
                    int64_t scanacc_65596 = (int64_t) 0;
                    
                    for (int64_t i_65598 = 0; i_65598 < n_64064; i_65598++) {
                        float x_64312 = ((float *) Y_mem_66010.mem)[i_65643 *
                                                                    n_64064 +
                                                                    i_65598];
                        bool isnan_res_64313;
                        
                        isnan_res_64313 = futrts_isnan32(x_64312);
                        
                        bool defunc_0_p_res_64314 = !isnan_res_64313;
                        int64_t defunc_0_f_res_64315 =
                                btoi_bool_i64(defunc_0_p_res_64314);
                        int64_t defunc_1_op_res_64311 =
                                add64(defunc_0_f_res_64315, scanacc_65596);
                        
                        ((int64_t *) mem_66194)[i_65598] =
                            defunc_1_op_res_64311;
                        
                        int64_t scanacc_tmp_67423 = defunc_1_op_res_64311;
                        
                        scanacc_65596 = scanacc_tmp_67423;
                    }
                    discard_65600 = scanacc_65596;
                    
                    int64_t last_res_64316 = ((int64_t *) mem_66194)[i_64078];
                    
                    for (int64_t i_67425 = 0; i_67425 < n_64064; i_67425++) {
                        ((float *) mem_66209)[i_67425] = 0.0F;
                    }
                    for (int64_t i_67426 = 0; i_67426 < n_64064; i_67426++) {
                        ((int64_t *) mem_66212)[i_67426] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65601 = 0; write_iter_65601 <
                         n_64064; write_iter_65601++) {
                        float write_iv_65604 =
                              ((float *) Y_mem_66010.mem)[i_65643 * n_64064 +
                                                          write_iter_65601];
                        int64_t write_iv_65605 =
                                ((int64_t *) mem_66194)[write_iter_65601];
                        bool isnan_res_64324;
                        
                        isnan_res_64324 = futrts_isnan32(write_iv_65604);
                        
                        bool defunc_0_p_res_64325 = !isnan_res_64324;
                        int64_t defunc_1_f_res_64326;
                        
                        if (defunc_0_p_res_64325) {
                            int64_t defunc_1_f_res_t_res_64327 =
                                    sub64(write_iv_65605, (int64_t) 1);
                            
                            defunc_1_f_res_64326 = defunc_1_f_res_t_res_64327;
                        } else {
                            defunc_1_f_res_64326 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64326) &&
                            slt64(defunc_1_f_res_64326, n_64064)) {
                            ((int64_t *) mem_66212)[defunc_1_f_res_64326] =
                                write_iter_65601;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64326) &&
                            slt64(defunc_1_f_res_64326, n_64064)) {
                            memmove(mem_66209 + defunc_1_f_res_64326 *
                                    (int64_t) 4, Y_mem_66010.mem + (i_65643 *
                                                                    n_64064 +
                                                                    write_iter_65601) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_64334 = sub64(last_res_64316,
                                                  min_res_64084);
                    float i64_res_64335 = sitofp_i64_f32(last_res_64316);
                    float x_64336 = i64_res_64091 - i64_res_64335;
                    float max_arg_64337 = x_64336 / 2.0F;
                    float max_res_64338 = fmax32(0.0F, max_arg_64337);
                    
                    for (int64_t i_65615 = 0; i_65615 < n_64064; i_65615++) {
                        int64_t x_64342 = ((int64_t *) mem_66212)[i_65615];
                        int64_t defunc_0_f_res_64343 = add64((int64_t) 1,
                                                             x_64342);
                        bool cond_64344 = slt64(defunc_0_f_res_64343,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_64345;
                        
                        if (cond_64344) {
                            defunc_0_f_res_64345 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_64345 = defunc_0_f_res_64343;
                        }
                        
                        float defunc_0_f_res_64346 = sitofp_i64_f32(x_64342);
                        
                        ((float *) mem_66239)[i_65615] = defunc_0_f_res_64346;
                        ((int64_t *) mem_66242)[i_65615] = defunc_0_f_res_64345;
                        ((int64_t *) mem_66245)[i_65615] = defunc_0_f_res_64343;
                    }
                    for (int64_t i_65621 = 0; i_65621 < q_64066; i_65621++) {
                        bool cond_64352 = sle64(last_res_64316, i_65621);
                        float defunc_0_f_res_64353;
                        
                        if (cond_64352) {
                            defunc_0_f_res_64353 = 0.0F;
                        } else {
                            defunc_0_f_res_64353 = 1.0F;
                        }
                        ((float *) mem_66284)[i_65621] = defunc_0_f_res_64353;
                    }
                    for (int64_t i_65636 = 0; i_65636 < n_m_64072; i_65636++) {
                        int64_t min_arg_64357 = mul64(jump_64068, i_65636);
                        int64_t min_res_64358 = smin64(i_64078, min_arg_64357);
                        int64_t defunc_0_g_res_64359 = add64((int64_t) 1,
                                                             min_res_64358);
                        bool nearest_idx_64360;
                        int64_t nearest_idx_64361;
                        int64_t nearest_idx_64362;
                        bool loop_while_64363;
                        int64_t low_64364;
                        int64_t high_64365;
                        
                        loop_while_64363 = x_64079;
                        low_64364 = (int64_t) 0;
                        high_64365 = i_64078;
                        while (loop_while_64363) {
                            int64_t x_64366 = add64(low_64364, high_64365);
                            int64_t mid_64367 = sdiv64(x_64366, (int64_t) 2);
                            bool x_64368 = sle64((int64_t) 0, mid_64367);
                            bool y_64369 = slt64(mid_64367, n_64064);
                            bool bounds_check_64370 = x_64368 && y_64369;
                            bool index_certs_64371;
                            
                            if (!bounds_check_64370) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_64367,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66171,
                                                   "mem_66171") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66167,
                                                   "mem_66167") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66550,
                                                   "ext_mem_66550") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66558,
                                                   "ext_mem_66558") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66566,
                                                   "ext_mem_66566") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66574,
                                                   "ext_mem_66574") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_64372 =
                                    ((int64_t *) mem_66242)[mid_64367];
                            bool cond_64373 = sle64(defunc_0_g_res_64359,
                                                    x_64372);
                            int64_t loopres_64374;
                            int64_t loopres_64375;
                            
                            if (cond_64373) {
                                int64_t loopres_t_res_64376 = sub64(mid_64367,
                                                                    (int64_t) 1);
                                
                                loopres_64374 = low_64364;
                                loopres_64375 = loopres_t_res_64376;
                            } else {
                                int64_t loopres_f_res_64377 = add64((int64_t) 1,
                                                                    mid_64367);
                                
                                loopres_64374 = loopres_f_res_64377;
                                loopres_64375 = high_64365;
                            }
                            
                            bool loop_cond_64378 = sle64(loopres_64374,
                                                         loopres_64375);
                            bool loop_while_tmp_67435 = loop_cond_64378;
                            int64_t low_tmp_67436 = loopres_64374;
                            int64_t high_tmp_67437 = loopres_64375;
                            
                            loop_while_64363 = loop_while_tmp_67435;
                            low_64364 = low_tmp_67436;
                            high_64365 = high_tmp_67437;
                        }
                        nearest_idx_64360 = loop_while_64363;
                        nearest_idx_64361 = low_64364;
                        nearest_idx_64362 = high_64365;
                        
                        int64_t max_arg_64379 = sub64(nearest_idx_64361,
                                                      min_res_64084);
                        int64_t max_res_64380 = smax64((int64_t) 0,
                                                       max_arg_64379);
                        int64_t j_64381 = add64(min_res_64084, max_res_64380);
                        int64_t i_p_m_t_s_64382 = add64(m_64090, max_res_64380);
                        bool zzero_leq_i_p_m_t_s_64383 = sle64((int64_t) 0,
                                                               i_p_m_t_s_64382);
                        bool i_p_m_t_s_leq_w_64384 = slt64(i_p_m_t_s_64382,
                                                           n_64064);
                        bool zzero_lte_i_64385 = sle64((int64_t) 0,
                                                       max_res_64380);
                        bool i_lte_j_64386 = sle64(max_res_64380, j_64381);
                        bool y_64387 = i_p_m_t_s_leq_w_64384 &&
                             zzero_lte_i_64385;
                        bool y_64388 = zzero_leq_i_p_m_t_s_64383 && y_64387;
                        bool y_64389 = i_lte_j_64386 && y_64388;
                        bool forwards_ok_64390 = zzero_lte_i_64385 && y_64389;
                        bool ok_or_empty_64391 = empty_slice_64089 ||
                             forwards_ok_64390;
                        bool index_certs_64392;
                        
                        if (!ok_or_empty_64391) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_64380,
                                          ":", (long long) j_64381,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66171, "mem_66171") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66167, "mem_66167") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66550,
                                               "ext_mem_66550") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66558,
                                               "ext_mem_66558") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_64394;
                        int64_t redout_65623 = (int64_t) 0;
                        
                        for (int64_t i_65624 = 0; i_65624 < min_res_64084;
                             i_65624++) {
                            int64_t slice_65894 = max_res_64380 + i_65624;
                            int64_t x_64398 =
                                    ((int64_t *) mem_66245)[slice_65894];
                            int64_t abs_arg_64399 = sub64(x_64398,
                                                          defunc_0_g_res_64359);
                            int64_t abs_res_64400 = abs64(abs_arg_64399);
                            int64_t defunc_1_op_res_64397 = add64(abs_res_64400,
                                                                  redout_65623);
                            int64_t redout_tmp_67438 = defunc_1_op_res_64397;
                            
                            redout_65623 = redout_tmp_67438;
                        }
                        defunc_2_reduce_res_64394 = redout_65623;
                        
                        int64_t idx_64401;
                        int64_t idx_64402;
                        int64_t idx_64403;
                        int64_t idx_64404;
                        int64_t best_idx_64406;
                        int64_t last_idx_64407;
                        int64_t best_sum_64408;
                        int64_t curr_sum_64409;
                        
                        best_idx_64406 = max_res_64380;
                        last_idx_64407 = max_res_64380;
                        best_sum_64408 = defunc_2_reduce_res_64394;
                        curr_sum_64409 = defunc_2_reduce_res_64394;
                        for (int64_t j_64405 = 0; j_64405 < min_res_64084;
                             j_64405++) {
                            int64_t new_idx_64410 = add64(max_res_64380,
                                                          j_64405);
                            int64_t x_64411 = add64(min_res_64084,
                                                    new_idx_64410);
                            bool cond_64412 = slt64(last_res_64316, x_64411);
                            int64_t new_sum_64413;
                            
                            if (cond_64412) {
                                new_sum_64413 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_64414 = sle64((int64_t) 0,
                                                     last_idx_64407);
                                bool y_64415 = slt64(last_idx_64407, n_64064);
                                bool bounds_check_64416 = x_64414 && y_64415;
                                bool index_certs_64417;
                                
                                if (!bounds_check_64416) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_64407,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66171,
                                                       "mem_66171") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66167,
                                                       "mem_66167") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66550,
                                                       "ext_mem_66550") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66558,
                                                       "ext_mem_66558") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66566,
                                                       "ext_mem_66566") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66574,
                                                       "ext_mem_66574") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64418 =
                                        ((int64_t *) mem_66245)[last_idx_64407];
                                int64_t binop_p_64419 =
                                        sub64(defunc_0_g_res_64359, y_64418);
                                int64_t defunc_0_f_res_64420 =
                                        abs64(binop_p_64419);
                                int64_t x_64421 = sub64(curr_sum_64409,
                                                        defunc_0_f_res_64420);
                                int64_t min_arg_64422 = add64(min_res_64084,
                                                              last_idx_64407);
                                int64_t min_res_64423 = smin64(i_64078,
                                                               min_arg_64422);
                                bool x_64424 = sle64((int64_t) 0,
                                                     min_res_64423);
                                bool y_64425 = slt64(min_res_64423, n_64064);
                                bool bounds_check_64426 = x_64424 && y_64425;
                                bool index_certs_64427;
                                
                                if (!bounds_check_64426) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_64423,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66171,
                                                       "mem_66171") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66167,
                                                       "mem_66167") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66550,
                                                       "ext_mem_66550") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66558,
                                                       "ext_mem_66558") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66566,
                                                       "ext_mem_66566") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66574,
                                                       "ext_mem_66574") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64428 =
                                        ((int64_t *) mem_66245)[min_res_64423];
                                int64_t binop_p_64429 =
                                        sub64(defunc_0_g_res_64359, y_64428);
                                int64_t defunc_0_f_res_64430 =
                                        abs64(binop_p_64429);
                                int64_t new_sum_f_res_64431 = add64(x_64421,
                                                                    defunc_0_f_res_64430);
                                
                                new_sum_64413 = new_sum_f_res_64431;
                            }
                            
                            bool cond_64432 = sle64(new_sum_64413,
                                                    best_sum_64408);
                            int64_t loopres_64433;
                            
                            if (cond_64432) {
                                loopres_64433 = new_idx_64410;
                            } else {
                                loopres_64433 = best_idx_64406;
                            }
                            
                            int64_t loopres_64434;
                            
                            if (cond_64432) {
                                loopres_64434 = new_sum_64413;
                            } else {
                                loopres_64434 = best_sum_64408;
                            }
                            
                            int64_t best_idx_tmp_67439 = loopres_64433;
                            int64_t last_idx_tmp_67440 = new_idx_64410;
                            int64_t best_sum_tmp_67441 = loopres_64434;
                            int64_t curr_sum_tmp_67442 = new_sum_64413;
                            
                            best_idx_64406 = best_idx_tmp_67439;
                            last_idx_64407 = last_idx_tmp_67440;
                            best_sum_64408 = best_sum_tmp_67441;
                            curr_sum_64409 = curr_sum_tmp_67442;
                        }
                        idx_64401 = best_idx_64406;
                        idx_64402 = last_idx_64407;
                        idx_64403 = best_sum_64408;
                        idx_64404 = curr_sum_64409;
                        
                        int64_t min_res_64435 = smin64(min_arg_64334,
                                                       idx_64401);
                        int64_t x_64436 = add64(min_res_64084, min_res_64435);
                        int64_t r_64437 = sub64(x_64436, (int64_t) 1);
                        bool x_64438 = sle64((int64_t) 0, r_64437);
                        bool y_64439 = slt64(r_64437, n_64064);
                        bool bounds_check_64440 = x_64438 && y_64439;
                        bool index_certs_64441;
                        
                        if (!bounds_check_64440) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_64437,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66171, "mem_66171") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66167, "mem_66167") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66550,
                                               "ext_mem_66550") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66558,
                                               "ext_mem_66558") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64442 = ((int64_t *) mem_66212)[r_64437];
                        int64_t abs_arg_64443 = sub64(x_64442, min_res_64358);
                        int64_t abs_res_64444 = abs64(abs_arg_64443);
                        bool x_64445 = sle64((int64_t) 0, min_res_64435);
                        bool y_64446 = slt64(min_res_64435, n_64064);
                        bool bounds_check_64447 = x_64445 && y_64446;
                        bool index_certs_64448;
                        
                        if (!bounds_check_64447) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_64435,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66171, "mem_66171") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66167, "mem_66167") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66550,
                                               "ext_mem_66550") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66558,
                                               "ext_mem_66558") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64449 =
                                ((int64_t *) mem_66212)[min_res_64435];
                        int64_t abs_arg_64450 = sub64(x_64449, min_res_64358);
                        int64_t abs_res_64451 = abs64(abs_arg_64450);
                        int64_t max_res_64452 = smax64(abs_res_64444,
                                                       abs_res_64451);
                        float defunc_0_f_res_64453 =
                              sitofp_i64_f32(max_res_64452);
                        float defunc_1_f_res_64454 = max_res_64338 +
                              defunc_0_f_res_64453;
                        float defunc_0_f_res_64455 =
                              sitofp_i64_f32(min_res_64358);
                        float defunc_2_reduce_res_64456;
                        float defunc_2_reduce_res_64457;
                        float defunc_2_reduce_res_64458;
                        float redout_65625;
                        float redout_65626;
                        float redout_65627;
                        
                        redout_65625 = 0.0F;
                        redout_65626 = 0.0F;
                        redout_65627 = 0.0F;
                        for (int64_t i_65628 = 0; i_65628 < q_64066;
                             i_65628++) {
                            float x_64469 = ((float *) mem_66284)[i_65628];
                            bool cond_64470 = sle64(last_res_64316, i_65628);
                            float defunc_0_f_res_64471;
                            
                            if (cond_64470) {
                                defunc_0_f_res_64471 = 0.0F;
                            } else {
                                int64_t i_64472 = add64(min_res_64435, i_65628);
                                float x_64473 = ((float *) mem_66239)[i_64472];
                                float defunc_0_f_res_f_res_64474 = 1.0F +
                                      x_64473;
                                
                                defunc_0_f_res_64471 =
                                    defunc_0_f_res_f_res_64474;
                            }
                            
                            float x_j_64475 = defunc_0_f_res_64471 -
                                  defunc_0_f_res_64455;
                            float abs_res_64476 = (float) fabs(x_j_64475);
                            float tmp1_64477 = abs_res_64476 /
                                  defunc_1_f_res_64454;
                            float x_64478 = tmp1_64477 * tmp1_64477;
                            float y_64479 = tmp1_64477 * x_64478;
                            float tmp2_64480 = 1.0F - y_64479;
                            float x_64481 = tmp2_64480 * tmp2_64480;
                            float tmp3_64482 = tmp2_64480 * x_64481;
                            float w_j_64483 = x_64469 * tmp3_64482;
                            float xw_j_64484 = x_j_64475 * w_j_64483;
                            float x2w_j_64485 = x_j_64475 * xw_j_64484;
                            float defunc_1_op_res_64461 = w_j_64483 +
                                  redout_65625;
                            float defunc_1_op_res_64464 = xw_j_64484 +
                                  redout_65626;
                            float defunc_1_op_res_64467 = x2w_j_64485 +
                                  redout_65627;
                            float redout_tmp_67443 = defunc_1_op_res_64461;
                            float redout_tmp_67444 = defunc_1_op_res_64464;
                            float redout_tmp_67445 = defunc_1_op_res_64467;
                            
                            redout_65625 = redout_tmp_67443;
                            redout_65626 = redout_tmp_67444;
                            redout_65627 = redout_tmp_67445;
                        }
                        defunc_2_reduce_res_64456 = redout_65625;
                        defunc_2_reduce_res_64457 = redout_65626;
                        defunc_2_reduce_res_64458 = redout_65627;
                        
                        float x_64486 = defunc_2_reduce_res_64456 *
                              defunc_2_reduce_res_64458;
                        float y_64487 = defunc_2_reduce_res_64457 *
                              defunc_2_reduce_res_64457;
                        float y_64488 = x_64486 - y_64487;
                        float det1_64489 = 1.0F / y_64488;
                        float a11_64490 = defunc_2_reduce_res_64458 *
                              det1_64489;
                        float negate_arg_64491 = defunc_2_reduce_res_64457 *
                              det1_64489;
                        float b11_64492 = 0.0F - negate_arg_64491;
                        float c11_64493 = defunc_2_reduce_res_64456 *
                              det1_64489;
                        float defunc_2_reduce_res_64494;
                        float defunc_2_reduce_res_64495;
                        float redout_65629;
                        float redout_65630;
                        
                        redout_65629 = 0.0F;
                        redout_65630 = 0.0F;
                        for (int64_t i_65631 = 0; i_65631 < q_64066;
                             i_65631++) {
                            float x_64503 = ((float *) mem_66284)[i_65631];
                            bool cond_64504 = sle64(last_res_64316, i_65631);
                            float defunc_0_f_res_64505;
                            
                            if (cond_64504) {
                                defunc_0_f_res_64505 = 0.0F;
                            } else {
                                int64_t i_64506 = add64(min_res_64435, i_65631);
                                float x_64507 = ((float *) mem_66239)[i_64506];
                                float defunc_0_f_res_f_res_64508 = 1.0F +
                                      x_64507;
                                
                                defunc_0_f_res_64505 =
                                    defunc_0_f_res_f_res_64508;
                            }
                            
                            float x_j_64509 = defunc_0_f_res_64505 -
                                  defunc_0_f_res_64455;
                            float abs_res_64510 = (float) fabs(x_j_64509);
                            float tmp1_64511 = abs_res_64510 /
                                  defunc_1_f_res_64454;
                            float x_64512 = tmp1_64511 * tmp1_64511;
                            float y_64513 = tmp1_64511 * x_64512;
                            float tmp2_64514 = 1.0F - y_64513;
                            float x_64515 = tmp2_64514 * tmp2_64514;
                            float tmp3_64516 = tmp2_64514 * x_64515;
                            float tmp4_64517 = x_64503 * tmp3_64516;
                            float defunc_1_f_res_64518 = x_j_64509 * tmp4_64517;
                            float defunc_0_f_res_64519;
                            
                            if (cond_64504) {
                                defunc_0_f_res_64519 = 0.0F;
                            } else {
                                int64_t i_64520 = add64(min_res_64435, i_65631);
                                float x_64521 = ((float *) mem_66209)[i_64520];
                                
                                defunc_0_f_res_64519 = x_64521;
                            }
                            
                            float x_64522 = a11_64490 * tmp4_64517;
                            float y_64523 = b11_64492 * defunc_1_f_res_64518;
                            float x_64524 = x_64522 + y_64523;
                            float defunc_9_fit_fun_res_64525 =
                                  defunc_0_f_res_64519 * x_64524;
                            float x_64526 = b11_64492 * tmp4_64517;
                            float y_64527 = c11_64493 * defunc_1_f_res_64518;
                            float x_64528 = x_64526 + y_64527;
                            float defunc_9_slope_fun_res_64529 =
                                  defunc_0_f_res_64519 * x_64528;
                            float defunc_1_op_res_64498 =
                                  defunc_9_fit_fun_res_64525 + redout_65629;
                            float defunc_1_op_res_64501 =
                                  defunc_9_slope_fun_res_64529 + redout_65630;
                            float redout_tmp_67446 = defunc_1_op_res_64498;
                            float redout_tmp_67447 = defunc_1_op_res_64501;
                            
                            redout_65629 = redout_tmp_67446;
                            redout_65630 = redout_tmp_67447;
                        }
                        defunc_2_reduce_res_64494 = redout_65629;
                        defunc_2_reduce_res_64495 = redout_65630;
                        ((float *) mem_66167.mem)[i_65643 * n_m_64072 +
                                                  i_65636] =
                            defunc_2_reduce_res_64494;
                        ((float *) mem_66171.mem)[i_65643 * n_m_64072 +
                                                  i_65636] =
                            defunc_2_reduce_res_64495;
                    }
                }
                if (memblock_set(ctx, &ext_mem_66558, &mem_66167,
                                 "mem_66167") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_66550, &mem_66171,
                                 "mem_66171") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66171, "mem_66171") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66167, "mem_66167") != 0)
                    return 1;
            } else {
                struct memblock mem_66360;
                
                mem_66360.references = NULL;
                if (memblock_alloc(ctx, &mem_66360, bytes_66357, "mem_66360")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66364;
                
                mem_66364.references = NULL;
                if (memblock_alloc(ctx, &mem_66364, bytes_66357, "mem_66364")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66387_cached_sizze_67581 < (size_t) bytes_66385) {
                    mem_66387 = realloc(mem_66387, bytes_66385);
                    mem_66387_cached_sizze_67581 = bytes_66385;
                }
                if (mem_66402_cached_sizze_67582 < (size_t) bytes_66400) {
                    mem_66402 = realloc(mem_66402, bytes_66400);
                    mem_66402_cached_sizze_67582 = bytes_66400;
                }
                if (mem_66405_cached_sizze_67583 < (size_t) bytes_66385) {
                    mem_66405 = realloc(mem_66405, bytes_66385);
                    mem_66405_cached_sizze_67583 = bytes_66385;
                }
                if (mem_66432_cached_sizze_67584 < (size_t) bytes_66400) {
                    mem_66432 = realloc(mem_66432, bytes_66400);
                    mem_66432_cached_sizze_67584 = bytes_66400;
                }
                if (mem_66435_cached_sizze_67585 < (size_t) bytes_66385) {
                    mem_66435 = realloc(mem_66435, bytes_66385);
                    mem_66435_cached_sizze_67585 = bytes_66385;
                }
                if (mem_66438_cached_sizze_67586 < (size_t) bytes_66385) {
                    mem_66438 = realloc(mem_66438, bytes_66385);
                    mem_66438_cached_sizze_67586 = bytes_66385;
                }
                if (mem_66477_cached_sizze_67587 < (size_t) bytes_66475) {
                    mem_66477 = realloc(mem_66477, bytes_66475);
                    mem_66477_cached_sizze_67587 = bytes_66475;
                }
                for (int64_t i_65696 = 0; i_65696 < m_64063; i_65696++) {
                    int64_t discard_65651;
                    int64_t scanacc_65647 = (int64_t) 0;
                    
                    for (int64_t i_65649 = 0; i_65649 < n_64064; i_65649++) {
                        float x_64540 = ((float *) Y_mem_66010.mem)[i_65696 *
                                                                    n_64064 +
                                                                    i_65649];
                        bool isnan_res_64541;
                        
                        isnan_res_64541 = futrts_isnan32(x_64540);
                        
                        bool defunc_0_p_res_64542 = !isnan_res_64541;
                        int64_t defunc_0_f_res_64543 =
                                btoi_bool_i64(defunc_0_p_res_64542);
                        int64_t defunc_1_op_res_64539 =
                                add64(defunc_0_f_res_64543, scanacc_65647);
                        
                        ((int64_t *) mem_66387)[i_65649] =
                            defunc_1_op_res_64539;
                        
                        int64_t scanacc_tmp_67450 = defunc_1_op_res_64539;
                        
                        scanacc_65647 = scanacc_tmp_67450;
                    }
                    discard_65651 = scanacc_65647;
                    
                    int64_t last_res_64544 = ((int64_t *) mem_66387)[i_64078];
                    
                    for (int64_t i_67452 = 0; i_67452 < n_64064; i_67452++) {
                        ((float *) mem_66402)[i_67452] = 0.0F;
                    }
                    for (int64_t i_67453 = 0; i_67453 < n_64064; i_67453++) {
                        ((int64_t *) mem_66405)[i_67453] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65652 = 0; write_iter_65652 <
                         n_64064; write_iter_65652++) {
                        float write_iv_65655 =
                              ((float *) Y_mem_66010.mem)[i_65696 * n_64064 +
                                                          write_iter_65652];
                        int64_t write_iv_65656 =
                                ((int64_t *) mem_66387)[write_iter_65652];
                        bool isnan_res_64552;
                        
                        isnan_res_64552 = futrts_isnan32(write_iv_65655);
                        
                        bool defunc_0_p_res_64553 = !isnan_res_64552;
                        int64_t defunc_1_f_res_64554;
                        
                        if (defunc_0_p_res_64553) {
                            int64_t defunc_1_f_res_t_res_64555 =
                                    sub64(write_iv_65656, (int64_t) 1);
                            
                            defunc_1_f_res_64554 = defunc_1_f_res_t_res_64555;
                        } else {
                            defunc_1_f_res_64554 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64554) &&
                            slt64(defunc_1_f_res_64554, n_64064)) {
                            ((int64_t *) mem_66405)[defunc_1_f_res_64554] =
                                write_iter_65652;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_64554) &&
                            slt64(defunc_1_f_res_64554, n_64064)) {
                            memmove(mem_66402 + defunc_1_f_res_64554 *
                                    (int64_t) 4, Y_mem_66010.mem + (i_65696 *
                                                                    n_64064 +
                                                                    write_iter_65652) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_64562 = sub64(last_res_64544,
                                                  min_res_64084);
                    float i64_res_64563 = sitofp_i64_f32(last_res_64544);
                    float x_64564 = i64_res_64091 - i64_res_64563;
                    float max_arg_64565 = x_64564 / 2.0F;
                    float max_res_64566 = fmax32(0.0F, max_arg_64565);
                    
                    for (int64_t i_65666 = 0; i_65666 < n_64064; i_65666++) {
                        int64_t x_64570 = ((int64_t *) mem_66405)[i_65666];
                        int64_t defunc_0_f_res_64571 = add64((int64_t) 1,
                                                             x_64570);
                        bool cond_64572 = slt64(defunc_0_f_res_64571,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_64573;
                        
                        if (cond_64572) {
                            defunc_0_f_res_64573 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_64573 = defunc_0_f_res_64571;
                        }
                        
                        float defunc_0_f_res_64574 = sitofp_i64_f32(x_64570);
                        
                        ((float *) mem_66432)[i_65666] = defunc_0_f_res_64574;
                        ((int64_t *) mem_66435)[i_65666] = defunc_0_f_res_64573;
                        ((int64_t *) mem_66438)[i_65666] = defunc_0_f_res_64571;
                    }
                    for (int64_t i_65672 = 0; i_65672 < q_64066; i_65672++) {
                        bool cond_64580 = sle64(last_res_64544, i_65672);
                        float defunc_0_f_res_64581;
                        
                        if (cond_64580) {
                            defunc_0_f_res_64581 = 0.0F;
                        } else {
                            defunc_0_f_res_64581 = 1.0F;
                        }
                        ((float *) mem_66477)[i_65672] = defunc_0_f_res_64581;
                    }
                    for (int64_t i_65689 = 0; i_65689 < n_m_64072; i_65689++) {
                        int64_t min_arg_64585 = mul64(jump_64068, i_65689);
                        int64_t min_res_64586 = smin64(i_64078, min_arg_64585);
                        int64_t defunc_0_g_res_64587 = add64((int64_t) 1,
                                                             min_res_64586);
                        bool nearest_idx_64588;
                        int64_t nearest_idx_64589;
                        int64_t nearest_idx_64590;
                        bool loop_while_64591;
                        int64_t low_64592;
                        int64_t high_64593;
                        
                        loop_while_64591 = x_64079;
                        low_64592 = (int64_t) 0;
                        high_64593 = i_64078;
                        while (loop_while_64591) {
                            int64_t x_64594 = add64(low_64592, high_64593);
                            int64_t mid_64595 = sdiv64(x_64594, (int64_t) 2);
                            bool x_64596 = sle64((int64_t) 0, mid_64595);
                            bool y_64597 = slt64(mid_64595, n_64064);
                            bool bounds_check_64598 = x_64596 && y_64597;
                            bool index_certs_64599;
                            
                            if (!bounds_check_64598) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_64595,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66364,
                                                   "mem_66364") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66360,
                                                   "mem_66360") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66550,
                                                   "ext_mem_66550") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66558,
                                                   "ext_mem_66558") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66566,
                                                   "ext_mem_66566") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_66574,
                                                   "ext_mem_66574") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_64600 =
                                    ((int64_t *) mem_66435)[mid_64595];
                            bool cond_64601 = sle64(defunc_0_g_res_64587,
                                                    x_64600);
                            int64_t loopres_64602;
                            int64_t loopres_64603;
                            
                            if (cond_64601) {
                                int64_t loopres_t_res_64604 = sub64(mid_64595,
                                                                    (int64_t) 1);
                                
                                loopres_64602 = low_64592;
                                loopres_64603 = loopres_t_res_64604;
                            } else {
                                int64_t loopres_f_res_64605 = add64((int64_t) 1,
                                                                    mid_64595);
                                
                                loopres_64602 = loopres_f_res_64605;
                                loopres_64603 = high_64593;
                            }
                            
                            bool loop_cond_64606 = sle64(loopres_64602,
                                                         loopres_64603);
                            bool loop_while_tmp_67462 = loop_cond_64606;
                            int64_t low_tmp_67463 = loopres_64602;
                            int64_t high_tmp_67464 = loopres_64603;
                            
                            loop_while_64591 = loop_while_tmp_67462;
                            low_64592 = low_tmp_67463;
                            high_64593 = high_tmp_67464;
                        }
                        nearest_idx_64588 = loop_while_64591;
                        nearest_idx_64589 = low_64592;
                        nearest_idx_64590 = high_64593;
                        
                        int64_t max_arg_64607 = sub64(nearest_idx_64589,
                                                      min_res_64084);
                        int64_t max_res_64608 = smax64((int64_t) 0,
                                                       max_arg_64607);
                        int64_t j_64609 = add64(min_res_64084, max_res_64608);
                        int64_t i_p_m_t_s_64610 = add64(m_64090, max_res_64608);
                        bool zzero_leq_i_p_m_t_s_64611 = sle64((int64_t) 0,
                                                               i_p_m_t_s_64610);
                        bool i_p_m_t_s_leq_w_64612 = slt64(i_p_m_t_s_64610,
                                                           n_64064);
                        bool zzero_lte_i_64613 = sle64((int64_t) 0,
                                                       max_res_64608);
                        bool i_lte_j_64614 = sle64(max_res_64608, j_64609);
                        bool y_64615 = i_p_m_t_s_leq_w_64612 &&
                             zzero_lte_i_64613;
                        bool y_64616 = zzero_leq_i_p_m_t_s_64611 && y_64615;
                        bool y_64617 = i_lte_j_64614 && y_64616;
                        bool forwards_ok_64618 = zzero_lte_i_64613 && y_64617;
                        bool ok_or_empty_64619 = empty_slice_64089 ||
                             forwards_ok_64618;
                        bool index_certs_64620;
                        
                        if (!ok_or_empty_64619) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_64608,
                                          ":", (long long) j_64609,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66364, "mem_66364") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66360, "mem_66360") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66550,
                                               "ext_mem_66550") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66558,
                                               "ext_mem_66558") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_64622;
                        int64_t redout_65674 = (int64_t) 0;
                        
                        for (int64_t i_65675 = 0; i_65675 < min_res_64084;
                             i_65675++) {
                            int64_t slice_65907 = max_res_64608 + i_65675;
                            int64_t x_64626 =
                                    ((int64_t *) mem_66438)[slice_65907];
                            int64_t abs_arg_64627 = sub64(x_64626,
                                                          defunc_0_g_res_64587);
                            int64_t abs_res_64628 = abs64(abs_arg_64627);
                            int64_t defunc_1_op_res_64625 = add64(abs_res_64628,
                                                                  redout_65674);
                            int64_t redout_tmp_67465 = defunc_1_op_res_64625;
                            
                            redout_65674 = redout_tmp_67465;
                        }
                        defunc_2_reduce_res_64622 = redout_65674;
                        
                        int64_t idx_64629;
                        int64_t idx_64630;
                        int64_t idx_64631;
                        int64_t idx_64632;
                        int64_t best_idx_64634;
                        int64_t last_idx_64635;
                        int64_t best_sum_64636;
                        int64_t curr_sum_64637;
                        
                        best_idx_64634 = max_res_64608;
                        last_idx_64635 = max_res_64608;
                        best_sum_64636 = defunc_2_reduce_res_64622;
                        curr_sum_64637 = defunc_2_reduce_res_64622;
                        for (int64_t j_64633 = 0; j_64633 < min_res_64084;
                             j_64633++) {
                            int64_t new_idx_64638 = add64(max_res_64608,
                                                          j_64633);
                            int64_t x_64639 = add64(min_res_64084,
                                                    new_idx_64638);
                            bool cond_64640 = slt64(last_res_64544, x_64639);
                            int64_t new_sum_64641;
                            
                            if (cond_64640) {
                                new_sum_64641 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_64642 = sle64((int64_t) 0,
                                                     last_idx_64635);
                                bool y_64643 = slt64(last_idx_64635, n_64064);
                                bool bounds_check_64644 = x_64642 && y_64643;
                                bool index_certs_64645;
                                
                                if (!bounds_check_64644) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_64635,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66364,
                                                       "mem_66364") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66360,
                                                       "mem_66360") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66550,
                                                       "ext_mem_66550") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66558,
                                                       "ext_mem_66558") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66566,
                                                       "ext_mem_66566") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66574,
                                                       "ext_mem_66574") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64646 =
                                        ((int64_t *) mem_66438)[last_idx_64635];
                                int64_t binop_p_64647 =
                                        sub64(defunc_0_g_res_64587, y_64646);
                                int64_t defunc_0_f_res_64648 =
                                        abs64(binop_p_64647);
                                int64_t x_64649 = sub64(curr_sum_64637,
                                                        defunc_0_f_res_64648);
                                int64_t min_arg_64650 = add64(min_res_64084,
                                                              last_idx_64635);
                                int64_t min_res_64651 = smin64(i_64078,
                                                               min_arg_64650);
                                bool x_64652 = sle64((int64_t) 0,
                                                     min_res_64651);
                                bool y_64653 = slt64(min_res_64651, n_64064);
                                bool bounds_check_64654 = x_64652 && y_64653;
                                bool index_certs_64655;
                                
                                if (!bounds_check_64654) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_64651,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66364,
                                                       "mem_66364") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66360,
                                                       "mem_66360") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66550,
                                                       "ext_mem_66550") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66558,
                                                       "ext_mem_66558") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66566,
                                                       "ext_mem_66566") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_66574,
                                                       "ext_mem_66574") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_64656 =
                                        ((int64_t *) mem_66438)[min_res_64651];
                                int64_t binop_p_64657 =
                                        sub64(defunc_0_g_res_64587, y_64656);
                                int64_t defunc_0_f_res_64658 =
                                        abs64(binop_p_64657);
                                int64_t new_sum_f_res_64659 = add64(x_64649,
                                                                    defunc_0_f_res_64658);
                                
                                new_sum_64641 = new_sum_f_res_64659;
                            }
                            
                            bool cond_64660 = sle64(new_sum_64641,
                                                    best_sum_64636);
                            int64_t loopres_64661;
                            
                            if (cond_64660) {
                                loopres_64661 = new_idx_64638;
                            } else {
                                loopres_64661 = best_idx_64634;
                            }
                            
                            int64_t loopres_64662;
                            
                            if (cond_64660) {
                                loopres_64662 = new_sum_64641;
                            } else {
                                loopres_64662 = best_sum_64636;
                            }
                            
                            int64_t best_idx_tmp_67466 = loopres_64661;
                            int64_t last_idx_tmp_67467 = new_idx_64638;
                            int64_t best_sum_tmp_67468 = loopres_64662;
                            int64_t curr_sum_tmp_67469 = new_sum_64641;
                            
                            best_idx_64634 = best_idx_tmp_67466;
                            last_idx_64635 = last_idx_tmp_67467;
                            best_sum_64636 = best_sum_tmp_67468;
                            curr_sum_64637 = curr_sum_tmp_67469;
                        }
                        idx_64629 = best_idx_64634;
                        idx_64630 = last_idx_64635;
                        idx_64631 = best_sum_64636;
                        idx_64632 = curr_sum_64637;
                        
                        int64_t min_res_64663 = smin64(min_arg_64562,
                                                       idx_64629);
                        int64_t x_64664 = add64(min_res_64084, min_res_64663);
                        int64_t r_64665 = sub64(x_64664, (int64_t) 1);
                        bool x_64666 = sle64((int64_t) 0, r_64665);
                        bool y_64667 = slt64(r_64665, n_64064);
                        bool bounds_check_64668 = x_64666 && y_64667;
                        bool index_certs_64669;
                        
                        if (!bounds_check_64668) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_64665,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66364, "mem_66364") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66360, "mem_66360") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66550,
                                               "ext_mem_66550") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66558,
                                               "ext_mem_66558") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64670 = ((int64_t *) mem_66405)[r_64665];
                        int64_t abs_arg_64671 = sub64(x_64670, min_res_64586);
                        int64_t abs_res_64672 = abs64(abs_arg_64671);
                        bool x_64673 = sle64((int64_t) 0, min_res_64663);
                        bool y_64674 = slt64(min_res_64663, n_64064);
                        bool bounds_check_64675 = x_64673 && y_64674;
                        bool index_certs_64676;
                        
                        if (!bounds_check_64675) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_64663,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66364, "mem_66364") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66360, "mem_66360") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66550,
                                               "ext_mem_66550") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66558,
                                               "ext_mem_66558") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66566,
                                               "ext_mem_66566") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_66574,
                                               "ext_mem_66574") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64677 =
                                ((int64_t *) mem_66405)[min_res_64663];
                        int64_t abs_arg_64678 = sub64(x_64677, min_res_64586);
                        int64_t abs_res_64679 = abs64(abs_arg_64678);
                        int64_t max_res_64680 = smax64(abs_res_64672,
                                                       abs_res_64679);
                        float defunc_0_f_res_64681 =
                              sitofp_i64_f32(max_res_64680);
                        float defunc_1_f_res_64682 = max_res_64566 +
                              defunc_0_f_res_64681;
                        float defunc_0_f_res_64683 =
                              sitofp_i64_f32(min_res_64586);
                        float defunc_2_reduce_res_64684;
                        float defunc_2_reduce_res_64685;
                        float defunc_2_reduce_res_64686;
                        float defunc_2_reduce_res_64687;
                        float defunc_2_reduce_res_64688;
                        float redout_65676;
                        float redout_65677;
                        float redout_65678;
                        float redout_65679;
                        float redout_65680;
                        
                        redout_65676 = 0.0F;
                        redout_65677 = 0.0F;
                        redout_65678 = 0.0F;
                        redout_65679 = 0.0F;
                        redout_65680 = 0.0F;
                        for (int64_t i_65681 = 0; i_65681 < q_64066;
                             i_65681++) {
                            float x_64705 = ((float *) mem_66477)[i_65681];
                            bool cond_64706 = sle64(last_res_64544, i_65681);
                            float defunc_0_f_res_64707;
                            
                            if (cond_64706) {
                                defunc_0_f_res_64707 = 0.0F;
                            } else {
                                int64_t i_64708 = add64(min_res_64663, i_65681);
                                float x_64709 = ((float *) mem_66432)[i_64708];
                                float defunc_0_f_res_f_res_64710 = 1.0F +
                                      x_64709;
                                
                                defunc_0_f_res_64707 =
                                    defunc_0_f_res_f_res_64710;
                            }
                            
                            float x_j_64711 = defunc_0_f_res_64707 -
                                  defunc_0_f_res_64683;
                            float abs_res_64712 = (float) fabs(x_j_64711);
                            float tmp1_64713 = abs_res_64712 /
                                  defunc_1_f_res_64682;
                            float x_64714 = tmp1_64713 * tmp1_64713;
                            float y_64715 = tmp1_64713 * x_64714;
                            float tmp2_64716 = 1.0F - y_64715;
                            float x_64717 = tmp2_64716 * tmp2_64716;
                            float tmp3_64718 = tmp2_64716 * x_64717;
                            float w_j_64719 = x_64705 * tmp3_64718;
                            float xw_j_64720 = x_j_64711 * w_j_64719;
                            float x2w_j_64721 = x_j_64711 * xw_j_64720;
                            float x3w_j_64722 = x_j_64711 * x2w_j_64721;
                            float x4w_j_64723 = x_j_64711 * x3w_j_64722;
                            float defunc_1_op_res_64691 = w_j_64719 +
                                  redout_65676;
                            float defunc_1_op_res_64694 = xw_j_64720 +
                                  redout_65677;
                            float defunc_1_op_res_64697 = x2w_j_64721 +
                                  redout_65678;
                            float defunc_1_op_res_64700 = x3w_j_64722 +
                                  redout_65679;
                            float defunc_1_op_res_64703 = x4w_j_64723 +
                                  redout_65680;
                            float redout_tmp_67470 = defunc_1_op_res_64691;
                            float redout_tmp_67471 = defunc_1_op_res_64694;
                            float redout_tmp_67472 = defunc_1_op_res_64697;
                            float redout_tmp_67473 = defunc_1_op_res_64700;
                            float redout_tmp_67474 = defunc_1_op_res_64703;
                            
                            redout_65676 = redout_tmp_67470;
                            redout_65677 = redout_tmp_67471;
                            redout_65678 = redout_tmp_67472;
                            redout_65679 = redout_tmp_67473;
                            redout_65680 = redout_tmp_67474;
                        }
                        defunc_2_reduce_res_64684 = redout_65676;
                        defunc_2_reduce_res_64685 = redout_65677;
                        defunc_2_reduce_res_64686 = redout_65678;
                        defunc_2_reduce_res_64687 = redout_65679;
                        defunc_2_reduce_res_64688 = redout_65680;
                        
                        float x_64724 = defunc_2_reduce_res_64686 *
                              defunc_2_reduce_res_64688;
                        float y_64725 = defunc_2_reduce_res_64687 *
                              defunc_2_reduce_res_64687;
                        float a12_64726 = x_64724 - y_64725;
                        float x_64727 = defunc_2_reduce_res_64686 *
                              defunc_2_reduce_res_64687;
                        float y_64728 = defunc_2_reduce_res_64685 *
                              defunc_2_reduce_res_64688;
                        float b12_64729 = x_64727 - y_64728;
                        float x_64730 = defunc_2_reduce_res_64685 *
                              defunc_2_reduce_res_64687;
                        float y_64731 = defunc_2_reduce_res_64686 *
                              defunc_2_reduce_res_64686;
                        float c12_64732 = x_64730 - y_64731;
                        float x_64733 = defunc_2_reduce_res_64684 *
                              defunc_2_reduce_res_64688;
                        float b2_64734 = x_64733 - y_64731;
                        float x_64735 = defunc_2_reduce_res_64685 *
                              defunc_2_reduce_res_64686;
                        float y_64736 = defunc_2_reduce_res_64684 *
                              defunc_2_reduce_res_64687;
                        float c2_64737 = x_64735 - y_64736;
                        float x_64738 = defunc_2_reduce_res_64684 * a12_64726;
                        float y_64739 = defunc_2_reduce_res_64685 * b12_64729;
                        float x_64740 = x_64738 + y_64739;
                        float y_64741 = defunc_2_reduce_res_64686 * c12_64732;
                        float y_64742 = x_64740 + y_64741;
                        float det_64743 = 1.0F / y_64742;
                        float a12_64744 = a12_64726 * det_64743;
                        float b12_64745 = b12_64729 * det_64743;
                        float c12_64746 = c12_64732 * det_64743;
                        float b2_64747 = b2_64734 * det_64743;
                        float c2_64748 = c2_64737 * det_64743;
                        float defunc_2_reduce_res_64749;
                        float defunc_2_reduce_res_64750;
                        float redout_65682;
                        float redout_65683;
                        
                        redout_65682 = 0.0F;
                        redout_65683 = 0.0F;
                        for (int64_t i_65684 = 0; i_65684 < q_64066;
                             i_65684++) {
                            float x_64758 = ((float *) mem_66477)[i_65684];
                            bool cond_64759 = sle64(last_res_64544, i_65684);
                            float defunc_0_f_res_64760;
                            
                            if (cond_64759) {
                                defunc_0_f_res_64760 = 0.0F;
                            } else {
                                int64_t i_64761 = add64(min_res_64663, i_65684);
                                float x_64762 = ((float *) mem_66432)[i_64761];
                                float defunc_0_f_res_f_res_64763 = 1.0F +
                                      x_64762;
                                
                                defunc_0_f_res_64760 =
                                    defunc_0_f_res_f_res_64763;
                            }
                            
                            float x_j_64764 = defunc_0_f_res_64760 -
                                  defunc_0_f_res_64683;
                            float abs_res_64765 = (float) fabs(x_j_64764);
                            float tmp1_64766 = abs_res_64765 /
                                  defunc_1_f_res_64682;
                            float x_64767 = tmp1_64766 * tmp1_64766;
                            float y_64768 = tmp1_64766 * x_64767;
                            float tmp2_64769 = 1.0F - y_64768;
                            float x_64770 = tmp2_64769 * tmp2_64769;
                            float tmp3_64771 = tmp2_64769 * x_64770;
                            float tmp4_64772 = x_64758 * tmp3_64771;
                            float defunc_1_f_res_64773 = x_j_64764 * tmp4_64772;
                            float defunc_1_f_res_64774 = x_j_64764 *
                                  defunc_1_f_res_64773;
                            float defunc_0_f_res_64775;
                            
                            if (cond_64759) {
                                defunc_0_f_res_64775 = 0.0F;
                            } else {
                                int64_t i_64776 = add64(min_res_64663, i_65684);
                                float x_64777 = ((float *) mem_66402)[i_64776];
                                
                                defunc_0_f_res_64775 = x_64777;
                            }
                            
                            float x_64778 = a12_64744 * tmp4_64772;
                            float y_64779 = b12_64745 * defunc_1_f_res_64773;
                            float x_64780 = x_64778 + y_64779;
                            float y_64781 = c12_64746 * defunc_1_f_res_64774;
                            float x_64782 = x_64780 + y_64781;
                            float defunc_9_fit_fun_res_64783 =
                                  defunc_0_f_res_64775 * x_64782;
                            float x_64784 = b12_64745 * tmp4_64772;
                            float y_64785 = b2_64747 * defunc_1_f_res_64773;
                            float x_64786 = x_64784 + y_64785;
                            float y_64787 = c2_64748 * defunc_1_f_res_64774;
                            float x_64788 = x_64786 + y_64787;
                            float defunc_9_slope_fun_res_64789 =
                                  defunc_0_f_res_64775 * x_64788;
                            float defunc_1_op_res_64753 =
                                  defunc_9_fit_fun_res_64783 + redout_65682;
                            float defunc_1_op_res_64756 =
                                  defunc_9_slope_fun_res_64789 + redout_65683;
                            float redout_tmp_67475 = defunc_1_op_res_64753;
                            float redout_tmp_67476 = defunc_1_op_res_64756;
                            
                            redout_65682 = redout_tmp_67475;
                            redout_65683 = redout_tmp_67476;
                        }
                        defunc_2_reduce_res_64749 = redout_65682;
                        defunc_2_reduce_res_64750 = redout_65683;
                        ((float *) mem_66360.mem)[i_65696 * n_m_64072 +
                                                  i_65689] =
                            defunc_2_reduce_res_64749;
                        ((float *) mem_66364.mem)[i_65696 * n_m_64072 +
                                                  i_65689] =
                            defunc_2_reduce_res_64750;
                    }
                }
                if (memblock_set(ctx, &ext_mem_66558, &mem_66360,
                                 "mem_66360") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_66550, &mem_66364,
                                 "mem_66364") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66364, "mem_66364") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66360, "mem_66360") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_66574, &ext_mem_66558,
                             "ext_mem_66558") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_66566, &ext_mem_66550,
                             "ext_mem_66550") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_66550, "ext_mem_66550") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_66558, "ext_mem_66558") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_67266, &ext_mem_66574,
                         "ext_mem_66574") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_67258, &ext_mem_66566,
                         "ext_mem_66566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_66566, "ext_mem_66566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_66574, "ext_mem_66574") != 0)
            return 1;
    } else {
        bool match_lit_64792 = (int64_t) 0 == degree_64067;
        int64_t binop_x_66583 = m_64063 * n_m_64072;
        int64_t binop_y_66584 = (int64_t) 4 * binop_x_66583;
        int64_t bytes_66582 = smax64((int64_t) 0, binop_y_66584);
        int64_t binop_y_66601 = (int64_t) 8 * n_64064;
        int64_t bytes_66600 = smax64((int64_t) 0, binop_y_66601);
        int64_t binop_y_66616 = (int64_t) 4 * n_64064;
        int64_t bytes_66615 = smax64((int64_t) 0, binop_y_66616);
        int64_t binop_y_66691 = (int64_t) 4 * q_64066;
        int64_t bytes_66690 = smax64((int64_t) 0, binop_y_66691);
        struct memblock ext_mem_67250;
        
        ext_mem_67250.references = NULL;
        
        struct memblock ext_mem_67242;
        
        ext_mem_67242.references = NULL;
        if (match_lit_64792) {
            struct memblock mem_66585;
            
            mem_66585.references = NULL;
            if (memblock_alloc(ctx, &mem_66585, bytes_66582, "mem_66585")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_67477 = 0; i_67477 < m_64063; i_67477++) {
                for (int64_t i_67478 = 0; i_67478 < n_m_64072; i_67478++) {
                    ((float *) mem_66585.mem)[i_67477 * n_m_64072 + i_67478] =
                        0.0F;
                }
            }
            
            struct memblock mem_66589;
            
            mem_66589.references = NULL;
            if (memblock_alloc(ctx, &mem_66589, bytes_66582, "mem_66589")) {
                err = 1;
                goto cleanup;
            }
            if (mem_66602_cached_sizze_67588 < (size_t) bytes_66600) {
                mem_66602 = realloc(mem_66602, bytes_66600);
                mem_66602_cached_sizze_67588 = bytes_66600;
            }
            if (mem_66617_cached_sizze_67589 < (size_t) bytes_66615) {
                mem_66617 = realloc(mem_66617, bytes_66615);
                mem_66617_cached_sizze_67589 = bytes_66615;
            }
            if (mem_66620_cached_sizze_67590 < (size_t) bytes_66600) {
                mem_66620 = realloc(mem_66620, bytes_66600);
                mem_66620_cached_sizze_67590 = bytes_66600;
            }
            if (mem_66647_cached_sizze_67591 < (size_t) bytes_66615) {
                mem_66647 = realloc(mem_66647, bytes_66615);
                mem_66647_cached_sizze_67591 = bytes_66615;
            }
            if (mem_66650_cached_sizze_67592 < (size_t) bytes_66600) {
                mem_66650 = realloc(mem_66650, bytes_66600);
                mem_66650_cached_sizze_67592 = bytes_66600;
            }
            if (mem_66653_cached_sizze_67593 < (size_t) bytes_66600) {
                mem_66653 = realloc(mem_66653, bytes_66600);
                mem_66653_cached_sizze_67593 = bytes_66600;
            }
            if (mem_66692_cached_sizze_67594 < (size_t) bytes_66690) {
                mem_66692 = realloc(mem_66692, bytes_66690);
                mem_66692_cached_sizze_67594 = bytes_66690;
            }
            if (mem_66718_cached_sizze_67595 < (size_t) bytes_66690) {
                mem_66718 = realloc(mem_66718, bytes_66690);
                mem_66718_cached_sizze_67595 = bytes_66690;
            }
            for (int64_t i_65742 = 0; i_65742 < m_64063; i_65742++) {
                int64_t discard_65704;
                int64_t scanacc_65700 = (int64_t) 0;
                
                for (int64_t i_65702 = 0; i_65702 < n_64064; i_65702++) {
                    float x_64803 = ((float *) Y_mem_66010.mem)[i_65742 *
                                                                n_64064 +
                                                                i_65702];
                    bool isnan_res_64804;
                    
                    isnan_res_64804 = futrts_isnan32(x_64803);
                    
                    bool defunc_0_p_res_64805 = !isnan_res_64804;
                    int64_t defunc_0_f_res_64806 =
                            btoi_bool_i64(defunc_0_p_res_64805);
                    int64_t defunc_1_op_res_64802 = add64(defunc_0_f_res_64806,
                                                          scanacc_65700);
                    
                    ((int64_t *) mem_66602)[i_65702] = defunc_1_op_res_64802;
                    
                    int64_t scanacc_tmp_67480 = defunc_1_op_res_64802;
                    
                    scanacc_65700 = scanacc_tmp_67480;
                }
                discard_65704 = scanacc_65700;
                
                int64_t last_res_64807 = ((int64_t *) mem_66602)[i_64078];
                
                for (int64_t i_67482 = 0; i_67482 < n_64064; i_67482++) {
                    ((float *) mem_66617)[i_67482] = 0.0F;
                }
                for (int64_t i_67483 = 0; i_67483 < n_64064; i_67483++) {
                    ((int64_t *) mem_66620)[i_67483] = (int64_t) -1;
                }
                for (int64_t write_iter_65705 = 0; write_iter_65705 < n_64064;
                     write_iter_65705++) {
                    float write_iv_65708 = ((float *) Y_mem_66010.mem)[i_65742 *
                                                                       n_64064 +
                                                                       write_iter_65705];
                    int64_t write_iv_65709 =
                            ((int64_t *) mem_66602)[write_iter_65705];
                    bool isnan_res_64815;
                    
                    isnan_res_64815 = futrts_isnan32(write_iv_65708);
                    
                    bool defunc_0_p_res_64816 = !isnan_res_64815;
                    int64_t defunc_1_f_res_64817;
                    
                    if (defunc_0_p_res_64816) {
                        int64_t defunc_1_f_res_t_res_64818 =
                                sub64(write_iv_65709, (int64_t) 1);
                        
                        defunc_1_f_res_64817 = defunc_1_f_res_t_res_64818;
                    } else {
                        defunc_1_f_res_64817 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64817) &&
                        slt64(defunc_1_f_res_64817, n_64064)) {
                        ((int64_t *) mem_66620)[defunc_1_f_res_64817] =
                            write_iter_65705;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_64817) &&
                        slt64(defunc_1_f_res_64817, n_64064)) {
                        memmove(mem_66617 + defunc_1_f_res_64817 * (int64_t) 4,
                                Y_mem_66010.mem + (i_65742 * n_64064 +
                                                   write_iter_65705) *
                                (int64_t) 4, (int64_t) 4);
                    }
                }
                
                int64_t min_arg_64825 = sub64(last_res_64807, min_res_64084);
                float i64_res_64826 = sitofp_i64_f32(last_res_64807);
                float x_64827 = i64_res_64091 - i64_res_64826;
                float max_arg_64828 = x_64827 / 2.0F;
                float max_res_64829 = fmax32(0.0F, max_arg_64828);
                
                for (int64_t i_65719 = 0; i_65719 < n_64064; i_65719++) {
                    int64_t x_64833 = ((int64_t *) mem_66620)[i_65719];
                    int64_t defunc_0_f_res_64834 = add64((int64_t) 1, x_64833);
                    bool cond_64835 = slt64(defunc_0_f_res_64834, (int64_t) 0);
                    int64_t defunc_0_f_res_64836;
                    
                    if (cond_64835) {
                        defunc_0_f_res_64836 = (int64_t) 9223372036854775807;
                    } else {
                        defunc_0_f_res_64836 = defunc_0_f_res_64834;
                    }
                    
                    float defunc_0_f_res_64837 = sitofp_i64_f32(x_64833);
                    
                    ((float *) mem_66647)[i_65719] = defunc_0_f_res_64837;
                    ((int64_t *) mem_66650)[i_65719] = defunc_0_f_res_64836;
                    ((int64_t *) mem_66653)[i_65719] = defunc_0_f_res_64834;
                }
                for (int64_t i_65725 = 0; i_65725 < q_64066; i_65725++) {
                    bool cond_64843 = sle64(last_res_64807, i_65725);
                    float defunc_0_f_res_64844;
                    
                    if (cond_64843) {
                        defunc_0_f_res_64844 = 0.0F;
                    } else {
                        defunc_0_f_res_64844 = 1.0F;
                    }
                    ((float *) mem_66692)[i_65725] = defunc_0_f_res_64844;
                }
                for (int64_t i_65738 = 0; i_65738 < n_m_64072; i_65738++) {
                    int64_t min_arg_64847 = mul64(jump_64068, i_65738);
                    int64_t min_res_64848 = smin64(i_64078, min_arg_64847);
                    int64_t defunc_0_g_res_64849 = add64((int64_t) 1,
                                                         min_res_64848);
                    bool nearest_idx_64850;
                    int64_t nearest_idx_64851;
                    int64_t nearest_idx_64852;
                    bool loop_while_64853;
                    int64_t low_64854;
                    int64_t high_64855;
                    
                    loop_while_64853 = x_64079;
                    low_64854 = (int64_t) 0;
                    high_64855 = i_64078;
                    while (loop_while_64853) {
                        int64_t x_64856 = add64(low_64854, high_64855);
                        int64_t mid_64857 = sdiv64(x_64856, (int64_t) 2);
                        bool x_64858 = sle64((int64_t) 0, mid_64857);
                        bool y_64859 = slt64(mid_64857, n_64064);
                        bool bounds_check_64860 = x_64858 && y_64859;
                        bool index_certs_64861;
                        
                        if (!bounds_check_64860) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) mid_64857,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66589, "mem_66589") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66585, "mem_66585") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_64862 = ((int64_t *) mem_66650)[mid_64857];
                        bool cond_64863 = sle64(defunc_0_g_res_64849, x_64862);
                        int64_t loopres_64864;
                        int64_t loopres_64865;
                        
                        if (cond_64863) {
                            int64_t loopres_t_res_64866 = sub64(mid_64857,
                                                                (int64_t) 1);
                            
                            loopres_64864 = low_64854;
                            loopres_64865 = loopres_t_res_64866;
                        } else {
                            int64_t loopres_f_res_64867 = add64((int64_t) 1,
                                                                mid_64857);
                            
                            loopres_64864 = loopres_f_res_64867;
                            loopres_64865 = high_64855;
                        }
                        
                        bool loop_cond_64868 = sle64(loopres_64864,
                                                     loopres_64865);
                        bool loop_while_tmp_67491 = loop_cond_64868;
                        int64_t low_tmp_67492 = loopres_64864;
                        int64_t high_tmp_67493 = loopres_64865;
                        
                        loop_while_64853 = loop_while_tmp_67491;
                        low_64854 = low_tmp_67492;
                        high_64855 = high_tmp_67493;
                    }
                    nearest_idx_64850 = loop_while_64853;
                    nearest_idx_64851 = low_64854;
                    nearest_idx_64852 = high_64855;
                    
                    int64_t max_arg_64869 = sub64(nearest_idx_64851,
                                                  min_res_64084);
                    int64_t max_res_64870 = smax64((int64_t) 0, max_arg_64869);
                    int64_t j_64871 = add64(min_res_64084, max_res_64870);
                    int64_t i_p_m_t_s_64872 = add64(m_64090, max_res_64870);
                    bool zzero_leq_i_p_m_t_s_64873 = sle64((int64_t) 0,
                                                           i_p_m_t_s_64872);
                    bool i_p_m_t_s_leq_w_64874 = slt64(i_p_m_t_s_64872,
                                                       n_64064);
                    bool zzero_lte_i_64875 = sle64((int64_t) 0, max_res_64870);
                    bool i_lte_j_64876 = sle64(max_res_64870, j_64871);
                    bool y_64877 = i_p_m_t_s_leq_w_64874 && zzero_lte_i_64875;
                    bool y_64878 = zzero_leq_i_p_m_t_s_64873 && y_64877;
                    bool y_64879 = i_lte_j_64876 && y_64878;
                    bool forwards_ok_64880 = zzero_lte_i_64875 && y_64879;
                    bool ok_or_empty_64881 = empty_slice_64089 ||
                         forwards_ok_64880;
                    bool index_certs_64882;
                    
                    if (!ok_or_empty_64881) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_64870, ":",
                                      (long long) j_64871,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        if (memblock_unref(ctx, &mem_66589, "mem_66589") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66585, "mem_66585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67242,
                                           "ext_mem_67242") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67250,
                                           "ext_mem_67250") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67258,
                                           "ext_mem_67258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67266,
                                           "ext_mem_67266") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67396,
                                           "mem_out_67396") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t defunc_2_reduce_res_64884;
                    int64_t redout_65727 = (int64_t) 0;
                    
                    for (int64_t i_65728 = 0; i_65728 < min_res_64084;
                         i_65728++) {
                        int64_t slice_65920 = max_res_64870 + i_65728;
                        int64_t x_64888 = ((int64_t *) mem_66653)[slice_65920];
                        int64_t abs_arg_64889 = sub64(x_64888,
                                                      defunc_0_g_res_64849);
                        int64_t abs_res_64890 = abs64(abs_arg_64889);
                        int64_t defunc_1_op_res_64887 = add64(abs_res_64890,
                                                              redout_65727);
                        int64_t redout_tmp_67494 = defunc_1_op_res_64887;
                        
                        redout_65727 = redout_tmp_67494;
                    }
                    defunc_2_reduce_res_64884 = redout_65727;
                    
                    int64_t idx_64891;
                    int64_t idx_64892;
                    int64_t idx_64893;
                    int64_t idx_64894;
                    int64_t best_idx_64896;
                    int64_t last_idx_64897;
                    int64_t best_sum_64898;
                    int64_t curr_sum_64899;
                    
                    best_idx_64896 = max_res_64870;
                    last_idx_64897 = max_res_64870;
                    best_sum_64898 = defunc_2_reduce_res_64884;
                    curr_sum_64899 = defunc_2_reduce_res_64884;
                    for (int64_t j_64895 = 0; j_64895 < min_res_64084;
                         j_64895++) {
                        int64_t new_idx_64900 = add64(max_res_64870, j_64895);
                        int64_t x_64901 = add64(min_res_64084, new_idx_64900);
                        bool cond_64902 = slt64(last_res_64807, x_64901);
                        int64_t new_sum_64903;
                        
                        if (cond_64902) {
                            new_sum_64903 = (int64_t) 9223372036854775807;
                        } else {
                            bool x_64904 = sle64((int64_t) 0, last_idx_64897);
                            bool y_64905 = slt64(last_idx_64897, n_64064);
                            bool bounds_check_64906 = x_64904 && y_64905;
                            bool index_certs_64907;
                            
                            if (!bounds_check_64906) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) last_idx_64897,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66589,
                                                   "mem_66589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66585,
                                                   "mem_66585") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67242,
                                                   "ext_mem_67242") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67250,
                                                   "ext_mem_67250") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64908 =
                                    ((int64_t *) mem_66653)[last_idx_64897];
                            int64_t binop_p_64909 = sub64(defunc_0_g_res_64849,
                                                          y_64908);
                            int64_t defunc_0_f_res_64910 = abs64(binop_p_64909);
                            int64_t x_64911 = sub64(curr_sum_64899,
                                                    defunc_0_f_res_64910);
                            int64_t min_arg_64912 = add64(min_res_64084,
                                                          last_idx_64897);
                            int64_t min_res_64913 = smin64(i_64078,
                                                           min_arg_64912);
                            bool x_64914 = sle64((int64_t) 0, min_res_64913);
                            bool y_64915 = slt64(min_res_64913, n_64064);
                            bool bounds_check_64916 = x_64914 && y_64915;
                            bool index_certs_64917;
                            
                            if (!bounds_check_64916) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [",
                                              (long long) min_res_64913,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66589,
                                                   "mem_66589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66585,
                                                   "mem_66585") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67242,
                                                   "ext_mem_67242") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67250,
                                                   "ext_mem_67250") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t y_64918 =
                                    ((int64_t *) mem_66653)[min_res_64913];
                            int64_t binop_p_64919 = sub64(defunc_0_g_res_64849,
                                                          y_64918);
                            int64_t defunc_0_f_res_64920 = abs64(binop_p_64919);
                            int64_t new_sum_f_res_64921 = add64(x_64911,
                                                                defunc_0_f_res_64920);
                            
                            new_sum_64903 = new_sum_f_res_64921;
                        }
                        
                        bool cond_64922 = sle64(new_sum_64903, best_sum_64898);
                        int64_t loopres_64923;
                        
                        if (cond_64922) {
                            loopres_64923 = new_idx_64900;
                        } else {
                            loopres_64923 = best_idx_64896;
                        }
                        
                        int64_t loopres_64924;
                        
                        if (cond_64922) {
                            loopres_64924 = new_sum_64903;
                        } else {
                            loopres_64924 = best_sum_64898;
                        }
                        
                        int64_t best_idx_tmp_67495 = loopres_64923;
                        int64_t last_idx_tmp_67496 = new_idx_64900;
                        int64_t best_sum_tmp_67497 = loopres_64924;
                        int64_t curr_sum_tmp_67498 = new_sum_64903;
                        
                        best_idx_64896 = best_idx_tmp_67495;
                        last_idx_64897 = last_idx_tmp_67496;
                        best_sum_64898 = best_sum_tmp_67497;
                        curr_sum_64899 = curr_sum_tmp_67498;
                    }
                    idx_64891 = best_idx_64896;
                    idx_64892 = last_idx_64897;
                    idx_64893 = best_sum_64898;
                    idx_64894 = curr_sum_64899;
                    
                    int64_t min_res_64925 = smin64(min_arg_64825, idx_64891);
                    int64_t x_64926 = add64(min_res_64084, min_res_64925);
                    int64_t r_64927 = sub64(x_64926, (int64_t) 1);
                    bool x_64928 = sle64((int64_t) 0, r_64927);
                    bool y_64929 = slt64(r_64927, n_64064);
                    bool bounds_check_64930 = x_64928 && y_64929;
                    bool index_certs_64931;
                    
                    if (!bounds_check_64930) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) r_64927,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        if (memblock_unref(ctx, &mem_66589, "mem_66589") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66585, "mem_66585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67242,
                                           "ext_mem_67242") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67250,
                                           "ext_mem_67250") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67258,
                                           "ext_mem_67258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67266,
                                           "ext_mem_67266") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67396,
                                           "mem_out_67396") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64932 = ((int64_t *) mem_66620)[r_64927];
                    int64_t abs_arg_64933 = sub64(x_64932, min_res_64848);
                    int64_t abs_res_64934 = abs64(abs_arg_64933);
                    bool x_64935 = sle64((int64_t) 0, min_res_64925);
                    bool y_64936 = slt64(min_res_64925, n_64064);
                    bool bounds_check_64937 = x_64935 && y_64936;
                    bool index_certs_64938;
                    
                    if (!bounds_check_64937) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_64925,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64064, "].",
                                      "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                        if (memblock_unref(ctx, &mem_66589, "mem_66589") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_66585, "mem_66585") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67242,
                                           "ext_mem_67242") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67250,
                                           "ext_mem_67250") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67258,
                                           "ext_mem_67258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_67266,
                                           "ext_mem_67266") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_67396,
                                           "mem_out_67396") != 0)
                            return 1;
                        return 1;
                    }
                    
                    int64_t x_64939 = ((int64_t *) mem_66620)[min_res_64925];
                    int64_t abs_arg_64940 = sub64(x_64939, min_res_64848);
                    int64_t abs_res_64941 = abs64(abs_arg_64940);
                    int64_t max_res_64942 = smax64(abs_res_64934,
                                                   abs_res_64941);
                    float defunc_0_f_res_64943 = sitofp_i64_f32(max_res_64942);
                    float defunc_1_f_res_64944 = max_res_64829 +
                          defunc_0_f_res_64943;
                    float defunc_0_f_res_64945 = sitofp_i64_f32(min_res_64848);
                    float defunc_2_reduce_res_64946;
                    float redout_65730 = 0.0F;
                    
                    for (int64_t i_65732 = 0; i_65732 < q_64066; i_65732++) {
                        float x_64952 = ((float *) mem_66692)[i_65732];
                        bool cond_64953 = sle64(last_res_64807, i_65732);
                        float defunc_0_f_res_64954;
                        
                        if (cond_64953) {
                            defunc_0_f_res_64954 = 0.0F;
                        } else {
                            int64_t i_64955 = add64(min_res_64925, i_65732);
                            float x_64956 = ((float *) mem_66647)[i_64955];
                            float defunc_0_f_res_f_res_64957 = 1.0F + x_64956;
                            
                            defunc_0_f_res_64954 = defunc_0_f_res_f_res_64957;
                        }
                        
                        float x_j_64958 = defunc_0_f_res_64954 -
                              defunc_0_f_res_64945;
                        float abs_res_64959 = (float) fabs(x_j_64958);
                        float tmp1_64960 = abs_res_64959 / defunc_1_f_res_64944;
                        float x_64961 = tmp1_64960 * tmp1_64960;
                        float y_64962 = tmp1_64960 * x_64961;
                        float tmp2_64963 = 1.0F - y_64962;
                        float x_64964 = tmp2_64963 * tmp2_64963;
                        float tmp3_64965 = tmp2_64963 * x_64964;
                        float tmp4_64966 = x_64952 * tmp3_64965;
                        float defunc_1_op_res_64950 = tmp4_64966 + redout_65730;
                        
                        ((float *) mem_66718)[i_65732] = tmp4_64966;
                        
                        float redout_tmp_67499 = defunc_1_op_res_64950;
                        
                        redout_65730 = redout_tmp_67499;
                    }
                    defunc_2_reduce_res_64946 = redout_65730;
                    
                    float a0_64967 = 1.0F / defunc_2_reduce_res_64946;
                    float defunc_2_reduce_res_64968;
                    float redout_65734 = 0.0F;
                    
                    for (int64_t i_65735 = 0; i_65735 < q_64066; i_65735++) {
                        float x_64973 = ((float *) mem_66718)[i_65735];
                        bool cond_64974 = sle64(last_res_64807, i_65735);
                        float defunc_0_f_res_64975;
                        
                        if (cond_64974) {
                            defunc_0_f_res_64975 = 0.0F;
                        } else {
                            int64_t i_64976 = add64(min_res_64925, i_65735);
                            float x_64977 = ((float *) mem_66617)[i_64976];
                            
                            defunc_0_f_res_64975 = x_64977;
                        }
                        
                        float x_64978 = a0_64967 * x_64973;
                        float defunc_9_fit_fun_res_64979 =
                              defunc_0_f_res_64975 * x_64978;
                        float defunc_1_op_res_64971 =
                              defunc_9_fit_fun_res_64979 + redout_65734;
                        float redout_tmp_67501 = defunc_1_op_res_64971;
                        
                        redout_65734 = redout_tmp_67501;
                    }
                    defunc_2_reduce_res_64968 = redout_65734;
                    ((float *) mem_66589.mem)[i_65742 * n_m_64072 + i_65738] =
                        defunc_2_reduce_res_64968;
                }
            }
            if (memblock_set(ctx, &ext_mem_67250, &mem_66589, "mem_66589") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67242, &mem_66585, "mem_66585") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_66589, "mem_66589") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_66585, "mem_66585") != 0)
                return 1;
        } else {
            bool match_lit_64982 = (int64_t) 1 == degree_64067;
            int64_t binop_x_66751 = m_64063 * n_m_64072;
            int64_t binop_y_66752 = (int64_t) 4 * binop_x_66751;
            int64_t bytes_66750 = smax64((int64_t) 0, binop_y_66752);
            int64_t binop_y_66779 = (int64_t) 8 * n_64064;
            int64_t bytes_66778 = smax64((int64_t) 0, binop_y_66779);
            int64_t binop_y_66794 = (int64_t) 4 * n_64064;
            int64_t bytes_66793 = smax64((int64_t) 0, binop_y_66794);
            int64_t binop_y_66869 = (int64_t) 4 * q_64066;
            int64_t bytes_66868 = smax64((int64_t) 0, binop_y_66869);
            int64_t binop_x_66974 = m_64063 * n_m_64072;
            int64_t binop_y_66975 = (int64_t) 4 * binop_x_66974;
            int64_t bytes_66973 = smax64((int64_t) 0, binop_y_66975);
            int64_t binop_y_67002 = (int64_t) 8 * n_64064;
            int64_t bytes_67001 = smax64((int64_t) 0, binop_y_67002);
            int64_t binop_y_67017 = (int64_t) 4 * n_64064;
            int64_t bytes_67016 = smax64((int64_t) 0, binop_y_67017);
            int64_t binop_y_67092 = (int64_t) 4 * q_64066;
            int64_t bytes_67091 = smax64((int64_t) 0, binop_y_67092);
            struct memblock ext_mem_67234;
            
            ext_mem_67234.references = NULL;
            
            struct memblock ext_mem_67226;
            
            ext_mem_67226.references = NULL;
            if (match_lit_64982) {
                struct memblock mem_66753;
                
                mem_66753.references = NULL;
                if (memblock_alloc(ctx, &mem_66753, bytes_66750, "mem_66753")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66757;
                
                mem_66757.references = NULL;
                if (memblock_alloc(ctx, &mem_66757, bytes_66750, "mem_66757")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_66780_cached_sizze_67596 < (size_t) bytes_66778) {
                    mem_66780 = realloc(mem_66780, bytes_66778);
                    mem_66780_cached_sizze_67596 = bytes_66778;
                }
                if (mem_66795_cached_sizze_67597 < (size_t) bytes_66793) {
                    mem_66795 = realloc(mem_66795, bytes_66793);
                    mem_66795_cached_sizze_67597 = bytes_66793;
                }
                if (mem_66798_cached_sizze_67598 < (size_t) bytes_66778) {
                    mem_66798 = realloc(mem_66798, bytes_66778);
                    mem_66798_cached_sizze_67598 = bytes_66778;
                }
                if (mem_66825_cached_sizze_67599 < (size_t) bytes_66793) {
                    mem_66825 = realloc(mem_66825, bytes_66793);
                    mem_66825_cached_sizze_67599 = bytes_66793;
                }
                if (mem_66828_cached_sizze_67600 < (size_t) bytes_66778) {
                    mem_66828 = realloc(mem_66828, bytes_66778);
                    mem_66828_cached_sizze_67600 = bytes_66778;
                }
                if (mem_66831_cached_sizze_67601 < (size_t) bytes_66778) {
                    mem_66831 = realloc(mem_66831, bytes_66778);
                    mem_66831_cached_sizze_67601 = bytes_66778;
                }
                if (mem_66870_cached_sizze_67602 < (size_t) bytes_66868) {
                    mem_66870 = realloc(mem_66870, bytes_66868);
                    mem_66870_cached_sizze_67602 = bytes_66868;
                }
                if (mem_66907_cached_sizze_67603 < (size_t) bytes_66868) {
                    mem_66907 = realloc(mem_66907, bytes_66868);
                    mem_66907_cached_sizze_67603 = bytes_66868;
                }
                if (mem_66910_cached_sizze_67604 < (size_t) bytes_66868) {
                    mem_66910 = realloc(mem_66910, bytes_66868);
                    mem_66910_cached_sizze_67604 = bytes_66868;
                }
                for (int64_t i_65798 = 0; i_65798 < m_64063; i_65798++) {
                    int64_t discard_65749;
                    int64_t scanacc_65745 = (int64_t) 0;
                    
                    for (int64_t i_65747 = 0; i_65747 < n_64064; i_65747++) {
                        float x_64993 = ((float *) Y_mem_66010.mem)[i_65798 *
                                                                    n_64064 +
                                                                    i_65747];
                        bool isnan_res_64994;
                        
                        isnan_res_64994 = futrts_isnan32(x_64993);
                        
                        bool defunc_0_p_res_64995 = !isnan_res_64994;
                        int64_t defunc_0_f_res_64996 =
                                btoi_bool_i64(defunc_0_p_res_64995);
                        int64_t defunc_1_op_res_64992 =
                                add64(defunc_0_f_res_64996, scanacc_65745);
                        
                        ((int64_t *) mem_66780)[i_65747] =
                            defunc_1_op_res_64992;
                        
                        int64_t scanacc_tmp_67504 = defunc_1_op_res_64992;
                        
                        scanacc_65745 = scanacc_tmp_67504;
                    }
                    discard_65749 = scanacc_65745;
                    
                    int64_t last_res_64997 = ((int64_t *) mem_66780)[i_64078];
                    
                    for (int64_t i_67506 = 0; i_67506 < n_64064; i_67506++) {
                        ((float *) mem_66795)[i_67506] = 0.0F;
                    }
                    for (int64_t i_67507 = 0; i_67507 < n_64064; i_67507++) {
                        ((int64_t *) mem_66798)[i_67507] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65750 = 0; write_iter_65750 <
                         n_64064; write_iter_65750++) {
                        float write_iv_65753 =
                              ((float *) Y_mem_66010.mem)[i_65798 * n_64064 +
                                                          write_iter_65750];
                        int64_t write_iv_65754 =
                                ((int64_t *) mem_66780)[write_iter_65750];
                        bool isnan_res_65005;
                        
                        isnan_res_65005 = futrts_isnan32(write_iv_65753);
                        
                        bool defunc_0_p_res_65006 = !isnan_res_65005;
                        int64_t defunc_1_f_res_65007;
                        
                        if (defunc_0_p_res_65006) {
                            int64_t defunc_1_f_res_t_res_65008 =
                                    sub64(write_iv_65754, (int64_t) 1);
                            
                            defunc_1_f_res_65007 = defunc_1_f_res_t_res_65008;
                        } else {
                            defunc_1_f_res_65007 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_65007) &&
                            slt64(defunc_1_f_res_65007, n_64064)) {
                            ((int64_t *) mem_66798)[defunc_1_f_res_65007] =
                                write_iter_65750;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_65007) &&
                            slt64(defunc_1_f_res_65007, n_64064)) {
                            memmove(mem_66795 + defunc_1_f_res_65007 *
                                    (int64_t) 4, Y_mem_66010.mem + (i_65798 *
                                                                    n_64064 +
                                                                    write_iter_65750) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_65015 = sub64(last_res_64997,
                                                  min_res_64084);
                    float i64_res_65016 = sitofp_i64_f32(last_res_64997);
                    float x_65017 = i64_res_64091 - i64_res_65016;
                    float max_arg_65018 = x_65017 / 2.0F;
                    float max_res_65019 = fmax32(0.0F, max_arg_65018);
                    
                    for (int64_t i_65764 = 0; i_65764 < n_64064; i_65764++) {
                        int64_t x_65023 = ((int64_t *) mem_66798)[i_65764];
                        int64_t defunc_0_f_res_65024 = add64((int64_t) 1,
                                                             x_65023);
                        bool cond_65025 = slt64(defunc_0_f_res_65024,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_65026;
                        
                        if (cond_65025) {
                            defunc_0_f_res_65026 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_65026 = defunc_0_f_res_65024;
                        }
                        
                        float defunc_0_f_res_65027 = sitofp_i64_f32(x_65023);
                        
                        ((float *) mem_66825)[i_65764] = defunc_0_f_res_65027;
                        ((int64_t *) mem_66828)[i_65764] = defunc_0_f_res_65026;
                        ((int64_t *) mem_66831)[i_65764] = defunc_0_f_res_65024;
                    }
                    for (int64_t i_65770 = 0; i_65770 < q_64066; i_65770++) {
                        bool cond_65033 = sle64(last_res_64997, i_65770);
                        float defunc_0_f_res_65034;
                        
                        if (cond_65033) {
                            defunc_0_f_res_65034 = 0.0F;
                        } else {
                            defunc_0_f_res_65034 = 1.0F;
                        }
                        ((float *) mem_66870)[i_65770] = defunc_0_f_res_65034;
                    }
                    for (int64_t i_65791 = 0; i_65791 < n_m_64072; i_65791++) {
                        int64_t min_arg_65038 = mul64(jump_64068, i_65791);
                        int64_t min_res_65039 = smin64(i_64078, min_arg_65038);
                        int64_t defunc_0_g_res_65040 = add64((int64_t) 1,
                                                             min_res_65039);
                        bool nearest_idx_65041;
                        int64_t nearest_idx_65042;
                        int64_t nearest_idx_65043;
                        bool loop_while_65044;
                        int64_t low_65045;
                        int64_t high_65046;
                        
                        loop_while_65044 = x_64079;
                        low_65045 = (int64_t) 0;
                        high_65046 = i_64078;
                        while (loop_while_65044) {
                            int64_t x_65047 = add64(low_65045, high_65046);
                            int64_t mid_65048 = sdiv64(x_65047, (int64_t) 2);
                            bool x_65049 = sle64((int64_t) 0, mid_65048);
                            bool y_65050 = slt64(mid_65048, n_64064);
                            bool bounds_check_65051 = x_65049 && y_65050;
                            bool index_certs_65052;
                            
                            if (!bounds_check_65051) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_65048,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66757,
                                                   "mem_66757") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66753,
                                                   "mem_66753") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67226,
                                                   "ext_mem_67226") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67234,
                                                   "ext_mem_67234") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67242,
                                                   "ext_mem_67242") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67250,
                                                   "ext_mem_67250") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_65053 =
                                    ((int64_t *) mem_66828)[mid_65048];
                            bool cond_65054 = sle64(defunc_0_g_res_65040,
                                                    x_65053);
                            int64_t loopres_65055;
                            int64_t loopres_65056;
                            
                            if (cond_65054) {
                                int64_t loopres_t_res_65057 = sub64(mid_65048,
                                                                    (int64_t) 1);
                                
                                loopres_65055 = low_65045;
                                loopres_65056 = loopres_t_res_65057;
                            } else {
                                int64_t loopres_f_res_65058 = add64((int64_t) 1,
                                                                    mid_65048);
                                
                                loopres_65055 = loopres_f_res_65058;
                                loopres_65056 = high_65046;
                            }
                            
                            bool loop_cond_65059 = sle64(loopres_65055,
                                                         loopres_65056);
                            bool loop_while_tmp_67516 = loop_cond_65059;
                            int64_t low_tmp_67517 = loopres_65055;
                            int64_t high_tmp_67518 = loopres_65056;
                            
                            loop_while_65044 = loop_while_tmp_67516;
                            low_65045 = low_tmp_67517;
                            high_65046 = high_tmp_67518;
                        }
                        nearest_idx_65041 = loop_while_65044;
                        nearest_idx_65042 = low_65045;
                        nearest_idx_65043 = high_65046;
                        
                        int64_t max_arg_65060 = sub64(nearest_idx_65042,
                                                      min_res_64084);
                        int64_t max_res_65061 = smax64((int64_t) 0,
                                                       max_arg_65060);
                        int64_t j_65062 = add64(min_res_64084, max_res_65061);
                        int64_t i_p_m_t_s_65063 = add64(m_64090, max_res_65061);
                        bool zzero_leq_i_p_m_t_s_65064 = sle64((int64_t) 0,
                                                               i_p_m_t_s_65063);
                        bool i_p_m_t_s_leq_w_65065 = slt64(i_p_m_t_s_65063,
                                                           n_64064);
                        bool zzero_lte_i_65066 = sle64((int64_t) 0,
                                                       max_res_65061);
                        bool i_lte_j_65067 = sle64(max_res_65061, j_65062);
                        bool y_65068 = i_p_m_t_s_leq_w_65065 &&
                             zzero_lte_i_65066;
                        bool y_65069 = zzero_leq_i_p_m_t_s_65064 && y_65068;
                        bool y_65070 = i_lte_j_65067 && y_65069;
                        bool forwards_ok_65071 = zzero_lte_i_65066 && y_65070;
                        bool ok_or_empty_65072 = empty_slice_64089 ||
                             forwards_ok_65071;
                        bool index_certs_65073;
                        
                        if (!ok_or_empty_65072) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_65061,
                                          ":", (long long) j_65062,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66757, "mem_66757") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66753, "mem_66753") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67226,
                                               "ext_mem_67226") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67234,
                                               "ext_mem_67234") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_65075;
                        int64_t redout_65772 = (int64_t) 0;
                        
                        for (int64_t i_65773 = 0; i_65773 < min_res_64084;
                             i_65773++) {
                            int64_t slice_65933 = max_res_65061 + i_65773;
                            int64_t x_65079 =
                                    ((int64_t *) mem_66831)[slice_65933];
                            int64_t abs_arg_65080 = sub64(x_65079,
                                                          defunc_0_g_res_65040);
                            int64_t abs_res_65081 = abs64(abs_arg_65080);
                            int64_t defunc_1_op_res_65078 = add64(abs_res_65081,
                                                                  redout_65772);
                            int64_t redout_tmp_67519 = defunc_1_op_res_65078;
                            
                            redout_65772 = redout_tmp_67519;
                        }
                        defunc_2_reduce_res_65075 = redout_65772;
                        
                        int64_t idx_65082;
                        int64_t idx_65083;
                        int64_t idx_65084;
                        int64_t idx_65085;
                        int64_t best_idx_65087;
                        int64_t last_idx_65088;
                        int64_t best_sum_65089;
                        int64_t curr_sum_65090;
                        
                        best_idx_65087 = max_res_65061;
                        last_idx_65088 = max_res_65061;
                        best_sum_65089 = defunc_2_reduce_res_65075;
                        curr_sum_65090 = defunc_2_reduce_res_65075;
                        for (int64_t j_65086 = 0; j_65086 < min_res_64084;
                             j_65086++) {
                            int64_t new_idx_65091 = add64(max_res_65061,
                                                          j_65086);
                            int64_t x_65092 = add64(min_res_64084,
                                                    new_idx_65091);
                            bool cond_65093 = slt64(last_res_64997, x_65092);
                            int64_t new_sum_65094;
                            
                            if (cond_65093) {
                                new_sum_65094 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_65095 = sle64((int64_t) 0,
                                                     last_idx_65088);
                                bool y_65096 = slt64(last_idx_65088, n_64064);
                                bool bounds_check_65097 = x_65095 && y_65096;
                                bool index_certs_65098;
                                
                                if (!bounds_check_65097) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_65088,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66757,
                                                       "mem_66757") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66753,
                                                       "mem_66753") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67226,
                                                       "ext_mem_67226") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67234,
                                                       "ext_mem_67234") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67242,
                                                       "ext_mem_67242") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67250,
                                                       "ext_mem_67250") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65099 =
                                        ((int64_t *) mem_66831)[last_idx_65088];
                                int64_t binop_p_65100 =
                                        sub64(defunc_0_g_res_65040, y_65099);
                                int64_t defunc_0_f_res_65101 =
                                        abs64(binop_p_65100);
                                int64_t x_65102 = sub64(curr_sum_65090,
                                                        defunc_0_f_res_65101);
                                int64_t min_arg_65103 = add64(min_res_64084,
                                                              last_idx_65088);
                                int64_t min_res_65104 = smin64(i_64078,
                                                               min_arg_65103);
                                bool x_65105 = sle64((int64_t) 0,
                                                     min_res_65104);
                                bool y_65106 = slt64(min_res_65104, n_64064);
                                bool bounds_check_65107 = x_65105 && y_65106;
                                bool index_certs_65108;
                                
                                if (!bounds_check_65107) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_65104,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66757,
                                                       "mem_66757") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66753,
                                                       "mem_66753") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67226,
                                                       "ext_mem_67226") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67234,
                                                       "ext_mem_67234") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67242,
                                                       "ext_mem_67242") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67250,
                                                       "ext_mem_67250") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65109 =
                                        ((int64_t *) mem_66831)[min_res_65104];
                                int64_t binop_p_65110 =
                                        sub64(defunc_0_g_res_65040, y_65109);
                                int64_t defunc_0_f_res_65111 =
                                        abs64(binop_p_65110);
                                int64_t new_sum_f_res_65112 = add64(x_65102,
                                                                    defunc_0_f_res_65111);
                                
                                new_sum_65094 = new_sum_f_res_65112;
                            }
                            
                            bool cond_65113 = sle64(new_sum_65094,
                                                    best_sum_65089);
                            int64_t loopres_65114;
                            
                            if (cond_65113) {
                                loopres_65114 = new_idx_65091;
                            } else {
                                loopres_65114 = best_idx_65087;
                            }
                            
                            int64_t loopres_65115;
                            
                            if (cond_65113) {
                                loopres_65115 = new_sum_65094;
                            } else {
                                loopres_65115 = best_sum_65089;
                            }
                            
                            int64_t best_idx_tmp_67520 = loopres_65114;
                            int64_t last_idx_tmp_67521 = new_idx_65091;
                            int64_t best_sum_tmp_67522 = loopres_65115;
                            int64_t curr_sum_tmp_67523 = new_sum_65094;
                            
                            best_idx_65087 = best_idx_tmp_67520;
                            last_idx_65088 = last_idx_tmp_67521;
                            best_sum_65089 = best_sum_tmp_67522;
                            curr_sum_65090 = curr_sum_tmp_67523;
                        }
                        idx_65082 = best_idx_65087;
                        idx_65083 = last_idx_65088;
                        idx_65084 = best_sum_65089;
                        idx_65085 = curr_sum_65090;
                        
                        int64_t min_res_65116 = smin64(min_arg_65015,
                                                       idx_65082);
                        int64_t x_65117 = add64(min_res_64084, min_res_65116);
                        int64_t r_65118 = sub64(x_65117, (int64_t) 1);
                        bool x_65119 = sle64((int64_t) 0, r_65118);
                        bool y_65120 = slt64(r_65118, n_64064);
                        bool bounds_check_65121 = x_65119 && y_65120;
                        bool index_certs_65122;
                        
                        if (!bounds_check_65121) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_65118,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66757, "mem_66757") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66753, "mem_66753") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67226,
                                               "ext_mem_67226") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67234,
                                               "ext_mem_67234") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65123 = ((int64_t *) mem_66798)[r_65118];
                        int64_t abs_arg_65124 = sub64(x_65123, min_res_65039);
                        int64_t abs_res_65125 = abs64(abs_arg_65124);
                        bool x_65126 = sle64((int64_t) 0, min_res_65116);
                        bool y_65127 = slt64(min_res_65116, n_64064);
                        bool bounds_check_65128 = x_65126 && y_65127;
                        bool index_certs_65129;
                        
                        if (!bounds_check_65128) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_65116,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66757, "mem_66757") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66753, "mem_66753") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67226,
                                               "ext_mem_67226") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67234,
                                               "ext_mem_67234") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65130 =
                                ((int64_t *) mem_66798)[min_res_65116];
                        int64_t abs_arg_65131 = sub64(x_65130, min_res_65039);
                        int64_t abs_res_65132 = abs64(abs_arg_65131);
                        int64_t max_res_65133 = smax64(abs_res_65125,
                                                       abs_res_65132);
                        float defunc_0_f_res_65134 =
                              sitofp_i64_f32(max_res_65133);
                        float defunc_1_f_res_65135 = max_res_65019 +
                              defunc_0_f_res_65134;
                        float defunc_0_f_res_65136 =
                              sitofp_i64_f32(min_res_65039);
                        float defunc_2_reduce_res_65157;
                        float defunc_2_reduce_res_65158;
                        float defunc_2_reduce_res_65159;
                        float redout_65776;
                        float redout_65777;
                        float redout_65778;
                        
                        redout_65776 = 0.0F;
                        redout_65777 = 0.0F;
                        redout_65778 = 0.0F;
                        for (int64_t i_65781 = 0; i_65781 < q_64066;
                             i_65781++) {
                            float x_65172 = ((float *) mem_66870)[i_65781];
                            bool cond_65173 = sle64(last_res_64997, i_65781);
                            float defunc_0_f_res_65174;
                            
                            if (cond_65173) {
                                defunc_0_f_res_65174 = 0.0F;
                            } else {
                                int64_t i_65175 = add64(min_res_65116, i_65781);
                                float x_65176 = ((float *) mem_66825)[i_65175];
                                float defunc_0_f_res_f_res_65177 = 1.0F +
                                      x_65176;
                                
                                defunc_0_f_res_65174 =
                                    defunc_0_f_res_f_res_65177;
                            }
                            
                            float x_j_65178 = defunc_0_f_res_65174 -
                                  defunc_0_f_res_65136;
                            float abs_res_65179 = (float) fabs(x_j_65178);
                            float tmp1_65180 = abs_res_65179 /
                                  defunc_1_f_res_65135;
                            float x_65181 = tmp1_65180 * tmp1_65180;
                            float y_65182 = tmp1_65180 * x_65181;
                            float tmp2_65183 = 1.0F - y_65182;
                            float x_65184 = tmp2_65183 * tmp2_65183;
                            float tmp3_65185 = tmp2_65183 * x_65184;
                            float tmp4_65186 = x_65172 * tmp3_65185;
                            float defunc_1_f_res_65187 = x_j_65178 * tmp4_65186;
                            float defunc_1_f_res_65188 = x_j_65178 *
                                  defunc_1_f_res_65187;
                            float defunc_1_op_res_65164 = tmp4_65186 +
                                  redout_65776;
                            float defunc_1_op_res_65167 = defunc_1_f_res_65187 +
                                  redout_65777;
                            float defunc_1_op_res_65170 = defunc_1_f_res_65188 +
                                  redout_65778;
                            
                            ((float *) mem_66907)[i_65781] =
                                defunc_1_f_res_65187;
                            ((float *) mem_66910)[i_65781] = tmp4_65186;
                            
                            float redout_tmp_67524 = defunc_1_op_res_65164;
                            float redout_tmp_67525 = defunc_1_op_res_65167;
                            float redout_tmp_67526 = defunc_1_op_res_65170;
                            
                            redout_65776 = redout_tmp_67524;
                            redout_65777 = redout_tmp_67525;
                            redout_65778 = redout_tmp_67526;
                        }
                        defunc_2_reduce_res_65157 = redout_65776;
                        defunc_2_reduce_res_65158 = redout_65777;
                        defunc_2_reduce_res_65159 = redout_65778;
                        
                        float x_65194 = defunc_2_reduce_res_65157 *
                              defunc_2_reduce_res_65159;
                        float y_65195 = defunc_2_reduce_res_65158 *
                              defunc_2_reduce_res_65158;
                        float y_65196 = x_65194 - y_65195;
                        float det1_65197 = 1.0F / y_65196;
                        float a11_65198 = defunc_2_reduce_res_65159 *
                              det1_65197;
                        float negate_arg_65199 = defunc_2_reduce_res_65158 *
                              det1_65197;
                        float b11_65200 = 0.0F - negate_arg_65199;
                        float c11_65201 = defunc_2_reduce_res_65157 *
                              det1_65197;
                        float defunc_2_reduce_res_65202;
                        float defunc_2_reduce_res_65203;
                        float redout_65784;
                        float redout_65785;
                        
                        redout_65784 = 0.0F;
                        redout_65785 = 0.0F;
                        for (int64_t i_65786 = 0; i_65786 < q_64066;
                             i_65786++) {
                            float x_65211 = ((float *) mem_66910)[i_65786];
                            float x_65212 = ((float *) mem_66907)[i_65786];
                            bool cond_65213 = sle64(last_res_64997, i_65786);
                            float defunc_0_f_res_65214;
                            
                            if (cond_65213) {
                                defunc_0_f_res_65214 = 0.0F;
                            } else {
                                int64_t i_65215 = add64(min_res_65116, i_65786);
                                float x_65216 = ((float *) mem_66795)[i_65215];
                                
                                defunc_0_f_res_65214 = x_65216;
                            }
                            
                            float x_65217 = a11_65198 * x_65211;
                            float y_65218 = b11_65200 * x_65212;
                            float x_65219 = x_65217 + y_65218;
                            float defunc_9_fit_fun_res_65220 =
                                  defunc_0_f_res_65214 * x_65219;
                            float x_65221 = b11_65200 * x_65211;
                            float y_65222 = c11_65201 * x_65212;
                            float x_65223 = x_65221 + y_65222;
                            float defunc_9_slope_fun_res_65224 =
                                  defunc_0_f_res_65214 * x_65223;
                            float defunc_1_op_res_65206 =
                                  defunc_9_fit_fun_res_65220 + redout_65784;
                            float defunc_1_op_res_65209 =
                                  defunc_9_slope_fun_res_65224 + redout_65785;
                            float redout_tmp_67529 = defunc_1_op_res_65206;
                            float redout_tmp_67530 = defunc_1_op_res_65209;
                            
                            redout_65784 = redout_tmp_67529;
                            redout_65785 = redout_tmp_67530;
                        }
                        defunc_2_reduce_res_65202 = redout_65784;
                        defunc_2_reduce_res_65203 = redout_65785;
                        ((float *) mem_66753.mem)[i_65798 * n_m_64072 +
                                                  i_65791] =
                            defunc_2_reduce_res_65202;
                        ((float *) mem_66757.mem)[i_65798 * n_m_64072 +
                                                  i_65791] =
                            defunc_2_reduce_res_65203;
                    }
                }
                if (memblock_set(ctx, &ext_mem_67234, &mem_66753,
                                 "mem_66753") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67226, &mem_66757,
                                 "mem_66757") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66757, "mem_66757") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66753, "mem_66753") != 0)
                    return 1;
            } else {
                struct memblock mem_66976;
                
                mem_66976.references = NULL;
                if (memblock_alloc(ctx, &mem_66976, bytes_66973, "mem_66976")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_66980;
                
                mem_66980.references = NULL;
                if (memblock_alloc(ctx, &mem_66980, bytes_66973, "mem_66980")) {
                    err = 1;
                    goto cleanup;
                }
                if (mem_67003_cached_sizze_67605 < (size_t) bytes_67001) {
                    mem_67003 = realloc(mem_67003, bytes_67001);
                    mem_67003_cached_sizze_67605 = bytes_67001;
                }
                if (mem_67018_cached_sizze_67606 < (size_t) bytes_67016) {
                    mem_67018 = realloc(mem_67018, bytes_67016);
                    mem_67018_cached_sizze_67606 = bytes_67016;
                }
                if (mem_67021_cached_sizze_67607 < (size_t) bytes_67001) {
                    mem_67021 = realloc(mem_67021, bytes_67001);
                    mem_67021_cached_sizze_67607 = bytes_67001;
                }
                if (mem_67048_cached_sizze_67608 < (size_t) bytes_67016) {
                    mem_67048 = realloc(mem_67048, bytes_67016);
                    mem_67048_cached_sizze_67608 = bytes_67016;
                }
                if (mem_67051_cached_sizze_67609 < (size_t) bytes_67001) {
                    mem_67051 = realloc(mem_67051, bytes_67001);
                    mem_67051_cached_sizze_67609 = bytes_67001;
                }
                if (mem_67054_cached_sizze_67610 < (size_t) bytes_67001) {
                    mem_67054 = realloc(mem_67054, bytes_67001);
                    mem_67054_cached_sizze_67610 = bytes_67001;
                }
                if (mem_67093_cached_sizze_67611 < (size_t) bytes_67091) {
                    mem_67093 = realloc(mem_67093, bytes_67091);
                    mem_67093_cached_sizze_67611 = bytes_67091;
                }
                if (mem_67130_cached_sizze_67612 < (size_t) bytes_67091) {
                    mem_67130 = realloc(mem_67130, bytes_67091);
                    mem_67130_cached_sizze_67612 = bytes_67091;
                }
                if (mem_67133_cached_sizze_67613 < (size_t) bytes_67091) {
                    mem_67133 = realloc(mem_67133, bytes_67091);
                    mem_67133_cached_sizze_67613 = bytes_67091;
                }
                if (mem_67160_cached_sizze_67614 < (size_t) bytes_67091) {
                    mem_67160 = realloc(mem_67160, bytes_67091);
                    mem_67160_cached_sizze_67614 = bytes_67091;
                }
                if (mem_67163_cached_sizze_67615 < (size_t) bytes_67091) {
                    mem_67163 = realloc(mem_67163, bytes_67091);
                    mem_67163_cached_sizze_67615 = bytes_67091;
                }
                for (int64_t i_65864 = 0; i_65864 < m_64063; i_65864++) {
                    int64_t discard_65806;
                    int64_t scanacc_65802 = (int64_t) 0;
                    
                    for (int64_t i_65804 = 0; i_65804 < n_64064; i_65804++) {
                        float x_65235 = ((float *) Y_mem_66010.mem)[i_65864 *
                                                                    n_64064 +
                                                                    i_65804];
                        bool isnan_res_65236;
                        
                        isnan_res_65236 = futrts_isnan32(x_65235);
                        
                        bool defunc_0_p_res_65237 = !isnan_res_65236;
                        int64_t defunc_0_f_res_65238 =
                                btoi_bool_i64(defunc_0_p_res_65237);
                        int64_t defunc_1_op_res_65234 =
                                add64(defunc_0_f_res_65238, scanacc_65802);
                        
                        ((int64_t *) mem_67003)[i_65804] =
                            defunc_1_op_res_65234;
                        
                        int64_t scanacc_tmp_67533 = defunc_1_op_res_65234;
                        
                        scanacc_65802 = scanacc_tmp_67533;
                    }
                    discard_65806 = scanacc_65802;
                    
                    int64_t last_res_65239 = ((int64_t *) mem_67003)[i_64078];
                    
                    for (int64_t i_67535 = 0; i_67535 < n_64064; i_67535++) {
                        ((float *) mem_67018)[i_67535] = 0.0F;
                    }
                    for (int64_t i_67536 = 0; i_67536 < n_64064; i_67536++) {
                        ((int64_t *) mem_67021)[i_67536] = (int64_t) -1;
                    }
                    for (int64_t write_iter_65807 = 0; write_iter_65807 <
                         n_64064; write_iter_65807++) {
                        float write_iv_65810 =
                              ((float *) Y_mem_66010.mem)[i_65864 * n_64064 +
                                                          write_iter_65807];
                        int64_t write_iv_65811 =
                                ((int64_t *) mem_67003)[write_iter_65807];
                        bool isnan_res_65247;
                        
                        isnan_res_65247 = futrts_isnan32(write_iv_65810);
                        
                        bool defunc_0_p_res_65248 = !isnan_res_65247;
                        int64_t defunc_1_f_res_65249;
                        
                        if (defunc_0_p_res_65248) {
                            int64_t defunc_1_f_res_t_res_65250 =
                                    sub64(write_iv_65811, (int64_t) 1);
                            
                            defunc_1_f_res_65249 = defunc_1_f_res_t_res_65250;
                        } else {
                            defunc_1_f_res_65249 = (int64_t) -1;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_65249) &&
                            slt64(defunc_1_f_res_65249, n_64064)) {
                            ((int64_t *) mem_67021)[defunc_1_f_res_65249] =
                                write_iter_65807;
                        }
                        if (sle64((int64_t) 0, defunc_1_f_res_65249) &&
                            slt64(defunc_1_f_res_65249, n_64064)) {
                            memmove(mem_67018 + defunc_1_f_res_65249 *
                                    (int64_t) 4, Y_mem_66010.mem + (i_65864 *
                                                                    n_64064 +
                                                                    write_iter_65807) *
                                    (int64_t) 4, (int64_t) 4);
                        }
                    }
                    
                    int64_t min_arg_65257 = sub64(last_res_65239,
                                                  min_res_64084);
                    float i64_res_65258 = sitofp_i64_f32(last_res_65239);
                    float x_65259 = i64_res_64091 - i64_res_65258;
                    float max_arg_65260 = x_65259 / 2.0F;
                    float max_res_65261 = fmax32(0.0F, max_arg_65260);
                    
                    for (int64_t i_65821 = 0; i_65821 < n_64064; i_65821++) {
                        int64_t x_65265 = ((int64_t *) mem_67021)[i_65821];
                        int64_t defunc_0_f_res_65266 = add64((int64_t) 1,
                                                             x_65265);
                        bool cond_65267 = slt64(defunc_0_f_res_65266,
                                                (int64_t) 0);
                        int64_t defunc_0_f_res_65268;
                        
                        if (cond_65267) {
                            defunc_0_f_res_65268 =
                                (int64_t) 9223372036854775807;
                        } else {
                            defunc_0_f_res_65268 = defunc_0_f_res_65266;
                        }
                        
                        float defunc_0_f_res_65269 = sitofp_i64_f32(x_65265);
                        
                        ((float *) mem_67048)[i_65821] = defunc_0_f_res_65269;
                        ((int64_t *) mem_67051)[i_65821] = defunc_0_f_res_65268;
                        ((int64_t *) mem_67054)[i_65821] = defunc_0_f_res_65266;
                    }
                    for (int64_t i_65827 = 0; i_65827 < q_64066; i_65827++) {
                        bool cond_65275 = sle64(last_res_65239, i_65827);
                        float defunc_0_f_res_65276;
                        
                        if (cond_65275) {
                            defunc_0_f_res_65276 = 0.0F;
                        } else {
                            defunc_0_f_res_65276 = 1.0F;
                        }
                        ((float *) mem_67093)[i_65827] = defunc_0_f_res_65276;
                    }
                    for (int64_t i_65857 = 0; i_65857 < n_m_64072; i_65857++) {
                        int64_t min_arg_65280 = mul64(jump_64068, i_65857);
                        int64_t min_res_65281 = smin64(i_64078, min_arg_65280);
                        int64_t defunc_0_g_res_65282 = add64((int64_t) 1,
                                                             min_res_65281);
                        bool nearest_idx_65283;
                        int64_t nearest_idx_65284;
                        int64_t nearest_idx_65285;
                        bool loop_while_65286;
                        int64_t low_65287;
                        int64_t high_65288;
                        
                        loop_while_65286 = x_64079;
                        low_65287 = (int64_t) 0;
                        high_65288 = i_64078;
                        while (loop_while_65286) {
                            int64_t x_65289 = add64(low_65287, high_65288);
                            int64_t mid_65290 = sdiv64(x_65289, (int64_t) 2);
                            bool x_65291 = sle64((int64_t) 0, mid_65290);
                            bool y_65292 = slt64(mid_65290, n_64064);
                            bool bounds_check_65293 = x_65291 && y_65292;
                            bool index_certs_65294;
                            
                            if (!bounds_check_65293) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) mid_65290,
                                              "] out of bounds for array of shape [",
                                              (long long) n_64064, "].",
                                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                if (memblock_unref(ctx, &mem_66980,
                                                   "mem_66980") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_66976,
                                                   "mem_66976") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67226,
                                                   "ext_mem_67226") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67234,
                                                   "ext_mem_67234") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67242,
                                                   "ext_mem_67242") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67250,
                                                   "ext_mem_67250") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67258,
                                                   "ext_mem_67258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_67266,
                                                   "ext_mem_67266") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_67396,
                                                   "mem_out_67396") != 0)
                                    return 1;
                                return 1;
                            }
                            
                            int64_t x_65295 =
                                    ((int64_t *) mem_67051)[mid_65290];
                            bool cond_65296 = sle64(defunc_0_g_res_65282,
                                                    x_65295);
                            int64_t loopres_65297;
                            int64_t loopres_65298;
                            
                            if (cond_65296) {
                                int64_t loopres_t_res_65299 = sub64(mid_65290,
                                                                    (int64_t) 1);
                                
                                loopres_65297 = low_65287;
                                loopres_65298 = loopres_t_res_65299;
                            } else {
                                int64_t loopres_f_res_65300 = add64((int64_t) 1,
                                                                    mid_65290);
                                
                                loopres_65297 = loopres_f_res_65300;
                                loopres_65298 = high_65288;
                            }
                            
                            bool loop_cond_65301 = sle64(loopres_65297,
                                                         loopres_65298);
                            bool loop_while_tmp_67545 = loop_cond_65301;
                            int64_t low_tmp_67546 = loopres_65297;
                            int64_t high_tmp_67547 = loopres_65298;
                            
                            loop_while_65286 = loop_while_tmp_67545;
                            low_65287 = low_tmp_67546;
                            high_65288 = high_tmp_67547;
                        }
                        nearest_idx_65283 = loop_while_65286;
                        nearest_idx_65284 = low_65287;
                        nearest_idx_65285 = high_65288;
                        
                        int64_t max_arg_65302 = sub64(nearest_idx_65284,
                                                      min_res_64084);
                        int64_t max_res_65303 = smax64((int64_t) 0,
                                                       max_arg_65302);
                        int64_t j_65304 = add64(min_res_64084, max_res_65303);
                        int64_t i_p_m_t_s_65305 = add64(m_64090, max_res_65303);
                        bool zzero_leq_i_p_m_t_s_65306 = sle64((int64_t) 0,
                                                               i_p_m_t_s_65305);
                        bool i_p_m_t_s_leq_w_65307 = slt64(i_p_m_t_s_65305,
                                                           n_64064);
                        bool zzero_lte_i_65308 = sle64((int64_t) 0,
                                                       max_res_65303);
                        bool i_lte_j_65309 = sle64(max_res_65303, j_65304);
                        bool y_65310 = i_p_m_t_s_leq_w_65307 &&
                             zzero_lte_i_65308;
                        bool y_65311 = zzero_leq_i_p_m_t_s_65306 && y_65310;
                        bool y_65312 = i_lte_j_65309 && y_65311;
                        bool forwards_ok_65313 = zzero_lte_i_65308 && y_65312;
                        bool ok_or_empty_65314 = empty_slice_64089 ||
                             forwards_ok_65313;
                        bool index_certs_65315;
                        
                        if (!ok_or_empty_65314) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) max_res_65303,
                                          ":", (long long) j_65304,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66980, "mem_66980") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66976, "mem_66976") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67226,
                                               "ext_mem_67226") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67234,
                                               "ext_mem_67234") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t defunc_2_reduce_res_65317;
                        int64_t redout_65829 = (int64_t) 0;
                        
                        for (int64_t i_65830 = 0; i_65830 < min_res_64084;
                             i_65830++) {
                            int64_t slice_65946 = max_res_65303 + i_65830;
                            int64_t x_65321 =
                                    ((int64_t *) mem_67054)[slice_65946];
                            int64_t abs_arg_65322 = sub64(x_65321,
                                                          defunc_0_g_res_65282);
                            int64_t abs_res_65323 = abs64(abs_arg_65322);
                            int64_t defunc_1_op_res_65320 = add64(abs_res_65323,
                                                                  redout_65829);
                            int64_t redout_tmp_67548 = defunc_1_op_res_65320;
                            
                            redout_65829 = redout_tmp_67548;
                        }
                        defunc_2_reduce_res_65317 = redout_65829;
                        
                        int64_t idx_65324;
                        int64_t idx_65325;
                        int64_t idx_65326;
                        int64_t idx_65327;
                        int64_t best_idx_65329;
                        int64_t last_idx_65330;
                        int64_t best_sum_65331;
                        int64_t curr_sum_65332;
                        
                        best_idx_65329 = max_res_65303;
                        last_idx_65330 = max_res_65303;
                        best_sum_65331 = defunc_2_reduce_res_65317;
                        curr_sum_65332 = defunc_2_reduce_res_65317;
                        for (int64_t j_65328 = 0; j_65328 < min_res_64084;
                             j_65328++) {
                            int64_t new_idx_65333 = add64(max_res_65303,
                                                          j_65328);
                            int64_t x_65334 = add64(min_res_64084,
                                                    new_idx_65333);
                            bool cond_65335 = slt64(last_res_65239, x_65334);
                            int64_t new_sum_65336;
                            
                            if (cond_65335) {
                                new_sum_65336 = (int64_t) 9223372036854775807;
                            } else {
                                bool x_65337 = sle64((int64_t) 0,
                                                     last_idx_65330);
                                bool y_65338 = slt64(last_idx_65330, n_64064);
                                bool bounds_check_65339 = x_65337 && y_65338;
                                bool index_certs_65340;
                                
                                if (!bounds_check_65339) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) last_idx_65330,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66980,
                                                       "mem_66980") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66976,
                                                       "mem_66976") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67226,
                                                       "ext_mem_67226") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67234,
                                                       "ext_mem_67234") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67242,
                                                       "ext_mem_67242") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67250,
                                                       "ext_mem_67250") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65341 =
                                        ((int64_t *) mem_67054)[last_idx_65330];
                                int64_t binop_p_65342 =
                                        sub64(defunc_0_g_res_65282, y_65341);
                                int64_t defunc_0_f_res_65343 =
                                        abs64(binop_p_65342);
                                int64_t x_65344 = sub64(curr_sum_65332,
                                                        defunc_0_f_res_65343);
                                int64_t min_arg_65345 = add64(min_res_64084,
                                                              last_idx_65330);
                                int64_t min_res_65346 = smin64(i_64078,
                                                               min_arg_65345);
                                bool x_65347 = sle64((int64_t) 0,
                                                     min_res_65346);
                                bool y_65348 = slt64(min_res_65346, n_64064);
                                bool bounds_check_65349 = x_65347 && y_65348;
                                bool index_certs_65350;
                                
                                if (!bounds_check_65349) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) min_res_65346,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_64064, "].",
                                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                                    if (memblock_unref(ctx, &mem_66980,
                                                       "mem_66980") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_66976,
                                                       "mem_66976") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67226,
                                                       "ext_mem_67226") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67234,
                                                       "ext_mem_67234") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67242,
                                                       "ext_mem_67242") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67250,
                                                       "ext_mem_67250") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67258,
                                                       "ext_mem_67258") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_67266,
                                                       "ext_mem_67266") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_67396,
                                                       "mem_out_67396") != 0)
                                        return 1;
                                    return 1;
                                }
                                
                                int64_t y_65351 =
                                        ((int64_t *) mem_67054)[min_res_65346];
                                int64_t binop_p_65352 =
                                        sub64(defunc_0_g_res_65282, y_65351);
                                int64_t defunc_0_f_res_65353 =
                                        abs64(binop_p_65352);
                                int64_t new_sum_f_res_65354 = add64(x_65344,
                                                                    defunc_0_f_res_65353);
                                
                                new_sum_65336 = new_sum_f_res_65354;
                            }
                            
                            bool cond_65355 = sle64(new_sum_65336,
                                                    best_sum_65331);
                            int64_t loopres_65356;
                            
                            if (cond_65355) {
                                loopres_65356 = new_idx_65333;
                            } else {
                                loopres_65356 = best_idx_65329;
                            }
                            
                            int64_t loopres_65357;
                            
                            if (cond_65355) {
                                loopres_65357 = new_sum_65336;
                            } else {
                                loopres_65357 = best_sum_65331;
                            }
                            
                            int64_t best_idx_tmp_67549 = loopres_65356;
                            int64_t last_idx_tmp_67550 = new_idx_65333;
                            int64_t best_sum_tmp_67551 = loopres_65357;
                            int64_t curr_sum_tmp_67552 = new_sum_65336;
                            
                            best_idx_65329 = best_idx_tmp_67549;
                            last_idx_65330 = last_idx_tmp_67550;
                            best_sum_65331 = best_sum_tmp_67551;
                            curr_sum_65332 = curr_sum_tmp_67552;
                        }
                        idx_65324 = best_idx_65329;
                        idx_65325 = last_idx_65330;
                        idx_65326 = best_sum_65331;
                        idx_65327 = curr_sum_65332;
                        
                        int64_t min_res_65358 = smin64(min_arg_65257,
                                                       idx_65324);
                        int64_t x_65359 = add64(min_res_64084, min_res_65358);
                        int64_t r_65360 = sub64(x_65359, (int64_t) 1);
                        bool x_65361 = sle64((int64_t) 0, r_65360);
                        bool y_65362 = slt64(r_65360, n_64064);
                        bool bounds_check_65363 = x_65361 && y_65362;
                        bool index_certs_65364;
                        
                        if (!bounds_check_65363) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) r_65360,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66980, "mem_66980") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66976, "mem_66976") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67226,
                                               "ext_mem_67226") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67234,
                                               "ext_mem_67234") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65365 = ((int64_t *) mem_67021)[r_65360];
                        int64_t abs_arg_65366 = sub64(x_65365, min_res_65281);
                        int64_t abs_res_65367 = abs64(abs_arg_65366);
                        bool x_65368 = sle64((int64_t) 0, min_res_65358);
                        bool y_65369 = slt64(min_res_65358, n_64064);
                        bool bounds_check_65370 = x_65368 && y_65369;
                        bool index_certs_65371;
                        
                        if (!bounds_check_65370) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) min_res_65358,
                                          "] out of bounds for array of shape [",
                                          (long long) n_64064, "].",
                                          "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  loess.fut:471:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:470:5-472:26\n   #9  loess.fut:454:1-494:26\n");
                            if (memblock_unref(ctx, &mem_66980, "mem_66980") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &mem_66976, "mem_66976") !=
                                0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67226,
                                               "ext_mem_67226") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67234,
                                               "ext_mem_67234") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67242,
                                               "ext_mem_67242") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67250,
                                               "ext_mem_67250") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67258,
                                               "ext_mem_67258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_67266,
                                               "ext_mem_67266") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_67396,
                                               "mem_out_67396") != 0)
                                return 1;
                            return 1;
                        }
                        
                        int64_t x_65372 =
                                ((int64_t *) mem_67021)[min_res_65358];
                        int64_t abs_arg_65373 = sub64(x_65372, min_res_65281);
                        int64_t abs_res_65374 = abs64(abs_arg_65373);
                        int64_t max_res_65375 = smax64(abs_res_65367,
                                                       abs_res_65374);
                        float defunc_0_f_res_65376 =
                              sitofp_i64_f32(max_res_65375);
                        float defunc_1_f_res_65377 = max_res_65261 +
                              defunc_0_f_res_65376;
                        float defunc_0_f_res_65378 =
                              sitofp_i64_f32(min_res_65281);
                        
                        for (int64_t i_65835 = 0; i_65835 < q_64066;
                             i_65835++) {
                            float x_65382 = ((float *) mem_67093)[i_65835];
                            bool cond_65383 = sle64(last_res_65239, i_65835);
                            float defunc_0_f_res_65384;
                            
                            if (cond_65383) {
                                defunc_0_f_res_65384 = 0.0F;
                            } else {
                                int64_t i_65385 = add64(min_res_65358, i_65835);
                                float x_65386 = ((float *) mem_67048)[i_65385];
                                float defunc_0_f_res_f_res_65387 = 1.0F +
                                      x_65386;
                                
                                defunc_0_f_res_65384 =
                                    defunc_0_f_res_f_res_65387;
                            }
                            
                            float x_j_65388 = defunc_0_f_res_65384 -
                                  defunc_0_f_res_65378;
                            float abs_res_65389 = (float) fabs(x_j_65388);
                            float tmp1_65390 = abs_res_65389 /
                                  defunc_1_f_res_65377;
                            float x_65391 = tmp1_65390 * tmp1_65390;
                            float y_65392 = tmp1_65390 * x_65391;
                            float tmp2_65393 = 1.0F - y_65392;
                            float x_65394 = tmp2_65393 * tmp2_65393;
                            float tmp3_65395 = tmp2_65393 * x_65394;
                            float tmp4_65396 = x_65382 * tmp3_65395;
                            
                            ((float *) mem_67130)[i_65835] = x_j_65388;
                            ((float *) mem_67133)[i_65835] = tmp4_65396;
                        }
                        
                        float defunc_2_reduce_res_65403;
                        float defunc_2_reduce_res_65404;
                        float defunc_2_reduce_res_65405;
                        float defunc_2_reduce_res_65406;
                        float defunc_2_reduce_res_65407;
                        float redout_65840;
                        float redout_65841;
                        float redout_65842;
                        float redout_65843;
                        float redout_65844;
                        
                        redout_65840 = 0.0F;
                        redout_65841 = 0.0F;
                        redout_65842 = 0.0F;
                        redout_65843 = 0.0F;
                        redout_65844 = 0.0F;
                        for (int64_t i_65847 = 0; i_65847 < q_64066;
                             i_65847++) {
                            float x_65425 = ((float *) mem_67130)[i_65847];
                            float x_65426 = ((float *) mem_67133)[i_65847];
                            float defunc_1_f_res_65427 = x_65425 * x_65426;
                            float defunc_1_f_res_65428 = x_65425 *
                                  defunc_1_f_res_65427;
                            float defunc_1_f_res_65429 = x_65425 *
                                  defunc_1_f_res_65428;
                            float defunc_1_f_res_65430 = x_65425 *
                                  defunc_1_f_res_65429;
                            float defunc_1_op_res_65412 = x_65426 +
                                  redout_65840;
                            float defunc_1_op_res_65415 = defunc_1_f_res_65427 +
                                  redout_65841;
                            float defunc_1_op_res_65418 = defunc_1_f_res_65428 +
                                  redout_65842;
                            float defunc_1_op_res_65421 = defunc_1_f_res_65429 +
                                  redout_65843;
                            float defunc_1_op_res_65424 = defunc_1_f_res_65430 +
                                  redout_65844;
                            
                            ((float *) mem_67160)[i_65847] =
                                defunc_1_f_res_65428;
                            ((float *) mem_67163)[i_65847] =
                                defunc_1_f_res_65427;
                            
                            float redout_tmp_67555 = defunc_1_op_res_65412;
                            float redout_tmp_67556 = defunc_1_op_res_65415;
                            float redout_tmp_67557 = defunc_1_op_res_65418;
                            float redout_tmp_67558 = defunc_1_op_res_65421;
                            float redout_tmp_67559 = defunc_1_op_res_65424;
                            
                            redout_65840 = redout_tmp_67555;
                            redout_65841 = redout_tmp_67556;
                            redout_65842 = redout_tmp_67557;
                            redout_65843 = redout_tmp_67558;
                            redout_65844 = redout_tmp_67559;
                        }
                        defunc_2_reduce_res_65403 = redout_65840;
                        defunc_2_reduce_res_65404 = redout_65841;
                        defunc_2_reduce_res_65405 = redout_65842;
                        defunc_2_reduce_res_65406 = redout_65843;
                        defunc_2_reduce_res_65407 = redout_65844;
                        
                        float x_65438 = defunc_2_reduce_res_65405 *
                              defunc_2_reduce_res_65407;
                        float y_65439 = defunc_2_reduce_res_65406 *
                              defunc_2_reduce_res_65406;
                        float a12_65440 = x_65438 - y_65439;
                        float x_65441 = defunc_2_reduce_res_65405 *
                              defunc_2_reduce_res_65406;
                        float y_65442 = defunc_2_reduce_res_65404 *
                              defunc_2_reduce_res_65407;
                        float b12_65443 = x_65441 - y_65442;
                        float x_65444 = defunc_2_reduce_res_65404 *
                              defunc_2_reduce_res_65406;
                        float y_65445 = defunc_2_reduce_res_65405 *
                              defunc_2_reduce_res_65405;
                        float c12_65446 = x_65444 - y_65445;
                        float x_65447 = defunc_2_reduce_res_65403 *
                              defunc_2_reduce_res_65407;
                        float b2_65448 = x_65447 - y_65445;
                        float x_65449 = defunc_2_reduce_res_65404 *
                              defunc_2_reduce_res_65405;
                        float y_65450 = defunc_2_reduce_res_65403 *
                              defunc_2_reduce_res_65406;
                        float c2_65451 = x_65449 - y_65450;
                        float x_65452 = defunc_2_reduce_res_65403 * a12_65440;
                        float y_65453 = defunc_2_reduce_res_65404 * b12_65443;
                        float x_65454 = x_65452 + y_65453;
                        float y_65455 = defunc_2_reduce_res_65405 * c12_65446;
                        float y_65456 = x_65454 + y_65455;
                        float det_65457 = 1.0F / y_65456;
                        float a12_65458 = a12_65440 * det_65457;
                        float b12_65459 = b12_65443 * det_65457;
                        float c12_65460 = c12_65446 * det_65457;
                        float b2_65461 = b2_65448 * det_65457;
                        float c2_65462 = c2_65451 * det_65457;
                        float defunc_2_reduce_res_65463;
                        float defunc_2_reduce_res_65464;
                        float redout_65850;
                        float redout_65851;
                        
                        redout_65850 = 0.0F;
                        redout_65851 = 0.0F;
                        for (int64_t i_65852 = 0; i_65852 < q_64066;
                             i_65852++) {
                            float x_65472 = ((float *) mem_67133)[i_65852];
                            float x_65473 = ((float *) mem_67163)[i_65852];
                            float x_65474 = ((float *) mem_67160)[i_65852];
                            bool cond_65475 = sle64(last_res_65239, i_65852);
                            float defunc_0_f_res_65476;
                            
                            if (cond_65475) {
                                defunc_0_f_res_65476 = 0.0F;
                            } else {
                                int64_t i_65477 = add64(min_res_65358, i_65852);
                                float x_65478 = ((float *) mem_67018)[i_65477];
                                
                                defunc_0_f_res_65476 = x_65478;
                            }
                            
                            float x_65479 = a12_65458 * x_65472;
                            float y_65480 = b12_65459 * x_65473;
                            float x_65481 = x_65479 + y_65480;
                            float y_65482 = c12_65460 * x_65474;
                            float x_65483 = x_65481 + y_65482;
                            float defunc_9_fit_fun_res_65484 =
                                  defunc_0_f_res_65476 * x_65483;
                            float x_65485 = b12_65459 * x_65472;
                            float y_65486 = b2_65461 * x_65473;
                            float x_65487 = x_65485 + y_65486;
                            float y_65488 = c2_65462 * x_65474;
                            float x_65489 = x_65487 + y_65488;
                            float defunc_9_slope_fun_res_65490 =
                                  defunc_0_f_res_65476 * x_65489;
                            float defunc_1_op_res_65467 =
                                  defunc_9_fit_fun_res_65484 + redout_65850;
                            float defunc_1_op_res_65470 =
                                  defunc_9_slope_fun_res_65490 + redout_65851;
                            float redout_tmp_67562 = defunc_1_op_res_65467;
                            float redout_tmp_67563 = defunc_1_op_res_65470;
                            
                            redout_65850 = redout_tmp_67562;
                            redout_65851 = redout_tmp_67563;
                        }
                        defunc_2_reduce_res_65463 = redout_65850;
                        defunc_2_reduce_res_65464 = redout_65851;
                        ((float *) mem_66976.mem)[i_65864 * n_m_64072 +
                                                  i_65857] =
                            defunc_2_reduce_res_65463;
                        ((float *) mem_66980.mem)[i_65864 * n_m_64072 +
                                                  i_65857] =
                            defunc_2_reduce_res_65464;
                    }
                }
                if (memblock_set(ctx, &ext_mem_67234, &mem_66976,
                                 "mem_66976") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67226, &mem_66980,
                                 "mem_66980") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66980, "mem_66980") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_66976, "mem_66976") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_67250, &ext_mem_67234,
                             "ext_mem_67234") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67242, &ext_mem_67226,
                             "ext_mem_67226") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67226, "ext_mem_67226") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67234, "ext_mem_67234") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_67266, &ext_mem_67250,
                         "ext_mem_67250") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_67258, &ext_mem_67242,
                         "ext_mem_67242") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67242, "ext_mem_67242") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67250, "ext_mem_67250") != 0)
            return 1;
    }
    
    bool cond_65493 = slt64((int64_t) 1, jump_64068);
    int64_t binop_x_67275 = m_64063 * n_64064;
    int64_t binop_y_67276 = (int64_t) 4 * binop_x_67275;
    int64_t bytes_67274 = smax64((int64_t) 0, binop_y_67276);
    int64_t ext_67322;
    
    if (cond_65493) {
        ext_67322 = n_64064;
    } else {
        ext_67322 = n_m_64072;
    }
    
    int64_t ext_67321;
    
    if (cond_65493) {
        ext_67321 = n_64064;
    } else {
        ext_67321 = n_m_64072;
    }
    
    struct memblock ext_mem_67318;
    
    ext_mem_67318.references = NULL;
    if (cond_65493) {
        bool zzero_65495 = jump_64068 == (int64_t) 0;
        bool nonzzero_65496 = !zzero_65495;
        bool nonzzero_cert_65497;
        
        if (!nonzzero_65496) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:438:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
            if (memblock_unref(ctx, &ext_mem_67318, "ext_mem_67318") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67258, "ext_mem_67258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67266, "ext_mem_67266") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") != 0)
                return 1;
            return 1;
        }
        
        int64_t y_65498 = sub64(n_m_64072, (int64_t) 1);
        struct memblock mem_67277;
        
        mem_67277.references = NULL;
        if (memblock_alloc(ctx, &mem_67277, bytes_67274, "mem_67277")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_65873 = 0; i_65873 < m_64063; i_65873++) {
            for (int64_t i_65869 = 0; i_65869 < n_64064; i_65869++) {
                int64_t m_v_65504 = sdiv64(i_65869, jump_64068);
                bool cond_65505 = m_v_65504 == y_65498;
                int64_t j_65506;
                
                if (cond_65505) {
                    int64_t j_t_res_65507 = sub64(m_v_65504, (int64_t) 1);
                    
                    j_65506 = j_t_res_65507;
                } else {
                    j_65506 = m_v_65504;
                }
                
                int64_t min_arg_65508 = mul64(jump_64068, j_65506);
                int64_t min_res_65509 = smin64(i_64078, min_arg_65508);
                int64_t defunc_0_m_fun_arg_65510 = add64((int64_t) 1, j_65506);
                int64_t min_arg_65511 = mul64(jump_64068,
                                              defunc_0_m_fun_arg_65510);
                int64_t min_res_65512 = smin64(i_64078, min_arg_65511);
                int64_t i64_arg_65513 = sub64(min_res_65512, min_res_65509);
                float i64_res_65514 = sitofp_i64_f32(i64_arg_65513);
                int64_t i64_arg_65515 = sub64(i_65869, min_res_65509);
                float i64_res_65516 = sitofp_i64_f32(i64_arg_65515);
                float u_65517 = i64_res_65516 / i64_res_65514;
                float u2_65518 = u_65517 * u_65517;
                float u3_65519 = u_65517 * u2_65518;
                float x_65520 = 2.0F * u3_65519;
                float y_65521 = 3.0F * u2_65518;
                float x_65522 = x_65520 - y_65521;
                float x_65523 = 1.0F + x_65522;
                bool x_65524 = sle64((int64_t) 0, j_65506);
                bool y_65525 = slt64(j_65506, n_m_64072);
                bool bounds_check_65526 = x_65524 && y_65525;
                bool index_certs_65527;
                
                if (!bounds_check_65526) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_65506,
                                  "] out of bounds for array of shape [",
                                  (long long) n_m_64072, "].",
                                  "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
                    if (memblock_unref(ctx, &mem_67277, "mem_67277") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67318, "ext_mem_67318") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67258, "ext_mem_67258") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67266, "ext_mem_67266") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") !=
                        0)
                        return 1;
                    return 1;
                }
                
                float y_65528 = ((float *) ext_mem_67266.mem)[i_65873 *
                                                              n_m_64072 +
                                                              j_65506];
                float x_65529 = x_65523 * y_65528;
                float x_65530 = y_65521 - x_65520;
                bool x_65531 = sle64((int64_t) 0, defunc_0_m_fun_arg_65510);
                bool y_65532 = slt64(defunc_0_m_fun_arg_65510, n_m_64072);
                bool bounds_check_65533 = x_65531 && y_65532;
                bool index_certs_65534;
                
                if (!bounds_check_65533) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [",
                                  (long long) defunc_0_m_fun_arg_65510,
                                  "] out of bounds for array of shape [",
                                  (long long) n_m_64072, "].",
                                  "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  loess.fut:491:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:490:5-492:29\n   #8  loess.fut:454:1-494:26\n");
                    if (memblock_unref(ctx, &mem_67277, "mem_67277") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67318, "ext_mem_67318") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67258, "ext_mem_67258") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_67266, "ext_mem_67266") !=
                        0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") !=
                        0)
                        return 1;
                    return 1;
                }
                
                float y_65535 = ((float *) ext_mem_67266.mem)[i_65873 *
                                                              n_m_64072 +
                                                              defunc_0_m_fun_arg_65510];
                float y_65536 = x_65530 * y_65535;
                float x_65537 = x_65529 + y_65536;
                float y_65538 = 2.0F * u2_65518;
                float x_65539 = u3_65519 - y_65538;
                float x_65540 = u_65517 + x_65539;
                float y_65541 = ((float *) ext_mem_67258.mem)[i_65873 *
                                                              n_m_64072 +
                                                              j_65506];
                float x_65542 = x_65540 * y_65541;
                float y_65543 = i64_res_65514 * x_65542;
                float x_65544 = x_65537 + y_65543;
                float x_65545 = u3_65519 - u2_65518;
                float y_65546 = ((float *) ext_mem_67258.mem)[i_65873 *
                                                              n_m_64072 +
                                                              defunc_0_m_fun_arg_65510];
                float x_65547 = x_65545 * y_65546;
                float y_65548 = i64_res_65514 * x_65547;
                float defunc_0_f_res_65549 = x_65544 + y_65548;
                
                ((float *) mem_67277.mem)[i_65873 * n_64064 + i_65869] =
                    defunc_0_f_res_65549;
            }
        }
        if (memblock_set(ctx, &ext_mem_67318, &mem_67277, "mem_67277") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_67277, "mem_67277") != 0)
            return 1;
    } else {
        bool dim_match_65550 = n_64064 == n_m_64072;
        bool empty_or_match_cert_65551;
        
        if (!dim_match_65550) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_64063, ", ", (long long) n_m_64072,
                          ") cannot match shape of type `[",
                          (long long) m_64063, "][", (long long) n_64064,
                          "]f32`.",
                          "-> #0  loess.fut:494:5-26\n   #1  loess.fut:454:1-494:26\n");
            if (memblock_unref(ctx, &ext_mem_67318, "ext_mem_67318") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67258, "ext_mem_67258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67266, "ext_mem_67266") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_67318, &ext_mem_67266,
                         "ext_mem_67266") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_67258, "ext_mem_67258") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67266, "ext_mem_67266") != 0)
        return 1;
    
    int64_t binop_x_67327 = m_64063 * n_64064;
    int64_t binop_y_67328 = (int64_t) 4 * binop_x_67327;
    int64_t bytes_67326 = smax64((int64_t) 0, binop_y_67328);
    struct memblock mem_67329;
    
    mem_67329.references = NULL;
    if (memblock_alloc(ctx, &mem_67329, bytes_67326, "mem_67329")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_67329.mem + (int64_t) 0, ext_mem_67318.mem + (int64_t) 0,
            m_64063 * n_64064 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_67318, "ext_mem_67318") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_67396, &mem_67329, "mem_67329") != 0)
        return 1;
    (*mem_out_p_67566).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_67566, &mem_out_67396, "mem_out_67396") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_67329, "mem_67329") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67318, "ext_mem_67318") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67258, "ext_mem_67258") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_67266, "ext_mem_67266") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_67396, "mem_out_67396") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_66031);
    free(mem_66046);
    free(mem_66049);
    free(mem_66076);
    free(mem_66079);
    free(mem_66082);
    free(mem_66121);
    free(mem_66194);
    free(mem_66209);
    free(mem_66212);
    free(mem_66239);
    free(mem_66242);
    free(mem_66245);
    free(mem_66284);
    free(mem_66387);
    free(mem_66402);
    free(mem_66405);
    free(mem_66432);
    free(mem_66435);
    free(mem_66438);
    free(mem_66477);
    free(mem_66602);
    free(mem_66617);
    free(mem_66620);
    free(mem_66647);
    free(mem_66650);
    free(mem_66653);
    free(mem_66692);
    free(mem_66718);
    free(mem_66780);
    free(mem_66795);
    free(mem_66798);
    free(mem_66825);
    free(mem_66828);
    free(mem_66831);
    free(mem_66870);
    free(mem_66907);
    free(mem_66910);
    free(mem_67003);
    free(mem_67018);
    free(mem_67021);
    free(mem_67048);
    free(mem_67051);
    free(mem_67054);
    free(mem_67093);
    free(mem_67130);
    free(mem_67133);
    free(mem_67160);
    free(mem_67163);
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_66010;
    
    Y_mem_66010.references = NULL;
    
    int64_t m_64063;
    int64_t n_64064;
    int64_t q_64066;
    int64_t degree_64067;
    int64_t jump_64068;
    int64_t jump_threshold_64069;
    int64_t q_threshold_64070;
    struct memblock mem_out_67396;
    
    mem_out_67396.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    Y_mem_66010 = in0->mem;
    m_64063 = in0->shape[0];
    n_64064 = in0->shape[1];
    q_64066 = in1;
    degree_64067 = in2;
    jump_64068 = in3;
    jump_threshold_64069 = in4;
    q_threshold_64070 = in5;
    if (!(m_64063 == in0->shape[0] && n_64064 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_67396, Y_mem_66010, m_64063,
                                n_64064, q_64066, degree_64067, jump_64068,
                                jump_threshold_64069, q_threshold_64070);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_67396;
            (*out0)->shape[0] = m_64063;
            (*out0)->shape[1] = n_64064;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
